/*! Build time : Mon Jan 18 2021 19:25:36 GMT+0800 (中国标准时间) */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dsf-designer"],{"0033":function(e,t,n){"use strict";(function(e){n("c975");var a=n("2909"),i=n("2d0f");function o(e,t){var n=e.parent,a=n.childNodes.indexOf(e),i="up"==t?a>0:a<=n.childNodes.length-1;if(i){var o="up"==t?a-1:a+1,s=n.childNodes[o];this.$set(n.data.children,o,e.data),this.$set(n.data.children,a,s.data),this.$set(n.childNodes,o,e),this.$set(n.childNodes,a,s)}}function s(){var e={id:"",level:0,label:"",headerAlign:"center",align:"center",columnId:"",children:[],hide:!1,resizable:!1,prefix:"",suffix:"",required:!1};return dsf.mix({},e)}t["a"]={name:"DesColumnsEdit",mixins:[i["a"]],data:function(){return{isReload:!1,tableData:[],columns:[],data:[],treeData:[{id:dsf.uuid(),label:"表头",isRoot:!0,level:-1,children:[]}],defaultProps:{children:"children",label:"label"},form:null,formNode:null,formDisabled:{label:"",code:"",align:"center",headerAlign:"center",hide:!1,width:"",readOnly:!0}}},props:{isSubTable:{type:Boolean,default:!1}},watch:{"form.hide":{handler:function(e){var t=this.form;if(t&&!t.readOnly){if(this.formNode&&t.level>0){var n=this.formNode.parent.data.hide;if(n&&n!=e)return dsf.layer.pc.message("父列为隐藏状态时子列不可设置显示状态",!1),void(t.hide=n)}this.deep(t,(function(t){t.hide=e}))}}}},created:function(){this.form=this.formDisabled},mounted:function(){if(this.owner){var e,t=this.owner.$$getComponent(),n=dsf.mix(!0,{},t.columns);(e=this.treeData[0].children).push.apply(e,Object(a["a"])(this.getTreeData(n,0)))}},methods:{getTreeData:function(t,n){var a=this,i=[];return e.each(t,(function(e,t){var o=dsf.mix({},s(),{id:n+"_"+t,level:n,code:e.code,label:e.label,columnId:e.columnId,headerAlign:e.headerAlign,align:e.align,hide:e.hide,width:e.width,minWidth:e.minWidth,prefix:e.prefix||"",suffix:e.suffix||"",required:e.required||!1});i.push(o);var r=a.getTreeData(e.children,n+1);o.children=r})),i},deep:function(t,n,a){var i=this;n&&n(t,a),t.children&&e.each(t.children,(function(e){i.deep(e,n,a+1)}))},append:function(e){var t=null,n=null;n=e||this.treeData[0],t=n.children.length+1;var a=dsf.mix({},s(),{id:e.level+"_"+t,label:"新建列",level:n.level+1,hide:n.hide});n.children.push(a)},remove:function(e){var t=e.parent;dsf.array.remove(t.data.children,e.data)},up:function(e){o.call(this,e,"up")},down:function(e){o.call(this,e,"down")},nodeClick:function(e,t){e.isRoot?(this.form=this.formDisabled,this.formNode=null):(this.form=e,this.formNode=t)},yes:function(){var e=this.treeData[0].children;return e}}}}).call(this,n("2ef0"))},"0124":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100%"}},[n("el-aside",{staticStyle:{overflow:"auto",height:"100%"},attrs:{width:"35%"}},[n("div",{staticStyle:{overflow:"auto",height:"100%"}},[n("el-tree",{attrs:{data:e.treeData,props:e.defaultProps,"default-expand-all":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,i=t.data;return n("span",{staticClass:"custom-tree-node"},[n("i",{staticClass:"iconfont icon-biaodanzujian-shurukuang",staticStyle:{"margin-right":"5px"}}),n("span",{on:{dblclick:function(t){return e.toList(a,i)}}},[e._v(e._s(a.label))]),i.field?n("span",{staticStyle:{color:"red"},on:{dblclick:function(t){return e.toList(a,i)}}},[e._v("(字段:"+e._s(i.field)+")")]):e._e()])}}])})],1)]),n("el-main",{staticStyle:{padding:"0px"}},[n("el-container",[n("el-main",[n("el-table",{attrs:{data:e.tableData,border:"","highlight-current-row":!0}},[n("el-table-column",{attrs:{prop:"fieldCaption",label:"字段描述"}}),n("el-table-column",{attrs:{prop:"field",label:"字段名称"}}),n("el-table-column",{attrs:{label:"默认排序类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{model:{value:t.row.sortType,callback:function(n){e.$set(t.row,"sortType",n)},expression:"scope.row.sortType"}},[n("el-option",{attrs:{value:"",label:"不参与"}}),n("el-option",{attrs:{value:"asc",label:"升序"}}),n("el-option",{attrs:{value:"desc",label:"降序"}})],1)]}}])}),n("el-table-column",{attrs:{prop:"column",label:"对应列表的列"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{model:{value:t.row.column,callback:function(n){e.$set(t.row,"column",n)},expression:"scope.row.column"}},[n("el-option",{attrs:{value:"",label:""}}),e._l(e.listColumns,(function(e){return n("el-option",{key:e.columnId,attrs:{value:e.columnId,label:e.label}})}))],2)]}}])}),n("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("dsf-button",{attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"},on:{click:function(n){return n.stopPropagation(),e.remove(t.row)}}}),n("dsf-button",{attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"},on:{click:function(n){return n.stopPropagation(),e.up(t.row)}}}),n("dsf-button",{attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"},on:{click:function(n){return n.stopPropagation(),e.down(t.row)}}})]}}])})],1)],1)],1)],1)],1)},i=[],o=n("d4b4"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["default"]=l.exports},"017e":function(e,t,n){"use strict";(function(e){n("b0c0"),n("cc71");var a=n("2d0f");t["a"]={name:"DesGridLayoutCellSetting",mixins:[a["a"]],props:{cells:{type:Array,default:function(){return[]}},owner:{type:Object,default:function(){return{}}}},data:function(){return{form:{fontSize:"",align:"left",verticalAlign:"middle",color:"#333",paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,lineNum:0,height:"auto",lineHeight:"normal",bold:!1}}},computed:{},created:function(){var e=this.cells[0]||null;if(e){var t=this.owner.contentLayout.setting?this.owner.contentLayout.setting[e.name]:{};t=t||{},this.form.fontSize=t.fontSize||"ds-font5",this.form.align=t.align||"left",this.form.verticalAlign=t.verticalAlign||"middle",this.form.color=t.color||"",this.form.paddingTop=t.paddingTop||0,this.form.paddingRight=t.paddingRight||0,this.form.paddingBottom=t.paddingBottom||0,this.form.paddingLeft=t.paddingLeft||0,this.form.lineNum=t.lineNum||0,this.form.height=t.height||"auto",this.form.lineHeight=t.lineHeight||"normal",this.form.bold=t.bold||!1}},beforeMount:function(){},mounted:function(){},methods:{yes:function(){var t=this,n={};return e.each(this.cells,(function(e){n[e.name]=dsf.mix({},t.form)})),n}}}}).call(this,n("2ef0"))},"0193":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"send-condition"},[n("div",{staticClass:"editor"},[n("EventSetting",{ref:"event",attrs:{language:e.language,code:e.config.Condition.Expression}})],1),n("div",{staticClass:"table"},[n("SelectTable",{attrs:{data:e.config.Condition.Switch.ItemValue,columns:e.columns}})],1)])},i=[],o=(n("4160"),n("b0c0"),n("159b"),{name:"SendCondition",props:{lines:{type:Array,default:function(){return[]}},checked:{type:Object,default:function(){return{}}},value:{type:Object,default:function(){return{}}},code:{type:String,default:""},language:{type:String,default:"javascript"}},data:function(){return{config:{IsEnabled:"1",Condition:{Expression:"",Switch:{ItemValue:[]}}},selectNodes:[],columns:[{prop:"LineName",label:"连线名称"},{prop:"Type",label:"条件",width:"140",options:[{label:"等于",value:0},{label:"包含",value:1},{label:"被包含",value:2},{label:"大于",value:3},{label:"大于等于",value:4},{label:"小于",value:5},{label:"小于等于",value:6},{label:"范围",value:7},{label:"有效",value:8}]},{prop:"Value",label:"值",fieldType:"input"}]}},created:function(){this.initTabel()},mounted:function(){},methods:{getContent:function(){return this.config.Condition.Expression=this.$refs.event.getContent(),this.config},initTabel:function(){var e,t=this,n=this.value.Condition;n&&n.Switch&&n.Switch.ItemValue&&(e=n.Switch.ItemValue),n&&n.Expression&&(this.config.Condition.Expression=n.Expression);var a={};e&&e.length>0&&e.forEach((function(e){a[e.LineID]=e}));var i=this.config.Condition.Switch.ItemValue,o=this.checked.out;o&&o.length>0&&o.forEach((function(e){t.lines.forEach((function(t){if(t.id===e){var n=a[t.id],o={Value:n&&n.Value||"",Type:dsf.isUnDef(n)?8:n.Type,LineID:t.id,LineName:t.name};i.push(o)}}))}))}}}),s=o,r=(n("771a"),n("2877")),l=Object(r["a"])(s,a,i,!1,null,"b60e90d0",null);t["default"]=l.exports},"026a":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{staticClass:"ds-enum-editor",attrs:{type:"border-card"},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[n("el-tab-pane",{attrs:{name:"1",label:"元数据"}},[n("enum-editor-item",{ref:"meta",attrs:{type:"meta","tree-data":e.treeData1,"default-checked-key":e.defaultCheckedKey1,"table-post":e.tablePost,"tree-loading":e.loading[0],"empty-text":"请选择元数据","name-key":"name","id-key":"treeinfo_globalid"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})],1),e.config&&e.config.other&&"ds"==e.config.other.exclude?e._e():n("el-tab-pane",{attrs:{name:"2",label:"数据源"}},[n("enum-editor-item",{attrs:{type:"ds","tree-data":e.treeData2,"default-checked-key":e.defaultCheckedKey2,"table-post":e.tablePost,"hide-right":!0,"tree-loading":e.loading[1],"empty-text":"请选择数据源","name-key":"name","id-key":"treeinfo_globalid"},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1)],1)},i=[],o=(n("d81d"),n("d3b7"),n("e25e"),n("2d0f")),s=n("090e"),r={name:"TreeDataSource",components:{EnumEditorItem:s["default"]},mixins:[o["a"]],data:function(){return{tabIndex:0,loaded:[!1,!1],loading:[!1,!1],value1:{type:"meta",code:"",attach:[]},value2:{type:"ds",code:null,attach:[]},treeData1:[],treeData2:[],defaultCheckedKey1:"",defaultCheckedKey2:"",tablePost:function(){}}},watch:{tabIndex:function(e){!this.loaded[e-1]&&this["postData"+e]&&this["postData"+e](),this.$set(this.loaded,parseInt(e)-1,!0)}},created:function(){this.currentData&&void 0!==this.currentData.type?this.init(this.currentData):this.$attrs&&this.$attrs.chooseMetaData&&this.$attrs.chooseMetaData.code?this.init(this.$attrs.chooseMetaData):this.tabIndex="1"},methods:{init:function(e){var t=e.type,n=e.attach,a=e.code,i=e.chooseKey,o=dsf.mix(!0,[],n);"meta"===t?(this.value1={type:t,attach:o,code:a,chooseKey:i},this.defaultCheckedKey1=i,this.tabIndex="1"):"ds"===t&&(this.value2={type:t,attach:o,code:a,chooseKey:i},this.defaultCheckedKey2=i,this.tabIndex="2")},validate:function(){return this.$refs.meta.getResult(),!!this["value"+this.tabIndex]["code"]||(dsf.layer.message("请选择"+("1"===this.tabIndex?"元数据以及右侧具体节点名称字段":"数据源"),!1),!1)},yes:function(){return this["value"+this.tabIndex]},postData1:function(){var e=this;this.$set(this.loading,0,!0),this.$http.get("rm/list/meta",{namespace:""}).then((function(t){var n=t.data;n.success?(e.treeData1=n.data.map((function(t){return e.dataFormat(t,"1")})),e.$nextTick((function(){e.$refs.meta.initMetaTable()}))):dsf.layer.message("请求异常！",!1)})).finally((function(){e.$set(e.loading,0,!1)}))},postData2:function(){var e=this;this.$set(this.loading,1,!0),this.$http.get("/rm/list/ds",{namespace:""}).then((function(t){var n=t.data;n.success?e.treeData2=n.data.map((function(t){return e.dataFormat(t,"2")})):dsf.layer.message("请求异常！",!1)})).finally((function(){e.$set(e.loading,1,!1)}))},dataFormat:function(e,t){var n=this;return"3"!=e.type_value&&"8"!=e.type_value&&(e.nocheck=!0),"3"==e.type_value||"8"==e.type_value||e.children||(e.iconSkin="_special"),e.children&&(e.children=e.children.map((function(e){return n.dataFormat(e,t)}))),e}}},l=r,c=n("2877"),u=Object(c["a"])(l,a,i,!1,null,null,null);t["default"]=u.exports},"02d8":function(e,t,n){"use strict";n("124c")},"0342":function(e,t,n){},"0488":function(e,t,n){"use strict";t["a"]="dsf.define(function() {\r\n  return {\r\n    //this.nameSpace获取当前页面命名空间\r\n    //this.pageName获取当前页面的名称\r\n    //this.$viewData中存储表单的数据\r\n    //this.$viewInitData中存储了页面初始化接口获取的数据源、默认值、权限等信息\r\n    //this.queryString获取当前页面的查询字符参数\r\n    //this.frames获取页面中viewPart组件内嵌的内页组件\r\n    //this.$parentView获取被frame嵌套的父页面组件\r\n    data: function() {\r\n      return {\r\n      }\r\n    },\r\n    computed: {},\r\n    created: function() {},\r\n    mounted: function() {},\r\n    activated: function() {},\r\n    deactivated: function() {},\r\n    //=======二次开发额外增加的钩子函数 start ===============\r\n    //用于页面初始化数据查询完成，已经获取了表单组件的默认值及下拉框等枚举类组件的数据(此处勿要对$viewData进行赋值操作,需要初始化表单值直接操作data参数)\r\n    inited: function(data, next) {\r\n      next();\r\n    },\r\n    //用于页面数据读取完成，仅对页面类型为表单时有效(此处勿要对$viewData进行赋值操作,需要初始化表单值直接操作data参数)\r\n    dataLoaded: function(data, next) {\r\n      next();\r\n    },\r\n    //页面全部加载完成，且组件都已经挂载\r\n    ready: function() {\r\n\r\n    },\r\n    //表单提交保存验证前触发，此处可以对ignoreValidate属性进行配置设置为true可以忽略表单验证\r\n    validateBefore: function(next, options) {\r\n      next();\r\n    },\r\n    //表单提交保存验证后触发\r\n    validateAfter: function(next, options) {\r\n      next();\r\n    },\r\n    //表单保存前钩子函数\r\n    saveBefore: function(next, options) {\r\n      next();\r\n    },\r\n    //表单保存数据提交给服务器前对提交数据副本的处理\r\n    postDataBefore: function( next, data, options) {\r\n      next();\r\n    },\r\n    //表单保存数据提交给服务器成功后对服务器返回的结果数据处理\r\n    postDataAfter: function( next, requestResult, options) {\r\n      next();\r\n    },\r\n    //表单保存成功后钩子函数,result为保存后服务器返回的数据\r\n    saveAfter: function(next, result, options) {\r\n      next();\r\n    },\r\n    //表单保存后(无论成功或者失败)钩子函数,result为null表示保存失败否则为保存后服务器返回的新数据\r\n    saveComplete: function(result) {\r\n    },\r\n    //=======二次开发额外增加的钩子函数 end   ===============\r\n    methods: {\r\n\r\n    }\r\n  }\r\n});"},"0543":function(e,t,n){"use strict";n("a98e")},"0632":function(e,t,n){},"0680":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"ds-control ds-form-item ds-radio-box ds-has-label"},[n("label",{staticClass:"ds-form-label"},[e._v("范围：")]),n("div",{staticClass:"ds-form-block"},[n("el-radio-group",{model:{value:e.scope,callback:function(t){e.scope=t},expression:"scope"}},[n("el-radio",{attrs:{label:"0"}},[e._v("无限制")]),n("el-radio",{attrs:{label:"1"}},[e._v("我的")]),n("el-radio",{attrs:{label:"2"}},[e._v("本机构的")])],1)],1)]),n("div",{directives:[{name:"show",rawName:"v-show",value:"2"==e.scope,expression:"scope=='2'"}],staticClass:"ds-control ds-form-item ds-radio-box ds-has-label"},[n("label",{staticClass:"ds-form-label"},[e._v("本机构范围：")]),n("div",{staticClass:"ds-form-block"},[n("el-checkbox-group",{model:{value:e.unit,callback:function(t){e.unit=t},expression:"unit"}},[n("el-checkbox",{attrs:{label:"1"}},[e._v("上级机构")]),n("el-checkbox",{attrs:{label:"2"}},[e._v("下级机构")])],1)],1)])])},i=[],o=n("2d0f"),s={name:"BrowseScopeEdit",mixins:[o["a"]],data:function(){return{scope:2,unit:[]}},created:function(){this.scope=this.currentData.scope,this.unit=this.currentData.unit},methods:{yes:function(){return{scope:this.scope,unit:"2"!=this.scope?[]:this.unit}}}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},"0731":function(e,t,n){"use strict";n("0632")},"085a":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n(e.componentId,{ref:"form",tag:"component",attrs:{owner:e.property},on:{showDialog:e.showDialog}}),n("el-dialog",{attrs:{title:"题目关联",visible:e.dialogVisible,modal:!0,"append-to-body":!0,"modal-append-to-body":!1,"before-close":e.closeRelaDialog,closed:e.resetRela,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{attrs:{model:e.relaForm,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"当前题目:"}},[n("el-input",{staticStyle:{border:"none"},attrs:{value:e.owner.questionIndex+"题",readonly:""}})],1),n("el-form-item",{attrs:{label:"关联题目:"}},[n("el-select",{on:{change:e.chooseRela},model:{value:e.relaForm.relaIndex,callback:function(t){e.$set(e.relaForm,"relaIndex",t)},expression:"relaForm.relaIndex"}},[n("el-option",{attrs:{value:"no-rela",label:"无关联"}}),e._l(e.prevObjs,(function(e){return n("el-option",{key:e.questionIndex,attrs:{label:e.questionIndex+"题",value:e.questionIndex}})}))],2)],1),n("el-form-item",{attrs:{label:""}},[n("div",{staticClass:"rela-option-box"},[e.relaItem?[n("p",[e._v("当“关联题目”选择下面的选项：")]),"dsf.qiradio"==e.relaItem.ctrlType?[n("el-radio-group",{model:{value:e.relaForm.relaRadio,callback:function(t){e.$set(e.relaForm,"relaRadio",t)},expression:"relaForm.relaRadio"}},e._l(e.relaItem.items,(function(t){return n("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.text))])})),1)]:"dsf.qicheckbox"==e.relaItem.ctrlType?[n("el-checkbox-group",{model:{value:e.relaForm.relaCheckBox,callback:function(t){e.$set(e.relaForm,"relaCheckBox",t)},expression:"relaForm.relaCheckBox"}},e._l(e.relaItem.items,(function(t){return n("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.text))])})),1)]:void 0,n("p",[e._v("“当前题目”才出现")])]:e._e()],2)])],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("dsf-button",{on:{click:e.setRela}},[e._v("确 定")]),n("dsf-button",{attrs:{type:"plain"},on:{click:e.closeRelaDialog}},[e._v("取 消")])],1)],1),n("el-dialog",{attrs:{title:"跳题逻辑",visible:e.logicVisible,modal:!0,"append-to-body":!0,"modal-append-to-body":!1,"before-close":e.closeLogicDialog,closed:e.resetLogic,width:"600px"},on:{"update:visible":function(t){e.logicVisible=t}}},[n("div",{staticClass:"ds-logic-option-box"},[e.owner.items&&e.owner.items.length>0?n("table",{staticClass:"el-table el-table--border",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[n("thead",[n("th"),n("th",[e._v("选项")]),n("th",[e._v("选项值")]),n("th",[e._v("跳转到")])]),n("tbody",e._l(e.owner.items,(function(t){return n("tr",{key:t.value},[n("td",[n("b",[e._v("选择")])]),n("td",[e._v(e._s(t.text))]),n("td",[e._v(e._s(t.value))]),n("td",[n("el-select",{on:{change:e.chooseRela},model:{value:e.logic[t.value],callback:function(n){e.$set(e.logic,t.value,n)},expression:"logic[item.value]"}},[n("el-option",{attrs:{value:"",label:"不跳题"}}),e._l(e.nextObjs,(function(e){return n("el-option",{key:e,attrs:{value:e,label:e+"题"}})}))],2)],1)])})),0)]):e._e()]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("dsf-button",{on:{click:e.setLogic}},[e._v("确 定")]),n("dsf-button",{attrs:{type:"plain"},on:{click:e.closeLogicDialog}},[e._v("取 消")])],1)])],1)},i=[],o=n("eb5e"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["default"]=l.exports},"08a4":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-meta-data-select-item"},[n("dsf-tree-select",{attrs:{"tree-data":e.treeData,loading:e.loading,theme:"theme2","node-key":"ID","node-name":"name","search-control":"","default-expand-all":"",multiple:""},on:{"choose-node":function(t){e.checkList=t}}})],1)},i=[],o=(n("b0c0"),n("d3b7"),n("b45c")),s={name:"DesMetaDataSelectItem",components:{DsfTreeSelect:o["default"]},props:{url:{type:String,required:!0}},data:function(){return{loading:!1,treeData:[],checkList:[]}},created:function(){this.postData()},methods:{yes:function(){return this.checkList},postData:function(){var e=this;this.loading=!0,this.$http.get(this.url,{namespace:""}).then((function(t){var n=t.data;n.success?(e.dataFormat(n.data),e.treeData=n.data):dsf.layer.message("请求异常！",!1)})).finally((function(){e.loading=!1}))},dataFormat:function(e){for(var t=0;t<e.length;t++){var n=e[t];n.label=n.name,"3"!==n.type_value&&"8"!==n.type_value&&(n.nocheck=!0),"3"===n.type_value||"8"===n.type_value||n.children||(n.iconSkin="_special"),n.children&&this.dataFormat(n.children)}}}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},"090e":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-enum-editor-item"},[n("div",{staticClass:"ds-enum-editor-item-left",class:{fill:e.hideRight}},[n("dsf-tree-select",{attrs:{"tree-data":e.treeData,"node-key":e.idKey,"node-name":e.nameKey,loading:e.treeLoading,"default-checked-key":e.defaultCheckedKey,"search-control":"","default-expand-all":""},on:{"choose-node":e.chooseNode,"choose-key":function(t){e.radioId=t}}})],1),e.hideRight?e._e():n("div",{staticClass:"ds-enum-editor-item-main"},[n("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{border:"",stripe:"","max-height":"378px","row-key":"value","default-expand-all":"","highlight-current-row":"",data:e.tableList,"empty-text":e.loading?"数据加载中...":e.emptyText,"tree-props":{children:"children",hasChildren:"hasChildren"},"row-class-name":e.tableRowClassName},on:{"current-change":e.handleCurrentChange}},[n("el-table-column",{attrs:{type:"index",index:e.startIndex+1,label:"序号",width:"80"}}),n("el-table-column",{attrs:{prop:"text",label:"文本",width:"224"}}),n("el-table-column",{attrs:{prop:"value",label:"值"}})],1),n("div",{staticClass:"ds-enum-editor-item-main-pagination"},[n("el-pagination",{attrs:{"current-page":e.pageNum,"page-size":e.pageSize,"pager-count":5,layout:"total, prev, pager, next, jumper",total:e.total,background:"",small:""},on:{"current-change":function(t){e.pageNum=t}}})],1)],1)])},i=[],o=n("6847"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["default"]=l.exports},"099b":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100%"}},[n("el-aside",{staticStyle:{width:"500px",overflow:"auto"}},[n("el-container",[n("el-header",{staticStyle:{padding:"0px 0px 10px 0px","text-align":"right",height:"auto"}},[n("DsfButton",{attrs:{size:"small",icon:"hao"},on:{click:e.addTab}},[e._v(" 新增标签 ")])],1),n("el-main",{staticStyle:{padding:"0px",height:"100%"}},[n("el-table",{attrs:{border:"","show-header":!0,data:e.tableData,"highlight-current-row":!0},on:{"row-click":e.rowClickHandler}},[n("el-table-column",{attrs:{label:"#",type:"index",align:"center"}}),n("el-table-column",{attrs:{label:"KEY",prop:"text"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.key)+" ")]}}])}),n("el-table-column",{attrs:{label:"名称",prop:"caption"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}])}),n("el-table-column",{attrs:{label:"不显示",prop:"text"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.hide?"是":"否")+" ")]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("DsfButton",{attrs:{"btn-style":"icon-text",icon:"shanchu",size:"small",title:"删除"},on:{click:function(n){return e.removeTab(t.row)}}}),n("DsfButton",{attrs:{"btn-style":"icon-text",icon:"shang",size:"small",title:"上移"},on:{click:function(n){return e.up(t.row)}}}),n("DsfButton",{attrs:{"btn-style":"icon-text",icon:"xia",size:"small",title:"下移"},on:{click:function(n){return e.down(t.row)}}})]}}])})],1)],1)],1)],1),n("el-main",{staticStyle:{padding:"0px"}},[n("el-container",[n("el-main",[n("el-form",{attrs:{model:e.formModel,disabled:!Object.keys(e.formModel).length,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"KEY"}},[n("el-input",{model:{value:e.formModel.key,callback:function(t){e.$set(e.formModel,"key",t)},expression:"formModel.key"}})],1),n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{model:{value:e.formModel.name,callback:function(t){e.$set(e.formModel,"name",t)},expression:"formModel.name"}})],1),n("el-form-item",{attrs:{label:"数据接口"}},[n("el-input",{model:{value:e.formModel.dataUrl,callback:function(t){e.$set(e.formModel,"dataUrl",t)},expression:"formModel.dataUrl"}})],1),n("el-form-item",{attrs:{label:"跳转SRC"}},[n("el-input",{model:{value:e.formModel.iframeSrc,callback:function(t){e.$set(e.formModel,"iframeSrc",t)},expression:"formModel.iframeSrc"}})],1),n("el-form-item",{attrs:{label:"不显示"}},[n("el-radio-group",{model:{value:e.formModel.hide,callback:function(t){e.$set(e.formModel,"hide",t)},expression:"formModel.hide"}},[n("el-radio",{attrs:{label:!0}},[e._v("是")]),n("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),n("el-form-item",{attrs:{label:"使用自定义插槽"}},[n("el-radio-group",{model:{value:e.formModel.customize,callback:function(t){e.$set(e.formModel,"customize",t)},expression:"formModel.customize"}},[n("el-radio",{attrs:{label:!0}},[e._v("是")]),n("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1)],1)],1)],1)],1)],1)},i=[],o=n("82bb"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["default"]=l.exports},"09a4":function(e,t,n){},"09f5":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticClass:"tree-selector-edit"},[n("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[n("DsfButton",{on:{click:e.add}},[e._v("新增")])],1),n("el-main",{staticStyle:{padding:"0px"}},[n("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData,"row-class-name":e.tableRowClassName}},[n("el-table-column",{attrs:{label:"显示名称","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.title,callback:function(n){e.$set(t.row,"title",n)},expression:"scope.row.title"}})]}}])}),n("el-table-column",{attrs:{label:"复选框模式","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{placeholder:"启用/不启用"},model:{value:t.row.showCheckBox,callback:function(n){e.$set(t.row,"showCheckBox",n)},expression:"scope.row.showCheckBox"}},[n("el-option",{attrs:{label:"启用",value:"1"}}),n("el-option",{attrs:{label:"不启用",value:"0"}})],1)]}}])}),n("el-table-column",{attrs:{label:"选择条件","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"无"},model:{value:t.row.types,callback:function(n){e.$set(t.row,"types",n)},expression:"scope.row.types"}})]}}])},[n("template",{slot:"header"},[n("el-popover",{attrs:{trigger:"hover",placement:"top"}},[n("p",[e._v("支持表达式，严格区分值类型；比如:@[isExist(_type,1,2,'3')]")]),n("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[n("div",[e._v("选择条件")])])])],1)],2),n("el-table-column",{attrs:{label:"父子关联状态","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{placeholder:"关联/不关联"},model:{value:t.row.chooseOneNode,callback:function(n){e.$set(t.row,"chooseOneNode",n)},expression:"scope.row.chooseOneNode"}},[n("el-option",{attrs:{label:"关联",value:"1"}}),n("el-option",{attrs:{label:"不关联",value:"0"}})],1)]}}])},[n("template",{slot:"header"},[n("el-popover",{attrs:{trigger:"hover",placement:"top"}},[n("p",[e._v(" 选中一个节点后，父子节点的选中状态是否受当前节点选中状态影响 ")]),n("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[n("div",[e._v("父子关联状态")])])])],1)],2),n("el-table-column",{attrs:{label:"初始化展开层级","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"无"},model:{value:t.row.defaultOpenSeries,callback:function(n){e.$set(t.row,"defaultOpenSeries",n)},expression:"scope.row.defaultOpenSeries"}})]}}])}),e.isOuaSelect?n("el-table-column",{attrs:{label:"数据类型","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.metaDataType,callback:function(n){e.$set(t.row,"metaDataType",n)},expression:"scope.row.metaDataType"}},[n("el-option",{attrs:{label:"本部门",value:"2"}}),n("el-option",{attrs:{label:"本单位",value:"3"}}),n("el-option",{attrs:{label:"组织架构",value:"4"}})],1)]}}],null,!1,1136998362)}):n("el-table-column",{attrs:{label:"数据类型","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.metaDataType,callback:function(n){e.$set(t.row,"metaDataType",n)},expression:"scope.row.metaDataType"}},[n("el-option",{attrs:{label:"接口",value:"0"}}),n("el-option",{attrs:{label:"元数据组",value:"1"}})],1)]}}])}),n("el-table-column",{attrs:{label:"数据详情","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1*t.row.metaDataType>1?n("div",[n("el-select",{attrs:{placeholder:"显示类型",title:"选择显示类型：人员、部门，两者的请求接口不一样。"},model:{value:t.row.showType,callback:function(n){e.$set(t.row,"showType",n)},expression:"scope.row.showType"}},[n("el-option",{attrs:{label:"人员类型",value:"user"}}),n("el-option",{attrs:{label:"部门类型",value:"dept"}})],1),"4"==t.row.metaDataType&&"user"==t.row.showType?n("el-select",{attrs:{placeholder:"仅显示子机构",title:"是否仅显示子机构"},model:{value:t.row.showSubDept,callback:function(n){e.$set(t.row,"showSubDept",n)},expression:"scope.row.showSubDept"}},[n("el-option",{attrs:{label:"仅显示子机构",value:"1"}}),n("el-option",{attrs:{label:"不仅显示子机构",value:"0"}})],1):e._e(),"4"==t.row.metaDataType?n("el-input",{attrs:{title:"组织架构显示层级（0代表子机构）"},model:{value:t.row.showLevel,callback:function(n){e.$set(t.row,"showLevel",n)},expression:"scope.row.showLevel"}},[n("template",{slot:"prepend"},[e._v("显示第")]),n("template",{slot:"append"},[e._v("级")])],2):e._e()],1):"1"!=t.row.metaDataType?n("el-input",{attrs:{disabled:"0"!=t.row.metaDataType,placeholder:"支持表达式",title:"数据请求地址"},model:{value:t.row.sqlUrl,callback:function(n){e.$set(t.row,"sqlUrl",n)},expression:"scope.row.sqlUrl"}}):n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.setChooseMetaData(t)}}},[e._v(" 选择元数据组 ")])]}}])}),n("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(n){return e.insert(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(n){return e.deleted(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(n){return e.up(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(n){return e.down(t)}}})]}}])})],1)],1)],1)},i=[],o=(n("c975"),n("a434"),n("2d0f")),s={name:"TreeSelectorEdit",mixins:[o["a"]],data:function(){return{tableData:[],names:[],isOuaSelect:!1}},created:function(){this.config.params&&"checkNode"==this.config.params.type&&(this.isOuaSelect=!0),this.tableData=this.currentData||[]},methods:{tableRowClassName:function(e){var t=e.row,n=e.rowIndex,a="";if(t.title){this.names[n]="";var i=this.names.indexOf(t.title);-1!=i&&i<n&&(a="warning-row"),this.names[n]=t.title}return a},newTab:function(){return{title:"Tab"+(this.tableData.length+1),showCheckBox:"0",types:"",chooseOneNode:"1",defaultOpenSeries:"1",metaDataType:this.isOuaSelect?"2":"0",showType:"user",showSubDept:"1",showLevel:"0",chooseMetaData:{},sqlUrl:"",async:"0",controls:[],name:dsf.uuid(),error:!1}},add:function(){this.tableData.push(this.newTab())},insert:function(e){this.tableData.splice(e.$index+1,0,this.newTab())},deleted:function(e){dsf.array.remove(this.tableData,e.row)},up:function(e){if(e.$index>0){var t=this.tableData[e.$index],n=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(n-1,0,t)}},down:function(e){if(this.tableData.length-1>e.$index){var t=this.tableData[e.$index],n=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(n+1,0,t)}},validate:function(){for(var e in this.tableData){this.tableData[e]["title"]=this.tableData[e]["title"]||dsf.uuid();var t=this.names.indexOf(this.tableData[e]["title"]);if(-1!=t&&t<e)return dsf.layer.message("请解决重复名称",!1),!1}return!0},yes:function(){return this.tableData},setChooseMetaData:function(e){var t=this;dsf.layer.openDialog({title:"请选择",fullscreen:!1,width:"1000px",overflow:"hidden",content:"TreeDataSource",params:{chooseMetaData:t["tableData"][e.$index].chooseMetaData},btns:[{text:"确定",handler:function(n){var a=n.validate();if(!a)return!1;t["tableData"][e.$index].chooseMetaData=n.yes()}},{text:"取消"}]})}}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},"0afd":function(e,t,n){"use strict";(function(e){var a=n("5530"),i=n("2f62");t["a"]={name:"Canvas",data:function(){return{}},computed:Object(a["a"])(Object(a["a"])({},Object(i["b"])("seatDesign",{compelPanelSize:"compelPanelSize",panelSize:"panelSize",canvasCss:function(e){var t=e.compelPanelSize,n=t.width,a=t.height,i=n?"".concat(n,"px"):"100%",o=a?"".concat(a,"px"):"100%";return{width:i,height:o}},panelParentSize:function(t){var n=t.compelPanelSize,a=n.width,i=n.height;return a=a||e(".seat-designer-page").width(),i=i||e(".seat-designer-page").height(),{width:a,height:i}}})),{},{panelSty:function(){return{width:this.panelSize.width?this.panelSize.width+"px":"100%",height:this.panelSize.height?this.panelSize.height+"px":"100%",left:this.panelSize.left+"px",top:this.panelSize.top+"px"}}}),watch:{compelPanelSize:{handler:function(e){var t=e.width,n=e.height,a={width:t,height:n,scale:1,left:0,top:0};this.$store.commit("seatDesign/changePanelSize",a)},deep:!0}},mounted:function(){var t=this;e(".seat-designer-page")[0].addEventListener("mousewheel",t.handleScroll)},methods:{handleScroll:function(t){if(t.ctrlKey){var n=this,a=t.wheelDelta<0?"down":"up",i=dsf.math.convertLocalCoordinate("#panel_outer",{x:t.pageX,y:t.pageY}),o=n.panelParentSize,s=o.width,r=o.height,l=s*n.panelSize.scale,c=r*n.panelSize.scale,u=i.x/l,d=i.y/c,h=n.panelSize.scale;if("up"===a?h+=.1:"down"===a&&(h-=.1),h>=.1){var p=e("#panel_outer"),f=s*h,m=r*h,g=p.position().left+i.x-f*u,_=p.position().top+i.y-m*d,b={scale:Math.round(10*h)/10,width:Math.floor(f),height:Math.floor(m),left:Math.floor(g),top:Math.floor(_)};n.$store.commit("seatDesign/changePanelSize",b)}t.preventDefault(),t.stopPropagation()}},canvasClick:function(e){var t=this;t.$store.commit("seatDesign/changeActiveId","")}}}}).call(this,n("1157"))},"0c85":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"seat-item-container normal"},[e._l(e.myItems,(function(t,a){return n("div",{key:t.id,staticClass:"seat-box",class:e.realSeatCss(t),style:e.getItemSty(t),attrs:{"data-id":t.id,"data-belong":t.type,"data-num":t.seatNum,"exist-person":!!t.person,"data-person":t.person?t.person[e.personNameAlias]:""},on:{contextmenu:function(n){return e.popMenu(n,t)},click:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.mulChooseSeat(n,t)}}},[n("div",{staticClass:"seat"},[t.person?[t.width*e.panelSize.scale>60?n("p",{staticClass:"person"},[e._v(e._s(t.person[e.personNameAlias]))]):n("p",{staticClass:"person",domProps:{textContent:e._s(t.person[e.personNameAlias].charAt(0))}})]:n("p",[e._v(e._s(t.seatTxt))])],2)])})),e._l(e.myGroups,(function(t,a){return n("div",{key:t.id,staticClass:"group-box",style:e.getItemSty(t)},[n("div",{staticClass:"group"},e._l(t.member,(function(a,i){return n("div",{key:a.id,staticClass:"member",class:e.realSeatCss(a),style:e.getMemberSty(a),attrs:{"data-id":a.id,"data-pid":t.id,"data-num":a.seatNum,"exist-person":!!a.person,"data-person":a.person?a.person[e.personNameAlias]:"","data-belong":"group"},on:{contextmenu:function(n){return e.popMenu(n,t,a)},click:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.mulChooseSeat(n,a,t)}}},[a.person?[a.width*e.panelSize.scale>60?n("p",{staticClass:"person"},[e._v(e._s(a.person[e.personNameAlias]))]):n("p",{staticClass:"person",domProps:{textContent:e._s(a.person[e.personNameAlias].charAt(0))}})]:n("p",[e._v(e._s(a.seatTxt))])],2)})),0)])})),n("el-dialog",{attrs:{title:"提示",visible:e.confirm.visible,"append-to-body":!0,width:"30%"},on:{"update:visible":function(t){return e.$set(e.confirm,"visible",t)}}},[n("div",[e._v(e._s(e.confirm.msg))]),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.seatCover}},[e._v("覆盖")]),n("el-button",{on:{click:e.seatInsert}},[e._v("插入")]),n("el-button",{on:{click:e.seatCancel}},[e._v("取消")])],1)])],2)},i=[],o=n("4e20"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["a"]=l.exports},"0d9f":function(e,t,n){"use strict";(function(e){var a=n("5530"),i=n("cb54"),o=n("2f62");t["a"]={name:"LeftTools",data:function(){return{leftMenu:{activeName:["对象","辅助对象","自定义对象"],group:[{title:"对象",items:[{name:"座席",type:"seat"},{name:"床位",type:"bed"}]},{title:"辅助对象",items:[{name:"矩形",type:"sec_rect"}]},{title:"自定义对象",items:[{name:"床位"}]}]},originWidth:80,originHeight:80}},computed:Object(a["a"])({},Object(o["b"])("seatDesign",{panelSize:"panelSize",compelPanelSize:"compelPanelSize"})),mounted:function(){var t=this;i["a"].then((function(){e(".ds-tool-item").draggable({addClasses:!1,helper:function(){var t=e(this).text();return e('<div class="drag-item">'.concat(t,"</div>"))},cursor:"default",cursorAt:{top:-5,left:-5},stop:function(n,a){var i=dsf.math.convertLocalCoordinate(".seat-designer-page",{x:n.pageX,y:n.pageY}),o=t.compelPanelSize.width||e(".seat-designer-page").width(),s=t.compelPanelSize.height||e(".seat-designer-page").height();if(i.x>=0&&i.x<=o&&i.y>=0&&i.y<=s){var r,l=e(n.target).data("type"),c=dsf.math.convertLocalCoordinate("#panel_outer",{x:n.pageX,y:n.pageY},t.panelSize.scale),u={id:dsf.uuid(),type:l,left:c.x,top:c.y,width:t.originWidth,height:t.originHeight,angle:0,isFrozenSty:!1,showText:1,seatTxt:"",seatNum:""};/^sec_/.test(l)?(r={bgImg:""},Object.assign(u,r)):(r={statusKv:"",stateList:[]},Object.assign(u,r)),t.$store.commit("seatDesign/addSeat2Panel",u)}}})}))}}}).call(this,n("1157"))},"0dfb":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.tabsValue,callback:function(t){e.tabsValue=t},expression:"tabsValue"}},[n("el-tab-pane",{attrs:{label:"常用列表",name:"0"}},[n("el-form",{ref:"form"},e._l(e.fileExtArr,(function(t,a){return n("el-form-item",{key:a,attrs:{label:t.itemName}},[n("el-checkbox-group",{on:{change:e.handleCheckedChange},model:{value:e.fileExtArr[a].checkStatus,callback:function(t){e.$set(e.fileExtArr[a],"checkStatus",t)},expression:"fileExtArr[index].checkStatus"}},[n("el-checkbox",{attrs:{label:t.file.value,title:t.file.title}},[e._v(" "+e._s(t.file.title)+" ")])],1)],1)})),1)],1),n("el-tab-pane",{attrs:{label:"个性化配置",name:"1"}},[n("el-form",{ref:"formSel"},[n("el-form-item",{attrs:{label:"允许上传文件类型"}},[n("el-select",{attrs:{placeholder:"请选择活动区域"},on:{change:e.handleFileType},model:{value:e.fileType,callback:function(t){e.fileType=t},expression:"fileType"}},[n("el-option",{attrs:{value:"file",label:"file(所有文件)"}}),n("el-option",{attrs:{value:"images",label:"images（图片）"}}),n("el-option",{attrs:{value:"video",label:"video（视频）"}}),n("el-option",{attrs:{value:"audio",label:"audio（音频）"}})],1)],1),n("p",[e._v("允许上传文件后缀")]),e._l(e.fileExtArr,(function(t,a){return n("el-form-item",{key:a,attrs:{label:t.itemName}},[n("el-checkbox-group",{on:{change:e.handleCheckedChange},model:{value:e.fileExtArr[a].checkType,callback:function(t){e.$set(e.fileExtArr[a],"checkType",t)},expression:"fileExtArr[index].checkType"}},e._l(t.children,(function(t,a){return n("el-checkbox",{key:a+"_sel",attrs:{label:t.title+"&"+t.value,title:t.title}},[e._v(" "+e._s(t.title)+" ")])})),1)],1)})),n("p"),n("el-form-item",{attrs:{label:"是否在文件筛选框中显示指定类型文件"}},[n("el-switch",{attrs:{"inactive-color":"#d2d2d2"},model:{value:e.isLinkeMine,callback:function(t){e.isLinkeMine=t},expression:"isLinkeMine"}})],1),e.choosenExtsStr?n("el-form-item",{attrs:{label:"已选上传文件后缀"}},[e._v(" "+e._s(e.choosenExtsStr)+" ")]):e._e(),n("p")],2)],1)],1)},i=[],o=n("4e77"),s=o["a"],r=(n("53b5"),n("2877")),l=Object(r["a"])(s,a,i,!1,null,"46af31e6",null);t["default"]=l.exports},"0e5e":function(e,t,n){"use strict";n("eaf5")},1158:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",[n("div",{staticStyle:{"text-align":"right",height:"auto",margin:"0px -20px"}},[n("DsfButton",{on:{click:e.add}},[e._v("新增")])],1)]),n("el-main",{staticStyle:{padding:"0px"}},[n("el-table",{attrs:{data:e.tableData,border:""}},[n("el-table-column",{attrs:{prop:"code",label:"元数据代码"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.code,callback:function(n){e.$set(t.row,"code",n)},expression:"scope.row.code"}})]}}])}),e.type?e._e():n("el-table-column",{attrs:{prop:"type",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{model:{value:t.row.type,callback:function(n){e.$set(t.row,"type",n)},expression:"scope.row.type"}},[n("el-option",{attrs:{value:0,label:"检索框"}}),n("el-option",{attrs:{value:1,label:"附加条件"}})],1)]}}],null,!1,1675615170)}),n("el-table-column",{attrs:{prop:"operation",label:"操作符"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{model:{value:t.row.operation,callback:function(n){e.$set(t.row,"operation",n)},expression:"scope.row.operation"}},[n("el-option",{attrs:{value:"like",label:"模糊匹配"}}),n("el-option",{attrs:{value:"slike",label:"开头匹配"}}),n("el-option",{attrs:{value:"elike",label:"结尾匹配"}}),n("el-option",{attrs:{value:"eq",label:"等于"}}),n("el-option",{attrs:{value:"noteq",label:"不等于"}}),n("el-option",{attrs:{value:"lt",label:"小于"}}),n("el-option",{attrs:{value:"gt",label:"大于"}}),n("el-option",{attrs:{value:"lteq",label:"小于等于"}}),n("el-option",{attrs:{value:"gteq",label:"大于等于"}})],1)]}}])}),n("el-table-column",{attrs:{prop:"valueExpress",label:"值"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{disabled:0===t.row.type},model:{value:t.row.valueExpress,callback:function(n){e.$set(t.row,"valueExpress",n)},expression:"scope.row.valueExpress"}})]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-link",{attrs:{type:"primary"},on:{click:function(n){return e.remove(t.row)}}},[e._v("删除")])]}}])})],1)],1)],1)},i=[],o=n("2d0f"),s={name:"DesDataGridSearch",mixins:[o["a"]],data:function(){return{tableData:[],type:0}},created:function(){var e=this.currentData||[];this.tableData=e,this.config.other&&(this.type=1*(this.config.other.type||"0"))},mounted:function(){},methods:{add:function(){this.tableData.push({code:"",type:this.type,operation:"like",valueExpress:""})},remove:function(e){dsf.array.remove(this.tableData,e)},yes:function(){return this.tableData}}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},"124c":function(e,t,n){},1255:function(e,t,n){"use strict";n("b95d")},"154d":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-box"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.canvasSet,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"画布宽"}},[n("el-input-number",{attrs:{controls:!1,precision:0,placeholder:"自适应"},model:{value:e.canvasSet.width,callback:function(t){e.$set(e.canvasSet,"width",t)},expression:"canvasSet.width"}})],1),n("el-form-item",{attrs:{label:"画布高"}},[n("el-input-number",{attrs:{controls:!1,disabled:e.hasBg,precision:0,placeholder:"自适应"},model:{value:e.canvasSet.height,callback:function(t){e.$set(e.canvasSet,"height",t)},expression:"canvasSet.height"}})],1)],1)],1)},i=[],o=n("be07"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["a"]=l.exports},"1c6f":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100%"}},[n("el-aside",{staticStyle:{overflow:"auto",height:"100%"},attrs:{width:"25%"}},[n("div",{staticStyle:{overflow:"auto",height:"100%"}},[n("el-tree",{attrs:{data:e.treeData,props:e.defaultProps,"default-expand-all":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,i=t.data;return n("span",{staticClass:"custom-tree-node",on:{dblclick:function(t){return e.toList(a,i)}}},[n("i",{staticClass:"iconfont icon-biaodanzujian-shurukuang",staticStyle:{"margin-right":"5px"}}),n("span",[e._v(e._s(a.label))]),i.field?n("span",{staticStyle:{color:"red"}},[e._v("(字段:"+e._s(i.field)+")")]):e._e()])}}])})],1)]),n("el-main",{staticStyle:{padding:"0px"}},[n("el-container",[n("el-main",[n("el-table",{attrs:{data:e.tableData,stripe:"","highlight-current-row":!0,"row-key":e.getRowId,"tree-props":{children:"children"}}},[n("el-table-column",{attrs:{width:"30",align:"center"}}),n("el-table-column",{attrs:{label:"名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.fieldCaption,callback:function(n){e.$set(t.row,"fieldCaption",n)},expression:"scope.row.fieldCaption"}})]}}])}),n("el-table-column",{attrs:{prop:"field",label:"字段名"}}),n("el-table-column",{attrs:{label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{on:{change:function(n){return e.searchTypeChange(n,t.row)}},model:{value:t.row.searchType,callback:function(n){e.$set(t.row,"searchType",n)},expression:"scope.row.searchType"}},e._l(e.options,(function(e){return n("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)]}}])}),n("el-table-column",{attrs:{label:"默认值(选中)"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.defaultValue,callback:function(n){e.$set(t.row,"defaultValue",n)},expression:"scope.row.defaultValue"}})]}}])}),n("el-table-column",{attrs:{label:"布局"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{on:{change:function(n){return e.updateLayout(t.row)}},model:{value:t.row.layout,callback:function(n){e.$set(t.row,"layout",n)},expression:"scope.row.layout"}},[n("el-option",{attrs:{value:"24",label:"整行"}}),n("el-option",{attrs:{value:"12",label:"1/2"}}),n("el-option",{attrs:{value:"8",label:"1/3"}}),n("el-option",{attrs:{value:"6",label:"1/4"}})],1)]}}])}),n("el-table-column",{attrs:{label:"显示方式"},scopedSlots:e._u([{key:"default",fn:function(t){return["enum"==t.row.searchType?n("el-select",{on:{change:function(n){return e.updateModel(t.row)}},model:{value:t.row.model,callback:function(n){e.$set(t.row,"model",n)},expression:"scope.row.model"}},[n("el-option",{attrs:{value:"select",label:"下拉框"}}),n("el-option",{attrs:{value:"treeselect",label:"树下拉框"}}),n("el-option",{attrs:{value:"tile",label:"平铺"}})],1):e._e(),"text"==t.row.searchType?n("el-select",{model:{value:t.row.model,callback:function(n){e.$set(t.row,"model",n)},expression:"scope.row.model"}},[n("el-option",{attrs:{value:"textbox",label:"文本框"}})],1):e._e(),"datetime"==t.row.searchType?n("el-select",{model:{value:t.row.model,callback:function(n){e.$set(t.row,"model",n)},expression:"scope.row.model"}},[n("el-option",{attrs:{value:"ymd",label:"年月日"}}),n("el-option",{attrs:{value:"ym",label:"年月"}})],1):e._e()]}}])}),n("el-table-column",{attrs:{label:"操作符"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{model:{value:t.row.operator,callback:function(n){e.$set(t.row,"operator",n)},expression:"scope.row.operator"}},["enum"==t.row.searchType?[n("el-option",{attrs:{label:"包含",value:"in"}}),n("el-option",{attrs:{label:"区间",value:"between"}})]:"text"==t.row.searchType?[n("el-option",{attrs:{label:"匹配",value:"like"}}),n("el-option",{attrs:{label:"匹配开始字符",value:"slike"}}),n("el-option",{attrs:{label:"匹配结尾字符",value:"elike"}})]:"datetime"==t.row.searchType?[n("el-option",{attrs:{label:"大于",value:"gt"}}),n("el-option",{attrs:{label:"小于",value:"lt"}}),n("el-option",{attrs:{label:"大于等于",value:"gteq"}}),n("el-option",{attrs:{label:"小于等于",value:"lteq"}}),n("el-option",{attrs:{label:"区间",value:"between"}})]:e._e()],2)]}}])}),n("el-table-column",{attrs:{label:"操作",width:"130px",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[["enum"==t.row.searchType?n("dsf-button",{attrs:{title:"选项配置",size:"small","btn-style":"icon-text",icon:"shezhi"},on:{click:function(n){return n.stopPropagation(),e.settingEnumItems(t.row)}}}):e._e(),n("dsf-button",{attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"},on:{click:function(n){return n.stopPropagation(),e.remove(t.row)}}}),n("dsf-button",{attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"},on:{click:function(n){return n.stopPropagation(),e.up(t.row)}}}),n("dsf-button",{attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"},on:{click:function(n){return n.stopPropagation(),e.down(t.row)}}})]]}}])})],1)],1)],1)],1)],1)},i=[],o=n("b5c9"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["default"]=l.exports},"1f3a":function(e,t,n){},"1fa4":function(e,t,n){"use strict";n("6602")},2139:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"designer-left"},[n("div",{staticClass:"designer-left-tools"},e._l(e.leftMenu.group,(function(t,a){return n("el-collapse",{key:a,model:{value:e.leftMenu.activeName,callback:function(t){e.$set(e.leftMenu,"activeName",t)},expression:"leftMenu.activeName"}},[n("el-collapse-item",{attrs:{title:t.title,name:t.title}},[n("div",{staticClass:"ds-tools-group-content",staticStyle:{padding:"10px"}},e._l(t.items,(function(t,a){return n("div",{key:a,staticClass:"ds-tool-item",attrs:{name:t.name,"data-type":t.type}},[e._v(" "+e._s(t.name)+" ")])})),0)])],1)})),1)])},i=[],o=n("0d9f"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["a"]=l.exports},"21ba":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.data,"header-align":"center",align:"center",height:"200",border:"","tooltip-effect":"dark"},on:{"selection-change":e.selectTable}},[e._l(e.columns,(function(t,a){var i=t.type,o=t.isSelect,s=t.prop,r=t.label,l=t.align,c=t.width,u=t.options,d=t.operate,h=t.fieldType;return[u||d||h||o?e._e():n("el-table-column",{key:s,attrs:{type:i,prop:s,label:r,width:c,align:l||"center"}}),u?n("el-table-column",{key:s,attrs:{type:i,prop:s,label:r,width:c,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{staticClass:"level",attrs:{placeholder:"请选择"},model:{value:t.row[s],callback:function(n){e.$set(t.row,s,n)},expression:"scope.row[prop]"}},e._l(u,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}],null,!0)}):e._e(),d?n("el-table-column",{key:s,attrs:{type:i,prop:s,label:r,width:c,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.deleteRow(t.row)}}},[e._v(" 删除 ")])]}}],null,!0)}):e._e(),h&&"input"===h?n("el-table-column",{key:s,attrs:{type:i,prop:s,label:r,width:c,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.row[s],callback:function(n){e.$set(t.row,s,n)},expression:"scope.row[prop]"}})]}}],null,!0)}):e._e(),h&&"editInput"===h?n("el-table-column",{key:s,attrs:{type:i,prop:s,label:r,width:c,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row[s+"Edit"]?e._e():n("span",{staticClass:"edit-filed",on:{click:function(e){t.row[s+"Edit"]=!0}}},[e._v(" "+e._s(t.row[s])+" ")]),t.row[s+"Edit"]?n("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{placeholder:"请输入内容"},on:{blur:function(e){t.row[s+"Edit"]=!1},keyup:function(n){if(!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter"))return null;t.row[s+"Edit"]=!1}},model:{value:t.row[s],callback:function(n){e.$set(t.row,s,n)},expression:"scope.row[prop]"}}):e._e()]}}],null,!0)}):e._e(),o?n("el-table-column",{key:s,attrs:{type:i,prop:s,label:r,width:c,align:l||"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[n("span",[e._v(e._s(r)+" ")]),n("el-checkbox",{attrs:{indeterminate:e.columns[a].isIndeterminate},on:{change:function(n){return e.checkAllChange(e.columns[a][s+"All"],s,e.columns[a],t)}},model:{value:e.columns[a][s+"All"],callback:function(t){e.$set(e.columns[a],s+"All",t)},expression:"columns[index][prop + 'All']"}})]}},{key:"default",fn:function(t){return[n("el-checkbox",{on:{change:function(n){return e.selectRow(t.row[s],s,e.columns[a])}},model:{value:t.row[s],callback:function(n){e.$set(t.row,s,n)},expression:"scope.row[prop]"}})]}}],null,!0)}):e._e()]}))],2)},i=[],o=(n("4de4"),n("4160"),n("c975"),n("a434"),n("159b"),{name:"SelectTable",props:{data:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},select:{type:Array,default:function(){return[]}}},data:function(){return{}},created:function(){},mounted:function(){var e=this;this.select&&this.select.length>0&&this.select.forEach((function(t){e.$refs.multipleTable.toggleRowSelection(t)}))},methods:{selectTable:function(e){this.$emit("update:select",e)},deleteRow:function(e){var t=this.data.indexOf(e);t>=0&&this.data.splice(t,1),this.$parent.deleteRow(e)},checkAllChange:function(e,t,n){this.data.forEach((function(n){n[t]=e})),n.isIndeterminate=!1},selectRow:function(e,t,n){var a=this.data.filter((function(e){return e[t]})),i=a.length;n[t+"All"]=i===this.data.length,n.isIndeterminate=i>0&&i<this.data.length}}}),s=o,r=(n("cb11f"),n("2877")),l=Object(r["a"])(s,a,i,!1,null,"71da5478",null);t["default"]=l.exports},2232:function(e,t,n){"use strict";(function(e){n("4de4"),n("c740"),n("d81d"),n("a434"),n("96cf");var a=n("1da1");t["a"]={name:"DesFunctionSetting",props:{buttons:{type:Array,default:function(){return[]}}},data:function(){return{treeData:[],treeProps:{label:"_name"},buttonsTable:[],currentSelectRow:null}},mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.getOuaRulesTree();case 2:a=n.sent,t.buttonsTable=e.map(t.buttons,(function(e){return e.setting?dsf.mix(!0,{},e):void 0})),console.log(t.buttons),t.buttonsTable=e.filter(t.buttonsTable,(function(e){return e})),t.treeData=a,t.$refs.table.setCurrentRow(t.buttonsTable[0]);case 8:case"end":return n.stop()}}),n)})))()},methods:{getOuaRulesTree:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.$webAPI.getOuaRulesTree().then((function(e){return e.data})).catch((function(e){throw dsf.layer.pc.message("加载角色树失败",!1),e})));case 1:case"end":return t.stop()}}),t)})))()},currentChangeHandler:function(t){this.currentSelectRow=t;var n=this.currentSelectRow.roles;n=e.map(n,"id"),this.$refs.tree.setCheckedKeys(n)},checkChangeHandler:function(t,n,a){if(t&&this.currentSelectRow&&2==t.type_value)if(n){var i=e.findIndex(this.currentSelectRow.roles,(function(e){return e.id===t._id}));i>=0&&this.currentSelectRow.roles.splice(i,1),this.currentSelectRow.roles.push({id:t._id,name:t._name,serial_number:t.serial_number})}else dsf.array.remove(this.currentSelectRow.roles,(function(e,n){return e.id==t._id}))},yes:function(){return this.buttonsTable}}}}).call(this,n("2ef0"))},"24a3":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100%"}},[n("el-aside",{staticStyle:{width:"500px",overflow:"auto"}},[n("el-container",[n("el-header",{staticStyle:{padding:"0 0 10px 0","text-align":"right",height:"auto"}},[n("DsfButton",{attrs:{size:"small",icon:"sousuofangda"},on:{click:e.openDialog}},[e._v("添加自定义布局")])],1),n("el-main",{staticStyle:{padding:"0",height:"100%"}},[n("el-table",{ref:"table",attrs:{"show-header":!0,data:e.tableData,"max-height":"350",size:"small","highlight-current-row":"",border:""},on:{"row-click":e.rowClickHandler}},[n("el-table-column",{attrs:{label:"#",type:"index",align:"center"}}),n("el-table-column",{attrs:{label:"名称",prop:"name"}}),n("el-table-column",{attrs:{label:"布局类型",prop:"typeName",width:"120px"}}),n("el-table-column",{attrs:{label:"图标",prop:"icon",width:"70px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("DsfButton",{attrs:{"btn-style":"icon-text",size:"small",icon:e.getIcon(a.icon)}})]}}])}),n("el-table-column",{attrs:{label:"操作",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row,i=t.$index;return["table"!=a.type?n("DsfButton",{attrs:{"btn-style":"icon-text",icon:"shanchu",size:"small",title:"删除"},on:{click:function(t){return e.removeData(a,i)}}}):e._e(),i>0?n("DsfButton",{attrs:{"btn-style":"icon-text",icon:"shang",size:"small",title:"上移"},on:{click:function(t){return e.up(a,i)}}}):e._e(),i<e.tableData.length-1?n("DsfButton",{attrs:{"btn-style":"icon-text",icon:"xia",size:"small",title:"下移"},on:{click:function(t){return e.down(a,i)}}}):e._e()]}}])})],1)],1)],1)],1),n("el-main",{staticStyle:{padding:"0"}},[n("el-container",[e.formModel?n("el-form",{staticStyle:{width:"90%"},attrs:{model:e.formModel,size:"small","label-width":"120px"}},[n("el-form-item",{attrs:{label:"ID"}},[n("el-input",{attrs:{disabled:""},model:{value:e.formModel.id,callback:function(t){e.$set(e.formModel,"id",t)},expression:"formModel.id"}})],1),n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{model:{value:e.formModel.name,callback:function(t){e.$set(e.formModel,"name",t)},expression:"formModel.name"}})],1),n("el-form-item",{attrs:{label:"图标"}},[n("el-input",{model:{value:e.formModel.icon,callback:function(t){e.$set(e.formModel,"icon",t)},expression:"formModel.icon"}})],1),n("el-form-item",{attrs:{label:"布局类型"}},[n("el-input",{attrs:{disabled:""},model:{value:e.formModel.typeName,callback:function(t){e.$set(e.formModel,"typeName",t)},expression:"formModel.typeName"}})],1),"table"==e.formModel.type?n("el-form-item",{attrs:{label:"是否隐藏"}},[n("el-radio",{attrs:{label:!0},model:{value:e.formModel.hide,callback:function(t){e.$set(e.formModel,"hide",t)},expression:"formModel.hide"}},[e._v("是")]),n("el-radio",{attrs:{label:!1},model:{value:e.formModel.hide,callback:function(t){e.$set(e.formModel,"hide",t)},expression:"formModel.hide"}},[e._v("否")])],1):e._e(),n("el-form-item",{attrs:{label:"背景色"}},[n("el-input",{attrs:{disabled:"table"==e.formModel.type},model:{value:e.formModel.backgroundColor,callback:function(t){e.$set(e.formModel,"backgroundColor",t)},expression:"formModel.backgroundColor"}})],1),e.layerConfig[e.formModel.type]&&e.layerConfig[e.formModel.type].attr?[n("div",{staticStyle:{color:"#888","font-weight":"bold",padding:"0 0 15px 30px"}},[n("span",{staticStyle:{"border-left":"4px solid #ddd","padding-left":"5px"}},[e._v("布局私有属性")])]),e._l(e.layerConfig[e.formModel.type].attr,(function(t,a){return[n("el-form-item",{key:a,scopedSlots:e._u([{key:"label",fn:function(){return[e._v(" "+e._s(t.label)+" "),t.tips?n("el-popover",{attrs:{content:t.tips,placement:"top",trigger:"hover"}},[n("i",{staticClass:"iconfont icon-yiwen",attrs:{slot:"reference"},slot:"reference"})]):e._e()]},proxy:!0}],null,!0)},[n(t.ctrl,e._b({tag:"component",attrs:{placeholder:t.tips||""},model:{value:e.formModel.attr[a],callback:function(t){e.$set(e.formModel.attr,a,t)},expression:"formModel.attr[k]"}},"component",t.attr,!1,!0))],1)]}))]:e._e()],2):e._e()],1)],1),n("el-dialog",{attrs:{title:"选择布局",visible:e.dialogShow,width:"400px","append-to-body":""},on:{"update:visible":function(t){e.dialogShow=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("dsf-button",{on:{click:e.addData}},[e._v("确定")]),n("dsf-button",{attrs:{type:"plain"},on:{click:function(t){e.dialogShow=e.fasle}}},[e._v("取消")])]},proxy:!0}])},[n("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},e._l(e.layerConfig,(function(t){return n("el-radio",{key:t.type,attrs:{label:t.type}},[e._v(e._s(t.name))])})),1)],1)],1)},i=[],o=(n("99af"),n("4160"),n("a434"),n("b0c0"),n("ac1f"),n("466d"),n("2ca0"),n("498a"),n("159b"),n("2d0f"));function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"px";return e?(e=e.trim(),e=e.length?e:t,n&&e.match(/^\d*.?\d+$/)&&(e+=n),e):t}var r={name:"DesDataGridLayoutSetting",mixins:[o["a"]],data:function(){return{layerConfig:l,dialogShow:!1,formModel:null,radio:"card",tableData:[{id:"default",name:"表格",icon:"icon-biaodanzujian-biaoge",type:"table",typeName:"表格",hide:!1,backgroundColor:"#ffffff"}]}},created:function(){this.currentData&&(this.tableData=this.currentData)},mounted:function(){this.$refs.table.setCurrentRow(this.tableData[0]),this.formModel=this.tableData[0]},methods:{yes:function(){var e=this;return this.tableData.forEach((function(t){if("card"==t.type){var n=e.getStyleByCard(t.attr),a=n.style;t.style=a}})),this.tableData},getStyleByCard:function(e){var t=e.columns,n=e.marginBottom,a=e.marginLeft,i=e.maxWidth,o=e.minWidth;n=s(n,"0px"),a=s(a,"0px"),i=s(i,"100%"),o=s(o,"none");var r=i;return t>0&&(r="calc((100% - ".concat(a," * ").concat(t,") / ").concat(t,")")),{style:{"margin-bottom":n,"margin-left":a,"min-width":o,"max-width":i,"flex-basis":r}}},getIcon:function(e){var t="icon-";return e.startsWith(t)?e.substr(t.length):e},rowClickHandler:function(e){this.formModel=e},openDialog:function(){this.dialogShow=!0},addData:function(){var e=this,t=this.layerConfig[this.radio],n={id:dsf.uuid(16),name:t.name+this.tableData.length,icon:t.icon,type:t.type,typeName:t.name,backgroundColor:"#ffffff",attr:Object.assign({},t.defaultArr)};this.tableData.push(n),this.dialogShow=!1,this.$nextTick((function(){e.$refs.table.setCurrentRow(n),e.formModel=n,e.radio="card"}))},removeData:function(e,t){this.tableData.splice(t,1)},up:function(e,t){var n=this.tableData[t-1];this.$set(this.tableData,t-1,e),this.$set(this.tableData,t,n)},down:function(e,t){var n=this.tableData[t+1];this.$set(this.tableData,t+1,e),this.$set(this.tableData,t,n)}}},l={card:{type:"card",name:"布局",icon:"icon-wnet",attr:{columns:{label:"一行几列",ctrl:"el-input-number",tips:"0 表示自适应；大于0则在列宽允许的范围内有效。",attr:{step:1,stepStrictly:!0,min:0}},marginBottom:{label:"行间距",tips:"默认0px，默认单位px",ctrl:"el-input"},marginLeft:{label:"最小列间距",tips:"默认0px，默认单位px",ctrl:"el-input"},maxWidth:{label:"列最大宽",tips:"默认100%，默认单位px",ctrl:"el-input"},minWidth:{label:"列最小宽",tips:"none 表示不设置最小宽，默认值none，默认单位px",ctrl:"el-input"}},defaultArr:{columns:0,marginBottom:"15px",marginLeft:"15px",maxWidth:"100%",minWidth:"none"}}},c=r,u=n("2877"),d=Object(u["a"])(c,a,i,!1,null,null,null);t["default"]=d.exports},"25f7":function(e,t,n){"use strict";n("6557")},2807:function(e,t,n){"use strict";(function(e){n("a15b"),n("d81d"),n("fb6a"),n("d3b7"),n("acd8"),n("ac1f"),n("25f0"),n("1276");var a=n("51358"),i=n("2d99");t["a"]={name:"DsfDesignerProperty",components:{DsfDesignerDialog:a["a"],DsfRangeSelect:i["a"]},props:{data:{type:Object,default:function(){return{}}},bind:{type:Object,default:function(){return{}}},owner:{type:Object,default:function(){return{}}},desc:{type:String,default:""}},data:function(){return{showHeplerMark:!1,dataValue:this.convertFromDataType(this.bind.data[this.bind.key])}},computed:{config:function(){var e=this.data.config;return e||{}},dataValueArray:{get:function(){return this.dataValue||[]},set:function(e){this.dataValue=e}},inputDisabled:function(){return!!this.config.disabled||!("caption"!=this.data.bindControlAttr||!this.owner.isBusiness)}},created:function(){this.$watch((function(){return this.bind.data[this.bind.key]}),{handler:function(e){this.dataValue=this.convertFromDataType(e)}})},methods:{dataValueChange:function(e){var t=this,n=e;void 0!==n&&this.bind.key&&(this.bind.data[this.bind.key]=this.convertToDataType(e,this.data.splitChart)),this.$nextTick((function(){if(t.data.changeExecFunction){var e=t.data.changeExecFunction,n=t.owner[e];n&&n.call(t.owner,t.data.bindControlAttr)}}))},showHelp:function(){this.showHeplerMark=!0},convertFromDataType:function(e){var t=e;if(dsf.isDef(e))if("text"==this.data.showType)this.data&&this.data&&this.data.dataType&&("Number[]"==this.data.dataType||"String[]"==this.data.dataType?"array"==dsf.type(e)&&(t=e.join(this.data.splitChart||",")):"Number"==this.data.dataType&&(t=e.toString()));else if("timePicker"==this.data.showType&&"array"==dsf.type(e)){var n=dsf.date.format(new Date,"yyyy/mm/dd ");t=[new Date(n+e[0]),new Date(n+e[1])]}return t},convertToDataType:function(t){var n=t;return dsf.isDef(t)&&("text"==this.data.showType&&"string"==dsf.type(t)?"Number[]"==this.data.dataType?(n=t.split(this.data.splitChart||","),n=e.map(n,(function(e){return parseFloat(e)}))):"String[]"==this.data.dataType?n=t.split(this.data.splitChart||","):"Number"==this.data.dataType&&(n=parseFloat(n)):"timePicker"==this.data.showType&&Array.isArray(t)&&(n=[dsf.date.format(t[0],"hh:ii:ss"),dsf.date.format(t[1],"hh:ii:ss")])),n},arrayDataValueChange:function(e,t,n){this.dataValueChange(t.slice(0))},getRequestUrl:function(e){return dsf.url.getWebPath(e.requestUrl||"file/upload/")},handleSuccess:function(e){var t=this;return function(e,n){t.dataValueChange(e.data[0].absolutePath)}.bind(this)},beforeUpload:function(e){console.log(e)}}}}).call(this,n("2ef0"))},"280a":function(e,t,n){"use strict";n("bacbe")},"2a3d":function(e,t,n){"use strict";(function(e){n("7db0"),n("c740"),n("4160"),n("a434"),n("159b");var a=n("53ca"),i=n("b85c"),o=n("953d"),s=n("2d0f");t["a"]={name:"MobileUeditorToolbar",mixins:[s["a"]],components:{quillEditor:o["quillEditor"]},data:function(){return{checkAll:!1,isIndeterminate:!1,tools:[{val:"bold",text:"加粗"},{val:"italic",text:"斜体"},{val:"underline",text:"下划线"},{val:"strike",text:"中划线"},{val:"blockquote",text:"引用"},{val:"code-block",text:"代码块"},{val:{header:1},text:"一级标题"},{val:{header:2},text:"二级标题"},{val:{list:"ordered"},text:"有序列表"},{val:{list:"bullet"},text:"无序列表"},{val:{script:"sub"},text:"下标"},{val:{script:"super"},text:"上标"},{val:{indent:"-1"},text:"取消首行缩进"},{val:{indent:"+1"},text:"首行缩进"},{val:{size:["small",!1,"large","huge"]},text:"字号"},{val:{header:[1,2,3,4,5,6,!1]},text:"段落"},{val:{color:[]},text:"字体颜色"},{val:{background:[]},text:"背景色"},{val:{font:[]},text:"字体"},{val:{align:[]},text:"对齐方式"},{val:"clean",text:"清除样式"},{val:"link",text:"链接"},{val:"image",text:"上传图片"},{val:"video",text:"视频地址"}],checkedTools:this.owner.toolBar,option:{modules:{toolbar:[]}},showEditor:!0}},watch:{checkedTools:function(){this.renderUEditor()}},created:function(){this.initData(),this.judgeCheckAllStatus()},mounted:function(){this.renderUEditor()},methods:{initData:function(){var e=this;this.tools.forEach((function(t){0===e.checkedTools.length?t.checked=!0:t.checked=!1}));var t,n=Object(i["a"])(this.checkedTools);try{var o=function(){var n=t.value,i=e.tools.findIndex((function(e){return"object"===Object(a["a"])(n)?"object"===Object(a["a"])(e.val)&&JSON.stringify(e.val)===JSON.stringify(n):e.val===n}));i>-1&&(e.tools[i].checked=!0)};for(n.s();!(t=n.n()).done;)o()}catch(err){n.e(err)}finally{n.f()}},judgeCheckAllStatus:function(){var e=!this.tools.find((function(e){return!e.checked}));if(e)return this.checkAll=!0,void(this.isIndeterminate=!1);var t=this.tools.findIndex((function(e){return e.checked}));if(-1!==t)return this.checkAll=!1,void(this.isIndeterminate=!0);this.checkAll=!1,this.isIndeterminate=!1},renderUEditor:function(){var e=this;this.showEditor=!1,this.option.modules.toolbar=this.checkedTools,this.$nextTick((function(){e.showEditor=!0}))},chooseItem:function(t,n){var a=e.assign({},t,{checked:!t.checked});this.tools.splice(n,1,a),this.refreshCheckedArr(),this.judgeCheckAllStatus()},chooseAll:function(){this.isIndeterminate=!1,this.checkAll?this.tools.forEach((function(e){e.checked=!0})):this.tools.forEach((function(e){e.checked=!1})),this.refreshCheckedArr()},refreshCheckedArr:function(){var e,t=[],n=Object(i["a"])(this.tools);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.checked&&t.push(a.val)}}catch(err){n.e(err)}finally{n.f()}this.checkedTools=t},yes:function(){return this.checkedTools}}}}).call(this,n("2ef0"))},"2b1a":function(e,t,n){"use strict";(function(e){n("4de4"),n("d81d"),n("b0c0"),n("b64b"),n("d3b7"),n("acd8"),n("e25e"),n("25f0");var a=n("2d0f");t["a"]={name:"DesValidateRule",mixins:[a["a"]],data:function(){return{activeName:"base",valueAttributes:[],currentNodeKey:"",treeConfig:{label:"name"},formModel:{},errorMsg:{required:"该项必须填写",isNumber:"该项必须填写数字",min:"该项长度不可小于@[min]个字符",max:"该项长度不可大于@[max]个字符",numberMin:"该项不可小于@[numberMin]",numberMax:"该项不可大于@[numberMax]",express:"@[expressName]格式不正确",precision:"小数点后最多保留@[precision]位小数"},javascript:"",expressOptions:[{expressName:"",text:"",value:""},{expressName:"身份证号码",text:"身份证号码",value:"isIDCard"},{expressName:"身份证号码",text:"身份证号码(强校验)",value:"isIDCardFull"},{expressName:"手机号码",text:"手机号码",value:"isMobile"},{expressName:"电话号码",text:"电话号码",value:"isTelPhone"},{expressName:"电话/手机号码",text:"电话/手机号码",value:"isMobileOrTelPhone"},{expressName:"电子邮箱",text:"电子邮箱",value:"isEmail"},{expressName:"车牌号",text:"车牌号",value:"isPlateNumber"}],metaDataValidateConfig:null}},computed:{ownerCtrl:function(){return this.owner.$$getComponent()},model:function(){return this.formModel[this.currentNodeKey]}},created:function(){var t=this;this.valueAttributes=dsf.mix(!0,[],this.ownerCtrl.metadata.valueAttributes),this.currentNodeKey=this.valueAttributes[0].code,this.ownerCtrl.metadata.validate&&this.ownerCtrl.metadata.validate.config&&(this.metaDataValidateConfig=dsf.mix(!0,{},this.ownerCtrl.metadata.validate.config)),this.metaDataValidateConfig||(this.metaDataValidateConfig={}),e.each(this.valueAttributes,(function(e){var n=e.code;t.ownerCtrl.metadata&&(t.$set(t.metaDataValidateConfig,n,t.createValideConfig(n)),t.setFormModel(n,t.metaDataValidateConfig[n]))})),this.javascript=this.currentData&&this.currentData.code||""},methods:{yes:function(){var t=this,n={config:null,code:null},a="";if(a)return n.code=a,n;var i={},o=function(n){var a=t.formModel[n],o=a.required,s=a.isNumber,r=a.isNumber?a.numberMin:a.min,l=a.isNumber?a.numberMax:a.max,c=a.isNumber?a.precision:"",u=a.express;if(!o&&!s&&!r&&!l&&!c&&!u)return"continue";var d=e.filter(t.expressOptions,(function(e){return e.value==a.express}));a.expressName=e.map(d,"expressName"),i[n]=a};for(var s in this.formModel)o(s);return 0==Object.keys(i).length?null:(n.config=i,n)},createValideConfig:function(e){var t={required:!1,isNumber:!1,min:"",max:"",numberMax:"",numberMin:"",express:"",expressName:"",precision:"",errorMsg:dsf.mix({},this.errorMsg)};if(this.metaDataValidateConfig[e]){var n=this.metaDataValidateConfig[e];return dsf.mix(!0,t,n),dsf.mix(n,t)}return dsf.mix({},t)},setFormModel:function(e,t){var n={};n.required=t.required,n.isNumber=t.isNumber,n.numberMin="",n.numberMax="",n.max="",n.min="",n.precision="",t.isNumber?(n.numberMin=t.numberMin,n.numberMax=t.numberMax,n.precision=t.precision):(n.min=t.min,n.max=t.max),n.express=t.express,n.expressName=t.expressName,n.errorMsg=t.errorMsg,this.$set(this.formModel,e,n)},tabsCliekHandler:function(e){var t=this;this.$nextTick((function(){var n=e.name,a=n+"Editor";t.$refs[a]&&t.$refs[a].layout()}))},editorLoaded:function(e){var t=e+"Editor";this.$refs[t]&&this.$refs[t].setContent(this.javascript)},checkNum:function(e,t){if(this.model[e]){var n=t?parseInt:parseFloat;this.model[e]=n(this.model[e]).toString(),dsf.isNumber(this.model[e])||(this.model[e]="")}},nodeClickHandler:function(e){this.currentNodeKey=e.code}}}}).call(this,n("2ef0"))},"2b66":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100%"}},[n("el-aside",{staticStyle:{overflow:"auto",height:"100%"},attrs:{width:"35%"}},[n("div",{staticStyle:{overflow:"auto",height:"100%"}},[n("el-tree",{attrs:{data:e.treeData,props:e.defaultProps,"default-expand-all":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,i=t.data;return n("span",{staticClass:"custom-tree-node"},[n("i",{staticClass:"iconfont icon-biaodanzujian-shurukuang",staticStyle:{"margin-right":"5px"}}),n("span",{on:{dblclick:function(t){return e.toList(a,i)}}},[e._v(e._s(a.label))]),i.field?n("span",{staticStyle:{color:"red"},on:{dblclick:function(t){return e.toList(a,i)}}},[e._v("(字段:"+e._s(i.field)+")")]):e._e()])}}])})],1)]),n("el-main",{staticStyle:{padding:"0px"}},[n("el-container",[n("el-main",[n("el-table",{attrs:{data:e.tableData,border:"","highlight-current-row":!0}},[n("el-table-column",{attrs:{prop:"fieldCaption",label:"字段描述"}}),n("el-table-column",{attrs:{prop:"field",label:"字段名称"}}),n("el-table-column",{attrs:{label:"排序类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{model:{value:t.row.sortType,callback:function(n){e.$set(t.row,"sortType",n)},expression:"scope.row.sortType"}},[n("el-option",{attrs:{value:"asc",label:"升序"}}),n("el-option",{attrs:{value:"desc",label:"降序"}})],1)]}}])}),n("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("dsf-button",{attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"},on:{click:function(n){return n.stopPropagation(),e.remove(t.row)}}}),n("dsf-button",{attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"},on:{click:function(n){return n.stopPropagation(),e.up(t.row)}}}),n("dsf-button",{attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"},on:{click:function(n){return n.stopPropagation(),e.down(t.row)}}})]}}])})],1)],1)],1)],1)],1)},i=[],o=n("a029"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["default"]=l.exports},"2d99":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-range-select"},[n("el-select",{attrs:{placeholder:"请选择"},on:{change:e.valueChange},model:{value:e.startValue,callback:function(t){e.startValue=t},expression:"startValue"}},e._l(e.start,(function(e,t){return n("el-option",{key:"start-"+t,attrs:{label:e.text,value:e.value}})})),1),n("span",{staticClass:"seperate"},[e._v("至")]),n("el-select",{attrs:{placeholder:"请选择"},on:{change:e.valueChange},model:{value:e.endValue,callback:function(t){e.endValue=t},expression:"endValue"}},e._l(e.end,(function(e,t){return n("el-option",{key:"start-"+t,attrs:{label:e.text,value:e.value}})})),1)],1)},i=[],o=(n("c740"),n("fb6a"),n("45fc"),{props:{value:{type:Array,default:function(){return[]}},dictionary:{type:Array,default:function(){return[]}}},data:function(){return{startValue:"",endValue:""}},computed:{start:function(){return this.dictionary},end:function(){var e=this,t=this.dictionary.findIndex((function(t){return t.value===e.startValue}));return this.dictionary.slice(t)}},watch:{value:function(){this.initValue()}},created:function(){this.initValue(),this.valueChange()},methods:{initValue:function(){this.startValue=this.value.length?this.value[0]:this.dictionary[0].value,this.endValue=this.value.length?this.value[1]:this.dictionary[this.dictionary.length-1].value},valueChange:function(){var e=this;if(this.end.some((function(t){return t.value===e.endValue}))){var t=[this.startValue,this.endValue];this.$emit("input",t),this.$emit("change",t)}else this.endValue=this.end[0].value}}}),s=o,r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["a"]=l.exports},"2ed5":function(e,t,n){"use strict";n("f09d")},"32b7":function(e,t,n){"use strict";(function(e){n("4e82"),n("acd8");var a=n("55c1"),i=function(t,n,i){var o=null,s=null,r=[],l=t;this.sp=null,this.ep=null,this.type=null,this.isLast=!1,this.index=i,this.direction=null,this.hasTransition=!1,this.getLine=function(){return l},this.render=function(){this.sp.x=parseFloat(this.sp.x),this.sp.y=parseFloat(this.sp.y),this.ep.x=parseFloat(this.ep.x),this.ep.y=parseFloat(this.ep.y);var t=[],i={type:"point",data:{x:this.sp.x,y:this.sp.y}},c={type:"point",data:{x:this.ep.x,y:this.ep.y}},u=[];this.remove();var d={sp:{x:i.data.x,y:i.data.y},ep:{x:c.data.x,y:c.data.y}};this.sp.y==this.ep.y?(this.type=a["d"].horizontal,this.isLast&&(d.ep.x=d.ep.x-(i.data.x<c.data.x?2:-2))):(this.type=a["d"].vertical,this.isLast&&(d.ep.y=d.ep.y-(i.data.y<c.data.y?2:-2)));var h=l.getPreLine(this);if(h&&h.type!=this.type&&h.hasTransition&&(this.type==a["d"].horizontal?i.data.x="left"==this.direction?i.data.x-a["i"]:i.data.x+a["i"]:i.data.y="top"==this.direction?i.data.y-a["i"]:i.data.y+a["i"]),this.type==a["d"].horizontal&&r.length>0){var p=5,f="right";this.sp.x>this.ep.x&&(f="left"),r=r.sort((function(e,t){return"right"==f?e.x<t.x?-1:1:e.x<t.x?1:-1})),t.push(i);for(var m=0;m<r.length;m++){var g=r[m],_={type:"point",data:{x:g.x-("right"==f?p:-p),y:g.y}},b={type:"point",data:{x:g.x+("right"==f?p:-p),y:g.y}};t.push(_),t.push({type:"arc",data:{radius:p,overX:b.data.x,overY:b.data.y,sweep:"right"==f?1:0}}),t.push(b)}}else t.push(i);var v=l.getNextLine(this);if(v&&v.type!=this.type){var y=0;y=a["h"].getLineLength(this.sp,this.ep);var x=a["h"].getLineLength(v.sp,v.ep),w=2*a["i"];if(y<=w||x<=w)t.push(c),this.hasTransition=!1;else{var k;if(y=a["h"].getLineLength(v.sp,v.ep),this.type==a["d"].vertical){k={type:"point",data:{x:this.ep.x,y:this.ep.y-("top"==this.direction?-a["i"]:a["i"])}},t.push(k);var S=null;"bottom"==this.direction&&"left"==v.direction||"top"==this.direction&&"right"==v.direction?S=1:("top"==this.direction&&"left"==v.direction||"bottom"==this.direction&&"right"==v.direction)&&(S=0),t.push({type:"arc",data:{radius:a["i"],overX:this.ep.x-("left"==v.direction?a["i"]:-a["i"]),overY:this.ep.y,sweep:S}})}else{k={type:"point",data:{x:this.ep.x-("right"==this.direction?a["i"]:-a["i"]),y:this.ep.y}},t.push(k);var D=null;"left"==this.direction&&"top"==v.direction||"right"==this.direction&&"bottom"==v.direction?D=1:("left"==this.direction&&"bottom"==v.direction||"right"==this.direction&&"top"==v.direction)&&(D=0),t.push({type:"arc",data:{radius:a["i"],overX:this.ep.x,overY:this.ep.y-("top"==v.direction?a["i"]:-a["i"]),sweep:D}})}this.hasTransition=!0}}else t.push(c),this.hasTransition=!1;for(var C=0;C<t.length;C++){var N=t[C];0==C&&"point"==N.type?u.push(["M",N.data.x,N.data.y]):"point"==N.type?u.push(["L",N.data.x,N.data.y]):"arc"==N.type&&u.push(["A",N.data.radius,N.data.radius,0,0,N.data.sweep,N.data.overX,N.data.overY])}try{o=n.path(u).attr({"stroke-width":l.strokeWidth,stroke:l.stroke}),this.isLast&&(s=n.path(a["h"].drawArrow(d)).attr({"stroke-width":l.strokeWidth,stroke:l.stroke,fill:l.stroke}))}catch(T){console.log(T)}o&&e(o[0]).data("object",this),s&&e(s[0]).data("object",this)},this.setIntersection=function(e){r.push(e)},this.clearIntersection=function(){r=[]},this.getIntersection=function(){return r},this.remove=function(){o&&o.remove(),s&&s.remove()},this.refresh=function(){o&&o.attr({"stroke-width":l.strokeWidth,stroke:l.stroke}),s&&s.attr({"stroke-width":l.strokeWidth,stroke:l.stroke,fill:l.stroke})},this.hide=function(){o&&o.hide(),s&&s.hide()},this.show=function(){o&&o.show(),s&&s.show()}};t["a"]=i}).call(this,n("1157"))},3329:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{staticClass:"ds-meta-data-select",attrs:{type:"border-card"},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[n("el-tab-pane",{attrs:{name:"0",label:"元数据"}},[e.loaded[0]?n("meta-data-select-item",{ref:"select0",attrs:{url:"rm/list/meta"}}):e._e()],1),n("el-tab-pane",{attrs:{name:"1",label:"数据源"}},[e.loaded[1]?n("meta-data-select-item",{ref:"select1",attrs:{url:"rm/list/ds"}}):e._e()],1)],1)},i=[],o=(n("e25e"),n("2d0f")),s=n("08a4"),r={name:"DesMetaDataSelect",components:{MetaDataSelectItem:s["default"]},mixins:[o["a"]],data:function(){return{tabIndex:"0",loaded:[!0,!1]}},watch:{tabIndex:function(e){this.$set(this.loaded,parseInt(e),!0)}},methods:{yes:function(){return this.$refs["select"+this.tabIndex].yes()}}},l=r,c=n("2877"),u=Object(c["a"])(l,a,i,!1,null,null,null);t["default"]=u.exports},3377:function(e,t,n){},"343b":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"select-dept"},[e.showSearch?n("div",{staticClass:"dsf-tree-search"},[n("el-input",{attrs:{disabled:e.loading,placeholder:"输入名称"},on:{input:e.search},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}},[n("i",{staticClass:"iconfont el-input__icon icon-Magnifier",attrs:{slot:"suffix"},slot:"suffix"})])],1):e._e(),n("div",{staticClass:"dsf-select-tree",style:{height:e.showSearch?"340px":"100%"}},[e.loading?n("div",{staticClass:"loading"},[e._v("数据加载中.....")]):n("el-tree",{ref:"treeForm",attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","show-checkbox":!e.hideCheckbox,"default-expand-all":!0,"default-checked-keys":e.checked,"check-strictly":!e.multi,"check-on-click-node":!0,"expand-on-click-node":!1,"filter-node-method":e.filterData},on:{"check-change":e.selectTree,"node-click":e.choose},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,i=t.data;return n("div",{staticClass:"custom-tree-node"},[void 0!==i[e.defaultProps.children]?[n("i",{staticClass:"iconfont",class:[a.expanded?"icon-dakai":"icon-wenjianjia"]}),n("span",{domProps:{innerHTML:e._s(i[e.defaultProps.label])}})]:[n("i",{staticClass:"iconfont icon-shiyongwendang"}),n("span",{domProps:{innerHTML:e._s(i[e.defaultProps.label])}})]],2)}}])})],1)])},i=[],o=(n("4de4"),n("c975"),{name:"SelectTree",props:{treeData:{type:Array,default:function(){return[]}},select:{type:[Object,Array],default:function(){return{}}},checked:{type:Array,default:function(){return[]}},showSearch:{type:Boolean,default:function(){return!1}},hideCheckbox:{type:Boolean,default:function(){return!1}},multi:{type:Boolean,default:function(){return!1}},formSearchKey:{type:String,default:function(){return""}},loading:{type:Boolean,default:function(){return!1}}},data:function(){return{searchKey:"",defaultProps:{children:"children",label:"label"}}},created:function(){},mounted:function(){},methods:{selectTree:function(e,t,n){1!=t||this.multi||this.$refs.treeForm.setCheckedNodes([e]);var a=this.$refs.treeForm.getCheckedNodes();a=a.filter((function(e){return!e.disabled})),this.$emit("update:select",this.multi?a:a[0])},filterData:function(e,t){return!e||-1!==t.label.indexOf(e)},search:function(){this.$refs.treeForm.filter(this.searchKey)},choose:function(e){this.$emit("change",e)}}}),s=o,r=(n("6168"),n("2877")),l=Object(r["a"])(s,a,i,!1,null,"c166c7ce",null);t["default"]=l.exports},"353a":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[n("DsfButton",{on:{click:e.addCol}},[e._v("新增列")])],1),n("el-main",{staticStyle:{padding:"0px"}},[n("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData,"highlight-current-row":!0},on:{"row-click":e.rowClickHandler}},[n("el-table-column",{attrs:{label:"名称","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" 第"+e._s(t.$index+1)+"格 ")]}}])}),n("el-table-column",{attrs:{label:"高度","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.height,callback:function(n){e.$set(t.row,"height",n)},expression:"scope.row.height"}})]}}])}),n("el-table-column",{attrs:{label:"占用列数","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.span,callback:function(n){e.$set(t.row,"span",e._n(n))},expression:"scope.row.span"}})]}}])}),n("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(n){return e.insert(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(n){return e.deleted(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(n){return e.up(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(n){return e.down(t)}}})]}}])})],1)],1)],1)},i=[],o=n("5d98"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["default"]=l.exports},3578:function(e,t,n){"use strict";(function(e){n("a15b"),n("d81d"),n("b0c0"),n("ac1f"),n("1276"),n("498a");var a=n("2d0f"),i=n("090e");t["a"]={name:"DesExamEnumEditor",components:{EnumEditorItem:i["default"]},mixins:[a["a"]],data:function(){var e=this;return{tabIndex:"static",treeLoading:!1,isTreeCheck:!1,treeData:[],defaultCheckedKey:"",dataTwo:"",dataOne:{type:"dict",code:null,attach:[]},tablePost:function(t,n){e.$http.get("dict/getList/"+t).done((function(e){e.success?n&&n(e.data):dsf.layer.message("请求异常！",!1)}))}}},created:function(){this.currentData&&this.init(this.currentData)},methods:{handleClick:function(e,t){"dict"===e.name&&!this.isTreeCheck&&this.treeData&&this.getTreeData()},init:function(e){var t=e.type,n=e.attach,a=e.code;if("static"===t){if(this.tabIndex="static",!n)return!1;this.dataTwo=n.map((function(e){return e.text===e.value?e.text:e.text+"|"+e.value})).join("\n")}else this.dataOne={type:t,code:a,attach:n},this.defaultCheckedKey=a,this.tabIndex="dict",this.getTreeData()},yes:function(){if("static"===this.tabIndex){var t=this.dataTwo.trim().split("\n");return{type:"static",attach:0==t?[]:t.map((function(t){if(!e.isEmpty(t))return t=t.split("|"),{text:t[0],value:t[1]||t[0]}}))}}return this.dataOne},getTreeData:function(){var e=this;this.treeLoading=!0,this.$http.get("/rm/list/dataDic").done((function(t){t.success?(e.isTreeCheck=!0,e.treeData=t.data.map((function(t){return e.dataFormat(t)}))):dsf.error(err)})).always((function(){e.treeLoading=!1}))},dataFormat:function(e){var t=this,n=e.name,a=e.dsfa_rm_id,i=e.type_value,o=e.children,s={label:n,ID:a,nocheck:"5"!==i,iconSkin:""};return o?s.children=o.map((function(e){return t.dataFormat(e)})):s.nocheck&&(s.iconSkin="_special"),s}}}}).call(this,n("2ef0"))},"369b":function(e,t,n){},"36cc":function(e,t,n){},3721:function(e,t,n){"use strict";(function(e,a){n("4160"),n("ac1f"),n("5319"),n("159b");var i=n("669d"),o=n("4baa"),s=n("6269"),r=n("0c85"),l=n("c638"),c=n("d0f8"),u=n("5032"),d=n("76af");t["a"]={name:"DsfSeatView",data:function(){return{keyStack:[],postData:{_id:"",backgroundImage:{},canvasSet:{},hasBg:!1,items:[],groups:[]},leftList:[],personObj:{},relativeList:[],chosenItems:[],seatObj:null}},computed:{relativeObj:function(){for(var e={},t=0;t<this.relativeList.length;t++){var n=this.relativeList[t];e[n.seatNum]=n}return e}},watch:{"postData.backgroundImage":function(){c["a"].call(this)}},components:{topTools:i["a"],leftTree:o["a"],seatCanvas:s["a"],seatItem:r["a"],seatPop:l["a"]},mounted:function(){this.getSeatInfo(),this.bindShortKey()},methods:{getSeatInfo:function(){var t=this.$route.query.id;if(t){var n=JSON.parse(localStorage.getItem("seat_"+t));if(n){e.isEmpty(n.canvasSet)&&(n.canvasSet={width:void 0,height:void 0}),this.postData=n;var a={};n.items.forEach((function(e){a[e.seatNum]=e})),n.groups.forEach((function(e){e.member.forEach((function(e){a[e.seatNum]=e}))})),this.seatObj=a;var i=this.$route.query.relId;if(i){var o=JSON.parse(localStorage.getItem("relation_"+i));o&&(this.relativeList=o)}}}},bindShortKey:function(){var e=["ctrl","ctrl-d","ctrl-s"];Object(c["g"])(this.keyStack,e),a(".seat-designer-page").on("click",(function(){u["a"].dispatch(d["a"].BODY_EMPTY_CLICK)}))},save:function(){var e=this.$route.query.relId||dsf.uuid();localStorage.setItem("relation_"+e,JSON.stringify(this.relativeList));var t=this.$route.query,n=Object.assign({},t,{relId:e});this.$router.replace({path:this.$route.path,query:n})},clear:function(){this.relativeList=[]}}}}).call(this,n("2ef0"),n("1157"))},"382c":function(e,t,n){"use strict";n("369b")},"38e9":function(e,t,n){},"3a62":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-data-select",staticStyle:{height:"100%",overflow:"auto"}},[n("dsf-tree-select",{attrs:{"tree-data":e.treeData,loading:e.loading[0],"default-checked-key":e.defaultCheckedKey,multiple:e.multiple,"search-control":e.searchControl,theme:e.theme,"node-key":"ID","node-name":"label","default-expand-all":""},on:{"choose-key":e.chooseKey,"choose-node":e.chooseNode}})],1)},i=[],o=(n("d81d"),n("b0c0"),n("4795"),n("b45c")),s={name:"DesDictDataSelect",components:{DsfTreeSelect:o["default"]},props:{value:{type:Object,default:function(){return{key:null,node:null}}},theme:{type:String,default:"theme2"},searchControl:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1}},data:function(){return{loading:!1,treeData:[],defaultCheckedKey:"",node:null}},created:function(){this.initValue(),this.postData(),this.value.key&&(this.defaultCheckedKey=this.value.key||"")},methods:{initValue:function(){this.multiple?this.value.key&&"array"!==dsf.type(this.value.key)&&this.updateValue({key:[this.value.key],node:[this.value.node]}):this.value.key&&"array"===dsf.type(this.value.key)&&this.updateValue({key:this.value.key[0],node:this.value.node[0]})},postData:function(){var e=this;this.loading=!0,this.$http.get("/rm/list/dataDic").done((function(t){t.success?e.treeData=t.data.map((function(t){return e.dataFormat(t)})):dsf.layer.message("请求异常！",!1)})).always((function(){e.loading=!1}))},dataFormat:function(e){var t=this,n=e.name,a=e.dsfa_rm_id,i=e.type_value,o=e.children,s={label:n,ID:a,nocheck:"5"!==i,iconSkin:""};return o?s.children=o.map((function(e){return t.dataFormat(e)})):s.nocheck&&(s.iconSkin="_special"),s},chooseKey:function(e){var t=this;setTimeout((function(){t.updateValue({key:e,node:t.node})}),20)},chooseNode:function(e){this.node=e},updateValue:function(e){this.$emit("input",e),this.$emit("change",e)}}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,"6fca0787",null);t["default"]=c.exports},"3b6b":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a})),n.d(t,"k",(function(){return i})),n.d(t,"n",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"m",(function(){return c})),n.d(t,"q",(function(){return u})),n.d(t,"l",(function(){return d})),n.d(t,"h",(function(){return h})),n.d(t,"o",(function(){return r})),n.d(t,"j",(function(){return l})),n.d(t,"i",(function(){return p})),n.d(t,"g",(function(){return f})),n.d(t,"d",(function(){return m})),n.d(t,"b",(function(){return g})),n.d(t,"e",(function(){return b})),n.d(t,"f",(function(){return y})),n.d(t,"r",(function(){return B})),n.d(t,"p",(function(){return P}));n("b0c0");var a=function(){return{rows:[{name:"标识",value:"",hide:!0,group:"流程基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"ID",desc:"流程的唯一标识"},{name:"名称",value:"",group:"流程基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Name",desc:"流程的名称",isBase:!0,required:!0},{name:"版本",value:"",group:"流程基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Version",desc:"流程的版本号",isBase:!0,nodeType:"flow"},{name:"办理期限类型",value:"",group:"流程基本信息",editor:{type:"combobox",options:{data:_()}},nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"TimeLimit",nodeName3:"Type",desc1:"流程的办理期限",desc:"期限类型:0：无限制，1:自然日，2:工作日，13:(自然日)时，14:(自然日)分，23:(工作日)时，24:(工作日)分",isBase:!0,showRob:"Value"},{name:"办理期限值",value:"",group:"流程基本信息",editor:"numberbox",nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"TimeLimit",nodeName3:"Value",desc:"流程的办理期限:限制值",isBase:!0},{name:"流程说明",value:"",group:"流程基本信息",editor:"textarea",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Desc",desc:"流程的说明"},{name:"启动流程",value:"",group:"事件",nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"Event",nodeName3:"onStart",desc1:"事件",desc:"启动流程",type:"dialog",config:{title:"启动流程",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"办结流程",value:"",group:"事件",nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"Event",nodeName3:"onClose",desc1:"事件",desc:"办结流程",type:"dialog",config:{title:"办结流程",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"强制办结",value:"",group:"事件",nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"Event",nodeName3:"onForceClose",desc1:"事件",desc:"强制办结",type:"dialog",config:{title:"强制办结",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"增发",value:"",group:"事件",nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"Event",nodeName3:"onExSend",desc1:"事件",desc:"增发",type:"dialog",config:{title:"增发",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"销毁",value:"",group:"事件",nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"Event",nodeName3:"onDestory",desc1:"事件",desc:"销毁",type:"dialog",config:{title:"销毁",width:"1000px",height:"600px",content:"EventSetting"}},{name:"应用接入商ID",value:"",group:"厂商信息",nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"Vendor",nodeName3:"ID",desc1:"厂商信息",desc:"厂商ID"},{name:"应用接入商名称",value:"",group:"厂商信息",nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"Vendor",nodeName3:"Name",desc:"厂商信息"}]}},i=function(){return{rows:[{name:"标识",value:"",hide:!0,group:"节点基本信息",nodeLevel:1,nodeName:"ID",desc:"节点的唯一标识"},{name:"名称",value:"",group:"节点基本信息",editor:"text",nodeLevel:1,nodeName:"Name",desc:"节点的名称",required:!0},{name:"节点类型",value:0,hide:!0,group:"节点基本信息",editor:{type:"combobox",options:{data:w()}},nodeLevel:1,nodeName:"Type",desc:"节点类型,0：开始节点，1：一般节点，2：结束节点，3：跳转节点，4：子流程，5：自动流"},{name:"选择子流程",value:"",group:"节点基本信息",nodeLevel:1,nodeName:"subFlow",desc:"选择子流程",type:"dialog",href:"selectFlow.htm",width:300,height:400},{name:"备注",value:"",group:"节点基本信息",editor:"textarea",nodeLevel:1,nodeName:"Desc",desc:"节点的备注"},{name:"节点期限类型",value:0,group:"节点基本信息",editor:{type:"combobox",options:{data:_()}},nodeLevel:2,nodeName1:"TimeLimit",nodeName2:"Type",desc1:"节点的办理期限",desc:"期限类型:0：无限制，1:自然日，2:工作日，13:(自然日)时，14:(自然日)分，23:(工作日)时，24:(工作日)分"},{name:"办理期限值",value:"",group:"节点基本信息",editor:"numberbox",nodeLevel:2,nodeName1:"TimeLimit",nodeName2:"Value",desc:"节点的办理期限:限制值"},{name:"消息配置信息",value:"",group:"消息配置信息",nodeLevel:1,nodeName:"Message",desc:"消息配置信息",type:"dialog",href:"property_dialog_message_content.htm"},{name:"出线信息类型",value:0,group:"出线信息",editor:{type:"radio",options:{data:k()}},nodeLevel:2,nodeName1:"OutLine",nodeName2:"Type",desc1:"出线信息",desc:"出线信息类型：0，或分支，1，与分支"},{name:"是否可以批量发送",value:0,group:"出线信息",editor:{type:"combobox",options:{data:S()}},nodeLevel:2,nodeName1:"OutLine",nodeName2:"IsEnableBatch",desc:"是否可以批量发送,  0：不可以，1，可以"},{name:"是否启用前置条件",value:0,group:"出线信息",nodeLevel:3,nodeName1:"OutLine",nodeName2:"SendPreConditions",nodeName3:"IsEnabled",desc:"是否启用前置条件，0：不启用，1：启用",editor:{type:"combobox",options:{data:I()}}},{name:"退回控制",value:0,group:"出线信息",nodeLevel:2,nodeName1:"OutLine",nodeName2:"SendBackType",desc:"退回控制，0：退回到上一节点，1：按路径退回，2：按环节退回",editor:{type:"combobox",options:{data:$()}}},{name:"发送前置条件",value:"",group:"出线信息",nodeLevel:2,nodeName1:"OutLine",nodeName2:"SendPreConditions",desc:"发送前置条件，如果不满足，则提示用户并终止发送操作",type:"dialog",href:"property_dialog_sendPreTerm.html"},{name:"是否启用发送条件",value:0,hide:!0,group:"出线信息",nodeLevel:3,nodeName1:"OutLine",nodeName2:"SendConditions",nodeName3:"IsEnabled",desc:"是否启用发送条件，0：不启用，1：启用",editor:{type:"combobox",options:{data:I()}}},{name:"发送条件",value:"",hide:!0,group:"出线信息",nodeLevel:2,nodeName1:"OutLine",nodeName2:"SendConditions",desc:"发送条件，判断哪些发送路线有效",type:"dialog",href:"property_dialog_send1.htm"},{name:"自动处理规则",value:"",hide:!0,group:"出线信息",nodeLevel:2,nodeName1:"OutLine",nodeName2:"AutoDo",desc:"自动处理规则",type:"dialog",href:"property_dialog3.htm",width:300,height:300},{name:"特送的子流程",value:"",group:"出线信息",nodeLevel:2,nodeName1:"OutLine",nodeName2:"SpecialSendRange",desc:"特送的节点范围",type:"dialog",href:"property_dialog_tsjd.htm",width:300,height:400},{name:"是否为抄送",value:0,group:"入线信息",editor:{type:"radio",options:{data:D()}},nodeLevel:2,nodeName1:"InLine",nodeName2:"IsCC",desc1:"入线信息",desc:"是否为抄送，0：否，1：是"},{name:"是否自动发送",value:0,group:"入线信息",editor:{type:"combobox",options:{data:C()}},nodeLevel:2,nodeName1:"InLine",nodeName2:"IsAutoSend",desc:"是否自动发送：0，不自动发送，1，自动发送;满足自动发送的条件：1、IsAutoSend=1,2、选择范围只有一个选项或选择范围为必选,3、继承节点经办人"},{name:"继承节点经办人",value:0,group:"入线信息",editor:{type:"combobox",options:{data:N()}},nodeLevel:2,nodeName1:"InLine",nodeName2:"IsInherit",desc:"继承节点经办人：0，不继承，1，继承;当该节点已经流转过，则再次发送默认发给最近一次的经办人，否则根据发送范围选择。"},{name:"用户选择树的展开级别",value:-1,group:"入线信息",editor:{type:"combobox",options:{data:x()}},nodeLevel:2,nodeName1:"InLine",nodeName2:"ExpandLevel",desc:"用户选择树的展开级别，-1:全部展开，0:不展开，1：一级，2:2级，3:3级。。。"},{name:"是否允许多人办理",value:0,group:"入线信息",editor:{type:"radio",options:{data:T()}},nodeLevel:3,nodeName1:"InLine",nodeName2:"Multiplayer",nodeName3:"IsEnabled",desc2:"多人办理",desc:"是否允许多人办理：0，不允许，1，允许"},{name:"发送模式",value:0,group:"入线信息",editor:{type:"combobox",options:{data:L()}},nodeLevel:3,nodeName1:"InLine",nodeName2:"Multiplayer",nodeName3:"SendMode",desc:"发送模式：0，并行，1，串行，2，两者皆可，默认并行，3，两者皆可，默认串行"},{name:"发送范围",value:"",group:"入线信息",nodeLevel:2,nodeName1:"InLine",nodeName2:"RangeRule",desc:"发送范围",type:"dialog",width:"800",height:"600",href:"property_dialog_sendScope.html"},{name:"发送后额外操作",value:"",group:"入线信息",nodeLevel:2,nodeName1:"InLine",nodeName2:"ExAction",href:"iframe_gjSelect.html",height:"300",desc:"发送到当前环节后需要做的额外操作",type:"dialog"},{name:"退回后额外操作",value:"",group:"入线信息",nodeLevel:2,nodeName1:"InLine",nodeName2:"SendBackAction",href:"iframe_gjSelect.html",height:"300",desc:"退回或被回收需要执行的额外操作",type:"dialog"},{name:"额外的配置信息",value:"",group:"入线信息",nodeLevel:2,nodeName1:"InLine",nodeName2:"ExInfo",href:"form_ext.htm",desc:"额外的配置信息，有业务系统自定义，自解析",type:"dialog"},{name:"自动处理环节的业务逻辑",value:"",group:"入线信息",nodeLevel:2,nodeName1:"InLine",nodeName2:"AutoAction",desc:"自动处理环节的业务逻辑",type:"dialog",href:"iframe_gjSelect.html",height:"300"}]}},o=function(){return{rows:[{name:"标识",value:"",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"ID",desc:"节点的唯一标识"},{name:"名称",value:"",group:"节点基本信息",editor:"text",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Name",desc:"节点的名称",isBase:!0,required:!0},{name:"任务类型",value:"用户任务",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Type",desc:"任务类型"},{name:"节点期限类型",value:0,group:"节点基本信息",editor:{type:"combobox",options:{data:_()}},nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"TimeLimit",nodeName3:"Type",desc1:"节点的办理期限",desc:"期限类型:0：无限制，1:自然日，2:工作日，13:(自然日)时，14:(自然日)分，23:(工作日)时，24:(工作日)分",isBase:!0,showRob:"Value"},{name:"办理期限值",value:"",group:"节点基本信息",editor:"numberbox",nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"TimeLimit",nodeName3:"Value",desc:"节点的办理期限:限制值",isBase:!0},{name:"处理模式",value:0,group:"入线信息",editor:{type:"combobox",options:{data:b()}},nodeLevel:2,nodeName1:"InLine",nodeName2:"Type",desc1:"入线信息",desc:"处理模式:0：单人办理，1:会签（多人同时处理），2:多人依次处理，3:抄送（需提交），4:抄送（不需提交），5:抢办（按人数），6:抢办（按比例）",isBase:!0,showRob:"RushInfo"},{name:"人数",value:"1",group:"入线信息",editor:"text",nodeLevel:2,nodeName1:"InLine",nodeName2:"RushInfo",desc:"抢办人数",isBase:!0,hide:!0,unit:"（人）",max:999999},{name:"处理范围",value:"",group:"入线信息",class:"RangeRule",nodeLevel:2,nodeName1:"InLine",nodeName2:"RangeRule",desc:"处理范围",type:"dialog",config:{content:"RangeRule",width:"1100px",height:"552px"},isBase:!0},{name:"展开层级",value:0,group:"入线信息",editor:{type:"combobox",options:{data:x()}},nodeLevel:2,nodeName1:"InLine",nodeName2:"ExpandLevel",desc1:"入线信息",desc:"展开层级:-1： 全部展开， 0：不展开，1:一级，2:两级，3:三级"},{name:"继承节点经办人",value:1,group:"入线信息",editor:{type:"radio",options:{data:N()}},nodeLevel:2,nodeName1:"InLine",nodeName2:"IsInherit",desc1:"入线信息",desc:"继承节点经办人: 0：不继承，1：继承"},{name:"出线信息类型",value:0,group:"出线信息",editor:{type:"radio",options:{data:k()}},nodeLevel:2,nodeName1:"OutLine",nodeName2:"Type",desc1:"出线信息",desc:"出线信息类型：0，或分支，1，与分支"},{name:"是否必填意见",value:0,group:"出线信息",editor:{type:"radio",options:{data:[{value:0,text:"否"},{value:1,text:"是"}]}},nodeLevel:2,nodeName1:"OutLine",nodeName2:"IsEnableBatch",desc:"是否必填意见,  0：否，1：是"},{name:"退回控制",value:0,group:"出线信息",editor:{type:"combobox",options:{data:[{value:0,text:"退回到上一节点"},{value:1,text:"按路径退回"},{value:2,text:"按环节退回"}]}},nodeLevel:2,nodeName1:"OutLine",nodeName2:"SendBackType",desc:"退回控制，0：退回到上一节点，1：按路径退回, 2: 按环节退回"},{name:"发送后",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onAfterSend",desc1:"事件",desc:"发送后",type:"dialog",config:{title:"发送后",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"退回",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onSendBack",desc1:"事件",desc:"办结流程",type:"dialog",config:{title:"办结流程",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"强制办结",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onForceClose",desc1:"事件",desc:"强制办结",type:"dialog",config:{title:"强制办结",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"回收",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onRecovery",desc1:"事件",desc:"回收",type:"dialog",config:{title:"回收",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"强制回收",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onForceRecovery",desc1:"事件",desc:"强制回收",type:"dialog",config:{title:"强制回收",width:"1000px",height:"600px",content:"EventSetting"}},{name:"增发",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onExSend",desc1:"事件",desc:"增发",type:"dialog",config:{title:"增发",width:"1000px",height:"600px",content:"EventSetting"}}]}},s=function(){return{rows:[{name:"标识",value:"",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"ID",desc:"节点的唯一标识"},{name:"名称",value:"",group:"节点基本信息",editor:"text",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Name",desc:"节点的名称",isBase:!0,required:!0},{name:"任务类型",value:"子流程任务",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Type",desc:"任务类型"},{name:"节点期限类型",value:0,group:"节点基本信息",editor:{type:"combobox",options:{data:_()}},nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"TimeLimit",nodeName3:"Type",desc1:"节点的办理期限",desc:"期限类型:0：无限制，1:自然日，2:工作日，13:(自然日)时，14:(自然日)分，23:(工作日)时，24:(工作日)分",isBase:!0,showRob:"Value"},{name:"办理期限值",value:"",group:"节点基本信息",editor:"numberbox",nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"TimeLimit",nodeName3:"Value",desc:"节点的办理期限:限制值",isBase:!0},{name:"子流程类型",value:0,group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Mode",desc:"子流程类型",hide:!0},{name:"选择子流程任务",value:null,group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"SubWFID",desc:"选择子流程任务后，将自动获取子流程任务，覆盖子流程",type:"dialog",config:{content:"SetSubFlow",width:"400px",height:"480px"},isBase:!0,showRob:"IsEnbled,OpinionNodeID"},{name:"子流程任务名称",value:null,group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"SubWFName",hide:!0},{name:"环节是否启用",value:1,group:"节点基本信息",nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"Merge",nodeName3:"IsEnbled",editor:{type:"radio",options:{data:[{value:0,text:"否"},{value:1,text:"是"}]}},isBase:!0,showRob:"OpinionNodeID",hide:!0},{name:"意见环节ID",value:null,group:"节点基本信息",nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"Merge",nodeName3:"OpinionNodeID",desc:"选择意见环节",type:"dialog",config:{content:"SetOpinionNode",width:"400px",height:"400px"},isBase:!0,hide:!0},{name:"意见环节Name",value:null,group:"节点基本信息",nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"Merge",nodeName3:"OpinionNodeName",hide:!0}]}},r=function(){return{rows:[{name:"标识",value:"",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"ID",desc:"节点的唯一标识"},{name:"名称",value:"",group:"节点基本信息",editor:"text",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Name",desc:"节点的名称",isBase:!0,required:!0},{name:"任务类型",value:"web服务任务",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Type",desc:"任务类型"},{name:"处理模式",value:0,group:"入线信息",editor:{type:"combobox",options:{data:[{value:0,text:"单人办理"}]}},nodeLevel:2,nodeName1:"InLine",nodeName2:"Type",desc1:"入线信息",desc:"处理模式:0：单人办理"},{name:"人数",value:"1",group:"入线信息",editor:"text",nodeLevel:2,nodeName1:"InLine",nodeName2:"RushInfo",desc:"抢办人数",hide:!0,unit:"（人）"},{name:"处理范围",value:{Type:51,IsUser:1,Rule:[{RobotID:"104_robot",RobotName:"web服务任务代理机器人",IsDeep:1,IsUser:1,IsSelected:1,RoleID:"",RoleName:"",Type:51,DeptID:"",DeptName:""}]},group:"入线信息",class:"RangeRule",nodeLevel:2,nodeName1:"InLine",nodeName2:"RangeRule",desc:"处理范围",type:"dialog",config:{content:"RangeRule",width:"1100px",height:"552px"},isBase:!0,hide:!0},{name:"展开层级",value:0,group:"入线信息",editor:{type:"combobox",options:{data:[{value:0,text:"不展开"}]}},nodeLevel:2,nodeName1:"InLine",nodeName2:"ExpandLevel",desc1:"入线信息",desc:"展开层级: 不展开"},{name:"继承节点经办人",value:0,group:"入线信息",editor:{type:"combobox",options:{data:[{value:0,text:"不继承"}]}},nodeLevel:2,nodeName1:"InLine",nodeName2:"IsInherit",desc:"继承节点经办人：0，不继承"},{name:"出线信息类型",value:1,group:"出线信息",editor:{type:"radio",options:{data:[{value:1,text:"与分支"}]}},nodeLevel:2,nodeName1:"OutLine",nodeName2:"Type",desc1:"出线信息",desc:"出线信息类型：与分支"},{name:"是否可以批量发送",value:0,group:"出线信息",editor:{type:"combobox",options:{data:[{value:0,text:"不可以"}]}},nodeLevel:2,nodeName1:"OutLine",nodeName2:"IsEnableBatch",desc:"是否可以批量发送：不可以"},{name:"退回控制",value:0,group:"出线信息",nodeLevel:2,nodeName1:"OutLine",nodeName2:"SendBackType",desc:"退回控制：退回到上一节点",editor:{type:"combobox",options:{data:[{value:0,text:"退回到上一节点"}]}}},{name:"URL",value:"",group:"脚本信息",editor:"text",nodeLevel:2,nodeName1:"Services",nodeName2:"URL",desc:"URL"},{name:"请求方式",value:0,group:"脚本信息",editor:{type:"combobox",options:{data:[{value:0,text:"get"},{value:1,text:"post-form-data"},{value:2,text:"post-raw"}]}},nodeLevel:2,nodeName1:"Services",nodeName2:"Type",desc:"请求方式,0：get，1：post-form-data，2：post-raw",showRob:"Params,Content"},{name:"参数",value:[],group:"脚本信息",nodeLevel:2,nodeName1:"Services",nodeName2:"Params",desc:"参数，当type=0,1",type:"dialog",config:{width:"500px",height:"260px",content:"SetParams"},hide:!0},{name:"请求内容",value:"",group:"脚本信息",nodeLevel:2,nodeName1:"Services",nodeName2:"Content",desc:"请求内容,当Type=2",editor:"textarea",hide:!0},{name:"超时时间",value:"",group:"脚本信息",nodeLevel:2,nodeName1:"Services",nodeName2:"TimeOut",desc:"超时时间:单位（秒）",editor:"text",isBase:!0},{name:"开始执行",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onStart",desc1:"事件",desc:"开始执行",type:"dialog",config:{title:"开始执行",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"执行结束",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onComplete",desc1:"事件",desc:"执行结束",type:"dialog",config:{title:"执行结束",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"异常",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onError",desc1:"事件",desc:"异常",type:"dialog",config:{title:"异常",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"超时",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onTimeout",desc1:"事件",desc:"超时",type:"dialog",config:{title:"超时",width:"1000px",height:"600px",content:"EventSetting",language:"java"}}]}},l=function(){return{rows:[{name:"标识",value:"",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"ID",desc:"节点的唯一标识"},{name:"名称",value:"",group:"节点基本信息",editor:"text",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Name",desc:"节点的名称",isBase:!0,required:!0},{name:"任务类型",value:"消息任务",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Type",desc:"任务类型"},{name:"处理模式",value:0,group:"入线信息",editor:{type:"combobox",options:{data:[{value:0,text:"单人办理"}]}},nodeLevel:2,nodeName1:"InLine",nodeName2:"Type",desc1:"入线信息",desc:"处理模式:0：单人办理"},{name:"人数",value:"1",group:"入线信息",editor:"text",nodeLevel:2,nodeName1:"InLine",nodeName2:"RushInfo",desc:"抢办人数",hide:!0,unit:"（人）"},{name:"处理范围",value:{Type:51,IsUser:1,Rule:[{RobotID:"105_robot",RobotName:"消息任务代理机器人",IsDeep:1,IsUser:1,IsSelected:1,RoleID:"",RoleName:"",Type:51,DeptID:"",DeptName:""}]},group:"入线信息",class:"RangeRule",nodeLevel:2,nodeName1:"InLine",nodeName2:"RangeRule",desc:"处理范围",type:"dialog",config:{content:"RangeRule",width:"1100px",height:"552px"},isBase:!0,hide:!0},{name:"展开层级",value:0,group:"入线信息",editor:{type:"combobox",options:{data:[{value:0,text:"不展开"}]}},nodeLevel:2,nodeName1:"InLine",nodeName2:"ExpandLevel",desc1:"入线信息",desc:"展开层级: 不展开"},{name:"继承节点经办人",value:0,group:"入线信息",editor:{type:"combobox",options:{data:[{value:0,text:"不继承"}]}},nodeLevel:2,nodeName1:"InLine",nodeName2:"IsInherit",desc:"继承节点经办人：0，不继承"},{name:"出线信息类型",value:1,group:"出线信息",editor:{type:"radio",options:{data:[{value:1,text:"与分支"}]}},nodeLevel:2,nodeName1:"OutLine",nodeName2:"Type",desc1:"出线信息",desc:"出线信息类型：与分支"},{name:"是否可以批量发送",value:0,group:"出线信息",editor:{type:"combobox",options:{data:[{value:0,text:"不可以"}]}},nodeLevel:2,nodeName1:"OutLine",nodeName2:"IsEnableBatch",desc:"是否可以批量发送：不可以"},{name:"消息类型",value:[],group:"消息发送参数",editor:{type:"checkbox",options:{data:[{value:1,text:"短信"},{value:2,text:"邮件"},{value:3,text:"系统消息"},{value:4,text:"钉消息"}]}},nodeLevel:2,nodeName1:"Params",nodeName2:"Type",desc:"请求方式,1：短信，2：邮件，3：系统消息,4：钉消息",showRob:"Params"},{name:"发送范围",value:"",group:"消息发送参数",editor:"text",nodeLevel:2,nodeName1:"Params",nodeName2:"SendRange",desc:"发送范围"},{name:"消息内容",value:"",group:"消息发送参数",nodeLevel:2,nodeName1:"Params",nodeName2:"Content",desc:"消息内容",type:"dialog",config:{width:"800px",height:"400px",content:"RichText"},isBase:!0},{name:"超时时间",value:"",group:"消息发送参数",nodeLevel:2,nodeName1:"Params",nodeName2:"TimeOut",desc:"超时时间: 单位（秒）",editor:"text",isBase:!0},{name:"开始执行",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onStart",desc1:"事件",desc:"开始执行",type:"dialog",config:{title:"开始执行",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"执行结束",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onComplete",desc1:"事件",desc:"执行结束",type:"dialog",config:{title:"执行结束",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"异常",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onError",desc1:"事件",desc:"异常",type:"dialog",config:{title:"异常",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"超时",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onTimeout",desc1:"事件",desc:"超时",type:"dialog",config:{title:"超时",width:"1000px",height:"600px",content:"EventSetting",language:"java"}}]}},c=function(){return{rows:[{name:"标识",value:"",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"ID",desc:"节点的唯一标识"},{name:"名称",value:"",group:"节点基本信息",editor:"text",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Name",desc:"节点的名称",isBase:!0,required:!0},{name:"任务类型",value:"开始事件",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Type",desc:"任务类型"},{name:"节点期限类型",value:0,group:"节点基本信息",editor:{type:"combobox",options:{data:_()}},nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"TimeLimit",nodeName3:"Type",desc1:"节点的办理期限",desc:"期限类型:0：无限制，1:自然日，2:工作日，13:(自然日)时，14:(自然日)分，23:(工作日)时，24:(工作日)分",isBase:!0,showRob:"Value"},{name:"办理期限值",value:"",group:"节点基本信息",editor:"numberbox",nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"TimeLimit",nodeName3:"Value",desc:"节点的办理期限:限制值",isBase:!0},{name:"处理模式",value:0,group:"入线信息",editor:{type:"combobox",options:{data:b()}},nodeLevel:2,nodeName1:"InLine",nodeName2:"Type",desc1:"入线信息",desc:"处理模式:0：单人办理，1:会签（多人同时处理），2:多人依次处理，3:抄送（需提交），4:抄送（不需提交），5:抢办（按人数），6:抢办（按比例）",isBase:!0,showRob:"RushInfo"},{name:"人数",value:"1",group:"入线信息",editor:"text",nodeLevel:2,nodeName1:"InLine",nodeName2:"RushInfo",desc:"抢办人数",isBase:!0,hide:!0,unit:"（人）",max:999999},{name:"处理范围",value:"",group:"入线信息",nodeLevel:2,nodeName1:"InLine",nodeName2:"RangeRule",desc:"处理范围",type:"dialog",config:{content:"RangeRule",width:"1100px",height:"552px"},isBase:!0},{name:"展开层级",value:0,group:"入线信息",editor:{type:"combobox",options:{data:x()}},nodeLevel:2,nodeName1:"InLine",nodeName2:"ExpandLevel",desc1:"入线信息",desc:"展开层级:-1： 全部展开， 0：不展开，1:一级，2:两级，3:三级"},{name:"继承节点经办人",value:1,group:"入线信息",editor:{type:"radio",options:{data:N()}},nodeLevel:2,nodeName1:"InLine",nodeName2:"IsInherit",desc1:"入线信息",desc:"继承节点经办人: 0：不继承，1：继承"},{name:"出线信息类型",value:0,group:"出线信息",editor:{type:"radio",options:{data:k()}},nodeLevel:2,nodeName1:"OutLine",nodeName2:"Type",desc1:"出线信息",desc:"出线信息类型：0，或分支，1，与分支"},{name:"是否必填意见",value:0,group:"出线信息",editor:{type:"radio",options:{data:[{value:0,text:"否"},{value:1,text:"是"}]}},nodeLevel:2,nodeName1:"OutLine",nodeName2:"IsEnableBatch",desc:"是否必填意见,  0：否，1：是"},{name:"退回控制",value:0,group:"出线信息",editor:{type:"combobox",options:{data:[{value:0,text:"退回到上一节点"},{value:1,text:"按路径退回"},{value:2,text:"按环节退回"}]}},nodeLevel:2,nodeName1:"OutLine",nodeName2:"SendBackType",desc:"退回控制，0：退回到上一节点，1：按路径退回, 2: 按环节退回"},{name:"发送后",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onAfterSend",desc1:"事件",desc:"发送后",type:"dialog",config:{title:"发送后",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"退回",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onSendBack",desc1:"事件",desc:"办结流程",type:"dialog",config:{title:"办结流程",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"强制办结",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onForceClose",desc1:"事件",desc:"强制办结",type:"dialog",config:{title:"强制办结",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"回收",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onRecovery",desc1:"事件",desc:"回收",type:"dialog",config:{title:"回收",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"强制回收",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onForceRecovery",desc1:"事件",desc:"强制回收",type:"dialog",config:{title:"强制回收",width:"1000px",height:"600px",content:"EventSetting"}},{name:"增发",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onExSend",desc1:"事件",desc:"增发",type:"dialog",config:{title:"增发",width:"1000px",height:"600px",content:"EventSetting"}}]}},u=function(){return{rows:[{name:"标识",value:"",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"ID",desc:"节点的唯一标识"},{name:"名称",value:"",group:"节点基本信息",editor:"text",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Name",desc:"节点的名称",isBase:!0,required:!0},{name:"任务类型",value:"结束事件",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Type",desc:"任务类型"},{name:"发送后",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onAfterSend",desc1:"事件",desc:"发送后",type:"dialog",config:{title:"发送后",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"强制办结",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onForceClose",desc1:"事件",desc:"强制办结",type:"dialog",config:{title:"强制办结",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"回收",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onRecovery",desc1:"事件",desc:"回收",type:"dialog",config:{title:"回收",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"强制回收",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onForceRecovery",desc1:"事件",desc:"强制回收",type:"dialog",config:{title:"强制回收",width:"1000px",height:"600px",content:"EventSetting"}}]}},d=function(e){return{rows:[{name:"标识",value:"",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"ID",desc:"节点的唯一标识"},{name:"名称",value:"",group:"节点基本信息",editor:"text",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Name",desc:"节点的名称",isBase:!0,required:!0},{name:"任务类型",value:e.Type||"脚本任务",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Type",desc:"任务类型"},{name:"处理模式",value:0,group:"入线信息",editor:{type:"combobox",options:{data:[{value:0,text:"单人办理"}]}},nodeLevel:2,nodeName1:"InLine",nodeName2:"Type",desc1:"入线信息",desc:"处理模式:0：单人办理"},{name:"人数",value:"1",group:"入线信息",editor:"text",nodeLevel:2,nodeName1:"InLine",nodeName2:"RushInfo",desc:"抢办人数",hide:!0,unit:"（人）"},{name:"处理范围",value:{Type:51,IsUser:1,Rule:[{RobotID:e.type+"_robot",RobotName:e.name+"代理机器人",IsDeep:1,IsUser:1,IsSelected:1,RoleID:"",RoleName:"",Type:51,DeptID:"",DeptName:""}]},group:"入线信息",class:"RangeRule",nodeLevel:2,nodeName1:"InLine",nodeName2:"RangeRule",desc:"处理范围",type:"dialog",config:{content:"RangeRule",width:"1100px",height:"552px"},isBase:!0,hide:!0},{name:"展开层级",value:0,group:"入线信息",editor:{type:"combobox",options:{data:[{value:0,text:"不展开"}]}},nodeLevel:2,nodeName1:"InLine",nodeName2:"ExpandLevel",desc1:"入线信息",desc:"展开层级: 不展开"},{name:"继承节点经办人",value:0,group:"入线信息",editor:{type:"combobox",options:{data:[{value:0,text:"不继承"}]}},nodeLevel:2,nodeName1:"InLine",nodeName2:"IsInherit",desc:"继承节点经办人：0，不继承"},{name:"出线信息类型",value:1,group:"出线信息",editor:{type:"radio",options:{data:[{value:1,text:"与分支"}]}},nodeLevel:2,nodeName1:"OutLine",nodeName2:"Type",desc1:"出线信息",desc:"出线信息类型：与分支"},{name:"是否可以批量发送",value:0,group:"出线信息",editor:{type:"combobox",options:{data:[{value:0,text:"不可以"}]}},nodeLevel:2,nodeName1:"OutLine",nodeName2:"IsEnableBatch",desc:"是否可以批量发送：不可以"},{name:"退回控制",value:0,group:"出线信息",nodeLevel:2,nodeName1:"OutLine",nodeName2:"SendBackType",desc:"退回控制：退回到上一节点",editor:{type:"combobox",options:{data:[{value:0,text:"退回到上一节点"}]}}},{name:"数据库",value:0,group:"脚本信息",editor:{type:"combobox",options:{data:[{value:0,text:"当前数据库"},{value:1,text:"其他注册数据库"}]}},nodeLevel:2,nodeName1:"Expression",nodeName2:"Server",desc1:"数据库",desc:"数据库:0：当前数据库，1:其他注册数据库",hide:"SQL"!==e.language},{name:e.name||"脚本代码",value:"",group:"脚本信息",nodeLevel:2,nodeName1:"Expression",nodeName2:"Content",desc1:"事件",desc:"发送后",type:"dialog",config:{title:e.name||"脚本代码",width:"1000px",height:"600px",content:"EventSetting",language:e.language||"java"},isBase:!0},{name:"超时时间",value:"",group:"脚本信息",editor:"numberbox",nodeLevel:2,nodeName1:"Expression",nodeName2:"TimeOut",desc:"超时时间,单位（s）",isBase:!0},{name:"开始执行",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onStart",desc1:"事件",desc:"开始执行",type:"dialog",config:{title:"开始执行",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"执行结束",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onComplete",desc1:"事件",desc:"执行结束",type:"dialog",config:{title:"执行结束",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"异常",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onError",desc1:"事件",desc:"异常",type:"dialog",config:{title:"异常",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"超时",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onTimeout",desc1:"事件",desc:"超时",type:"dialog",config:{title:"超时",width:"1000px",height:"600px",content:"EventSetting",language:"java"}}]}},h=function(){return{rows:[{name:"标识",value:"",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"ID",desc:"节点的唯一标识"},{name:"名称",value:"",group:"节点基本信息",editor:"text",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Name",desc:"节点的名称",isBase:!0,required:!0},{name:"任务类型",value:"跳转网关",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Type",desc:"任务类型"},{name:"出线信息类型",value:0,group:"出线信息",editor:{type:"radio",options:{data:k()}},nodeLevel:2,nodeName1:"OutLine",nodeName2:"Type",desc1:"出线信息",desc:"出线信息类型：0，或分支，1，与分支"}]}},p=function(){return{rows:[{name:"标识",value:"",group:"连线基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"ID",desc:"节点的唯一标识"},{name:"名称",value:"",group:"连线基本信息",editor:"text",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Name",desc:"节点的名称",isBase:!0,required:!0},{name:"连线类型",value:0,group:"连线基本信息",editor:{type:"combobox",options:{data:O()}},nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Type",desc:"连线类型,0:一般线，1：汇总线，2：退回线",showRob:"GatherRule",isBase:!0},{name:"汇总信息",value:"",group:"连线基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"GatherRule",desc:"汇总，当连线类型为汇总线时有效",type:"dialog",config:{width:"300px",height:"260px",content:"Summary"},isBase:!0,hide:!0},{name:"是否启用",value:0,group:"发送参数",editor:{type:"radio",options:{data:D()}},nodeLevel:2,nodeName1:"SendParameter",nodeName2:"IsEnabled",desc1:"发送参数，是否启用发线信息",desc:"是否启用，0：否，1：是"},{name:"处理模式",value:0,group:"发送参数",editor:{type:"combobox",options:{data:b()}},nodeLevel:2,nodeName1:"SendParameter",nodeName2:"Type",desc1:"发送参数",desc:"处理模式:0：单人办理，1:会签（多人同时处理），2:多人依次处理，3:抄送（需提交），4:抄送（不需提交），5:抢办（按人数），6:抢办（按比例）",showRob:"RushInfo"},{name:"人数",value:"1",group:"发送参数",editor:"text",nodeLevel:2,nodeName1:"SendParameter",nodeName2:"RushInfo",desc:"抢办人数",hide:!0,unit:"（人）",max:999999},{name:"处理范围",value:"",group:"发送参数",nodeLevel:2,nodeName1:"SendParameter",nodeName2:"RangeRule",desc:"处理范围",type:"dialog",config:{content:"RangeRule",width:"1100px",height:"552px"}},{name:"展开层级",value:0,group:"发送参数",editor:{type:"combobox",options:{data:x()}},nodeLevel:2,nodeName1:"InLine",nodeName2:"ExpandLevel",desc1:"入线信息",desc:"展开层级:-1： 全部展开， 0：不展开，1:一级，2:两级，3:三级"},{name:"继承节点经办人",value:1,group:"发送参数",editor:{type:"radio",options:{data:N()}},nodeLevel:2,nodeName1:"SendParameter",nodeName2:"IsInherit",desc1:"发送参数",desc:"继承节点经办人: 0：不继承，1：继承"},{name:"发送后",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onAfterSend",desc1:"事件",desc:"发送后",type:"dialog",config:{title:"发送后",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"增发",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onExSend",desc1:"事件",desc:"增发",type:"dialog",config:{title:"增发",width:"1000px",height:"600px",content:"EventSetting"}}]}},f=function(){return{rows:[{name:"标识",value:"",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"ID",desc:"节点的唯一标识"},{name:"名称",value:"",group:"节点基本信息",editor:"text",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Name",desc:"节点的名称",isBase:!0},{name:"任务类型",value:"条件网关",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Type",desc:"任务类型"},{name:"发送条件",value:"",group:"判断规则",nodeLevel:2,nodeName1:"OutLine",nodeName2:"SendConditions",desc:"发送条件，判断哪些发送路线有效",type:"dialog",isDefault:!0,isBase:!0,config:{content:"SendCondition",width:"800px",height:"564px"}}]}},m=function(){return{rows:[{name:"标识",value:"",hide:!0,group:"基本信息",nodeLevel:1,nodeName:"ID",desc:"标示"},{name:"名称",value:"",group:"基本信息",editor:"text",nodeLevel:1,nodeName:"Name",desc:"名称"},{name:"描述",value:"",group:"基本信息",editor:"text",nodeLevel:1,nodeName:"Desc",desc:"描述"}]}},g=function(){return{rows:[{name:"标识",value:"",hide:!0,group:"基本信息",nodeLevel:1,nodeName:"ID",desc:"标示"},{name:"名称",value:"",group:"基本信息",editor:"text",nodeLevel:1,nodeName:"Name",desc:"名称"},{name:"描述",value:"",group:"基本信息",editor:"text",nodeLevel:1,nodeName:"Desc",desc:"描述"}]}};function _(){return[{value:0,text:"无限制"},{value:1,text:"自然日"},{value:2,text:"工作日"},{value:13,text:"(自然日)时"},{value:14,text:"(自然日)分"},{value:23,text:"(工作日)时"},{value:24,text:"(工作日)分"}]}function b(e){var t=[{value:0,text:"单人办理"},{value:1,text:"会签（多人同时处理）"},{value:2,text:"多人依次处理"},{value:3,text:"抄送（需提交）"},{value:4,text:"抄送（不需提交）"},{value:5,text:"抢办（按人数）"},{value:6,text:"抢办（按比例）"}];return void 0!==e?v(t,e):t}function v(t,n){if(n+""&&e.isNumeric(n))for(var a=0;a<t.length;a++)if(n==t[a].value)return t[a].text||t[a].label}function y(e){var t=[{label:"人工选择",value:0},{label:"默认选中",value:1},{label:"必选",value:2}];return void 0!==e?v(t,e):t}function x(e){var t=[{value:-1,text:"全部展开"},{value:0,text:"不展开"},{value:1,text:"一级"},{value:2,text:"两级"},{value:3,text:"三级"}];return void 0!==e?v(t,e):t}function w(t){var n=[{value:0,text:"开始节点"},{value:1,text:"一般节点"},{value:2,text:"结束节点"},{value:3,text:"跳转节点"},{value:4,text:"子流程"},{value:5,text:"自动流"},{value:6,text:"判断节点"}];if(t+""&&e.isNumeric(t))for(var a=0;a<n.length;a++)if(t==n[a].value)return n[a].text;return n}function k(t){var n=[{value:0,text:"或分支"},{value:1,text:"与分支"}];if(t+""&&e.isNumeric(t))for(var a=0;a<n.length;a++)if(t==n[a].value)return n[a].text;return n}function S(t){var n=[{value:0,text:"不可以"},{value:1,text:"可以"}];if(t+""&&e.isNumeric(t))for(var a=0;a<n.length;a++)if(t==n[a].value)return n[a].text;return n}function D(e){var t=[{value:0,text:"否"},{value:1,text:"是"}];return t}function C(t){var n=[{value:0,text:"不自动发送"},{value:1,text:"自动发送"}];if(t+""&&e.isNumeric(t))for(var a=0;a<n.length;a++)if(t==n[a].value)return n[a].text;return n}function N(e){var t=[{value:0,text:"不继承"},{value:1,text:"继承"}];return t}function T(t){var n=[{value:0,text:"不允许"},{value:1,text:"允许"}];if(t+""&&e.isNumeric(t))for(var a=0;a<n.length;a++)if(t==n[a].value)return n[a].text;return n}function L(t){var n=[{value:0,text:"并行"},{value:1,text:"串行"},{value:2,text:"两者皆可，默认并行"},{value:3,text:"两者皆可，默认串行"}];if(t+""&&e.isNumeric(t))for(var a=0;a<n.length;a++)if(t==n[a].value)return n[a].text;return n}function O(t){var n=[{value:0,text:"一般线"},{value:1,text:"汇总线"},{value:2,text:"退回线"}];if(t+""&&e.isNumeric(t))for(var a=0;a<n.length;a++)if(t==n[a].value)return n[a].text;return n}function I(t){var n=[{value:0,text:"不启用"},{value:1,text:"启用"}];if(t+""&&e.isNumeric(t))for(var a=0;a<n.length;a++)if(t==n[a].value)return n[a].text;return n}function $(t){var n=[{value:0,text:"退回到上一节点"},{value:1,text:"按路径退回"},{value:2,text:"按环节退回"}];if(t+""&&e.isNumeric(t))for(var a=0;a<n.length;a++)if(t==n[a].value)return n[a].text;return n}var E=[{name:"开始事件",sort:"event",type:201,img:n("b835")},{name:"用户任务",sort:"task",type:101,img:n("0d65")},{name:"条件网关",sort:"gateway",type:301,img:n("fd46")},{name:"跳转网关",sort:"gateway",type:302,img:n("59e4")},{name:"子流程任务",sort:"task",type:102,img:n("2a95")},{name:"脚本任务",sort:"task",type:103,img:n("742a")},{name:"结束事件",sort:"event",type:299,img:n("49b0")}],j=[{name:"用户任务",sort:"task",type:101,img:n("0d65")},{name:"子流程任务",sort:"task",type:102,img:n("2a95")},{name:"脚本任务",sort:"task",type:103,img:n("742a")},{name:"web服务任务",sort:"task",type:104,img:n("23bd")},{name:"消息任务",sort:"task",type:105,img:n("08bb")},{name:"python任务",sort:"task",type:106,img:n("412d")},{name:"shell任务",sort:"task",type:107,img:n("4ca1")},{name:"SQL任务",sort:"task",type:108,img:n("6a01")}],R=[{name:"开始事件",sort:"event",type:201,img:n("b835")},{name:"结束事件",sort:"event",type:299,img:n("a050")}],M=[{name:"条件网关",sort:"gateway",type:301,img:n("fd46")},{name:"跳转网关",sort:"gateway",type:302,img:n("59e4")}],P=[{name:"终止事件",sort:"boundaryEvent",type:401,url:n("2340")},{name:"超时事件",sort:"boundaryEvent",type:402,url:n("2a04")},{name:"异常事件",sort:"boundaryEvent",type:403,url:n("3048")}],B=[{title:"基础",data:E},{title:"任务",data:j},{title:"事件",data:R},{title:"网关",data:M}]}).call(this,n("1157"))},"3ba1":function(e,t,n){"use strict";(function(e){var a=n("5530"),i=n("2f62"),o=n("eb27");t["a"]={name:"Canvas",components:{region:o["a"]},data:function(){return{regionVisible:!1,regionRect:{}}},computed:Object(a["a"])(Object(a["a"])({},Object(i["b"])("seatDesign",{compelPanelSize:"compelPanelSize",panelSize:"panelSize",canvasCss:function(e){var t=e.compelPanelSize,n=t.width,a=t.height,i=n?"".concat(n,"px"):"100%",o=a?"".concat(a,"px"):"100%";return{width:i,height:o}},panelParentSize:function(t){var n=t.compelPanelSize,a=n.width,i=n.height;return console.log(a),console.log(i),a=a||e(".seat-designer-page").width(),i=i||e(".seat-designer-page").height(),{width:a,height:i}}})),{},{panelSty:function(){return{width:this.panelSize.width?this.panelSize.width+"px":"100%",height:this.panelSize.height?this.panelSize.height+"px":"100%",left:this.panelSize.left+"px",top:this.panelSize.top+"px"}}}),watch:{compelPanelSize:{handler:function(e){var t=e.width,n=e.height,a={width:t,height:n,scale:1,left:0,top:0};this.$store.commit("seatDesign/changePanelSize",a)},deep:!0}},mounted:function(){var t=this;e(".seat-designer-page")[0].addEventListener("mousewheel",t.handleScroll)},methods:{handleScroll:function(t){if(t.ctrlKey){var n=this,a=t.wheelDelta<0?"down":"up",i=dsf.math.convertLocalCoordinate("#panel_outer",{x:t.pageX,y:t.pageY}),o=n.panelParentSize,s=o.width,r=o.height,l=s*n.panelSize.scale,c=r*n.panelSize.scale,u=i.x/l,d=i.y/c,h=n.panelSize.scale;if("up"===a?h+=.1:"down"===a&&(h-=.1),h>=.1){var p=e("#panel_outer"),f=s*h,m=r*h,g=p.position().left+i.x-f*u,_=p.position().top+i.y-m*d,b={scale:Math.round(10*h)/10,width:Math.floor(f),height:Math.floor(m),left:Math.floor(g),top:Math.floor(_)};n.$store.commit("seatDesign/changePanelSize",b)}t.preventDefault(),t.stopPropagation()}},preRegion:function(t){var n=this;n.$store.commit("seatDesign/changeActiveId","");var a=dsf.math.convertLocalCoordinate(".seat-designer-page",{x:t.pageX,y:t.pageY});function i(e){n.regionVisible=!0;var t=dsf.math.convertLocalCoordinate(".seat-designer-page",{x:e.pageX,y:e.pageY});n.$set(n.regionRect,"left",a.x>t.x?t.x:a.x),n.$set(n.regionRect,"top",a.y>t.y?t.y:a.y),n.$set(n.regionRect,"width",Math.abs(t.x-a.x)),n.$set(n.regionRect,"height",Math.abs(t.y-a.y))}function o(){e(document).off("mousemove.region"),n.$store.commit("seatDesign/changeRegionPosition",n.regionRect),n.regionVisible=!1,n.regionRect={}}e(document).off("mousemove.region"),e(document).on("mousemove.region",(function(e){i(e)})),e(document).one("mouseup.region",(function(){o()}))}}}}).call(this,n("1157"))},"3cf4":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"seat-item-container",class:e.switchNumSet?"set-num":"normal"},[e.verLine.visible?n("div",{staticClass:"vertical-line",style:e.verLineSty}):e._e(),e.horLine.visible?n("div",{staticClass:"horizontal-line",style:e.horLineSty}):e._e(),e.selectPosition.visible?n("div",{staticClass:"selected-box",style:e.selectSty,on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.selectMove(t)}}},[n("div",{staticClass:"select"},[e.switchNumSet?e._e():n("div",{staticClass:"anchor circle",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.selectRotate(t)}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor line"}),e.switchNumSet?e._e():n("div",{staticClass:"anchor lt",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.selectScale(t,"lt")}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor t",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.selectScale(t,"t")}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor rt",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.selectScale(t,"rt")}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor l",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.selectScale(t,"l")}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor r",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.selectScale(t,"r")}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor lb",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.selectScale(t,"lb")}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor b",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.selectScale(t,"b")}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor rb",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.selectScale(t,"rb")}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor info"},[e._v(" 宽:"+e._s(e.selectPosition.width)+";高:"+e._s(e.selectPosition.height)+";角度:"+e._s(e.selectPosition.angle)+" ")])])]):e._e(),e._l(e.mitems,(function(t,a){return n("div",{key:t.id,staticClass:"seat-box",class:{active:e.activeId===t.id,hideText:2===t.showText},style:e.getItemSty(t),on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preMove(n,t)},contextmenu:function(n){return e.popMenu(n,t)}}},[n("div",{staticClass:"seat",on:{dblclick:function(n){return n.stopPropagation(),e.openEdit(n,t)}}},[e.switchNumSet?e._e():n("div",{staticClass:"anchor circle",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preRotate(n,t)}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor line"}),e.switchNumSet?e._e():n("div",{staticClass:"anchor lt",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"lt")}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor t",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"t")}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor rt",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"rt")}}}),e.switchNumSet?n("p",{staticClass:"num",on:{dblclick:function(n){return n.stopPropagation(),e.openSetNum(n,t)}}},[e._v(e._s(t.seatNum))]):n("p",[e._v(e._s(t.seatTxt))]),e.switchNumSet?e._e():n("div",{staticClass:"anchor l",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"l")}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor r",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"r")}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor lb",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"lb")}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor b",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"b")}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor rb",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"rb")}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor info"},[e._v("宽:"+e._s(t.width)+";高:"+e._s(t.height)+";角度:"+e._s(t.angle))])])])})),e._l(e.groups,(function(t,a){return n("div",{key:t.id,staticClass:"group-box",class:{active:e.activeId===t.id,hideText:2===t.showText},style:e.getItemSty(t),on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preMove(n,t)},contextmenu:function(n){return e.popMenu(n,t)}}},[n("div",{staticClass:"group"},[e.switchNumSet?e._e():n("div",{staticClass:"anchor circle",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preRotate(n,t)}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor line"}),e.switchNumSet?e._e():n("div",{staticClass:"anchor lt",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"lt")}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor t",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"t")}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor rt",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"rt")}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor l",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"l")}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor r",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"r")}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor lb",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"lb")}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor b",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"b")}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor rb",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"rb")}}}),e.switchNumSet?e._e():n("div",{staticClass:"anchor info"},[e._v("宽:"+e._s(t.width)+";高:"+e._s(t.height)+";角度:"+e._s(t.angle)+" ")]),e._l(t.member,(function(a,i){return n("div",{key:a.id,staticClass:"member",style:e.getMemberSty(a,t),on:{click:function(t){return t.stopPropagation(),e.setOrderNum(a)},dblclick:function(t){return t.stopPropagation(),e.openEdit(t,a)}}},[e.switchNumSet?n("p",{staticClass:"num",on:{dblclick:function(t){return t.stopPropagation(),e.openSetNum(t,a)}}},[e._v(e._s(a.seatNum))]):n("p",[e._v(e._s(a.seatTxt))])])}))],2)])}))],2)},i=[],o=n("3f33"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["a"]=l.exports},"3d15":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-tool-item ellipsis",attrs:{title:e.title,name:e.data.name}},[e._v(" "+e._s(e.data.name||e.data.id)+" ")])},i=[],o=(n("a15b"),n("b0c0"),{name:"DsfMetaDataItem",props:{data:{type:Object,default:function(){return null}}},computed:{title:function(){var e=this.data,t=e.data,n=e.id,a=e.name;return["ID：",n,"\n","标识：",t.code,"\n","名称：",a].join("")}}}),s=o,r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["a"]=l.exports},"3f33":function(e,t,n){"use strict";(function(e,a){n("99af"),n("4de4"),n("7db0"),n("c740"),n("4160"),n("caad"),n("c975"),n("d81d"),n("4e82"),n("e25e"),n("ac1f"),n("2532"),n("5319"),n("159b");var i=n("b85c"),o=n("5530"),s=n("2f62"),r=n("5032"),l=n("76af"),c=n("d0f8");n("8e2b");function u(){var t=[];e.concat(this.items,this.groups).forEach((function(e){"group"!==e.type?e.seatNum&&t.push(e.seatNum):e.member.forEach((function(e){e.seatNum&&t.push(e.seatNum)}))}));var n=t.sort((function(e,t){return e-t}));this.maxOrderNum=e.last(n)||null}function d(e){this.activeId!==e.id&&(D.call(this),this.selectedItems=[e],this.$store.commit("seatDesign/changeActiveId",e.id))}function h(e){var t=p(e),n=y(t),i=this.panelSize,o=(i.left,i.top,i.scale),s=this.regionPosition,r=s.left,l=s.top,c=s.width,u=s.height,d=a(".seat-designer-page").offset(),h={x:r+d.left,y:l+d.top},f={x:r+d.left+c,y:l+d.top+u};h=dsf.math.convertLocalCoordinate("#panel_outer",h,o),f=dsf.math.convertLocalCoordinate("#panel_outer",f,o);var m=n.min_x>=h.x,g=n.max_x<=f.x,_=n.min_y>=h.y,b=n.max_y<=f.y;return m&&g&&_&&b}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["lt","rt","rb","lb"],n=e.angle,a=e.left,i=e.top,o=e.left+e.width,s=e.top+e.height,r={lt:0,lb:0,rt:0,rb:0},l=.5*(o-a)+a,c=.5*(s-i)+i;return t.includes("lt")&&(r.lt=dsf.math.getRotatedPiont(a,i,l,c,n)),t.includes("rt")&&(r.rt=dsf.math.getRotatedPiont(o,i,l,c,n)),t.includes("rb")&&(r.rb=dsf.math.getRotatedPiont(o,s,l,c,n)),t.includes("lb")&&(r.lb=dsf.math.getRotatedPiont(a,s,l,c,n)),r}function f(e,t){var n={};t.length>1?(t.indexOf("l")>=0?n.x=e.left+e.width:n.x=e.left,t.indexOf("t")>=0?n.y=e.top+e.height:n.y=e.top):"r"===t||"b"===t?(n.x=e.left,n.y=e.top):"l"!==t&&"t"!==t||(n.x=e.left+e.width,n.y=e.top+e.height);var a={x:e.left+e.width/2,y:e.top+e.height/2};return n=dsf.math.getRotatedPiont(n.x,n.y,a.x,a.y,e.angle),n}function m(e,t,n,a,i,o){var s,r,l=dsf.math.getDistance(e,a),c=dsf.math.getRadina(e,a,-dsf.math.a2r(t.angle)),u={x:Math.cos(c)*l+t.left,y:Math.sin(c)*l+t.top};if(i.indexOf("r")>=0?s=u.x-t.left:i.indexOf("l")>=0&&(s=t.left-u.x),i.indexOf("b")>=0?r=u.y-t.top:i.indexOf("t")>=0&&(r=t.top-u.y),i.length>1){var d=s/t.width;n.width=t.width*d,n.height=t.height*d}else dsf.isDef(s)?n.width=s:n.width=t.width,dsf.isDef(r)?n.height=r:n.height=t.height;n.width<o[0]&&(n.width=o[0]),n.height<o[1]&&(n.height=o[1]);var h={};i.length>1?(i.indexOf("r")>=0?h.x=e.x+n.width:i.indexOf("l")>=0?h.x=e.x-n.width:h.x=e.x,i.indexOf("b")>=0?h.y=e.y+n.height:i.indexOf("t")>=0?h.y=e.y-n.height:h.y=e.y):"r"===i||"b"===i?(h.x=e.x+n.width,h.y=e.y+n.height):"l"!==i&&"t"!==i||(h.x=e.x-n.width,h.y=e.y-n.height);var p=dsf.math.getRotatedPiont(h.x,h.y,e.x,e.y,t.angle),f={x:.5*(e.x+p.x),y:.5*(e.y+p.y)},m=dsf.math.getRotatedPiont(e.x,e.y,f.x,f.y,-t.angle);return i.length>1?(i.indexOf("r")>=0?n.left=m.x:i.indexOf("l")>=0?n.left=m.x-n.width:n.left=m.x-n.width/2,i.indexOf("b")>=0?n.top=m.y:i.indexOf("t")>=0?n.top=m.y-n.height:n.top=m.y-n.height/2):"r"===i||"b"===i?(n.left=m.x,n.top=m.y):"l"!==i&&"t"!==i||(n.left=m.x-n.width,n.top=m.y-n.height),x(n),n}function g(e,t){var n=dsf.math.getRadina(e,t),a=90+dsf.math.r2a(n);return a=Math.ceil(a)%360,a}function _(t,n){var a={};return e.forEach(t,(function(t){var i=e.assign({},t);a[t.id]={left:(i.left-n.left)/n.width,top:(i.top-n.top)/n.height,width:i.width/n.width,height:i.height/n.height}})),a}function b(t,n,a,i,o){var s=e.assign({},t),r=o[s.id];if(s.left=a.left+a.width*r.left,s.top=a.top+a.height*r.top,2===i.length){var l=a.width/n.width,c=a.height/n.height;l=.5*(l+c),s.width=l*t.width,s.height=l*t.height}else 1===i.length&&(s.width=a.width*r.width,s.height=a.height*r.height);return w(s),s}function v(e){return{x:e.left+e.width/2,y:e.top+e.height/2}}function y(t){var n,a,i,o;return e.forIn(t,(function(e){n=n||e.x,a=a||e.x,i=i||e.y,o=o||e.y,n=n<=e.x?n:e.x,a=a>=e.x?a:e.x,i=i<=e.y?i:e.y,o=o>=e.y?o:e.y})),{min_x:n,min_y:i,max_x:a,max_y:o}}function x(e){e.top=parseInt(e.top),e.left=parseInt(e.left),e.width=parseInt(e.width),e.height=parseInt(e.height)}function w(e){e.top=Math.round(e.top),e.left=Math.round(e.left),e.width=Math.round(e.width),e.height=Math.round(e.height)}function k(t){var n,a,i,o,s;return e.forEach(t,(function(t){s=p(t),e.forIn(s,(function(e){n=n||e.x,a=a||e.x,i=i||e.y,o=o||e.y,n=n<=e.x?n:e.x,a=a>=e.x?a:e.x,i=i<=e.y?i:e.y,o=o>=e.y?o:e.y}))})),{left:S(n),top:S(i),width:S(a-n),height:S(o-i),angle:0,visible:!0}}function S(e){return e<0?Math.floor(e):Math.ceil(e)}function D(){this.selectPosition={top:0,left:0,width:0,height:0,angle:0,visible:!1}}function C(){var t=this,n=e.filter(e.concat(this.items,this.groups),(function(e){return e.id!==t.activeId}));return n.map((function(e){return p(e,["lt"])}))}function N(e,t,n){for(var a={},i=0,o=0;o<t.length;o++)if(e.left>=t[o].left-3&&e.left<=t[o].left+3&&(a.left=t[o].left,i+=1,0===n.angle&&(n.left=a.left)),e.top>=t[o].top-3&&e.top<=t[o].top+3&&(a.top=t[o].top,i+=1,0===n.angle&&(n.top=a.top)),2===i)break;return a.left||a.top?a:null}function T(t){var n=[],a={};return e.isArray(t)?(e.forEach(t,(function(e){a={left:Math.round(e.lt.x),top:Math.round(e.lt.y)},n.push(a)})),e.uniqWith(n,e.isEqual)):e.isObject(t)?{left:Math.round(t.lt.x),top:Math.round(t.lt.y)}:void 0}function L(e){var t=e.member[0];return[e.cols*t.width,e.rows*t.height]}function O(t){var n;if(/^sec_/.test(t.type))n=dsf.url.getAbsolutePath(t.bgImg);else{var a=e.isArray(t.stateList)&&t.stateList[0]&&t.stateList[0].img;if(!a)return"none";n=dsf.url.getAbsolutePath(t.stateList[0].img)}return"center / contain no-repeat url(".concat(n,")")}t["a"]={name:"SeatItem",props:{items:{type:Array,default:function(){return[]}},groups:{type:Array,default:function(){return[]}}},data:function(){return{selectedItems:[],rectMinSize:[40,40],selectPosition:{top:0,left:0,width:0,height:0,visible:!1},verLine:{left:0,visible:!1},horLine:{top:0,visible:!1},maxOrderNum:null}},computed:Object(o["a"])(Object(o["a"])({},Object(s["b"])("seatDesign",{panelSize:"panelSize",newSeatItem:"newSeatItem",newGroupItem:"newGroupItem",activeId:"activeId",regionPosition:"regionPosition",seatInfo:"seatInfo",switchNumSet:"switchNumSet"})),{},{mitems:function(){var e=this;return this.items.filter((function(t){return!(e.switchNumSet&&/^sec_/.test(t.type))}))},selectSty:function(){var e=this.panelSize.scale;return{width:this.selectPosition.width*e+"px",height:this.selectPosition.height*e+"px",left:this.selectPosition.left*e+"px",top:this.selectPosition.top*e+"px",transform:"rotate(".concat(this.selectPosition.angle,"deg)")}},verLineSty:function(){return{left:"".concat(this.verLine.left*this.panelSize.scale)+"px"}},horLineSty:function(){return{top:"".concat(this.horLine.top*this.panelSize.scale)+"px"}}}),watch:{newSeatItem:function(t){c["c"].call(this);var n=e.assign({},t);this.items.push(n)},newGroupItem:function(t){c["c"].call(this);var n=e.assign({},t);this.groups.push(n)},regionPosition:function(t){var n=this;if(e.isEmpty(t)||0===t.width||0===t.height)return c["c"].call(n),n.selectedItems=[],void D.call(n);var a=e.concat(n.items,n.groups);n.selectedItems=e.filter(a,(function(e){return h.call(n,e)})),c["c"].call(n),0!==n.selectedItems.length&&(1===n.selectedItems.length?n.$store.commit("seatDesign/changeActiveId",n.selectedItems[0].id):n.selectedItems.length>1&&(n.selectPosition=k(n.selectedItems)))},seatInfo:{handler:function(t,n){if(c["c"].call(this),"group"===t.type){var a=e.findIndex(this.groups,(function(e){return e.id===t.id}));this.$set(this.groups,a,t)}else{var i=e.findIndex(this.items,(function(e){return e.id===t.id}));this.$set(this.items,i,t)}},deep:!1},"panelSize.scale":function(){this.items.forEach((function(e){e.isFrozenSty=!1})),this.groups.forEach((function(e){e.isFrozenSty=!1,e.isFrozenMemberSty=!1}))},selectedItems:function(e){e&&e.length>0?this.$store.commit("seatDesign/changeHaveSelectedItems",!0):this.$store.commit("seatDesign/changeHaveSelectedItems",!1)},switchNumSet:function(e){c["h"].call(this),e&&u.call(this)}},beforeDestroy:function(){a(document).off("mouseup.scaleSeatItem"),a(document).off("mousemove.scaleSeatItem")},mounted:function(){var t=this;r["a"].on(l["a"].KEY_CTRL_D,(function(){D.call(t),t.selectedItems=[],t.$store.commit("seatDesign/changeActiveId","")})),r["a"].on(l["a"].KEY_DELETE,(function(){t.deleteActiveSeatItem()})),r["a"].on(l["a"].GET_ACTIVE_SEAT,(function(n){var a=e.concat(t.items,t.groups),i=a.find((function(e){return e.id===t.activeId}));n&&n(i)})),r["a"].on(l["a"].CLEAN_ALL_SEAT_NUM,(function(){t.items.forEach((function(e){e.seatNum==e.seatTxt&&(e.seatTxt=null),e.seatNum=null})),t.groups.forEach((function(e){e.member.forEach((function(e){e.seatNum==e.seatTxt&&(e.seatTxt=null),e.seatNum=null}))})),t.maxOrderNum=null})),r["a"].on(l["a"].CLEAN_SELECT_SEAT_NUM,(function(){t.selectedItems.forEach((function(e){"group"!==e.type?(e.seatNum==e.seatTxt&&(e.seatTxt=null),e.seatNum=null):e.member.forEach((function(e){e.seatNum==e.seatTxt&&(e.seatTxt=null),e.seatNum=null}))})),u.call(t),t.clearSelectedItems()})),r["a"].on(l["a"].AFTER_QUICK_ORDER,(function(){u.call(t),t.clearSelectedItems()})),r["a"].on(l["a"].SAVE_LAYOUT,(function(){var e,n={},a=Object(i["a"])(t.items);try{for(a.s();!(e=a.n()).done;){var o=e.value;if(!/^sec/.test(o.type)){if(!o.seatNum)return void dsf.layer.message("座位序号不能为空",!1);if(n[o.seatNum])return void dsf.layer.message("座位序号必须是唯一的，不能相同",!1);n[o.seatNum]=o.id}}}catch(err){a.e(err)}finally{a.f()}var s,r=Object(i["a"])(t.groups);try{for(r.s();!(s=r.n()).done;){var l,c=s.value,u=Object(i["a"])(c.member);try{for(u.s();!(l=u.n()).done;){var d=l.value;if(!d.seatNum)return void dsf.layer.message("座位序号不能为空",!1);if(n[d.seatNum])return void dsf.layer.message("座位序号必须是唯一的，不能相同",!1);n[d.seatNum]=d.seatNum}}catch(err){u.e(err)}finally{u.f()}}}catch(err){r.e(err)}finally{r.f()}t.$emit("save-layout")}))},methods:{getItemSty:function(e){if(e.isFrozenSty)return e.style;var t={width:e.width*this.panelSize.scale+"px",height:e.height*this.panelSize.scale+"px",left:e.left*this.panelSize.scale+"px",top:e.top*this.panelSize.scale+"px",transform:"rotate(".concat(e.angle,"deg)")};return this.switchNumSet||"group"===e.type||(t.background=O(e)),e.style=t,t},getMemberSty:function(e,t){if(t.isFrozenMemberSty)return e.style;console.log("redraw group member");var n={width:e.width*this.panelSize.scale+"px",height:e.height*this.panelSize.scale+"px",left:e.left*this.panelSize.scale+"px",top:e.top*this.panelSize.scale+"px"};return this.switchNumSet||(n.background=O(t)),e.style=n,n},clearSelectedItems:function(){this.selectedItems=[],D.call(this),this.$store.commit("seatDesign/changeActiveId","")},preScale:function(t,n,i){t.stopPropagation(),t.preventDefault();var o=this;c["c"].call(o,!1),"group"===n.type&&(n.isFrozenMemberSty=!1);var s=e.assign({},n),r=e.assign({},n),l=f(s,i);function u(t){if(i&&l){var a=dsf.math.convertLocalCoordinate("#panel_outer",{x:t.pageX,y:t.pageY},o.panelSize.scale),u=m(l,s,r,a,i,"group"!==n.type?o.rectMinSize:L(s));e.assign(n,u),"group"===n.type&&Object(c["i"])(u)}}function d(){if(a(document).off("mousemove.scaleSeatItem"),c["c"].call(o),"group"===n.type){var e=n.member[0];1===n.rows&&(n.height=e.height),1===n.cols&&(n.width=e.width)}}a(document).off("mousemove.scaleSeatItem"),a(document).on("mousemove.scaleSeatItem",e.debounce((function(e){e.preventDefault(),e.stopPropagation(),u(e)}),5)),a(document).one("mouseup.scaleSeatItem",(function(){d()}))},preMove:function(t,n){t.preventDefault(),t.stopPropagation();var i=this;if(this.switchNumSet)return c["c"].call(i),d.call(i,n),void this.setOrderNum(n);d.call(i,n),c["c"].call(i),i.verLine.visible=!1,i.horLine.visible=!1;var o=C.call(i),s=T(o),r=n.left,l=n.top,u=dsf.math.convertLocalCoordinate("#panel_outer",{x:t.pageX,y:t.pageY},i.panelSize.scale);function h(t){var a=dsf.math.convertLocalCoordinate("#panel_outer",{x:t.pageX,y:t.pageY},i.panelSize.scale),o={x:a.x-u.x,y:a.y-u.y};n.left=parseInt(r+o.x),n.top=parseInt(l+o.y),i.verLine.visible=!1,i.horLine.visible=!1;var c=p(n,["lt"]),d=T(c),h=N(d,s,n);h&&(i.horLine.top=h.top,i.horLine.visible=e.isNumber(h.top),i.verLine.left=h.left,i.verLine.visible=e.isNumber(h.left))}function f(){a(document).off("mousemove.moveSeatItem"),c["c"].call(i),i.verLine.visible=!1,i.horLine.visible=!1}a(document).off("mousemove.moveSeatItem"),a(document).on("mousemove.moveSeatItem",e.debounce((function(e){e.preventDefault(),e.stopPropagation(),h(e)}),5)),a(document).one("mouseup.moveSeatItem",(function(){f()}))},preRotate:function(t,n){t.stopPropagation(),t.preventDefault(),a(".ds-seat-design").addClass("is-rotating");var i=this;c["c"].call(i);var o=v(n);function s(e){var t=dsf.math.convertLocalCoordinate("#panel_outer",{x:e.pageX,y:e.pageY},i.panelSize.scale);n.angle=g(o,t)}function r(){a(document).off("mousemove.rotateSeatItem"),c["c"].call(i),a(".ds-seat-design").removeClass("is-rotating")}a(document).off("mousemove.rotateSeatItem"),a(document).on("mousemove.rotateSeatItem",e.debounce((function(e){e.preventDefault(),e.stopPropagation(),s(e)}),5)),a(document).one("mouseup.rotateSeatItem",(function(){r()}))},selectRotate:function(t){t.stopPropagation(),t.preventDefault(),a(".ds-seat-design").addClass("is-rotating");var n=this;c["c"].call(n);var i=e.assign({},n.selectPosition),o=v(i),s={},r=e.concat(n.items,n.groups);function l(e){var t=dsf.math.convertLocalCoordinate("#panel_outer",{x:e.pageX,y:e.pageY},n.panelSize.scale),a=g(o,t),r=a-i.angle;n.selectPosition.angle=a,n.selectedItems.forEach((function(e){var t=s[e.id],n=dsf.math.getRotatedPiont(t.left,t.top,o.x,o.y,a),i=n.x+t.width/2,l=n.y+t.height/2,c=dsf.math.getRotatedPiont(i,l,n.x,n.y,a);n=dsf.math.getRotatedPiont(n.x,n.y,c.x,c.y,-a),e.top=parseInt(n.y),e.left=parseInt(n.x),e.angle=(t.angle+r)%360,t.angle<0&&(e.angle=360+t.angle)}))}function u(){a(".ds-seat-design").removeClass("is-rotating"),n.selectPosition=k(n.selectedItems),a(document).off("mousemove.rotateSelect"),c["c"].call(n)}r.forEach((function(t){s[t.id]=e.assign({},t)})),a(document).off("mousemove.rotateSelect"),a(document).on("mousemove.rotateSelect",e.debounce((function(e){e.preventDefault(),e.stopPropagation(),l(e)}),5)),a(document).one("mouseup.rotateSelect",(function(){u()}))},selectScale:function(t,n){t.stopPropagation(),t.preventDefault();var i=this;c["c"].call(i,!1);var o=e.assign({},i.selectPosition),s=e.assign({},i.selectPosition),r={},l=e.concat(i.items,i.groups);l.forEach((function(t){r[t.id]=e.assign({},t)}));var u=f(o,n),d=_(i.selectedItems,i.selectPosition);function h(t){if(n&&u){var a=dsf.math.convertLocalCoordinate("#panel_outer",{x:t.pageX,y:t.pageY},i.panelSize.scale);i.selectPosition=m(u,o,s,a,n,i.rectMinSize),i.selectedItems.forEach((function(t){var a=b(r[t.id],o,i.selectPosition,n,d);"group"===a.type&&Object(c["i"])(a),e.assign(t,a)}))}}function p(){a(document).off("mousemove.scaleSelect"),c["c"].call(i),i.selectedItems.forEach((function(e){"group"===e.type&&(1===e.rows&&(e.height=r[e.id].height),1===e.cols&&(e.width=r[e.id].width))})),i.selectPosition=k(i.selectedItems)}a(document).off("mousemove.scaleSelect"),a(document).on("mousemove.scaleSelect",e.debounce((function(e){e.preventDefault(),e.stopPropagation(),h(e)}),5)),a(document).one("mouseup.scaleSelect",(function(){p()}))},selectMove:function(t){if(t.preventDefault(),t.stopPropagation(),!this.switchNumSet){var n=this;c["c"].call(n);var i=n.selectPosition.left,o=n.selectPosition.top,s={},r=e.concat(n.items,n.groups);r.forEach((function(t){s[t.id]=e.assign({},t)}));var l=dsf.math.convertLocalCoordinate("#panel_outer",{x:t.pageX,y:t.pageY},n.panelSize.scale);a(document).off("mousemove.moveSelect"),a(document).on("mousemove.moveSelect",e.debounce((function(e){e.preventDefault(),e.stopPropagation(),u(e)}),5)),a(document).one("mouseup.moveSelect",(function(){d()}))}function u(e){var t=dsf.math.convertLocalCoordinate("#panel_outer",{x:e.pageX,y:e.pageY},n.panelSize.scale),a={x:t.x-l.x,y:t.y-l.y},r=i+a.x,c=o+a.y;n.selectPosition.left=parseInt(r),n.selectPosition.top=parseInt(c),n.selectedItems.forEach((function(e){e.left=parseInt(s[e.id].left+a.x),e.top=parseInt(s[e.id].top+a.y)}))}function d(){a(document).off("mousemove.moveSelect"),c["c"].call(n)}},popMenu:function(e,t){if(!/^sec_/.test(t.type)&&3===e.which){e.preventDefault(),e.stopPropagation();var n=dsf.math.convertLocalCoordinate(".seat-designer-page",{x:e.pageX,y:e.pageY});c["c"].call(this),d.call(this,t),r["a"].emit(l["a"].SEAT_POP,{position:Object(o["a"])({},n),seat:t,maxOrderNum:this.maxOrderNum})}},deleteActiveSeatItem:function(){if(0!==this.selectedItems.length){var t=e.differenceWith(this.items,this.selectedItems,(function(e,t){return e.id===t.id&&"group"!==t.type})),n=e.differenceWith(this.groups,this.selectedItems,(function(e,t){return e.id===t.id&&"group"===t.type}));this.$emit("update:items",t),this.$emit("update:groups",n),this.clearSelectedItems()}},setOrderNum:function(e,t){this.switchNumSet&&"group"!==e.type&&!e.seatNum&&(this.maxOrderNum?this.maxOrderNum+=1:this.maxOrderNum=1,e.seatNum=this.maxOrderNum,e.seatTxt=e.seatTxt||e.seatNum)},openEdit:function(e,t){if(!this.switchNumSet&&!a(e.target).hasClass("anchor")){var n=document.createElement("textarea"),i=function(e){t.seatTxt=e,a(n).remove(),n=null};a(e.target).append(n),a(n).val(t.seatTxt),a(n).on("blur",(function(){i(a(this).val())})),a(n).bind("keypress",(function(e){13===e.keyCode&&i(a(this).val())})),a(n).focus()}},openSetNum:function(e,t){var n=this,i=document.createElement("input"),o=function(e){e?(e=parseInt(e.replace(/[^0-9]/gi,"")),t.seatTxt==t.seatNum&&(t.seatTxt=e),t.seatNum=e,e>n.maxOrderNum?n.maxOrderNum=e:u.call(n)):(t.seatTxt==t.seatNum&&(t.seatTxt=null),t.seatNum=null,u.call(n)),a(i).remove(),i=null};a(e.target).append(i),a(i).val(t.seatNum),a(i).on("blur",(function(){o(a(this).val())})),a(i).bind("keypress",(function(e){13===e.keyCode&&o(a(this).val())})),a(i).focus()}}}}).call(this,n("2ef0"),n("1157"))},4267:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var a=n("55c1");function i(e){var t=e.fromDirection,n=e.targetDirection,i=e.fromNode,o=e.targetNode,s=e.startPoint,r=e.endPoint,l=a["h"].getDirection(s,r),c=[],u=30;if(t==a["b"].Right&&n==a["b"].Left){if(l==a["c"].Right)c.push({x:s.x,y:s.y}),c.push({x:r.x,y:r.y});else if(l==a["c"].RightTop||l==a["c"].RightBottom)c.push({x:s.x,y:s.y}),c.push({x:s.x+(r.x-s.x)/2,y:s.y}),c.push({x:s.x+(r.x-s.x)/2,y:s.y+(r.y-s.y)}),c.push({x:r.x,y:r.y});else if(l==a["c"].Bottom||l==a["c"].Top||l==a["c"].Left||l==a["c"].LeftTop||l==a["c"].LeftBottom)if(c.push({x:s.x,y:s.y}),i.point.y>o.point.y+o.height){c.push({x:s.x+u,y:s.y});var d=c[c.length-1],h=Math.abs(i.point.y-(o.point.y+o.height))/2;c.push({x:d.x,y:i.point.y-h}),d=c[c.length-1],c.push({x:r.x-u,y:d.y}),d=c[c.length-1],c.push({x:d.x,y:r.y}),c.push({x:r.x,y:r.y})}else if(o.point.y>i.point.y+i.height>0){c.push({x:s.x+u,y:s.y});d=c[c.length-1],h=Math.abs(o.point.y-(i.point.y+i.height))/2;c.push({x:d.x,y:o.point.y-h}),d=c[c.length-1],c.push({x:r.x-u,y:d.y}),d=c[c.length-1],c.push({x:d.x,y:r.y}),c.push({x:r.x,y:r.y})}else{var p=u;p=o.point.x+o.width<=i.point.x+i.width?u:o.point.x+o.width+u-s.x,c.push({x:s.x+p,y:s.y});d=c[c.length-1];r.y<s.y?(c.push({x:d.x,y:o.point.y-u}),d=c[c.length-1],c.push({x:o.point.x-u,y:d.y}),c.push({x:o.point.x-u,y:r.y}),c.push({x:r.x,y:r.y})):(c.push({x:d.x,y:o.point.y+o.height+u}),d=c[c.length-1],c.push({x:o.point.x-u,y:d.y}),c.push({x:o.point.x-u,y:r.y}),c.push({x:r.x,y:r.y}))}}else if(t==a["b"].Right&&n==a["b"].Right){if(l==a["c"].Right||l==a["c"].Bottom||l==a["c"].Top||l==a["c"].RightTop||l==a["c"].RightBottom){c.push({x:s.x,y:s.y});d=c[c.length-1];var f={x:d.x,y:d.y};if(d.y>o.point.y-u&&d.y<o.point.y+o.height+u){f.x=i.point.x+i.width+u,c.push(f);d=c[c.length-1],f={x:d.x,y:d.y};Math.abs(d.y-o.point.y)<Math.abs(d.y-(o.point.y+o.height))?f.y=o.point.y-u:f.y=o.point.y+o.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y}}i.point.x+i.width>o.point.x+o.width?f.x=i.point.x+i.width+u:f.x=o.point.x+o.width+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=r.y,c.push(f),c.push(r)}else if(l==a["c"].Left||l==a["c"].LeftTop||l==a["c"].LeftBottom){c.push({x:s.x,y:s.y}),c.push({x:s.x+u,y:s.y});d=c[c.length-1],f={x:d.x,y:d.y};r.y>i.point.y-u&&r.y<i.point.y+i.height+u?Math.abs(r.y-i.point.y)<Math.abs(r.y-(i.point.y+i.height))?f.y=i.point.y-u:f.y=i.point.y+i.height+u:f.y=r.y,c.push(f),d=c[c.length-1],d.y!=r.y&&(f={x:d.x,y:d.y},f.x=r.x+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=r.y,c.push(f)),c.push({x:r.x,y:r.y})}}else if(t==a["b"].Right&&n==a["b"].Top){if(l==a["c"].Right||l==a["c"].Top||l==a["c"].RightBottom||l==a["c"].RightTop){if(c.push({x:s.x,y:s.y}),o.point.y>s.y)c.push({x:r.x,y:s.y});else{if(o.point.x<=i.point.x+i.width&&o.point.x+o.width>=i.point.x){var m=u;m=o.point.x+o.width>i.point.x+i.width?o.point.x+o.width+u:i.point.x+i.width+u,c.push({x:m,y:s.y})}else{var g=Math.abs(o.point.x-(i.point.x+i.width));m=u;g<=u&&(m=g/2),c.push({x:s.x+m,y:s.y})}d=c[c.length-1],f={x:d.x,y:d.y},f.y=o.point.y-u,c.push(f),d=c[c.length-1],c.push({x:r.x,y:d.y})}c.push({x:r.x,y:r.y})}else if(l==a["c"].Left||l==a["c"].Bottom||l==a["c"].LeftTop||l==a["c"].LeftBottom){if(c.push({x:s.x,y:s.y}),l!=a["c"].LeftBottom&&l!=a["c"].Bottom&&o.point.x+o.width>i.point.x+i.width?c.push({x:o.point.x+o.width+u,y:s.y}):c.push({x:s.x+u,y:s.y}),o.point.y-(i.point.y+i.height)>0){d=c[c.length-1],f={x:d.x,y:d.y};m=u;o.point.y-(i.point.y+i.height)<=u&&(m=(o.point.y-(i.point.y+i.height))/2),f.y=o.point.y-m,c.push(f),d=c[c.length-1],f={x:r.x,y:d.y},c.push(f)}else d=c[c.length-1],f={x:d.x,y:d.y},i.point.y<o.point.y?f.y=i.point.y-u:f.y=o.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=r.x,c.push(f);c.push({x:r.x,y:r.y})}}else if(t==a["b"].Right&&n==a["b"].Bottom){if(l==a["c"].Right||l==a["c"].Bottom||l==a["c"].RightBottom||l==a["c"].RightTop){if(c.push({x:s.x,y:s.y}),o.point.y+o.height<s.y)c.push({x:r.x,y:s.y});else{if(o.point.x<=i.point.x+i.width&&o.point.x+o.width>=i.point.x){m=u;m=o.point.x+o.width>i.point.x+i.width?o.point.x+o.width+u:i.point.x+i.width+u,c.push({x:m,y:s.y})}else{g=Math.abs(o.point.x-(i.point.x+i.width)),m=u;g<=u&&(m=g/2),c.push({x:s.x+m,y:s.y})}d=c[c.length-1],f={x:d.x,y:d.y},f.y=o.point.y+o.height+u,c.push(f),d=c[c.length-1],c.push({x:r.x,y:d.y})}c.push({x:r.x,y:r.y})}else if(l==a["c"].Left||l==a["c"].Top||l==a["c"].LeftTop||l==a["c"].LeftBottom){if(c.push({x:s.x,y:s.y}),l!=a["c"].LeftTop&&l!=a["c"].Top&&o.point.x+o.width>i.point.x+i.width?c.push({x:o.point.x+o.width+u,y:s.y}):c.push({x:s.x+u,y:s.y}),i.point.y-(o.point.y+o.height)>0){d=c[c.length-1],f={x:d.x,y:d.y};m=u;o.point.y-(i.point.y+i.height)<=u&&(m=(o.point.y-(i.point.y+i.height))/2),f.y=o.point.y-m,c.push(f),d=c[c.length-1],f={x:r.x,y:d.y},c.push(f)}else d=c[c.length-1],f={x:d.x,y:d.y},o.point.y+o.height>i.point.y+i.height?f.y=o.point.y+o.height+u:f.y=i.point.y+i.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=r.x,c.push(f);c.push({x:r.x,y:r.y})}}else if(t==a["b"].Bottom&&n==a["b"].Left){m=u;if(l==a["c"].RightBottom||l==a["c"].RightTop||l==a["c"].Right)c.push({x:s.x,y:s.y}),r.y>i.point.y+i.height?c.push({x:s.x,y:r.y}):o.point.x<=i.point.x+i.width?(o.point.y+o.height>i.point.y+i.height&&(m=o.point.y+o.height-(i.point.y+i.height)+u),c.push({x:s.x,y:s.y+m}),d=c[c.length-1],f={x:d.x,y:d.y},o.point.x>i.point.x?f.x=i.point.x-u:f.x=o.point.x-u,c.push(f),d=c[c.length-1],c.push({x:d.x,y:r.y})):(c.push({x:s.x,y:s.y+u}),o.point.x-(i.point.x+i.width)<=2*u&&(m=(o.point.x-(i.point.x+i.width))/2),d=c[c.length-1],c.push({x:r.x-m,y:d.y}),d=c[c.length-1],c.push({x:d.x,y:r.y}));else if(l==a["c"].Top||l==a["c"].LeftTop)c.push({x:s.x,y:s.y}),o.point.y+o.height>i.point.y+i.height&&(m=o.point.y+o.height-(i.point.y+i.height)+u),c.push({x:s.x,y:s.y+m}),d=c[c.length-1],f={x:d.x,y:d.y},o.point.x>i.point.x?f.x=i.point.x-u:f.x=o.point.x-u,c.push(f),d=c[c.length-1],c.push({x:d.x,y:r.y});else if(l==a["c"].Bottom||l==a["c"].LeftBottom||l==a["c"].Left)if(c.push({x:s.x,y:s.y}),o.point.y-(i.point.y+i.height)>0){var _=o.point.y-(i.point.y+i.height);_>2*u?c.push({x:s.x,y:s.y+u}):c.push({x:s.x,y:s.y+_/2}),d=c[c.length-1],f={x:d.x,y:d.y},f.x=r.x-30,c.push(f),d=c[c.length-1],f={x:d.x,y:r.y},c.push(f)}else o.point.y+o.height>i.point.y+i.height&&(m=o.point.y+o.height-(i.point.y+i.height)+u),c.push({x:s.x,y:s.y+m}),d=c[c.length-1],f={x:d.x,y:d.y},o.point.x>i.point.x?f.x=i.point.x-u:f.x=o.point.x-u,c.push(f),d=c[c.length-1],c.push({x:d.x,y:r.y});c.push({x:r.x,y:r.y})}else if(t==a["b"].Bottom&&n==a["b"].Bottom){m=u;if(c.push({x:s.x,y:s.y}),l==a["c"].Right||l==a["c"].RightTop||l==a["c"].Top||l==a["c"].LeftTop)if(o.point.y+o.height>i.point.y+i.height&&(m=o.point.y+o.height-(i.point.y+i.height)+u),c.push({x:s.x,y:s.y+m}),d=c[c.length-1],f={x:d.x,y:d.y},r.x<i.point.x+i.width+u&&r.x>i.point.x-u){if(b=a["h"].getNodeCenter(o),b.x>s.x?(f.x=i.point.x+i.width+u,c.push(f)):(f.x=i.point.x-u,c.push(f)),d=c[c.length-1],f={x:d.x,y:d.y},i.point.y-(o.point.y+o.height)>2*u)f.y=o.point.y+o.height+u;else if(i.point.y-(o.point.y+o.height)<=0)f.y=o.point.y+o.height+u;else{_=i.point.y-(o.point.y+o.height);f.y=o.point.y+o.height+_/2}c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=r.x,c.push(f)}else f.x=r.x,c.push(f);else if(l==a["c"].Left||l==a["c"].RightBottom||l==a["c"].LeftBottom||l==a["c"].Bottom)if(d=c[c.length-1],f={x:d.x,y:d.y},o.point.x-u<=s.x&&o.point.x+o.width+u>s.x){if(o.point.y-(i.point.y+i.height)>u||o.point.y-(i.point.y+i.height)<=0)f.y=s.y+u,c.push(f);else{_=(o.point.y-(i.point.y+i.height))/2;f.y=s.y+_,c.push(f)}var b=a["h"].getNodeCenter(o);b.x>s.x?(d=c[c.length-1],f={x:d.x,y:d.y},f.x=o.point.x-u,c.push(f)):(d=c[c.length-1],f={x:d.x,y:d.y},f.x=o.point.x+o.width+u,c.push(f)),d=c[c.length-1],f={x:d.x,y:d.y},f.y=o.point.y+o.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=r.x,c.push(f)}else i.point.y+i.height>o.point.y+o.height?f.y=i.point.y+i.height+u:f.y=o.point.y+o.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=r.x,c.push(f);c.push({x:r.x,y:r.y})}else if(t==a["b"].Bottom&&n==a["b"].Right){m=u;if(c.push({x:s.x,y:s.y}),l==a["c"].Top||l==a["c"].Bottom||l==a["c"].Right||l==a["c"].RightBottom||l==a["c"].RightTop)o.point.y-(i.point.y+i.height)>0?(d=c[c.length-1],f={x:d.x,y:d.y},m=o.point.y-(i.point.y+i.height)>2*u?u:(o.point.y-(i.point.y+i.height))/2,f.y=f.y+m,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=r.x+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=r.y,c.push(f)):(d=c[c.length-1],f={x:d.x,y:d.y},i.point.y+i.height>o.point.y+o.height?f.y=i.point.y+i.height+u:f.y=o.point.y+o.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},i.point.x+i.width>o.point.x+o.width?f.x=i.point.x+i.width+u:f.x=o.point.x+o.width+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=r.y,c.push(f));else if(l==a["c"].LeftTop||l==a["c"].Left||l==a["c"].LeftBottom)if(r.y<=s.y)if(o.point.x+o.width<i.point.x){if(c.push({x:s.x,y:i.point.y+i.height+u}),d=c[c.length-1],f={x:d.x,y:d.y},i.point.x-(o.point.x+o.width)<=u){_=Math.abs(o.point.x+o.width-i.point.x)/2;f.x=o.point.x+o.width+_}else f.x=o.point.x+o.width+u;c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=r.y,c.push(f)}else i.point.y+i.height>o.point.y+o.height?c.push({x:s.x,y:i.point.y+i.height+u}):c.push({x:s.x,y:o.point.y+o.height+u}),d=c[c.length-1],f={x:d.x,y:d.y},o.point.x+o.width>i.point.x+i.width?f.x=o.point.x+o.width+u:f.x=i.point.x+i.width+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=r.y,c.push(f);else c.push({x:s.x,y:r.y});c.push({x:r.x,y:r.y})}else if(t==a["b"].Bottom&&n==a["b"].Top){m=u;if(c.push({x:s.x,y:s.y}),l==a["c"].Top||l==a["c"].Right||l==a["c"].Left||l==a["c"].RightTop||l==a["c"].LeftTop)o.point.x<=i.point.x+i.width&&o.point.x+o.width>=i.point.x?(c.push({x:s.x,y:s.y+u}),b=a["h"].getNodeCenter(o),d=c[c.length-1],f={x:d.x,y:d.y},b.x>s.x?(f.x=i.point.x<o.point.x?i.point.x:o.point.x,f.x-=u):(f.x=i.point.x+i.width<o.point.x+o.width?o.point.x+o.width:i.point.x+i.width,f.x+=u),c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=i.point.y<o.point.y?i.point.y:o.point.y,f.y-=u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=r.x,c.push(f)):(c.push({x:s.x,y:s.y+u}),d=c[c.length-1],f={x:d.x,y:d.y},o.point.x>i.point.x+i.width?f.x=i.point.x+i.width+(o.point.x-(i.point.x+i.width))/2:i.point.x>o.point.x+o.width&&(f.x=i.point.x-(i.point.x-(o.point.x+o.width))/2),c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=r.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=r.x,c.push(f));else if((l==a["c"].Bottom||l==a["c"].LeftBottom||l==a["c"].RightBottom)&&r.x!=s.x){_=o.point.y-(i.point.y+i.height);c.push({x:s.x,y:s.y+_/2}),d=c[c.length-1],f={x:d.x,y:d.y},f.x=r.x,c.push(f)}c.push({x:r.x,y:r.y})}else if(t==a["b"].Left&&n==a["b"].Left){m=u;c.push({x:s.x,y:s.y}),l==a["c"].Top||l==a["c"].Bottom||l==a["c"].Right||l==a["c"].RightTop||l==a["c"].RightBottom?(c.push({x:s.x-u,y:s.y}),d=c[c.length-1],f={x:d.x,y:d.y},r.y>i.point.y-u&&r.y<i.point.y+i.height+u?(r.y<s.y?f.y=i.point.y-u:f.y=i.point.y+i.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=r.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=r.y,c.push(f)):(f.y=r.y,c.push(f))):l!=a["c"].Left&&l!=a["c"].LeftBottom&&l!=a["c"].LeftTop||(d=c[c.length-1],f={x:d.x,y:d.y},s.y>o.point.y-u&&s.y<o.point.y+o.height+u?(c.push({x:s.x-u,y:s.y}),d=c[c.length-1],f={x:d.x,y:d.y},Math.abs(d.y-o.point.y)<Math.abs(d.y-(o.point.y+o.height))?f.y=o.point.y-u:f.y=o.point.y+o.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=o.point.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=r.y,c.push(f)):(f.x=o.point.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=r.y,c.push(f))),c.push({x:r.x,y:r.y})}else if(t==a["b"].Left&&n==a["b"].Top){m=u;if(c.push({x:s.x,y:s.y}),l==a["c"].Right||l==a["c"].RightTop||l==a["c"].RightBottom||l==a["c"].Bottom)if(o.point.y-(i.point.y+i.height)>0){d=c[c.length-1],f={x:d.x,y:d.y},f.x=i.point.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y};_=o.point.y-(i.point.y+i.height);f.y=_>2*u?o.point.y-u:i.point.y+i.height+_/2,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=r.x,c.push(f)}else d=c[c.length-1],f={x:d.x,y:d.y},o.point.x<i.point.x?f.x=o.point.x-u:f.x=i.point.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},o.point.y<i.point.y?f.y=o.point.y-u:f.y=i.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=r.x,c.push(f);else if(l==a["c"].Top||l==a["c"].LeftTop||l==a["c"].Left)if(o.point.x+o.width<i.point.x){d=c[c.length-1],f={x:d.x,y:d.y};_=Math.abs(o.point.x+o.width-i.point.x);f.x=_>2*u?i.point.x-u:i.point.x-_/2,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=o.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=r.x,c.push(f)}else d=c[c.length-1],f={x:d.x,y:d.y},o.point.x<i.point.x?f.x=o.point.x-u:f.x=i.point.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},o.point.y<i.point.y?f.y=o.point.y-u:f.y=i.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=r.x,c.push(f);else l==a["c"].LeftBottom&&c.push({x:r.x,y:s.y});c.push({x:r.x,y:r.y})}else if(t==a["b"].Left&&n==a["b"].Right){m=u;if(c.push({x:s.x,y:s.y}),l==a["c"].Right||l==a["c"].RightTop||l==a["c"].RightBottom||l==a["c"].Top||l==a["c"].Bottom)if(c.push({x:s.x-u,y:s.y}),d=c[c.length-1],f={x:d.x,y:d.y},o.point.y<=i.point.y+i.height&&o.point.y+o.height>=i.point.y){b=a["h"].getNodeCenter(o);b.y>s.y?f.y=i.point.y<o.point.y?i.point.y-u:o.point.y-u:f.y=i.point.y+i.height<o.point.y+o.height?o.point.y+o.height+u:i.point.y+i.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},o.point.x+o.width>i.point.x+i.width?f.x=o.point.x+o.width+u:f.x=i.point.x+i.width+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=r.y,c.push(f)}else{if(o.point.y>i.point.y+i.height){_=Math.abs(o.point.y-(i.point.y+i.height));f.y=i.point.y+i.height+_/2}else if(o.point.y+o.height<i.point.y){_=Math.abs(o.point.y+o.height-i.point.y);f.y=o.point.y+o.height+_/2}c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=o.point.x+o.width+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=r.y,c.push(f)}else if((l==a["c"].Left||l==a["c"].LeftTop||l==a["c"].LeftBottom)&&s.y!=r.y){_=i.point.x-(o.point.x+o.width);c.push({x:i.point.x-_/2,y:s.y}),d=c[c.length-1],f={x:d.x,y:d.y},f.y=r.y,c.push(f)}c.push({x:r.x,y:r.y})}else if(t==a["b"].Left&&n==a["b"].Bottom){m=u;if(c.push({x:s.x,y:s.y}),l==a["c"].Top||l==a["c"].Bottom||l==a["c"].Right||l==a["c"].RightTop||l==a["c"].RightBottom)if(d=c[c.length-1],f={x:d.x,y:d.y},o.point.y+o.height<i.point.y){f.x=i.point.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y};_=Math.abs(o.point.y+o.height-i.point.y);f.y=_<=2*u?o.point.y+o.height+_/2:o.point.y+o.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=r.x,c.push(f)}else d=c[c.length-1],f={x:d.x,y:d.y},o.point.x<i.point.x?f.x=o.point.x-u:f.x=i.point.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},o.point.y+o.height<i.point.y+i.height?f.y=i.point.y+i.height+u:f.y=o.point.y+o.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=r.x,c.push(f);else if(l==a["c"].LeftTop)c.push({x:r.x,y:s.y});else if(l==a["c"].Left||l==a["c"].LeftBottom)if(d=c[c.length-1],f={x:d.x,y:d.y},o.point.x+o.width<i.point.x){_=Math.abs(o.point.x+o.width-i.point.x);f.x=_<2*u?i.point.x-_/2:i.point.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=o.point.y+o.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=r.x,c.push(f)}else f.x=o.point.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=o.point.y+o.height>i.point.y+i.height?o.point.y+o.height+u:i.point.y+i.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=r.x,c.push(f);c.push({x:r.x,y:r.y})}else if(t==a["b"].Top&&n==a["b"].Left){m=u;if(c.push({x:s.x,y:s.y}),l==a["c"].RightTop)c.push({x:s.x,y:r.y});else if(l==a["c"].Right||l==a["c"].RightBottom||l==a["c"].Bottom||l==a["c"].LeftBottom)if(d=c[c.length-1],f={x:d.x,y:d.y},o.point.x>i.point.x+i.width){f.y=i.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y};_=o.point.x-(i.point.x+i.width);f.x=_>2*u?o.point.x-u:o.point.x-_/2,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=r.y,c.push(f)}else o.point.y<i.point.y?f.y=o.point.y-u:f.y=i.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},o.point.x<i.point.x?f.x=o.point.x-u:f.x=i.point.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=r.y,c.push(f);else if(l==a["c"].Left||l==a["c"].LeftTop||l==a["c"].Top)if(o.point.y+o.height<i.point.y){d=c[c.length-1],f={x:d.x,y:d.y};_=Math.abs(o.point.y+o.height-i.point.y);f.y=_>2*u?i.point.y-u:i.point.y-_/2,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=o.point.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=r.y,c.push(f)}else d=c[c.length-1],f={x:d.x,y:d.y},o.point.y<i.point.y?f.y=o.point.y-u:f.y=i.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},o.point.x<i.point.x?f.x=o.point.x-u:f.x=i.point.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=r.y,c.push(f);c.push({x:r.x,y:r.y})}else if(t==a["b"].Top&&n==a["b"].Right){m=u;if(c.push({x:s.x,y:s.y}),l==a["c"].Top||l==a["c"].Right||l==a["c"].Bottom||l==a["c"].RightTop||l==a["c"].RightBottom)if(o.point.y+o.height<i.point.y){d=c[c.length-1],f={x:d.x,y:d.y};_=Math.abs(o.point.y+o.height-i.point.y);f.y=_<2*u?i.point.y-_/2:i.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=o.point.x+o.width+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=r.y,c.push(f)}else d=c[c.length-1],f={x:d.x,y:d.y},o.point.y<i.point.y?f.y=o.point.y-u:f.y=i.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},o.point.x+o.width>i.point.x+i.width?f.x=o.point.x+o.width+u:f.x=i.point.x+i.width+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=r.y,c.push(f);else if(l==a["c"].LeftTop)c.push({x:s.x,y:r.y});else if(l==a["c"].Left||l==a["c"].LeftBottom)if(o.point.x+o.width<i.point.x){d=c[c.length-1],f={x:d.x,y:d.y},f.y=i.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y};_=Math.abs(o.point.x+o.width-i.point.x);f.x=_<2*u?o.point.x+o.width+_/2:o.point.x+o.width+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=r.y,c.push(f)}else d=c[c.length-1],f={x:d.x,y:d.y},o.point.y<i.point.y?f.y=o.point.y-u:f.y=i.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},o.point.x+o.width<i.point.x+i.width?f.x=i.point.x+i.width+u:f.x=o.point.x+o.width+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=r.y,c.push(f);c.push({x:r.x,y:r.y})}else if(t==a["b"].Top&&n==a["b"].Top){m=u;if(c.push({x:s.x,y:s.y}),l==a["c"].Right||l==a["c"].Left||l==a["c"].RightBottom||l==a["c"].Bottom||l==a["c"].LeftBottom)if(d=c[c.length-1],f={x:d.x,y:d.y},o.point.y<i.point.y?f.y=o.point.y-u:f.y=i.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},r.x<i.point.x+i.width+u&&r.x>i.point.x-u){b=a["h"].getNodeCenter(o);b.x<s.x?f.x=i.point.x-u:f.x=i.point.x+i.width+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y};_=o.point.y-(i.point.y+i.height);f.y=_<2*u?o.point.y-_/2:o.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=r.x,c.push(f)}else f.x=r.x,c.push(f);else if(l==a["c"].LeftTop||l==a["c"].Top||l==a["c"].RightTop){d=c[c.length-1];if(f={x:d.x,y:d.y},s.x<o.point.x+o.width+u&&s.x>o.point.x-u){_=Math.abs(o.point.y+o.height-i.point.y);f.y=_<2*u&&0!=_?i.point.y-_/2:i.point.y-u,c.push(f);d=c[c.length-1];f={x:d.x,y:d.y};b=a["h"].getNodeCenter(o);b.x<s.x?f.x=o.point.x+o.width+u:f.x=o.point.x-u,c.push(f);d=c[c.length-1];f={x:d.x,y:d.y},f.y=o.point.y-u,c.push(f);d=c[c.length-1];f={x:d.x,y:d.y},f.x=r.x,c.push(f)}else{o.point.y<i.point.y?f.y=o.point.y-u:f.y=i.point.y-u,c.push(f);d=c[c.length-1];f={x:d.x,y:d.y},f.x=r.x,c.push(f)}}c.push({x:r.x,y:r.y})}else if(t==a["b"].Top&&n==a["b"].Bottom){m=u;if(c.push({x:s.x,y:s.y}),l==a["c"].Top||l==a["c"].LeftTop||l==a["c"].RightTop){if(d=c[c.length-1],f={x:d.x,y:d.y},r.x!=s.x){_=Math.abs(o.point.y+o.height-i.point.y);f.y=i.point.y-_/2,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=r.x,c.push(f)}}else if(l==a["c"].Left||l==a["c"].Right||l==a["c"].LeftBottom||l==a["c"].RightBottom||l==a["c"].Bottom)if(d=c[c.length-1],f={x:d.x,y:d.y},o.point.x<=i.point.x+i.width&&o.point.x+o.width>=i.point.x){o.point.y<i.point.y?f.y=o.point.y-u:f.y=i.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y};b=a["h"].getNodeCenter(o);b.x<s.x?f.x=o.point.x<i.point.x?o.point.x-u:i.point.x-u:f.x=o.point.x+o.width<i.point.x+i.width?i.point.x+i.width+u:o.point.x+o.width+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=o.point.y+o.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=r.x,c.push(f)}else{if(f.y=i.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},o.point.x+o.width<i.point.x){_=Math.abs(o.point.x+o.width-i.point.x);f.x=i.point.x-_/2}else if(i.point.x+i.width<o.point.x){_=Math.abs(i.point.x+i.width-o.point.x);f.x=o.point.x-_/2}c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=o.point.y+o.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=r.x,c.push(f)}c.push({x:r.x,y:r.y})}return c}function o(e,t){if(e){var n=[],i=e.fromDirection,o=e.fromNode,s=e.startPoint,r=t,l=30,c=a["h"].getDirection(s,r),u=a["h"].getAngle(s,r);if(i==a["b"].Right)n.push({x:s.x,y:s.y}),c==a["c"].RightTop||c==a["c"].RightBottom?u>0&&u<45||u>315&&u<360?(d=n[n.length-1],h={x:d.x,y:d.y},h.x=s.x+(r.x-s.x)/2,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=r.y,n.push(h)):(d=n[n.length-1],h={x:d.x,y:d.y},h.x=r.x,n.push(h)):c==a["c"].Bottom||c==a["c"].LeftBottom||c==a["c"].Left?u<135?(d=n[n.length-1],h={x:d.x,y:d.y},h.x=h.x+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=r.y-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=r.x,n.push(h)):(d=n[n.length-1],h={x:d.x,y:d.y},h.x=h.x+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},r.y<=o.point.y+o.height+l?(h.y=o.point.y+o.height+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=r.x+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=r.y,n.push(h)):(h.y=r.y,n.push(h))):c!=a["c"].Top&&c!=a["c"].LeftTop||(u>225?(d=n[n.length-1],h={x:d.x,y:d.y},h.x=h.x+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=r.y+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=r.x,n.push(h)):(d=n[n.length-1],h={x:d.x,y:d.y},h.x=h.x+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},r.y>=o.point.y-l?(h.y=o.point.y-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=r.x+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=r.y,n.push(h)):(h.y=r.y,n.push(h)))),n.push({x:r.x,y:r.y});else if(i==a["b"].Bottom){n.push({x:s.x,y:s.y}),c==a["c"].RightBottom||c==a["c"].LeftBottom?u>90&&u<135||u<90&&u>45?(d=n[n.length-1],h={x:d.x,y:d.y},h.y=s.y+(r.y-s.y)/2,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=r.x,n.push(h)):(d=n[n.length-1],h={x:d.x,y:d.y},h.y=r.y,n.push(h)):c==a["c"].Right||c==a["c"].Top||c==a["c"].RightTop?u>315?(d=n[n.length-1],h={x:d.x,y:d.y},h.y=h.y+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=r.x-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=r.y,n.push(h)):(d=n[n.length-1],h={x:d.x,y:d.y},h.y=h.y+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},r.x<=o.point.x+o.width+l?(h.x=o.point.x+o.width+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=r.y+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=r.x,n.push(h)):(h.x=r.x,n.push(h))):c!=a["c"].Left&&c!=a["c"].LeftTop||(u<225?(d=n[n.length-1],h={x:d.x,y:d.y},h.y=h.y+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=r.x+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=r.y,n.push(h)):(d=n[n.length-1],h={x:d.x,y:d.y},h.y=h.y+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},r.x>=o.point.x-l?(h.x=o.point.x-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=r.y+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=r.x,n.push(h)):(h.x=r.x,n.push(h)))),n.push({x:r.x,y:r.y})}else if(i==a["b"].Left){n.push({x:s.x,y:s.y}),c==a["c"].LeftTop||c==a["c"].LeftBottom?u>135&&u<180||u>180&&u<225?(d=n[n.length-1],h={x:d.x,y:d.y},h.x=s.x+(r.x-s.x)/2,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=r.y,n.push(h)):(d=n[n.length-1],h={x:d.x,y:d.y},h.x=r.x,n.push(h)):c==a["c"].Bottom||c==a["c"].RightBottom||c==a["c"].Right?u>45?(d=n[n.length-1],h={x:d.x,y:d.y},h.x=h.x-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=r.y-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=r.x,n.push(h)):(d=n[n.length-1],h={x:d.x,y:d.y},h.x=h.x-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},r.y<=o.point.y+o.height+l?(h.y=o.point.y+o.height+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=r.x-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=r.y,n.push(h)):(h.y=r.y,n.push(h))):c!=a["c"].Top&&c!=a["c"].RightTop||(u<315?(d=n[n.length-1],h={x:d.x,y:d.y},h.x=h.x-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=r.y+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=r.x,n.push(h)):(d=n[n.length-1],h={x:d.x,y:d.y},h.x=h.x-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},r.y>=o.point.y-l?(h.y=o.point.y-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=r.x-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=r.y,n.push(h)):(h.y=r.y,n.push(h)))),n.push({x:r.x,y:r.y})}else if(i==a["b"].Top){var d,h;n.push({x:s.x,y:s.y}),c==a["c"].RightTop||c==a["c"].LeftTop?u>270&&u<315||u<270&&u>225?(d=n[n.length-1],h={x:d.x,y:d.y},h.y=s.y+(r.y-s.y)/2,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=r.x,n.push(h)):(d=n[n.length-1],h={x:d.x,y:d.y},h.y=r.y,n.push(h)):c==a["c"].Right||c==a["c"].Bottom||c==a["c"].RightBottom?u<45?(d=n[n.length-1],h={x:d.x,y:d.y},h.y=h.y-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=r.x-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=r.y,n.push(h)):(d=n[n.length-1],h={x:d.x,y:d.y},h.y=h.y-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},r.x<=o.point.x+o.width+l?(h.x=o.point.x+o.width+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=r.y-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=r.x,n.push(h)):(h.x=r.x,n.push(h))):c!=a["c"].Left&&c!=a["c"].LeftBottom||(u>135?(d=n[n.length-1],h={x:d.x,y:d.y},h.y=h.y-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=r.x+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=r.y,n.push(h)):(d=n[n.length-1],h={x:d.x,y:d.y},h.y=h.y-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},r.x>=o.point.x-l?(h.x=o.point.x-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=r.y-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=r.x,n.push(h)):(h.x=r.x,n.push(h)))),n.push({x:r.x,y:r.y})}return n}}},"439a":function(e,t,n){},"44ff":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("d4ec"),i=n("bee2"),o=n("262e"),s=n("2caf"),r=n("ec87"),l=n("3c04"),c=function(e){Object(o["a"])(n,e);var t=Object(s["a"])(n);function n(){return Object(a["a"])(this,n),t.apply(this,arguments)}return Object(i["a"])(n,[{key:"commands",value:function(e){var t=e.type;return function(e){return e.color?Object(l["updateMark"])(t,e):Object(l["removeMark"])(t)}}},{key:"name",get:function(){return"backgroundmark"}},{key:"defaultOptions",get:function(){return{color:null}}},{key:"schema",get:function(){return{attrs:{color:{default:null}},inclusive:!1,parseDOM:[{style:"background",getAttrs:function(e){return{color:e}}}],toDOM:function(e){return["span",{style:"background: ".concat(e.attrs.color,";")},0]}}}}]),n}(r["Mark"])},"46b7":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{staticClass:"design-development-edit",staticStyle:{height:"100%"},on:{"tab-click":e.tabsCliekHandler},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{name:"attrs"}},[n("div",{staticStyle:{width:"100px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("属性/事件")]),n("MonacoEditor",{ref:"attrsEditor",attrs:{language:"json"},on:{mounted:function(t){return e.editorLoaded("attrs")}}})],1),n("el-tab-pane",{attrs:{name:"slots"}},[n("div",{staticStyle:{width:"100px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("插槽")]),n("MonacoEditor",{ref:"slotsEditor",attrs:{language:"html"},on:{mounted:function(t){return e.editorLoaded("slots")}}})],1)],1)},i=[],o=(n("b0c0"),n("2d0f")),s={name:"DesDevelopment",mixins:[o["a"]],data:function(){return{activeName:"attrs",data:{}}},created:function(){this.data=dsf.mix(!0,{},this.currentData)},mounted:function(){},methods:{yes:function(){var e={attrs:{},slots:{}};for(var t in e){var n=this.$refs[t+"Editor"];n&&(e[t]="attrs"==t?JSON.parse(n.getContent()||"{}"):n.getContent()||"")}return e},tabsCliekHandler:function(e){var t=this;this.$nextTick((function(){var n=e.name,a=n+"Editor";t.$refs[a]&&t.$refs[a].layout()}))},editorLoaded:function(e){var t=this,n=e+"Editor";this.$nextTick((function(){if(t.$refs[n]){var a="attrs"==e?JSON.stringify(t.data[e]):t.data[e]||"";t.$refs[n].setContent(a||"")}}))}}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},4809:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:!0}},[n("el-table-column",{attrs:{prop:"text",label:"名称",width:"150"}}),n("el-table-column",{attrs:{prop:"value",label:"高度"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"auto"},model:{value:t.row.height,callback:function(n){e.$set(t.row,"height",n)},expression:"scope.row.height"}})]}}])})],1)},i=[],o=(n("498a"),n("2d0f")),s={name:"DesTableRowsInfo",mixins:[o["a"]],data:function(){return{tableData:[]}},mounted:function(){for(var e=0;e<this.currentData.length;e++)this.tableData.push({text:"第"+(e+1)+"行",height:this.currentData[e].height})},methods:{yes:function(){for(var e=0;e<this.tableData.length;e++){var t=this.tableData[e].height;""==t.trim()&&(t=57),dsf.isNumber(t)&&(t+="px"),this.owner.rows[e].height=t}}}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},4924:function(e,t,n){"use strict";(function(e){n("99af");var a=n("5530"),i=n("d0f8"),o=n("5032"),s=n("76af"),r=n("2f62"),l=n("154d");function c(e){var t=this,n=new Image;n.src=dsf.url.getWebPath(e.relativePath),n.onload=function(){t.$emit("update:hasBg",!0),t.$emit("update:backgroundImage",{width:n.naturalWidth,height:n.naturalHeight,relativePath:e.relativePath,absolutePath:e.absolutePath})},n.onerror=function(){dsf.layer.message("图片加载失败",!1),t.$emit("update:hasBg",!1)}}t["a"]={name:"TopTools",props:{backgroundImage:{type:Object,default:function(){return{url:"",width:0,height:0}}},canvasSet:{type:Object,default:function(){return{width:void 0,height:void 0}}},hasBg:{type:Boolean,default:!1}},components:{widthInput:l["a"]},data:function(){return{normalButtons:[{text:"保存",icon:"baocun",handler:this.saveLayout},{text:"序号设置",icon:"shuzishurukuang",handler:this.setNum},{text:"底图",icon:"tupiantianjia",handler:this.updateBG},{text:"复位",icon:"shuaxin",handler:this.restoreLayout},{text:"回退",icon:"shangyibu1",handler:this.backStep}],numButtons:[{text:"确定",icon:"dui1",handler:this.numSave},{text:"取消",icon:"icon2",handler:this.numCancel},{text:"回退",icon:"shangyibu1",handler:this.backStep},{text:"全部清空",icon:"shanchu",handler:this.numClean}],layout:{buttons:[]}}},computed:Object(a["a"])({},Object(r["b"])("seatDesign",["compelPanelSize","switchNumSet","haveSelectedItems"])),watch:{"canvasSet.width":function(t){var n=this;if(this.hasBg)if(t){var a=t/this.backgroundImage.width;this.canvasSet.height=this.backgroundImage.height*a}else this.$nextTick((function(){var t=e(".seat-designer-page").width(),a=t/n.backgroundImage.width;n.canvasSet.height=n.backgroundImage.height*a}))},switchNumSet:function(e){this.layout.buttons=e?this.numButtons:this.normalButtons},haveSelectedItems:function(e){var t,n=[{text:"确定",icon:"dui1",handler:this.numSave},{text:"取消",icon:"icon2",handler:this.numCancel},{text:"回退",icon:"shangyibu1",handler:this.backStep}];t=e?[{text:"当前清空",icon:"kongjianweixuan",handler:this.numClear}]:[{text:"全部清空",icon:"shanchu",handler:this.numClean}],this.numButtons=n.concat(t),this.switchNumSet&&(this.layout.buttons=n.concat(t))}},created:function(){this.layout.buttons=this.normalButtons},methods:{backStep:function(){},setNum:function(){this.$store.commit("seatDesign/changeSwitchNumSet",!0)},numSave:function(){this.$store.commit("seatDesign/changeSwitchNumSet",!1)},numCancel:function(){this.$store.commit("seatDesign/changeSwitchNumSet",!1)},numClean:function(){o["a"].emit(s["a"].CLEAN_ALL_SEAT_NUM)},numClear:function(){o["a"].emit(s["a"].CLEAN_SELECT_SEAT_NUM)},saveLayout:function(){o["a"].emit(s["a"].SAVE_LAYOUT)},restoreLayout:function(){var e={width:this.compelPanelSize.width,height:this.compelPanelSize.height,scale:1,left:0,top:0};this.$store.commit("seatDesign/changePanelSize",e)},updateBG:function(){var t=this,n=Object(i["b"])("dsf-seat-bg-upload");e(n).on("change",(function(){if(!n.files||0===n.files.length)return!1;var a=new FormData;a.append("file",n.files[0]);var o=function(a){if(e(n).val(""),e(n).remove(),n=null,"error"===a)return t.$emit("update:hasBg",!1),!1;c.call(t,a[0])};i["j"].call(t,a,o)})),e(n).click()}}}}).call(this,n("1157"))},4948:function(e,t,n){"use strict";(function(e){n("d81d"),n("a434"),n("a9e3");var a=n("2d0f");t["a"]={name:"DesFlexGrid",mixins:[a["a"]],props:{simple:{type:Boolean,default:!1}},data:function(){return{form:null,formNode:null,tableData:[],sizeMap:[{size:"lg",desc:"≥1920px"},{size:"xl",desc:"≥1200px"},{size:"md",desc:"≥992px"},{size:"sm",desc:"≥768px"},{size:"xs",desc:"<768px"}]}},created:function(){},beforeMount:function(){},mounted:function(){var t=this,n=this.owner.$$getComponent().slots;if(n=dsf.mix(!0,[],n),n[0]){var a=n[0].controls;e.each(a,(function(e){t.simple&&(e.span/=2),t.tableData.push(e)}))}},methods:{rowClickHandler:function(){},addCol:function(){var e={span:6,height:"auto"};this.simple&&(e.span=3),this.tableData.push(dsf.designer.createComponent("dsf.col",e))},vaildate:function(){return 0!=data.length||(dsf.layer.pc.message("至少存在一格",!1),!1)},deleted:function(e){var t=this;if(e.row.slots[0].controls.length>0){var n=e.row.slots[0].controls;dsf.layer.pc.confirm("栅格中存在"+n.length+"个子组件,删除该单元格子组件将一起被删除。<br/>是否确定要继续?").then((function(){dsf.array.remove(t.tableData,e.row)})).catch((function(){}))}else dsf.array.remove(this.tableData,e.row)},up:function(e){if(e.$index>0){var t=this.tableData[e.$index],n=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(n-1,0,t)}},down:function(e){if(this.tableData.length-1>e.$index){var t=this.tableData[e.$index],n=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(n+1,0,t)}},insert:function(e){var t={span:6,height:"auto"};this.simple&&(t.span=3),this.tableData.splice(e.$index+1,0,dsf.designer.createComponent("dsf.col",t))},yes:function(){var t=this,n=this.tableData;e.each(n,(function(n){t.simple&&(n.span*=2),t.checkMaxSpan(n,"span");var a=e.map(t.sizeMap,"size");e.each(a,(function(e){t.checkMaxSpan(n,e)}))})),this.owner.slots[0].controls=[],this.$nextTick((function(){var a=t.owner.slots[0].controls;e.each(n,(function(e){a.push(e)}))}))},checkMaxSpan:function(e,t){e[t]=dsf.isNumber(e[t])?Number(e[t]):null,e[t]&&e[t]>24&&(e[t]=24),e[t]&&e[t]<0&&(e[t]=null)}}}}).call(this,n("2ef0"))},"49b2":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-question-formwrap ds-question-item"},[n("div",{staticClass:"example"},[n("el-form",{attrs:{"label-position":"top"}},[n("el-form-item",{attrs:{prop:"value",label:e.exampleLabel,rules:e.exampleRules}},[n("el-rate",{attrs:{max:e.form.starLength,"show-text":e.form.showText}})],1)],1)],1),n("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.rules,"label-width":"auto","label-position":"left"}},[n("el-row",{attrs:{gutter:15}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{prop:"questionBody","label-width":"0"}},[n("el-input",{attrs:{placeholder:"请输入题干"},model:{value:e.form.questionBody,callback:function(t){e.$set(e.form,"questionBody",t)},expression:"form.questionBody"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"starLength",label:"星星数量:"}},[n("el-input-number",{attrs:{min:1},model:{value:e.form.starLength,callback:function(t){e.$set(e.form,"starLength",t)},expression:"form.starLength"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"readOnly",label:"本题不允许填写:"}},[n("el-switch",{model:{value:e.form.readOnly,callback:function(t){e.$set(e.form,"readOnly",t)},expression:"form.readOnly"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"visible",label:"本题是否显示:"}},[n("el-switch",{model:{value:e.form.visible,callback:function(t){e.$set(e.form,"visible",t)},expression:"form.visible"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"required",label:"必填标识:"}},[n("el-switch",{model:{value:e.form.required,callback:function(t){e.$set(e.form,"required",t)},expression:"form.required"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"maxLength",label:"显示评分对应星级:"}},[n("el-switch",{model:{value:e.form.showText,callback:function(t){e.$set(e.form,"showText",t)},expression:"form.showText"}})],1)],1),n("el-col",{attrs:{span:24}},[n("div",{staticClass:"ljsz"},[n("span",{staticClass:"label"},[e._v("逻辑设置:")]),n("span",{staticClass:"btn",on:{click:e.showRela}},[e._v("题目关联")])])])],1)],1)],1)},i=[],o=(n("99af"),n("67b0")),s={mixins:[o["a"]],props:["owner"],data:function(){return{form:{questionBody:"请输入题干",starLength:5,readOnly:!1,visible:!0,required:!0,showText:!1},rules:{questionBody:[{required:!0,message:"请输入题干"}]}}},computed:{exampleLabel:function(){return"".concat(this.owner.questionIndex,".").concat(this.form.questionBody)},exampleRules:function(){return this.form.required?[{required:!0,trigger:"change"}]:null}},methods:{}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},"4baa":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"designer-left"},[n("div",{staticClass:"designer-left-tools"},[n("div",{staticClass:"title"},[n("span",[e._v(e._s(e.title))]),n("dsf-icon",{attrs:{name:"paixu"},on:{click:e.clickSort}})],1),n("el-tree",{ref:"leftTree",attrs:{data:e.list,props:e.leafProps,lazy:e.lazy,load:e.lazyLoad,"default-expand-all":!1,"expand-on-click-node":!1,"check-on-click-node":!0,"show-checkbox":e.openMultipleChoose,"filter-node-method":e.filterNode,"node-key":e.personIdAlias},on:{"node-expand":e.nodeExpand},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var a=t.data;return n("div",{staticClass:"my-tree-node",class:{draggable:a.draggable},attrs:{"data-id":a[e.leafProps.id]}},[e._v(" "+e._s(a[e.leafProps.label])+" ")])}}])})],1)])},i=[],o=n("72ba"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["a"]=l.exports},"4cc9":function(e,t,n){"use strict";n("09a4")},"4cea":function(e,t,n){"use strict";(function(e){n("4de4"),n("c740");var a=n("5530"),i=n("2f62"),o=n("154d"),s=n("5032"),r=n("76af"),l=n("d0f8"),c=n("e012");n("db0b");t["a"]={name:"TopTools",props:{backgroundImage:{type:Object,default:function(){return{url:"",width:0,height:0}}},canvasSet:{type:Object,default:function(){return{width:void 0,height:void 0}}},hasBg:{type:Boolean,default:!1},relativeList:{type:Array,default:function(){return[]}},seatObj:{type:Object,default:function(){return null}},relativeObj:{type:Object,default:function(){return{}}}},components:{widthInput:o["a"]},data:function(){return{normalButtons:[{text:"保存",icon:"baocun",handler:this.save},{text:"自动排座",icon:"zidongpipei",handler:this.autoSeat},{text:"清空排座",icon:"guanbi2",handler:this.clearSeat},{text:"自动补位",icon:"zhiding2",handler:this.emptySeatUtilize},{text:"底图复位",icon:"shuaxin",handler:this.restoreLayout},{text:"导出",icon:"yunduanxiazai",handler:this.exportImage}],layout:{buttons:[]}}},computed:Object(a["a"])({},Object(i["b"])("seatDesign",["compelPanelSize"])),watch:{},created:function(){this.layout.buttons=this.normalButtons,this.layoutConfig=new c["a"](c["d"])},methods:{save:function(){this.$emit("save")},restoreLayout:function(){var e={width:this.compelPanelSize.width,height:this.compelPanelSize.height,scale:1,left:0,top:0};this.$store.commit("seatDesign/changePanelSize",e)},autoSeat:function(){for(var e=!1,t=0;t<this.relativeList.length;t++){var n=this.relativeList[t];if(n.person&&2!==n.currentState.couldSeat){e=!0;break}}e?dsf.layer.confirm({title:"提醒",message:"该操作会清除当前所有已排人员重新排位，是否要继续?"}).then((function(){s["a"].emit(r["a"].AUTO_SEAT)})).catch((function(){})):s["a"].emit(r["a"].AUTO_SEAT)},clearSeat:function(){var e=this;dsf.layer.confirm({title:"提醒",message:"该操作将清除当前所有排座的信息,是否要继续?"}).then((function(){e.$emit("clear")})).catch((function(){}))},emptySeatUtilize:function(){for(var t,n=this,a=0;a<this.relativeList.length;a++){var i=this.relativeList[a];i.person&&(t=i.seatNum<t||!t?i.seatNum:t)}var o=[],s=[];for(var r in this.relativeObj){var c=this.relativeObj[r];r<t||2===c.currentState.couldSeat||(o.push(c),c.person&&s.push(c))}var u=this.relativeList.filter((function(e){var t=o.findIndex((function(t){return t.id===e.id}));return-1===t}));this.$emit("update:relativeList",u),this.$nextTick((function(){var a=0,i=0;while(i<s.length){var o,r,c=n.seatObj[t+a],u=s[i].person;if(2!==(null===(o=n.relativeObj[t+a])||void 0===o||null===(r=o.currentState)||void 0===r?void 0:r.couldSeat)){if(e.isFunction(n.layoutConfig.isSeatAble)){var d=n.layoutConfig.isSeatAble(c,u);if(!d){a++;continue}}n.relativeList.push(Object(l["f"])(c,u)),a++,i++}else a++}}))},exportImage:function(){}}}}).call(this,n("2ef0"))},"4e20":function(e,t,n){"use strict";(function(e,a){n("99af"),n("4de4"),n("7db0"),n("c740"),n("4160"),n("fb6a"),n("45fc"),n("4e82"),n("a434"),n("159b");var i=n("b85c"),o=n("5530"),s=n("cb54"),r=n("2f62"),l=n("5032"),c=n("76af"),u=n("e012"),d=n("d0f8");function h(e,t){var n=a(e.target);return t?n.hasClass("seat-box")?n:n.parents(".seat-box").eq(0):n.hasClass("member")?n:n.parents(".member").eq(0)}function p(){var t,n=this,a=this.mPersonIds;if((null===(t=this.chosenItems)||void 0===t?void 0:t.length)>0){var o=this.chosenItems.findIndex((function(e){return e.id===n.dropSeatObj.id}));if(-1===o)return void dsf.layer.confirm("您已选中了部分座位，只有将人员拖入选中的座位中，才能开始依序号排座");this.chosenItems.sort((function(e,t){return e.seatNum-t.seatNum}));var s,r=0,l={},c=Object(i["a"])(this.chosenItems);try{for(c.s();!(s=c.n()).done;){var u,h=s.value;if(2!==(null===h||void 0===h||null===(u=h.currentState)||void 0===u?void 0:u.couldSeat)){if(h.person)return void this.popConfirm();var p=this.personObj[a[r]];if(e.isFunction(this.layoutConfig.isSeatAble)){var m=this.layoutConfig.isSeatAble(h,p);if(!m)continue}if(l[h.id]={seat:h,person:p},r+=1,r===a.length)break}}}catch(err){c.e(err)}finally{c.f()}f.call(this,l)}else{for(var g=this.dropSeatObj.seatNum,_=0;_<a.length;_++){var b;if(null!==(b=this.relativeObj[g+_])&&void 0!==b&&b.person)return void this.popConfirm()}var v=0,y=0;while(y<a.length){var x,w=this.personObj[a[y]],k=this.relativeObj[g+v],S=this.seatObj[g+v];if(!S)return;if(2!==(null===k||void 0===k||null===(x=k.currentState)||void 0===x?void 0:x.couldSeat)){if(e.isFunction(this.layoutConfig.isSeatAble)){var D=this.layoutConfig.isSeatAble(S,w);if(!D){v++;continue}}k?(k.person=w,k.currentState=S.stateList[1]):this.relativeList.push(Object(d["f"])(S,w)),v++,y++}else v++}}}function f(e){for(var t in e){var n=e[t].seat,a=e[t].person;this.relativeList.push(Object(d["f"])(n,a))}for(var i=0;i<this.chosenItems.length;i++){var o=this.chosenItems[i];if(e[o.id]){var s=e[o.id].seat,r=e[o.id].person;o.currentState=s.stateList[1],o.person=r}}}function m(e){}function g(e){this.activeId!==e.id&&this.$store.commit("seatDesign/changeActiveId",e.id)}function _(t){var n;if(/^sec_/.test(t.type))n=dsf.url.getAbsolutePath(t.bgImg);else if(t.currentState){if(!t.currentState.img)return"none";n=dsf.url.getAbsolutePath(t.currentState.img)}else{var a=e.isArray(t.stateList)&&t.stateList[0]&&t.stateList[0].img;if(!a)return"none";n=dsf.url.getAbsolutePath(t.stateList[0].img)}return"center / contain no-repeat url(".concat(n,")")}t["a"]={name:"SeatItem",props:{keyStack:{type:Array,default:function(){return[]}},items:{type:Array,default:function(){return[]}},groups:{type:Array,default:function(){return[]}},seatObj:{type:Object,default:function(){return null}},relativeList:{type:Array,default:function(){return[]}},chosenItems:{type:Array,default:function(){return[]}},personObj:{type:Object,default:function(){return{}}},relativeObj:{type:Object,default:function(){return{}}}},data:function(){return{confirm:{visible:!1,msg:"",type:""}}},computed:Object(o["a"])(Object(o["a"])({},Object(r["b"])("seatDesign",{panelSize:"panelSize",activeId:"activeId"})),{},{myItems:function(){for(var t=e.cloneDeep(this.items),n=0;n<this.relativeList.length;n++)for(var a=0;a<t.length;a++){var i=this.relativeList[n],o=t[a];i.id===o.id&&Object.assign(o,i)}return t},myGroups:function(){for(var t=e.cloneDeep(this.groups),n=!1,a=0;a<this.relativeList.length;a++){n=!1;for(var i=0;i<t.length;i++){if(n)break;var o=this.relativeList[a],s=t[i];if(s.id===o.pid)for(var r=0;r<s.member.length;r++){var l=s.member[r];if(l.id===o.id){Object.assign(l,o),n=!0;break}}}}return t},personNameAlias:function(){return this.leftTreeConfig.leafProps.label},personIdAlias:function(){return this.leftTreeConfig.leafProps.id}}),watch:{"panelSize.scale":function(){this.items.forEach((function(e){e.isFrozenSty=!1})),this.groups.forEach((function(e){e.isFrozenSty=!1,e.isFrozenMemberSty=!1}))},chosenItems:function(e){a("i.anchor").remove(),a(".chosen").removeClass("chosen");var t={},n={};e.forEach((function(e){t[e.id]=e,e.ischosenRreference&&(n[e.id]=e)})),a(".member").each((function(){var e=a(this).data("id");t[e]&&a(this).addClass("chosen"),n[e]&&a(this).append("<i class='anchor'></i>")})),a(".seat-box").each((function(){var e=a(this).data("id");t[e]&&a(this).addClass("chosen")}))}},created:function(){this.layoutConfig=new u["a"](u["d"]),this.leftTreeConfig=new u["a"](u["c"])},beforeDestroy:function(){a(document).off("mouseup.scaleSeatItem"),a(document).off("mousemove.scaleSeatItem")},mounted:function(){var e=this;l["a"].on(c["a"].KEY_CTRL_D,(function(){})),l["a"].on(c["a"].KEY_DELETE,(function(){})),l["a"].listen(c["a"].BODY_EMPTY_CLICK,(function(){console.log("BODY_EMPTY_CLICK"),e.$emit("update:chosenItems",[])})),this.createInteraction()},methods:{mulChooseSeat:function(t,n,i){if(this.layoutConfig.openMultipleChoose){if(a(".seat-item-container .person-info").remove(),t.stopPropagation(),t.preventDefault(),"ctrl"!==this.keyStack[0]&&"shift"!==this.keyStack[0]){var o=this.chosenItems.findIndex((function(e){return e.id===n.id}));if(-1===o)return void l["a"].dispatch(c["a"].BODY_EMPTY_CLICK)}if(l["a"].emit(c["a"].LEFT_CLICK_SEAT),"ctrl"===this.keyStack[0]){var s=this.chosenItems.findIndex((function(e){return e.id===n.id}));-1!==s?(this.chosenItems.splice(s,1),n.ischosenRreference&&(n.ischosenRreference=!1)):this.chosenItems.push(n)}else if("shift"===this.keyStack[0])if(i){var r=this.chosenItems.filter((function(e){return e.parentId===i.id}));if(0===r.length)n.ischosenRreference=!0,this.chosenItems.push(n);else{var u=r.find((function(e){return e.ischosenRreference}));if(u){var d,h;i.member.some((function(e,t){if(d&&h)return!0;n.id===e.id&&(d=t),u.id===e.id&&(h=t)}));var p=this.chosenItems.filter((function(e){return e.parentId!==i.id}));if(d===h)n.ischosenRreference=!1,this.$emit("update:chosenItems",p);else{var f=d<h?i.member.slice(d,h+1):i.member.slice(h,d+1),m=p.concat(f);this.$emit("update:chosenItems",m)}}else{var g=e.differenceBy(this.chosenItems,r,"id");n.ischosenRreference=!0,g.push(n),this.$emit("update:chosenItems",g)}}}else this.$emit("update:chosenItems",[n])}},realSeatCss:function(e){return[{realSeat:!/^sec/.test(e.type)}]},getItemSty:function(e){var t={width:e.width*this.panelSize.scale+"px",height:e.height*this.panelSize.scale+"px",left:e.left*this.panelSize.scale+"px",top:e.top*this.panelSize.scale+"px",transform:"rotate(".concat(e.angle,"deg)")};return"group"!==e.type&&(t.background=_(e)),e.style=t,t},getMemberSty:function(e){var t={width:e.width*this.panelSize.scale+"px",height:e.height*this.panelSize.scale+"px",left:e.left*this.panelSize.scale+"px",top:e.top*this.panelSize.scale+"px"};return t.background=_(e),t},popMenu:function(e,t,n){if(!/^sec_/.test(t.type)&&3===e.which){var i="group"!==t.type?t:n,s=this.chosenItems.findIndex((function(e){return e.id===i.id}));-1===s&&l["a"].dispatch(c["a"].BODY_EMPTY_CLICK),a(".active").removeClass("active");var r=h(e,!n);a(r).addClass("active"),e.preventDefault(),e.stopPropagation();var u=dsf.math.convertLocalCoordinate(".seat-designer-page",{x:e.pageX,y:e.pageY});g.call(this,t),l["a"].emit(c["a"].SEAT_POP,{position:Object(o["a"])({},u),currentItem:i})}},createInteraction:function(){var e=this;s["a"].then((function(){e.$nextTick((function(){var t=e;a(".seat-item-container .realSeat").droppable({addClasses:!1,tolerance:"pointer",over:function(e,t){console.log("droppable over");var n=a(e.target);n.hasClass("realSeat")&&n.css({"box-shadow":"0 0 5px inset #409eff"})},drop:function(e,n){var i=a(e.target);if(i.css("box-shadow","none"),!n.helper.attr("empty-person")){if("group"===i.data("belong")){var o=t.myGroups.find((function(e){return e.id===i.data("pid")}));t.dropSeatObj=o.member.find((function(e){return e.id===i.data("id")}))}else t.dropSeatObj=t.myItems.find((function(e){return e.id===i.data("id")}));if(n.helper.attr("multiple-choose")){var s=[];n.helper.children("span").each((function(){s.push(a(this).data("id"))})),t.mPersonIds=s,p.call(t)}else{var r=n.helper.data("id");"tree"===this.layoutConfig.model?(t.mPersonid=r,m(t)):"list"===this.layoutConfig.model&&(t.mPersonIds=[r],p.call(t))}}},out:function(e,t){var n=a(e.target);n.css("box-shadow","none")}}),a(".seat-item-container").on("mouseenter","[exist-person]",(function(e){var t;if(!a(this).hasClass("chosen")&&!((null===(t=a(this).find(".person-info"))||void 0===t?void 0:t.length)>0)){var n=a(this).attr("data-person");a(this).append('<div class="person-info">'.concat(n," <i></i></div>"))}})),a(".seat-item-container").on("mouseleave","[exist-person]",(function(){a(this).find(".person-info").remove()}))}))}))},seatCover:function(){var t=this.dropSeatObj.seatNum,n=0,a=0;while(a<this.mPersonIds.length){var i=this.relativeObj[t+n],o=this.personObj[this.mPersonIds[a]],s=this.seatObj[t+n];if(!s)break;if(e.isFunction(this.layoutConfig.isSeatAble)){var r=this.layoutConfig.isSeatAble(s,o);if(!r){n++;continue}}if(i){if(2===i.currentState.couldSeat){n++;continue}i.person=o,i.currentState=s.stateList[1]}else this.relativeList.push(Object(d["f"])(s,o));n++,a++}this.confirm.visible=!1},seatInsert:function(){},seatCancel:function(){this.dropSeatObj=null,this.mPersonIds=null,this.mPersonid=null,this.confirm.visible=!1},popConfirm:function(e){this.confirm={visible:!0,msg:"检测到您需要入座的座位上已经存在其他人员，您希望如何处理？",type:"warning"}}}}}).call(this,n("2ef0"),n("1157"))},"4e77":function(e,t,n){"use strict";(function(e){n("4de4"),n("4160"),n("caad"),n("a15b"),n("d81d"),n("b0c0"),n("ac1f"),n("2532"),n("1276"),n("159b");var a=n("2d0f");t["a"]={name:"DesUploadFileAttr",mixins:[a["a"]],data:function(){return{tabsValue:"0",allowExtObj:{},fileExtArr:[],isLinkeMine:!0,extsSetting:{},fileType:"file",choosenExtsStr:""}},created:function(){this.tabsValue=this.owner.extsSetting.tabIndex||"0",this.getExtObj()},methods:{getExtObj:function(){var t=this;this.$http.get("./static/pd_other/uploadFileExt.json").done((function(n){t.allowExtObj=n,t.fileExtArr=n.file,e.map(t.fileExtArr,(function(n){if(t.owner.extsSetting.CheckedNameStr){var a=t.owner.extsSetting.CheckedNameStr;n.checkStatus=a.includes(n.itemKey)}else{var i=t.owner.extsSetting.extStr;i&&(n.checkType=e.map(n.children,(function(e){return i.includes(e.name)?e.title+"&"+e.value:""})),t.choosenExtsStr=e.filter(i.split(","),(function(e){return""!==e})).join(),t.isLinkeMine=t.owner.extsSetting.isLinkeMine,t.fileType=t.owner.extsSetting.fileType)}n.file={title:e.map(n.children,(function(e){return e.title})).join(),value:e.map(n.children,(function(e){return e.value})).join()}}))})).error((function(e){dsf.error(e)}))},handleFileType:function(e){this.fileType=e},handleCheckedChange:function(){var t="",n="",a="";if("1"==this.tabsValue){var i=e.filter(this.fileExtArr,(function(e){return e.checkType.length}));e.map(i,(function(t){e(t.checkType).forEach((function(e){n+=e.split("&")[0].substr(1)+",",a+=e.split("&")[1]+","}))})),this.choosenExtsStr=e.filter(n.split(","),(function(e){return""!==e})).join(),this.extsSetting={CheckedNameStr:t,extStr:n,mineStr:a}}else{var o=e.filter(this.fileExtArr,(function(e){return e.checkStatus}));e(o).forEach((function(e){t+=e.itemKey+",",n+=e.file.title+",",a+=e.file.value+","})),this.extsSetting={CheckedNameStr:t,extStr:n,mineStr:a}}},handleClick:function(e){this.tabsValue=e.index},yes:function(){return this.owner.extsSetting=Object.assign({},this.extsSetting,{fileType:this.fileType,isLinkeMine:this.isLinkeMine,tabIndex:this.tabsValue}),this.owner.extsSetting}}}}).call(this,n("2ef0"))},"4e8f":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100%"}},[n("el-main",{staticStyle:{padding:"0px",height:"100%",overflow:"hidden"}},[n("el-form",{ref:"form",attrs:{inline:!0,model:e.formData,"label-width":"100px"}}),n("el-tabs",{staticClass:"tabs",staticStyle:{height:"100%"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},["treeselect"!=e.item.model?n("el-tab-pane",{attrs:{label:"静态数据",name:"static"}},[n("div",{staticStyle:{height:"100%",overflow:"auto"}},[n("div",{staticStyle:{"margin-bottom":"5px",float:"right"}},[n("dsf-button",{attrs:{size:"small",icon:"hao"},on:{click:e.addRow}},[e._v("增加")]),n("dsf-button",{attrs:{size:"small",icon:"guanbi2",type:"plain"}},[e._v("清空")])],1),n("el-table",{attrs:{data:e.values.static,border:""}},[n("el-table-column",{attrs:{label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"选项文本"},model:{value:t.row.text,callback:function(n){e.$set(t.row,"text",n)},expression:"scope.row.text"}})]}}],null,!1,3042062022)}),n("el-table-column",{attrs:{label:"值"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"多个值用;分割"},model:{value:t.row.value,callback:function(n){e.$set(t.row,"value",n)},expression:"scope.row.value"}})]}}],null,!1,4185447808)}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("dsf-button",{attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"},on:{click:function(n){return n.stopPropagation(),e.remove(t.row)}}}),n("dsf-button",{attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"},on:{click:function(n){return n.stopPropagation(),e.up(t.row)}}}),n("dsf-button",{attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"},on:{click:function(n){return n.stopPropagation(),e.down(t.row)}}})]}}],null,!1,3903304481)})],1)],1)]):e._e(),"treeselect"!=e.item.model?n("el-tab-pane",{attrs:{label:"数据字典",name:"dict"}},[n("div",{staticStyle:{height:"100%"}},[n("DesDictDataSelect",{staticStyle:{height:"100%",overflow:"hidden"},model:{value:e.values.dict,callback:function(t){e.$set(e.values,"dict",t)},expression:"values.dict"}})],1)]):e._e(),"treeselect"!=e.item.model?n("el-tab-pane",{attrs:{label:"数据源",name:"dbsource"}},[n("div",{staticStyle:{height:"100%",overflow:"hidden"}},[n("DesDbDataSelect",{staticStyle:{height:"100%",overflow:"hidden"},model:{value:e.values.dbsource,callback:function(t){e.$set(e.values,"dbsource",t)},expression:"values.dbsource"}})],1)]):e._e(),n("el-tab-pane",{attrs:{label:"接口",name:"interface"}},[n("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入接口地址"},model:{value:e.values.interface,callback:function(t){e.$set(e.values,"interface",t)},expression:"values.interface"}})],1)],1)],1)],1)},i=[],o=n("d463"),s=o["a"],r=(n("382c"),n("2877")),l=Object(r["a"])(s,a,i,!1,null,"2ffb3c8a",null);t["default"]=l.exports},5032:function(e,t,n){"use strict";(function(e){n("4160"),n("4fad"),n("159b");var a=n("d4ec"),i=n("bee2"),o=function(){function t(){Object(a["a"])(this,t),this.events={}}return Object(i["a"])(t,[{key:"listen",value:function(t,n){if(void 0===this.events[t])this.events[t]=[n];else{var a=this.events[t];if(!e.isArray(a))return void console.log("请使用 on 来监听 ".concat(t," 事件"));a.push(n)}}},{key:"dispatch",value:function(t,n){var a=this.events[t];a?e.isArray(a)?a.forEach((function(e){e(n)})):console.log(t+"被on注册, 应使用emit触发"):console.log(t+"未使用listen 注册")}},{key:"on",value:function(t,n){void 0===this.events[t]?this.events[t]=n:e.isArray(this.events[t])?console.log("请使用 listen 来监听 ".concat(t," 事件")):console.log(t+" 监听器重名")}},{key:"emit",value:function(t,n){var a=this.events[t];a?e.isArray(a)?console.log(t+"被listen注册, 应使用dispatch触发"):a(n):console.log(t+"未使用on 注册")}},{key:"off",value:function(e){this.events[e]=void 0}},{key:"clear",value:function(){this.events={}}},{key:"$getAllListener",value:function(){return Object.entries(this.events)}}]),t}(),s=new o;window.$seatEventBus=s,t["a"]=s}).call(this,n("2ef0"))},51358:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DsfButton",{attrs:{type:"plain",icon:"shezhi"},on:{click:e.clickHandler}},[e._v("设置")])},i=[],o=n("dd01"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["a"]=l.exports},5196:function(e,t,n){"use strict";(function(e){n("7db0");var a=n("2d0f");t["a"]={name:"DesValueAttributes",mixins:[a["a"]],data:function(){return{tableData:[]}},mounted:function(){var t=this;if(this.owner){var n=dsf.mix(!0,[],this.owner.metadata.valueAttributes);e.each(n,(function(e){e.typeValue=e.type.value,dsf.isUnDef(e.encrypt)&&(e.encrypt=!1),dsf.isUnDef(e.pinyin)&&(e.pinyin=!1),t.tableData.push(e)}))}},methods:{getType:function(){return dsf.metadata.dataType},typeChange:function(t,n){t.type=e.find(dsf.metadata.dataType,(function(e){return e.value==n}))},yes:function(){var t=dsf.mix(!0,[],this.tableData),n=[];return e.each(t,(function(e){delete e.typeValue,n.push(e)})),n}}}}).call(this,n("2ef0"))},5272:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"control-filter-tree"},[n("dsf-tree-select",{attrs:{"tree-data":e.nodeList,loading:e.loading,theme:"theme1","node-key":"dsfa_rm_id","node-name":"name","search-control":"","default-expand-all":"",multiple:""},on:{"choose-node":function(t){e.checkNodeList=t}}})],1)},i=[],o=(n("c975"),n("b0c0"),n("d3b7"),n("2d0f")),s=n("b45c"),r={name:"DesControlSelect",components:{DsfTreeSelect:s["default"]},mixins:[o["a"]],data:function(){return{loading:!1,checkNodeList:[],nodeList:[]}},created:function(){this.getDesignCtrl()},methods:{filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},getDesignCtrl:function(){var e=this;this.loading=!0;var t="/rm/list/control";this.$http.get(t).done((function(t){t.success?e.nodeList=t.data:dsf.layer.message("控件组获取"+t.message,!1)})).error((function(e){dsf.layer.message(e.message,!1)})).finally((function(){e.loading=!1}))}}},l=r,c=n("2877"),u=Object(c["a"])(l,a,i,!1,null,null,null);t["default"]=u.exports},"531e":function(e,t,n){"use strict";(function(e){n.d(t,"d",(function(){return a})),n.d(t,"f",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"g",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"h",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"i",(function(){return h}));n("7db0"),n("4160"),n("3410"),n("159b");var a=function(e,t,n){return e.find((function(e){return(n?e[n]:e.id)===t}))},i=function(e,t){var n;return t.dataset&&t.dataset.id&&e.forEach((function(e){e.id===t.dataset.id&&(n=e)})),n},o=function(e,t,n){var a,i;return n.dataset&&n.dataset.parentId&&e.forEach((function(e){e.id===n.dataset.parentId&&(i=e,e[t].forEach((function(e){e.id===n.dataset.id&&(a=e)})))})),i&&a?{parent:i,sub:a}:void 0},s=function(t){return e(t).data("object")},r=10,l=function(e){var t={x:void 0==e.x?0:e.x,y:void 0==e.y?0:e.y};if(0!=t.x){var n=t.x%r;0!=n&&(t.x=n>r/2?t.x-n+r:t.x-n)}if(0!=t.y){var a=t.y%r;0!=a&&(t.y=a>r/2?t.y-a+r:t.y-a)}return t},c=function(e){var t=Object.getPrototypeOf(e);return Array.isArray(e)?Object.assign([],Object.create(t),e):Object.assign({},Object.create(t),e)},u=function(e){return"".concat(e,"px")},d=function(e){for(var t={},n=0;n<e.rows.length;n++){var a=e.rows[n];if(1==a.nodeLevel)t[a.nodeName]=a.value;else for(var i=t,o=0;o<a.nodeLevel;o++){var s=o+1,r=a["nodeName"+s];o<a.nodeLevel-1?(void 0===i[r]&&(i[r]={}),i=i[r]):void 0===i[r]&&(i[r]=a.value)}}return t},h=function(e){var t=e&&e.attributes.BaseInfo;return!(!t||0!==t.Mode||!t.SubWFID)}}).call(this,n("1157"))},"53b5":function(e,t,n){"use strict";n("8359")},"542a":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100%"}},[n("el-aside",{staticStyle:{width:"500px",overflow:"auto"}},[n("el-container",[n("el-header",{staticStyle:{padding:"0px 0px 10px 0px","text-align":"right",height:"auto"}},[n("DsfButton",{attrs:{size:"small",icon:"sousuofangda"},on:{click:e.openSysButtonSelect}},[e._v("增加系统按钮")]),n("DsfButton",{attrs:{size:"small",icon:"zidingyi"},on:{click:e.addCustomButton}},[e._v("新增自定义按钮")]),n("DsfButton",{attrs:{size:"small",icon:"Magnifier",type:"plain"},on:{click:e.openIcon}},[e._v("查看按钮图标")])],1),n("el-main",{staticStyle:{padding:"0px",height:"100%"}},[n("el-table",{attrs:{border:"","show-header":!0,data:e.tableData,"highlight-current-row":!0},on:{"row-click":e.rowClickHandler}},[n("el-table-column",{attrs:{label:"#",type:"index",align:"center"}}),n("el-table-column",{attrs:{label:"显示文字",prop:"text"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.text||t.row.title))]}}])}),n("el-table-column",{attrs:{label:"名称",prop:"caption"}}),n("el-table-column",{attrs:{label:"图标",prop:"text"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("DsfButton",{attrs:{"btn-style":"icon-text",size:"small",icon:e.getIcon(t.row.icon)}})]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("DsfButton",{attrs:{"btn-style":"icon-text",icon:"shanchu",size:"small",title:"删除"},on:{click:function(n){return e.removeButton(t.row)}}}),n("DsfButton",{attrs:{"btn-style":"icon-text",icon:"shang",size:"small",title:"上移"},on:{click:function(n){return e.up(t.row)}}}),n("DsfButton",{attrs:{"btn-style":"icon-text",icon:"xia",size:"small",title:"下移"},on:{click:function(n){return e.down(t.row)}}})]}}])})],1)],1)],1)],1),n("el-main",{staticStyle:{padding:"0px"}},[n("el-container",[n("el-main",[n("el-form",{attrs:{model:e.formModel,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{attrs:{disabled:""},model:{value:e.formModel.caption,callback:function(t){e.$set(e.formModel,"caption",t)},expression:"formModel.caption"}})],1),n("el-form-item",{attrs:{label:"别名"}},[n("el-input",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.alias,callback:function(t){e.$set(e.formModel,"alias",t)},expression:"formModel.alias"}})],1),n("el-form-item",{attrs:{label:"显示文字"}},[n("el-input",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.text,callback:function(t){e.$set(e.formModel,"text",t)},expression:"formModel.text"}})],1),n("el-form-item",{attrs:{label:"鼠标悬浮提示"}},[n("el-input",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.title,callback:function(t){e.$set(e.formModel,"title",t)},expression:"formModel.title"}})],1),n("el-form-item",{attrs:{label:"图标"}},[n("el-input",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.icon,callback:function(t){e.$set(e.formModel,"icon",t)},expression:"formModel.icon"}})],1),n("el-form-item",{attrs:{label:"系统按钮"}},[n("span",[e._v(e._s(e.formModel.isSystem?"是":"否"))])]),n("el-form-item",{attrs:{label:"动作"}},[n("el-input",{attrs:{disabled:!e.allowEdit()||e.formModel.isSystem},model:{value:e.formModel.actionName,callback:function(t){e.$set(e.formModel,"actionName",t)},expression:"formModel.actionName"}})],1),n("el-form-item",{attrs:{label:"风格"}},[n("el-select",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.btnStyle,callback:function(t){e.$set(e.formModel,"btnStyle",t)},expression:"formModel.btnStyle"}},[n("el-option",{attrs:{value:"",label:"普通按钮"}}),n("el-option",{attrs:{value:"icon-text",label:"图标按钮"}})],1)],1),n("el-form-item",{attrs:{label:"类型"}},[n("el-select",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.type,callback:function(t){e.$set(e.formModel,"type",t)},expression:"formModel.type"}},[n("el-option",{attrs:{value:"",label:"主要按钮"}}),n("el-option",{attrs:{value:"plain",label:"次要按钮"}})],1)],1),e.formModel.isTemplateDownload?n("el-form-item",{attrs:{label:"上传模板"}},[n("el-upload",{staticClass:"ds-button-update-template",attrs:{multiple:!1,headers:e.headersParam,action:e.setRequestUrl,"file-list":e.fileList,"on-success":e.handleSuccess,"on-error":e.handleError,"on-change":e.handleChange}},[n("DsfButton",{attrs:{size:"small"}},[e._v("模板上传")])],1)],1):e._e(),e.isUpBtn(e.formModel)?n("el-form-item",{attrs:{label:"是否是上传按钮"}},[n("el-switch",{attrs:{disabled:!e.allowEdit()},on:{change:e.uploadChange},model:{value:e.formModel.isUpload,callback:function(t){e.$set(e.formModel,"isUpload",t)},expression:"formModel.isUpload"}})],1):e._e(),n("el-form-item",{attrs:{label:"显示条件"}},[n("el-input",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.if,callback:function(t){e.$set(e.formModel,"if",t)},expression:"formModel.if"}}),n("span",{staticStyle:{color:"#f56c6c"}},[e._v("注：满足该条件时按钮显示")])],1),n("el-form-item",{attrs:{label:"禁用条件"}},[n("el-input",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.disabledFactor,callback:function(t){e.$set(e.formModel,"disabledFactor",t)},expression:"formModel.disabledFactor"}}),n("span",{staticStyle:{color:"#f56c6c"}},[e._v("注：满足该条件时按钮禁用")])],1),"system_flow_send"===e.formModel.actionName?n("el-form-item",{attrs:{label:"环节发送后事件"}},[n("el-input",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.flowSendOverEvent,callback:function(t){e.$set(e.formModel,"flowSendOverEvent",t)},expression:"formModel.flowSendOverEvent"}}),n("span",{staticStyle:{color:"#f56c6c"}},[e._v(" 注：此事件用于二次开发，设置此事件后，发送流程页面发送完结后不自动关闭 ")])],1):e._e(),"system_flow_send"===e.formModel.actionName||"system_batch_flow_send"===e.formModel.actionName?n("el-form-item",{attrs:{label:"文件已办结"}},[n("el-input",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.completed,callback:function(t){e.$set(e.formModel,"completed",t)},expression:"formModel.completed"}}),n("span",{staticStyle:{color:"#f56c6c"}},[e._v("注：默认为“文件已办结”")])],1):e._e(),"system_flow_send"===e.formModel.actionName||"system_batch_flow_send"===e.formModel.actionName?n("el-form-item",{attrs:{label:"分环节发送"}},[n("el-switch",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.isLinkSend,callback:function(t){e.$set(e.formModel,"isLinkSend",t)},expression:"formModel.isLinkSend"}})],1):e._e(),"system_flow_send"===e.formModel.actionName||"system_batch_flow_send"===e.formModel.actionName?n("el-form-item",{attrs:{label:"按钮折叠"}},[n("el-switch",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.isLinkSendFold,callback:function(t){e.$set(e.formModel,"isLinkSendFold",t)},expression:"formModel.isLinkSendFold"}})],1):e._e(),"system_flow_send"===e.formModel.actionName||"system_batch_flow_send"===e.formModel.actionName?n("el-form-item",{attrs:{label:"弹窗确认发送"}},[n("el-switch",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.secondConfirm,callback:function(t){e.$set(e.formModel,"secondConfirm",t)},expression:"formModel.secondConfirm"}})],1):e._e(),!e.formModel.secondConfirm||"system_flow_send"!==e.formModel.actionName&&"system_batch_flow_send"!==e.formModel.actionName?e._e():n("el-form-item",{attrs:{label:"弹窗确认提示语"}},[n("el-input",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.secondConfirmText,callback:function(t){e.$set(e.formModel,"secondConfirmText",t)},expression:"formModel.secondConfirmText"}}),n("span",{staticStyle:{color:"#f56c6c"}},[e._v("注：默认为“确认提交？”")])],1),e.isDblClickBind?n("el-form-item",{attrs:{label:"绑定列表双击"}},[n("el-switch",{attrs:{disabled:!e.allowEdit()},on:{change:e.dblClickChange},model:{value:e.formModel.isDblClick,callback:function(t){e.$set(e.formModel,"isDblClick",t)},expression:"formModel.isDblClick"}})],1):e._e(),e.isDblClickBind?n("el-form-item",{attrs:{label:"快捷链接"}},[n("el-select",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.linkBind,callback:function(t){e.$set(e.formModel,"linkBind",t)},expression:"formModel.linkBind"}},[n("el-option",{attrs:{label:"无",value:""}}),e._l(e.links,(function(e,t){return n("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],2)],1):e._e(),e._l(e.formModel.params,(function(t,a){return[n("el-form-item",{key:a,attrs:{label:"参数"+(a+1)}},[n("el-input",{attrs:{placeholder:t.desc+" 默认值:"+(t.default||"无"),disabled:!e.allowEdit()},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"param.value"}},[n("i",{staticClass:"iconfont icon-js",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix",title:"代码编辑"},on:{click:function(n){e.openEditor(t,!e.allowEdit())}},slot:"suffix"})])],1)]}))],2)],1)],1),n("el-dialog",{attrs:{title:"选择系统按钮",visible:e.sysButtonSelect,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.sysButtonSelect=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("dsf-button",{on:{click:e.addSysButton}},[e._v("确定")]),n("dsf-button",{attrs:{type:"plain"},on:{click:e.closeSysButtonSelect}},[e._v("取消")])]},proxy:!0}])},[[n("div",{staticStyle:{height:"500px",overflow:"auto"}},[n("el-tree",{ref:"tree",attrs:{data:e.treeData,props:e.defaultProps,"node-key":"key","default-checked-keys":[],"default-expand-all":"","show-checkbox":""}})],1)]],2)],1)],1)},i=[],o=n("6cbb"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["default"]=l.exports},"55c1":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"i",(function(){return h})),n.d(t,"h",(function(){return p}));n("a15b"),n("acd8"),n("ac1f"),n("1276");var a=n("452f"),i=n.n(a),o={vertical:"vertical",horizontal:"horizontal"},s={Left:"left",Right:"right",Top:"top",Bottom:"bottom",LeftTop:"leftTop",LeftBottom:"leftBottom",RightTop:"rightTop",RightBottom:"rightBottom"},r={vertical:"vertical",horizontal:"horizontal"},l={Left:"left",Right:"right",Top:"top",Bottom:"bottom"},c={width:40,height:44},u={width:200,height:124},d={width:500,height:304},h=7,p={uuid:function(e,t){var n,a,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=i,s=[];if(e=e||32,t=t||o.length,e)for(n=0;n<e;n++)s[n]=o[0|Math.random()*t];else for(s[8]=s[13]=s[18]=s[23]="",s[14]="4",n=0;n<36;n++)s[n]||(a=0|16*Math.random(),s[n]=o[19==n?3&a|8:a]);return s.join("")},laneTextRotate:function(e){e.css("transform","rotate(-90deg) translateX(-"+e.outerWidth()+"px)")},getNodeCenter:function(e){var t=e.point.x,n=e.point.y;return t+=e.width/2,n+=e.height/2,{x:t,y:n}},getNodeArriswiseAngle:function(e){var t={x:e.point.x,y:e.point.y},n={x:e.point.x+e.width,y:e.point.y+e.height},a=this.getAngle(t,n);return a},getNodeDirection:function(e,t){var n="",a=this.getNodeArriswiseAngle(e),i=this.getNodeCenter(e),o=t,s=this.getAngle({x:i.x,y:i.y},{x:o.x,y:o.y}),r=a;return n=0==s||s>=360-r||s<=r?l.Right:90==s||s>r&&s<=180-r?l.Bottom:270==s||s>180+r&&s<360-r?l.Top:l.Left,n},getDirection:function(e,t){var n="",a=this.getAngle({x:parseFloat(e.x),y:parseFloat(e.y)},{x:parseFloat(t.x),y:parseFloat(t.y)});return 0==a||360==a?n=s.Right:a>0&&a<90?n=s.RightBottom:90==a?n=s.Bottom:a>90&&a<180?n=s.LeftBottom:180==a?n=s.Left:a>180&&a<270?n=s.LeftTop:270==a?n=s.Top:a>270&&a<360&&(n=s.RightTop),n},getRadina:function(e,t,n){var a=Math.atan((t.y-e.y)/(t.x-e.x));return 0!=n&&(t.y-e.y>0&&t.x-e.x<0||t.y-e.y<0&&t.x-e.x<0?a+=Math.PI:t.y-e.y<0&&t.x-e.x>0&&(a+=2*Math.PI),t.x<e.x&&t.y==e.y?a=Math.PI:t.x==e.x&&t.y<e.y&&(a=1.5*Math.PI)),a},getAngle:function(e,t){var n=this.getRadina(e,t),a=180/(Math.PI/n);return a},angleToRadina:function(e){return e*Math.PI/180},getLineLength:function(e,t){var n=t.x-e.x,a=t.y-e.y,i=Math.sqrt(Math.pow(n,2)+Math.pow(a,2));return i},getNodeJoinPoint:function(e){var t=this.getNodeCenter(e),n={top:{x:t.x,y:t.y-e.height/2},bottom:{x:t.x,y:t.y+e.height/2},left:{x:t.x-e.width/2,y:t.y},right:{x:t.x+e.width/2,y:t.y}};return n},convertSegmentByPoint:function(e){for(var t=[],n=0;n<e.length;n++){var a=e[n],i=e[n+1];a&&i&&t.push({sp:a,ep:i})}return t},getLineType:function(e){return e.sp.y==e.ep.y?r.horizontal:e.sp.x==e.ep.x?r.vertical:void 0},segmentsIntr:function(e,t,n,a){var i=t.y-e.y,o=e.x-t.x,s=a.y-n.y,r=n.x-a.x,l=i*r-o*s;if(0==l)return!1;var c=s*n.x+r*n.y,u=s*e.x+r*e.y-c,d=s*t.x+r*t.y-c;if(u*d>=0)return!1;var h=i*e.x+o*e.y,p=i*n.x+o*n.y-h,f=i*a.x+o*a.y-h;if(p*f>=0)return!1;var m=u/l,g=m*o,_=-m*i;return{x:e.x+g,y:e.y+_}},drawArrow:function(e){var t=8,n=e.ep.x,a=e.ep.y,o=p.getAngle(e.sp,e.ep),s=i.a.rad(o-25),r=i.a.rad(o+25),l=n-Math.cos(s)*t,c=a-Math.sin(s)*t,u=n-Math.cos(r)*t,d=a-Math.sin(r)*t,h=["M",n,a,"L",l,c,"L",u,d,"Z"];return h}}},"5a7e":function(e,t,n){"use strict";(function(e,a){n("d81d"),n("b0c0"),n("d3b7"),n("e25e"),n("ac1f"),n("25f0"),n("5319"),n("4795");var i=n("5530"),o=n("5143");t["a"]={name:"ExamPage",components:{DsfExamFill:o["b"],DsfExamTrueFalse:o["e"],DsfExamRadioBox:o["c"],DsfExamCheckBox:o["a"],DsfExamSubjective:o["d"]},provide:function(){return{exam:this}},data:function(){return{pageWidth:1170,asideWidth:290,pageType:"exam",namespace:"",examLoading:!0,examTitle:{radio:"单选题",checkbox:"多选题",input:"填空题",judge:"判断题",subjective:"主观题",subjectiveTest:"选答题（请从以下3题中任选2题作答，3题都答得0分)"},examResult:{ys:35,isPass:"",examScore:null,statusValue:4},whether_pop:1,popClose:!1,confirmButtonText:"10s 后可确定",codeDisabled:!1,getAllowSubmit:!0,examTimer:null,isTiming:!0,countDown:0,getTime:null,u:"",e:"",a:"",answerId:"",examInfoData:{},examSubject:[],speedLength:0,componentIs:{radio:o["c"].name,checkbox:o["a"].name,judge:o["e"].name,input:o["b"].name,subjective:o["d"].name},form:{},examMarkActive:[]}},computed:{isDisabled:function(){return"确定"!==this.confirmButtonText}},watch:{form:{handler:function(e,t){console.log("数据变化",e,t)},deep:!0}},created:function(){this.u=dsf.url.queryString("u"),this.e=dsf.url.queryString("e"),this.a=dsf.url.hashString("a"),this.queryData()},mounted:function(){},methods:{queryData:function(){var t=this;this.$http.all([this.getExamInfo()]).then((function(n){n[0]&&!e.isEmpty(n[0])&&(t.examLoading=!1,t.examInfoData=n[0],t.namespace=t.examInfoData.namespace.replace(/\./g,"_"),t.examInfoData.questions&&t.examInfoData.questions.length>0&&(t.examInfoData=t.loadExamSubject(),t.createExamTimer()))}))},startExam:function(){var e=this;this.popClose=!0;var t=10,n=null;n=setInterval((function(){t--,0===t&&clearInterval(n),e.confirmButtonText=t>0?t+"s 后可确定":"确定"}),1e3)},considerations:function(){this.popClose=!1,this.isTiming=!0,console.log("开始考试",this)},getExamInfo:function(){this.examLoading=!0;this.u,this.e,this.a;return{data:{answerId:"35698343af444140a7be0372caa87374",data:{"exam_paper_00077.C001":"","exam_paper_00077.C010":{},"exam_paper_00077.exam_paper_00077_id":"35698343af444140a7be0372caa87374","exam_paper_00077.C008":"","exam_paper_00077.C009":{},"exam_paper_00077.C006":{},_id:"35698343af444140a7be0372caa87374","exam_paper_00077.C007":{},"exam_paper_00077.C004":{},"exam_paper_00077.C005":{},"exam_paper_00077.C002":"","exam_paper_00077.C003":{}},questions:[{score:{total:20,avg:10},subjects:[{difficulty:"1",column:"2",id:"C005",type:"radio",prompt:'党的<span style="color: rgb(255, 0, 0);">十八届四中全会</span>作出了全面推进依法治国的顶层设计，制定了路线图、施工图，在我国社会主义法治史上具有里程碑意义。来源：《习近平新时代中国特色社会主义思想学习纲要》（学习出版社、人民出版社2019年版）',items:[{id:"6b4a3f9f46f54f68ab07ccedeb89b1a6",text:"十一届三中全会",value:"A"},{id:"f0b8d62a944c4e6e8f0f2c849784e7d8",text:"十一届四中全会",value:"B"},{id:"2e9346e44e4949b98308aa429b724412",text:"十八届三中全会",value:"C"},{id:"7f27b92ac9a6441abe3723902fdfa345",text:"十八届四中全会",value:"D"}],content:"党的（）作出了全面推进依法治国的顶层设计，制定了路线图、施工图，在我国社会主义法治史上具有里程碑意义。来源：《习近平新时代中国特色社会主义思想学习纲要》（学习出版社、人民出版社2019年版）"},{difficulty:"1",column:"3",id:"C006",type:"radio",prompt:'加强和创新社会治理，关键在<span style="color: rgb(255, 0, 0);">体制</span>创新，核心是人。只有人与人和谐相处，社会才会安定有序。来源：《习近平新时代中国特色社会主义思想学习纲要》（学习出版社、人民出版社2019年版）',items:[{id:"f997c79a29914cbf89537e96d405e971",text:"体制",value:"A"},{id:"b6704199a4a44cb587efdb09c9f7e5a5",text:"手端",value:"B"},{id:"28442ab52acc42358865bc76d5f60ca0",text:"形式",value:"C"}],content:"加强和创新社会治理，关键在（）创新，核心是人。只有人与人和谐相处，社会才会安定有序。来源：《习近平新时代中国特色社会主义思想学习纲要》（学习出版社、人民出版社2019年版）"}],type:"radio"},{score:{total:20,avg:10},subjects:[{difficulty:"1",column:"2",id:"C003",type:"checkbox",prompt:'党的十八大以来，以习近平同志为核心的党中央顺应我国经济社会新发展和广大人民群众靳期待，提出了全面建成小康社会新的目标要求，赋予了“小康"更高的标准、更丰富的内涵。全面建成小康社会，意味着<span style="color: rgb(255, 0, 0);">经济高质量发展</span>、<span style="color: rgb(255, 0, 0);">人民生活水平和质量普遍提高</span>、<span style="color: rgb(255, 0, 0);">国民素质和社会文明程度显著提高</span>、<span style="color: rgb(255, 0, 0);">生态环境质量总体改善</span> 、各方面制度更加成熟更加定型。来源：《习近平新时代中国特色社会土义思想学习纲要》（学习出坂社、人民出版社2019年版）',items:[{id:"1d97874aee404792b4cbca739423b34c",text:"经济高质量发展",value:"A"},{id:"40d804f48cc24acd9e4e1a99d313a7f1",text:"人民生活水平和质量普遍提高",value:"B"},{id:"b5945db789fa471da4718426fb4f0ffc",text:"国民素质和社会文明程度显著提高",value:"C"},{id:"4ed1139bb540456aa77eb8d50436aac3",text:"生态环境质量总体改善",value:"D"}],content:'党的十八大以来，以习近平同志为核心的党中央顺应我国经济社会新发展和广大人民群众靳期待，提出了全面建成小康社会新的目标要求，赋予了“小康"更高的标准、更丰富的内涵。全面建成小康社会，意味着（）、（）、（）、（） 、各方面制度更加成熟更加定型。来源：《习近平新时代中国特色社会土义思想学习纲要》（学习出坂社、人民出版社2019年版）'},{difficulty:"1",column:"2",id:"C004",type:"checkbox",prompt:'传承和弘扬中华优秀传统文化，要认真汲取其中的思想精华和道德精髓。深入挖掘和阐发中华优秀传统文化讲仁爱、<span style="color: rgb(255, 0, 0);">重民本</span>、<span style="color: rgb(255, 0, 0);">守诚信</span>、<span style="color: rgb(255, 0, 0);">崇正义</span>、<span style="color: rgb(255, 0, 0);">尚和合</span>、求大同的时代价值，使之成为涵养社会主义核心价值观的重要源泉。来源：《习近平新时代中国特色社会主义思想学习纲要》（学习出版社、人民出版社2019年版）',items:[{id:"b051fe1ae8504bd58daee709e40a8bed",text:"重民本",value:"A"},{id:"136c64b551cf4b229e1cc9ff4b06b817",text:"守诚信",value:"B"},{id:"d413b539ab534bfe94c45ceb1f726044",text:"崇正义",value:"C"},{id:"be902546a59e4d4aae4d805b5501d7c4",text:"尚和合",value:"D"}],content:"传承和弘扬中华优秀传统文化，要认真汲取其中的思想精华和道德精髓。深入挖掘和阐发中华优秀传统文化讲仁爱、（）、（）、（）、（）、求大同的时代价值，使之成为涵养社会主义核心价值观的重要源泉。来源：《习近平新时代中国特色社会主义思想学习纲要》（学习出版社、人民出版社2019年版）"}],type:"checkbox"},{score:{total:20,avg:10},subjects:[{difficulty:"1",column:"2",id:"C009",type:"judge",prompt:"守初心，就是要牢记全心全意为人民服务的根本宗旨，以坚定的理想信念坚守初心，牢记人民对美好生活的向往就是我们的奋斗目标，时刻不忘我们党来自人民、根植人民，永远不能脱离群众、轻视群众、漠视群众疾苦",items:[{id:"ee0d6ed88bf348b9801d4ca398b6c849",text:"全心全意为人民服务、群众对美好生活的向往",value:"A"},{id:"78181d6091e7448ebcbb08db89723db3",text:"全心全意为群众服务、群众对美好未来的向往",value:"B"}],content:"守初心，就是要牢记（）的根本宗旨，以坚定的理想信念坚守初心，牢记（）就是我们的奋斗目标，时刻不忘我们党来自人民、根植人民，永远不能脱离群众、轻视群众、漠视群众疾苦。"},{difficulty:"1",column:"2",id:"C010",type:"judge",prompt:"思想政治受洗礼，重点是教育引导广大党员干部坚定对马克思主义的信仰、对中国特色社会主义的信念，传承红色基因，增强“四个意识”、坚定“四个自信”、做到“两个维护”，自觉在思想上政治上行动上同党中央保持高度一致，始终忠诚于党、忠诚于人民、忠诚于马克思主义。",items:[{id:"4f448c6184b847a0941a4b0a1471d3f6",text:"共产主义、社会主义、红色基因",value:"A"},{id:"c71201bd48a140f980023a6156c00bb1",text:"马克思主义、社会主义、红色文化",value:"B"}],content:"思想政治受洗礼，重点是教育引导广大党员干部坚定对（）的信仰、对（）的信念，传承（），增强“四个意识”、坚定“四个自信”、做到“两个维护”，自觉在思想上政治上行动上同党中央保持高度一致，始终忠诚于党、忠诚于人民、忠诚于马克思主义。"}],type:"judge"},{score:{total:20,avg:10},subjects:[{difficulty:"1",id:"C008",type:"input",prompt:'在我国政治生活中，党是领导一切的，坚持<span style="color: rgb(255, 0, 0);">党的领导</span>、人民当家作主、依法治国有机统一，最根本的是坚持<span style="color: rgb(255, 0, 0);">党的领导</span>。来源：《习近平新时代中国特色社会主义思想学习纲要》（学习出版社、人民出版社2019年版）',content:"在我国政治生活中，党是领导一切的，坚持党的领导、人民当家作主、依法治国有机统一，最根本的是坚持（）（）（）。来源：《习近平新时代中国特色社会主义思想学习纲要》（学习出版社、人民出版社2019年版）",fontNum:[4]},{difficulty:"1",id:"C007",type:"input",prompt:'2019年7月15日至16日，习近平总书记在内蒙古考察并指导开展"不忘初心、牢记使命"主题教育时指出，中华文明植根于<span style="color: rgb(255, 0, 0);">和而不同</span>的多民族文化沃土，历史悠久，是世界上唯一<span style="color: rgb(255, 0, 0);">没有中断</span>、发展至今的文明。',content:'2019年7月15日至16日，习近平总书记在内蒙古考察并指导开展"不忘初心、牢记使命"主题教育时指出，中华文明植根于（）的多民族文化沃土，历史悠久，是世界上唯一（）、发展至今的文明。',fontNum:[4,4]}],type:"input"},{score:{total:20,avg:10},subjects:[{difficulty:"1",id:"C001",type:"subjective",prompt:"<p>井冈山的道路发展的启示：</p>",content:"井冈山的道路发展的启示："},{difficulty:"1",id:"C002",type:"subjective",prompt:"<p>中国特色社会主义道路发展的启示：</p>",content:"中国特色社会主义道路发展的启示："}],type:"subjective"}],remark:"井冈山主题考试",pageName:"index",duration:5236,score:{total:100,pass:60},random:{item:"1",question:"1"},name:"井冈山试题考试",namespace:"exam.paper.00077",allowTime:0,id:"05cff26a6fd94096ba5200291524cf83",state:3},success:!0,state:2e4,message:"成功"}},loadExamSubject:function(){var t=this,n=this.examInfoData.random,a=e.map(this.examInfoData.questions,(function(a){t.speedLength+=a.subjects.length;var o=[],s=a.subjects.length>1&&"1"==n.question?Object(i["a"])(Object(i["a"])({},a),{},{subjects:e.shuffle(a.subjects)}):a;return"checkbox"==a.type||"radio"==a.type||"judge"==a.type?(o=e.map(s.subjects,(function(t){return Object(i["a"])(Object(i["a"])({},t),{},{items:e.shuffle(t.items)})})),Object(i["a"])(Object(i["a"])({},s),{},{subjects:o})):s}));return Object(i["a"])(Object(i["a"])({},this.examInfoData),{},{questions:a})},timeDown:function(e){if(!e)return"00:00:00";var t=e%86400,n=Math.floor(t/3600);t%=3600;var a=Math.floor(t/60),i=t%60;return n=((n||0)+100).toString().substr(1),a=((a||0)+100).toString().substr(1),i=((i||0)+100).toString().substr(1),n+":"+a+":"+i},createExamTimer:function(){var e=this,t=this.examInfoData.duration||0;this.examTimer=window.setInterval((function(){e.isTiming&&(t--,0===e.examInfoData.allowTime&&3===e.examInfoData.state?e.getAllowSubmit=!1:e.examInfoData.allowTime--,10===++e.countDown&&e.saveExamHold(),t<30&&t>1?dsf.layer.message("请注意考试时间还剩余"+t+"秒",!1):t<=0&&(t=0,window.clearInterval(e.examTimer),e.getAllowSubmit=!0,console.log("时间到，强制交卷")),e.getTime=e.timeDown(t),e.popClose&&(e.isTiming=!1))}),1e3)},saveExamHold:function(){var e={C005:{text:"错",value:"B"},C001:[{text:"对",value:"A"},{text:"错",value:"B"}],C002:{text:"错",value:"B"},C003:"中",C004:"gsgs唇形坧二上辰"};this.examInfoData.answerId,this.namespace;this.countDown=0},examPost:function(){var e=this;if(!this.getAllowSubmit&&0===this.examInfoData.allowTime&&3===this.examInfoData.state){this.isTiming=!1;var t="是否现在交卷?";dsf.layer.confirm({title:"提醒",message:t}).then((function(){e.formSave()})).catch((function(){e.isTiming=!0}))}},examParams:function(e){console.log("值",e)},formSave:function(){this.getAllowSubmit=!0,a(document).off("visibilitychange")},toScroll:function(e){var t=a('.ds-exam-content[exam-id="'.concat(e,'"]')).offset().top-10;a("html,body").animate({scrollTop:t},"slow")},bindWindowEvent:function(){var e=this;if(!this.examInfoData.answer){var t=0;a(document).on("visibilitychange",(function(){document.hidden&&"hidden"==document.visibilityState&&(t++,t>5?e.formSave():(dsf.layer.alert({title:"温馨提示",message:"考生跳出答卷页面次数不能超过5次，否则会保存并自动交卷，当前跳出次数为"+t+"次。",showClose:!1}),1===t&&(e.isTiming=!1)))}))}},minutesToSeconds:function(e){var t=new Date,n=new Date(t.getTime()+60*e*1e3),a=parseInt((n-t)/1e3);return a}}}}).call(this,n("2ef0"),n("1157"))},"5bce":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"summary"},[n("p",[n("span",[e._v("汇总比例：")]),n("el-input-number",{attrs:{"controls-position":"right",min:0,max:100},model:{value:e.config.Proportion,callback:function(t){e.$set(e.config,"Proportion",t)},expression:"config.Proportion"}}),n("span",[e._v("%")])],1),n("div",{staticClass:"table"},[n("SelectTable",{attrs:{data:e.nodesData,select:e.selectNodes,columns:e.columns},on:{"update:select":function(t){e.selectNodes=t}}})],1)])},i=[],o=(n("4160"),n("a15b"),n("d81d"),n("b0c0"),n("ac1f"),n("1276"),n("159b"),{name:"Summary",props:{lines:{type:Array,default:function(){return[]}},checked:{type:Object,default:function(){return{}}},value:{type:Object,default:function(){return{}}}},data:function(){return{config:{Proportion:0,GatherRange:""},nodesData:[],selectNodes:[],columns:[{selection:!0,type:"selection",width:50},{prop:"label",label:"连线名称",align:"left"}]}},created:function(){this.initTabel()},mounted:function(){},methods:{getContent:function(){return this.config.GatherRange=this.selectNodes.map((function(e){return e.value})).join(","),this.config},initTabel:function(){var e=this,t=this.value,n=t.GatherRange,a=t.Proportion,i=n&&n.split(",")||[];this.config.Proportion=a||0,this.selectNodes=[],this.nodesData=[];for(var o=function(t){var n=e.lines[t];if(n.id!=e.checked.id){var a={value:n.id,label:n.name};e.nodesData.push(a),i&&i.length>0&&i.forEach((function(t){t===n.id&&e.selectNodes.push(a)}))}},s=0;s<this.lines.length;s++)o(s)}}}),s=o,r=(n("280a"),n("2877")),l=Object(r["a"])(s,a,i,!1,null,"71ed2aff",null);t["default"]=l.exports},"5c26":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-question-formwrap"},[n("div",{staticClass:"example"},[n("el-form",{attrs:{"label-position":"top"}},[n("el-form-item",{attrs:{prop:"value",label:e.exampleLabel,rules:e.exampleRules}},[n("el-input",{attrs:{maxlength:e.form.maxLength,readonly:"",placeholder:"输入框效果展示",rows:5,type:e.isTextArea?"textarea":"text","show-word-limit":""}})],1)],1)],1),n("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.rules,"label-width":"auto","label-position":"left"}},[n("el-row",{attrs:{gutter:15}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{prop:"questionBody","label-width":"0"}},[n("el-input",{attrs:{placeholder:"请输入题干"},model:{value:e.form.questionBody,callback:function(t){e.$set(e.form,"questionBody",t)},expression:"form.questionBody"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"isTextArea",label:"使用多行文本框:"}},[n("el-switch",{model:{value:e.form.isTextArea,callback:function(t){e.$set(e.form,"isTextArea",t)},expression:"form.isTextArea"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"readOnly",label:"本题不允许填写:"}},[n("el-switch",{model:{value:e.form.readOnly,callback:function(t){e.$set(e.form,"readOnly",t)},expression:"form.readOnly"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"visible",label:"本题是否显示:"}},[n("el-switch",{model:{value:e.form.visible,callback:function(t){e.$set(e.form,"visible",t)},expression:"form.visible"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"required",label:"必填标识:"}},[n("el-switch",{model:{value:e.form.required,callback:function(t){e.$set(e.form,"required",t)},expression:"form.required"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"maxLength",label:"可输入字数最大限制:"}},[n("el-input-number",{attrs:{min:1,max:200},model:{value:e.form.maxLength,callback:function(t){e.$set(e.form,"maxLength",t)},expression:"form.maxLength"}})],1)],1),n("el-col",{attrs:{span:24}},[n("div",{staticClass:"ljsz"},[n("span",{staticClass:"label"},[e._v("逻辑设置:")]),n("span",{staticClass:"btn",on:{click:e.showRela}},[e._v("题目关联")])])])],1)],1)],1)},i=[],o=(n("99af"),n("67b0")),s={mixins:[o["a"]],props:["owner"],data:function(){return{form:{questionBody:"请输入题干",isTextArea:!1,readOnly:!1,visible:!0,maxLength:200,required:!0},rules:{questionBody:[{required:!0,message:"请输入题干"}]}}},computed:{isTextArea:function(){return this.form.isTextArea},exampleLabel:function(){return"".concat(this.owner.questionIndex,".").concat(this.form.questionBody)},exampleRules:function(){return this.form.required?[{required:!0,trigger:"change"}]:null}},methods:{}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},"5c40":function(e,t,n){"use strict";(function(e,a,i){n("99af"),n("a623"),n("4de4"),n("7db0"),n("c740"),n("4160"),n("c975"),n("a15b"),n("d81d"),n("a434"),n("b0c0"),n("ac1f"),n("1276"),n("498a"),n("159b"),n("4795"),n("96cf");var o=n("1da1"),s=n("0488"),r=n("3d15"),l=n("d172"),c=(n("d631"),n("cb54")),u=n("e601"),d=12,h=2;function p(){var e=this;a(".ds-tool-item").draggable({addClasses:!1,appendTo:".ds-designer",distance:10,revert:"invalid",cursor:"default",containment:"window",cursorAt:{left:-20,top:-20},helper:function(e){var t=a(e.currentTarget),n=t.get(0).__vue__.data,i=t.clone();return i.addClass("proxy"),i.data("data",{state:"add",attributes:n}),i},start:function(t){e.contextMenuClose(),dsf.designer.broadcast(e,"clearContextMemuHandler",t,null),dsf.designer.broadcast(e,"clearMouseDownHandler",t,null)},stop:function(){e.dragEnd()}})}function f(){var e=this;a(".designer-page").droppable({tolerance:"pointer",drop:function(t,n){var i=n.helper.data("data"),o=a(e.dragProxy_el),s=o.closest("[slot-name]"),r=s.attr("slot-name");if(r){var l=dsf.designer.getParentControl(o);l&&e.dropHandler(t,l,r,i)}e.dragEnd()},over:function(){a(".designer-page").on("mousemove.tooldrag",(function(t){e.dragMouseMoveHandler(t),t.preventDefault()}))},out:function(){e.dragEnd()}})}function m(e,t,n,i){var o=a(this.dragProxy_el).next(".designer-ctrl-proxy");1==this.dragProxy.show&&b.call(this,o.length?o:null,t,n,i)}function g(){a(".designer-page").off("mousemove.tooldrag"),a(this.dragProxy_el).appendTo(this.$el),this.dragProxy.show=!1}function _(t){var n=[],a=function e(t){t.forEach((function(t){t.children?e(t.children):n.push(t)}))};return a(t),e.uniqBy(n,"dsfa_rm_id")}function b(e,t,n,a){return v.apply(this,arguments)}function v(){return v=Object(o["a"])(regeneratorRuntime.mark((function t(n,a,o,s){var r,l,c,u,d,h,p,f,m,g,_,b=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=a._isVue?a:a.get(0).__vue__,l=r,c=null,u=null,n&&(d=n.get(0).__vue__,h=e.find(l.slots,(function(e){return e.name===o})),c=e.findIndex(h.controls,(function(e){return e===d.__context__.props}))),"add"!=s.state){t.next=55;break}if("control"!=s.attributes.type){t.next=10;break}u=N(s.attributes.data.code,{},this.mobile),u.metadata&&(u.metadata.level=0),u&&this.addControl(l,o,u,c),t.next=53;break;case 10:if("metadata"!=s.attributes.type){t.next=37;break}p=s.attributes.data,f=null,f=p.currentControl?p.currentControl.value:p.controls[0].value,f.indexOf("dsf.")<0&&(f="dsf."+f),u=N(f,{},this.mobile),u.metadata.id=p.id,u.metadata.at=p.at,u.metadata.code=p.code,u.metadata.name=p.name,u.metadata.defaultValue=p.defaultValue,u.metadata.controls=p.controls,u.metadata.dataSource=p.dataSource,u.metadata.type=p.type,u.metadata.order=p.order,u.metadata.isFromMetaData=!0,u.metadata.isuser=!1,u.metadata.currentControl=u.metadata.controls[0],u.metadata.level=0,u.metadata.valueAttributes=dsf.mix(!0,[],u.metadata.valueAttributes,p.valueAttributes),p.rmId&&(u.metadata.rmId=p.rmId),u.metadata.rm_type=s.attributes.group.type_value,u.caption=p.code,u.label=p.name,u&&this.addControl(l,o,u,c),t.next=53;break;case 37:if("business"!=s.attributes.type){t.next=44;break}m=s.attributes.data,g=JSON.parse(m.content),dsf.recursionComponentProps(g,(function(e){var t=dsf.createComponent(e.ctrlType,e);dsf.mix(e,t),e.designId=dsf.uuid(),e.isFormControl&&(e.isBusiness=!0)})),this.addControl(l,o,g,c),t.next=53;break;case 44:if("onlineControl"!=s.attributes.type){t.next=53;break}return t.next=47,dsf.importOnLineComponent(s.attributes.data.namespace);case 47:_=t.sent,i.component(_.name,_),u=N(s.attributes.data.code,{},this.mobile,!0),u.metadata&&(u.metadata.level=0),u&&this.addControl(l,o,u,c),dsf.array.ensure(this.online,{name:_.name,namespace:s.attributes.data.namespace},(function(e){return e.namespace==s.attributes.data.namespace}));case 53:t.next=57;break;case 55:s.component.$remove(),this.$nextTick((function(){s.attributes.metadata&&s.attributes.metadata.isuser&&delete s.attributes.metadata.isuser,b.addControl(l,o,s.attributes,c)}));case 57:case"end":return t.stop()}}),t,this)}))),v.apply(this,arguments)}function y(e,t,n,a,i,o){return x.apply(this,arguments)}function x(){return x=Object(o["a"])(regeneratorRuntime.mark((function e(t,n,a,i,o,s){var r,l,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t||"",l=n||"",c=a||"",u=dsf.designer.getLayoutPath(r,l,c,o,s),e.abrupt("return",this.$http.get(u,null,{responseType:"text"}));case 5:case"end":return e.stop()}}),e,this)}))),x.apply(this,arguments)}function w(e,t,n,a,i){return k.apply(this,arguments)}function k(){return k=Object(o["a"])(regeneratorRuntime.mark((function e(t,n,a,i,o){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=dsf.designer.getExtPath(t,n,a,i,o),e.abrupt("return",this.$http.get(s,null,{responseType:"text"}));case 2:case"end":return e.stop()}}),e,this)}))),k.apply(this,arguments)}function S(e,t,n,a){return D.apply(this,arguments)}function D(){return D=Object(o["a"])(regeneratorRuntime.mark((function e(t,n,a,i){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=dsf.designer.getPageDocumet(t,n,a,i),e.abrupt("return",this.$http.get(o,null,{responseType:"text"}));case 2:case"end":return e.stop()}}),e,this)}))),D.apply(this,arguments)}function C(){var e=this;try{var t=this.$refs.viewProxy.$$getComponent();dsf.designer.createViewMetaData(t,this.mobile),this.$nextTick((function(){var n=dsf.designer.getLayoutInfo(t,!0);n=dsf.designer.controlToJson(n);var a="/",i='<script type="text/template" id="layout">\n'.concat(n,"\n<").concat(a,"script>");dsf.storage.session.set("layoutContent",i),window.open("./designer.html#"+(e.mobile?"/mobile":"/pc")+"/preview")}))}catch(a){var n="出现了未知的错误";"string"==dsf.type(a)?n=a:dsf.error(a),dsf.layer.pc.message(n,!1)}}function N(e,t,n){var a=n?dsf.designer.createMobileComponent:dsf.designer.createComponent,i=dsf.mix(t,{designProxy:!0});return a(e,i)}function T(t){var n=e.map(t,(function(e){return e.id}));return this.$webAPI.getComponents(n).then((function(e){var t=e.data;return t}))}function L(e){for(var t=[],n=0;n<e.length;n++)"3"==e[n].type?t.push(this.$http.get("/rm/list/meta",{namespace:e[n].id})):"8"==e[n].type&&t.push(this.$http.get("/dbsource/rmId",{rmId:e[n].id}));return this.$http.all(t)}function O(t){var n=e.map(t,(function(e){return e.id}));return this.$webAPI.getBusinessComponets(n)}function I(t){var n=this,a=8==t.type_value?t.dsfa_rm_id:t.ID,i={id:a,title:t.name,type:t.type_value,items:[]};e.each(t.metadata,(function(e){var n={type:"metadata",name:e.name,data:e,group:t,id:e.id};8==t.type_value&&(n.rmId=t.dsfa_rm_id),i.items.push(n)}));var o=e.findIndex(this.useMetaGroup.groups,(function(e){return e.id==i.id}));o<0?this.useMetaGroup.groups.push(i):this.useMetaGroup.groups[o].items=i.items,this.$nextTick((function(){n.initToolDrag()}))}function $(t){var n=this,a={id:t.rmId,title:t.name,type:d,items:[]};e.each(t.bcList,(function(e){var n={type:"business",name:e.name,data:e,group:t,id:e.id};a.items.push(n)}));var i=e.findIndex(this.useBusinessControlGroup.groups,(function(e){return e.id==a.id}));i<0?this.useBusinessControlGroup.groups.push(a):this.useBusinessControlGroup.groups[i].items=a.items,this.$nextTick((function(){n.initToolDrag()}))}function E(t){for(var n=this,a={id:t.rmId,title:t.name,type:h,items:[]},i=0;i<t.controlList.length;i++){var o=t.controlList[i];if(!this.mobile||1==o.isMobile){var s={type:"control",name:o.name,data:o,group:t,id:o.id};a.items.push(s)}}var r=e.findIndex(this.useControlsGroup.groups,(function(e){return e.id==a.id}));r<0?this.useControlsGroup.groups.push(a):this.useControlsGroup.groups[r].items=a.items,this.$nextTick((function(){n.initToolDrag()}))}t["a"]={name:"DsfDesigner",components:{DsfDesignerButtons:u["a"],dragItem:r["a"],pageDoc:l["a"]},provide:function(){return{$designer:this}},props:{business:{type:String,default:""},module:{type:String,default:""},pageName:{type:String,default:""},pageTitle:{type:String,default:""},mobile:{type:Boolean,default:!1},tpl:{type:Boolean,default:!1}},data:function(){return{jquuiLoaded:!1,loading:!0,firstOpen:!0,saved:!1,mousedown:{target:null},design:!0,buttons:[{text:"保存",id:"save",icon:"baocun",handler:this.saveLayout,setting:!0,roles:[]},{text:"暂存",id:"stagesave",icon:"baocun",handler:this.stageSaveLayout,setting:!1,roles:[]},{text:"预览",id:"preview",icon:"icon_yulan",handler:this.preView,setting:!1,roles:[]},{text:"模板选择",id:"tpl",icon:"shebeikaifa1",handler:this.useTpl,setting:!0,roles:[]},{text:"控件组选择",id:"ctrl",icon:"icon_shezhi",handler:this.selectComponents,setting:!0,roles:[]},{text:"元数据选择",id:"meta",icon:"icon_shezhi",handler:this.selectMateGroup,setting:!0,roles:[]},{text:"保存业务组件",id:"bctrl",icon:"biaodanzujian-xialakuang",handler:this.saveBusinessComponent,setting:!0,saved:!0,roles:[]},{text:"二次开发",id:"js",icon:"shebeikaifa1",handler:this.openDevelopment,setting:!1,roles:[],saved:!0},{text:"页面文档",id:"desc",icon:"DOC",handler:this.openPageDoc,setting:!0,roles:[]}],templateButtons:[{text:"保存模板",icon:"baocun",handler:this.saveLayoutToTemplate,setting:!1,roles:[],show:function(){return!0}},{text:"预览",icon:"icon_yulan",handler:this.preView,setting:!1,roles:[],show:function(){return!0}},{text:"模板选择",icon:"shebeikaifa1",handler:this.useTpl,setting:!0,roles:[],show:function(){return!0}},{text:"控件组选择",icon:"icon_shezhi",handler:this.selectComponents,setting:!0,roles:[],show:function(){return!0}},{text:"功能授权",icon:"jiaohuan",handler:this.settingFunction,setting:!1,roles:[],show:function(){return!0}}],layout:{toolsBox:{activeName:"controls",tabs:[{name:"controls",label:"基础组件"},{name:"business",label:"业务组件"},{name:"metadata",label:"元数据"}]}},page:null,tools:{activeName:"",groups:[]},useControlsGroup:{activeName:"",groups:[]},useMetaGroup:{activeName:"",groups:[]},useBusinessControlGroup:{activeName:"",groups:[]},dragProxy:{show:!1},attributesGroup:[],attributesOwner:{},subTree:[],controls:{},dragMouseMoveTarget:null,contextMenu:{show:!0,items:[],pos:{x:-10,y:-10},target:null},extJsCode:s["a"],extCssCode:"",extScssCode:"",fromTemplateId:"",desButtons:{},currentUserRoles:{},buttonLoad:!1,leftSearchStr:"",leftSearchInput:"",cacheFlow:{},pageDocument:""}},computed:{dragProxy_el:function(){return this.$refs.dragProxy}},created:function(){},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:c["a"].then(Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.jquuiLoaded=!0,e.loading=!0,e.$nextTick(Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.init(),t.next=4,e.getCurrentUserRoles();case 4:return e.currentUserRoles=t.sent,t.next=7,e.loadLayout();case 7:return t.next=9,e.getFunctionSetting();case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),dsf.httpError(t.t0,{message:"设计器加载失败"});case 14:return t.prev=14,e.loading=!1,e.buttonLoad=!0,t.finish(14);case 18:case"end":return t.stop()}}),t,null,[[0,11,14,18]])}))));case 3:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})))()},updated:function(){},methods:{showButton:function(t){var n=this;if(t.saved&&!this.saved)return!1;if(!t.setting)return!0;if(this.currentUserRoles["SUPER_ADMIN"])return!0;if(this.fromTemplateId){var a=this.desButtons[t.id];if(a){var i=!1;return e.every(a,(function(e){return i=n.hasRole(e),!i})),i}return!1}return!0},hasRole:function(e){var t=this.currentUserRoles[e];return!!t},dragEnd:function(){g.call(this)},init:function(){this.initToolDrag(),this.initDrop()},settingFunction:function(){var t=this;this.$openDialog({title:"功能授权",content:"DesFunctionSetting",width:"1000px",height:"60vh",params:{buttons:e.filter(this.buttons,(function(e){return e.setting}))},btns:[{text:"确定",handler:function(n){var a=n.yes();a&&e.each(a,(function(n){var a=e.filter(t.buttons,(function(e){return e.id==n.id}));a=a.length>0?a[0]:null,a&&(a.roles=n.roles)}))}},{text:"取消"}]})},initToolDrag:function(){p.call(this)},initDrop:function(){f.call(this)},dragMouseMoveHandler:function(e){var t=a(e.target),n=null;if(!t.hasClass("drag-proxy"))if(t.is("[slot-name]")){var i=dsf.designer.isAllowDrop(t,this);if(i){n=t,this.dragProxy.show=!0;var o=a(this.dragProxy_el);n.append(o)}}else{var s=t.closest(".designer-ctrl-proxy");if(s&&s.length>0){if(!t.hasClass("designer-mask")&&!t.hasClass("ds-control")||t.hasClass("ds-no-drop"))return;var r=dsf.designer.getComponent(s.get(0).__vue__,this);if(r){r.$$getComponent&&(r=r.$$getComponent()),n=s.closest("[slot-name]");var l=dsf.designer.isAllowDrop(n,this);if(l){var c=t.height(),u=a(this.dragProxy_el);this.dragProxy.show=!0,e.offsetY<c/2?s.before(u):s.after(u)}}}}},dropHandler:function(e,t,n,a){m.call(this,e,t,n,a)},addControl:function(t,n,i,o){if(i.designId||(i.designId=dsf.uuid()),!i.caption){var s=i.ctrlType.split(".");i.caption=s[s.length-1].toLowerCase()+this.$refs.viewProxy.getSerial()}if(t.$$getComponent)t=t.$children[0];else while(!t.slots)t=t.$parent;if(t.$el){var r=t.$el.matches(".ds-subtable-cell-content"),l=t.$el.matches(".ds-datagrid-cell-content");i.isFormControl&&(r?(i.showLabel=!1,i.simple=!0,i.lrNoPadding=!0):l?(i.showLabel=!1,i.simple=!1,i.lrNoPadding=!0):(i.simple=!1,i.lrNoPadding=!1))}var c=e.findIndex(t.slots,(function(e){return e.name==n}));if(c>=0){var u=t.slots[c];u&&u.textProxy&&dsf.hasOwn(i,"textProxy")&&(i.textProxy=!0,i.showLabel=!1),dsf.isUnDef(o)||o<0?u.controls.push(i):u.controls.splice(o,0,i),i.isQuestionControl&&this.setQuestionIndex(i,u.controls,o)}i.isQuestionControl&&(this.$questionComponentTemp||(this.$questionComponentTemp={}),setTimeout((function(){a("[des-id=".concat(i.designId,"]")).trigger("click")}),0))},setQuestionIndex:function(t,n,a){if(dsf.isUnDef(a)||a<0)this.setPrevQuestionIndex(t,n);else{var i=0;e.forEach(n,(function(e,t){e.isQuestionControl&&e.hasQuestionIndex&&e.visible&&(i++,e.questionIndex=i)}))}},setPrevQuestionIndex:function(t,n){var a=0;e.find(n,(function(e){if(e.isQuestionControl&&e.hasQuestionIndex&&e.visible&&(a++,e.questionIndex=a),e.designId==t.designId)return!0}))},setNextQuestionIndex:function(t,n){e.forEach(n,(function(e){e.hasQuestionIndex&&e.visible&&(e.questionIndex=t,t++)}))},selectedComponent:function(e){var t=this;window.setTimeout((function(){t.contextMenuClose();var n=a(e.target),i=n.closest(".designer-ctrl-proxy");if(i.length){var o=i.get(0).__vue__,s=a(".designer-ctrl-proxy");s.each((function(e,t){var n=t.__vue__;n&&(n.__desContext__.selected=!1)})),o&&(o.isView||(o.__desContext__.selected=!0)),t.$http.get("$/pd_attributes/"+o.ctrlType+".json").done((function(e){e.forEach((function(e){return e.attributes.forEach((function(e){t.format(e,o)}))})),t.attributesGroup=e||[],t.attributesOwner=o,o.isQuestionControl&&t.$questionComponentTemp&&!t.$questionComponentTemp[o.designId]&&(t.$questionComponentTemp[o.designId]=!0,setTimeout((function(){t.$bus.$emit("questionSetting")}),200))})).error((function(e){t.attributesGroup=[],t.attributesOwner=o,dsf.error(e)}))}}),0),e.preventDefault(),e.stopPropagation()},format:function(e,t){var n=this;e.dictionaryControl&&e.dictionary&&0===e.dictionary.length&&(e.dictionary=[],dsf.recursionComponentProps(t.$$getComponent().$page.$props,(function(t){t.isFormControl&&"wfinfo"!==t.caption&&"DsfDisposeIdea"!==t.ctrlName&&"DsfMobileDisposeIdea"!==t.ctrlName&&"DsfFormCommentBox"!==t.ctrlName&&("oldFlow"in e||e.dictionary.push({id:t.designId,text:"".concat(t.label,"(").concat(t.caption,")"),value:t.caption})),"wfinfo"===t.caption&&"oldFlow"in e&&(n.cacheFlow.WFID!==t.chooseFlow.dsfa_rm_id?n.$http.get("wfk/getWFNodeList",{sID:t.chooseFlow.dsfa_rm_id}).then((function(t){t.data.success&&(t.data.data&&t.data.data.NodeList&&t.data.data.NodeList.forEach((function(t){e.dictionary.push({id:t.NodeID,text:t.NodeName,value:t.NodeID})})),n.cacheFlow=t.data.data)})):n.cacheFlow.NodeList.forEach((function(t){e.dictionary.push({id:t.NodeID,text:t.NodeName,value:t.NodeID})})))})))},contextMenuOpen:function(e){var t=this,n=dsf.designer.getComponentByTarget(e.target);if(n){dsf.designer.broadcast(this,"clearContextMemuHandler",e,null,n);do{var i=n?n.$options:{},o=i.design?i.design.contextMenuHandler:null;if(o)break;n=n.$parent}while(n!=this.$root);var s=n.$options,r=n.$options.design?n.$options.design.contextMenuHandler:null;if(r){this.contextMenuClose();var l=s.design.contextMenuHandler.call(n,e,this);l&&l.length>0&&(this.$nextTick((function(){t.contextMenu.items=l,t.contextMenu.show=!0,t.contextMenu.target=n,t.$nextTick((function(){var n=t.$refs.contextmenu;n&&document.getElementById("app").appendChild(n),n&&n.childNodes[0]&&(n=n.childNodes[0],t.contextMenu.pos.x=e.pageX,t.contextMenu.pos.y=e.pageY,t.contextMenu.pos.y+n.offsetHeight>t.$refs.designerPanel.offsetHeight&&(t.contextMenu.pos.y=e.pageY-n.offsetHeight))}))})),a(document).one("click",this.contextMenuClose)),e.stopPropagation(),e.preventDefault()}}},contextMenuClose:function(){this.contextMenu.items=[],this.contextMenu.show=!1,this.contextMenu.target=null},contextMenuItemClick:function(e,t){e.disabled?(t.preventDefault(),t.stopPropagation()):e.handler.call(this.contextMenu.target,e)},mouseDownHanlder:function(e){try{if(0!=e.button)return;var t=dsf.designer.getComponentByTarget(e.target);if(!t)return;dsf.designer.broadcast(this,"clearMouseDownHandler",e,null,t),this.mousedown.target=t;var n=t?t.$options:{};n.design.mouseDownHandler&&n.design.mouseDownHandler.call(t,e,this)}catch(i){dsf.error(i)}finally{a(document).one("mouseup",this.mouseUpHandler)}},mouseMoveHanlder:function(e){try{if(this.mousedown.target){var t=this.mousedown.target.$options||{};t.design.mouseMoveHandler&&t.design.mouseMoveHandler.call(this.mousedown.target,e,this)}}catch(n){dsf.error(n)}},mouseUpHandler:function(e){try{if(this.mousedown.target){var t=this.mousedown.target.$options||{};t.design.mouseUpHandler&&t.design.mouseUpHandler.call(this.mousedown.target,e,this)}}catch(n){dsf.error(n)}finally{this.mousedown.target=null}},openDevelopment:function(){var e=this,t=this.$refs.viewProxy;dsf.designer.createViewMetaData(t,this.mobile),this.$nextTick((function(){var n=dsf.designer.getLayoutInfo(t),a=dsf.designer.convertTemplateAndControlData(n),i=dsf.beautify.html(a.tpl);dsf.layer.pc.openDialog({title:"二次开发",fullscreen:!0,overflow:"hidden",content:"Development",params:{extCode:e.extJsCode||"",css:e.extScssCode||"",vueTemplate:i||""},btns:[{text:"保存并提交",handler:function(t){var n=t.yes();return e.extJsCode=n.extCode,e.extScssCode=n.css,e.saveLayout(),!1}},{text:"保存不提交",handler:function(t){var n=t.yes();e.extJsCode=n.extCode,e.extScssCode=n.css}},{text:"关闭"}]})}))},openPageDoc:function(){this.$bus.$emit("showComponentDoc",{id:null})},loadEmptyDesigner:function(e,t){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e=e||"dsf.page",n.page=N(e,t,n.mobile),n.loadControlGrooup.call([]);case 3:case"end":return a.stop()}}),a)})))()},loadLayout:function(e,t,n){var i=this;return Object(o["a"])(regeneratorRuntime.mark((function o(){var s,r,l,c,u,d,h,p,f,m,g,_,b,v,x,k,D,C,T,L,O,I,$;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(i,s=e||i.business,r=t||i.module,l=n||i.pageName,c=i.pageTitle,u=i.mobile?"dsf.mobile.page":"dsf.page",d={caption:"page",name:l,title:c,context:{B:s,M:r}},!(s&&r&&l)){o.next=44;break}return h=null,p=null,null,f=null,o.prev=9,o.next=12,y.call(i,s,r,l,c,i.mobile,i.tpl);case 12:if(m=o.sent,g=a("<div>"+m.data+"</div>"),_=g.children("script[id='layout']").html()||"",b=g.children("script[id='scss']").html()||"",v=g.children("script[id='designer']").html()||"",g.children("script[id='onLineComponents']").html()||"",x=new Function(["var layout="+(_||"null")+";","return layout;"].join("\n")),k=new Function(["return "+JSON.stringify(b.trim()||"")].join("\n")),D=new Function(["return "+(v||"{}").trim()].join("\n")),h=dsf.fillComponentDefaultProps(x()),p=k(),f=D(),i.tpl){o.next=34;break}return o.next=27,w.call(i,s,r,l,i.mobile,i.tpl);case 27:return C=o.sent,T=C.data,i.extJsCode=T,o.next=32,S.call(i,s,r,l,i.mobile);case 32:L=o.sent,i.pageDocument=L;case 34:o.next=39;break;case 36:o.prev=36,o.t0=o["catch"](9),dsf.error(o.t0);case 39:return o.prev=39,h?(i.page=N(u,h,i.mobile),i.extScssCode=p||"",O=dsf.isEmptyObject(f.controlGroup)||!f.controlGroup?[]:f.controlGroup,i.loadControlGrooup(O),I=f.metadataGroup||[],i.loadMetaDataGroup(I),$=f.businessControlGroup||[],i.loadBusinessComponetGroup($),i.fromTemplateId=f.fromTemplateId||"",i.firstOpen=!1,i.saved=!0):(i.loadEmptyDesigner(u,d,[]),i.fromTemplateId="",i.firstOpen=!0,i.saved=!1,i.tpl||i.useTpl(!1,!1,!1)),o.finish(39);case 42:o.next=48;break;case 44:i.loadEmptyDesigner(u,d,[]),i.fromTemplateId="",i.firstOpen=!0,i.saved=!1;case 48:case"end":return o.stop()}}),o,null,[[9,36,39,42]])})))()},loadMetaDataGroup:function(t){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t=e.uniqBy(t,(function(e){return e.id})),a.next=4,L.call(n,t);case 4:i=a.sent,e.each(i,(function(a){var i=a.data;i=e.filter(i||[],(function(n){return 3==n.type_value?e.map(t,"id").indexOf(n.ID)>=0:e.map(t,"id").indexOf(n.dsfa_rm_id)>=0})),e.each(i,(function(e){I.call(n,e)}))})),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),dsf.httpError(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()},loadControlGrooup:function(t){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t=e.uniqBy(t,(function(e){return e.id})),a.next=4,T.call(n,t);case 4:i=a.sent,e.each(i,(function(e){E.call(n,e)})),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),dsf.httpError(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()},loadBusinessComponetGroup:function(t){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,t=e.uniqBy(t,(function(e){return e.id})),i=[],!(t.length>0)){a.next=9;break}return a.next=6,O.call(n,t);case 6:i=a.sent,a.next=10;break;case 9:i=[];case 10:e.each(i.data,(function(e){$.call(n,e)})),a.next=16;break;case 13:a.prev=13,a.t0=a["catch"](0),dsf.error(a.t0);case 16:case"end":return a.stop()}}),a,null,[[0,13]])})))()},getFunctionSetting:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if({},n="",n=e.tpl?(e.page.context.B||"")+"."+(e.page.context.M||"")+"."+e.page.name:e.fromTemplateId,!n){t.next=7;break}return t.next=6,e.setDesButtons(n);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))()},getCurrentUserRoles:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$webAPI.getCurrentUserRoles();case 2:return a=n.sent,n.abrupt("return",e.keyBy(a.data,"serialNumber"));case 4:case"end":return n.stop()}}),n)})))()},setDesButtons:function(t){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,n.$webAPI.getDesignerButtons({templateId:t});case 2:i=a.sent,i.data&&(o=i.data.button?JSON.parse(i.data.button):[],s={},e.each(o,(function(t,a){s[t.id]=e.map(t.roles,"serial_number");var i=e.find(n.buttons,(function(e){return e.id==t.id}));i&&(i.roles=t.roles)})),n.desButtons=s);case 4:case"end":return a.stop()}}),a)})))()},pushToControls:function(e){this.controls[e.designId]=e},saveLayout:function(){var e=dsf.designer.saveLayoutValidate(this.$refs.viewProxy);!1!==e&&dsf.designer.saveLayout(this)},saveLayoutToTemplate:function(){dsf.designer.saveLayoutToTemplate(this)},preView:function(){C.call(this)},saveBusinessComponent:function(){var t=this;this.$openDialog({title:"组件选择",width:"1000px",height:"50vh",params:{designer:this},content:"DesComponents",btns:[{text:"确定",handler:function(n){var a=n.validate();if(!1===a)return!1;var i=n.yes();i.length&&(e.each(i,(function(e){e.props.metadata.id="",e.props.metadata.at="",e.props.metadata_fullcode="",delete e.isFromMetaData})),window.setTimeout((function(){t.saveToBusinessComponentGroup(i)}),1e3))}},{text:"取消"}]})},saveToBusinessComponentGroup:function(e){dsf.designer.saveToBusinessComponentGroup(this,e)},useTpl:function(t,n,i){var s=this,r=this,l=[{text:"确定",handler:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){var i,o,l,c,u,d,h,p,f,m,g,_,b,v,x,w,k,S;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=n.radioData,!e.isNull(i)){t.next=6;break}return dsf.layer.message("请选择一个模板",!1),t.abrupt("return",!1);case 6:return r.loading=!0,o=i.path.split("/"),l=o.shift(),c=o.pop(),u=o.join("."),d=null,null,h=null,t.prev=12,t.next=15,y.call(s,l,u,c,s.pageTitle,s.mobile,!0);case 15:p=t.sent,f=a("<div>"+p.data+"</div>"),m=f.children("script[id='layout']").html()||"",g=f.children("script[id='scss']").html()||"",_=f.children("script[id='designer']").html()||"",b=new Function(["var layout="+(m||"null")+";","return layout;"].join("\n")),v=new Function(["return "+JSON.stringify(g.trim()||"")].join("\n")),x=new Function(["return "+(_||"{}").trim()].join("\n")),d=dsf.fillComponentDefaultProps(b()),v(),h=x(),r.fromTemplateId=i.ID,t.next=33;break;case 29:t.prev=29,t.t0=t["catch"](12),dsf.layer.pc.message("读取模板失败",!1),dsf.error(t.t0);case 33:if(t.prev=33,!d){t.next=42;break}return t.next=37,r.setDesButtons(i.ID);case 37:w=r.page.context,k=r.page.name,S=r.page.title,r.page=null,s.$nextTick((function(){var e=dsf.isEmptyObject(h.controlGroup)||!h.controlGroup?[]:h.controlGroup;s.loadControlGrooup(e);var t=h.metadataGroup||[];s.loadMetaDataGroup(t);var n=h.businessControlGroup||[];s.loadBusinessComponetGroup(n),r.page=N("dsf.page",dsf.mix(d,{context:w,name:k,title:S}))}));case 42:return r.loading=!1,t.finish(33);case 44:case"end":return t.stop()}}),t,null,[[12,29,33,44]])})));function n(e){return t.apply(this,arguments)}return n}()}];!1!==n&&l.push({text:"取消"}),dsf.layer.openDialog({title:"选择布局模板",fullscreen:!1,content:"DesUseLayoutTpl",params:{isMobile:this.mobile},width:"500px",height:"500px",showClose:!1!==t,btns:l})},selectComponents:function(){var t=this;dsf.layer.openDialog({title:"选择组件",fullscreen:!1,content:"DesCustomComponent",width:"500px",btns:[{text:"确定",handler:function(n){var a=n.yes(),i="0"==n.tabIndex?h:d;if(!(a.length>0))return dsf.layer.message("请选择一个组件",!1),!1;var o=_.call(t,a),s=e.map(o,(function(e){return{id:e.dsfa_rm_id,type:i}}));i==d?t.loadBusinessComponetGroup(s):t.loadControlGrooup(s)}},{text:"取消"}]})},selectMateGroup:function(){var t=this;dsf.layer.openDialog({title:"选择元数据组",fullscreen:!1,content:"DesMetaDataSelect",width:"500px",btns:[{text:"确定",handler:function(n){var a=n.yes();if(a.length>0){var i=_.call(t,a),o=e.map(i,(function(e){return{id:"8"==e.type_value?e.dsfa_rm_id:e.ID,type:e.type_value}}));t.loadMetaDataGroup(o)}}},{text:"取消"}]})},removeControlGroup:function(e){var t=this;dsf.layer.pc.confirm("确定要删除该控件组吗?").then((function(){dsf.array.remove(t.useControlsGroup.groups,e)})).catch((function(){}))},removeMetaDataGroup:function(e){var t=this;dsf.layer.pc.confirm("确定要删除该元数据吗?").then((function(){dsf.array.remove(t.useMetaGroup.groups,e)})).catch((function(){}))},removeBusinessGroup:function(e){var t=this;dsf.layer.pc.confirm("确定要删除该元数据吗?").then((function(){dsf.array.remove(t.useBusinessControlGroup.groups,e)})).catch((function(){}))},leftSearch:function(){this.leftSearchStr=this.leftSearchInput},isMatchLeftSearch:function(e){return!this.leftSearchStr||e.indexOf(this.leftSearchStr)>=0}}}}).call(this,n("2ef0"),n("1157"),n("a026")["default"])},"5c89":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n("5530"),i=n("d4ec"),o=n("bee2"),s=n("262e"),r=n("2caf"),l=n("ec87"),c=n("3c04"),u=function(e){Object(s["a"])(n,e);var t=Object(r["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(o["a"])(n,[{key:"commands",value:function(e){var t=e.type;return function(e){return e.did?Object(c["updateMark"])(t,e):Object(c["removeMark"])(t)}}},{key:"name",get:function(){return"marktag"}},{key:"defaultOptions",get:function(){return{did:null,class:""}}},{key:"schema",get:function(){var e=this;return{attrs:{did:{default:null},class:{default:null}},inclusive:!1,parseDOM:[{tag:"span[did]",getAttrs:function(e){return{did:e.getAttribute("did"),class:e.getAttribute("class")}}}],toDOM:function(t){return["span",Object(a["a"])({did:e.options.did,class:e.options.class},t.attrs),0]}}}}]),n}(l["Mark"])},"5d98":function(e,t,n){"use strict";(function(e){n("d81d"),n("a434"),n("a9e3");var a=n("2d0f");t["a"]={name:"DesMobileFlexGrid",mixins:[a["a"]],data:function(){return{form:null,formNode:null,tableData:[],sizeMap:[{size:"lg",desc:"≥1920px"},{size:"xl",desc:"≥1200px"},{size:"md",desc:"≥992px"},{size:"sm",desc:"≥768px"},{size:"xs",desc:"<768px"}]}},created:function(){},beforeMount:function(){},mounted:function(){var t=this,n=this.owner.$$getComponent().slots;if(n=dsf.mix(!0,[],n),n[0]){var a=n[0].controls;e.each(a,(function(e){t.tableData.push(e)}))}},methods:{rowClickHandler:function(){},addCol:function(){var e={span:12,height:"auto"};this.tableData.push(dsf.designer.createMobileComponent("dsf.col",e))},vaildate:function(){return 0!=data.length||(dsf.layer.pc.message("至少存在一格",!1),!1)},deleted:function(e){var t=this;if(e.row.slots[0].controls.length>0){var n=e.row.slots[0].controls;dsf.layer.pc.confirm("栅格中存在"+n.length+"个子组件,删除该单元格子组件将一起被删除。<br/>是否确定要继续?").then((function(){dsf.array.remove(t.tableData,e.row)})).catch((function(){}))}else dsf.array.remove(this.tableData,e.row)},up:function(e){if(e.$index>0){var t=this.tableData[e.$index],n=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(n-1,0,t)}},down:function(e){if(this.tableData.length-1>e.$index){var t=this.tableData[e.$index],n=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(n+1,0,t)}},insert:function(e){var t={span:6,height:"auto"};this.tableData.splice(e.$index+1,0,dsf.designer.createMobileComponent("dsf.col",t))},yes:function(){var t=this,n=this.tableData;e.each(n,(function(n){t.checkMaxSpan(n,"span");var a=e.map(t.sizeMap,"size");e.each(a,(function(e){t.checkMaxSpan(n,e)}))})),this.owner.slots[0].controls=[],this.$nextTick((function(){var a=t.owner.slots[0].controls;e.each(n,(function(e){a.push(e)}))}))},checkMaxSpan:function(e,t){e[t]=dsf.isNumber(e[t])?Number(e[t]):null,e[t]&&e[t]>24&&(e[t]=24),e[t]&&e[t]<0&&(e[t]=null)}}}}).call(this,n("2ef0"))},"5dda":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[n("DsfButton",{on:{click:e.add}},[e._v("新增页签")])],1),n("el-main",{staticStyle:{padding:"0px"}},[n("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData,"row-class-name":e.tableRowClassName}},[n("el-table-column",{attrs:{label:"显示名称","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.title,callback:function(n){e.$set(t.row,"title",n)},expression:"scope.row.title"}})]}}])}),n("el-table-column",{attrs:{label:"标识","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}})]}}])}),n("el-table-column",{attrs:{label:"是否隐藏","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.hide,callback:function(n){e.$set(t.row,"hide",n)},expression:"scope.row.hide"}},[n("el-option",{attrs:{label:"是",value:!0}}),n("el-option",{attrs:{label:"否",value:!1}})],1)]}}])}),n("el-table-column",{attrs:{label:"是否懒加载","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.lazy,callback:function(n){e.$set(t.row,"lazy",n)},expression:"scope.row.lazy"}},[n("el-option",{attrs:{label:"是",value:!0}}),n("el-option",{attrs:{label:"否",value:!1}})],1)]}}])}),n("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(n){return e.insert(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(n){return e.deleted(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(n){return e.up(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(n){return e.down(t)}}})]}}])})],1)],1)],1)},i=[],o=(n("c975"),n("a434"),n("b0c0"),n("a9e3"),n("2d0f")),s={name:"TabPanelEdit",mixins:[o["a"]],data:function(){return{tableData:[],names:[]}},created:function(){this.tableData=this.currentData||[this.newTab()]},methods:{tableRowClassName:function(e){var t=e.row,n=e.rowIndex,a="";if(t.name){this.names[n]="";var i=this.names.indexOf(t.name);-1!=i&&i<n&&(a="warning-row"),this.names[n]=t.name}return a},newTab:function(){return{title:"Tab"+(this.tableData.length+1),name:"tab"+(this.tableData.length+1),hide:!1,badge:null,lazy:!1,url:"",controls:[]}},add:function(){this.tableData.push(this.newTab())},insert:function(e){this.tableData.splice(e.$index+1,0,this.newTab())},deleted:function(e){this.tableData.splice(e.$index,1)},up:function(e){if(e.$index>0){var t=this.tableData[e.$index];this.tableData.splice(e.$index,1),this.tableData.splice(e.$index-1,0,t)}},down:function(e){if(this.tableData.length-1>e.$index){var t=this.tableData[e.$index];this.tableData.splice(e.$index,1),this.tableData.splice(e.$index+1,0,t)}},validate:function(){for(var e in this.tableData){this.tableData[e]["name"]=this.tableData[e]["name"]||dsf.uuid();var t=this.names.indexOf(this.tableData[e]["name"]);if(-1!=t&&t<e)return dsf.layer.message("请解决重复标识",!1),!1}return!0},yes:function(){return this.tableData},checkMaxSpan:function(e,t){e[t]=dsf.isNumber(e[t])?Number(e[t]):null,e[t]&&e[t]>24&&(e[t]=24),e[t]&&e[t]<0&&(e[t]=null)}}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},6064:function(e,t,n){(function(t){(function(t,n){e.exports=n()})("undefined"!==typeof self?self:"undefined"!==typeof windows&&window,(function(){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var a=n(1),i=n(16),o=n(19);function s(e,t,n,s){return n=n||a,s=s||i,o(e,t,n,s)}s.defaultOptions=o.defaultOptions,e.exports.js=a,e.exports.css=i,e.exports.html=s},function(e,t,n){"use strict";var a=n(2).Beautifier,i=n(6).Options;function o(e,t){var n=new a(e,t);return n.beautify()}e.exports=o,e.exports.defaultOptions=function(){return new i}},function(e,t,n){"use strict";var a=n(3).Output,i=n(4).Token,o=n(5),s=n(6).Options,r=n(8).Tokenizer,l=n(8).line_starters,c=n(8).positionable_operators,u=n(8).TOKEN;function d(e,t){return-1!==t.indexOf(e)}function h(e){return e.replace(/^\s+/g,"")}function p(e){for(var t={},n=0;n<e.length;n++)t[e[n].replace(/-/g,"_")]=e[n];return t}function f(e,t){return e&&e.type===u.RESERVED&&e.text===t}function m(e,t){return e&&e.type===u.RESERVED&&d(e.text,t)}var g=["case","return","do","if","throw","else","await","break","continue","async"],_=["before-newline","after-newline","preserve-newline"],b=p(_),v=[b.before_newline,b.preserve_newline],y={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};function x(e,t){t.multiline_frame||t.mode===y.ForInitializer||t.mode===y.Conditional||e.remove_indent(t.start_line_index)}function w(e){e=e.replace(o.allLineBreaks,"\n");var t=[],n=e.indexOf("\n");while(-1!==n)t.push(e.substring(0,n)),e=e.substring(n+1),n=e.indexOf("\n");return e.length&&t.push(e),t}function k(e){return e===y.ArrayLiteral}function S(e){return d(e,[y.Expression,y.ForInitializer,y.Conditional])}function D(e,t){for(var n=0;n<e.length;n++){var a=e[n].trim();if(a.charAt(0)!==t)return!1}return!0}function C(e,t){for(var n,a=0,i=e.length;a<i;a++)if(n=e[a],n&&0!==n.indexOf(t))return!1;return!0}function N(e,t){t=t||{},this._source_text=e||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new s(t)}N.prototype.create_flags=function(e,t){var n=0;e&&(n=e.indentation_level,!this._output.just_added_newline()&&e.line_indent_level>n&&(n=e.line_indent_level));var a={mode:t,parent:e,last_token:e?e.last_token:new i(u.START_BLOCK,""),last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,alignment:0,line_indent_level:e?e.line_indent_level:n,start_line_index:this._output.get_line_number(),ternary_depth:0};return a},N.prototype._reset=function(e){var t=e.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new a(this._options,t),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(y.BlockStatement);var n=new r(e,this._options);return this._tokens=n.tokenize(),e},N.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var e,t=this._reset(this._source_text),n=this._options.eol;"auto"===this._options.eol&&(n="\n",t&&o.lineBreak.test(t||"")&&(n=t.match(o.lineBreak)[0]));var a=this._tokens.next();while(a)this.handle_token(a),this._last_last_text=this._flags.last_token.text,this._flags.last_token=a,a=this._tokens.next();return e=this._output.get_code(n),e},N.prototype.handle_token=function(e,t){e.type===u.START_EXPR?this.handle_start_expr(e):e.type===u.END_EXPR?this.handle_end_expr(e):e.type===u.START_BLOCK?this.handle_start_block(e):e.type===u.END_BLOCK?this.handle_end_block(e):e.type===u.WORD||e.type===u.RESERVED?this.handle_word(e):e.type===u.SEMICOLON?this.handle_semicolon(e):e.type===u.STRING?this.handle_string(e):e.type===u.EQUALS?this.handle_equals(e):e.type===u.OPERATOR?this.handle_operator(e):e.type===u.COMMA?this.handle_comma(e):e.type===u.BLOCK_COMMENT?this.handle_block_comment(e,t):e.type===u.COMMENT?this.handle_comment(e,t):e.type===u.DOT?this.handle_dot(e):e.type===u.EOF?this.handle_eof(e):(e.type,u.UNKNOWN,this.handle_unknown(e,t))},N.prototype.handle_whitespace_and_comments=function(e,t){var n=e.newlines,a=this._options.keep_array_indentation&&k(this._flags.mode);if(e.comments_before){var i=e.comments_before.next();while(i)this.handle_whitespace_and_comments(i,t),this.handle_token(i,t),i=e.comments_before.next()}if(a)for(var o=0;o<n;o+=1)this.print_newline(o>0,t);else if(this._options.max_preserve_newlines&&n>this._options.max_preserve_newlines&&(n=this._options.max_preserve_newlines),this._options.preserve_newlines&&n>1){this.print_newline(!1,t);for(var s=1;s<n;s+=1)this.print_newline(!0,t)}};var T=["async","break","continue","return","throw","yield"];N.prototype.allow_wrap_or_preserved_newline=function(e,t){if(t=void 0!==t&&t,!this._output.just_added_newline()){var n=this._options.preserve_newlines&&e.newlines||t,a=d(this._flags.last_token.text,c)||d(e.text,c);if(a){var i=d(this._flags.last_token.text,c)&&d(this._options.operator_position,v)||d(e.text,c);n=n&&i}if(n)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(m(this._flags.last_token,T))return;this._output.set_wrap_point()}}},N.prototype.print_newline=function(e,t){if(!t&&";"!==this._flags.last_token.text&&","!==this._flags.last_token.text&&"="!==this._flags.last_token.text&&(this._flags.last_token.type!==u.OPERATOR||"--"===this._flags.last_token.text||"++"===this._flags.last_token.text)){var n=this._tokens.peek();while(this._flags.mode===y.Statement&&(!this._flags.if_block||!f(n,"else"))&&!this._flags.do_block)this.restore_mode()}this._output.add_new_line(e)&&(this._flags.multiline_frame=!0)},N.prototype.print_token_line_indentation=function(e){this._output.just_added_newline()&&(this._options.keep_array_indentation&&e.newlines&&("["===e.text||k(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(e.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))},N.prototype.print_token=function(e){if(this._output.raw)this._output.add_raw_token(e);else{if(this._options.comma_first&&e.previous&&e.previous.type===u.COMMA&&this._output.just_added_newline()&&","===this._output.previous_line.last()){var t=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(t),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(e),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(e),this._output.non_breaking_space=!0,this._output.add_token(e.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)}},N.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},N.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},N.prototype.set_mode=function(e){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,e),this._flags=this.create_flags(this._previous_flags,e),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},N.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===y.Statement&&x(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},N.prototype.start_of_object_property=function(){return this._flags.parent.mode===y.ObjectLiteral&&this._flags.mode===y.Statement&&(":"===this._flags.last_token.text&&0===this._flags.ternary_depth||m(this._flags.last_token,["get","set"]))},N.prototype.start_of_statement=function(e){var t=!1;return t=t||m(this._flags.last_token,["var","let","const"])&&e.type===u.WORD,t=t||f(this._flags.last_token,"do"),t=t||!(this._flags.parent.mode===y.ObjectLiteral&&this._flags.mode===y.Statement)&&m(this._flags.last_token,T)&&!e.newlines,t=t||f(this._flags.last_token,"else")&&!(f(e,"if")&&!e.comments_before),t=t||this._flags.last_token.type===u.END_EXPR&&(this._previous_flags.mode===y.ForInitializer||this._previous_flags.mode===y.Conditional),t=t||this._flags.last_token.type===u.WORD&&this._flags.mode===y.BlockStatement&&!this._flags.in_case&&!("--"===e.text||"++"===e.text)&&"function"!==this._last_last_text&&e.type!==u.WORD&&e.type!==u.RESERVED,t=t||this._flags.mode===y.ObjectLiteral&&(":"===this._flags.last_token.text&&0===this._flags.ternary_depth||m(this._flags.last_token,["get","set"])),!!t&&(this.set_mode(y.Statement),this.indent(),this.handle_whitespace_and_comments(e,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e,m(e,["do","for","if","while"])),!0)},N.prototype.handle_start_expr=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e);var t=y.Expression;if("["===e.text){if(this._flags.last_token.type===u.WORD||")"===this._flags.last_token.text)return m(this._flags.last_token,l)&&(this._output.space_before_token=!0),this.print_token(e),this.set_mode(t),this.indent(),void(this._options.space_in_paren&&(this._output.space_before_token=!0));t=y.ArrayLiteral,k(this._flags.mode)&&("["!==this._flags.last_token.text&&(","!==this._flags.last_token.text||"]"!==this._last_last_text&&"}"!==this._last_last_text)||this._options.keep_array_indentation||this.print_newline()),d(this._flags.last_token.type,[u.START_EXPR,u.END_EXPR,u.WORD,u.OPERATOR])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===u.RESERVED)"for"===this._flags.last_token.text?(this._output.space_before_token=this._options.space_before_conditional,t=y.ForInitializer):d(this._flags.last_token.text,["if","while"])?(this._output.space_before_token=this._options.space_before_conditional,t=y.Conditional):d(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:"import"===this._flags.last_token.text&&""===e.whitespace_before?this._output.space_before_token=!1:(d(this._flags.last_token.text,l)||"catch"===this._flags.last_token.text)&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===u.EQUALS||this._flags.last_token.type===u.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e);else if(this._flags.last_token.type===u.WORD){this._output.space_before_token=!1;var n=this._tokens.peek(-3);if(this._options.space_after_named_function&&n){var a=this._tokens.peek(-4);m(n,["async","function"])||"*"===n.text&&m(a,["async","function"])?this._output.space_before_token=!0:this._flags.mode===y.ObjectLiteral&&("{"!==n.text&&","!==n.text&&("*"!==n.text||"{"!==a.text&&","!==a.text)||(this._output.space_before_token=!0))}}else this.allow_wrap_or_preserved_newline(e);(this._flags.last_token.type===u.RESERVED&&("function"===this._flags.last_word||"typeof"===this._flags.last_word)||"*"===this._flags.last_token.text&&(d(this._last_last_text,["function","yield"])||this._flags.mode===y.ObjectLiteral&&d(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}";"===this._flags.last_token.text||this._flags.last_token.type===u.START_BLOCK?this.print_newline():this._flags.last_token.type!==u.END_EXPR&&this._flags.last_token.type!==u.START_EXPR&&this._flags.last_token.type!==u.END_BLOCK&&"."!==this._flags.last_token.text&&this._flags.last_token.type!==u.COMMA||this.allow_wrap_or_preserved_newline(e,e.newlines),this.print_token(e),this.set_mode(t),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},N.prototype.handle_end_expr=function(e){while(this._flags.mode===y.Statement)this.restore_mode();this.handle_whitespace_and_comments(e),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(e,"]"===e.text&&k(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type!==u.START_EXPR||this._options.space_in_empty_paren?this._output.space_before_token=!0:(this._output.trim(),this._output.space_before_token=!1)),this.deindent(),this.print_token(e),this.restore_mode(),x(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===y.Conditional&&(this._previous_flags.mode=y.Expression,this._flags.do_block=!1,this._flags.do_while=!1)},N.prototype.handle_start_block=function(e){this.handle_whitespace_and_comments(e);var t=this._tokens.peek(),n=this._tokens.peek(1);"switch"===this._flags.last_word&&this._flags.last_token.type===u.END_EXPR?(this.set_mode(y.BlockStatement),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(y.BlockStatement):n&&(d(n.text,[":",","])&&d(t.type,[u.STRING,u.WORD,u.RESERVED])||d(t.text,["get","set","..."])&&d(n.type,[u.WORD,u.RESERVED]))?d(this._last_last_text,["class","interface"])?this.set_mode(y.BlockStatement):this.set_mode(y.ObjectLiteral):this._flags.last_token.type===u.OPERATOR&&"=>"===this._flags.last_token.text?this.set_mode(y.BlockStatement):d(this._flags.last_token.type,[u.EQUALS,u.START_EXPR,u.COMMA,u.OPERATOR])||m(this._flags.last_token,["return","throw","import","default"])?this.set_mode(y.ObjectLiteral):this.set_mode(y.BlockStatement);var a=!t.comments_before&&"}"===t.text,i=a&&"function"===this._flags.last_word&&this._flags.last_token.type===u.END_EXPR;if(this._options.brace_preserve_inline){var o=0,s=null;this._flags.inline_frame=!0;do{if(o+=1,s=this._tokens.peek(o-1),s.newlines){this._flags.inline_frame=!1;break}}while(s.type!==u.EOF&&(s.type!==u.END_BLOCK||s.opened!==e))}("expand"===this._options.brace_style||"none"===this._options.brace_style&&e.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==u.OPERATOR&&(i||this._flags.last_token.type===u.EQUALS||m(this._flags.last_token,g)&&"else"!==this._flags.last_token.text)?this._output.space_before_token=!0:this.print_newline(!1,!0):(!k(this._previous_flags.mode)||this._flags.last_token.type!==u.START_EXPR&&this._flags.last_token.type!==u.COMMA||((this._flags.last_token.type===u.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===u.COMMA||this._flags.last_token.type===u.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(e),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==u.OPERATOR&&this._flags.last_token.type!==u.START_EXPR&&(this._flags.last_token.type!==u.START_BLOCK||this._flags.inline_frame?this._output.space_before_token=!0:this.print_newline())),this.print_token(e),this.indent(),a||this._options.brace_preserve_inline&&this._flags.inline_frame||this.print_newline()},N.prototype.handle_end_block=function(e){this.handle_whitespace_and_comments(e);while(this._flags.mode===y.Statement)this.restore_mode();var t=this._flags.last_token.type===u.START_BLOCK;this._flags.inline_frame&&!t?this._output.space_before_token=!0:"expand"===this._options.brace_style?t||this.print_newline():t||(k(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(e)},N.prototype.handle_word=function(e){if(e.type===u.RESERVED)if(d(e.text,["set","get"])&&this._flags.mode!==y.ObjectLiteral)e.type=u.WORD;else if("import"===e.text&&"("===this._tokens.peek().text)e.type=u.WORD;else if(d(e.text,["as","from"])&&!this._flags.import_block)e.type=u.WORD;else if(this._flags.mode===y.ObjectLiteral){var t=this._tokens.peek();":"===t.text&&(e.type=u.WORD)}if(this.start_of_statement(e)?m(this._flags.last_token,["var","let","const"])&&e.type===u.WORD&&(this._flags.declaration_statement=!0):!e.newlines||S(this._flags.mode)||this._flags.last_token.type===u.OPERATOR&&"--"!==this._flags.last_token.text&&"++"!==this._flags.last_token.text||this._flags.last_token.type===u.EQUALS||!this._options.preserve_newlines&&m(this._flags.last_token,["var","let","const","set","get"])?this.handle_whitespace_and_comments(e):(this.handle_whitespace_and_comments(e),this.print_newline()),this._flags.do_block&&!this._flags.do_while){if(f(e,"while"))return this._output.space_before_token=!0,this.print_token(e),this._output.space_before_token=!0,void(this._flags.do_while=!0);this.print_newline(),this._flags.do_block=!1}if(this._flags.if_block)if(!this._flags.else_block&&f(e,"else"))this._flags.else_block=!0;else{while(this._flags.mode===y.Statement)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&m(e,["case","default"]))return this.print_newline(),this._flags.last_token.type!==u.END_BLOCK&&(this._flags.case_body||this._options.jslint_happy)&&this.deindent(),this._flags.case_body=!1,this.print_token(e),void(this._flags.in_case=!0);if(this._flags.last_token.type!==u.COMMA&&this._flags.last_token.type!==u.START_EXPR&&this._flags.last_token.type!==u.EQUALS&&this._flags.last_token.type!==u.OPERATOR||this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e),f(e,"function"))return(d(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!d(this._flags.last_token.text,["(","[","{",":","=",","])&&this._flags.last_token.type!==u.OPERATOR)&&(this._output.just_added_blankline()||e.comments_before||(this.print_newline(),this.print_newline(!0))),this._flags.last_token.type===u.RESERVED||this._flags.last_token.type===u.WORD?m(this._flags.last_token,["get","set","new","export"])||m(this._flags.last_token,T)||f(this._flags.last_token,"default")&&"export"===this._last_last_text||"declare"===this._flags.last_token.text?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===u.OPERATOR||"="===this._flags.last_token.text?this._output.space_before_token=!0:(this._flags.multiline_frame||!S(this._flags.mode)&&!k(this._flags.mode))&&this.print_newline(),this.print_token(e),void(this._flags.last_word=e.text);var n="NONE";if(this._flags.last_token.type===u.END_BLOCK?this._previous_flags.inline_frame?n="SPACE":m(e,["else","catch","finally","from"])?"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&e.newlines?n="NEWLINE":(n="SPACE",this._output.space_before_token=!0):n="NEWLINE":this._flags.last_token.type===u.SEMICOLON&&this._flags.mode===y.BlockStatement?n="NEWLINE":this._flags.last_token.type===u.SEMICOLON&&S(this._flags.mode)?n="SPACE":this._flags.last_token.type===u.STRING?n="NEWLINE":this._flags.last_token.type===u.RESERVED||this._flags.last_token.type===u.WORD||"*"===this._flags.last_token.text&&(d(this._last_last_text,["function","yield"])||this._flags.mode===y.ObjectLiteral&&d(this._last_last_text,["{",","]))?n="SPACE":this._flags.last_token.type===u.START_BLOCK?n=this._flags.inline_frame?"SPACE":"NEWLINE":this._flags.last_token.type===u.END_EXPR&&(this._output.space_before_token=!0,n="NEWLINE"),m(e,l)&&")"!==this._flags.last_token.text&&(n=this._flags.inline_frame||"else"===this._flags.last_token.text||"export"===this._flags.last_token.text?"SPACE":"NEWLINE"),m(e,["else","catch","finally"]))if((this._flags.last_token.type!==u.END_BLOCK||this._previous_flags.mode!==y.BlockStatement||"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&e.newlines)&&!this._flags.inline_frame)this.print_newline();else{this._output.trim(!0);var a=this._output.current_line;"}"!==a.last()&&this.print_newline(),this._output.space_before_token=!0}else"NEWLINE"===n?m(this._flags.last_token,g)||"declare"===this._flags.last_token.text&&m(e,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==u.END_EXPR?this._flags.last_token.type===u.START_EXPR&&m(e,["var","let","const"])||":"===this._flags.last_token.text||(f(e,"if")&&f(e.previous,"else")?this._output.space_before_token=!0:this.print_newline()):m(e,l)&&")"!==this._flags.last_token.text&&this.print_newline():this._flags.multiline_frame&&k(this._flags.mode)&&","===this._flags.last_token.text&&"}"===this._last_last_text?this.print_newline():"SPACE"===n&&(this._output.space_before_token=!0);!e.previous||e.previous.type!==u.WORD&&e.previous.type!==u.RESERVED||(this._output.space_before_token=!0),this.print_token(e),this._flags.last_word=e.text,e.type===u.RESERVED&&("do"===e.text?this._flags.do_block=!0:"if"===e.text?this._flags.if_block=!0:"import"===e.text?this._flags.import_block=!0:this._flags.import_block&&f(e,"from")&&(this._flags.import_block=!1))},N.prototype.handle_semicolon=function(e){this.start_of_statement(e)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(e);var t=this._tokens.peek();while(this._flags.mode===y.Statement&&(!this._flags.if_block||!f(t,"else"))&&!this._flags.do_block)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(e)},N.prototype.handle_string=function(e){(!e.text.startsWith("`")||0!==e.newlines||""!==e.whitespace_before||")"!==e.previous.text&&this._flags.last_token.type!==u.WORD)&&(this.start_of_statement(e)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(e),this._flags.last_token.type===u.RESERVED||this._flags.last_token.type===u.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===u.COMMA||this._flags.last_token.type===u.START_EXPR||this._flags.last_token.type===u.EQUALS||this._flags.last_token.type===u.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e):!e.text.startsWith("`")||this._flags.last_token.type!==u.END_EXPR||"]"!==e.previous.text&&")"!==e.previous.text||0!==e.newlines?this.print_newline():this._output.space_before_token=!0)),this.print_token(e)},N.prototype.handle_equals=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(e),this._output.space_before_token=!0},N.prototype.handle_comma=function(e){this.handle_whitespace_and_comments(e,!0),this.print_token(e),this._output.space_before_token=!0,this._flags.declaration_statement?(S(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(e)):this._flags.mode===y.ObjectLiteral||this._flags.mode===y.Statement&&this._flags.parent.mode===y.ObjectLiteral?(this._flags.mode===y.Statement&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(e)},N.prototype.handle_operator=function(e){var t="*"===e.text&&(m(this._flags.last_token,["function","yield"])||d(this._flags.last_token.type,[u.START_BLOCK,u.COMMA,u.END_BLOCK,u.SEMICOLON])),n=d(e.text,["-","+"])&&(d(this._flags.last_token.type,[u.START_BLOCK,u.START_EXPR,u.EQUALS,u.OPERATOR])||d(this._flags.last_token.text,l)||","===this._flags.last_token.text);if(this.start_of_statement(e));else{var a=!t;this.handle_whitespace_and_comments(e,a)}if(m(this._flags.last_token,g))return this._output.space_before_token=!0,void this.print_token(e);if("*"!==e.text||this._flags.last_token.type!==u.DOT)if("::"!==e.text){if(this._flags.last_token.type===u.OPERATOR&&d(this._options.operator_position,v)&&this.allow_wrap_or_preserved_newline(e),":"===e.text&&this._flags.in_case)return this.print_token(e),this._flags.in_case=!1,this._flags.case_body=!0,void(this._tokens.peek().type!==u.START_BLOCK?(this.indent(),this.print_newline()):this._output.space_before_token=!0);var i=!0,o=!0,s=!1;if(":"===e.text?0===this._flags.ternary_depth?i=!1:(this._flags.ternary_depth-=1,s=!0):"?"===e.text&&(this._flags.ternary_depth+=1),!n&&!t&&this._options.preserve_newlines&&d(e.text,c)){var r=":"===e.text,h=r&&s,p=r&&!s;switch(this._options.operator_position){case b.before_newline:return this._output.space_before_token=!p,this.print_token(e),r&&!h||this.allow_wrap_or_preserved_newline(e),void(this._output.space_before_token=!0);case b.after_newline:return this._output.space_before_token=!0,!r||h?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(e):this._output.space_before_token=!1,this.print_token(e),void(this._output.space_before_token=!0);case b.preserve_newline:return p||this.allow_wrap_or_preserved_newline(e),i=!(this._output.just_added_newline()||p),this._output.space_before_token=i,this.print_token(e),void(this._output.space_before_token=!0)}}if(t){this.allow_wrap_or_preserved_newline(e),i=!1;var f=this._tokens.peek();o=f&&d(f.type,[u.WORD,u.RESERVED])}else"..."===e.text?(this.allow_wrap_or_preserved_newline(e),i=this._flags.last_token.type===u.START_BLOCK,o=!1):(d(e.text,["--","++","!","~"])||n)&&(this._flags.last_token.type!==u.COMMA&&this._flags.last_token.type!==u.START_EXPR||this.allow_wrap_or_preserved_newline(e),i=!1,o=!1,!e.newlines||"--"!==e.text&&"++"!==e.text||this.print_newline(!1,!0),";"===this._flags.last_token.text&&S(this._flags.mode)&&(i=!0),this._flags.last_token.type===u.RESERVED?i=!0:this._flags.last_token.type===u.END_EXPR?i=!("]"===this._flags.last_token.text&&("--"===e.text||"++"===e.text)):this._flags.last_token.type===u.OPERATOR&&(i=d(e.text,["--","-","++","+"])&&d(this._flags.last_token.text,["--","-","++","+"]),d(e.text,["+","-"])&&d(this._flags.last_token.text,["--","++"])&&(o=!0)),(this._flags.mode!==y.BlockStatement||this._flags.inline_frame)&&this._flags.mode!==y.Statement||"{"!==this._flags.last_token.text&&";"!==this._flags.last_token.text||this.print_newline());this._output.space_before_token=this._output.space_before_token||i,this.print_token(e),this._output.space_before_token=o}else this.print_token(e);else this.print_token(e)},N.prototype.handle_block_comment=function(e,t){return this._output.raw?(this._output.add_raw_token(e),void(e.directives&&"end"===e.directives.preserve&&(this._output.raw=this._options.test_output_raw))):e.directives?(this.print_newline(!1,t),this.print_token(e),"start"===e.directives.preserve&&(this._output.raw=!0),void this.print_newline(!1,!0)):o.newline.test(e.text)||e.newlines?void this.print_block_commment(e,t):(this._output.space_before_token=!0,this.print_token(e),void(this._output.space_before_token=!0))},N.prototype.print_block_commment=function(e,t){var n,a=w(e.text),i=!1,o=!1,s=e.whitespace_before,r=s.length;if(this.print_newline(!1,t),this.print_token_line_indentation(e),this._output.add_token(a[0]),this.print_newline(!1,t),a.length>1){for(a=a.slice(1),i=D(a,"*"),o=C(a,s),i&&(this._flags.alignment=1),n=0;n<a.length;n++)i?(this.print_token_line_indentation(e),this._output.add_token(h(a[n]))):o&&a[n]?(this.print_token_line_indentation(e),this._output.add_token(a[n].substring(r))):(this._output.current_line.set_indent(-1),this._output.add_token(a[n])),this.print_newline(!1,t);this._flags.alignment=0}},N.prototype.handle_comment=function(e,t){e.newlines?this.print_newline(!1,t):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(e),this.print_newline(!1,t)},N.prototype.handle_dot=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e,!0),m(this._flags.last_token,g)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(e,")"===this._flags.last_token.text&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(e)},N.prototype.handle_unknown=function(e,t){this.print_token(e),"\n"===e.text[e.text.length-1]&&this.print_newline(!1,t)},N.prototype.handle_eof=function(e){while(this._flags.mode===y.Statement)this.restore_mode();this.handle_whitespace_and_comments(e)},e.exports.Beautifier=N},function(e,t,n){"use strict";function a(e){this.__parent=e,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function i(e,t){this.__cache=[""],this.__indent_size=e.indent_size,this.__indent_string=e.indent_char,e.indent_with_tabs||(this.__indent_string=new Array(e.indent_size+1).join(e.indent_char)),t=t||"",e.indent_level>0&&(t=new Array(e.indent_level+1).join(this.__indent_string)),this.__base_string=t,this.__base_string_length=t.length}function o(e,t){this.__indent_cache=new i(e,t),this.raw=!1,this._end_with_newline=e.end_with_newline,this.indent_size=e.indent_size,this.wrap_line_length=e.wrap_line_length,this.indent_empty_lines=e.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new a(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}a.prototype.clone_empty=function(){var e=new a(this.__parent);return e.set_indent(this.__indent_count,this.__alignment_count),e},a.prototype.item=function(e){return e<0?this.__items[this.__items.length+e]:this.__items[e]},a.prototype.has_match=function(e){for(var t=this.__items.length-1;t>=0;t--)if(this.__items[t].match(e))return!0;return!1},a.prototype.set_indent=function(e,t){this.is_empty()&&(this.__indent_count=e||0,this.__alignment_count=t||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},a.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},a.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},a.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var e=this.__parent.current_line;return e.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),e.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),e.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count," "===e.__items[0]&&(e.__items.splice(0,1),e.__character_count-=1),!0}return!1},a.prototype.is_empty=function(){return 0===this.__items.length},a.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},a.prototype.push=function(e){this.__items.push(e);var t=e.lastIndexOf("\n");-1!==t?this.__character_count=e.length-t:this.__character_count+=e.length},a.prototype.pop=function(){var e=null;return this.is_empty()||(e=this.__items.pop(),this.__character_count-=e.length),e},a.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},a.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},a.prototype.trim=function(){while(" "===this.last())this.__items.pop(),this.__character_count-=1},a.prototype.toString=function(){var e="";return this.is_empty()?this.__parent.indent_empty_lines&&(e=this.__parent.get_indent_string(this.__indent_count)):(e=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),e+=this.__items.join("")),e},i.prototype.get_indent_size=function(e,t){var n=this.__base_string_length;return t=t||0,e<0&&(n=0),n+=e*this.__indent_size,n+=t,n},i.prototype.get_indent_string=function(e,t){var n=this.__base_string;return t=t||0,e<0&&(e=0,n=""),t+=e*this.__indent_size,this.__ensure_cache(t),n+=this.__cache[t],n},i.prototype.__ensure_cache=function(e){while(e>=this.__cache.length)this.__add_column()},i.prototype.__add_column=function(){var e=this.__cache.length,t=0,n="";this.__indent_size&&e>=this.__indent_size&&(t=Math.floor(e/this.__indent_size),e-=t*this.__indent_size,n=new Array(t+1).join(this.__indent_string)),e&&(n+=new Array(e+1).join(" ")),this.__cache.push(n)},o.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},o.prototype.get_line_number=function(){return this.__lines.length},o.prototype.get_indent_string=function(e,t){return this.__indent_cache.get_indent_string(e,t)},o.prototype.get_indent_size=function(e,t){return this.__indent_cache.get_indent_size(e,t)},o.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},o.prototype.add_new_line=function(e){return!(this.is_empty()||!e&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},o.prototype.get_code=function(e){this.trim(!0);var t=this.current_line.pop();t&&("\n"===t[t.length-1]&&(t=t.replace(/\n+$/g,"")),this.current_line.push(t)),this._end_with_newline&&this.__add_outputline();var n=this.__lines.join("\n");return"\n"!==e&&(n=n.replace(/[\n]/g,e)),n},o.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},o.prototype.set_indent=function(e,t){return e=e||0,t=t||0,this.next_line.set_indent(e,t),this.__lines.length>1?(this.current_line.set_indent(e,t),!0):(this.current_line.set_indent(),!1)},o.prototype.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},o.prototype.add_token=function(e){this.__add_space_before_token(),this.current_line.push(e),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},o.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},o.prototype.remove_indent=function(e){var t=this.__lines.length;while(e<t)this.__lines[e]._remove_indent(),e++;this.current_line._remove_wrap_indent()},o.prototype.trim=function(e){e=void 0!==e&&e,this.current_line.trim();while(e&&this.__lines.length>1&&this.current_line.is_empty())this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},o.prototype.just_added_newline=function(){return this.current_line.is_empty()},o.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},o.prototype.ensure_empty_line_above=function(e,t){var n=this.__lines.length-2;while(n>=0){var i=this.__lines[n];if(i.is_empty())break;if(0!==i.item(0).indexOf(e)&&i.item(-1)!==t){this.__lines.splice(n+1,0,new a(this)),this.previous_line=this.__lines[this.__lines.length-2];break}n--}},e.exports.Output=o},function(e,t,n){"use strict";function a(e,t,n,a){this.type=e,this.text=t,this.comments_before=null,this.newlines=n||0,this.whitespace_before=a||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}e.exports.Token=a},function(e,t,n){"use strict";var a="\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a",i="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",o="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",s="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",r="(?:\\\\u[0-9a-fA-F]{4}|["+a+o+"])",l="(?:\\\\u[0-9a-fA-F]{4}|["+i+o+s+"])*";t.identifier=new RegExp(r+l,"g"),t.identifierStart=new RegExp(r),t.identifierMatch=new RegExp("(?:\\\\u[0-9a-fA-F]{4}|["+i+o+s+"])+");t.newline=/[\n\r\u2028\u2029]/,t.lineBreak=new RegExp("\r\n|"+t.newline.source),t.allLineBreaks=new RegExp(t.lineBreak.source,"g")},function(e,t,n){"use strict";var a=n(7).Options,i=["before-newline","after-newline","preserve-newline"];function o(e){a.call(this,e,"js");var t=this.raw_options.brace_style||null;"expand-strict"===t?this.raw_options.brace_style="expand":"collapse-preserve-inline"===t?this.raw_options.brace_style="collapse,preserve-inline":void 0!==this.raw_options.braces_on_own_line&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var n=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var o=0;o<n.length;o++)"preserve-inline"===n[o]?this.brace_preserve_inline=!0:this.brace_style=n[o];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",i),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}o.prototype=new a,e.exports.Options=o},function(e,t,n){"use strict";function a(e,t){this.raw_options=i(e,t),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs","\t"===this.indent_char),this.indent_with_tabs&&(this.indent_char="\t",1===this.indent_size&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php","smarty"],["auto"])}function i(e,t){var n,a={};for(n in e=o(e),e)n!==t&&(a[n]=e[n]);if(t&&e[t])for(n in e[t])a[n]=e[t][n];return a}function o(e){var t,n={};for(t in e){var a=t.replace(/-/g,"_");n[a]=e[t]}return n}a.prototype._get_array=function(e,t){var n=this.raw_options[e],a=t||[];return"object"===typeof n?null!==n&&"function"===typeof n.concat&&(a=n.concat()):"string"===typeof n&&(a=n.split(/[^a-zA-Z0-9_\/\-]+/)),a},a.prototype._get_boolean=function(e,t){var n=this.raw_options[e],a=void 0===n?!!t:!!n;return a},a.prototype._get_characters=function(e,t){var n=this.raw_options[e],a=t||"";return"string"===typeof n&&(a=n.replace(/\\r/,"\r").replace(/\\n/,"\n").replace(/\\t/,"\t")),a},a.prototype._get_number=function(e,t){var n=this.raw_options[e];t=parseInt(t,10),isNaN(t)&&(t=0);var a=parseInt(n,10);return isNaN(a)&&(a=t),a},a.prototype._get_selection=function(e,t,n){var a=this._get_selection_list(e,t,n);if(1!==a.length)throw new Error("Invalid Option Value: The option '"+e+"' can only be one of the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return a[0]},a.prototype._get_selection_list=function(e,t,n){if(!t||0===t.length)throw new Error("Selection list cannot be empty.");if(n=n||[t[0]],!this._is_valid_selection(n,t))throw new Error("Invalid Default Value!");var a=this._get_array(e,n);if(!this._is_valid_selection(a,t))throw new Error("Invalid Option Value: The option '"+e+"' can contain only the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return a},a.prototype._is_valid_selection=function(e,t){return e.length&&t.length&&!e.some((function(e){return-1===t.indexOf(e)}))},e.exports.Options=a,e.exports.normalizeOpts=o,e.exports.mergeOpts=i},function(e,t,n){"use strict";var a=n(9).InputScanner,i=n(10).Tokenizer,o=n(10).TOKEN,s=n(14).Directives,r=n(5),l=n(13).Pattern,c=n(15).TemplatablePattern;function u(e,t){return-1!==t.indexOf(e)}var d={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:o.START,RAW:o.RAW,EOF:o.EOF},h=new s(/\/\*/,/\*\//),p=/0[xX][0123456789abcdefABCDEF]*|0[oO][01234567]*|0[bB][01]*|\d+n|(?:\.\d+|\d+\.?\d*)(?:[eE][+-]?\d+)?/,f=/[0-9]/,m=/[^\d\.]/,g=">>> === !== << && >= ** != == <= >> || ?? |> < / - + > : & % ? ^ | *".split(" "),_=">>>= ... >>= <<= === >>> !== **= => ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";_=_.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),_="\\?\\.(?!\\d) "+_,_=_.replace(/ /g,"|");var b,v=new RegExp(_),y="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),x=y.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as"]),w=new RegExp("^(?:"+x.join("|")+")$"),k=function(e,t){i.call(this,e,t),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var n=new l(this._input),a=new c(this._input).read_options(this._options);this.__patterns={template:a,identifier:a.starting_with(r.identifier).matching(r.identifierMatch),number:n.matching(p),punct:n.matching(v),comment:n.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:n.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:n.matching(/<!--/),html_comment_end:n.matching(/-->/),include:n.starting_with(/#include/).until_after(r.lineBreak),shebang:n.starting_with(/#!/).until_after(r.lineBreak),xml:n.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\]|)(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/),single_quote:a.until(/['\\\n\r\u2028\u2029]/),double_quote:a.until(/["\\\n\r\u2028\u2029]/),template_text:a.until(/[`\\$]/),template_expression:a.until(/[`}\\]/)}};function S(e){var t="",n=0,i=new a(e),o=null;while(i.hasNext())if(o=i.match(/([\s]|[^\\]|\\\\)+/g),o&&(t+=o[0]),"\\"===i.peek()){if(i.next(),"x"===i.peek())o=i.match(/x([0-9A-Fa-f]{2})/g);else{if("u"!==i.peek()){t+="\\",i.hasNext()&&(t+=i.next());continue}o=i.match(/u([0-9A-Fa-f]{4})/g)}if(!o)return e;if(n=parseInt(o[1],16),n>126&&n<=255&&0===o[0].indexOf("x"))return e;if(n>=0&&n<32){t+="\\"+o[0];continue}t+=34===n||39===n||92===n?"\\"+String.fromCharCode(n):String.fromCharCode(n)}return t}k.prototype=new i,k.prototype._is_comment=function(e){return e.type===d.COMMENT||e.type===d.BLOCK_COMMENT||e.type===d.UNKNOWN},k.prototype._is_opening=function(e){return e.type===d.START_BLOCK||e.type===d.START_EXPR},k.prototype._is_closing=function(e,t){return(e.type===d.END_BLOCK||e.type===d.END_EXPR)&&t&&("]"===e.text&&"["===t.text||")"===e.text&&"("===t.text||"}"===e.text&&"{"===t.text)},k.prototype._reset=function(){b=!1},k.prototype._get_next_token=function(e,t){var n=null;this._readWhitespace();var a=this._input.peek();return null===a?this._create_token(d.EOF,""):(n=n||this._read_non_javascript(a),n=n||this._read_string(a),n=n||this._read_word(e),n=n||this._read_singles(a),n=n||this._read_comment(a),n=n||this._read_regexp(a,e),n=n||this._read_xml(a,e),n=n||this._read_punctuation(),n=n||this._create_token(d.UNKNOWN,this._input.next()),n)},k.prototype._read_word=function(e){var t;return t=this.__patterns.identifier.read(),""!==t?(t=t.replace(r.allLineBreaks,"\n"),e.type!==d.DOT&&(e.type!==d.RESERVED||"set"!==e.text&&"get"!==e.text)&&w.test(t)?"in"===t||"of"===t?this._create_token(d.OPERATOR,t):this._create_token(d.RESERVED,t):this._create_token(d.WORD,t)):(t=this.__patterns.number.read(),""!==t?this._create_token(d.WORD,t):void 0)},k.prototype._read_singles=function(e){var t=null;return"("===e||"["===e?t=this._create_token(d.START_EXPR,e):")"===e||"]"===e?t=this._create_token(d.END_EXPR,e):"{"===e?t=this._create_token(d.START_BLOCK,e):"}"===e?t=this._create_token(d.END_BLOCK,e):";"===e?t=this._create_token(d.SEMICOLON,e):"."===e&&m.test(this._input.peek(1))?t=this._create_token(d.DOT,e):","===e&&(t=this._create_token(d.COMMA,e)),t&&this._input.next(),t},k.prototype._read_punctuation=function(){var e=this.__patterns.punct.read();if(""!==e)return"="===e?this._create_token(d.EQUALS,e):"?."===e?this._create_token(d.DOT,e):this._create_token(d.OPERATOR,e)},k.prototype._read_non_javascript=function(e){var t="";if("#"===e){if(this._is_first_token()&&(t=this.__patterns.shebang.read(),t))return this._create_token(d.UNKNOWN,t.trim()+"\n");if(t=this.__patterns.include.read(),t)return this._create_token(d.UNKNOWN,t.trim()+"\n");e=this._input.next();var n="#";if(this._input.hasNext()&&this._input.testChar(f)){do{e=this._input.next(),n+=e}while(this._input.hasNext()&&"#"!==e&&"="!==e);return"#"===e||("["===this._input.peek()&&"]"===this._input.peek(1)?(n+="[]",this._input.next(),this._input.next()):"{"===this._input.peek()&&"}"===this._input.peek(1)&&(n+="{}",this._input.next(),this._input.next())),this._create_token(d.WORD,n)}this._input.back()}else if("<"===e&&this._is_first_token()){if(t=this.__patterns.html_comment_start.read(),t){while(this._input.hasNext()&&!this._input.testChar(r.newline))t+=this._input.next();return b=!0,this._create_token(d.COMMENT,t)}}else if(b&&"-"===e&&(t=this.__patterns.html_comment_end.read(),t))return b=!1,this._create_token(d.COMMENT,t);return null},k.prototype._read_comment=function(e){var t=null;if("/"===e){var n="";if("*"===this._input.peek(1)){n=this.__patterns.block_comment.read();var a=h.get_directives(n);a&&"start"===a.ignore&&(n+=h.readIgnored(this._input)),n=n.replace(r.allLineBreaks,"\n"),t=this._create_token(d.BLOCK_COMMENT,n),t.directives=a}else"/"===this._input.peek(1)&&(n=this.__patterns.comment.read(),t=this._create_token(d.COMMENT,n))}return t},k.prototype._read_string=function(e){if("`"===e||"'"===e||'"'===e){var t=this._input.next();return this.has_char_escapes=!1,t+="`"===e?this._read_string_recursive("`",!0,"${"):this._read_string_recursive(e),this.has_char_escapes&&this._options.unescape_strings&&(t=S(t)),this._input.peek()===e&&(t+=this._input.next()),t=t.replace(r.allLineBreaks,"\n"),this._create_token(d.STRING,t)}return null},k.prototype._allow_regexp_or_xml=function(e){return e.type===d.RESERVED&&u(e.text,["return","case","throw","else","do","typeof","yield"])||e.type===d.END_EXPR&&")"===e.text&&e.opened.previous.type===d.RESERVED&&u(e.opened.previous.text,["if","while","for"])||u(e.type,[d.COMMENT,d.START_EXPR,d.START_BLOCK,d.START,d.END_BLOCK,d.OPERATOR,d.EQUALS,d.EOF,d.SEMICOLON,d.COMMA])},k.prototype._read_regexp=function(e,t){if("/"===e&&this._allow_regexp_or_xml(t)){var n=this._input.next(),a=!1,i=!1;while(this._input.hasNext()&&(a||i||this._input.peek()!==e)&&!this._input.testChar(r.newline))n+=this._input.peek(),a?a=!1:(a="\\"===this._input.peek(),"["===this._input.peek()?i=!0:"]"===this._input.peek()&&(i=!1)),this._input.next();return this._input.peek()===e&&(n+=this._input.next(),n+=this._input.read(r.identifier)),this._create_token(d.STRING,n)}return null},k.prototype._read_xml=function(e,t){if(this._options.e4x&&"<"===e&&this._allow_regexp_or_xml(t)){var n="",a=this.__patterns.xml.read_match();if(a){var i=a[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),o=0===i.indexOf("{"),s=0;while(a){var l=!!a[1],c=a[2],u=!!a[a.length-1]||"![CDATA["===c.slice(0,8);if(!u&&(c===i||o&&c.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(l?--s:++s),n+=a[0],s<=0)break;a=this.__patterns.xml.read_match()}return a||(n+=this._input.match(/[\s\S]*/g)[0]),n=n.replace(r.allLineBreaks,"\n"),this._create_token(d.STRING,n)}}return null},k.prototype._read_string_recursive=function(e,t,n){var a,i;"'"===e?i=this.__patterns.single_quote:'"'===e?i=this.__patterns.double_quote:"`"===e?i=this.__patterns.template_text:"}"===e&&(i=this.__patterns.template_expression);var o=i.read(),s="";while(this._input.hasNext()){if(s=this._input.next(),s===e||!t&&r.newline.test(s)){this._input.back();break}"\\"===s&&this._input.hasNext()?(a=this._input.peek(),"x"===a||"u"===a?this.has_char_escapes=!0:"\r"===a&&"\n"===this._input.peek(1)&&this._input.next(),s+=this._input.next()):n&&("${"===n&&"$"===s&&"{"===this._input.peek()&&(s+=this._input.next()),n===s&&(s+="`"===e?this._read_string_recursive("}",t,"`"):this._read_string_recursive("`",t,"${"),this._input.hasNext()&&(s+=this._input.next()))),s+=i.read(),o+=s}return o},e.exports.Tokenizer=k,e.exports.TOKEN=d,e.exports.positionable_operators=g.slice(),e.exports.line_starters=y.slice()},function(e,t,n){"use strict";var a=RegExp.prototype.hasOwnProperty("sticky");function i(e){this.__input=e||"",this.__input_length=this.__input.length,this.__position=0}i.prototype.restart=function(){this.__position=0},i.prototype.back=function(){this.__position>0&&(this.__position-=1)},i.prototype.hasNext=function(){return this.__position<this.__input_length},i.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__input.charAt(this.__position),this.__position+=1),e},i.prototype.peek=function(e){var t=null;return e=e||0,e+=this.__position,e>=0&&e<this.__input_length&&(t=this.__input.charAt(e)),t},i.prototype.__match=function(e,t){e.lastIndex=t;var n=e.exec(this.__input);return!n||a&&e.sticky||n.index!==t&&(n=null),n},i.prototype.test=function(e,t){return t=t||0,t+=this.__position,t>=0&&t<this.__input_length&&!!this.__match(e,t)},i.prototype.testChar=function(e,t){var n=this.peek(t);return e.lastIndex=0,null!==n&&e.test(n)},i.prototype.match=function(e){var t=this.__match(e,this.__position);return t?this.__position+=t[0].length:t=null,t},i.prototype.read=function(e,t,n){var a,i="";return e&&(a=this.match(e),a&&(i+=a[0])),!t||!a&&e||(i+=this.readUntil(t,n)),i},i.prototype.readUntil=function(e,t){var n="",a=this.__position;e.lastIndex=this.__position;var i=e.exec(this.__input);return i?(a=i.index,t&&(a+=i[0].length)):a=this.__input_length,n=this.__input.substring(this.__position,a),this.__position=a,n},i.prototype.readUntilAfter=function(e){return this.readUntil(e,!0)},i.prototype.get_regexp=function(e,t){var n=null,i="g";return t&&a&&(i="y"),"string"===typeof e&&""!==e?n=new RegExp(e,i):e&&(n=new RegExp(e.source,i)),n},i.prototype.get_literal_regexp=function(e){return RegExp(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},i.prototype.peekUntilAfter=function(e){var t=this.__position,n=this.readUntilAfter(e);return this.__position=t,n},i.prototype.lookBack=function(e){var t=this.__position-1;return t>=e.length&&this.__input.substring(t-e.length,t).toLowerCase()===e},e.exports.InputScanner=i},function(e,t,n){"use strict";var a=n(9).InputScanner,i=n(4).Token,o=n(11).TokenStream,s=n(12).WhitespacePattern,r={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},l=function(e,t){this._input=new a(e),this._options=t||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new s(this._input)};l.prototype.tokenize=function(){var e;this._input.restart(),this.__tokens=new o,this._reset();var t=new i(r.START,""),n=null,a=[],s=new o;while(t.type!==r.EOF){e=this._get_next_token(t,n);while(this._is_comment(e))s.add(e),e=this._get_next_token(t,n);s.isEmpty()||(e.comments_before=s,s=new o),e.parent=n,this._is_opening(e)?(a.push(n),n=e):n&&this._is_closing(e,n)&&(e.opened=n,n.closed=e,n=a.pop(),e.parent=n),e.previous=t,t.next=e,this.__tokens.add(e),t=e}return this.__tokens},l.prototype._is_first_token=function(){return this.__tokens.isEmpty()},l.prototype._reset=function(){},l.prototype._get_next_token=function(e,t){this._readWhitespace();var n=this._input.read(/.+/g);return n?this._create_token(r.RAW,n):this._create_token(r.EOF,"")},l.prototype._is_comment=function(e){return!1},l.prototype._is_opening=function(e){return!1},l.prototype._is_closing=function(e,t){return!1},l.prototype._create_token=function(e,t){var n=new i(e,t,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token);return n},l.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},e.exports.Tokenizer=l,e.exports.TOKEN=r},function(e,t,n){"use strict";function a(e){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=e}a.prototype.restart=function(){this.__position=0},a.prototype.isEmpty=function(){return 0===this.__tokens_length},a.prototype.hasNext=function(){return this.__position<this.__tokens_length},a.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__tokens[this.__position],this.__position+=1),e},a.prototype.peek=function(e){var t=null;return e=e||0,e+=this.__position,e>=0&&e<this.__tokens_length&&(t=this.__tokens[e]),t},a.prototype.add=function(e){this.__parent_token&&(e.parent=this.__parent_token),this.__tokens.push(e),this.__tokens_length+=1},e.exports.TokenStream=a},function(e,t,n){"use strict";var a=n(13).Pattern;function i(e,t){a.call(this,e,t),t?this._line_regexp=this._input.get_regexp(t._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}i.prototype=new a,i.prototype.__set_whitespace_patterns=function(e,t){e+="\\t ",t+="\\n\\r",this._match_pattern=this._input.get_regexp("["+e+t+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+t+"]")},i.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var e=this._input.read(this._match_pattern);if(" "===e)this.whitespace_before_token=" ";else if(e){var t=this.__split(this._newline_regexp,e);this.newline_count=t.length-1,this.whitespace_before_token=t[this.newline_count]}return e},i.prototype.matching=function(e,t){var n=this._create();return n.__set_whitespace_patterns(e,t),n._update(),n},i.prototype._create=function(){return new i(this._input,this)},i.prototype.__split=function(e,t){e.lastIndex=0;var n=0,a=[],i=e.exec(t);while(i)a.push(t.substring(n,i.index)),n=i.index+i[0].length,i=e.exec(t);return n<t.length?a.push(t.substring(n,t.length)):a.push(""),a},e.exports.WhitespacePattern=i},function(e,t,n){"use strict";function a(e,t){this._input=e,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,t&&(this._starting_pattern=this._input.get_regexp(t._starting_pattern,!0),this._match_pattern=this._input.get_regexp(t._match_pattern,!0),this._until_pattern=this._input.get_regexp(t._until_pattern),this._until_after=t._until_after)}a.prototype.read=function(){var e=this._input.read(this._starting_pattern);return this._starting_pattern&&!e||(e+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),e},a.prototype.read_match=function(){return this._input.match(this._match_pattern)},a.prototype.until_after=function(e){var t=this._create();return t._until_after=!0,t._until_pattern=this._input.get_regexp(e),t._update(),t},a.prototype.until=function(e){var t=this._create();return t._until_after=!1,t._until_pattern=this._input.get_regexp(e),t._update(),t},a.prototype.starting_with=function(e){var t=this._create();return t._starting_pattern=this._input.get_regexp(e,!0),t._update(),t},a.prototype.matching=function(e){var t=this._create();return t._match_pattern=this._input.get_regexp(e,!0),t._update(),t},a.prototype._create=function(){return new a(this._input,this)},a.prototype._update=function(){},e.exports.Pattern=a},function(e,t,n){"use strict";function a(e,t){e="string"===typeof e?e:e.source,t="string"===typeof t?t:t.source,this.__directives_block_pattern=new RegExp(e+/ beautify( \w+[:]\w+)+ /.source+t,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(e+/\sbeautify\signore:end\s/.source+t,"g")}a.prototype.get_directives=function(e){if(!e.match(this.__directives_block_pattern))return null;var t={};this.__directive_pattern.lastIndex=0;var n=this.__directive_pattern.exec(e);while(n)t[n[1]]=n[2],n=this.__directive_pattern.exec(e);return t},a.prototype.readIgnored=function(e){return e.readUntilAfter(this.__directives_end_ignore_pattern)},e.exports.Directives=a},function(e,t,n){"use strict";var a=n(13).Pattern,i={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1};function o(e,t){a.call(this,e,t),this.__template_pattern=null,this._disabled=Object.assign({},i),this._excluded=Object.assign({},i),t&&(this.__template_pattern=this._input.get_regexp(t.__template_pattern),this._excluded=Object.assign(this._excluded,t._excluded),this._disabled=Object.assign(this._disabled,t._disabled));var n=new a(e);this.__patterns={handlebars_comment:n.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:n.starting_with(/{{{/).until_after(/}}}/),handlebars:n.starting_with(/{{/).until_after(/}}/),php:n.starting_with(/<\?(?:[=]|php)/).until_after(/\?>/),erb:n.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:n.starting_with(/{%/).until_after(/%}/),django_value:n.starting_with(/{{/).until_after(/}}/),django_comment:n.starting_with(/{#/).until_after(/#}/),smarty:n.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:n.starting_with(/{\*/).until_after(/\*}/),smarty_literal:n.starting_with(/{literal}/).until_after(/{\/literal}/)}}o.prototype=new a,o.prototype._create=function(){return new o(this._input,this)},o.prototype._update=function(){this.__set_templated_pattern()},o.prototype.disable=function(e){var t=this._create();return t._disabled[e]=!0,t._update(),t},o.prototype.read_options=function(e){var t=this._create();for(var n in i)t._disabled[n]=-1===e.templating.indexOf(n);return t._update(),t},o.prototype.exclude=function(e){var t=this._create();return t._excluded[e]=!0,t._update(),t},o.prototype.read=function(){var e="";e=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);var t=this._read_template();while(t)this._match_pattern?t+=this._input.read(this._match_pattern):t+=this._input.readUntil(this.__template_pattern),e+=t,t=this._read_template();return this._until_after&&(e+=this._input.readUntilAfter(this._until_pattern)),e},o.prototype.__set_templated_pattern=function(){var e=[];this._disabled.php||e.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||e.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||e.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(e.push(this.__patterns.django._starting_pattern.source),e.push(this.__patterns.django_value._starting_pattern.source),e.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||e.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&e.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+e.join("|")+")")},o.prototype._read_template=function(){var e="",t=this._input.peek();if("<"===t){var n=this._input.peek(1);this._disabled.php||this._excluded.php||"?"!==n||(e=e||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||"%"!==n||(e=e||this.__patterns.erb.read())}else"{"===t&&(this._disabled.handlebars||this._excluded.handlebars||(e=e||this.__patterns.handlebars_comment.read(),e=e||this.__patterns.handlebars_unescaped.read(),e=e||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(e=e||this.__patterns.django_value.read()),this._excluded.django||(e=e||this.__patterns.django_comment.read(),e=e||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(e=e||this.__patterns.smarty_comment.read(),e=e||this.__patterns.smarty_literal.read(),e=e||this.__patterns.smarty.read()));return e},e.exports.TemplatablePattern=o},function(e,t,n){"use strict";var a=n(17).Beautifier,i=n(18).Options;function o(e,t){var n=new a(e,t);return n.beautify()}e.exports=o,e.exports.defaultOptions=function(){return new i}},function(e,t,n){"use strict";var a=n(18).Options,i=n(3).Output,o=n(9).InputScanner,s=n(14).Directives,r=new s(/\/\*/,/\*\//),l=/\r\n|[\r\n]/,c=/\r\n|[\r\n]/g,u=/\s/,d=/(?:\s|\n)+/g,h=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,p=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function f(e,t){this._source_text=e||"",this._options=new a(t),this._ch=null,this._input=null,this.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},this.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0}}f.prototype.eatString=function(e){var t="";this._ch=this._input.next();while(this._ch){if(t+=this._ch,"\\"===this._ch)t+=this._input.next();else if(-1!==e.indexOf(this._ch)||"\n"===this._ch)break;this._ch=this._input.next()}return t},f.prototype.eatWhitespace=function(e){var t=u.test(this._input.peek()),n=0;while(u.test(this._input.peek()))this._ch=this._input.next(),e&&"\n"===this._ch&&(0===n||n<this._options.max_preserve_newlines)&&(n++,this._output.add_new_line(!0));return t},f.prototype.foundNestedPseudoClass=function(){var e=0,t=1,n=this._input.peek(t);while(n){if("{"===n)return!0;if("("===n)e+=1;else if(")"===n){if(0===e)return!1;e-=1}else if(";"===n||"}"===n)return!1;t++,n=this._input.peek(t)}return!1},f.prototype.print_string=function(e){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(e)},f.prototype.preserveSingleSpace=function(e){e&&(this._output.space_before_token=!0)},f.prototype.indent=function(){this._indentLevel++},f.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--},f.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var e=this._source_text,t=this._options.eol;"auto"===t&&(t="\n",e&&l.test(e||"")&&(t=e.match(l)[0])),e=e.replace(c,"\n");var n=e.match(/^[\t ]*/)[0];this._output=new i(this._options,n),this._input=new o(e),this._indentLevel=0,this._nestedLevel=0,this._ch=null;var a,s,f,m=0,g=!1,_=!1,b=!1,v=!1,y=!1,x=this._ch;while(1){if(a=this._input.read(d),s=""!==a,f=x,this._ch=this._input.next(),"\\"===this._ch&&this._input.hasNext()&&(this._ch+=this._input.next()),x=this._ch,!this._ch)break;if("/"===this._ch&&"*"===this._input.peek()){this._output.add_new_line(),this._input.back();var w=this._input.read(h),k=r.get_directives(w);k&&"start"===k.ignore&&(w+=r.readIgnored(this._input)),this.print_string(w),this.eatWhitespace(!0),this._output.add_new_line()}else if("/"===this._ch&&"/"===this._input.peek())this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(p)),this.eatWhitespace(!0);else if("@"===this._ch)if(this.preserveSingleSpace(s),"{"===this._input.peek())this.print_string(this._ch+this.eatString("}"));else{this.print_string(this._ch);var S=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);S.match(/[ :]$/)&&(S=this.eatString(": ").replace(/\s$/,""),this.print_string(S),this._output.space_before_token=!0),S=S.replace(/\s$/,""),"extend"===S?v=!0:"import"===S&&(y=!0),S in this.NESTED_AT_RULE?(this._nestedLevel+=1,S in this.CONDITIONAL_GROUP_RULE&&(b=!0)):g||0!==m||-1===S.indexOf(":")||(_=!0,this.indent())}else"#"===this._ch&&"{"===this._input.peek()?(this.preserveSingleSpace(s),this.print_string(this._ch+this.eatString("}"))):"{"===this._ch?(_&&(_=!1,this.outdent()),b?(b=!1,g=this._indentLevel>=this._nestedLevel):g=this._indentLevel>=this._nestedLevel-1,this._options.newline_between_rules&&g&&this._output.previous_line&&"{"!==this._output.previous_line.item(-1)&&this._output.ensure_empty_line_above("/",","),this._output.space_before_token=!0,"expand"===this._options.brace_style?(this._output.add_new_line(),this.print_string(this._ch),this.indent(),this._output.set_indent(this._indentLevel)):(this.indent(),this.print_string(this._ch)),this.eatWhitespace(!0),this._output.add_new_line()):"}"===this._ch?(this.outdent(),this._output.add_new_line(),"{"===f&&this._output.trim(!0),y=!1,v=!1,_&&(this.outdent(),_=!1),this.print_string(this._ch),g=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&"}"!==this._input.peek()&&this._output.add_new_line(!0)):":"===this._ch?!g&&!b||this._input.lookBack("&")||this.foundNestedPseudoClass()||this._input.lookBack("(")||v||0!==m?(this._input.lookBack(" ")&&(this._output.space_before_token=!0),":"===this._input.peek()?(this._ch=this._input.next(),this.print_string("::")):this.print_string(":")):(this.print_string(":"),_||(_=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent())):'"'===this._ch||"'"===this._ch?(this.preserveSingleSpace(s),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)):";"===this._ch?0===m?(_&&(this.outdent(),_=!1),v=!1,y=!1,this.print_string(this._ch),this.eatWhitespace(!0),"/"!==this._input.peek()&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0):"("===this._ch?this._input.lookBack("url")?(this.print_string(this._ch),this.eatWhitespace(),m++,this.indent(),this._ch=this._input.next(),")"===this._ch||'"'===this._ch||"'"===this._ch?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(")")),m&&(m--,this.outdent()))):(this.preserveSingleSpace(s),this.print_string(this._ch),this.eatWhitespace(),m++,this.indent()):")"===this._ch?(m&&(m--,this.outdent()),this.print_string(this._ch)):","===this._ch?(this.print_string(this._ch),this.eatWhitespace(!0),!this._options.selector_separator_newline||_||0!==m||y?this._output.space_before_token=!0:this._output.add_new_line()):">"!==this._ch&&"+"!==this._ch&&"~"!==this._ch||_||0!==m?"]"===this._ch?this.print_string(this._ch):"["===this._ch?(this.preserveSingleSpace(s),this.print_string(this._ch)):"="===this._ch?(this.eatWhitespace(),this.print_string("="),u.test(this._ch)&&(this._ch="")):"!"!==this._ch||this._input.lookBack("\\")?(this.preserveSingleSpace(s),this.print_string(this._ch)):(this.print_string(" "),this.print_string(this._ch)):this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&u.test(this._ch)&&(this._ch=""))}var D=this._output.get_code(t);return D},e.exports.Beautifier=f},function(e,t,n){"use strict";var a=n(7).Options;function i(e){a.call(this,e,"css"),this.selector_separator_newline=this._get_boolean("selector_separator_newline",!0),this.newline_between_rules=this._get_boolean("newline_between_rules",!0);var t=this._get_boolean("space_around_selector_separator");this.space_around_combinator=this._get_boolean("space_around_combinator")||t;var n=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_style="collapse";for(var i=0;i<n.length;i++)"expand"!==n[i]?this.brace_style="collapse":this.brace_style=n[i]}i.prototype=new a,e.exports.Options=i},function(e,t,n){"use strict";var a=n(20).Beautifier,i=n(21).Options;function o(e,t,n,i){var o=new a(e,t,n,i);return o.beautify()}e.exports=o,e.exports.defaultOptions=function(){return new i}},function(e,t,n){"use strict";var a=n(21).Options,i=n(3).Output,o=n(22).Tokenizer,s=n(22).TOKEN,r=/\r\n|[\r\n]/,l=/\r\n|[\r\n]/g,c=function(e,t){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=e.max_preserve_newlines,this.preserve_newlines=e.preserve_newlines,this._output=new i(e,t)};c.prototype.current_line_has_match=function(e){return this._output.current_line.has_match(e)},c.prototype.set_space_before_token=function(e,t){this._output.space_before_token=e,this._output.non_breaking_space=t},c.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()},c.prototype.add_raw_token=function(e){this._output.add_raw_token(e)},c.prototype.print_preserved_newlines=function(e){var t=0;e.type!==s.TEXT&&e.previous.type!==s.TEXT&&(t=e.newlines?1:0),this.preserve_newlines&&(t=e.newlines<this.max_preserve_newlines+1?e.newlines:this.max_preserve_newlines+1);for(var n=0;n<t;n++)this.print_newline(n>0);return 0!==t},c.prototype.traverse_whitespace=function(e){return!(!e.whitespace_before&&!e.newlines)&&(this.print_preserved_newlines(e)||(this._output.space_before_token=!0),!0)},c.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped},c.prototype.print_newline=function(e){this._output.add_new_line(e)},c.prototype.print_token=function(e){e.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(e.text))},c.prototype.indent=function(){this.indent_level++},c.prototype.get_full_indent=function(e){return e=this.indent_level+(e||0),e<1?"":this._output.get_indent_string(e)};var u=function(e){var t=null,n=e.next;while(n.type!==s.EOF&&e.closed!==n){if(n.type===s.ATTRIBUTE&&"type"===n.text){n.next&&n.next.type===s.EQUALS&&n.next.next&&n.next.next.type===s.VALUE&&(t=n.next.next.text);break}n=n.next}return t},d=function(e,t){var n=null,a=null;return t.closed?("script"===e?n="text/javascript":"style"===e&&(n="text/css"),n=u(t)||n,n.search("text/css")>-1?a="css":n.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)>-1?a="javascript":n.search(/(text|application|dojo)\/(x-)?(html)/)>-1?a="html":n.search(/test\/null/)>-1&&(a="null"),a):null};function h(e,t){return-1!==t.indexOf(e)}function p(e,t,n){this.parent=e||null,this.tag=t?t.tag_name:"",this.indent_level=n||0,this.parser_token=t||null}function f(e){this._printer=e,this._current_frame=null}function m(e,t,n,i){this._source_text=e||"",t=t||{},this._js_beautify=n,this._css_beautify=i,this._tag_stack=null;var o=new a(t,"html");this._options=o,this._is_wrap_attributes_force="force"===this._options.wrap_attributes.substr(0,"force".length),this._is_wrap_attributes_force_expand_multiline="force-expand-multiline"===this._options.wrap_attributes,this._is_wrap_attributes_force_aligned="force-aligned"===this._options.wrap_attributes,this._is_wrap_attributes_aligned_multiple="aligned-multiple"===this._options.wrap_attributes,this._is_wrap_attributes_preserve="preserve"===this._options.wrap_attributes.substr(0,"preserve".length),this._is_wrap_attributes_preserve_aligned="preserve-aligned"===this._options.wrap_attributes}f.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null},f.prototype.record_tag=function(e){var t=new p(this._current_frame,e,this._printer.indent_level);this._current_frame=t},f.prototype._try_pop_frame=function(e){var t=null;return e&&(t=e.parser_token,this._printer.indent_level=e.indent_level,this._current_frame=e.parent),t},f.prototype._get_frame=function(e,t){var n=this._current_frame;while(n){if(-1!==e.indexOf(n.tag))break;if(t&&-1!==t.indexOf(n.tag)){n=null;break}n=n.parent}return n},f.prototype.try_pop=function(e,t){var n=this._get_frame([e],t);return this._try_pop_frame(n)},f.prototype.indent_to_tag=function(e){var t=this._get_frame(e);t&&(this._printer.indent_level=t.indent_level)},m.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var e=this._source_text,t=this._options.eol;"auto"===this._options.eol&&(t="\n",e&&r.test(e)&&(t=e.match(r)[0])),e=e.replace(l,"\n");var n=e.match(/^[\t ]*/)[0],a={text:"",type:""},i=new g,u=new c(this._options,n),d=new o(e,this._options).tokenize();this._tag_stack=new f(u);var h=null,p=d.next();while(p.type!==s.EOF)p.type===s.TAG_OPEN||p.type===s.COMMENT?(h=this._handle_tag_open(u,p,i,a),i=h):p.type===s.ATTRIBUTE||p.type===s.EQUALS||p.type===s.VALUE||p.type===s.TEXT&&!i.tag_complete?h=this._handle_inside_tag(u,p,i,d):p.type===s.TAG_CLOSE?h=this._handle_tag_close(u,p,i):p.type===s.TEXT?h=this._handle_text(u,p,i):u.add_raw_token(p),a=h,p=d.next();var m=u._output.get_code(t);return m},m.prototype._handle_tag_close=function(e,t,n){var a={text:t.text,type:t.type};return e.alignment_size=0,n.tag_complete=!0,e.set_space_before_token(t.newlines||""!==t.whitespace_before,!0),n.is_unformatted?e.add_raw_token(t):("<"===n.tag_start_char&&(e.set_space_before_token("/"===t.text[0],!0),this._is_wrap_attributes_force_expand_multiline&&n.has_wrapped_attrs&&e.print_newline(!1)),e.print_token(t)),!n.indent_content||n.is_unformatted||n.is_content_unformatted||(e.indent(),n.indent_content=!1),n.is_inline_element||n.is_unformatted||n.is_content_unformatted||e.set_wrap_point(),a},m.prototype._handle_inside_tag=function(e,t,n,a){var i=n.has_wrapped_attrs,o={text:t.text,type:t.type};if(e.set_space_before_token(t.newlines||""!==t.whitespace_before,!0),n.is_unformatted)e.add_raw_token(t);else if("{"===n.tag_start_char&&t.type===s.TEXT)e.print_preserved_newlines(t)?(t.newlines=0,e.add_raw_token(t)):e.print_token(t);else{if(t.type===s.ATTRIBUTE?(e.set_space_before_token(!0),n.attr_count+=1):(t.type===s.EQUALS||t.type===s.VALUE&&t.previous.type===s.EQUALS)&&e.set_space_before_token(!1),t.type===s.ATTRIBUTE&&"<"===n.tag_start_char&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(e.traverse_whitespace(t),i=i||0!==t.newlines),this._is_wrap_attributes_force)){var r=n.attr_count>1;if(this._is_wrap_attributes_force_expand_multiline&&1===n.attr_count){var l,c=!0,u=0;do{if(l=a.peek(u),l.type===s.ATTRIBUTE){c=!1;break}u+=1}while(u<4&&l.type!==s.EOF&&l.type!==s.TAG_CLOSE);r=!c}r&&(e.print_newline(!1),i=!0)}e.print_token(t),i=i||e.previous_token_wrapped(),n.has_wrapped_attrs=i}return o},m.prototype._handle_text=function(e,t,n){var a={text:t.text,type:"TK_CONTENT"};return n.custom_beautifier_name?this._print_custom_beatifier_text(e,t,n):n.is_unformatted||n.is_content_unformatted?e.add_raw_token(t):(e.traverse_whitespace(t),e.print_token(t)),a},m.prototype._print_custom_beatifier_text=function(e,t,n){var a=this;if(""!==t.text){var i,o=t.text,s=1,r="",l="";"javascript"===n.custom_beautifier_name&&"function"===typeof this._js_beautify?i=this._js_beautify:"css"===n.custom_beautifier_name&&"function"===typeof this._css_beautify?i=this._css_beautify:"html"===n.custom_beautifier_name&&(i=function(e,t){var n=new m(e,t,a._js_beautify,a._css_beautify);return n.beautify()}),"keep"===this._options.indent_scripts?s=0:"separate"===this._options.indent_scripts&&(s=-e.indent_level);var c=e.get_full_indent(s);if(o=o.replace(/\n[ \t]*$/,""),"html"!==n.custom_beautifier_name&&"<"===o[0]&&o.match(/^(<!--|<!\[CDATA\[)/)){var u=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(o);if(!u)return void e.add_raw_token(t);r=c+u[1]+"\n",o=u[4],u[5]&&(l=c+u[5]),o=o.replace(/\n[ \t]*$/,""),(u[2]||-1!==u[3].indexOf("\n"))&&(u=u[3].match(/[ \t]+$/),u&&(t.whitespace_before=u[0]))}if(o)if(i){var d=function(){this.eol="\n"};d.prototype=this._options.raw_options;var h=new d;o=i(c+o,h)}else{var p=t.whitespace_before;p&&(o=o.replace(new RegExp("\n("+p+")?","g"),"\n")),o=c+o.replace(/\n/g,"\n"+c)}r&&(o=o?r+o+"\n"+l:r+l),e.print_newline(!1),o&&(t.text=o,t.whitespace_before="",t.newlines=0,e.add_raw_token(t),e.print_newline(!0))}},m.prototype._handle_tag_open=function(e,t,n,a){var i=this._get_tag_open_token(t);return!n.is_unformatted&&!n.is_content_unformatted||n.is_empty_element||t.type!==s.TAG_OPEN||0!==t.text.indexOf("</")?(e.traverse_whitespace(t),this._set_tag_position(e,t,i,n,a),i.is_inline_element||e.set_wrap_point(),e.print_token(t)):(e.add_raw_token(t),i.start_tag_token=this._tag_stack.try_pop(i.tag_name)),(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(i.alignment_size=t.text.length+1),i.tag_complete||i.is_unformatted||(e.alignment_size=i.alignment_size),i};var g=function(e,t){var n;(this.parent=e||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",t)?(this.tag_start_char=t.text[0],this.text=t.text,"<"===this.tag_start_char?(n=t.text.match(/^<([^\s>]*)/),this.tag_check=n?n[1]:""):(n=t.text.match(/^{{(?:[\^]|#\*?)?([^\s}]+)/),this.tag_check=n?n[1]:"","{{#>"===t.text&&">"===this.tag_check&&null!==t.next&&(this.tag_check=t.next.text)),this.tag_check=this.tag_check.toLowerCase(),t.type===s.COMMENT&&(this.tag_complete=!0),this.is_start_tag="/"!==this.tag_check.charAt(0),this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||t.closed&&"/>"===t.closed.text,this.is_end_tag=this.is_end_tag||"{"===this.tag_start_char&&(this.text.length<3||/[^#\^]/.test(this.text.charAt(2)))):this.tag_complete=!0};m.prototype._get_tag_open_token=function(e){var t=new g(this._tag_stack.get_parser_token(),e);return t.alignment_size=this._options.wrap_attributes_indent_size,t.is_end_tag=t.is_end_tag||h(t.tag_check,this._options.void_elements),t.is_empty_element=t.tag_complete||t.is_start_tag&&t.is_end_tag,t.is_unformatted=!t.tag_complete&&h(t.tag_check,this._options.unformatted),t.is_content_unformatted=!t.is_empty_element&&h(t.tag_check,this._options.content_unformatted),t.is_inline_element=h(t.tag_name,this._options.inline)||"{"===t.tag_start_char,t},m.prototype._set_tag_position=function(e,t,n,a,i){if(n.is_empty_element||(n.is_end_tag?n.start_tag_token=this._tag_stack.try_pop(n.tag_name):(this._do_optional_end_element(n)&&(n.is_inline_element||e.print_newline(!1)),this._tag_stack.record_tag(n),"script"!==n.tag_name&&"style"!==n.tag_name||n.is_unformatted||n.is_content_unformatted||(n.custom_beautifier_name=d(n.tag_check,t)))),h(n.tag_check,this._options.extra_liners)&&(e.print_newline(!1),e._output.just_added_blankline()||e.print_newline(!0)),n.is_empty_element){if("{"===n.tag_start_char&&"else"===n.tag_check){this._tag_stack.indent_to_tag(["if","unless","each"]),n.indent_content=!0;var o=e.current_line_has_match(/{{#if/);o||e.print_newline(!1)}"!--"===n.tag_name&&i.type===s.TAG_CLOSE&&a.is_end_tag&&-1===n.text.indexOf("\n")||(n.is_inline_element||n.is_unformatted||e.print_newline(!1),this._calcluate_parent_multiline(e,n))}else if(n.is_end_tag){var r=!1;r=n.start_tag_token&&n.start_tag_token.multiline_content,r=r||!n.is_inline_element&&!(a.is_inline_element||a.is_unformatted)&&!(i.type===s.TAG_CLOSE&&n.start_tag_token===a)&&"TK_CONTENT"!==i.type,(n.is_content_unformatted||n.is_unformatted)&&(r=!1),r&&e.print_newline(!1)}else n.indent_content=!n.custom_beautifier_name,"<"===n.tag_start_char&&("html"===n.tag_name?n.indent_content=this._options.indent_inner_html:"head"===n.tag_name?n.indent_content=this._options.indent_head_inner_html:"body"===n.tag_name&&(n.indent_content=this._options.indent_body_inner_html)),n.is_inline_element||n.is_unformatted||"TK_CONTENT"===i.type&&!n.is_content_unformatted||e.print_newline(!1),this._calcluate_parent_multiline(e,n)},m.prototype._calcluate_parent_multiline=function(e,t){!t.parent||!e._output.just_added_newline()||(t.is_inline_element||t.is_unformatted)&&t.parent.is_inline_element||(t.parent.multiline_content=!0)};var _=["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","main","nav","ol","p","pre","section","table","ul"],b=["a","audio","del","ins","map","noscript","video"];m.prototype._do_optional_end_element=function(e){var t=null;if(!e.is_empty_element&&e.is_start_tag&&e.parent){if("body"===e.tag_name)t=t||this._tag_stack.try_pop("head");else if("li"===e.tag_name)t=t||this._tag_stack.try_pop("li",["ol","ul"]);else if("dd"===e.tag_name||"dt"===e.tag_name)t=t||this._tag_stack.try_pop("dt",["dl"]),t=t||this._tag_stack.try_pop("dd",["dl"]);else if("p"===e.parent.tag_name&&-1!==_.indexOf(e.tag_name)){var n=e.parent.parent;n&&-1!==b.indexOf(n.tag_name)||(t=t||this._tag_stack.try_pop("p"))}else"rp"===e.tag_name||"rt"===e.tag_name?(t=t||this._tag_stack.try_pop("rt",["ruby","rtc"]),t=t||this._tag_stack.try_pop("rp",["ruby","rtc"])):"optgroup"===e.tag_name?t=t||this._tag_stack.try_pop("optgroup",["select"]):"option"===e.tag_name?t=t||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):"colgroup"===e.tag_name?t=t||this._tag_stack.try_pop("caption",["table"]):"thead"===e.tag_name?(t=t||this._tag_stack.try_pop("caption",["table"]),t=t||this._tag_stack.try_pop("colgroup",["table"])):"tbody"===e.tag_name||"tfoot"===e.tag_name?(t=t||this._tag_stack.try_pop("caption",["table"]),t=t||this._tag_stack.try_pop("colgroup",["table"]),t=t||this._tag_stack.try_pop("thead",["table"]),t=t||this._tag_stack.try_pop("tbody",["table"])):"tr"===e.tag_name?(t=t||this._tag_stack.try_pop("caption",["table"]),t=t||this._tag_stack.try_pop("colgroup",["table"]),t=t||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"])):"th"!==e.tag_name&&"td"!==e.tag_name||(t=t||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]),t=t||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"]));return e.parent=this._tag_stack.get_parser_token(),t}},e.exports.Beautifier=m},function(e,t,n){"use strict";var a=n(7).Options;function i(e){a.call(this,e,"html"),1===this.templating.length&&"auto"===this.templating[0]&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}i.prototype=new a,e.exports.Options=i},function(e,t,n){"use strict";var a=n(10).Tokenizer,i=n(10).TOKEN,o=n(14).Directives,s=n(15).TemplatablePattern,r=n(13).Pattern,l={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:i.START,RAW:i.RAW,EOF:i.EOF},c=new o(/<\!--/,/-->/),u=function(e,t){a.call(this,e,t),this._current_tag_name="";var n=new s(this._input).read_options(this._options),i=new r(this._input);if(this.__patterns={word:n.until(/[\n\r\t <]/),single_quote:n.until_after(/'/),double_quote:n.until_after(/"/),attribute:n.until(/[\n\r\t =>]|\/>/),element_name:n.until(/[\n\r\t >\/]/),handlebars_comment:i.starting_with(/{{!--/).until_after(/--}}/),handlebars:i.starting_with(/{{/).until_after(/}}/),handlebars_open:i.until(/[\n\r\t }]/),handlebars_raw_close:i.until(/}}/),comment:i.starting_with(/<!--/).until_after(/-->/),cdata:i.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:i.starting_with(/<!\[/).until_after(/]>/),processing:i.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var o=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=i.matching(o).until_after(o)}};u.prototype=new a,u.prototype._is_comment=function(e){return!1},u.prototype._is_opening=function(e){return e.type===l.TAG_OPEN},u.prototype._is_closing=function(e,t){return e.type===l.TAG_CLOSE&&t&&((">"===e.text||"/>"===e.text)&&"<"===t.text[0]||"}}"===e.text&&"{"===t.text[0]&&"{"===t.text[1])},u.prototype._reset=function(){this._current_tag_name=""},u.prototype._get_next_token=function(e,t){var n=null;this._readWhitespace();var a=this._input.peek();return null===a?this._create_token(l.EOF,""):(n=n||this._read_open_handlebars(a,t),n=n||this._read_attribute(a,e,t),n=n||this._read_close(a,t),n=n||this._read_raw_content(a,e,t),n=n||this._read_content_word(a),n=n||this._read_comment_or_cdata(a),n=n||this._read_processing(a),n=n||this._read_open(a,t),n=n||this._create_token(l.UNKNOWN,this._input.next()),n)},u.prototype._read_comment_or_cdata=function(e){var t=null,n=null,a=null;if("<"===e){var i=this._input.peek(1);"!"===i&&(n=this.__patterns.comment.read(),n?(a=c.get_directives(n),a&&"start"===a.ignore&&(n+=c.readIgnored(this._input))):n=this.__patterns.cdata.read()),n&&(t=this._create_token(l.COMMENT,n),t.directives=a)}return t},u.prototype._read_processing=function(e){var t=null,n=null,a=null;if("<"===e){var i=this._input.peek(1);"!"!==i&&"?"!==i||(n=this.__patterns.conditional_comment.read(),n=n||this.__patterns.processing.read()),n&&(t=this._create_token(l.COMMENT,n),t.directives=a)}return t},u.prototype._read_open=function(e,t){var n=null,a=null;return t||"<"===e&&(n=this._input.next(),"/"===this._input.peek()&&(n+=this._input.next()),n+=this.__patterns.element_name.read(),a=this._create_token(l.TAG_OPEN,n)),a},u.prototype._read_open_handlebars=function(e,t){var n=null,a=null;return t||this._options.indent_handlebars&&"{"===e&&"{"===this._input.peek(1)&&("!"===this._input.peek(2)?(n=this.__patterns.handlebars_comment.read(),n=n||this.__patterns.handlebars.read(),a=this._create_token(l.COMMENT,n)):(n=this.__patterns.handlebars_open.read(),a=this._create_token(l.TAG_OPEN,n))),a},u.prototype._read_close=function(e,t){var n=null,a=null;return t&&("<"===t.text[0]&&(">"===e||"/"===e&&">"===this._input.peek(1))?(n=this._input.next(),"/"===e&&(n+=this._input.next()),a=this._create_token(l.TAG_CLOSE,n)):"{"===t.text[0]&&"}"===e&&"}"===this._input.peek(1)&&(this._input.next(),this._input.next(),a=this._create_token(l.TAG_CLOSE,"}}"))),a},u.prototype._read_attribute=function(e,t,n){var a=null,i="";if(n&&"<"===n.text[0])if("="===e)a=this._create_token(l.EQUALS,this._input.next());else if('"'===e||"'"===e){var o=this._input.next();o+='"'===e?this.__patterns.double_quote.read():this.__patterns.single_quote.read(),a=this._create_token(l.VALUE,o)}else i=this.__patterns.attribute.read(),i&&(a=t.type===l.EQUALS?this._create_token(l.VALUE,i):this._create_token(l.ATTRIBUTE,i));return a},u.prototype._is_content_unformatted=function(e){return-1===this._options.void_elements.indexOf(e)&&(-1!==this._options.content_unformatted.indexOf(e)||-1!==this._options.unformatted.indexOf(e))},u.prototype._read_raw_content=function(e,t,n){var a="";if(n&&"{"===n.text[0])a=this.__patterns.handlebars_raw_close.read();else if(t.type===l.TAG_CLOSE&&"<"===t.opened.text[0]&&"/"!==t.text[0]){var i=t.opened.text.substr(1).toLowerCase();if("script"===i||"style"===i){var o=this._read_comment_or_cdata(e);if(o)return o.type=l.TEXT,o;a=this._input.readUntil(new RegExp("</"+i+"[\\n\\r\\t ]*?>","ig"))}else this._is_content_unformatted(i)&&(a=this._input.readUntil(new RegExp("</"+i+"[\\n\\r\\t ]*?>","ig")))}return a?this._create_token(l.TEXT,a):null},u.prototype._read_content_word=function(e){var t="";if(this._options.unformatted_content_delimiter&&e===this._options.unformatted_content_delimiter[0]&&(t=this.__patterns.unformatted_content_delimiter.read()),t||(t=this.__patterns.word.read()),t)return this._create_token(l.TEXT,t)},e.exports.Tokenizer=u,e.exports.TOKEN=l}])}))}).call(this,n("c8ba"))},6168:function(e,t,n){"use strict";n("c6bf")},6269:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"seat-designer-page",style:e.canvasCss,on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.canvasClick(t)}}},[n("div",{style:e.panelSty,attrs:{id:"panel_outer"}},[e._t("seat"),n("div",{staticClass:"ds_seat_panel_bg",attrs:{id:"panel_bg"}})],2),e._t("seatPop")],2)},i=[],o=n("0afd"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["a"]=l.exports},6557:function(e,t,n){},6602:function(e,t,n){},"669d":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"designer_tools"},[e._l(e.layout.buttons,(function(e,t){return n("DsfButton",{key:t,attrs:{icon:e.icon,text:e.text,"btn-style":"icon-text"},on:{click:function(t){return e.handler(t,e)}}})})),n("width-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{"canvas-set":e.canvasSet,"has-bg":e.hasBg}})],2)},i=[],o=n("4cea"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["a"]=l.exports},6792:function(e,t,n){"use strict";(function(e){n("4de4"),n("4160"),n("b0c0"),n("159b");var a=n("2d0f");t["a"]={name:"AccessPrivilege",mixins:[a["a"]],data:function(){return{tableData:[]}},created:function(){this.tableData=this.currentData||[]},methods:{add:function(){var t=this;this.$openDialog({title:"角色选择",width:this.config.width,height:this.config.height,top:"10vh",params:{path:"dsfa/oua/role/selectrole"},btns:[{text:"确定",handler:function(n){if(n.content){var a=n.content;if(a&&a.yes&&dsf.isFunction(a.yes)){var i=a.yes();if(!i)return!1;e.forEach(i,(function(e){var n=t.tableData.filter((function(t,n){return t["roleid"]==e["_id"]}));n.length>0?n.name=e["_name"]:t.tableData.push({roleid:e["_id"],name:e["_name"]})}))}}}},{text:"取消"}]})},deleted:function(e){dsf.array.remove(this.tableData,e.row)},yes:function(){return this.tableData}}}}).call(this,n("2ef0"))},6847:function(e,t,n){"use strict";(function(e){n("d81d"),n("fb6a"),n("4e82"),n("b0c0"),n("a9e3"),n("e25e");var a=n("b45c");t["a"]={name:"EnumEditorItem",components:{DsfTreeSelect:a["default"]},props:{value:{type:Object,required:!0},emptyText:{type:String,default:"请选择"},treeLoading:{type:Boolean,default:!1},treeData:{type:Array,default:function(){return[]}},tablePost:{type:Function,default:function(){}},type:{type:String,required:!0},hideRight:{type:Boolean,default:!1},nameKey:{type:String,default:"label",desc:"树节点已哪个字段作为名称"},idKey:{type:String,default:"ID"},defaultCheckedKey:{type:[String,Number],default:""}},data:function(){return{loading:!1,radioId:null,pageSize:100,pageNum:1,metaTree:{},currentRowKey:"",val:this.value.code?this.value:{type:this.type,code:null,attach:[]}}},computed:{total:function(){var e=this.value;return this.metaTree.attach&&(e=this.metaTree),e.attach.length},startIndex:function(){return this.pageNum*this.pageSize-this.pageSize},tableList:function(){var e=this.value;return this.metaTree.attach&&(e=this.metaTree),e.attach.slice(this.startIndex,this.startIndex+this.pageSize)}},watch:{radioId:function(e,t){var n=this;if("meta"===this.type||"ds"===this.type)this.val["chooseKey"]=e;else{var a={type:this.type,code:this.radioId,attach:[]};this.$emit("input",a),this.$emit("change",a),this.pageNum=1,e&&e!==t&&(this.loading=!0,this.tablePost(e,(function(e){n.updateValue(e),n.loading=!1})))}}},created:function(){var e=this;if(this.value){var t=this.value.chooseKey||this.value.code;t&&(this.radioId=t,this.loading=!0,this.tablePost(t,(function(t){e.updateValue(t),e.loading=!1})))}},methods:{tableRowClassName:function(e){var t=e.row;return this.currentRowKey===t["value"]?"current-row":""},chooseNode:function(t){if("meta"===this.type){var n=[],a=function(a){var i=e.extend({},t.metadata[a]);i["text"]=i.name,i["value"]=i.id,i.valueAttributes&&i.valueAttributes.length>1&&(i["children"]=i.valueAttributes.map((function(e){return e.text=e.name,e.value=i.id+"_"+e.code,e.at=i.at,e}))),n.push(i)};for(var i in t.metadata)a(i);n=n.sort((function(e,t){var n=e.order?parseInt(e.order):0,a=t.order?parseInt(t.order):0;return n<a?-1:1})),this.updateValue(n)}else if("ds"===this.type){var o={type:this.type,code:t.dsfa_rm_id,attach:[],chooseKey:t[this.idKey]};this.$emit("input",o),this.$emit("change",o)}},updateValue:function(e){var t={type:this.type,code:this.radioId,attach:e};"meta"===this.type&&(this.metaTree=t),this.$emit("input",t),this.$emit("change",t)},handleCurrentChange:function(e){e&&e.children?(this.$refs.singleTable.setCurrentRow(),this.$refs.singleTable.toggleRowExpansion(e),this.currentRowKey="",this.val.code=null):e&&(this.currentRowKey=e["value"],this.val.code=e)},getResult:function(){this.$emit("input",this.val),this.$emit("change",this.val)},initMetaTable:function(){this.radioId&&"meta"===this.type&&this.$refs.singleTable.setCurrentRow(this.value.code)}}}}).call(this,n("1157"))},"68d0":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-question-formwrap"},[n("div",{staticClass:"example"},[n("el-form",{attrs:{"label-position":"top"}},[n("el-form-item",{attrs:{prop:"value",rules:e.exampleRules},scopedSlots:e._u([{key:"label",fn:function(){return[n("span",{domProps:{innerHTML:e._s(e.example)}})]},proxy:!0}])})],1)],1),n("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.rules,"label-width":"auto","label-position":"left"}},[n("el-row",{attrs:{gutter:15}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{prop:"questionBody","label-width":"0"}},[n("el-input",{attrs:{placeholder:"请输入题干"},model:{value:e.form.questionBody,callback:function(t){e.$set(e.form,"questionBody",t)},expression:"form.questionBody"}})],1)],1),n("el-col",{staticClass:"alert",attrs:{span:24}},[n("div",[e._v("注: 题干中输入()系统自动识别为填空内容")]),n("el-button",{on:{click:e.addCode}},[e._v("插入填空符")])],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"isNumber",label:"输入框是否数字:"}},[n("el-switch",{model:{value:e.form.isNumber,callback:function(t){e.$set(e.form,"isNumber",t)},expression:"form.isNumber"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"readOnly",label:"本题不允许填写:"}},[n("el-switch",{model:{value:e.form.readOnly,callback:function(t){e.$set(e.form,"readOnly",t)},expression:"form.readOnly"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"visible",label:"本题是否显示:"}},[n("el-switch",{model:{value:e.form.visible,callback:function(t){e.$set(e.form,"visible",t)},expression:"form.visible"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"required",label:"必填标识:"}},[n("el-switch",{model:{value:e.form.required,callback:function(t){e.$set(e.form,"required",t)},expression:"form.required"}})],1)],1),n("el-col",{attrs:{span:24}},[n("div",{staticClass:"ljsz"},[n("span",{staticClass:"label"},[e._v("逻辑设置:")]),n("span",{staticClass:"btn",on:{click:e.showRela}},[e._v("题目关联")])])])],1)],1)],1)},i=[],o=(n("99af"),n("ac1f"),n("5319"),n("67b0")),s={mixins:[o["a"]],props:["owner"],data:function(){return{form:{questionBody:"请输入题干",isNumber:!1,readOnly:!1,visible:!0,required:!0},rules:{questionBody:[{required:!0,message:"请输入题干"}]}}},computed:{example:function(){var e=this.form.questionBody.replace(/\(\)|\（\）/g,'\n          <input type="text" placeholder="请输入" class="ds-qi-fill">\n        ');return"".concat(this.owner.questionIndex,".").concat(e)},exampleRules:function(){return this.form.required?[{required:!0,trigger:"change"}]:null}},methods:{addCode:function(){this.form.questionBody+="()"}}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},"69c0":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-set-params"},[n("SelectTable",{attrs:{data:e.data,columns:e.columns}}),n("p",{staticClass:"add-btn"},[n("el-button",{attrs:{type:"danger"},on:{click:e.deleteAll}},[e._v(" 删除所有 ")]),n("el-button",{attrs:{type:"success"},on:{click:e.addRow}},[e._v(" 新增一行 ")])],1)],1)},i=[],o=(n("d81d"),{name:"SetParams",props:{value:{type:Array,default:function(){return[]}}},data:function(){return{data:[],columns:[{prop:"Key",label:"Key",fieldType:"editInput"},{prop:"Value",label:"Value",fieldType:"editInput"},{label:"操作",width:"100",operate:!0}]}},created:function(){this.init()},methods:{getContent:function(){var e=this.data.map((function(e){return{Key:e.Key,Value:e.Value}}));return e},init:function(){this.value&&this.value.length>0?this.data=this.value:this.addRow()},deleteRow:function(){},deleteAll:function(){this.data=[]},addRow:function(){this.data.push({Key:"",KeyEdit:!1,Value:"",ValueEdit:!1})}}}),s=o,r=(n("bd11"),n("2877")),l=Object(r["a"])(s,a,i,!1,null,"557f81ff",null);t["default"]=l.exports},"6cbb":function(e,t,n){"use strict";(function(e){n("c740"),n("d81d"),n("fb6a"),n("ac1f"),n("5319"),n("2ca0"),n("498a");var a=n("2909"),i=n("2d0f"),o=n("22da"),s=n("c465"),r=/^\s*function(\s+\w*)?\(.*\)\s*{/g;t["a"]={name:"DesButtonEdit",mixins:[i["a"]],props:{defaultShowText:{type:Boolean,default:!0},defaultButtonStyle:{type:String,default:""},isDblClickBind:{type:Boolean,default:!1},isMobile:{type:Boolean,default:!1}},data:function(){return{tableData:[],formModel:{},sysButtonSelect:!1,treeData:[],defaultProps:{label:"text",children:"children"},headersParam:{"X-XSRF-TOKEN":dsf.getCookie("XSRF-TOKEN")||""},fileList:[],links:[]}},created:function(){var t=this,n=dsf.mix(!0,[],this.currentData);e.each(n,(function(e){dsf.isUnDef(e.id)&&(e.id=dsf.uuid())})),this.tableData=n,this.isMobile?this.treeData=this.convertTree(Object(o["c"])()):this.treeData=this.convertTree(Object(o["d"])()),this.isDblClickBind&&dsf.designer.recursionLayoutTree(this.owner,null,null,(function(e){e!=t&&e.isFormControl&&e.metadata_fullcode&&e.designId&&t.links.push({label:e.label?e.label+"("+e.metadata_fullcode+")":e.metadata_fullcode,value:e.designId})}))},computed:{setRequestUrl:function(){return dsf.url.getWebPath("file/upload?db=1")}},mounted:function(){},methods:{isUpBtn:function(e){return"system_flow_send"!==e.actionName&&"system_batch_flow_send"!==e.actionName&&"system_template_download"!==e.actionName},convertTree:function(t){var n=[],a={};return e.each(t,(function(e){a[e.moduleName]||(a[e.moduleName]={text:e.moduleName,type:"group",key:e.moduleName,children:[]},n.push(a[e.moduleName]));var t=a[e.moduleName],i=e.moduleName+"-"+e.groupName;a[i]||(a[i]={text:e.groupName,type:"group",key:i,children:[]},t.children.push(a[i])),e.button.key=i+"-"+e.button.text,a[i].children.push(e.button)})),n},openSysButtonSelect:function(){this.$refs.tree&&this.$refs.tree.setCheckedKeys([]),this.sysButtonSelect=!0},allowEdit:function(){return!dsf.isEmptyObject(this.formModel)},addSysButton:function(){var t,n=this,i=this.$refs.tree.getCheckedNodes(!0),o=e.map(i,(function(e){var t=n.createButton(e,!0);return n.defaultShowText||(t.text=""),n.defaultButtonStyle&&(t.btnStyle=n.defaultButtonStyle),t.icon||(t.icon="icon-shezhi"),!t.title&&t.text&&(t.title=t.text),t}));(t=this.tableData).push.apply(t,Object(a["a"])(o)),this.sysButtonSelect=!1},addCustomButton:function(){var e=this.createButton({caption:"自定义按钮",text:this.defaultShowText?"新增按钮":"",btnStyle:this.defaultButtonStyle?this.defaultButtonStyle:"",icon:"icon-shezhi"});this.tableData.push(e)},closeSysButtonSelect:function(){this.sysButtonSelect=!1},yes:function(){return e.each(this.tableData,(function(e){dsf.isUnDef(e.id)&&(e.id=dsf.uuid())})),this.tableData},rowClickHandler:function(e){this.formModel=e},createButton:function(e,t){var n={caption:"",text:"",alias:"",icon:"",btnStyle:"",title:"",isSystem:t,actionName:"",if:"",flowSendOverEvent:"",type:"",isUpload:!1,isLinkSend:!1,isLinkSendFold:!1,disabled:!1,isDblClick:!1,linkBind:"",params:[]},a=dsf.mix(!0,{},n,e);return a},openIcon:function(){window.open(dsf.url.getWebPath("$/pc/iconfont/demo_index.html"),"icondemo")},getIcon:function(e){var t="icon-";return e.startsWith(t)?e.substr(t.length):e},removeButton:function(e){dsf.array.remove(this.tableData,e)},up:function(t){var n=e.findIndex(this.tableData,(function(e){return e==t}));if(n>0){var a=this.tableData[n-1];this.$set(this.tableData,n-1,t),this.$set(this.tableData,n,a)}},down:function(t){var n=e.findIndex(this.tableData,(function(e){return e==t}));if(n>0){var a=this.tableData[n+1];this.$set(this.tableData,n+1,t),this.$set(this.tableData,n,a)}},dblClickChange:function(t){var n=this;!0===t&&e.each(this.tableData,(function(e){n.formModel!=e&&(e.isDblClick=!1)}))},uploadChange:function(e){this.formModel.params=!0===e?[{value:"",desc:"导入接口地址",default:"/file/upload"},{value:"",desc:"导入参数",default:""},{value:"",desc:"可上传的文件类型",default:"xlsx|xls"}]:[]},openEditor:function(e,t){if(!t){var n=e.value.trim();n?this.testCodeBlock(e)||(n=s["a"].replace("$$0$$","return "+JSON.stringify(n))):n=s["a"].replace("$$0$$","return ''"),dsf.layer.pc.openDialog({title:"代码编辑",fullscreen:!0,overflow:"hidden",content:"MonacoEditor",params:{code:n,language:"javascript"},btns:[{text:"确定",handler:function(t){e.value=t.getContent()}},{text:"取消"}]})}},testCodeBlock:function(e){var t=e.value.trim();return!!t&&(r.lastIndex=0,r.test(t))},handleChange:function(e,t){this.fileList=t.slice(-1)},handleSuccess:function(e){if(this.loading=!1,e.success&&2e4==e.state){var t=e.data[0];this.formModel.params[0].value=t.id,this.formModel.params[1].value=t.originalFileName}},handleError:function(){this.loading=!1,dsf.layer.message("上传失败",!1)}}}}).call(this,n("2ef0"))},"6e4c":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[n("DsfButton",{on:{click:e.add}},[e._v("新增页签")])],1),n("el-main",{staticStyle:{padding:"0px"}},[n("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData,"row-class-name":e.tableRowClassName}},[n("el-table-column",{attrs:{label:"显示名称","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.title,callback:function(n){e.$set(t.row,"title",n)},expression:"scope.row.title"}})]}}])}),n("el-table-column",{attrs:{label:"标识","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}})]}}])}),n("el-table-column",{attrs:{label:"是否禁用","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"支持表达式"},model:{value:t.row.disable,callback:function(n){e.$set(t.row,"disable",n)},expression:"scope.row.disable"}})]}}])}),n("el-table-column",{attrs:{label:"是否隐藏","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"支持表达式"},model:{value:t.row.isHide,callback:function(n){e.$set(t.row,"isHide",e._n(n))},expression:"scope.row.isHide"}})]}}])}),n("el-table-column",{attrs:{label:"是否懒加载","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"支持表达式"},model:{value:t.row.lazy,callback:function(n){e.$set(t.row,"lazy",e._n(n))},expression:"scope.row.lazy"}})]}}])}),n("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(n){return e.insert(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(n){return e.deleted(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(n){return e.up(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(n){return e.down(t)}}})]}}])})],1)],1)],1)},i=[],o=(n("c975"),n("a434"),n("b0c0"),n("a9e3"),n("2d0f")),s={name:"NavTabEdit",mixins:[o["a"]],data:function(){return{tableData:[],names:[]}},created:function(){this.tableData=this.currentData||[this.newTab()]},methods:{tableRowClassName:function(e){var t=e.row,n=e.rowIndex,a="";if(t.name){this.names[n]="";var i=this.names.indexOf(t.name);-1!=i&&i<n&&(a="warning-row"),this.names[n]=t.name}return a},newTab:function(){return{title:"Tab"+(this.tableData.length+1),name:null,disable:"false",isHide:"false",badge:null,lazy:"false",controls:[],error:!1}},add:function(){this.tableData.push(this.newTab())},insert:function(e){this.tableData.splice(e.$index+1,0,this.newTab())},deleted:function(e){dsf.array.remove(this.tableData,e.row)},up:function(e){if(e.$index>0){var t=this.tableData[e.$index],n=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(n-1,0,t)}},down:function(e){if(this.tableData.length-1>e.$index){var t=this.tableData[e.$index],n=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(n+1,0,t)}},validate:function(){for(var e in this.tableData){this.tableData[e]["name"]=this.tableData[e]["name"]||dsf.uuid();var t=this.names.indexOf(this.tableData[e]["name"]);if(-1!=t&&t<e)return dsf.layer.message("请解决重复标识",!1),!1}return!0},yes:function(){return this.tableData},checkMaxSpan:function(e,t){e[t]=dsf.isNumber(e[t])?Number(e[t]):null,e[t]&&e[t]>24&&(e[t]=24),e[t]&&e[t]<0&&(e[t]=null)}}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},"71c1":function(e,t,n){"use strict";n("3377")},"72ba":function(e,t,n){"use strict";(function(e,a){n("99af"),n("4de4"),n("4160"),n("caad"),n("ac1f"),n("2532"),n("5319"),n("159b");var i=n("5530"),o=n("cb54"),s=n("2f62"),r=n("e012"),l=n("5032"),c=n("76af"),u=n("d0f8");t["a"]={name:"LeftTree",props:{personObj:{type:Object,default:function(){return{}}},relativeList:{type:Array,default:function(){return[]}},seatObj:{type:Object,default:function(){return null}},relativeObj:{type:Object,default:function(){return{}}}},data:function(){return{title:"",leafProps:{},lazy:!1,isLeaf:"isLeaf",openMultipleChoose:!1,list:[]}},watch:{relativeList:{handler:function(){this.$refs.leftTree.setCheckedNodes([]),this.$refs.leftTree.filter()},deep:!0}},computed:Object(i["a"])(Object(i["a"])({},Object(s["b"])("seatDesign",["panelSize","compelPanelSize"])),{},{personIdAlias:function(){return this.leafProps.id},childrenAlias:function(){return this.leafProps.children},seatedPerson:function(){for(var e={},t=0;t<this.relativeList.length;t++){var n=this.relativeList[t];if(n.person){var a=n["person"][this.personIdAlias];e[a]=n.person}}return e}}),created:function(){this.leftTreeConfig=new r["a"](r["c"]),Object.assign(this,this.leftTreeConfig),this.layoutConfig=new r["a"](r["d"])},mounted:function(){this.getLeafs(),this.addPersonRevertListener()},methods:{filterNode:function(e,t){return t["sys_seated"]=!!this.seatedPerson[t[this.personIdAlias]],!this.seatedPerson[t[this.personIdAlias]]},clickSort:function(){},getLeafs:function(){var t=this,n=dsf.express.replace(this.leftTreeConfig.getLeafsUrl);this.$http.get(n).done((function(n){var a;a=e.isFunction(t.leftTreeConfig.dealRespond)?t.leftTreeConfig.dealRespond(n.data):n.data;var i={},o=[],s=function n(a){for(var s=0;s<a.length;s++){var r=a[s];e.isFunction(t.leftTreeConfig.isDragable)?r.draggable=t.leftTreeConfig.isDragable(r):r.draggable=!0,e.isFunction(t.leftTreeConfig.isUser)?(r.realUser=t.leftTreeConfig.isUser(r),r.realUser&&(o.push(r),i[r[t.personIdAlias]]=r)):(r.realUser=!0,o.push(r),i[r[t.personIdAlias]]=r),e.isArray(r[t.childrenAlias])&&r[t.childrenAlias].length>0&&n(r[t.childrenAlias])}return a};t.list=s(a),t.orderPerson=o,t.$emit("update:personObj",i),t.$nextTick((function(){t.$refs.leftTree.filter(),t.createInteraction(),t.listenAutoSeat()}))}))},lazyLoad:function(t,n){var a=this.leftTreeConfig.lazyLoadFunc;e.isFunction(a)&&a(t,n)},createInteraction:function(){var e=this;o["a"].then((function(){a(".my-tree-node.draggable").draggable({addClasses:!1,start:function(e){console.log("ss")},helper:function(){if(e.openMultipleChoose){var t,n=e.$refs["leftTree"].getCheckedNodes(!0);if(n=n.filter((function(e){return e.realUser&&!e["sys_seated"]})),(null===(t=n)||void 0===t?void 0:t.length)>0){var i='<div class="drag-item" multiple-choose="true">';return n.forEach((function(t){i+="<span data-id=".concat(t[e.leafProps.id],">").concat(t[e.leafProps.label],"</span>")})),i+="</div>",a(i)}return a('<div class="drag-item" empty-person="true">没有可以排座的用户</div>')}var o=a(this).text(),s=a(this).data("id");return a('<div class="drag-item" data-id='.concat(s,">").concat(o,"</div>"))},cursor:"default",cursorAt:{top:-5,left:-5},stop:function(e,t){}})}))},nodeExpand:function(){var e=this;this.$nextTick((function(){e.createInteraction()}))},addPersonRevertListener:function(){l["a"].on(c["a"].PERSON_REVERT_TREE,(function(e){a(".my-tree-node.draggable").draggable("option","revert",!0)}))},listenAutoSeat:function(){var t=this;l["a"].on(c["a"].AUTO_SEAT,(function(){var n=[],a=[];t.relativeList.forEach((function(e){2===e.currentState.couldSeat&&e.person&&(a.push(e),n.push(e.person[t.personIdAlias]))})),t.orderPerson=t.orderPerson.filter((function(a){return!e.includes(n,a[t.personIdAlias])}));var i=[],o=1,s=0;while(s<t.orderPerson.length){var r,l=t.orderPerson[s],c=t.seatObj[o],d=t.relativeObj[o];if(!c)break;if(2!==(null===d||void 0===d||null===(r=d.currentState)||void 0===r?void 0:r.couldSeat)){if(e.isFunction(t.layoutConfig.isSeatAble)){var h=t.layoutConfig.isSeatAble(c,l);if(!h){o++;continue}}i.push(Object(u["f"])(c,l)),o++,s++}else o++}t.$emit("update:relativeList",e.concat(a,i))}))}}}}).call(this,n("2ef0"),n("1157"))},"74ae":function(e,t,n){},7521:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"seat-designer-page",style:e.canvasCss,on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.preRegion(t)}}},[n("region",{attrs:{visible:e.regionVisible,region:e.regionRect}}),n("div",{style:e.panelSty,attrs:{id:"panel_outer"}},[e._t("seat"),n("div",{staticClass:"ds_seat_panel_bg",attrs:{id:"panel_bg"}})],2),e._t("seatPop")],2)},i=[],o=n("3ba1"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["a"]=l.exports},"753e":function(e,t,n){"use strict";(function(e){n("d81d");var a=n("2909"),i=n("2d0f");t["a"]={name:"DesComponents",mixins:[i["a"]],props:{designer:{type:Object,default:function(){return null}}},data:function(){return{show:!1,data:[]}},mounted:function(){var e=[],t=this.designer.$refs.viewProxy;dsf.designer.recursionLayoutTree(t,null,null,(function(t){if(t.isFormControl&&e.push({id:t.designId,caption:t.caption,label:t.label,type:t.$options.ctrlCaption,ctrl:t}),t.isOneToMany)return!1})),this.data=e,this.show=!0},methods:{validate:function(){var t=[],n=this.$refs.table.selection;if(e.each(n,(function(e){if(e.label){var n=dsf.designer.validateCaption(e.ctrl);t.push.apply(t,Object(a["a"])(n))}else t.push("请为"+e.caption+"起名后再试")})),t.length)return dsf.layer.pc.message(t[0],!1),!1},yes:function(){var t=this.$refs.table.selection,n=e.map(t,(function(e){return e.ctrl})),a=[];return e.each(n,(function(t){var n=t.$options.design.layout.exclude,i=t.$options.design.metadata.create.call(t),o=dsf.mix(!0,{},t.$props),s={props:o,metadata:i};e.each(n,(function(e){delete o[e]})),a.push(s)})),a}}}}).call(this,n("2ef0"))},7563:function(e,t,n){"use strict";(function(e){n("c740"),n("d81d"),n("fb6a"),n("a434");var a=n("2d0f");t["a"]={name:"DesTreeImgSet",mixins:[a["a"]],data:function(){return{tableData:[],imgType:[{name:"请选择类型",value:""},{name:"文件类型",value:"file"},{name:"用户类型",value:"user"},{name:"数据类型",value:"data"},{name:"组织类型",value:"unit"}],path:"../../../assets/styles/themes/tree_img/"}},mounted:function(){this.owner.iconMap&&(this.tableData=this.owner.iconMap)},methods:{sliceIcon:function(e){return e?e.slice(this.path.length):""},addCol:function(){var e={typeName:"",imgType:"",icon:""};this.tableData.push(e)},changeProperty:function(e,t){e.icon&&(this.tableData[t].icon="")},deleted:function(e){var t=this;dsf.layer.confirm("确定要删除【".concat(e.row.typeName,"】节点类型吗?")).then((function(){t.tableData.splice(e.$index,1)})).catch((function(e){return e}))},validate:function(){return-1!==e.findIndex(this.tableData,(function(e){return""===e.typeName}))?(dsf.layer.message("请输入节点类型",!1),!1):this.isRepeat(e.map(this.tableData,"typeName"))?(dsf.layer.message("一种节点类型只能配置一次",!1),!1):void 0},isRepeat:function(e){var t={};for(var n in e){if(t[e[n]])return!0;t[e[n]]=!0}return!1},yes:function(){return this.tableData},openIconDialog:function(e){if(!e.imgType)return dsf.layer.message("请先选择图标类型",!1),!1;dsf.layer.openDialog({title:"树图标选择",fullscreen:!1,content:"DesTreeImgList",params:{treeList:e},width:"500px",height:"350px",btns:[{text:"确定",handler:function(e){}},{text:"取消"}]})}}}}).call(this,n("2ef0"))},"763d":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"range-rule"},[n("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.config.selectTab,callback:function(t){e.$set(e.config,"selectTab",t)},expression:"config.selectTab"}},[n("el-tab-pane",{staticClass:"dept",attrs:{label:"部门+角色",name:"0"}},[n("div",{staticClass:"dept_left"},[n("div",{staticClass:"top"},[n("el-radio",{attrs:{label:"assign"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 指定部门 ")]),n("el-radio",{attrs:{label:"extend"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 继承节点部门 ")]),n("el-radio",{attrs:{label:"super"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 高级模式 ")]),n("el-checkbox",{staticClass:"send-to-people",model:{value:e.config.IsUser,callback:function(t){e.$set(e.config,"IsUser",t)},expression:"config.IsUser"}},[e._v(" 发送到人 ")]),n("el-checkbox",{staticClass:"is-deep",model:{value:e.config.IsDeep,callback:function(t){e.$set(e.config,"IsDeep",t)},expression:"config.IsDeep"}},[e._v(" 深度遍历 ")])],1),n("div",{staticClass:"content-box",class:{assign:"assign"===e.config.model}},[n("SelectTree",{directives:[{name:"show",rawName:"v-show",value:"assign"==e.config.model,expression:"config.model == 'assign'"}],attrs:{"tree-data":e.deptData,select:e.selectDept},on:{"update:select":function(t){e.selectDept=t}}}),"extend"===e.config.model?n("SelectTable",{attrs:{data:e.nodesData,select:e.selectExtends,columns:e.deptColumns},on:{"update:select":function(t){e.selectExtends=t}}}):e._e(),"super"==e.config.model?n("div",{staticClass:"super"},[n("EventSetting",{ref:"editor",attrs:{language:e.language,code:e.code}})],1):e._e()],1)]),n("div",{staticClass:"dept_right"},[n("SelectTree",{attrs:{"tree-data":e.roleData,select:e.selectRole},on:{"update:select":function(t){e.selectRole=t}}})],1)]),n("el-tab-pane",{attrs:{label:"直接选人",name:"1"}},[n("div",{staticClass:"dept_left"},[n("div",{staticClass:"top"},[n("el-radio",{attrs:{label:"assign"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 指定人员 ")]),n("el-radio",{attrs:{label:"extend"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 继承节点经办人 ")]),n("el-radio",{attrs:{label:"super"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 高级模式 ")])],1),n("div",{staticClass:"content-box",class:{assign:"assign"===e.config.model}},[n("SelectTree",{directives:[{name:"show",rawName:"v-show",value:"assign"==e.config.model,expression:"config.model == 'assign'"}],attrs:{"tree-data":e.peopleData,multi:!0,select:e.selectPeople},on:{"update:select":function(t){e.selectPeople=t}}}),"extend"===e.config.model?n("SelectTable",{attrs:{data:e.nodesData,select:e.selectExtendPerson,columns:e.noLevelColumns},on:{"update:select":function(t){e.selectExtendPerson=t}}}):e._e(),"super"==e.config.model?n("div",{staticClass:"super"},[n("EventSetting",{ref:"personEditor",attrs:{language:e.language,code:e.code}})],1):e._e()],1)])]),n("el-tab-pane",{attrs:{label:"行政岗位",name:"2"}},[n("div",{staticClass:"dept_left"},[n("div",{staticClass:"top"},[n("el-radio",{attrs:{label:"assign"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 指定岗位 ")]),n("el-radio",{attrs:{label:"super"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 高级模式 ")]),n("el-checkbox",{staticClass:"send-to-people",model:{value:e.config.IsUser,callback:function(t){e.$set(e.config,"IsUser",t)},expression:"config.IsUser"}},[e._v(" 发送到人 ")]),n("el-checkbox",{staticClass:"is-deep",model:{value:e.config.IsDeep,callback:function(t){e.$set(e.config,"IsDeep",t)},expression:"config.IsDeep"}},[e._v(" 深度遍历 ")])],1),n("div",{staticClass:"content-box",class:{assign:"assign"===e.config.model}},["assign"===e.config.model?n("SelectTable",{attrs:{data:e.jobData,select:e.selectJobs,columns:e.jobColumns},on:{"update:select":function(t){e.selectJobs=t}}}):e._e(),"super"==e.config.model?n("div",{staticClass:"super"},[n("EventSetting",{ref:"jobEditor",attrs:{language:e.language,code:e.code}})],1):e._e()],1)])]),n("el-tab-pane",{staticClass:"dept",attrs:{label:"人+关系",name:"3",lazy:!0}},[n("div",{staticClass:"dept_left"},[n("div",{staticClass:"top"},[n("el-radio",{attrs:{label:"assign"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 继承节点经办人 ")]),n("el-radio",{attrs:{label:"super"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 高级模式 ")]),n("el-checkbox",{staticClass:"send-to-people",model:{value:e.config.IsUser,callback:function(t){e.$set(e.config,"IsUser",t)},expression:"config.IsUser"}},[e._v(" 发送到人 ")])],1),n("div",{staticClass:"content-box"},["assign"===e.config.model?n("SelectTable",{attrs:{data:e.nodesData,select:e.selectAgents,columns:e.noLevelColumns},on:{"update:select":function(t){e.selectAgents=t}}}):e._e(),"super"==e.config.model?n("div",{staticClass:"super"},[n("EventSetting",{ref:"relationEditor",attrs:{language:e.language,code:e.code}})],1):e._e()],1)]),n("div",{staticClass:"dept_right"},[n("SelectTree",{attrs:{"tree-data":e.roleData,select:e.selectRelation},on:{"update:select":function(t){e.selectRelation=t}}})],1)])],1),n("div",{staticClass:"bottom"},[n("div",{staticClass:"btnBox"},[n("el-button",{staticClass:"ds-button plain",attrs:{icon:"iconfont icon-xia",size:"small"},on:{click:e.chooseFun}},[e._v(" 选择 ")]),n("el-button",{staticClass:"ds-button plain",attrs:{icon:"iconfont icon-delete",size:"small"},on:{click:e.clearData}},[e._v(" 清空 ")])],1),n("div",{staticClass:"table-box"},[n("SelectTable",{attrs:{data:e.config.tableResult.Rule||[],columns:e.resultColumns}})],1)])],1)},i=[],o=(n("99af"),n("7db0"),n("4160"),n("b0c0"),n("159b"),n("3b6b")),s={name:"RangeRule",props:{nodes:{type:Array,default:function(){return[]}},checked:{type:Object,default:function(){return{}}},code:{type:String,default:""},language:{type:String,default:"javascript"},value:{type:Object,default:function(){return{}}}},data:function(){return{config:{selectTab:"0",model:"assign",IsDeep:!1,IsUser:!0,tableResult:{Type:"",IsUser:1,Rule:[]},chooseDataObj:{}},rangeType:null,deptData:[],nodesData:[],roleData:[],peopleData:[],extendPersonData:[],jobData:[{label:1,desc:2}],selectDept:null,selectRole:null,selectExtends:[],selectPeople:null,selectExtendPerson:[],selectJobs:[],selectAgents:[],selectRelation:null,deptOptions:[{label:"当前部门",value:-1},{label:"子机构",value:0},{label:"一级部门",value:1},{label:"二级部门",value:2},{label:"三级部门",value:3}],deptColumns:[],resultColumns:[{prop:"name",label:"范围"},{prop:"IsSelected",label:"状态",width:"140",options:Object(o["f"])()},{label:"操作",width:"100",operate:!0}],noLevelColumns:[],jobColumns:[{selection:!0,type:"selection",width:50},{prop:"label",label:"岗位名称"},{prop:"desc",label:"备注"}]}},created:function(){var e=[{type:"index",width:44},{selection:!0,type:"selection",width:50},{prop:"label",label:"范围"}];this.deptColumns=[].concat(e,[{prop:"level",label:"级别",options:this.deptOptions}]),this.noLevelColumns=[].concat(e),this.initExtendDataForOrg(),this.initAssignDataForOrg(),this.getFlowPosition(),this.initAssignDataForPeople(),this.initData()},mounted:function(){},methods:{getContent:function(){return this.config.tableResult},tabsChange:function(e){this.clearData()},initData:function(){var e=this,t=this.value&&dsf.mix(!0,[],this.value.Rule)||[];t&&t.length>0&&(this.config.tableResult=dsf.mix(!0,{},this.value),t.forEach((function(t){var n,a=e.value,i=e.config;12===a.Type?(i.model="super",i.selectTab="2",n="jobAdvanced"):21===a.Type?(i.model="assign",i.selectTab="1",n=t.id):22===a.Type?(i.model="extend",i.selectTab="1",n=t.id):23===a.Type?(i.model="super",i.selectTab="1",n="personAdvanced"):31===a.Type?(i.model="assign",i.selectTab="0",n=t.DeptID+"-"+t.RoleID):32===a.Type?(i.model="extend",i.selectTab="0",n=t.NodeID+"-"+t.RoleID):33===a.Type?(i.model="super",i.selectTab="0",n="role-"+t.RoleID):41===a.Type?(i.model="assign",i.selectTab="3",n="relation"+t.id):42===a.Type?(i.model="super",i.selectTab="3",n="relationAdvanced"):n=t.id,e.config.chooseDataObj[n]=t})))},initAssignDataForOrg:function(){var e=this;this.$http.get("oua/getDeptByCurUnit",{}).then((function(t){if(t.data.success){var n=e.formatData(t.data.data);e.deptData=[n]}}))},initExtendDataForOrg:function(){var e=this.nodes,t=[];t.push({id:"DS_CUR_SEND_NODE",label:"当前发送节点",level:1});for(var n=0;n<e.length;n++)t.push({id:e[n].id,label:e[n].name,level:1});this.nodesData=t},initAssignDataForPeople:function(){var e=this;this.$http.get("oua/getUserByCurUnit",{}).then((function(t){if(t.data.success){var n=e.formatData(t.data.data,"1");e.peopleData=[n]}}))},getFlowPosition:function(){var e=this;this.$http.get("oua/getRole",{}).then((function(t){if(t.data.success){var n=[];t.data.data.forEach((function(t){n.push(e.formatData(t,"2"))})),e.roleData=n}}))},formatData:function(e,t){if(e.label=e.NAME||e._name,e.id=e.id||e._id,e.type=e.TYPE||e._type,t&&(e.disabled=e.type!=t),e.attributes={NAME:e.label,id:e.id,FID:e.pid,type:e.type},delete e.NAME,delete e.Atts,delete e.TYPE,delete e.FID,e.children)for(var n=0;n<e.children.length;n++)this.formatData(e.children[n],t);return e},handleClick:function(e){e.index;this.config.model="assign",this.clearData()},editorLoaded:function(e){var t=this.code;"html"==this.language&&(t=dsf.unescapeHTML(t)),this.$refs[e].setContent(t)},deleteRow:function(e){12===e.Type?delete this.config.chooseDataObj["jobAdvanced"]:23===e.Type?delete this.config.chooseDataObj["personAdvanced"]:31===e.Type?delete this.config.chooseDataObj[e.DeptID+"-"+e.RoleID]:32===e.Type?delete this.config.chooseDataObj[e.NodeID+"-"+e.RoleID]:33===e.Type?delete this.config.chooseDataObj["role-"+e.RoleID]:41===e.Type?delete this.config.chooseDataObj["relation"+e.id]:42===e.Type?delete this.config.chooseDataObj["relationAdvanced"]:delete this.config.chooseDataObj[e.id]},chooseFun:function(){var e=this;if(this.verify()){var t=this.config;if("0"===t.selectTab)if("assign"===t.model)this.addRule(this.selectDept,this.selectRole);else if("extend"===t.model)this.selectExtends.forEach((function(t){e.addRule(t,e.selectRole)}));else{var n={label:"表达式选角色",exp:this.$refs.editor.getContent(),id:dsf.uuid(32)};this.addRule(n,this.selectRole)}else if("1"===t.selectTab)if("assign"===t.model)this.selectPeople.forEach((function(t){e.addPerson(t)}));else if("extend"===t.model)this.selectExtendPerson.forEach((function(t){e.addPerson(t)}));else{var a={label:"表达式选人",exp:this.$refs.personEditor.getContent(),id:dsf.uuid(32)};this.addPerson(a)}else if("2"===t.selectTab){if("super"===t.model){var i={label:"表达式选岗位"+(t.IsUser?"(发送到人)":""),exp:this.$refs.jobEditor.getContent(),id:dsf.uuid(32)};this.addJob(i)}}else if("assign"===t.model)this.selectAgents.forEach((function(t){e.addRelation(t,e.selectRelation)}));else if("super"===t.model){var o={label:"表达式选关系",exp:this.$refs.relationEditor.getContent(),id:dsf.uuid(32)};this.addRelation(o,this.selectRelation)}}},verify:function(){var e=this.config;if("0"===e.selectTab){if("assign"===e.model&&!this.selectDept)return dsf.layer.alert("请选择左侧指定部门节点"),!1;if("extend"===e.model&&0===this.selectExtends.length)return dsf.layer.alert("请选择继承的节点部门"),!1;if(!this.selectRole)return dsf.layer.alert("请选择右侧角色节点"),!1}else if("1"===e.selectTab){if("assign"===e.model&&!this.selectPeople)return dsf.layer.alert("请选择指定人员"),!1;if("extend"===e.model&&0===this.selectExtendPerson.length)return dsf.layer.alert("请选择继承节点经办人"),!1}else if("2"===e.selectTab){if("assign"===e.model)return dsf.layer.alert("暂无真实数据"),!1}else{if("assign"===e.model&&0===this.selectAgents.length)return dsf.layer.alert("请选择左侧继承节点经办人"),!1;if(!this.selectRelation)return dsf.layer.alert("请选择右侧关系节点"),!1}return!0},addRule:function(e,t){var n=this.config,a="";a+=n.IsDeep?"深度遍历":"",a+=n.IsDeep&&n.IsUser?",":"",a+=n.IsUser?"发送到人":"";var i,o="".concat(e&&e.label,"-").concat(this.getDeptLevel(e&&e.level)).concat(t.label).concat(a?"("+a+")":""),s={id:dsf.uuid(32),name:o,IsDeep:n.IsDeep?1:0,IsUser:n.IsUser?1:0,IsSelected:0,RoleID:t.id,RoleName:t.label};"assign"===n.model?(Object.assign(s,{Type:31,DeptID:e.id,DeptName:e.label}),i=s.DeptID+"-"+s.RoleID):"extend"===n.model?(Object.assign(s,{NodeID:e.id,NodeName:e.label,Type:32,Level:e.level,DeptName:e.label}),i=s.NodeID+"-"+s.RoleID):(Object.assign(s,{Type:33,exp:e.exp}),i="role-"+t.id),this.addToTable(n,i,s)},addPerson:function(e){var t,n=this.config,a={id:e.id,name:e.label,IsSelected:0,IsUser:1};"assign"===n.model?(Object.assign(a,{UserID:e.id,UserName:e.label,DeptID:e.UnitID,DeptName:e.UnitName,Type:21}),t=a.id):"extend"===n.model?(Object.assign(a,{NodeID:e.id,NodeName:e.label,Type:22}),t=a.id):(Object.assign(a,{exp:e.exp,Type:23}),t="personAdvanced"),this.addToTable(n,t,a)},addJob:function(e){var t,n=this.config,a={id:e.id,name:e.label,IsDeep:n.IsDeep?1:0,IsUser:n.IsUser?1:0,IsSelected:0};"super"===n.model&&(Object.assign(a,{JobID:e.id,JobName:e.label,exp:e.exp,Type:12}),t="jobAdvanced"),this.addToTable(n,t,a)},addRelation:function(e,t){var n,a=this.config,i="".concat(e&&e.label,"-").concat(t.label).concat(a.IsUser?"(发送到人)":""),o={id:e.id,name:i,IsUser:a.IsUser?1:0,RelationID:t.id,RelationName:t.label,IsSelected:0};"assign"===a.model?(Object.assign(o,{NodeID:e.id,NodeName:e.label,Type:41}),n="relation"+e.id):"super"===a.model&&(o.Type=42,n="relationAdvanced"),this.addToTable(a,n,o)},addToTable:function(e,t,n){e.chooseDataObj[t]||(e.tableResult.IsUser=n.IsUser,e.tableResult.Type=n.Type,e.chooseDataObj[t]=n,e.tableResult.Rule.push(n))},getDeptLevel:function(e){if(!e||"0"!==this.config.selectTab)return"";var t=this.deptOptions.find((function(t){return t.value===e}));return t.label+"-"},clearData:function(){this.config.tableResult.Type=31,this.config.tableResult.IsUser=0,this.config.tableResult.Rule=[],this.config.chooseDataObj={}}}},r=s,l=(n("0543"),n("2877")),c=Object(l["a"])(r,a,i,!1,null,"d1d71bf0",null);t["default"]=c.exports},7662:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("SelectTree",{attrs:{"tree-data":e.formData,select:e.selectForm,checked:e.checked,"show-search":!0,loading:e.loading},on:{"update:select":function(t){e.selectForm=t}}})],1)},i=[],o=(n("4160"),n("b0c0"),n("159b"),n("2d0f")),s={name:"ChooseForm",mixins:[o["a"]],data:function(){return{formData:[],selectForm:null,checked:[],loading:!1}},created:function(){this.initFlow()},mounted:function(){},methods:{yes:function(){return this.selectForm},validate:function(){return!!this.selectForm||(dsf.layer.message("请选择表单",!1),!1)},initFlow:function(){var e=this;this.loading=!0,this.$http.get("oua/getPage",{},$$webRoot).then((function(t){if(t.data.success){var n=t.data.data,a=[];n.forEach((function(t){a.push(e.formatData(t,"0"))})),e.formData=a,e.loading=!1}}))},formatData:function(e,t){if(e.label=e.name,e.id=e.dsfa_rm_id,t&&(e.disabled=e.type_value===t),e.children)for(var n=0;n<e.children.length;n++)this.formatData(e.children[n],t);return e}}},r=s,l=(n("dc1c"),n("2877")),c=Object(l["a"])(r,a,i,!1,null,"755d4343",null);t["default"]=c.exports},"76af":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var a="file/upload/",i={KEY_DELETE:"key_delete",KEY_CTRL_D:"key_ctrl_d",BODY_EMPTY_CLICK:"body_empty_click",SEAT_POP:"seat_pop",GET_ACTIVE_SEAT:"get_active_seat",CLEAN_ALL_SEAT_NUM:"clean_all_seat_num",CLEAN_SELECT_SEAT_NUM:"clean_select_seat_num",AFTER_QUICK_ORDER:"after_quick_order",SAVE_LAYOUT:"save_layout",PERSON_REVERT_TREE:"person_revert_tree",LEFT_CLICK_SEAT:"left_click_seat",AUTO_SEAT:"auto_seat"}},"76df":function(e,t,n){"use strict";(function(e){n("4de4"),n("4160"),n("b0c0"),n("159b");var a=n("2d0f");t["a"]={name:"PagePrivilege",mixins:[a["a"]],data:function(){return{tableData:[]}},created:function(){this.tableData=this.currentData||[]},methods:{add:function(){var t=this;this.$openDialog({title:"页面选择",width:this.config.width,height:this.config.height,top:"10vh",params:{path:"dsfa/oua/privilege/selectpri"},btns:[{text:"确定",handler:function(n){if(n.content){var a=n.content;if(a&&a.yes&&dsf.isFunction(a.yes)){var i=a.yes();if(!i)return!1;e.forEach(i,(function(e){var n=t.tableData.filter((function(t,n){return t["priid"]==e["dsfa_oua_privilege_id"]}));n.length>0?n.name=e["_name"]:t.tableData.push({key:"",priid:e["dsfa_oua_privilege_id"],name:e["_name"]})}))}}}},{text:"取消"}]})},deleted:function(e){dsf.array.remove(this.tableData,e.row)},yes:function(){return this.tableData}}}}).call(this,n("2ef0"))},"771a":function(e,t,n){"use strict";n("74ae")},7728:function(e,t,n){"use strict";(function(e){n("d81d");var a=n("2d0f");t["a"]={name:"DesTableColumnsInfo",mixins:[a["a"]],data:function(){return{tableData:[]}},mounted:function(){for(var e=0;e<this.currentData.length;e++)this.tableData.push({text:"第"+(e+1)+"列",width:this.currentData[e].width})},methods:{yes:function(){var t=e.map(this.tableData,(function(e){return dsf.isNumber(e.width)&&(e.width=e.width+"px"),{width:e.width}}));return t}}}}).call(this,n("2ef0"))},7864:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[n("DsfButton",{on:{click:e.add}},[e._v("权限选择")])],1),n("el-main",{staticStyle:{padding:"0px"}},[n("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData}},[n("el-table-column",{attrs:{label:"序号",type:"index",width:"50","header-align":"center",align:"center"}}),n("el-table-column",{attrs:{label:"权限标识","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.key,callback:function(n){e.$set(t.row,"key",n)},expression:"scope.row.key"}})]}}])}),n("el-table-column",{attrs:{label:"权限名称",prop:"name","header-align":"center",align:"center"}}),n("el-table-column",{attrs:{label:"权限ID",prop:"priid",width:"280","header-align":"center",align:"center"}}),n("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(n){return e.deleted(t)}}})]}}])})],1)],1)],1)},i=[],o=n("76df"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["default"]=l.exports},"7a66":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"events",style:{top:e.isSub?e.toPx(e.parentNode.imgHeight+2*e.parentNode.padding):0}},e._l(e.events,(function(t){return n("div",{directives:[{name:"show",rawName:"v-show",value:!t.hide,expression:"!ev.hide"}],key:t.id,staticClass:"ds_tool_event_drag tool_event",class:{selected:e.checked===t},style:{width:t.width+"px",height:t.height+"px",top:e.toPx(t.point.y),left:e.toPx(t.point.x)},attrs:{draggable:!e.isDrawLine,"data-id":t.id},on:{mousedown:function(n){return e.selectEvent(n,t)},click:function(n){return e.selectEvent(n,t)},dragstart:function(n){return e.drag(n,t)},touchstart:function(n){return e.drag(n,t)}}},[n("img",{class:{selected:e.checked===t},style:{width:e.toPx(t.img.width),height:e.toPx(t.img.height)},attrs:{src:t.url,draggable:"false"}})])})),0)},i=[],o=(n("4160"),n("c975"),n("159b"),n("4795"),n("5530")),s=n("531e"),r={name:"Events",props:{nodes:{type:Array,default:function(){return[]}},events:{type:Array,default:function(){return[]}},isDrawLine:{type:Boolean,default:function(){return!1}},checked:{type:Object,default:function(){return{}}},isSub:{type:Boolean,default:function(){return!1}},parentNode:{type:Object,default:function(){return null}},config:{type:Object,default:function(){return{}}}},data:function(){return{current:null,crashNode:null}},created:function(){},mounted:function(){this.$bus.$on("showSubNode".concat(this.isSub?this.parentNode.id:""),this.showSubNode),this.$bus.$on("nodeMove".concat(this.isSub?this.parentNode.id:""),this.nodeMove)},methods:{toPx:s["h"],drag:function(e,t){e.dataTransfer&&e.dataTransfer.setDragImage(new Image,0,0),"dragstart"===e.type?e=event||e:event.touches&&(e=event.touches[0]?event.touches[0]:event);var n={x:e.offsetX,y:e.offsetY};this.$bus.$emit("update-checked",t),this.current=Object(o["a"])(Object(o["a"])({},t),{},{offset:n}),this.$bus.$emit("dragCloneEvent",e,this.current)},selectEvent:function(e,t){var n=this;if(e.stopPropagation(),this.$bus.$emit("update-checked",t),this.isDrawLine){var a="startDraw".concat(this.isSub?this.parentNode.id:"");setTimeout((function(){n.$bus.$emit(a,e,t,n.parentNode)}),0)}},nodeMove:function(e){var t=this;if(e&&this.events&&this.events.length>0){this.crashNode=e,this.$store.commit("flow/setPointsByNode",{node:e,obj:this.events[0]});var n=this.$store.getters["flow/getPoints"](e.id),a=[],i=this.$store.state.flow.page.scale;n.forEach((function(n){t.events.forEach((function(o){e.id===o.nodeId&&n.direction===o.direction&&n.index===o.index&&(o=Object.assign(o,n),o.point.x=o.point.x/i,o.point.y=o.point.y/i,o.out&&o.out.length>0&&t.$bus.$emit("eventMove".concat(t.isSub?t.parentNode.id:""),o),a.push(n))}))})),a.forEach((function(a){var i=n.indexOf(a);t.$store.commit("flow/deletePoint",{id:e.id,index:i})}))}},showSubNode:function(e){var t=this;this.events.forEach((function(n){n.nodeId===e.id&&(n.hide=!e.open.show,n.out&&n.out.length>0&&t.$bus.$emit("hideLines",n.out,!e.open.show))}))},globalMove:function(e,t,n){if(e)for(var a=0;a<this.events.length;a++){var i=this.events[a];t&&(i.point.x+=e.x),n&&(i.point.y+=e.y)}}}},l=r,c=(n("4cc9"),n("2877")),u=Object(c["a"])(l,a,i,!1,null,"fe7a5de4",null);t["a"]=u.exports},"7ba5":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-question-formwrap ds-question-item"},[n("div",{staticClass:"example question-slider"},[n("el-form",{attrs:{"label-position":"top"}},[n("el-form-item",{attrs:{prop:"value",label:e.exampleLabel}},[n("el-slider",{attrs:{min:e.form.min,max:e.form.max,disabled:e.form.readOnly,step:e.form.step},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1)],1),n("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.rules,"label-width":"auto","label-position":"left"}},[n("el-row",{attrs:{gutter:15}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{prop:"questionBody","label-width":"0"}},[n("el-input",{attrs:{placeholder:"请输入题干"},model:{value:e.form.questionBody,callback:function(t){e.$set(e.form,"questionBody",t)},expression:"form.questionBody"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"step",label:"最小滑动单位:"}},[n("el-input-number",{attrs:{min:e.form.min,max:e.form.max},model:{value:e.form.step,callback:function(t){e.$set(e.form,"step",t)},expression:"form.step"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"min",label:"最小值:"}},[n("el-input-number",{attrs:{min:0,max:e.form.max},model:{value:e.form.min,callback:function(t){e.$set(e.form,"min",t)},expression:"form.min"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"max",label:"最大值:"}},[n("el-input-number",{attrs:{min:e.form.min},model:{value:e.form.max,callback:function(t){e.$set(e.form,"max",t)},expression:"form.max"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"minText",label:"最小值显示文本:"}},[n("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.minText,callback:function(t){e.$set(e.form,"minText",t)},expression:"form.minText"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"maxText",label:"最大值显示文本:"}},[n("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.maxText,callback:function(t){e.$set(e.form,"maxText",t)},expression:"form.maxText"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"readOnly",label:"本题不允许填写:"}},[n("el-switch",{model:{value:e.form.readOnly,callback:function(t){e.$set(e.form,"readOnly",t)},expression:"form.readOnly"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"visible",label:"本题是否显示:"}},[n("el-switch",{model:{value:e.form.visible,callback:function(t){e.$set(e.form,"visible",t)},expression:"form.visible"}})],1)],1),n("el-col",{attrs:{span:24}},[n("div",{staticClass:"ljsz"},[n("span",{staticClass:"label"},[e._v("逻辑设置:")]),n("span",{staticClass:"btn",on:{click:e.showRela}},[e._v("题目关联")])])])],1)],1)],1)},i=[],o=(n("99af"),n("67b0")),s={mixins:[o["a"]],props:["owner"],data:function(){return{value:0,form:{questionBody:"请输入题干",step:1,readOnly:!1,visible:!0,min:0,max:100,minText:"",maxText:""},rules:{questionBody:[{required:!0,message:"请输入题干"}]}}},computed:{exampleLabel:function(){return"".concat(this.owner.questionIndex,".").concat(this.form.questionBody,"(").concat(this.value,")")},exampleRules:function(){return this.form.required?[{required:!0,trigger:"change"}]:null}},methods:{}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},"7d2b":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("div",{staticClass:"ds-tree-box fl-box"},[n("div",{staticClass:"dsf-tree-search"},[n("el-input",{attrs:{placeholder:"输入名称"},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}},[n("i",{staticClass:"iconfont el-input__icon icon-Magnifier",attrs:{slot:"suffix"},slot:"suffix"})]),n("el-button",{staticClass:"ds-button small chooseForm",attrs:{disabled:e.disabled},on:{click:function(t){return e.chooseFlow()}}},[e._v(" 选择流程 ")])],1),n("SelectTree",{attrs:{"tree-data":e.flowData,select:e.selectFlow,checked:e.checked,"show-search":!1,"form-search-key":e.searchKey},on:{"update:select":function(t){e.selectFlow=t}}})],1),n("div",{staticClass:"fr-box"},[n("div",{staticClass:"top"},[n("div",{staticClass:"inline"},[n("label",{staticClass:"form-label"},[e._v("表单名称：")]),n("div",{staticClass:"input-inline",attrs:{title:e.curNode&&e.curNode.pageTitle}},[e._v(" "+e._s(e.curNode&&e.curNode.pageTitle||"暂无")+" ")])]),n("el-button",{staticClass:"ds-button small chooseForm",attrs:{disabled:e.disabled},on:{click:function(t){return e.chooseForm()}}},[e._v(" 选择表单 ")]),n("el-button",{staticClass:"ds-button small applyTo",attrs:{disabled:e.disabled},on:{click:function(t){return e.applyTo()}}},[e._v(" 应用于 ")])],1),n("el-tabs",{staticClass:"tabs",model:{value:e.selectTab,callback:function(t){e.selectTab=t},expression:"selectTab"}},[n("el-tab-pane",{staticClass:"pa",attrs:{label:"元素控制",name:"0"}},[n("SelectTable",{attrs:{data:e.curNode&&e.curNode.ctrls||[],columns:e.eleColumns}})],1),n("el-tab-pane",{attrs:{label:"操作控制",name:"1"}},[n("SelectTable",{attrs:{data:e.curNode&&e.curNode.btns||[],columns:e.btnsColumns}})],1)],1)],1)])},i=[],o=n("d6cb"),s=o["a"],r=(n("2ed5"),n("2877")),l=Object(r["a"])(s,a,i,!1,null,"2f8cc588",null);t["default"]=l.exports},"7dee":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",{staticStyle:{"padding-right":"10px","text-align":"right"}},[n("DsfButton",{on:{click:e.addCol}},[e._v("新增")])],1),n("el-main",{staticStyle:{padding:"0px"}},[n("el-table",{staticClass:"ds-table",attrs:{border:!0,data:e.tableData,size:"small","highlight-current-row":!0}},[n("el-table-column",{attrs:{label:"节点类型","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"请输入"},model:{value:t.row.typeName,callback:function(n){e.$set(t.row,"typeName",n)},expression:"scope.row.typeName"}})]}}])}),n("el-table-column",{attrs:{label:"图标类型","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{placeholder:"请选择"},on:{change:function(n){return e.changeProperty(t.row,t.$index)}},model:{value:t.row.imgType,callback:function(n){e.$set(t.row,"imgType",n)},expression:"scope.row.imgType"}},e._l(e.imgType,(function(e){return n("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)]}}])}),n("el-table-column",{attrs:{label:"节点图标","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.openIconDialog(t.row)}}},[e._v(" "+e._s(t.row.icon?e.sliceIcon(t.row.icon):"选择图标")+" ")])]}}])}),n("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.deleted(t)}}},[e._v("删除")])]}}])})],1)],1)],1)},i=[],o=n("7563"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["default"]=l.exports},"7ecc":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-row",{staticStyle:{width:"100%"}},[n("el-col",{attrs:{span:6}},[n("el-checkbox",{attrs:{border:"",indeterminate:e.isIndeterminate},on:{change:e.chooseAll},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),n("ul",{staticClass:"check-list"},e._l(e.tools,(function(t,a){return n("li",{key:t.val},[n("el-checkbox",{attrs:{label:t.val,value:t.checked,checked:!1,name:"type"},on:{change:function(n){return e.chooseItem(t,a)}}},[e._v(e._s(t.text))])],1)})),0)],1),n("el-col",{attrs:{span:18}},[n("div",{staticClass:"ue-container"},[n("div",{attrs:{id:"u_template"}})])])],1)],1)},i=[],o=n("ca3a"),s=o["a"],r=(n("f1d2"),n("2877")),l=Object(r["a"])(s,a,i,!1,null,"65fae603",null);t["default"]=l.exports},"7f19":function(e,t,n){},"7f66":function(e,t,n){},8057:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"des-default-value"},[e.multiple?n("div",{staticStyle:{"text-align":"right","margin-bottom":"15px"}},[n("DsfButton",{attrs:{text:"增加默认值",size:"mini"},on:{click:e.addData}})],1):e._e(),n("div",{staticStyle:{"max-height":"60vh",overflow:"auto"}},[e._l(e.tableData,(function(t,a){return[n("el-table",{key:a,staticStyle:{width:"100%","margin-bottom":"15px"},attrs:{data:t,border:!0}},[n("el-table-column",{attrs:{prop:"text",label:"名称",width:"150"}}),n("el-table-column",{attrs:{prop:"value",label:"值"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.value,callback:function(n){e.$set(t.row,"value",n)},expression:"scope.row.value"}})]}}],null,!0)},[e.multiple?n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("值")]),n("DsfButton",{staticStyle:{float:"right"},attrs:{text:"删除",size:"mini"},on:{click:function(t){return e.removeData(a)}}})],1):e._e()])],1)]}))],2)])},i=[],o=(n("4160"),n("d81d"),n("a434"),n("b0c0"),n("159b"),n("2d0f")),s={name:"DesDefaultValue",mixins:[o["a"]],data:function(){return{multiple:!1,tableData:[]}},created:function(){this.multiple=this.config.multiple||!1,this.valueAttributes=dsf.mix(!0,[],this.owner.metadata.valueAttributes),this.init()},methods:{yes:function(){var e=this.tableData.map((function(e){var t={};return e.forEach((function(e){t[e.code]=e.value||""})),t}));return 1==e.length?e[0]:e},init:function(){var e,t=this,n=this.owner.metadata.defaultValue,a=this.currentData;e="array"==dsf.type(a)?dsf.mix(!0,[],a):"object"==dsf.type(a)?[dsf.mix(!0,{},a)]:"array"==dsf.type(n)?dsf.mix(!0,[],n):[dsf.mix(!0,{},n)],e.forEach((function(e){return t.addData(e)}))},addData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.tableData.push(this.valueAttributes.map((function(t){return{code:t.code,text:t.name,value:void 0==e[t.code]?null:e[t.code]}})))},removeData:function(e){this.tableData.length<2?(this.tableData=[],this.addData()):this.tableData.splice(e,1)}}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},"80ae":function(e,t,n){"use strict";n("4e82"),n("b0c0");var a=n("5530"),i=n("55c1"),o=n("531e"),s=n("3b6b"),r=function(e){var t="task"===e.sort&&"102"!==e.type?i["g"]:i["f"];this.padding=5,this.nameWidth=120;var n,r=Object.assign({name:"",width:t.width,height:t.height,x:0,y:0,img:"",sort:"task",type:"101"},e);if(this.id=r.id||null,this.name=r.name,this.point={x:r.x,y:r.y},this.img=r.img,this.width=r.width,this.height=r.height,this.imgWidth=i["f"].width,this.imgHeight=i["f"].height,"task"===r.sort&&(this.open=Object.assign({show:"102"!==r.type,width:"102"===r.type?i["e"].width:i["g"].width,height:"102"===r.type?i["e"].height:i["g"].height},r.open),this.taskMsg=r.taskMsg||""),this.isRender=!1,this.type=r.type,this.sort=r.sort,this.out=[],this.in=[],"6"===r.type&&(this.OutLine={}),r.attributes)this.attributes=Object(a["a"])({},r.attributes);else{if("101"===r.type)n=Object(s["n"])();else if("102"===r.type)n=Object(s["c"])();else if("103"===r.type){var l={name:"脚本任务",type:"103",language:"java"};this.taskMsg=l.name+"代理机器人",n=Object(s["l"])(l)}else if("104"===r.type)this.taskMsg="web服务任务代理机器人",n=Object(s["o"])();else if("105"===r.type)this.taskMsg="消息任务代理机器人",n=Object(s["j"])();else if("106"===r.type){var c={name:"python任务",type:"106",language:"python"};this.taskMsg=c.name+"代理机器人",n=Object(s["l"])(c)}else if("107"===r.type){var u={name:"shell任务",type:"107",language:"shell"};this.taskMsg=u.name+"代理机器人",n=Object(s["l"])(u)}else if("108"===r.type){var d={name:"SQL任务",type:"108",language:"SQL"};this.taskMsg=d.name,n=Object(s["l"])(d)}else n="201"===r.type?Object(s["m"])():"299"===r.type?Object(s["q"])():"301"===r.type?Object(s["g"])():"302"===r.type?Object(s["h"])():Object(s["k"])();this.attributes=Object(o["b"])(n),this.attributes.BaseInfo||(this.attributes.BaseInfo={}),this.attributes.BaseInfo.Name=this.name,this.attributes.BaseInfo.ID=this.id}};t["a"]=r},8234:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("d4ec"),i=n("bee2"),o=n("262e"),s=n("2caf"),r=n("ec87"),l=n("3c04"),c=function(e){Object(o["a"])(n,e);var t=Object(s["a"])(n);function n(){return Object(a["a"])(this,n),t.apply(this,arguments)}return Object(i["a"])(n,[{key:"commands",value:function(e){var t=e.type;return function(e){return e.color||e.background?Object(l["updateMark"])(t,e):Object(l["removeMark"])(t)}}},{key:"name",get:function(){return"colormark"}},{key:"schema",get:function(){return{attrs:{color:{default:""}},parseDOM:[{style:"color",getAttrs:function(e){return{color:e}}}],toDOM:function(e){return["span",{style:"color: ".concat(e.attrs.color,";")},0]}}}}]),n}(r["Mark"])},"82bb":function(e,t,n){"use strict";(function(e){n("c740"),n("d81d"),n("45fc");var a=n("2d0f");t["a"]={name:"TabsListSetting",mixins:[a["a"]],props:{defaultShowText:{type:Boolean,default:!0},defaultButtonStyle:{type:String,default:""},isDblClickBind:{type:Boolean,default:!1},isMobile:{type:Boolean,default:!1}},data:function(){return{tableData:[{}],formModel:{}}},created:function(){console.log(this.currentData);var t=dsf.mix(!0,[],this.currentData);e.each(t,(function(e){dsf.isUnDef(e.id)&&(e.id=dsf.uuid())})),this.tableData=t},computed:{setRequestUrl:function(){return dsf.url.getWebPath("file/upload?db=1")}},mounted:function(){},methods:{rowClickHandler:function(e){this.formModel=e},addTab:function(){var e=this.tableData,t=e.length+1;this.tableData.push({key:"key".concat(t),name:"name".concat(t),hide:!1,dataUrl:"",noSearch:!1,customize:!1})},removeTab:function(e){dsf.array.remove(this.tableData,e)},up:function(t){var n=e.findIndex(this.tableData,(function(e){return e==t}));if(n>0){var a=this.tableData[n-1];this.$set(this.tableData,n-1,t),this.$set(this.tableData,n,a)}},down:function(t){var n=e.findIndex(this.tableData,(function(e){return e==t}));if(n>0){var a=this.tableData[n+1];this.$set(this.tableData,n+1,t),this.$set(this.tableData,n,a)}},validate:function(){var e=this.tableData,t=e.some((function(t){var n=0;if(e.map((function(e){e.key==t.key&&n++})),n>1)return dsf.layer.message("请解决重复".concat(t.key,"标识"),!1),!0}));return!t},yes:function(){return this.tableData}}}}).call(this,n("2ef0"))},8359:function(e,t,n){},8427:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[n("DsfButton",{on:{click:e.addCol}},[e._v("新增列")])],1),n("el-main",{staticStyle:{padding:"0px"}},[n("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData,"highlight-current-row":!0},on:{"row-click":e.rowClickHandler}},[n("el-table-column",{attrs:{label:"名称","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" 第"+e._s(t.$index+1)+"格 ")]}}])}),n("el-table-column",{attrs:{label:"高度","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.height,callback:function(n){e.$set(t.row,"height",n)},expression:"scope.row.height"}})]}}])}),n("el-table-column",{attrs:{label:"占用列数","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.span,callback:function(n){e.$set(t.row,"span",e._n(n))},expression:"scope.row.span"}})]}}])}),e.simple?e._e():n("el-table-column",{attrs:{label:"列数断点","header-align":"center",align:"center"}},[n("el-table-column",{attrs:{label:"≥1920px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.lg,callback:function(n){e.$set(t.row,"lg",e._n(n))},expression:"scope.row.lg"}})]}}],null,!1,3783331954)}),n("el-table-column",{attrs:{label:"≥1200px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.xl,callback:function(n){e.$set(t.row,"xl",e._n(n))},expression:"scope.row.xl"}})]}}],null,!1,3498212237)}),n("el-table-column",{attrs:{label:"≥992px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.md,callback:function(n){e.$set(t.row,"md",e._n(n))},expression:"scope.row.md"}})]}}],null,!1,2527293136)}),n("el-table-column",{attrs:{label:"≥768px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.sm,callback:function(n){e.$set(t.row,"sm",e._n(n))},expression:"scope.row.sm"}})]}}],null,!1,2968054951)}),n("el-table-column",{attrs:{label:"<768px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.xs,callback:function(n){e.$set(t.row,"xs",e._n(n))},expression:"scope.row.xs"}})]}}],null,!1,1393585650)})],1),n("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(n){return e.insert(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(n){return e.deleted(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(n){return e.up(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(n){return e.down(t)}}})]}}])})],1)],1)],1)},i=[],o=n("4948"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["default"]=l.exports},"850f":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("d4ec"),i=n("bee2"),o=n("262e"),s=n("2caf"),r=n("ec87"),l=n("3c04"),c=function(e){Object(o["a"])(n,e);var t=Object(s["a"])(n);function n(){return Object(a["a"])(this,n),t.apply(this,arguments)}return Object(i["a"])(n,[{key:"commands",value:function(e){var t=e.type;return function(e){return Object(l["updateMark"])(t,e)}}},{key:"name",get:function(){return"align"}},{key:"defaultOptions",get:function(){return{align:["left","center","right"]}}},{key:"schema",get:function(){return{attrs:{align:{default:"left"}},content:"inline*",defining:!0,draggable:!1,parseDOM:[{style:"text-align",getAttrs:function(e){return{align:e}}}],toDOM:function(e){return["span",{style:"text-align: ".concat(e.attrs.align,";display: block")},0]}}}}]),n}(r["Mark"])},"859c":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-ueditor"},[n("DsfUEditor",{attrs:{value:e.content,"show-label":!1,"$rich-txt-height":320},on:{"editor-change":e.valueChange}})],1)},i=[],o={name:"RichText",props:{value:{type:String,default:function(){return""}}},data:function(){return{content:""}},created:function(){this.content=this.value},mounted:function(){},methods:{getContent:function(){return this.content},valueChange:function(e,t){this.content=e.data}}},s=o,r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["default"]=l.exports},"8c1f":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",[n("div",{staticStyle:{"text-align":"right",height:"auto",margin:"0px -20px"}},[n("DsfButton",{on:{click:e.add}},[e._v("新增")])],1)]),n("el-main",{staticStyle:{padding:"0px"}},[n("el-table",{attrs:{data:e.tableData,border:"","highlight-current-row":!0}},[n("el-table-column",{attrs:{prop:"code",label:"元数据代码","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.code,callback:function(n){e.$set(t.row,"code",n)},expression:"scope.row.code"}})]}}])}),n("el-table-column",{attrs:{prop:"name",label:"描述","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{disabled:!t.row.isAttach},model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}})]}}])}),n("el-table-column",{attrs:{prop:"valueExpress",label:"对应字段","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.dataField,callback:function(n){e.$set(t.row,"dataField",n)},expression:"scope.row.dataField"}})]}}])}),n("el-table-column",{attrs:{label:"操作",width:"80px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isAttach?n("el-link",{attrs:{type:"primary"},on:{click:function(n){return e.remove(t.row)}}},[e._v("删除")]):e._e()]}}])})],1)],1)],1)},i=[],o=n("2d0f"),s={name:"NavTreeEdit",mixins:[o["a"]],data:function(){return{tableData:[],type:0}},created:function(){var e=this.currentData||[];this.tableData=e},mounted:function(){},methods:{add:function(){this.tableData.push({code:"",isAttach:!0,alias:"",name:"",type:{text:"文本",value:"string"},length:"100",dataField:"",defaultValue:null,unit:null})},remove:function(e){dsf.array.remove(this.tableData,e)},yes:function(){return this.tableData}}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},"8c4c":function(e,t,n){"use strict";(function(e,a){n("4160"),n("ac1f"),n("5319"),n("159b");var i=n("cf2e"),o=n("2139"),s=n("961d"),r=n("7521"),l=n("3cf4"),c=n("f107"),u=n("d0f8"),d=n("e012"),h=n("5032"),p=n("76af");function f(){var e=a.cloneDeep(this.postData);return e.items.forEach((function(e){e.isFrozenSty=!1})),e.groups.forEach((function(e){e.isFrozenSty=!1,e.isFrozenMemberSty=!1})),e}t["a"]={name:"DsfSeatDesign",components:{topTools:i["a"],leftTools:o["a"],rightTools:s["a"],SeatCanvas:r["a"],seatItem:l["a"],seatPop:c["a"]},data:function(){return{keyStack:[],postData:{_id:"",backgroundImage:{},canvasSet:{width:void 0,height:void 0},hasBg:!1,items:[],groups:[]}}},computed:{},watch:{"postData.backgroundImage":function(){u["a"].call(this)}},created:function(){this.layoutConfig=new d["a"](d["b"])},beforeDestroy:function(){e(document).off("keydown"),e(document).off("keyup")},mounted:function(){this.bindShortKey(),this.getSeatInfo()},methods:{saveLayout:function(){this.saveByPub()},bindShortKey:function(){var t=["ctrl","ctrl-d","ctrl-s"];Object(u["g"])(this.keyStack,t),e("body").on("click",(function(){h["a"].dispatch(p["a"].BODY_EMPTY_CLICK)}))},saveByDev:function(){var e=f.call(this),t=this.$route.query.id||dsf.UUID();e._id=t,localStorage.setItem("seat_"+t,JSON.stringify(e));var n=this.$route.query,a=Object.assign({},n,{id:t});this.$router.replace({path:this.$route.path,query:a})},saveByPub:function(){var e=this,t=f.call(this),n={pageName:"edit",namespace:"dsfa.seat.designcontent",data:JSON.stringify(t)},a=dsf.layer.loading();this.$http.post(this.layoutConfig.saveLayoutUrl,n).done((function(t){t.success?(e.postData._id=t.data._id,e.$router.replace({path:e.$route.path,query:{id:t.data._id}}),dsf.layer.message("保存成功")):dsf.layer.message("排座设计器保存失败",!1)})).error((function(e){dsf.layer.message("排座设计器保存失败",!1)})).always((function(){dsf.layer.closeLoading(a)}))},getSeatInfo:function(){this.getInfoPub()},getInfoDev:function(){var e=this.$route.query.id;if(e){var t=JSON.parse(localStorage.getItem("seat_"+e));t&&(a.isEmpty(t.canvasSet)&&(t.canvasSet={width:void 0,height:void 0}),this.postData=t)}},getInfoPub:function(){this.$route.query.id}}}}).call(this,n("1157"),n("2ef0"))},"961d":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.showTool?n("div",{staticClass:"right-tool-box"},[n("div",{staticClass:"box-item",on:{click:function(t){return e.showGroup(0)}}},[n("el-popover",{attrs:{value:e.groupVisible[0],placement:"left-start",width:"360",trigger:"manual","popper-class":"ds-seat-design-popover"}},[n("div",{staticClass:"header"},[e._v(" 度量 "),n("i",{staticClass:"el-icon-arrow-right",on:{click:function(t){return e.closeGroup(0)}}})]),n("div",{staticClass:"inner"},[n("div",{staticClass:"title"},[n("label",{staticClass:"label-box"},[e._v("当前对象：")]),n("span",{domProps:{textContent:e._s(e.getInfoTypeName())}})]),n("div",{staticClass:"inner-item"},[n("label",{staticClass:"label-box"},[e._v("X")]),n("el-input-number",{attrs:{value:e.info.left,size:"mini",controls:!1},on:{change:function(t){return e.info.left=t}}}),n("label",{staticClass:"label-box",staticStyle:{"margin-left":"5px"}},[e._v("Y")]),n("el-input-number",{attrs:{value:e.info.top,size:"mini",controls:!1},on:{change:function(t){return e.info.top=t}}})],1),n("div",{staticClass:"inner-item"},[n("label",{staticClass:"label-box"},[e._v("宽")]),n("el-input-number",{attrs:{value:e.info.width,size:"mini",min:0,controls:!1},on:{change:function(t){return e.updateWidth(t)}}}),n("label",{staticClass:"label-box",staticStyle:{"margin-left":"5px"}},[e._v("高")]),n("el-input-number",{attrs:{value:e.info.height,size:"mini",min:0,controls:!1},on:{change:function(t){return e.updateHeight(t)}}})],1),n("div",{staticClass:"inner-item"},[n("label",{staticClass:"label-box"},[e._v("角度")]),n("el-input-number",{attrs:{value:e.info.angle,size:"mini",min:0,max:360,controls:!1},on:{change:function(t){return e.info.angle=t}}})],1),"group"===e.info.type?[n("div",{staticClass:"inner-item"},[n("label",{staticClass:"label-box"},[e._v("成员宽")]),n("el-input-number",{attrs:{value:e.memberWidth,size:"mini",controls:!1},on:{change:function(t){return e.upGroupMemberPos("width",t)}}}),n("label",{staticClass:"label-box"},[e._v("成员高")]),n("el-input-number",{attrs:{value:e.memberHeight,size:"mini",controls:!1},on:{change:function(t){return e.upGroupMemberPos("height",t)}}})],1),n("div",{staticClass:"inner-item"},[n("label",{staticClass:"label-box"},[e._v("行间距")]),n("el-input-number",{attrs:{value:e.memberSpaceTop,size:"mini",controls:!1},on:{change:function(t){return e.upGroupSize("row",t)}}}),n("label",{staticClass:"label-box"},[e._v("列间距")]),n("el-input-number",{attrs:{value:e.memberSpaceLeft,size:"mini",controls:!1},on:{change:function(t){return e.upGroupSize("col",t)}}})],1)]:e._e()],2),n("i",{staticClass:"iconfont icon-resize-",attrs:{slot:"reference"},slot:"reference"})])],1),n("div",{staticClass:"box-item",on:{click:function(t){return e.showGroup(1)}}},[n("el-popover",{attrs:{value:e.groupVisible[1],placement:"left",width:"360",trigger:"manual","popper-class":"ds-seat-design-popover"}},[n("div",{staticClass:"header"},[e._v(" 属性 "),n("i",{staticClass:"el-icon-arrow-right",on:{click:function(t){return e.closeGroup(1)}}})]),n("div",{staticClass:"inner"},[e.infoIsSec?[n("div",{staticClass:"inner-item"},[n("p",[e._v("文本")]),n("el-input",{model:{value:e.info.seatTxt,callback:function(t){e.$set(e.info,"seatTxt",t)},expression:"info.seatTxt"}})],1)]:["bed"===e.info.type||"bed"===e.info.memberType?n("div",{staticClass:"inner-item"},[n("label",{staticClass:"label-box"},[e._v("宿舍")]),n("el-input",{attrs:{size:"mini"},model:{value:e.info.dormName,callback:function(t){e.$set(e.info,"dormName",t)},expression:"info.dormName"}}),n("label",{staticClass:"label-box",staticStyle:{"margin-left":"5px"}},[e._v("楼层")]),n("el-input",{attrs:{size:"mini"},model:{value:e.info.floorName,callback:function(t){e.$set(e.info,"floorName",t)},expression:"info.floorName"}})],1):e._e(),"bed"===e.info.type||"bed"===e.info.memberType?n("div",{staticClass:"inner-item"},[n("label",{staticClass:"label-box"},[e._v("类型")]),n("el-select",{attrs:{size:"mini"},model:{value:e.info.dormType,callback:function(t){e.$set(e.info,"dormType",t)},expression:"info.dormType"}},e._l(e.sexList,(function(e,t){return n("el-option",{key:t,attrs:{label:e.txt,value:e.val}})})),1),n("label",{staticClass:"label-box",staticStyle:{"margin-left":"5px"}},[e._v("备注")]),n("el-input",{attrs:{size:"mini"},model:{value:e.info.remark,callback:function(t){e.$set(e.info,"remark",t)},expression:"info.remark"}})],1):e._e(),"seat"===e.info.type||"seat"===e.info.memberType?n("div",{staticClass:"inner-item"},[n("label",{staticClass:"label-box"},[e._v("房间号")]),n("el-input",{attrs:{size:"mini"},model:{value:e.info.roomNum,callback:function(t){e.$set(e.info,"roomNum",t)},expression:"info.roomNum"}}),n("label",{staticClass:"label-box",staticStyle:{"margin-left":"5px"}},[e._v("备注")]),n("el-input",{attrs:{size:"mini"},model:{value:e.info.remark,callback:function(t){e.$set(e.info,"remark",t)},expression:"info.remark"}})],1):e._e(),n("div",{staticClass:"inner-item"},[n("label",{staticClass:"label-box",staticStyle:{width:"80px","margin-right":"10px"}},[e._v("显示文本")]),n("el-radio-group",{model:{value:e.info.showText,callback:function(t){e.$set(e.info,"showText",t)},expression:"info.showText"}},[n("el-radio",{attrs:{label:1}},[e._v("是")]),n("el-radio",{attrs:{label:2}},[e._v("否")])],1)],1),e.info.member&&e.info.member.length>0?n("div",{staticClass:"inner-item",class:e.info.member.length>4?"scroll-container":""},e._l(e.info.member,(function(t,a){return n("div",{key:a},[n("div",{staticClass:"title"},[e._v(e._s(t.rowIndex+1)+"行"+e._s(t.colIndex+1)+"列:")]),n("label",{staticClass:"label-box"},[e._v("序号")]),n("input",{staticClass:"input-mini",attrs:{type:"text"},domProps:{value:t.seatNum},on:{change:function(n){return e.setNumber(n,t)}}}),n("label",{staticClass:"label-box"},[e._v("文本")]),n("input",{staticClass:"input-mini",attrs:{type:"text"},domProps:{value:t.seatTxt},on:{change:function(e){return t.seatTxt=e.target.value}}})])})),0):n("div",{staticClass:"inner-item"},[n("label",{staticClass:"label-box"},[e._v("序号")]),n("input",{staticClass:"input-mini",attrs:{type:"text"},domProps:{value:e.info.seatNum},on:{change:function(t){return e.setNumber(t,e.info)}}}),n("label",{staticClass:"label-box"},[e._v("文本")]),n("input",{staticClass:"input-mini",attrs:{type:"text"},domProps:{value:e.info.seatTxt},on:{change:function(t){return e.info.seatTxt=t.target.value}}})])]],2),n("i",{staticClass:"iconfont icon-xingzhuang-wenzi",attrs:{slot:"reference"},slot:"reference"})])],1),n("div",{staticClass:"box-item",on:{click:function(t){return e.showGroup(2)}}},[n("el-popover",{attrs:{value:e.groupVisible[2],placement:"left-start",width:"365",trigger:"manual","popper-class":"ds-seat-design-popover"}},[n("div",{staticClass:"header"},[e._v(" 上传 "),e.infoIsSec?e._e():n("i",{staticClass:"el-icon el-icon-s-tools",on:{click:function(t){e.dialogVisible=!0}}}),n("i",{staticClass:"el-icon-arrow-right",on:{click:function(t){return e.closeGroup(2)}}})]),e.infoIsSec?n("div",[n("div",{staticClass:"inner"},[n("div",{staticClass:"single-upload-box",on:{click:e.uploadSingle}},[e.info.bgImg?n("img",{attrs:{src:e.getImagePath(e.info.bgImg),alt:""}}):e._e()])])]):n("div",{staticClass:"inner inner-flex"},e._l(e.info.stateList,(function(t,a){return n("div",{key:t.statusValue,staticClass:"upload-box"},[n("div",{staticClass:"img-box",on:{click:function(n){return e.uploadMultiple(t)}}},[t.img?n("img",{attrs:{src:e.getImagePath(t.img)}}):e._e()]),n("p",[e._v(e._s(t.statusText))])])})),0),n("i",{staticClass:"iconfont icon-tupiantianjia",attrs:{slot:"reference"},slot:"reference"})])],1),n("el-dialog",{attrs:{title:"座位状态管理",visible:e.dialogVisible,modal:!1,width:"35%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",{staticClass:"dialog-box"},[n("p",{staticClass:"title"},[e._v("说明")]),n("p",[e._v("statusText - 座位状态")]),n("p",[e._v("statusValue - 座位状态对应的值")]),n("p",[e._v("couldSeat - 此状态下人员能否入座（1能、2否）")]),n("p",{staticClass:"title"},[e._v("默认状态")]),n("p",[n("span",[e._v("正常|1|1")]),n("span",[e._v("已排|2|1")])]),n("p",[n("span",[e._v("锁定|3|2")]),n("span",[e._v("禁用|4|2")])]),n("p",{staticClass:"title"},[e._v("自定义座位状态")]),n("el-input",{attrs:{type:"textarea",rows:5,placeholder:"statusText | statusValue | couldSeat 以|分隔，一行定义一种状态"},model:{value:e.info.statusKv,callback:function(t){e.$set(e.info,"statusKv",t)},expression:"info.statusKv"}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.saveStatus}},[e._v("确 定")])],1)])],1):e._e()},i=[],o=n("c8f9"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["a"]=l.exports},"9e79":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"subprocess"},[n("lines",{attrs:{"is-draw-line":e.isDrawLine,"parent-node":e.parentNode,lines:e.lines,nodes:e.nodes,events:e.events,checked:e.checked,"is-sub":!0,config:e.config}}),n("nodes",{attrs:{"is-draw-line":e.isDrawLine,"parent-node":e.parentNode,nodes:e.nodes,checked:e.checked,config:e.config,"is-sub":!0,"data-id":e.parentNode.id}}),n("events",{attrs:{"is-draw-line":e.isDrawLine,"parent-node":e.parentNode,nodes:e.nodes,events:e.events,checked:e.checked,"is-sub":!0,config:e.config}})],1)},i=[],o=n("bd20"),s=n("7a66"),r={name:"Subprocess",components:{Lines:o["a"],Events:s["a"]},props:{lines:{type:Array,default:function(){return[]}},nodes:{type:Array,default:function(){return[]}},events:{type:Array,default:function(){return[]}},isDrawLine:{type:Boolean,default:function(){return!1}},checked:{type:Object,default:function(){return{}}},config:{type:Object,default:function(){return{}}},parentNode:{type:Object,default:function(){return{}}}}},l=r,c=n("2877"),u=Object(c["a"])(l,a,i,!1,null,"72c5e8e0",null);t["a"]=u.exports},"9f6f":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"des-custom-list-set-list"},[n("el-form",{attrs:{model:e.formInline,"label-width":"145px"}},[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"列表高亮字段："}},[n("el-input",{attrs:{placeholder:"字段值为true时高亮(支持表达式)"},model:{value:e.formInline.lightCode,callback:function(t){e.$set(e.formInline,"lightCode",t)},expression:"formInline.lightCode"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"跳转链接字段："}},[n("el-input",{attrs:{placeholder:"字段有值时跳转(支持表达式)"},model:{value:e.formInline.linkCode,callback:function(t){e.$set(e.formInline,"linkCode",t)},expression:"formInline.linkCode"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"跳转链接打开类型："}},[n("el-input",{attrs:{placeholder:"true:新窗口 false:弹框 (支持表达式)"},model:{value:e.formInline.linkType,callback:function(t){e.$set(e.formInline,"linkType",t)},expression:"formInline.linkType"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"查看更多数据链接："}},[n("el-input",{attrs:{placeholder:"设置后显示更多(支持表达式)"},model:{value:e.formInline.moreUrl,callback:function(t){e.$set(e.formInline,"moreUrl",t)},expression:"formInline.moreUrl"}})],1)],1)],1)],1),n("div",{staticStyle:{"text-align":"right","margin-bottom":"10px"}},[n("DsfButton",{attrs:{size:"small",icon:"hao"},on:{click:function(t){return e.handleEvent("add")}}},[e._v("新增")]),n("DsfButton",{attrs:{size:"small",icon:"iconfont icon-delete",type:"plain"},on:{click:function(t){return e.handleEvent("delete")}}},[e._v("清空")])],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.formInline.list,border:"","header-cell-style":{backgroundColor:"#f2f2f2"}}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"50px",align:"center"}}),n("el-table-column",{attrs:{prop:"des",label:"字段描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.des,callback:function(n){e.$set(t.row,"des",n)},expression:"scope.row.des"}})]}}])}),n("el-table-column",{attrs:{prop:"code",label:"对应字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.code,callback:function(n){e.$set(t.row,"code",n)},expression:"scope.row.code"}})]}}])}),n("el-table-column",{attrs:{prop:"title",label:"显示标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.title,callback:function(n){e.$set(t.row,"title",n)},expression:"scope.row.title"}})]}}])}),n("el-table-column",{attrs:{prop:"text",label:"数据格式"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{model:{value:t.row.text,callback:function(n){e.$set(t.row,"text",n)},expression:"scope.row.text"}},[n("el-option",{attrs:{label:"居左",value:"left"}}),n("el-option",{attrs:{label:"居中",value:"center"}}),n("el-option",{attrs:{label:"居右",value:"right"}})],1)]}}])}),n("el-table-column",{attrs:{prop:"width",label:"宽度"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.width,callback:function(n){e.$set(t.row,"width",n)},expression:"scope.row.width"}})]}}])}),n("el-table-column",{attrs:{prop:"ellipsis",label:"一行显示"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{model:{value:t.row.ellipsis,callback:function(n){e.$set(t.row,"ellipsis",n)},expression:"scope.row.ellipsis"}},[n("el-option",{attrs:{label:"否",value:"0"}}),n("el-option",{attrs:{label:"是",value:"1"}})],1)]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.$index>0?n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.handleEvent("sort",t,"up")}}},[e._v("上移")]):e._e(),t.$index<e.formInline.list.length-1?n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.handleEvent("sort",t,"down")}}},[e._v("下移")]):e._e(),n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.handleEvent("delete",t)}}},[e._v("删除")])]}}])})],1)],1)},i=[],o=(n("a434"),n("2d0f")),s={name:"DesCustomListSetList",mixins:[o["a"]],data:function(){return{formInline:{linkType:null,linkCode:null,moreUrl:"",lightCode:null,list:[{des:"类型",width:"25%",text:"left",ellipsis:"1",code:null,title:""},{des:"标题、描述",width:"25%",text:"left",ellipsis:"1",code:null,title:""},{des:"来源人/物、目的人/物",width:"25%",text:"left",ellipsis:"1",code:null,title:""},{des:"时间",width:"25%",text:"right",ellipsis:"1",code:null,title:""}]}}},created:function(){this.owner.formInline.list&&(this.formInline=dsf.mix(!0,{},this.owner.formInline))},methods:{handleEvent:function(e,t,n){var a=this,i={add:function(){var e=dsf.mix(!0,{},{des:"",width:"100%",text:"left",ellipsis:"1",code:null,title:""});a.formInline.list.push(e)},sort:function(){var e=t.$index;if("up"==n){var i=a.formInline.list[e-1];a.formInline.list.splice(e-1,1),a.formInline.list.splice(e,0,i)}else{var o=a.formInline.list[e+1];a.formInline.list.splice(e+1,1),a.formInline.list.splice(e,0,o)}},delete:function(){t?a.formInline.list.splice(t.$index,1):a.formInline.list=[]}};i[e]&&i[e]()},validate:function(){for(var e=0,t=this.formInline.list.length;e<t;e++){var n=this.formInline.list[e];if(dsf.isUnDef(n.code)||!n.title)return dsf.layer.message("新增表格字段不能为空",!1),!1}return!0},yes:function(){return this.formInline}}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},a029:function(e,t,n){"use strict";(function(e){n("c740"),n("96cf");var a=n("1da1"),i=n("2d0f");t["a"]={name:"DesListOrderByEdit",mixins:[i["a"]],data:function(){return{tableData:[],treeData:[],defaultProps:{children:"children",label:"name"}}},mounted:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.owner.$$getComponent(),a=n.$options.design.metadata.create.call(n),a&&!(a.length<=1)){t.next=5;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 5:if(i=a[1].metadata.at,i){t.next=9;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 9:return t.next=11,e.getTreeData(a[1].metadata,a[1].metadata.rm_type||3);case 11:e.treeData=t.sent,e.tableData=e.currentData||[];case 13:case"end":return t.stop()}}),t)})))()},methods:{toList:function(t,n){if(n.field){var a=e.findIndex(this.tableData,(function(e){return e.field==n.field}));a<0&&this.tableData.push({field:n.field,fieldCaption:n.fieldCaption,sortType:"asc"})}},getTreeData:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function a(){var i,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=[],"8"!=t){a.next=8;break}return o={rmId:e.rmId},a.next=5,n.$webAPI.getDbSourceFieldsTree(o);case 5:i=a.sent,a.next=13;break;case 8:if("3"!=t){a.next=13;break}return s={namespace:e.at},a.next=12,n.$webAPI.getMetaDataFieldsTree(s);case 12:i=a.sent;case 13:return a.abrupt("return",i);case 14:case"end":return a.stop()}}),a)})))()},remove:function(e){dsf.array.remove(this.tableData,e)},up:function(t){var n=e.findIndex(this.tableData,(function(e){return e==t}));if(n>0){var a=this.tableData[n-1];this.$set(this.tableData,n-1,t),this.$set(this.tableData,n,a)}},down:function(t){var n=e.findIndex(this.tableData,(function(e){return e==t}));if(n<this.tableData.length-1){var a=this.tableData[n+1];this.$set(this.tableData,n+1,t),this.$set(this.tableData,n,a)}},yes:function(){return this.tableData}}}}).call(this,n("2ef0"))},a392:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"form"},[n("el-form-item",{attrs:{label:"子流程类型"}},[n("el-select",{staticStyle:{width:"77%"},attrs:{name:"子流程类型"},model:{value:e.Mode,callback:function(t){e.Mode=t},expression:"Mode"}},[n("el-option",{attrs:{label:"引用",value:"0"}}),n("el-option",{attrs:{label:"复制",value:"1"}}),n("el-option",{attrs:{label:"新建",value:"2"}})],1)],1)],1),"2"!==e.Mode?n("SelectTree",{attrs:{"tree-data":e.flowData,select:e.selectFlow,checked:e.checked,"show-search":!0},on:{"update:select":function(t){e.selectFlow=t}}}):e._e()],1)},i=[],o=(n("b0c0"),n("a9e3"),n("343b")),s={name:"SetSubFlow",components:{SelectTree:o["default"]},props:{value:{type:String,default:function(){return""}},mode:{type:Number,default:function(){return 0}}},data:function(){return{flowData:[],selectFlow:null,checked:[],Mode:String(this.mode)}},created:function(){this.initFlow()},mounted:function(){},methods:{yes:function(){return{Mode:Number(this.Mode),SubWFID:"2"!==this.Mode?this.selectFlow.dsfa_rm_id:null,SubWFName:"2"!==this.Mode?this.selectFlow.name:null}},validate:function(){return!!this.selectFlow||(dsf.layer.message("请选择流程",!1),!1)},initFlow:function(){var e=this;this.$http.get("rm/list/wf",{}).then((function(t){if(t.data.success){var n=t.data.data[0],a=n?e.formatData(n,"0"):null;e.flowData=n?[a]:[],e.currentData&&e.currentData.dsfa_rm_id&&(e.checked=[e.currentData.dsfa_rm_id],e.selectFlow=e.currentData),e.value&&(e.checked=[e.value])}}))},formatData:function(e,t){if(e.label=e.name,e.id=e.dsfa_rm_id,t&&(e.disabled=e.type_value===t),"4"!=e.type_value&&(e.nocheck=!0),"4"==e.type_value||e.children||(e.iconSkin="_special"),e.children)for(var n=0;n<e.children.length;n++)this.formatData(e.children[n],t);return this.value===e.id&&(this.selectFlow=e),e}}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,"89471088",null);t["default"]=c.exports},a499:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[n("DsfButton",{on:{click:e.add}},[e._v("新增页签")])],1),n("el-main",{staticStyle:{padding:"0px"}},[n("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData,"row-class-name":e.tableRowClassName}},[n("el-table-column",{attrs:{label:"显示名称","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.title,callback:function(n){e.$set(t.row,"title",n)},expression:"scope.row.title"}})]}}])}),n("el-table-column",{attrs:{label:"标识","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}})]}}])}),n("el-table-column",{attrs:{label:"链接","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.url,callback:function(n){e.$set(t.row,"url",n)},expression:"scope.row.url"}})]}}])}),n("el-table-column",{attrs:{label:"搜索框","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{model:{value:t.row.isSearch,callback:function(n){e.$set(t.row,"isSearch",n)},expression:"scope.row.isSearch"}})]}}])}),n("el-table-column",{attrs:{label:"默认选中","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{attrs:{disabled:t.row.isCheckd},on:{change:function(n){return e.isCheckdChange(n,t.$index)}},model:{value:t.row.isCheckd,callback:function(n){e.$set(t.row,"isCheckd",n)},expression:"scope.row.isCheckd"}})]}}])}),n("el-table-column",{attrs:{label:"隐藏","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{model:{value:t.row.isHide,callback:function(n){e.$set(t.row,"isHide",n)},expression:"scope.row.isHide"}})]}}])}),n("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(n){return e.insert(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(n){return e.deleted(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(n){return e.up(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(n){return e.down(t)}}})]}}])})],1)],1)],1)},i=[],o=(n("c975"),n("d81d"),n("a434"),n("b0c0"),n("2d0f")),s={name:"ScheduleTabEdit",mixins:[o["a"]],data:function(){return{tableData:[],names:[]}},created:function(){this.tableData=this.currentData||[this.newTab()]},methods:{tableRowClassName:function(e){var t=e.row,n=e.rowIndex,a="";if(t.name){this.names[n]="";var i=this.names.indexOf(t.name);-1!=i&&i<n&&(a="warning-row"),this.names[n]=t.name}return a},newTab:function(){return{title:"Tab"+(this.tableData.length+1),name:null,url:"",isHide:!1,isSearch:!0,isCheckd:!this.tableData.length,controls:[],error:!1}},add:function(){this.tableData.push(this.newTab())},insert:function(e){this.tableData.splice(e.$index+1,0,this.newTab())},deleted:function(e){dsf.array.remove(this.tableData,e.row)},up:function(e){if(e.$index>0){var t=this.tableData[e.$index],n=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(n-1,0,t)}},down:function(e){if(this.tableData.length-1>e.$index){var t=this.tableData[e.$index],n=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(n+1,0,t)}},validate:function(){for(var e in this.tableData){this.tableData[e]["name"]=this.tableData[e]["name"]||dsf.uuid();var t=this.names.indexOf(this.tableData[e]["name"]);if(-1!=t&&t<e)return dsf.layer.message("请解决重复标识",!1),!1}return!0},yes:function(){return this.tableData},isCheckdChange:function(e,t){var n=this;e&&this.tableData.map((function(e,a){a!==t&&e.isCheckd&&(n.tableData[a].isCheckd=!1)}))}}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},a6c1:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-question-formwrap"},[n("div",{staticClass:"example"},[n("el-form",{attrs:{"label-position":"top"}},[n("el-form-item",{attrs:{prop:"value",label:e.exampleLabel,rules:e.exampleRules}},["0"==e.form.layout?n("el-checkbox-group",{attrs:{value:[]}},e._l(e.exampleItems,(function(t){return n("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.text))])})),1):n("el-checkbox-group",{attrs:{value:[]}},[n("el-row",e._l(e.exampleItems,(function(t){return n("el-col",{key:t.value,attrs:{span:e.getColSpan}},[n("el-checkbox",{attrs:{label:t.value}},[e._v(e._s(t.text))])],1)})),1)],1)],1)],1)],1),n("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.rules,"label-width":"auto","label-position":"left"}},[n("el-row",{attrs:{gutter:15}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{prop:"questionBody","label-width":"0"}},[n("el-input",{attrs:{placeholder:"请输入题干"},model:{value:e.form.questionBody,callback:function(t){e.$set(e.form,"questionBody",t)},expression:"form.questionBody"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"isOther",label:"是否含有'其他'选项:"}},[n("el-switch",{model:{value:e.form.isOther,callback:function(t){e.$set(e.form,"isOther",t)},expression:"form.isOther"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"readOnly",label:"本题不允许填写:"}},[n("el-switch",{model:{value:e.form.readOnly,callback:function(t){e.$set(e.form,"readOnly",t)},expression:"form.readOnly"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"visible",label:"本题是否显示:"}},[n("el-switch",{model:{value:e.form.visible,callback:function(t){e.$set(e.form,"visible",t)},expression:"form.visible"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"required",label:"必填标识:"}},[n("el-switch",{model:{value:e.form.required,callback:function(t){e.$set(e.form,"required",t)},expression:"form.required"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{staticClass:"keep-bottom",attrs:{prop:"maxCheckNum",label:"最多选择数量:"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.maxCheckNum,callback:function(t){e.$set(e.form,"maxCheckNum",t)},expression:"form.maxCheckNum"}},e._l(e.maxSelectOptions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{staticClass:"keep-bottom",attrs:{prop:"layout",label:"排列样式:"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.layout,callback:function(t){e.$set(e.form,"layout",t)},expression:"form.layout"}},[n("el-option",{attrs:{label:"自适应",value:"0"}}),n("el-option",{attrs:{label:"竖向排列",value:"1"}}),n("el-option-group",{attrs:{label:"横向排列"}},[n("el-option",{attrs:{label:"每行2列",value:"2"}}),n("el-option",{attrs:{label:"每行3列",value:"3"}}),n("el-option",{attrs:{label:"每行4列",value:"4"}}),n("el-option",{attrs:{label:"每行5列",value:"5"}})],1)],1)],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"mustCheckNum",label:"限制选择数量:"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.mustCheckNum,callback:function(t){e.$set(e.form,"mustCheckNum",t)},expression:"form.mustCheckNum"}},e._l(e.mustSelectOptions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",[n("el-button",{attrs:{icon:"el-icon-plus"},on:{click:e.addOption}},[e._v("添加选项")]),n("el-button",{attrs:{icon:"el-icon-circle-plus-outline"},on:{click:e.batchAddOption}},[e._v("批量添加")])],1)],1),n("el-col",{staticStyle:{padding:"15px 0"},attrs:{span:24}},[n("el-table",{attrs:{data:e.form.items}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),n("el-table-column",{attrs:{label:"选项"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-form-item",{attrs:{size:"small",prop:"items."+t.$index+".value","label-width":"0",rules:[{required:!0,message:"请输入"}]}},[n("el-input",{attrs:{placeholder:"请输入"},on:{change:function(n){e.optionChange(e.form.items[t.$index],n)}},model:{value:e.form.items[t.$index].text,callback:function(n){e.$set(e.form.items[t.$index],"text",n)},expression:"form.items[scope.$index].text"}})],1)]}}])}),n("el-table-column",{attrs:{label:"操作",width:"180",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"show",rawName:"v-show",value:0===t.$index,expression:"scope.$index === 0"}],attrs:{circle:"",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:e.addOption}}),n("el-button",{attrs:{circle:"",size:"small",icon:"el-icon-remove-outline"},on:{click:function(n){return e.remove(t)}}}),n("el-button",{attrs:{circle:"",size:"small",icon:"el-icon-top",disabled:0===t.$index},on:{click:function(n){return e.toggle(t,"up")}}}),n("el-button",{attrs:{circle:"",size:"small",icon:"el-icon-bottom",disabled:t.$index===e.form.items.length-1},on:{click:function(n){return e.toggle(t,"down")}}})]}}])})],1)],1),n("el-col",{attrs:{span:24}},[n("div",{staticClass:"ljsz"},[n("span",{staticClass:"label"},[e._v("逻辑设置:")]),n("span",{staticClass:"btn",on:{click:e.showRela}},[e._v("题目关联")])])])],1)],1),n("el-dialog",{attrs:{title:"添加选项",visible:e.dialogVisible,modal:!0,"append-to-body":!0,"modal-append-to-body":!1,"before-close":e.handleClose,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-input",{attrs:{type:"textarea",rows:15,placeholder:"多个选项使用换行分割"},model:{value:e.optionText,callback:function(t){e.optionText=t},expression:"optionText"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("dsf-button",{attrs:{type:"plain"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("dsf-button",{on:{click:e.sure}},[e._v("确 定")])],1)],1)],1)},i=[],o=(n("99af"),n("d81d"),n("a434"),n("ac1f"),n("5319"),n("1276"),n("2909")),s=n("67b0"),r={mixins:[s["a"]],props:["owner"],data:function(){var e=this,t=function(t,n,a){e.form.mustCheckNum>0&&n!=e.form.mustCheckNum?a(new Error("最多选择数量必须等于限选数量")):a()},n=function(t,n,a){e.form.maxCheckNum>0&&n>e.form.maxCheckNum?a(new Error("限选数量不能大于最多选择数量")):a()};return{form:{questionBody:"请输入题干",readOnly:!1,visible:!0,required:!0,isOther:!1,layout:"0",items:[],mustCheckNum:0,maxCheckNum:0},rules:{questionBody:[{required:!0,message:"请输入题干"}],mustCheckNum:[{validator:n,trigger:"change"}],maxCheckNum:[{validator:t,trigger:"change"}]},optionText:"",dialogVisible:!1}},computed:{mustSelectOptions:function(){var e=this.exampleItems.map((function(e,t){var n=t+1;return{label:"限选".concat(n,"项"),value:n}}));return[{label:"不限制",value:0}].concat(Object(o["a"])(e))},maxSelectOptions:function(){var e=this.exampleItems.map((function(e,t){var n=t+1;return{label:"最多选".concat(n,"项"),value:n}}));return[{label:"不限制",value:0}].concat(Object(o["a"])(e))},exampleItems:function(){var e=this.form.items;return this.form.isOther&&(e=[].concat(Object(o["a"])(e),[{text:"其他",value:"其他"}])),e},getColSpan:function(){switch(this.form.layout){case"1":return 24;case"2":return 12;case"3":return 8;case"4":return 6;case"5":return 4;default:return 24}},exampleLabel:function(){return"".concat(this.owner.questionIndex,".").concat(this.form.questionBody)},exampleRules:function(){return this.form.required?[{required:!0,trigger:"blur"}]:null}},created:function(){this.owner.layout=this.owner.layout+""},methods:{optionChange:function(e,t){e.value=t},addOption:function(){var e=this.form.items.length;this.form.items.push({text:"选项".concat(e+1),value:"选项".concat(e+1),attach_text:""})},batchAddOption:function(){this.optionText="",this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1},toggle:function(e,t){var n,a=e.$index,i=Object(o["a"])(this.form.items),s=this.form.items[a];a===this.form.items.length-1&&"down"===t||0===a&&"up"===t||(n="up"===t?a-1:a+1,i.splice(a,1),i.splice(n,0,s),this.form.items=i)},remove:function(e){this.form.items.splice(e.$index,1)},sure:function(){var e=this.optionText.replace(/^\s|\s$/g,"").split(/\n/).map((function(e){var t=e.replace(/^\s|\s$/g,"").split("|");return{text:t[0],value:t[1]?t[1]:t[0],attach_text:""}}));this.form.items=[].concat(Object(o["a"])(this.form.items),Object(o["a"])(e)),this.dialogVisible=!1}}},l=r,c=n("2877"),u=Object(c["a"])(l,a,i,!1,null,null,null);t["default"]=u.exports},a77e:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[n("DsfButton",{on:{click:e.add}},[e._v("角色选择")])],1),n("el-main",{staticStyle:{padding:"0px"}},[n("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData}},[n("el-table-column",{attrs:{label:"序号",type:"index",width:"50","header-align":"center",align:"center"}}),n("el-table-column",{attrs:{label:"角色名称",prop:"name","header-align":"center",align:"center"}}),n("el-table-column",{attrs:{label:"角色id",prop:"roleid",width:"280","header-align":"center",align:"center"}}),n("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(n){return e.deleted(t)}}})]}}])})],1)],1)],1)},i=[],o=n("6792"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["default"]=l.exports},a98e:function(e,t,n){},a9ff:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",{attrs:{data:e.data,fit:""}},[n("el-table-column",{attrs:{label:"组件名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.label))])]}}])}),n("el-table-column",{attrs:{label:"元数据代码"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{on:{change:function(n){return e.changeKey(n,t.row)}},model:{value:t.row.mdkey,callback:function(n){e.$set(t.row,"mdkey",n)},expression:"scope.row.mdkey"}},e._l(e.dict,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)]}}])})],1)},i=[],o=n("e1ff"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["default"]=l.exports},ab71:function(e,t,n){"use strict";(function(e,a){n("4de4"),n("c740"),n("fb6a"),n("45fc"),n("4e82"),n("a434");var i=n("5032"),o=n("76af"),s=n("e012"),r=n("d0f8");function l(e,t,n){if(e)e.currentState=n,2===n.couldSeat&&3!==n.statusValue&&e.person&&(e.person=null);else{var a={id:t.id,pid:t.parentId,belong:t.belong,currentState:n,person:null,seatNum:t.seatNum};this.relativeList.push(a)}}t["a"]={name:"SeatPop",props:{relativeList:{type:Array,default:function(){return[]}},chosenItems:{type:Array,default:function(){return[]}},seatObj:{type:Object,default:function(){return null}},relativeObj:{type:Object,default:function(){return{}}}},data:function(){return{dialogVisible:!1,currentItem:{currentState:{},stateList:[]},position:{},popShow:!1,state:null,couldSeat:1}},computed:{sty:function(){return{left:this.position.x+"px",top:this.position.y+"px"}},otherList:function(){var e=this,t=this.currentItem.stateList.slice(2);if(this.state){var n=t.findIndex((function(t){return t.statusValue===e.state}));-1!==n&&t.splice(n,1)}return t},personIdAlias:function(){return this.leftTreeConfig.leafProps.id},isExistPerson:function(){return this.chosenItems&&0!==this.chosenItems.length?this.chosenItems.some((function(e){return!!e.person})):!!this.currentItem.person&&3!==this.currentItem.currentState.statusValue}},created:function(){this.leftTreeConfig=new s["a"](s["c"]),this.layoutConfig=new s["a"](s["d"])},mounted:function(){var t=this;i["a"].on(o["a"].SEAT_POP,(function(e){Object.assign(t,e);var n=e.currentItem.currentState;n?(t.couldSeat=n.couldSeat,t.state=n.statusValue):(t.couldSeat=1,t.state=null),t.popShow=!0})),i["a"].on(o["a"].LEFT_CLICK_SEAT,(function(){t.popShow=!1,e(".active").removeClass("active")})),i["a"].listen(o["a"].BODY_EMPTY_CLICK,(function(){t.popShow=!1,e(".active").removeClass("active")}))},methods:{popDialog:function(e){e.stopPropagation(),e.preventDefault(),this.popShow=!0,this.dialogVisible=!0},clickOther:function(e){if(this.chosenItems&&0!==this.chosenItems.length){for(var t=0;t<this.chosenItems.length;t++){var n=this.chosenItems[t],a=this.relativeObj[n.seatNum];l.call(this,a,n,e)}this.$emit("update:chosenItems",[])}else{var i=this.relativeObj[this.currentItem.seatNum];l.call(this,i,this.currentItem,e)}this.popShow=!1},seat2work:function(){if(this.chosenItems&&0!==this.chosenItems.length){for(var e=0;e<this.chosenItems.length;e++){var t=this.chosenItems[e],n=this.relativeObj[t.seatNum];n&&(n.currentState=n.person?t.stateList[1]:t.stateList[0])}this.$emit("update:chosenItems",[])}else{var a=this.relativeObj[this.currentItem.seatNum];a.currentState=a.person?this.currentItem.stateList[1]:this.currentItem.stateList[0]}this.popShow=!1},removePerson:function(){if(this.chosenItems&&0!==this.chosenItems.length)for(var e=0;e<this.chosenItems.length;e++){var t=this.chosenItems[e],n=this.relativeObj[t.seatNum];n&&3!==n.currentState.statusValue&&(n.person=null,n.currentState=t.stateList[0])}else{var a=this.relativeObj[this.currentItem.seatNum];if(3===a.currentState.statusValue)return;a.person=null,a.currentState=this.currentItem.stateList[0]}},splicePerson:function(){var e,t,n=this,i=[],o=[];if((null===(e=this.chosenItems)||void 0===e?void 0:e.length)>0){this.chosenItems.sort((function(e,t){return e.seatNum-t.seatNum})),t=this.chosenItems[0].seatNum;var s=function(e){var a=n.relativeObj[e];if(e<t||2===a.currentState.couldSeat)return"continue";i.push(a);var s=n.chosenItems.findIndex((function(e){return e.id===a.id}));if(-1!==s||!a.person)return"continue";o.push(a)};for(var l in this.relativeObj)s(l);var c=this.relativeList.filter((function(e){var t=i.findIndex((function(t){return t.id===e.id}));return-1===t}));this.$emit("update:relativeList",c)}else{var u=this.relativeObj[this.currentItem.seatNum];for(var d in t=u.seatNum,this.relativeObj){var h=this.relativeObj[d];d<=t||2===h.currentState.couldSeat||(i.push(h),h.person&&o.push(h))}var p=this.relativeList.filter((function(e){if(e.id===u.id)return!1;var t=i.findIndex((function(t){return t.id===e.id}));return-1===t}));this.$emit("update:relativeList",p)}this.$nextTick((function(){var e=0,i=0;while(i<o.length){var s,l,c=n.seatObj[t+e],u=o[i].person;if(2!==(null===(s=n.relativeObj[t+e])||void 0===s||null===(l=s.currentState)||void 0===l?void 0:l.couldSeat)){if(a.isFunction(n.layoutConfig.isSeatAble)){var d=n.layoutConfig.isSeatAble(c,u);if(!d){e++;continue}}n.relativeList.push(Object(r["f"])(c,u)),e++,i++}else e++}}))}}}}).call(this,n("1157"),n("2ef0"))},ac1c:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("SelectTree",{attrs:{"tree-data":e.flowData,select:e.selectFlow,checked:e.checked,"show-search":!0},on:{"update:select":function(t){e.selectFlow=t}}})],1)},i=[],o=(n("b0c0"),n("2d0f")),s={name:"ChooseFlow",mixins:[o["a"]],props:{value:{type:Object,default:function(){return{}}}},data:function(){return{flowData:[],selectFlow:null,checked:[]}},created:function(){this.initFlow()},mounted:function(){},methods:{yes:function(){return this.owner&&(this.owner.metadata.defaultValue={wf_id:this.selectFlow.ID,wf_name:this.selectFlow.name}),this.selectFlow},validate:function(){return!!this.selectFlow||(dsf.layer.message("请选择流程",!1),!1)},initFlow:function(){var e=this;this.$http.get("rm/list/wf",{}).then((function(t){if(t.data.success){var n=t.data.data[0],a=n?e.formatData(n,"0"):null;e.flowData=n?[a]:[],e.currentData&&e.currentData.dsfa_rm_id&&(e.checked=[e.currentData.dsfa_rm_id],e.selectFlow=e.currentData),e.value&&e.value.dsfa_rm_id&&(e.checked=[e.value.dsfa_rm_id],e.selectFlow=e.value)}}))},formatData:function(e,t){if(e.label=e.name,e.id=e.dsfa_rm_id,t&&(e.disabled=e.type_value===t),"4"!=e.type_value&&(e.nocheck=!0),"4"==e.type_value||e.children||(e.iconSkin="_special"),e.children)for(var n=0;n<e.children.length;n++)this.formatData(e.children[n],t);return e}}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,"d4cd9f48",null);t["default"]=c.exports},af4e:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-main",{staticStyle:{padding:"0px"}},[n("table",{staticClass:"table"},[n("tr",e._l(e.colNum,(function(t){return n("td",{key:t},[n("dsf-textbox",{attrs:{"show-label":!1},model:{value:e.widths[t-1],callback:function(n){e.$set(e.widths,t-1,n)},expression:"widths[$index-1]"}})],1)})),0),e._l(e.tableData,(function(t,a){return n("tr",{key:a},e._l(t,(function(e,t){return n("td",{key:t,staticStyle:{"text-align":"center"}},[n("div",{staticStyle:{padding:"8px"}})])})),0)}))],2)])],1)},i=[],o=n("bb7f"),s=o["a"],r=(n("0731"),n("2877")),l=Object(r["a"])(s,a,i,!1,null,"67a2cbdd",null);t["default"]=l.exports},b069:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticClass:"tree-selector-edit"},[n("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[n("DsfButton",{attrs:{icon:"iconfont icon-zidingyi"},on:{click:e.add}},[e._v("添加")]),n("DsfButton",{attrs:{icon:"iconfont icon-Magnifier"},on:{click:e.openIcon}},[e._v("图标库")])],1),n("el-main",{staticStyle:{padding:"0px"}},[n("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData}},[n("el-table-column",{attrs:{label:"条件","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"支持表达式"},model:{value:t.row.code,callback:function(n){e.$set(t.row,"code",n)},expression:"scope.row.code"}})]}}])}),n("el-table-column",{attrs:{label:"节点展开时图标","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"空则为无图标"},model:{value:t.row.iconExpand,callback:function(n){e.$set(t.row,"iconExpand",n)},expression:"scope.row.iconExpand"}})]}}])}),n("el-table-column",{attrs:{label:"节点折叠时图标","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"空则为无图标"},model:{value:t.row.iconFold,callback:function(n){e.$set(t.row,"iconFold",n)},expression:"scope.row.iconFold"}})]}}])}),n("el-table-column",{attrs:{label:"图标颜色","header-align":"center",align:"center",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"空则为原色图标"},model:{value:t.row.color,callback:function(n){e.$set(t.row,"color",n)},expression:"scope.row.color"}})]}}])}),n("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(n){return e.insert(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(n){return e.deleted(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(n){return e.up(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(n){return e.down(t)}}})]}}])})],1)],1)],1)},i=[],o=(n("a434"),n("2d0f")),s={name:"TreeIconEdit",mixins:[o["a"]],data:function(){return{tableData:[],names:[],isOuaSelect:!1}},created:function(){this.tableData=this.currentData||[]},methods:{newTab:function(){return{code:"",iconExpand:"",iconFold:"",color:""}},add:function(){this.tableData.push(this.newTab())},insert:function(e){this.tableData.splice(e.$index+1,0,this.newTab())},deleted:function(e){dsf.array.remove(this.tableData,e.row)},up:function(e){if(e.$index>0){var t=this.tableData[e.$index],n=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(n-1,0,t)}},down:function(e){if(this.tableData.length-1>e.$index){var t=this.tableData[e.$index],n=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(n+1,0,t)}},openIcon:function(){window.open(dsf.url.getWebPath("$/pc/iconfont/demo_index.html"),"icondemo")},yes:function(){return this.tableData}}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},b09d:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[n("DsfButton",{attrs:{size:"small",icon:"zidingyi"},on:{click:e.addCustomButton}},[e._v("新增状态")]),n("DsfButton",{attrs:{size:"small",icon:"Magnifier",type:"plain"},on:{click:e.openIcon}},[e._v("查看按钮图标")])],1),n("el-main",{staticStyle:{padding:"0px"}},[n("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData}},[n("el-table-column",{attrs:{label:"#",type:"index",align:"center"}}),n("el-table-column",{attrs:{label:"状态值","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.text,callback:function(n){e.$set(t.row,"text",n)},expression:"scope.row.text"}})]}}])}),n("el-table-column",{attrs:{label:"状态图标","header-align":"center",align:"center",width:300},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("i",{class:["iconfont",t.row.icon],style:"color: "+t.row.color}),n("div",{staticStyle:{width:"180px",margin:"0 10px"}},[n("el-input",{model:{value:t.row.icon,callback:function(n){e.$set(t.row,"icon",n)},expression:"scope.row.icon"}})],1),n("el-color-picker",{model:{value:t.row.color,callback:function(n){e.$set(t.row,"color",n)},expression:"scope.row.color"}})],1)]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("DsfButton",{attrs:{"btn-style":"icon-text",icon:"shanchu",size:"small",title:"删除"},on:{click:function(n){return e.removeButton(t)}}})]}}])})],1)],1)],1)},i=[],o=n("e5ff"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["default"]=l.exports},b418:function(e,t,n){"use strict";n.r(t);n("fb6a"),n("ac1f"),n("5319"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("a026"),i=(n("234e"),n("a745"),n("c75d"),n("9071")),o=n("97ad"),s=(n("b0c0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"nodes",staticClass:"nodes",class:{isSub:e.isSub,active:e.isSub&&e.dragToSubNode===e.parentNode},style:{height:e.current?e.isSub?"calc(100% - "+e.toPx(e.parentNode.imgHeight+2*e.parentNode.padding+2)+")":"100%":0,top:e.isSub?e.toPx(e.parentNode.imgHeight+2*e.parentNode.padding):0,pointerEvents:e.current?"auto":""}},e._l(e.nodes,(function(t){return a("div",{key:t.id,staticClass:"nodeOuter",class:{"task-node":"task"===t.sort&&t.open&&t.open.show},style:{top:e.showOuterPadding(t)?e.toPx(t.point.y-50):e.toPx(t.point.y-t.padding),left:e.showOuterPadding(t)?e.toPx(t.point.x-50):e.toPx(t.point.x-t.padding),padding:e.showOuterPadding(t)?e.toPx(50)+" "+e.toPx(70)+" "+e.toPx(70)+" "+e.toPx(50):e.toPx(t.padding),pointerEvents:e.current&&e.current.id!==t.id||"end"===e.isDrewingLine&&("202"===t.type||"203"===t.type)||"start"===e.isDrewingLine&&"299"===t.type?"none":"auto"},attrs:{"data-id":t.id,"data-parent-id":e.isSub?e.parentNode.id:"",draggable:e.draggable},on:{dragstart:function(n){return e.drag(n,t)},mousedown:function(n){return e.selectNode(n,t)},dblclick:function(n){return e.showSub(n,t)}}},["task"!==t.sort||"task"===t.sort&&t.open&&!t.open.show?a("div",{staticClass:"node",class:{selected:e.checked===t||e.selectedList.indexOf(t)>-1},style:{width:e.toPx(t.width),height:e.toPx(t.height)},attrs:{draggable:"false","data-id":t.id}},[a("img",{class:{selected:e.checked===t||e.selectedList.indexOf(t)>-1},style:{width:e.toPx(t.imgWidth),height:e.toPx(t.imgHeight)},attrs:{src:n("2f3e")("./"+t.type+".png"),"data-id":t.id,draggable:"false"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawLine,expression:"isDrawLine"}],staticClass:"joinPoint l"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawLine,expression:"isDrawLine"}],staticClass:"joinPoint r"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawLine,expression:"isDrawLine"}],staticClass:"joinPoint t"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawLine,expression:"isDrawLine"}],staticClass:"joinPoint b"}),a("p",{staticClass:"nodename ellipsis",style:{width:e.toPx(t.nameWidth)},attrs:{title:t.name},on:{dblclick:function(n){return e.editNode(n,t)}}},[t.edit?e._e():a("span",[e._v(e._s(t.name))]),t.edit?a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"node.name"},{name:"focus",rawName:"v-focus"}],staticClass:"nodenameInput",attrs:{type:"text"},domProps:{value:t.name},on:{keyup:function(n){if(!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter"))return null;t.edit=null},blur:function(e){t.edit=null},input:[function(n){n.target.composing||e.$set(t,"name",n.target.value)},function(n){return e.editName(t)}],mousedown:function(e){e.stopPropagation(),e.preventDefault()},dblclick:function(e){return e.stopPropagation()}}}):e._e()])]):e._e(),"task"===t.sort&&"102"!=t.type&&t.open&&t.open.show?a("div",{staticClass:"node",class:{selected:e.checked===t||e.selectedList.indexOf(t)>-1,"normal-node":"task"===t.sort&&"102"!==t.type},style:{width:e.toPx(t.width+2),height:e.toPx(t.height+2),padding:"30px 15px",pointerEvents:e.isDrewingLine?"none":""},attrs:{"data-id":t.id,"data-parent-id":e.isSub?e.parentNode.id:"",draggable:"false"}},[a("img",{staticClass:"img",class:{selected:e.checked===t||e.selectedList.indexOf(t)>-1},style:{width:e.toPx(t.imgWidth),height:e.toPx(t.imgHeight)},attrs:{draggable:"false",src:n("2f3e")("./"+t.type+".png")}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawLine,expression:"isDrawLine"}],staticClass:"joinPoint l"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawLine,expression:"isDrawLine"}],staticClass:"joinPoint r"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawLine,expression:"isDrawLine"}],staticClass:"joinPoint t"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawLine,expression:"isDrawLine"}],staticClass:"joinPoint b"}),a("p",{staticClass:"nodename ellipsis",attrs:{title:t.name},on:{dblclick:function(n){return e.editNode(n,t)}}},[t.edit?e._e():a("span",[e._v(e._s(t.name))]),t.edit?a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"node.name"},{name:"focus",rawName:"v-focus"}],staticClass:"nodenameInput",attrs:{type:"text"},domProps:{value:t.name},on:{keyup:function(n){if(!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter"))return null;t.edit=null},blur:function(e){t.edit=null},input:[function(n){n.target.composing||e.$set(t,"name",n.target.value)},function(n){return e.editName(t)}],mousedown:function(e){e.stopPropagation(),e.preventDefault()},dblclick:function(e){return e.stopPropagation()}}}):e._e()]),a("div",{staticClass:"task-msg",on:{dblclick:function(t){return e.showRangeRule(t)}}},[e._v(" "+e._s(t.taskMsg||"未设置发送范围")+" ")])]):e._e(),"task"===t.sort&&"102"==t.type?a("div",{directives:[{name:"show",rawName:"v-show",value:t.open&&t.open.show,expression:"node.open && node.open.show"}],staticClass:"node",class:{selected:e.checked===t||e.selectedList.indexOf(t)>-1,"sub-node":"102"===t.type&&t.open&&t.open.show},style:{width:e.toPx(t.width+2),height:e.toPx(t.height+2),padding:e.toPx(30),pointerEvents:e.isDrewingLine?"none":""},attrs:{"data-id":t.id,"data-parent-id":e.isSub?e.parentNode.id:"",draggable:"false"}},[a("img",{staticClass:"img",class:{selected:e.checked===t||e.selectedList.indexOf(t)>-1},style:{width:e.toPx(t.imgWidth),height:e.toPx(t.imgHeight)},attrs:{draggable:"false",src:n("2f3e")("./"+t.type+".png")}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawLine,expression:"isDrawLine"}],staticClass:"joinPoint l"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawLine,expression:"isDrawLine"}],staticClass:"joinPoint r"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawLine,expression:"isDrawLine"}],staticClass:"joinPoint t"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawLine,expression:"isDrawLine"}],staticClass:"joinPoint b"}),a("p",{staticClass:"nodename ellipsis",attrs:{title:t.name},on:{dblclick:function(n){return e.editNode(n,t)}}},[t.edit?e._e():a("span",[e._v(e._s(t.name))]),t.edit?a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"node.name"},{name:"focus",rawName:"v-focus"}],staticClass:"nodenameInput",attrs:{type:"text"},domProps:{value:t.name},on:{keyup:function(n){if(!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter"))return null;t.edit=null},blur:function(e){t.edit=null},input:[function(n){n.target.composing||e.$set(t,"name",n.target.value)},function(n){return e.editName(t)}],mousedown:function(e){e.stopPropagation(),e.preventDefault()},dblclick:function(e){return e.stopPropagation()}}}):e._e()]),a("subprocess",{ref:"subprocess",refInFor:!0,attrs:{"is-draw-line":e.isDrawLine,lines:t.lines,"parent-node":t,nodes:t.nodes,events:t.events,checked:e.checked,config:e.config}}),a("span",{staticClass:"top-resize",on:{mousedown:function(n){return e.dragResize(n,t,"horizontal","top")}}}),a("span",{staticClass:"right-resize",on:{mousedown:function(n){return e.dragResize(n,t,"vertical","right")}}}),a("span",{staticClass:"bottom-resize",on:{mousedown:function(n){return e.dragResize(n,t,"horizontal","bottom")}}}),a("span",{staticClass:"left-resize",on:{mousedown:function(n){return e.dragResize(n,t,"vertical","left")}}})],1):e._e()])})),0)}),r=[],l=(n("4160"),n("c975"),n("4e82"),n("159b"),n("4795"),n("5530")),c=n("80ae"),u=n("9e79"),d=n("531e"),h=n("55c1"),p={name:"Nodes",components:{Subprocess:u["a"]},props:{nodes:{type:Array,default:function(){return[]}},isDrawLine:{type:Boolean,default:function(){return!1}},checked:{type:Object,default:function(){return{}}},config:{type:Object,default:function(){return{}}},isSub:{type:Boolean,default:function(){return!1}},parentNode:{type:Object,default:function(){return null}}},data:function(){return{dragToSubNode:null,current:null,edit:null,offset:{},moveObj:null,distance:30,resizeNode:null,mouseDownPonit:null,isDrewingLine:null,isSelected:!1}},computed:{draggable:function(){return!this.verifySub(this.parentNode)&&(!this.isDrawLine&&this.checked instanceof c["a"]&&!this.resizeNode&&this.selectedList.length<=1)},scale:function(){return this.$store.state.flow.page.scale},selectedList:function(){return this.$store.state.flow.selectedList}},mounted:function(){var e=this;this.$refs.nodes.ondragover=function(e){return!1},this.setNodePosition(),this.$bus.$on("isMoveNode",(function(t){e.current=t,t||(e.dragToSubNode=null,e.$bus.$emit("update-baseLine",{show:"",top:0,left:0}))})),this.$bus.$on("moveCopyNode".concat(this.isSub?this.parentNode.id:""),(function(t,n){e.move(t,n)})),this.$bus.$on("isDrewingLine".concat(this.isSub?this.parentNode.id:""),(function(t){e.isDrewingLine=t})),this.$bus.$on("startMoveEvent",(function(t){e.moveObj=t})),this.$bus.$on("endMoveEvent",(function(){e.moveObj=null})),this.$bus.$on("dragToSubNode",(function(t){Object(d["i"])(e.parentNode)||(e.dragToSubNode=t)})),this.$bus.$on("globalMove".concat(this.isSub?this.parentNode.id:""),this.globalMove),this.$bus.$on("selectGlobal".concat(this.isSub?this.parentNode.id:""),this.selectGlobal),document.addEventListener("mousemove",(function(t){e.resizeNode&&e.moveResize(t)})),document.addEventListener("mouseup",(function(t){e.resizeNode&&e.dropResize(t),t.ctrlKey&&e.setSelectList(t)}))},methods:{toPx:d["h"],verifySub:d["i"],showOuterPadding:function(e){return this.moveObj&&"task"===e.sort},getNamePostion:function(e,t){var n={x:e.point.x<0?0:e.point.x,y:e.point.y<0?0:e.point.y},a=(e.width-e.nameWidth)/2,i=e.height,o={top:this.toPx(n.y+i),left:this.toPx(n.x+a)};return o[t]},drag:function(e,t){e.dataTransfer&&e.dataTransfer.setDragImage(new Image,0,0),e.stopPropagation(),this.draggable&&("dragstart"===e.type?e=event||e:event.touches&&(e=event.touches[0]?event.touches[0]:event),this.offset={x:e.offsetX,y:e.offsetY},this.$bus.$emit("update-checked",t),this.current=t,this.$bus.$emit("dragNode",e,this.current,this.offset,!0))},move:function(e,t){var n=this.$store.getters["flow/getMousePointByCanvas"]({x:e.pageX,y:e.pageY}),a={x:n.x-this.offset.x*this.scale<0?0:n.x-this.offset.x*this.scale,y:n.y-this.offset.y*this.scale<0?0:n.y-this.offset.y*this.scale};t.parentNodeId&&(a.x=a.x-this.parentNode.point.x*this.scale,a.y=a.y-this.parentNode.point.y*this.scale-(this.parentNode.imgHeight+2*this.parentNode.padding)*this.scale),a={x:a.x/this.scale,y:a.y/this.scale},this.setNodePosition(),this.showSamePositionNodeBaseLine(t,a),this.$bus.$emit("autoScroll",{type:"node",data:t,point:{x:a.x,y:a.y},mouse:{x:e.pageX,y:e.pageY}})},dragResize:function(e,t,n,a){e.stopPropagation(),this.$bus.$emit("update-checked",t),this.resizeNode=Object(l["a"])(Object(l["a"])({},t),{},{lineDirection:n,direction:a}),this.$bus.$emit("update-baseLine",{show:n,top:0,left:0})},moveResize:function(e){var t,n,a,i,o,s,r=this.$store.state.flow.page,l=this.$store.state.flow.svgRoot,c=this.resizeNode.lineDirection,u=this.$store.getters["flow/lanesWidth"],d=this.$store.getters["flow/lanesHeight"],p=this.scale;switch(this.resizeNode.direction){case"top":s=this.resizeNode.point.y+this.resizeNode.height+d-h["e"].height,a=e.pageY-r.top+l.scrollTop,t={top:a<s*p?a>0?a:0:s*p,left:0};break;case"right":n=this.resizeNode.point.x+h["e"].width+u,a=e.pageX-r.left+l.scrollLeft,t={top:0,left:a>n*p?a:n*p};break;case"bottom":i=this.resizeNode.point.y+h["e"].height+d,a=e.pageY-r.top+l.scrollTop,t={top:a>i*p?a:i*p,left:0};break;case"left":o=this.resizeNode.point.x+this.resizeNode.width+u-h["e"].width,a=e.pageX-r.left+l.scrollLeft,t={top:0,left:a<o*p?a>0?a:0:o*p};break}t.top=t.top/p,t.left=t.left/p;var f=Object.assign(t,{showV:"vertical"===c,showH:"horizontal"===c});this.$bus.$emit("update-baseLine",f),this.$bus.$emit("autoScroll",{type:"lane",data:this.resizeNode,mouse:{x:e.pageX,y:e.pageY}})},dropResize:function(e){if(this.resizeNode&&this.checked&&this.checked instanceof c["a"]){var t,n,a,i,o,s,r,l=this.$store.state.flow.page,u=this.$store.state.flow.svgRoot,d=(this.resizeNode.lineDirection,this.$store.getters["flow/lanesWidth"]),p=this.$store.getters["flow/lanesHeight"],f=this.scale;switch(this.resizeNode.direction){case"top":o=this.resizeNode.point.y+this.resizeNode.height+p-h["e"].height,n=e.pageY-l.top+u.scrollTop,r=this.checked.point.y,this.checked.point.y=(n<o*f?n>0?n:0:o*f)/f,this.checked.height=this.checked.height+r-this.checked.point.y;break;case"right":t=this.resizeNode.point.x+h["e"].width+d,n=e.pageX-l.left+u.scrollLeft,this.checked.width=(n>t*f?n:t*f)/f-this.checked.point.x;break;case"bottom":a=this.resizeNode.point.y+h["e"].height+p,n=e.pageY-l.top+u.scrollTop,this.checked.height=(n>a*f?n:a*f)/f-this.checked.point.y;break;case"left":i=this.resizeNode.point.x+this.resizeNode.width+d-h["e"].width,n=e.pageX-l.left+u.scrollLeft,s=this.checked.point.x,this.checked.point.x=(n<i*f?n>0?n:0:i*f)/f,this.checked.width=this.checked.width+s-this.checked.point.x;break}this.$bus.$emit("nodeMove",this.checked),this.$bus.$emit("update-baseLine",{showV:!1,showH:!1,top:0,left:0}),this.$bus.$emit("resize"),this.resizeNode=null}},selectNode:function(e,t){var n=this;if(this.mouseDownPonit={x:e.pageX,y:e.pageY},e.ctrlKey)this.selectedList.length>1&&-1===this.selectedList.indexOf(t)&&(this.$store.commit("flow/addSelected",t),this.isSelected=!0),this.$bus.$emit("startCopyNodes",e),this.$bus.$emit("update-checked",t),e.stopPropagation();else{if(e.stopPropagation(),!this.isDrawLine&&this.selectedList.length>1&&this.selectedList.indexOf(t)>-1)return this.$bus.$emit("startCopyNodes",e),void this.$bus.$emit("update-checked",t);this.$bus.$emit("update-checked",t),this.isDrawLine&&t&&"204"!==t.type&&setTimeout((function(){n.$bus.$emit("startDraw".concat(n.isSub?n.parentNode.id:""),e,t,n.parentNode)}),0);var a=this.isSub?[]:[t];this.$store.commit("flow/setSelectedList",a)}},setSelectList:function(e){if(!this.isSub&&this.mouseDownPonit){var t=Math.sqrt(Math.pow(this.mouseDownPonit.x-e.pageX,2)+Math.pow(this.mouseDownPonit.y-e.pageY,2));if(!this.isSelected&&t<5){var n=this.selectedList.indexOf(this.checked);n>-1?(this.$store.commit("flow/deleteSelected",n),this.$bus.$emit("update-checked",flow)):this.$store.commit("flow/addSelected",this.checked)}this.isSelected=!1,this.mouseDownPonit=null}},showSub:function(e,t){e.stopPropagation(),"task"===t.sort&&(!t.parentNodeId||t.parentNodeId&&"102"!==t.type)&&(t.open.show=!t.open.show,t.open.show?(t.width=t.open.width,t.height=t.open.height):(t.open.width=t.width,t.open.height=t.height,t.width=h["f"].width,t.height=h["f"].height),this.$bus.$emit("showSubNode".concat(this.isSub?this.parentNode.id:""),t))},editNode:function(e,t){e.stopPropagation(),this.$set(t,"edit",!0)},setNodePosition:function(){this.nodePosition={x:{},xCenter:{},y:{},yCenter:{}};for(var e=0;e<this.nodes.length;e++){var t=this.nodes[e];this.nodePosition.x[t.point.x]||(this.nodePosition.x[t.point.x]=[]),this.nodePosition.y[t.point.y]||(this.nodePosition.y[t.point.y]=[]);var n=Object(d["c"])({x:this.parentNode?this.parentNode.point.x+t.point.x+t.width/2:t.point.x+t.width/2,y:this.parentNode?this.parentNode.point.y+(this.parentNode.imgHeight+2*this.parentNode.padding)+t.point.y+t.height/2:t.point.y+t.height/2});this.nodePosition.xCenter[n.x]||(this.nodePosition.xCenter[n.x]=[]),this.nodePosition.yCenter[n.y]||(this.nodePosition.yCenter[n.y]=[]),this.nodePosition.x[t.point.x].push(t),this.nodePosition.y[t.point.y].push(t),this.nodePosition.xCenter[n.x].push(t),this.nodePosition.yCenter[n.y].push(t)}},showSamePositionNodeBaseLine:function(e,t){var n=this.checkSamePositionNode(e,t),a=this.$store.getters["flow/getSvgOffset"],i={showV:n.V,showH:n.H,left:n.V?n.xCenter?n.x:t.x+a.left/this.scale:0,top:n.H?n.yCenter?n.y:t.y+a.top/this.scale:0};e.parentNodeId&&(i.left=i.left+this.parentNode.point.x,i.top=i.top+this.parentNode.point.y+(this.parentNode.imgHeight+2*this.parentNode.padding)),this.$bus.$emit("update-baseLine",i)},checkSamePositionNode:function(e,t){this.scale;var n=this.nodePosition,a=t.x,i=t.y,o={V:!1,H:!1,xCenter:!1,yCenter:!1};(n.x[a]&&n.x[a].length>0||n.x[a]&&1==n.x[a].length&&n.x[a][0]!=e)&&(o.V="vertical");var s=Object(d["c"])({x:this.parentNode?this.parentNode.point.x+a+e.width/2:a+e.width/2,y:this.parentNode?this.parentNode.point.y+(this.parentNode.imgHeight+2*this.parentNode.padding)+i+e.height/2:i+e.height/2});if(n.xCenter[s.x]&&n.xCenter[s.x].length>0){var r=n.xCenter[s.x][0];o.xCenter=!0,o.V="vertical",o.x=Object(d["c"])({x:r.point.x+r.width/2}).x}if(n.y[i]&&n.y[i].length>0&&(o.H="horizontal"),n.yCenter[s.y]&&n.yCenter[s.y].length>0){var l=n.yCenter[s.y][0];o.yCenter=!0,o.H="horizontal",o.y=Object(d["c"])({y:l.point.y+l.height/2}).y}return o},globalMove:function(e,t,n,a){if(e)for(var i=0;i<this.selectedList.length;i++){var o=this.selectedList[i];t&&(o.point.x+=e.x),n&&(o.point.y+=e.y),(t||n)&&this.$bus.$emit("nodeMove",o)}},selectGlobal:function(e,t){var n=[];e&&t&&this.nodes.forEach((function(a){a.point.x>e.x&&a.point.y>e.y&&a.point.x+a.width<t.x&&a.point.y+a.height<t.y&&n.push(a)}));var a=n?n[0]:this.checked;this.$bus.$emit("update-checked",a),this.$store.commit("flow/setSelectedList",n)},editName:function(e){this.$set(e.attributes.BaseInfo,"Name",e.name),this.$bus.$emit("updateNodeName".concat(this.isSub?this.parentNode.id:""),this.checked)},showRangeRule:function(e){e.stopPropagation(),e.preventDefault(),document.querySelector(".RangeRule")&&document.querySelector(".RangeRule").click()}}},f=p,m=(n("1fa4"),n("2877")),g=Object(m["a"])(f,s,r,!1,null,"3504d41a",null),_=g.exports;function b(e){e.component(_.name,_)}"undefined"!==typeof window&&window.Vue&&b(window.Vue);var v={install:b},y=(n("f0e6"),n("6064")),x=n.n(y),w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.jquuiLoaded?n("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],ref:"designerPanel",staticClass:"ds-designer",class:{mobile:e.mobile}},[n("div",{staticClass:"designer-head"},[n("div",{staticClass:"designer_tools"},[n("DsfDesignerButtons",{attrs:{designer:e._self,"show-button":e.showButton,buttons:e.tpl?e.templateButtons:e.buttons}})],1)]),n("div",{staticClass:"designer-content"},[n("div",{staticClass:"designer-center"},[n("div",{staticClass:"designer-page designer-mobile-wrap"},[e.page?n("DsfLayoutTree",{ref:"viewProxy",staticStyle:{position:"absolute",height:"100%",width:"100%"},attrs:{"is-design":!0,"component-props":e.page},on:{"update:componentProps":function(t){e.page=t},"update:component-props":function(t){e.page=t}},nativeOn:{dragstart:function(e){e.preventDefault()},mousedown:function(t){return t.stopPropagation(),e.mouseDownHanlder(t)},mousemove:function(t){return e.mouseMoveHanlder(t)},contextmenu:function(t){return e.contextMenuOpen(t)},click:function(t){return e.selectedComponent(t)}}}):e._e()],1),n("div",{staticClass:"designer-left"},[n("div",{staticClass:"designer-left-tools"},[n("el-tabs",{model:{value:e.layout.toolsBox.activeName,callback:function(t){e.$set(e.layout.toolsBox,"activeName",t)},expression:"layout.toolsBox.activeName"}},e._l(e.layout.toolsBox.tabs,(function(t){return n("el-tab-pane",{key:t.name,attrs:{label:t.label,name:t.name},scopedSlots:e._u([{key:"label",fn:function(){return[n("div",{staticStyle:{"padding-left":"4px"}},[e._v(e._s(t.label))])]},proxy:!0}],null,!0)},[n("div",{staticStyle:{padding:"5px"}},[n("form",{attrs:{action:""},on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.leftSearch(t)}}},[n("el-input",{staticClass:"design-search-input",staticStyle:{height:"30px","line-height":"30px"},model:{value:e.leftSearchInput,callback:function(t){e.leftSearchInput=t},expression:"leftSearchInput"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1)]),"controls"==t.name?e._l(e.useControlsGroup.groups,(function(t,a){return n("el-collapse",{key:a,attrs:{accordion:""},model:{value:e.tools.activeName,callback:function(t){e.$set(e.tools,"activeName",t)},expression:"tools.activeName"}},[n("el-collapse-item",{attrs:{name:t.title}},[n("template",{slot:"title"},[n("div",{staticClass:"ellipsis",staticStyle:{"font-size":"14px"},attrs:{title:t.title}},[e._v(" "+e._s(t.title)+" ")]),n("DsfIcon",{staticStyle:{position:"absolute",right:"30px"},attrs:{name:"guanbi2"},on:{click:function(n){return n.stopPropagation(),e.removeControlGroup(t)}}})],1),n("div",{staticClass:"ds-tools-group-content",staticStyle:{padding:"10px","max-height":"60vh",overflow:"auto"}},e._l(t.items,(function(t,a){return n("drag-item",{directives:[{name:"show",rawName:"v-show",value:e.isMatchLeftSearch(t.name),expression:"isMatchLeftSearch(item.name)"}],key:a,attrs:{data:t}})})),1)],2)],1)})):"metadata"==t.name?e._l(e.useMetaGroup.groups,(function(t,a){return n("el-collapse",{key:a,attrs:{accordion:""},model:{value:e.useMetaGroup.activeName,callback:function(t){e.$set(e.useMetaGroup,"activeName",t)},expression:"useMetaGroup.activeName"}},[n("el-collapse-item",{attrs:{name:t.id}},[n("template",{slot:"title"},[n("div",{staticClass:"ellipsis",staticStyle:{"font-size":"14px"},attrs:{title:t.title||t.name}},[e._v(" "+e._s(t.title||t.name)+" ")]),n("DsfIcon",{staticStyle:{position:"absolute",right:"30px"},attrs:{name:"guanbi2"},on:{click:function(n){return n.stopPropagation(),e.removeMetaDataGroup(t)}}})],1),n("div",{staticClass:"ds-tools-group-content",staticStyle:{padding:"10px","max-height":"60vh",overflow:"auto"}},e._l(t.items,(function(t,a){return n("drag-item",{directives:[{name:"show",rawName:"v-show",value:e.isMatchLeftSearch(t.name),expression:"isMatchLeftSearch(item.name)"}],key:a,attrs:{data:t}})})),1)],2)],1)})):"business"==t.name?e._l(e.useBusinessControlGroup.groups,(function(t,a){return n("el-collapse",{key:a,attrs:{accordion:""},model:{value:e.tools.activeName,callback:function(t){e.$set(e.tools,"activeName",t)},expression:"tools.activeName"}},[n("el-collapse-item",{attrs:{name:t.title}},[n("template",{slot:"title"},[n("div",{staticClass:"ellipsis",staticStyle:{"font-size":"14px"},attrs:{title:t.title}},[e._v(" "+e._s(t.title)+" ")]),n("DsfIcon",{staticStyle:{position:"absolute",right:"30px"},attrs:{name:"guanbi2"},on:{click:function(n){return n.stopPropagation(),e.removeBusinessGroup(t)}}})],1),n("div",{staticClass:"ds-tools-group-content",staticStyle:{padding:"10px","max-height":"60vh",overflow:"auto"}},e._l(t.items,(function(t,a){return n("drag-item",{directives:[{name:"show",rawName:"v-show",value:e.isMatchLeftSearch(t.name),expression:"isMatchLeftSearch(item.name)"}],key:a,attrs:{data:t}})})),1)],2)],1)})):e._e()],2)})),1)],1)]),n("div",{staticClass:"designer-right"},[n("DsfDesignerProperties",{attrs:{data:e.attributesGroup,owner:e.attributesOwner}})],1)])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.dragProxy.show,expression:"dragProxy.show"}],ref:"dragProxy",staticClass:"drag-proxy"}),e.contextMenu.show?n("div",{ref:"contextmenu",staticClass:"ds-contextmenu",style:{top:e.contextMenu.pos.y+"px",left:e.contextMenu.pos.x+"px"}},[n("dl",{staticClass:"ds-contextmenu-child ds-contextmenu-anim"},[e._l(e.contextMenu.items,(function(t,a){return["object"==e.dsf.type(t)?n("dd",{key:a,class:{disabled:t.disabled},on:{click:function(n){return e.contextMenuItemClick(t,n)}}},[n("a",[e._v(e._s(t.text))])]):"-"==t?n("dd",{key:a,staticClass:"split"}):e._e()]}))],2)]):e._e(),n("page-doc")],1):e._e()},k=[],S=n("5c40"),D=S["a"],C=Object(m["a"])(D,w,k,!1,null,null,null),N=C.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"ds-designer-mobile-setting"},[n("el-aside",{attrs:{width:"300px"}},[n("DsfPanel",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("配置")]},proxy:!0},{key:"default",fn:function(){return[n("el-tree",{ref:"tree",attrs:{data:e.treeData,"node-key":"type","expand-on-click-node":!1,"current-node-key":e.currentType,"default-expand-all":"","highlight-current":""},on:{"current-change":e.selectedNode}})]},proxy:!0}])})],1),n("el-main",[n("div",{staticClass:"form"},[n("DsfPanel",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.title))]},proxy:!0},{key:"header",fn:function(){return[n("DsfButton",{attrs:{icon:"baocun"},on:{click:function(t){return e.save()}}},[e._v("保存")]),n("DsfButton",{attrs:{icon:"shuaxin1",type:"plain"},on:{click:function(t){return e.refresh()}}},[e._v("刷新")])]},proxy:!0}])},[["info"==e.currentType&&e.info?n("el-form",[n("el-form-item",{attrs:{label:"AppID"}},[n("el-input",{attrs:{disabled:""},model:{value:e.info["id"],callback:function(t){e.$set(e.info,"id",t)},expression:"info['id']"}})],1),n("el-form-item",{attrs:{label:"AppCode"}},[n("el-input",{attrs:{disabled:""},model:{value:e.info["code"],callback:function(t){e.$set(e.info,"code",t)},expression:"info['code']"}})],1),n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{attrs:{disabled:""},model:{value:e.info["name"],callback:function(t){e.$set(e.info,"name",t)},expression:"info['name']"}})],1)],1):e._e(),"navs"==e.currentType&&e.navs?n("el-form",{attrs:{"label-position":"right",size:"small"}},[n("div",{staticStyle:{"margin-bottom":"10px","text-align":"right"}},[n("DsfButton",{attrs:{icon:"hao",type:"plain",size:"small"},on:{click:function(t){return e.addNav()}}},[e._v("新增")])],1),e._l(e.navs,(function(t,a){return n("el-card",{key:a,staticStyle:{"margin-bottom":"10px"}},[[n("div",{attrs:{slot:"header"},slot:"header"},[n("div",{staticStyle:{float:"right"}},[n("el-button",{staticStyle:{padding:"3px 0"},attrs:{type:"text"},on:{click:function(n){return e.remove(e.navs,t)}}},[e._v("删除")]),n("el-button",{staticStyle:{padding:"3px 0"},attrs:{type:"text"},on:{click:function(n){return e.up(e.navs,t)}}},[e._v("上移")]),n("el-button",{staticStyle:{padding:"3px 0"},attrs:{type:"text"},on:{click:function(n){return e.down(e.navs,t)}}},[e._v("下移")])],1),n("div",{staticStyle:{clear:"both"}})])],[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{model:{value:t.text,callback:function(n){e.$set(t,"text",n)},expression:"nav.text"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"地址"}},[n("el-input",{model:{value:t.href,callback:function(n){e.$set(t,"href",n)},expression:"nav.href"}})],1)],1),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"图标类型"}},[n("el-radio-group",{model:{value:t.iconType,callback:function(n){e.$set(t,"iconType",n)},expression:"nav.iconType"}},[n("el-radio",{attrs:{label:"icon"}},[e._v("icon")]),n("el-radio",{attrs:{label:"image"}},[e._v("图片")])],1)],1)],1),"image"==t.iconType?[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"图片地址"}},[n("el-input",{model:{value:t.imagePath,callback:function(n){e.$set(t,"imagePath",n)},expression:"nav.imagePath"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"选中图片地址"}},[n("el-input",{model:{value:t.activeImagePath,callback:function(n){e.$set(t,"activeImagePath",n)},expression:"nav.activeImagePath"}})],1)],1),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"大图标"}},[n("el-radio-group",{model:{value:t.big,callback:function(n){e.$set(t,"big",n)},expression:"nav.big"}},[n("el-radio",{attrs:{label:!0}},[e._v("是")]),n("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1)],1)]:[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"图标"}},[n("el-input",{model:{value:t.icon,callback:function(n){e.$set(t,"icon",n)},expression:"nav.icon"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"选中图标"}},[n("el-input",{model:{value:t.activeIcon,callback:function(n){e.$set(t,"activeIcon",n)},expression:"nav.activeIcon"}})],1)],1)]],2)]],2)}))],2):e._e(),"preloads"==e.currentType&&e.preloads?n("el-form",{attrs:{"label-position":"right",size:"small"}},[n("div",{staticStyle:{"margin-bottom":"10px","text-align":"right"}},[n("DsfButton",{attrs:{icon:"hao",type:"plain",size:"small"},on:{click:function(t){return e.addPreLoad()}}},[e._v("新增")])],1),e._l(e.preloads,(function(t,a){return n("el-card",{key:a,staticStyle:{"margin-bottom":"10px"}},[[n("div",{attrs:{slot:"header"},slot:"header"},[n("div",{staticStyle:{float:"right"}},[n("el-button",{staticStyle:{padding:"3px 0"},attrs:{type:"text"},on:{click:function(n){return e.remove(t,e.preloads)}}},[e._v("删除")])],1),n("div",{staticStyle:{clear:"both"}})])],[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"地址"}},[n("el-input",{model:{value:t.href,callback:function(n){e.$set(t,"href",n)},expression:"pre.href"}})],1)],1)],1)]],2)}))],2):e._e()]],2)],1),n("div",{staticClass:"demo"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.iframeLoading,expression:"iframeLoading"}],staticClass:"ds-designer-phone"},[n("DsfDemoBrowserNavBar",{staticClass:"browser-nav-bar",attrs:{"show-back":e.demo.showBack,title:e.demo.title,"go-back":e.goBack}}),n("iframe",{ref:"appDemoFrame",attrs:{scrolling:"no",name:"appDemo",src:e.src}})],1)])])],1)},L=[],O=n("cdd7"),I=O["a"],$=Object(m["a"])(I,T,L,!1,null,null,null),E=$.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{attrs:{stretch:""},model:{value:e.tabActive,callback:function(t){e.tabActive=t},expression:"tabActive"}},[n("el-tab-pane",{attrs:{label:"常用",name:"1"}},[n("el-collapse",{attrs:{accordion:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.inCommonUseGroup,(function(t,a){return n("el-collapse-item",{key:a,attrs:{title:t.name,name:t.name}},[n("div",e._l(t.attributes,(function(t,a){return n("DsfDesignerProperty",{directives:[{name:"show",rawName:"v-show",value:e.show(t.showExpress),expression:"show(item.showExpress)"}],key:(t.bindControlAttr||"")+a,attrs:{a:t.bindControlAttr+a,desc:t.desc,data:t,owner:e.owner,bind:e.getBind(t)}})})),1)])})),1)],1),n("el-tab-pane",{attrs:{label:"全部",name:"2"}},[n("el-collapse",{attrs:{accordion:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.data,(function(t,a){return n("el-collapse-item",{key:a,attrs:{title:t.name,name:t.name}},[n("div",e._l(t.attributes,(function(t,a){return n("DsfDesignerProperty",{directives:[{name:"show",rawName:"v-show",value:e.show(t.showExpress),expression:"show(item.showExpress)"}],key:(t.bindControlAttr||"")+a,attrs:{a:t.bindControlAttr+a,desc:t.desc,data:t,owner:e.owner,bind:e.getBind(t)}})})),1)])})),1)],1)],1)},R=[],M=n("e883"),P=M["a"],B=Object(m["a"])(P,j,R,!1,null,null,null),A=B.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"property-item"},[n("div",{staticClass:"property-item-name"},[e._v(" "+e._s(e.data.text)+" "),e.desc?n("DsfIcon",{staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{name:"bangzhuzhongxin"},on:{click:e.showHelp}}):e._e(),n("el-dialog",{attrs:{visible:e.showHeplerMark,title:e.data.text,"append-to-body":!0,width:"500px"},on:{"update:visible":function(t){e.showHeplerMark=t}}},[n("div",{staticStyle:{"max-height":"500px","min-height":"300px",overflow:"auto"}},[n("span",{staticStyle:{display:"inline-block","line-height":"1.5em"},domProps:{innerHTML:e._s(e.desc)}})])])],1),"text"==e.data.showType?n("el-input",{attrs:{attrdata:e.data,disabled:e.inputDisabled,placeholder:"请输入"},on:{change:e.dataValueChange},model:{value:e.dataValue,callback:function(t){e.dataValue=t},expression:"dataValue"}}):e._e(),"number"==e.data.showType?n("el-input-number",{staticStyle:{width:"100%"},attrs:{attrdata:e.data,controls:e.config.controls||!0,size:e.config.size||"medium",step:e.config.step,"step-strictly":e.config.stepStrictly||!1,min:e.config.min||0,max:e.config.max,precision:e.config.precision||0},on:{change:e.dataValueChange},model:{value:e.dataValue,callback:function(t){e.dataValue=t},expression:"dataValue"}}):"boolean"==e.data.showType?n("el-radio-group",{attrs:{attrdata:e.data},on:{change:e.dataValueChange},model:{value:e.dataValue,callback:function(t){e.dataValue=t},expression:"dataValue"}},[n("el-radio",{attrs:{label:!0}},[e._v("是")]),n("el-radio",{attrs:{label:!1}},[e._v("否")])],1):"checkbox"==e.data.showType?n("el-checkbox-group",{attrs:{attrdata:e.data},on:{change:e.dataValueChange},model:{value:e.dataValueArray,callback:function(t){e.dataValueArray=t},expression:"dataValueArray"}},e._l(e.data.dictionary,(function(t,a){return n("el-checkbox",{key:a,attrs:{label:t.value}},[e._v(" "+e._s(t.text)+" ")])})),1):"select"==e.data.showType?n("el-select",{staticStyle:{width:"100%"},attrs:{attrdata:e.data,placeholder:"请选择"},on:{change:e.dataValueChange},model:{value:e.dataValue,callback:function(t){e.dataValue=t},expression:"dataValue"}},e._l(e.data.dictionary,(function(e,t){return n("el-option",{key:t,attrs:{label:e.text,value:e.value}})})),1):"rangeSelect"==e.data.showType?n("DsfRangeSelect",{attrs:{dictionary:e.data.dictionary},on:{change:e.dataValueChange},model:{value:e.dataValue,callback:function(t){e.dataValue=t},expression:"dataValue"}}):"timePicker"==e.data.showType?n("el-time-picker",e._b({staticStyle:{width:"100%"},attrs:{attrdata:e.data},on:{change:e.dataValueChange},model:{value:e.dataValue,callback:function(t){e.dataValue=t},expression:"dataValue"}},"el-time-picker",e.data.attributes,!1)):"datePicker"==e.data.showType?n("el-date-picker",e._b({staticStyle:{width:"100%"},attrs:{attrdata:e.data,"value-format":"timestamp"},on:{change:e.dataValueChange},model:{value:e.dataValue,callback:function(t){e.dataValue=t},expression:"dataValue"}},"el-date-picker",e.data.attributes,!1)):"multipleText"==e.data.showType?[n("el-row",{attrs:{gutter:2}},e._l(e.config.inputs,(function(t,a){return n("el-col",{key:a,attrs:{span:24/e.config.inputs.length}},[e.dataValue?[n("el-input",e._b({staticClass:"mtext",attrs:{placeholder:t.placeholder||"",attrdata:e.data},on:{change:function(t){return e.arrayDataValueChange(t,e.dataValue,a)}},model:{value:e.dataValue[a],callback:function(t){e.$set(e.dataValue,a,t)},expression:"dataValue[$index]"}},"el-input",e.data.attributes,!1))]:[n("el-input",e._b({staticClass:"mtext",attrs:{placeholder:t.placeholder||"",attrdata:e.data},on:{change:function(t){return e.arrayDataValueChange(t,e.dataValue,a)}}},"el-input",e.data.attributes,!1))]],2)})),1)]:"dialog"==e.data.showType?n("DsfDesignerDialog",{attrs:{owner:e.owner,attrdata:e.data},on:{change:e.dataValueChange},model:{value:e.dataValue,callback:function(t){e.dataValue=t},expression:"dataValue"}}):"upload"==e.data.showType?n("div",{staticStyle:{display:"flex"}},[n("el-input",{attrs:{placeholder:"请输入"},on:{change:e.dataValueChange},model:{value:e.dataValue,callback:function(t){e.dataValue=t},expression:"dataValue"}}),n("el-upload",{staticClass:"ds-button-update",attrs:{headers:e.dsf.getToken(),accept:e.data.accept,data:e.data.config,"show-file-list":!1,action:e.getRequestUrl(e.data),"on-success":e.handleSuccess(e.data),"before-upload":e.beforeUpload(e.data)}},[n("DsfButton",{staticStyle:{"white-space":"nowrap"}},[e._v(e._s(e.data.btnName))])],1)],1):e._e()],2)},F=[],V=n("2807"),q=V["a"],K=(n("25f7"),Object(m["a"])(q,z,F,!1,null,"052bcd58",null)),U=K.exports,W=n("73cd"),G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{staticStyle:{width:"100%",height:"100%"},attrs:{type:"card"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"业务代码",name:"code",lazy:""}},[n("MonacoEditor",{ref:"extCode",attrs:{code:e.extCode}})],1),n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"自定义样式",name:"css",lazy:""}},[n("MonacoEditor",{ref:"css",attrs:{code:e.css,language:"scss"}})],1),n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"模板",name:"模板",lazy:""}},[n("MonacoEditor",{ref:"vueTemplate",attrs:{code:e.vueTemplate,language:"html"}})],1)],1)},H=[],X={name:"Development",props:{vueTemplate:{type:String,default:""},css:{type:String,default:""},extCode:{type:String,default:""}},data:function(){return{active:"code"}},methods:{yes:function(){var e=this.$refs.extCode?this.$refs.extCode.getContent():this.extCode,t=this.$refs.css?this.$refs.css.getContent():this.css,n=this.$refs.vueTemplate?this.$refs.vueTemplate.getContent():this.vueTemplate;return{extCode:e,css:t,vueTemplate:n}}}},Y=X,J=(n("b5d1"),Object(m["a"])(Y,G,H,!1,null,"27bca36a",null)),Q=J.exports,Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"100%",height:"100%"}},[n("div",{staticStyle:{padding:"5px"}},[n("DsfButton",{attrs:{icon:"baocun","btn-style":"icon-text"}},[e._v("保存")])],1),n("el-tabs",{staticClass:"ds-user-dev",staticStyle:{width:"100%"},attrs:{type:"card"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"模板",name:"template",lazy:""}},[n("MonacoEditor",{ref:"vueTemplate",attrs:{code:e.vueTemplate,language:"html"}})],1),n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"js代码",name:"code",lazy:""}},[n("MonacoEditor",{ref:"extCode",attrs:{code:e.extCode}})],1),n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"样式",name:"css",lazy:""}},[n("MonacoEditor",{ref:"css",attrs:{code:e.css,language:"scss"}})],1),n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"设计器属性配置",name:"json",lazy:""}},[n("MonacoEditor",{ref:"json",attrs:{code:e.jsonCode,language:"json"}})],1)],1)],1)},ee=[],te=' dsf.exportOnLineComponent({\r\n  name:"DsfText",\r\n  data: function() {\r\n    return {\r\n    }\r\n  },\r\n  computed: {},\r\n  created: function() {},\r\n  mounted: function() {},\r\n  activated: function() {},\r\n  deactivated: function() {},\r\n  methods: {\r\n\r\n  }\r\n});',ne={name:"DsfUserComponentDev",props:{vueTemplate:{type:String,default:"<template>\r\n\t<div></div>\r\n</template>"},css:{type:String,default:""},extCode:{type:String,default:te},jsonCode:{type:String,default:"{}"}},data:function(){return{active:"template"}},methods:{yes:function(){var e=this.$refs.extCode?this.$refs.extCode.getContent():this.extCode,t=this.$refs.css?this.$refs.css.getContent():this.css,n=this.$refs.vueTemplate?this.$refs.vueTemplate.getContent():this.vueTemplate;return{extCode:e,css:t,vueTemplate:n}}}},ae=ne,ie=(n("1255"),Object(m["a"])(ae,Z,ee,!1,null,"5be92143",null)),oe=ie.exports,se=(n("4fad"),n("d3b7"),n("ddb0"),n("3835")),re=n("c4f9"),le={};function ce(e){for(var t=0,n=Object.entries(le);t<n.length;t++){var a=Object(se["a"])(n[t],2),i=(a[0],a[1]);e.component(i.name,i)}}re.keys().forEach((function(e){var t=re(e).default;if(t.name){var n=t.name;le[n]=t}return le})),le.install=ce;var ue=ce;function de(e){dsf.mix(dsf,{beautify:x.a}),e.use(ue),e.component(N.name,N),e.component(A.name,A),e.component(U.name,U),e.component(W["a"].name,W["a"]),e.component(E.name,E),e.component(Q.name,Q),e.component(oe.name,oe)}"undefined"!==typeof window&&window.Vue&&de(window.Vue);var he=de,pe=n("6a0a"),fe=n("4360"),me=(n("4ce4"),n("365c"),n("7c3f")),ge=n("162d"),_e=n("0410"),be=n("b82d"),ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},ye=[],xe={name:"DesignerApp",data:function(){return{}},beforeCreate:function(){},created:function(){},mounted:function(){}},we=xe,ke=Object(m["a"])(we,ve,ye,!1,null,null,null),Se=ke.exports,De=(n("99af"),n("2909")),Ce=n("8c4f"),Ne=n("3f30"),Te=n("a6e5"),Le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-designer ds-seat-container ds-seat-design"},[n("div",{staticClass:"designer-head"},[n("top-tools",e._b({},"top-tools",e.postData,!1,!0))],1),n("div",{staticClass:"designer-content"},[n("div",{staticClass:"seat-designer-center"},[n("left-tools"),n("seat-canvas",{scopedSlots:e._u([{key:"seat",fn:function(){return[n("seat-item",e._b({on:{"save-layout":e.saveLayout}},"seat-item",e.postData,!1,!0))]},proxy:!0},{key:"seatPop",fn:function(){return[n("seat-pop")]},proxy:!0}])}),n("right-tools")],1)])])},Oe=[],Ie=n("8c4c"),$e=Ie["a"],Ee=(n("71c1"),Object(m["a"])($e,Le,Oe,!1,null,null,null)),je=Ee.exports,Re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-designer ds-seat-container ds-seat-view"},[n("div",{staticClass:"designer-head"},[n("top-tools",e._b({attrs:{"relative-list":e.relativeList,"seat-obj":e.seatObj,"relative-obj":e.relativeObj},on:{"update:relativeList":function(t){e.relativeList=t},"update:relative-list":function(t){e.relativeList=t},save:e.save,clear:e.clear}},"top-tools",e.postData,!1,!0))],1),n("div",{staticClass:"designer-content"},[n("div",{staticClass:"seat-designer-center"},[n("left-tree",{attrs:{"relative-list":e.relativeList,"person-obj":e.personObj,"seat-obj":e.seatObj,"relative-obj":e.relativeObj},on:{"update:relativeList":function(t){e.relativeList=t},"update:relative-list":function(t){e.relativeList=t},"update:personObj":function(t){e.personObj=t},"update:person-obj":function(t){e.personObj=t}}}),n("seat-canvas",{scopedSlots:e._u([{key:"seat",fn:function(){return[n("seat-item",e._b({attrs:{"relative-list":e.relativeList,"chosen-items":e.chosenItems,"key-stack":e.keyStack,"seat-obj":e.seatObj,"person-obj":e.personObj,"relative-obj":e.relativeObj},on:{"update:relativeList":function(t){e.relativeList=t},"update:relative-list":function(t){e.relativeList=t},"update:chosenItems":function(t){e.chosenItems=t},"update:chosen-items":function(t){e.chosenItems=t}}},"seat-item",e.postData,!1,!0))]},proxy:!0},{key:"seatPop",fn:function(){return[n("seat-pop",{attrs:{"relative-list":e.relativeList,"chosen-items":e.chosenItems,"seat-obj":e.seatObj,"relative-obj":e.relativeObj},on:{"update:relativeList":function(t){e.relativeList=t},"update:relative-list":function(t){e.relativeList=t},"update:chosenItems":function(t){e.chosenItems=t},"update:chosen-items":function(t){e.chosenItems=t}}})]},proxy:!0}])})],1)])])},Me=[],Pe=n("3721"),Be=Pe["a"],Ae=Object(m["a"])(Be,Re,Me,!1,null,null,null),ze=Ae.exports,Fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticClass:"ds-exam-page",style:"width: "+e.pageWidth+"px"},[n("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.examLoading,expression:"examLoading"}],staticClass:"scroll-content",attrs:{"element-loading-text":"加载试卷中..."}},[n("h2",{staticClass:"ds-font2"},[e._v(e._s(e.examInfoData.name))]),e.examInfoData.remark?n("div",{staticClass:"exam-remark"},[e._v(e._s(e.examInfoData.remark))]):e._e(),e._l(e.examInfoData.questions,(function(t,a){return[n("h3",{key:t.type+a,staticClass:"ds-font3"},[e._v(e._s(e.dsf.math.toChinesNum(++a)+"、"+e.examTitle[t.type]+(t.score&&t.score.total?" (共"+t.score.total+"分)":"")))]),n(e.componentIs[t.type],{key:t.type+a,tag:"component",attrs:{"res-data":t.subjects,"exam-mark-active":e.examMarkActive}})]}))],2),n("el-aside",{staticClass:"ds-exam-aside",style:"width: "+e.asideWidth+"px"},[n("div",{staticClass:"aside-content",style:"width: "+e.asideWidth+"px"},[n("div",{staticClass:"ds-exam-submit",class:{disabled:e.getAllowSubmit},on:{click:e.examPost}},[n("i",{staticClass:"iconfont icon-dui"}),n("p",[e._v("提交试卷")])]),n("div",{staticClass:"ds-exam-time-info"},[n("div",{staticClass:"ds-exam-score"},[n("span",{staticClass:"ds-font4"},[e._v(e._s(e.examInfoData.answer||3!==e.examInfoData.state?"成绩":"剩余时间"))]),e.examInfoData.answer||3!==e.examInfoData.state?n("span",{staticClass:"ds-font2 exam-result"},[e._v(e._s(e.examResult?e.examResult.examScore||"正在阅卷中":1==e.examInfoData.state?"待":2==e.examInfoData.state?"已阅卷":"待阅卷"))]):n("span",{staticClass:"ds-font2",class:{"exam-result":e.examInfoData.answer}},[e._v(e._s(e.getTime))])]),n("div",{staticClass:"ds-exam-score"},[n("span",{staticClass:"ds-font4"},[e._v("当前进度")]),n("span",{staticClass:"ds-font2"},[e._v("2/"+e._s(e.speedLength))])])]),n("div",{staticClass:"ds-exam-card"},[n("p",{staticClass:"title"},[e._v("答题卡")]),n("div",{staticClass:"content"},e._l(e.examInfoData.questions,(function(t,a){return n("ul",{key:t.type+a,staticClass:"lists"},[n("li",[n("p",{staticClass:"exam-tit"},[e._v(e._s(e.dsf.math.toChinesNum(++a)+"、"+e.examTitle[t.type]+(t.score&&t.score.total?" (共"+t.score.total+"分)":"")))]),e._l(t.subjects,(function(t,a){return[n("span",{key:a,staticClass:"item",class:{marked:-1!=e.examMarkActive.indexOf(t.id)},attrs:{"data-id":t.id},on:{click:function(n){return e.toScroll(t.id)}}},[e._v(e._s(++a)+" "),n("i",{staticClass:"iconfont icon-icon2 error"})])]}))],2)])})),0)])])]),e.popClose?n("div",{staticClass:"el-message-box__wrapper",staticStyle:{"z-index":"15001"}},[n("div",{staticClass:"el-message-box",staticStyle:{"margin-top":"20vh"}},[n("div",{staticClass:"el-message-box__header"},[n("div",{staticClass:"el-message-box__title"},[e._v("考试注意事项")])]),n("div",{staticClass:"el-message-box__content"},[n("div",{staticClass:"el-message-box__container"},[n("div",{staticClass:"el-message-box__message"},[e._v(" 考试注意事项考试注意事项考试注意事项考试注意事项考试注意事项考试注意事项考试注意事项考试注意事项考试注意事项考试注意事项考试注意事项 ")])])]),n("div",{staticClass:"el-message-box__btns"},[n("el-button",{attrs:{size:"small",type:e.isDisabled?"info":"primary",disabled:e.isDisabled},on:{click:e.considerations}},[e._v(" "+e._s(e.confirmButtonText)+" ")])],1)])]):e._e(),e.popClose?n("div",{staticClass:"v-modal",staticStyle:{"z-index":"15000"}}):e._e()],1)},Ve=[],qe=n("5a7e"),Ke=qe["a"],Ue=Object(m["a"])(Ke,Fe,Ve,!1,null,null,null),We=Ue.exports,Ge=[{path:"/pc/preview",name:"DsfLayoutPreView",meta:{title:"预览"},component:Ne["a"],props:function(e){return{mobile:"1"==e.query["mobile"],tpl:"1"==e.query["tpl"]}}},{path:"/mobile/preview",name:"DsfMobileLayoutPreView",meta:{title:"预览"},component:Te["a"]},{path:"/componentDev",name:"componentDev",meta:{title:"组件开发"},component:oe,props:function(e){return{mobile:"1"==e.query["mobile"],tpl:"1"==e.query["tpl"]}}},{path:"/seatDesign",name:"seatDesign",component:je},{path:"/seatView",name:"seatView",component:ze},{path:"/dormitory",name:"dormitory",component:function(){return n.e("Dormitory").then(n.bind(null,"491f"))}},{path:"/flow",name:"Flow",meta:{title:"流程设计器"},component:function(){return Promise.all([n.e("jquery-ui"),n.e("Flow")]).then(n.bind(null,"82c8"))}},{path:"/todoTemp",name:"TodoTemp",meta:{title:"待办事项"},component:function(){return n.e("TodoTemp").then(n.bind(null,"f692"))}},{path:"/mobilesetting",name:"MobileSetting",meta:{title:"移动端设置"},component:E},{path:"/exam",name:"Exam",component:We,meta:{title:"在线考试"}}],He=Ge,Xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isReload?e._e():n("dsf-designer",e._b({attrs:{model:"design"}},"dsf-designer",this.$attrs,!1))},Ye=[],Je={name:"Designer",inheritAttrs:!1,data:function(){return{isReload:!1}},beforeCreate:function(){},created:function(){},mounted:function(){},beforeRouteEnter:function(e,t,n){t.name==e.name?n((function(e){e.isReload=!0,e.$nextTick((function(){e.isReload=!1}))})):n((function(e){e.isReload=!1}))},beforeRouteUpdate:function(e,t,n){var a=this;this.isReload=!0,this.$nextTick((function(){a.isReload=!1})),n()}},Qe=Je,Ze=Object(m["a"])(Qe,Xe,Ye,!1,null,null,null),et=Ze.exports,tt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isReload?e._e():n("dsf-designer",e._b({attrs:{model:"design"}},"dsf-designer",this.$attrs,!1))},nt=[],at={name:"MobileDesigner",inheritAttrs:!1,data:function(){return{isReload:!1}},beforeCreate:function(){},created:function(){},mounted:function(){},beforeRouteEnter:function(e,t,n){t.name==e.name?n((function(e){e.isReload=!0,e.$nextTick((function(){e.isReload=!1}))})):n((function(e){e.isReload=!1}))},beforeRouteUpdate:function(e,t,n){var a=this;this.isReload=!0,this.$nextTick((function(){a.isReload=!1})),n()}},it=at,ot=Object(m["a"])(it,tt,nt,!1,null,null,null),st=ot.exports;a["default"].use(Ce["a"]);var rt=[].concat(Object(De["a"])(He),[{path:"/pc/page",name:"Designer",component:et,meta:{title:"页面设计器"},props:function(e){return{business:e.query.B,module:e.query.M,pageName:e.query.pname,pageTitle:e.query.title,mobile:!1,tpl:1==e.query.tpl}}},{path:"/mobile/page",name:"MobileDesigner",component:st,meta:{title:"页面设计器"},props:function(e){return{business:e.query.B,module:e.query.M,pageName:e.query.pname,mobile:!0,tpl:1==e.query.tpl}}}]),lt=new Ce["a"]({mode:"hash",base:"",routes:rt});dsf.init.initRouter(lt,"pc");var ct=lt;dsf.init.initPlatform(a["default"]),dsf.init.globalMixin(a["default"]),a["default"].use(i["a"]),a["default"].use(o["a"]),a["default"].use(he),a["default"].use(v),a["default"].use(me["a"]),a["default"].use(ge["a"]),a["default"].use(_e["a"]).use(be["a"]);var ut=new a["default"];Object.defineProperties(a["default"].prototype,{$bus:{get:function(){return ut}}}),ct.beforeResolve((function(e,t,n){document.title=e.meta.title||dsf.config.setting_public_logo_title||"",n()})),a["default"].config.productionTip=!1,new a["default"]({mixins:[pe["a"]],router:ct,store:fe["a"],data:function(){return{}},created:function(){var e=this;dsf.resizeDetector(),"-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style&&window.addEventListener("hashchange",(function(){var t=window.location.hash.slice(1);e.$router.path!==t&&e.$router.replace(t)}),!1)},render:function(e){return e(Se)}}).$mount("#app")},b45c:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-tree-select",class:[e.theme],style:{"padding-top":e.searchControl?"50px":"0"}},[e.searchControl?n("div",{staticClass:"ds-tree-select-search-box"},[n("el-input",{attrs:{placeholder:"输入关键词（多个关键词空格隔开）"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[n("i",{staticClass:"iconfont icon-Magnifier",attrs:{slot:"suffix"},slot:"suffix"})])],1):e._e(),n("div",{staticClass:"ds-tree-select-tree-box"},[e.multiple?n("el-tree",{ref:"tree",attrs:{"default-expand-all":"",data:e.treeData,"node-key":e.nodeKey,"empty-text":e.loading?"数据加载中...":e.emptyText,"show-checkbox":e.multiple,"default-checked-keys":e.defaultCheckedKeys,"filter-node-method":e.filterNode},on:{check:e.check,"node-click":e.nodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,i=t.data;return n("div",{staticClass:"custom-tree-node"},[void 0!==i.children?[n("i",{staticClass:"iconfont",class:[a.expanded?"icon-dakai":"icon-wenjianjia"]}),n("span",[e._v(e._s(i[e.nodeName]))])]:[n("i",{staticClass:"iconfont icon-shiyongwendang"}),n("span",[e._v(e._s(i[e.nodeName]))])]],2)}}],null,!1,331581664)}):n("el-tree",{ref:"tree",attrs:{"default-expand-all":"",data:e.treeData,"node-key":e.nodeKey,"empty-text":e.loading?"数据加载中...":e.emptyText,"show-checkbox":e.multiple,"default-checked-keys":e.defaultCheckedKeys,"filter-node-method":e.filterNode},on:{check:e.check,"node-click":e.nodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,i=t.data;return n("div",{staticClass:"custom-tree-node"},[void 0!==i.children?[n("i",{staticClass:"iconfont",class:[a.expanded?"icon-dakai":"icon-wenjianjia"]}),n("span",[e._v(e._s(i[e.nodeName]))])]:n("el-radio",{attrs:{label:i[e.nodeKey],disabled:i.nocheck},model:{value:e.radioId,callback:function(t){e.radioId=t},expression:"radioId"}},[n("i",{staticClass:"iconfont icon-shiyongwendang"}),n("span",[e._v(e._s(i[e.nodeName]))])])],2)}}])})],1)])},i=[],o=(n("99af"),n("4de4"),n("c975"),n("a9e3"),n("ac1f"),n("1276"),n("498a"),n("4795"),0),s={name:"DsfTreeSelect",props:{theme:{type:String,default:"theme1"},searchControl:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},radioCanCancel:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},emptyText:{type:String,default:"暂无数据"},nodeKey:{type:String,default:""},nodeName:{type:String,default:"label"},defaultExpandAll:{type:Boolean,default:!1},defaultExpandedKeys:{type:Array,default:function(){return[]}},defaultCheckedKey:{type:[Array,String,Number],default:function(){return[]}},treeData:{type:Array,default:function(){return[]}}},data:function(){return{keyword:"",radioId:"",defaultCheckedKeys:[]}},computed:{keywords:function(){var e=this.keyword.trim();return""===e?[]:e.split(" ")}},watch:{keyword:function(e){this.$refs.tree.filter(e)},defaultCheckedKey:function(e){this.initDefaultCheckedKeys(e)},loading:function(e){if(!e&&this.treeData.length)if(this.multiple)this.handleCheckChange();else{var t=this.$refs.tree.getNode(this.radioId);t&&(this.$emit("choose-node",t.data),this.$emit("choose-key",this.radioId))}}},created:function(){this.initDefaultCheckedKeys(this.defaultCheckedKey)},mounted:function(){if(this.loading)if(this.multiple)this.treeData.length&&this.handleCheckChange();else{var e=this.$refs.tree.getNode(this.radioId);e&&(this.$emit("choose-node",e.data),this.$emit("choose-key",this.radioId))}},methods:{filterNode:function(e,t,n){if(!this.keywords.length)return!0;if(n.parent){if(n.parent.visible&&n.parent.filterText===e)return n.filterText=e,!0}else n.filterText=null;for(var a=0;a<this.keywords.length;a++)if(-1===t[this.nodeName].indexOf(this.keywords[a]))return n.filterText=e,!1;return n.filterText=e,!0},check:function(){this.handleCheckChange()},initDefaultCheckedKeys:function(e){this.multiple?"array"!==dsf.type(e)?this.defaultCheckedKeys=[e]:this.defaultCheckedKeys=e:"array"===dsf.type(e)?this.radioId=e.length?e[0]:"":this.radioId=e},nodeClick:function(e){var t=this;if(!this.multiple&&!e.children){var n=null,a=null;e[this.nodeKey]!==this.radioId?(n=e,a=e[this.nodeKey]):this.radioCanCancel&&setTimeout((function(){t.radioId=""}),0),clearTimeout(o),o=setTimeout((function(){t.$emit("choose-node",n),t.$emit("choose-key",a)}),50)}for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];this.$emit.apply(this,["node-click",e].concat(s))},handleCheckChange:function(){this.$emit("choose-node",this.$refs.tree.getCheckedNodes(!0)),this.$emit("choose-key",this.$refs.tree.getCheckedKeys(!0))},getNode:function(e){return this.$refs.tree.getNode(e)}}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},b56b:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100%"}},[n("el-aside",{staticStyle:{overflow:"auto",height:"100%",border:"1px solid #d4d4d4"},attrs:{width:"30%"}},[n("el-table",{ref:"table",attrs:{data:e.buttonsTable,"highlight-current-row":""},on:{"current-change":e.currentChangeHandler}},[n("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),n("el-table-column",{attrs:{label:"按钮名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.text))])]}}])})],1)],1),n("el-main",{staticStyle:{padding:"0px",border:"1px solid #d4d4d4","margin-left":"10px"}},[n("el-tree",{ref:"tree",attrs:{"node-key":"_id","show-checkbox":"","default-expand-all":"","expand-on-click-node":!1,"check-on-click-node":!0,data:e.treeData,props:e.treeProps},on:{"check-change":e.checkChangeHandler}})],1)],1)},i=[],o=n("2232"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["default"]=l.exports},b5c9:function(e,t,n){"use strict";(function(e){n("7db0"),n("c740"),n("d81d"),n("96cf");var a=n("1da1"),i=n("2d0f");t["a"]={name:"DesSuperSearchSetting",mixins:[i["a"]],data:function(){return{tableData:[],treeData:[],defaultProps:{children:"children",label:"name"},options:[{label:"选项枚举",value:"enum",defaultField:["value"]},{label:"文本",value:"text"},{label:"日期时间",value:"datetime"}]}},created:function(){},mounted:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.owner.$$getComponent(),a=n.$options.design.metadata.create.call(n),a&&!(a.length<=1)){t.next=5;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 5:if(i=a[1].metadata.at,i){t.next=9;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 9:return t.next=11,e.getTreeData(a[1].metadata,a[1].metadata.rm_type||3);case 11:e.treeData=t.sent,e.tableData=e.currentData||[];case 13:case"end":return t.stop()}}),t)})))()},methods:{getRowId:function(e){var t=e.id;return t},getParentRow:function(t){var n=e.find(this.tableData,(function(e){return e.id==t.parent}));return n||{}},searchTypeChange:function(e,t){this.updateValueAttributeJoin(t,e)},updateValueAttributeJoin:function(e,t){"enum"==e.searchType?(e.model="select",e.operator="in"):"text"==e.searchType?(e.model="textbox",e.operator="like"):"datetime"==e.searchType&&(e.model="ymd",e.operator="between")},updateLayout:function(e){"24"!=e.layout&&"enum"==e.searchType&&(e.model="select")},updateModel:function(e){"tile"==e.model&&"enum"==e.searchType&&(e.layout="24")},toList:function(t,n){if(n.field){var a=e.findIndex(this.tableData,(function(e){return e.field==n.field}));if(a<0){var i={id:n.id,field:n.field,fieldCaption:n.fieldCaption,type:"metadata",searchType:"enum",code:n.code,layout:"24",model:"select",defaultValue:"",operator:"in"};this.updateValueAttributeJoin(i,i.searchType),this.tableData.push(i)}}},settingEnumItems:function(e){this.$openDialog({title:"选项设置",content:"DesSuperSearchEnumItems",height:"60vh",width:"700px",params:{item:e,searchItems:this.tableData,currentData:e.setting},btns:[{text:"确定",handler:function(t){var n=t.yes();e.setting=n||null}},{text:"取消"}]})},getTreeData:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function a(){var i,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=[],"8"!=t){a.next=8;break}return o={rmId:e.rmId},a.next=5,n.$webAPI.getDbSourceFieldsTree(o);case 5:i=a.sent,a.next=13;break;case 8:if("3"!=t){a.next=13;break}return s={namespace:e.at},a.next=12,n.$webAPI.getMetaDataFieldsTree(s);case 12:i=a.sent;case 13:return a.abrupt("return",i);case 14:case"end":return a.stop()}}),a)})))()},remove:function(e){dsf.array.remove(this.tableData,e)},up:function(t){var n=e.findIndex(this.tableData,(function(e){return e==t}));if(n>0){var a=this.tableData[n-1];this.$set(this.tableData,n-1,t),this.$set(this.tableData,n,a)}},down:function(t){var n=e.findIndex(this.tableData,(function(e){return e==t}));if(n<this.tableData.length-1){var a=this.tableData[n+1];this.$set(this.tableData,n+1,t),this.$set(this.tableData,n,a)}},yes:function(){var t=e.map(this.tableData,(function(e){var t,n=dsf.mix(!0,{},e);return"enum"!=n.searchType&&delete n.items,"treeselect"==n.model&&"interface"!==(null===n||void 0===n||null===(t=n.setting)||void 0===t?void 0:t.type)&&(n.setting=null),n}));return t}}}}).call(this,n("2ef0"))},b5d1:function(e,t,n){"use strict";n("7f66")},b6e4:function(e,t,n){"use strict";(function(e){n("b0c0");var a=n("5530"),i=n("531e"),o=n("3b6b"),s=function(t,n){var s=[],r={path:[],from:null,to:null,strokeWidth:t.Path.strokeWidth,stroke:t.Path.stroke,arrowEnd:t.Path.arrow},l=!1;if(Object.assign(r,n),this.id=r.id||null,this.name=r.name||"",this.type=r.type||0,this.path=r.path?e.inArray(r.path)?r.path:[r.path]:[],this.from=r.from,this.fromType=r.fromType,this.to=r.to,this.strokeWidth=r.strokeWidth,this.stroke=r.stroke,this.arrowEnd=r.arrowEnd,this.linkInfo=r.linkInfo||{},this.oldstroke=null,this.isHide=r.isHide||!1,this.parentNodeId=r.parentNodeId,r.attributes){var c=Object(i["b"])(Object(o["i"])());this.attributes=dsf.mix(!0,{},c,r.attributes)}this.remove=function(){if(s)for(var e=s.length-1;e>=0;e--)s[e].remove();s=[]},this.getSegmenList=function(){return s},this.refresh=function(){if(s)for(var e=0;e<s.length;e++)s[e].refresh()},this.addElement=function(e){s.push(e)},this.isSelected=function(){return l},this.selected=function(){l=!0,this.oldstroke=this.stroke,this.stroke="#333",this.refresh()},this.unSelected=function(){l=!1,this.stroke=this.getLineStroke.call(this),this.refresh()},this.hide=function(){if(s)for(var e=s.length-1;e>=0;e--)s[e].hide()},this.show=function(){if(s)for(var e=s.length-1;e>=0;e--)s[e].show()},this.getPreLine=function(e){return s[e.index-1]},this.getNextLine=function(e){return s[e.index+1]},this.getLineStroke=function(){if(this.isSelected())return"#333";var e=t.Lines["Line_"+this.type];return e?e.stroke:t.Path.stroke},this.setAttributes=function(e,t){if(this.attributes?this.attributes=Object(a["a"])({},this.attributes):this.attributes=Object(i["b"])(Object(o["i"])()),this.attributes.BaseInfo.StartNodeID=this.from,this.attributes.BaseInfo.EndNodeID=this.to,this.name=this.name||e.name+"→"+t.name,this.attributes.BaseInfo.Name=this.name,this.attributes.BaseInfo.ID=this.id,this.attributes.BaseInfo.Type=this.type,"6"==e.type){var n=e.attributes;if(n.OutLine.SendConditions&&n.OutLine.SendConditions.Condition){var s=null;try{s=n.OutLine.SendConditions.Condition.Switch.ItemValue}catch(d){s=null}if(s){for(var r=!1,l=0;l<s.length;l++){var c=s[l];if(c.LineID==ui.id){r=!0;break}}if(!r){var u={Value:"",Type:"8",LineID:ui.id,LineName:ui.name};s.push(u)}}}}}};t["a"]=s}).call(this,n("1157"))},b95d:function(e,t,n){},bacbe:function(e,t,n){},bb7f:function(e,t,n){"use strict";(function(e){n("99af"),n("cb29"),n("d81d"),n("4e82"),n("a9e3"),n("b680");var a=n("2d0f");t["a"]={name:"DesGridLayout",mixins:[a["a"]],data:function(){return{widths:[],heights:[],tableData:[]}},computed:{rowNum:function(){return this.tableData.length},colNum:function(){return this.tableData.length?this.tableData[0].length:0},areas:function(){var t=[],n=e.flattenDeep(this.tableData);return t=n.concat(n),t=e.uniq(t),t=t.sort((function(e,t){return e<t?-1:1})),t=e.map(t,(function(e){return{text:"区域"+e,value:e}})),t}},created:function(){this.tableData=dsf.mix(!0,[],this.owner.contentLayout.grid),this.widths=dsf.mix(!0,[],this.owner.contentLayout.widths),this.heights=dsf.mix(!0,[],this.owner.contentLayout.heights)},beforeMount:function(){},mounted:function(){},methods:{rowClickHandler:function(){},addCol:function(){for(var e=[],t=0;t<this.rowNum;t++){for(var n=[],a=0;a<=this.colNum;a++)if(a==this.colNum)n.push(t*(this.colNum+1)+a+1);else{var i=this.tableData[t][a],o=(i-1)%this.colNum,s=(i-o-1)/this.colNum;n.push(s*(this.colNum+1)+o+1)}e.push(n)}this.widths=new Array(this.colNum+1).fill(this.pxToRem(+(100/(this.colNum+1)).toFixed(3)+"%")),this.tableData=e},addRow:function(){for(var e=[],t=1;t<=this.colNum;t++)e.push(this.colNum*this.rowNum+t);this.tableData.push(e),this.heights.push("46px")},vaildate:function(){return 0!=data.length||(dsf.layer.pc.message("至少存在一格",!1),!1)},deleted:function(e){var t=this;if(e.row.slots[0].controls.length>0){var n=e.row.slots[0].controls;dsf.layer.pc.confirm("栅格中存在"+n.length+"个子组件,删除该单元格子组件将一起被删除。<br/>是否确定要继续?").then((function(){dsf.array.remove(t.tableData,e.row)})).catch((function(){}))}else dsf.array.remove(this.tableData,e.row)},areaChange:function(e,t,n){console.log(e,t,n)},yes:function(){this.owner.contentLayout.widths=this.widths,this.owner.contentLayout.heights=this.heights,this.owner.$forceUpdate()},checkMaxSpan:function(e,t){e[t]=dsf.isNumber(e[t])?Number(e[t]):null,e[t]&&e[t]>24&&(e[t]=24),e[t]&&e[t]<0&&(e[t]=null)}}}}).call(this,n("2ef0"))},bc23:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100%"}},[n("el-aside",{attrs:{width:"200px"}},[n("el-tree",{attrs:{data:e.valueAttributes,props:e.treeConfig,"highlight-current":!0,"node-key":"code","current-node-key":e.currentNodeKey},on:{"node-click":e.nodeClickHandler}})],1),n("el-main",{staticStyle:{overflow:"auto"}},[n("el-form",{attrs:{model:e.model,"label-width":"130px"}},[n("el-card",{staticStyle:{"margin-bottom":"10px"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" 必填规则 ")]},proxy:!0}])},[n("el-form-item",{attrs:{label:"是否必填"}},[n("el-switch",{model:{value:e.model.required,callback:function(t){e.$set(e.model,"required",t)},expression:"model.required"}})],1),n("el-form-item",{attrs:{label:"错误提示"}},[n("el-input",{model:{value:e.model.errorMsg.required,callback:function(t){e.$set(e.model.errorMsg,"required",t)},expression:"model.errorMsg.required"}})],1)],1),n("el-card",{staticStyle:{"margin-bottom":"10px"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" 类型规则 ")]},proxy:!0}])},[n("el-form-item",{attrs:{label:"是否是数字"}},[n("el-switch",{model:{value:e.model.isNumber,callback:function(t){e.$set(e.model,"isNumber",t)},expression:"model.isNumber"}})],1),n("el-form-item",{attrs:{label:"错误提示"}},[n("el-input",{model:{value:e.model.errorMsg.isNumber,callback:function(t){e.$set(e.model.errorMsg,"isNumber",t)},expression:"model.errorMsg.isNumber"}})],1)],1),n("el-card",{staticStyle:{"margin-bottom":"10px"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" 精度规则 ")]},proxy:!0}])},[e.model.isNumber?[n("el-form-item",{attrs:{label:"最小数"}},[n("el-input",{on:{change:function(t){return e.checkNum("numberMin")}},model:{value:e.model.numberMin,callback:function(t){e.$set(e.model,"numberMin",t)},expression:"model.numberMin"}})],1),n("el-form-item",{attrs:{label:"错误提示"}},[n("el-input",{model:{value:e.model.errorMsg.numberMin,callback:function(t){e.$set(e.model.errorMsg,"numberMin",t)},expression:"model.errorMsg.numberMin"}})],1),n("el-form-item",{attrs:{label:"最大数"}},[n("el-input",{on:{change:function(t){return e.checkNum("numberMax")}},model:{value:e.model.numberMax,callback:function(t){e.$set(e.model,"numberMax",t)},expression:"model.numberMax"}})],1),n("el-form-item",{attrs:{label:"错误提示"}},[n("el-input",{model:{value:e.model.errorMsg.numberMax,callback:function(t){e.$set(e.model.errorMsg,"numberMax",t)},expression:"model.errorMsg.numberMax"}})],1),n("el-form-item",{attrs:{label:"小数点后保留位数"}},[n("el-input",{on:{change:function(t){return e.checkNum("precision",!0)}},model:{value:e.model.precision,callback:function(t){e.$set(e.model,"precision",t)},expression:"model.precision"}})],1),n("el-form-item",{attrs:{label:"错误提示"}},[n("el-input",{model:{value:e.model.errorMsg.precision,callback:function(t){e.$set(e.model.errorMsg,"precision",t)},expression:"model.errorMsg.precision"}})],1)]:[n("el-form-item",{attrs:{label:"字符串最小长度"}},[n("el-input",{attrs:{min:0},on:{change:function(t){return e.checkNum("min",!0)}},model:{value:e.model.min,callback:function(t){e.$set(e.model,"min",t)},expression:"model.min"}})],1),n("el-form-item",{attrs:{label:"错误提示"}},[n("el-input",{model:{value:e.errorMsg.min,callback:function(t){e.$set(e.errorMsg,"min",t)},expression:"errorMsg.min"}})],1),n("el-form-item",{attrs:{label:"字符串最大长度"}},[n("el-input",{attrs:{min:0},on:{change:function(t){return e.checkNum("max",!0)}},model:{value:e.model.max,callback:function(t){e.$set(e.model,"max",t)},expression:"model.max"}})],1),n("el-form-item",{attrs:{label:"错误提示"}},[n("el-input",{model:{value:e.model.errorMsg.max,callback:function(t){e.$set(e.model.errorMsg,"max",t)},expression:"model.errorMsg.max"}})],1)]],2),n("el-card",{staticStyle:{"margin-bottom":"10px"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" 格式规则 ")]},proxy:!0}])},[n("el-form-item",{attrs:{label:"格式"}},[n("el-select",{staticStyle:{width:"100%"},model:{value:e.model.express,callback:function(t){e.$set(e.model,"express",t)},expression:"model.express"}},e._l(e.expressOptions,(function(e,t){return n("el-option",{key:t,attrs:{label:e.text||"无",value:e.value}})})),1)],1),n("el-form-item",{attrs:{label:"错误提示"}},[n("el-input",{model:{value:e.model.errorMsg.express,callback:function(t){e.$set(e.model.errorMsg,"express",t)},expression:"model.errorMsg.express"}})],1)],1)],1)],1)],1)},i=[],o=n("2b1a"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["default"]=l.exports},bd11:function(e,t,n){"use strict";n("1f3a")},bd20:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"lines",staticClass:"lines",style:{height:e.isSub?"calc(100% - "+e.toPx(e.parentNode.imgHeight+2*e.parentNode.padding)+")":"100%",top:e.isSub?e.toPx(e.parentNode.imgHeight+2*e.parentNode.padding):0}})},i=[],o=(n("99af"),n("4de4"),n("4160"),n("c975"),n("13d5"),n("fb6a"),n("a434"),n("b0c0"),n("acd8"),n("ac1f"),n("1276"),n("159b"),n("2909")),s=n("452f"),r=n.n(s),l=n("55c1"),c=function(e,t,n){var a=null,i=null,o={path:[],from:null,to:null,strokeWidth:2,stroke:e.Path.stroke,"stroke-dasharray":n["stroke-dasharray"]};o=Object.assign(o,n),this.id=null,this.path=o.path,this.from=o.from,this.to=o.to,this.linkInfo=o.linkInfo||{},this.render=function(){for(var e=[],n=0;n<this.path.length;n++){var s=this.path[n];0==n?e.push(["M",s.x,s.y]):e.push(["L",s.x,s.y])}if(e.length>1){var r={sp:{x:e[e.length-2][1],y:e[e.length-2][2]},ep:{x:e[e.length-1][1],y:e[e.length-1][2]}};r.sp.y==r.ep.y?r.ep.x=r.ep.x-(r.sp.x<r.ep.x?2:-2):r.ep.y=r.ep.y-(r.sp.y<r.ep.y?2:-2);try{a?(a.attr({path:e,"stroke-width":o.strokeWidth,stroke:o.stroke}),i&&i.attr({path:l["h"].drawArrow(r),"stroke-width":o.strokeWidth,stroke:o.stroke,fill:o.stroke})):(a=t.path(e).attr({"stroke-width":o.strokeWidth,stroke:o.stroke,"stroke-dasharray":o["stroke-dasharray"]}),i=t.path(l["h"].drawArrow(r)).attr({"stroke-width":o.strokeWidth,stroke:o.stroke,fill:o.stroke}),this.isRender=!0)}catch(c){console.log(c)}}},this.remove=function(){a&&a.remove(),i&&i.remove()}},u=c,d=n("80ae"),h=n("b6e4"),f=n("c6f6"),m=n("32b7"),g=n("531e"),_=n("4267"),b={name:"Lines",props:{lines:{type:Array,default:function(){return[]}},nodes:{type:Array,default:function(){return[]}},events:{type:Array,default:function(){return[]}},isDrawLine:{type:Boolean,default:function(){return!1}},checked:{type:Object,default:function(){return{}}},isSub:{type:Boolean,default:function(){return!1}},parentNode:{type:Object,default:function(){return null}},config:{type:Object,default:function(){return{}}}},data:function(){return{paper:null,start:!1,currentMouseDrawingLine:null,startInfo:null,startPoint:null,down_direction:null,currentLineInfo:null,centerOffset:10,dragSize:20,maxWidth:0,maxHeight:0,maxSizeOffset:50,currentDragLine:{},isDrag:!1,type:"drawLine",mp:null}},watch:{checked:function(e){this.lines.forEach((function(t){t===e?e.selected():t.unSelected()}))}},mounted:function(){var e=this;this.paper=new r.a(this.$refs.lines,"100%","100%"),this.$refs.lines.addEventListener("mousedown",(function(t){e.mousedown(t)})),document.addEventListener("mousemove",(function(t){e.mousemove(t)})),document.addEventListener("mouseup",(function(t){e.mouseup(t),e.updateIntersection()})),this.$bus.$on("startDraw".concat(this.isSub?this.parentNode.id:""),this.startDraw),this.$bus.$on("nodeMove".concat(this.isSub?this.parentNode.id:""),this.nodeMove),this.$bus.$on("eventMove".concat(this.isSub?this.parentNode.id:""),this.eventMove),this.$bus.$on("addLine".concat(this.isSub?this.parentNode.id:""),this.addLine),this.$bus.$on("showSubNode".concat(this.isSub?this.parentNode.id:""),this.showSubNode),this.$bus.$on("hideLines",this.hideLines),this.$bus.$on("updateIntersection",this.updateIntersection),this.$bus.$on("updateNodeName".concat(this.isSub?this.parentNode.id:""),this.resetLineName),this.$bus.$on("cutOffLine".concat(this.isSub?this.parentNode.id:""),this.cutOffLine)},methods:{toPx:g["h"],verifySub:g["i"],startDraw:function(e,t){if(!this.verifySub(this.parentNode)){this.isDrawLine&&this.$bus.$emit("isDrewingLine".concat(this.isSub?this.parentNode.id:""),"end"),this.isDrawLine&&this.checked instanceof d["a"]&&t&&(this.start=!0,this.mouseDrawLine(e),this.type="drawLine");var n=t;this.isDrawLine&&n&&this.checked instanceof f["a"]&&(this.start=!0,this.eventDrawLine(e),this.type="drawLine")}},mousedown:function(e){if("path"==e.target.tagName){e.stopPropagation();var t=Object(g["g"])(e.target);if(t){var n=t.getLine();if(this.$bus.$emit("update-checked",n),n){if(n.readOnly)return;this.lineMouseDownHandler(e,n)}}}},mousemove:function(e){if(this.start&&!this.verifySub(this.parentNode))return"drawLine"===this.type?(this.drawLine(e),!1):(this.dragLine(e),!1)},addLine:function(e){var t,n,a=Object.assign({type:0},e),i=new h["a"](this.config,a);if(a.from&&(t="event"===a.fromType?Object(g["d"])(this.events,a.from):Object(g["d"])(this.nodes,a.from)),a.to&&(n=Object(g["d"])(this.nodes,a.to)),0===i.path.length){var o=this.getPathPoints(i,t,n);o&&o.length>0&&(i.path=o)}this.addToPanel(i,t,n)},showSubNode:function(e){var t=[],n=function(n,a){var i=n.linkInfo;e.open.show?(n.unFold=i[a],n.fold?i[a]=n.fold:i[a]=i[a]):(n.fold=i[a],n.unFold?i[a]=n.unFold:i[a]=0),t.push(n.id)};this.lines.forEach((function(a){a.from!==e.id&&a.to!==e.id||(n(a,a.from===e.id?"fromOffset":"toOffset"),t.push(a.id))})),t.length>0&&this.renderLines(t),this.updateIntersection()},hideLines:function(e,t){var n=this;e.forEach((function(e){n.lines.forEach((function(n){e===n.id&&(n.isHide=t,t?n.hide():n.show())}))}))},drawLine:function(e){var t=this.$store.state.flow.page.scale,n=this.parentNode?{x:e.pageX-this.parentNode.point.x*t,y:e.pageY-(this.parentNode.point.y+this.parentNode.imgHeight+2*this.parentNode.padding)*t}:{x:e.pageX,y:e.pageY},a=this.$store.getters["flow/getMousePointByCanvas"](n);a.x=a.x/t,a.y=a.y/t;var i=e.target;if(this.currentLineInfo&&(this.currentLineInfo.endPoint=null,this.currentLineInfo.targetNode=null,this.currentLineInfo.targetDirection=null),"IMG"==i.tagName||"DIV"==i.tagName&&-1!==i.className.indexOf("task-node")){var o=Object(g["f"])(this.nodes,i);if(o){var s=this.getDrawLineEndPointInfo(o,n),r=!1;if(this.currentLineInfo.fromNode==o?this.currentLineInfo.fromDirection!=s.direction&&(r=!0):r=!0,r){this.currentLineInfo.endPoint=s.point,this.currentLineInfo.targetNode=o,this.currentLineInfo.targetDirection=s.direction;var l=Object(_["a"])(this.currentLineInfo);l&&(this.currentMouseDrawingLine.path=l,this.currentMouseDrawingLine.render())}}}else{var c=Object(_["b"])(this.currentLineInfo,a);c&&(this.currentMouseDrawingLine.path=c,this.currentMouseDrawingLine.render())}this.$bus.$emit("autoScroll",{type:"line",data:this.currentMouseDrawingLine,mouse:{x:e.pageX,y:e.pageY}})},dragLine:function(e){var t=this.mp,n=this.$store.getters["flow/getMousePointByCanvas"]({x:e.pageX,y:e.pageY});if(Math.abs(n.x-t.x)<2&&Math.abs(n.y-t.y)<2)return!1;var a=e.target,i=null,o=null,s=this.currentDragLine,r=this.checked;if(s.changeJoinDriection){if("start"==s.dragPosition?(o=Object(g["d"])(this.nodes,r.to),this.$bus.$emit("isDrewingLine".concat(this.isSub?this.parentNode.id:""),"start")):"end"==s.dragPosition&&(i=Object(g["d"])(this.nodes,r.from),this.$bus.$emit("isDrewingLine".concat(this.isSub?this.parentNode.id:""),"end")),"IMG"==a.tagName||"DIV"==a.tagName&&-1!==a.className.indexOf("task-node")){var l=Object(g["f"])(this.nodes,a);l&&("start"==s.dragPosition?(i=l,o=Object(g["d"])(this.nodes,r.to)):"end"==s.dragPosition&&(i="event"===r.fromType?Object(g["d"])(this.events,r.from):Object(g["d"])(this.nodes,r.from),o=l))}else"start"==s.dragPosition?o=Object(g["d"])(this.nodes,r.to):i="event"===r.fromType?Object(g["d"])(this.events,r.from):Object(g["d"])(this.nodes,r.from);this.mouseDragLine(i,o,e)}else i="event"===r.fromType?Object(g["d"])(this.events,r.from):Object(g["d"])(this.nodes,r.from),o=Object(g["d"])(this.nodes,r.to),this.mouseDragLine(i,o,e);this.isDrag=!0,this.$bus.$emit("autoScroll",{type:"line",data:s,mouse:{x:e.pageX,y:e.pageY}}),e.preventDefault()},mouseup:function(e){return e.stopPropagation(),e.preventDefault(),this.start=!1,this.$bus.$emit("isDrewingLine".concat(this.isSub?this.parentNode.id:""),null),"drawLine"===this.type?(this.drawRealLine(),!1):(this.dragRealLine(),!1)},drawRealLine:function(){if(!this.currentLineInfo)return!1;try{var e=this.currentLineInfo.fromNode,t=this.currentLineInfo.targetNode,n={paper:this.paper};e&&e instanceof f["a"]&&(n.fromType="event");var a=new h["a"](this.config,n);this.isSub&&(a.parentNodeId=this.parentNode.id),a.path=this.currentLineInfo.path||this.currentMouseDrawingLine.path,t?(this.updateLineLinkInfo(a,e,t,this.currentLineInfo.fromDirection,this.currentLineInfo.targetDirection),this.currentMouseDrawingLine&&this.currentMouseDrawingLine.remove(),this.addToPanel(a,e,t)):this.currentMouseDrawingLine&&this.currentMouseDrawingLine.remove()}catch(i){console.log(i)}finally{this.currentLineInfo=null}},addToPanel:function(e,t,n){var a=this.maxSizeOffset;e.paper=this.paper,this.lines.push(e);for(var i=!1,o=0;o<e.path.length;o++){var s=e.path[o];parseFloat(s.x)+a>this.maxWidth&&(this.maxWidth=parseFloat(s.x)+a,i=!0),parseFloat(s.y)+a>this.maxWidth&&(this.maxHeight=parseFloat(s.y)+a,i=!0)}i&&this.$bus.$emit("resize"),e.id||(e.id=l["h"].uuid()),this.render(e),e.isHide?e.hide():e.show(),this.updateIntersection(),this.setNodeLinkNodeInfo(t,n,e),e.setAttributes(t,n)},dragRealLine:function(){var e=this.currentDragLine,t=this.checked;try{if(this.isDrag){var n,a,i,o;if(e.changeJoinDriection){if(e.fromNode&&e.toNode){n=e.fromNode?e.fromNode:"event"===t.fromType?Object(g["d"])(this.events,t.from):Object(g["d"])(this.nodes,t.from),a=e.toNode?e.toNode:Object(g["d"])(this.nodes,t.to),i=e.fromDirection?e.fromDirection:t.linkInfo.fromDirection,o=e.toDirection?e.toDirection:t.linkInfo.toDirection;var s=!0;if(n==a&&i==o&&(s=!1),s){var r=e.proxy.path;if(r&&r.length>0&&(t.path=r,this.render(t)),t.id){var l;if(t.from)if(l="event"===t.fromType?Object(g["d"])(this.events,t.from):Object(g["d"])(this.nodes,t.from),l){var c=l["out"].indexOf(t.id);c>=0&&l["out"].splice(c,1)}if(t.to){var u=Object(g["d"])(this.nodes,t.to);if(u){var d=u["in"].indexOf(t.id);d>=0&&u["in"].splice(d,1)}}}}}}else{n="event"===t.fromType?Object(g["d"])(this.events,t.from):Object(g["d"])(this.nodes,t.from),a=Object(g["d"])(this.nodes,t.to),i=e.fromDirection?e.fromDirection:t.linkInfo.fromDirection,o=e.toDirection?e.toDirection:t.linkInfo.toDirection;var h=e.proxy.path;h&&h.length>0&&(t.path=h,this.render(t))}n&&a&&(this.updateLineLinkInfo(t,n,a,i,o),this.setNodeLinkNodeInfo(n,a,t),t.setAttributes(n,a),this.updateIntersection())}}catch(p){console.log(p)}finally{this.isDrag=!1,e.proxy.remove(),e=null,this.$bus.$emit("resize")}},mouseDrawLine:function(e){var t=this.$store.state.flow.page.scale;this.currentMouseDrawingLine=null;var n=this.checked;this.currentMouseDrawingLine=new u(this.config,this.paper,{strokeWidth:2,from:n.id});var a=this.parentNode?{x:e.pageX-this.parentNode.point.x*t,y:e.pageY-(this.parentNode.point.y+this.parentNode.imgHeight+2*this.parentNode.padding)*t}:{x:e.pageX,y:e.pageY};this.startInfo=this.getDrawLineStartPointInfo(n,a),this.startPoint=this.startInfo.point,this.down_direction=this.startInfo.direction,this.currentMouseDrawingLine.path.push(this.startPoint),this.currentLineInfo={startPoint:this.startPoint,fromDirection:this.down_direction,fromNode:n}},eventDrawLine:function(e){this.currentMouseDrawingLine=null;var t=this.checked;this.currentMouseDrawingLine=new u(this.config,this.paper,{strokeWidth:2,from:t.id}),this.startInfo=this.getEventLineStartPointInfo(t,{x:e.pageX,y:e.pageY}),this.startPoint=this.startInfo.point,this.down_direction=this.startInfo.direction,this.currentMouseDrawingLine.path.push(this.startPoint),this.currentLineInfo={startPoint:this.startPoint,fromDirection:this.down_direction,fromNode:t}},getDrawLineStartPointInfo:function(e,t){var n=this.$store.getters["flow/getMousePointByCanvas"]({x:t.x,y:t.y}),a=this.$store.state.flow.page.scale;n.x=n.x/a,n.y=n.y/a;var i=l["h"].getNodeDirection(e,n),o=l["h"].getNodeCenter(e);i==l["b"].Right&&(n.x=o.x+e.width/2,n.y<e.point.y&&(n.y=e.point.y),n.y>e.point.y+e.height&&(n.y=e.point.y+e.height),Math.abs(n.y-o.y)<this.centerOffset?n.y=o.y:n.y=Object(g["c"])(n).y),i==l["b"].Left?(n.x=e.point.x,n.y<e.point.y&&(n.y=e.point.y),n.y>e.point.y+e.height&&(n.y=e.point.y+e.height),Math.abs(n.y-o.y)<this.centerOffset?n.y=o.y:n.y=Object(g["c"])(n).y):i==l["b"].Bottom?(n.y=e.point.y+e.height,n.x<e.point.x&&(n.x=e.point.x),n.x>e.point.x+e.width&&(n.x=e.point.x+e.width),Math.abs(n.x-o.x)<this.centerOffset?n.x=o.x:n.x=Object(g["c"])(n).x):i==l["b"].Top&&(n.y=e.point.y,n.x<e.point.x&&(n.x=e.point.x),n.x>e.point.x+e.width&&(n.x=e.point.x+e.width),Math.abs(n.x-o.x)<this.centerOffset?n.x=o.x:n.x=Object(g["c"])(n).x);var s={x:n.x,y:n.y},r={point:s,direction:i};return r},getDrawLineEndPointInfo:function(e,t){var n=this.$store.getters["flow/getMousePointByCanvas"]({x:t.x,y:t.y}),a=this.$store.state.flow.page.scale;n.x=n.x/a,n.y=n.y/a;var i=l["h"].getNodeCenter(e),o=l["h"].getNodeDirection(e,n);o==l["b"].Left?(n.y<e.point.y&&(n.y=e.point.y),n.y>e.point.y+e.height&&(n.y=e.point.y+e.height),Math.abs(n.y-i.y)<this.centerOffset?n.y=i.y:n.y=Object(g["c"])(n).y,n.x=e.point.x):o==l["b"].Right?(n.y<e.point.y&&(n.y=e.point.y),n.y>e.point.y+e.height&&(n.y=e.point.y+e.height),Math.abs(n.y-i.y)<this.centerOffset?n.y=i.y:n.y=Object(g["c"])(n).y,n.x=e.point.x+e.width):o==l["b"].Top?(n.x<e.point.x&&(n.x=e.point.x),n.x>e.point.x+e.width&&(n.x=e.point.x+e.width),Math.abs(n.x-i.x)<this.centerOffset?n.x=i.x:n.x=Object(g["c"])(n).x,n.y=e.point.y):o==l["b"].Bottom&&(n.x<e.point.x&&(n.x=e.point.x),n.x>e.point.x+e.width&&(n.x=e.point.x+e.width),Math.abs(n.x-i.x)<this.centerOffset?n.x=i.x:n.x=Object(g["c"])(n).x,n.y=e.point.y+e.height);var s={x:n.x,y:n.y},r={point:s,direction:o};return r},getEventLineStartPointInfo:function(e,t){var n=this.$store.getters["flow/getMousePointByCanvas"]({x:t.x,y:t.y}),a=this.$store.state.flow.page.scale;n.x=n.x/a,n.y=n.y/a;var i=e.direction;i==l["b"].Right?(n.x=e.point.x+e.width/2+e.img.width/2,n.y=e.point.y+e.img.width/2):i==l["b"].Left?(n.x=e.point.x+e.width/2-e.img.width/2,n.y=e.point.y+e.img.width/2):i==l["b"].Top?(n.x=e.point.x+e.width/2,n.y=e.point.y):(n.x=e.point.x+e.width/2,n.y=e.point.y+e.img.width);var o={x:n.x,y:n.y},s={point:o,direction:i};return s},updateLineLinkInfo:function(e,t,n,a,i){if("string"==typeof t&&(t=Object(g["d"])(this.nodes,t)),"string"==typeof n&&(n=Object(g["d"])(this.nodes,n)),t&&n){var o=0,s=0,r={x:e.path[0].x,y:e.path[0].y},c={x:e.path[e.path.length-1].x,y:e.path[e.path.length-1].y},u=l["h"].getNodeCenter(t),d=l["h"].getNodeCenter(n);a==l["b"].Top||a==l["b"].Bottom?o=r.x-u.x:a!=l["b"].Left&&a!=l["b"].Right||(o=r.y-u.y),i==l["b"].Top||i==l["b"].Bottom?s=c.x-d.x:i!=l["b"].Left&&i!=l["b"].Right||(s=c.y-d.y),e.linkInfo={fromDirection:a,toDirection:i,fromOffset:o,toOffset:s}}},updateIntersection:function(){for(var e=this.getAllSegments(),t=e.v_segments,n=e.h_segments,a=0;a<n.length;a++){var i=n[a],o=i.getIntersection().length>0;i.clearIntersection();for(var s=0;s<t.length;s++){var r=t[s],c=l["h"].segmentsIntr(i.sp,i.ep,r.sp,r.ep),u=l["i"]+5;if(c){if(Math.abs(c.x-i.sp.x)<=u||Math.abs(c.x-i.ep.x)<=u)continue;if(Math.abs(c.y-r.sp.y)<=u||Math.abs(c.y-r.ep.y)<=u)continue;for(var d=i.getIntersection(),h=!1,p=0;p<d.length;p++)if(d[p].x==c.x&&d[p].y==c.y){h=!0;break}h||i.setIntersection(c)}}if(i.getIntersection().length>0||o){i.render();var f=i.getLine();f.isHide&&i.hide()}}},getAllSegments:function(){for(var e=[],t=[],n=0;n<this.lines.length;n++)for(var a=this.lines[n].getSegmenList(),i=0;i<a.length;i++){var o=a[i],s=this.getLineType(o);s==l["d"].horizontal?t.push(o):e.push(o)}return{v_segments:e,h_segments:t}},getLineType:function(e){return e.sp.y==e.ep.y?l["d"].horizontal:e.sp.x==e.ep.x?l["d"].vertical:void 0},nodeMove:function(e){var t=[].concat(Object(o["a"])(e.in),Object(o["a"])(e.out));this.renderLines(t),this.updateIntersection()},renderLines:function(e){if(e&&(!e||0!=e.length))for(var t=0;t<e.length;t++){var n=e[t],a=Object(g["d"])(this.lines,n),i=void 0;i="event"===a.fromType?Object(g["d"])(this.events,a.from):Object(g["d"])(this.nodes,a.from);var o=Object(g["d"])(this.nodes,a.to),s=this.getPathPoints(a,i,o);s&&s.length>0&&(a.path=s,this.render(a),this.hideOrShowSubNodeLines(a,i,o))}},getPathPoints:function(e,t,n){var a=e.linkInfo,i=("event"===e.fromType?this.getEventPointByLineOffset:this.getPointByLineOffset)(e,t,a.fromDirection),o=this.getPointByLineOffset(e,n,a.toDirection);if(i&&o){var s={fromNode:t,targetNode:n,startPoint:i,endPoint:o,fromDirection:a.fromDirection,targetDirection:a.toDirection};return Object(_["a"])(s)}return[]},hideOrShowSubNodeLines:function(e,t,n){e.isHide=!1,"event"===e.fromType&&(t.hide||n.hide)?(e.hide(),e.isHide=!0):e.show()},eventMove:function(e){if(e.out&&e.out.length>0)for(var t=0;t<e.out.length;t++){var n=e.out[t],a=Object(g["d"])(this.lines,n),i=Object(g["d"])(this.events,a.from),o=Object(g["d"])(this.nodes,a.to),s=a.linkInfo,r=0,l=0;r=this.getEventPointByLineOffset(a,i,s.fromDirection),l=this.getPointByLineOffset(a,o,s.toDirection);if(r&&l){var c={fromNode:i,targetNode:o,startPoint:r,endPoint:l,fromDirection:s.fromDirection,targetDirection:s.toDirection},u=Object(_["a"])(c);u&&u.length>0&&(a.path=u,this.render(a),this.hideOrShowSubNodeLines(a,i,o))}}this.updateIntersection()},getPointByLineOffset:function(e,t,n){var a=null,i=l["h"].getNodeCenter(t),o=e.from===t.id?"from":e.to===t.id?"to":null;if(!o)return null;var s="from"==o?e.linkInfo.fromOffset:e.linkInfo.toOffset;return a=n==l["b"].Top?{x:i.x+s,y:t.point.y}:n==l["b"].Bottom?{x:i.x+s,y:t.point.y+t.height}:n==l["b"].Left?{x:t.point.x,y:i.y+s}:{x:t.point.x+t.width,y:i.y+s},a},getEventPointByLineOffset:function(e,t,n){var a=null;return a=n==l["b"].Top?{x:t.point.x+t.width/2,y:t.point.y}:n==l["b"].Bottom?{x:t.point.x+t.width/2,y:t.point.y+t.img.height}:n==l["b"].Left?{x:t.point.x+t.width/2-t.img.height/2,y:t.point.y+t.img.height/2}:{x:t.point.x+t.width/2+t.img.height/2,y:t.point.y+t.img.height/2},a},getPointByFold:function(e,t,n,a,i){if(!a){var o="from"===i?e.linkInfo.fromOffset:e.linkInfo.toOffset,s=l["h"].getNodeCenter(t);return n==l["b"].Top?p={x:s.x+o,y:t.point.y}:n==l["b"].Bottom?p={x:s.x+o,y:t.point.y+t.height}:n==l["b"].Left?p={x:t.point.x,y:s.y+o}:p={x:t.point.x+t.width,y:s.y+o},p}},lineMouseDownHandler:function(e,t){this.type="dragline";var n=Object(g["g"])(e.target);if(n){if(this.start=!0,this.isDrag=!1,!t)return!1;var a={segmen:n,line:t,proxy:new u(this.config,this.paper,{"stroke-dasharray":["-"]}),changeJoinDriection:!1};this.currentDragLine=a;var i=this.mp=this.$store.getters["flow/getMousePointByCanvas"]({x:e.pageX,y:e.pageY});1==t.getSegmenList().length?n.type==l["d"].horizontal?Math.abs(n.sp.x-i.x)<=this.dragSize?(a.changeJoinDriection=!0,a.dragPosition="start"):Math.abs(n.ep.x-i.x)<=this.dragSize&&(a.changeJoinDriection=!0,a.dragPosition="end"):0==n.index&&Math.abs(n.sp.y-i.y)<=this.dragSize?(a.changeJoinDriection=!0,a.dragPosition="start"):n.isLast&&Math.abs(n.ep.y-i.y)<=this.dragSize&&(a.changeJoinDriection=!0,a.dragPosition="end"):t.getSegmenList().length>1&&(n.type==l["d"].horizontal?0==n.index&&Math.abs(n.sp.x-i.x)<=this.dragSize?(a.changeJoinDriection=!0,a.dragPosition="start"):n.isLast&&Math.abs(n.ep.x-i.x)<this.dragSize&&(a.changeJoinDriection=!0,a.dragPosition="end"):0==n.index&&Math.abs(n.sp.y-i.y)<=this.dragSize?(a.changeJoinDriection=!0,a.dragPosition="start"):n.isLast&&Math.abs(n.ep.y-i.y)<=this.dragSize&&(a.changeJoinDriection=!0,a.dragPosition="end"))}},mouseDragLine:function(e,t,n){var a=this.currentDragLine;if(a)if(a.changeJoinDriection){D=a.segmen;if(D){T=D.getLine(),k=this.$store.getters["flow/getMousePointByCanvas"]({x:n.pageX,y:n.pageY});var i=this.$store.state.flow.page.scale;if(k.x=k.x/i,k.y=k.y/i,"start"==a.dragPosition){var o=e,s=t,r=null,c=null,u="";if(o)r=this.getDrawLineStartPointInfo(o,{x:n.pageX,y:n.pageY}),c=r.point,u=r.direction;else{var d=Object(g["c"])(k);o={width:0,height:0,point:d,abstract:!0},c=d;var h=l["h"].getNodeDirection(s,d);h==l["c"].Left?u=l["c"].Right:h==l["c"].Right?u=l["c"].Left:h==l["c"].Bottom?u=l["c"].Top:h==l["c"].Top&&(u=l["c"].Bottom)}var p=this.getPointByLineOffset(T,s,T.linkInfo.toDirection),m={startPoint:c,fromDirection:u,fromNode:o,targetNode:s,targetDirection:T.linkInfo.toDirection,endPoint:p};E=Object(_["a"])(m);o.abstract?a.fromNode=null:a.fromNode=o,a.toNode=s,a.fromDirection=u,a.proxy.path=E,a.proxy.render()}else if("end"==a.dragPosition){o=e,s=t;var b=null,v=null,y=null;if(s)b=this.getDrawLineStartPointInfo(s,{x:n.pageX,y:n.pageY}),v=b.point,y=b.direction;else{var x=k;s={width:0,height:0,point:x,abstract:!0},v=x;h=l["h"].getNodeDirection(o,x);h==l["c"].Left?y=l["c"].Right:h==l["c"].Right?y=l["c"].Left:h==l["c"].Bottom?y=l["c"].Top:h==l["c"].Top&&(y=l["c"].Bottom)}var w=(o instanceof f["a"]?this.getEventPointByLineOffset:this.getPointByLineOffset)(T,o,T.linkInfo.fromDirection);m={startPoint:w,fromDirection:T.linkInfo.fromDirection,fromNode:o,targetNode:s,targetDirection:y,endPoint:v},E=Object(_["a"])(m);a.fromNode=o,s.abstract?a.toNode=null:a.toNode=s,a.toDirection=y,a.proxy.path=E,a.proxy.render()}}}else{var k=this.$store.getters["flow/getMousePointByCanvas"]({x:n.pageX,y:n.pageY});k=Object(g["c"])(k),this.parentNode&&(k.x=k.x-this.parentNode.point.x,k.y=k.y-this.parentNode.point.y-this.parentNode.imgHeight);var S=this.$store.state.flow.page.scale;k.x=k.x/S,k.y=k.y/S;var D=a.segmen;if(D){var C,N,T=D.getLine();if(D.type==l["d"].vertical)if(0==D.index)C="event"===T.fromType?Object(g["d"])(this.events,T.from):Object(g["d"])(this.nodes,T.from),k.x>=C.point.x&&k.x<=C.point.x+C.width&&(D.ep.x=k.x,D.sp.x=k.x);else if(D.isLast){var L=Object(g["d"])(this.nodes,T.to);k.x>=L.point.x&&k.x<=L.point.x+L.width&&(D.ep.x=k.x,D.sp.x=k.x)}else D.ep.x=k.x,D.sp.x=k.x;else if(0==D.index){if(N="event"===T.fromType?Object(g["d"])(this.events,T.from):Object(g["d"])(this.nodes,T.from),k.y>=N.point.y&&k.y<=N.point.y+N.height){var O=l["h"].getNodeCenter(N);Math.abs(k.y-O.y)<this.centerOffset&&(k.y=O.y),D.ep.y=k.y,D.sp.y=k.y}}else if(D.isLast){L=Object(g["d"])(this.nodes,T.to);if(k.y>=L.point.y&&k.y<=L.point.y+L.height){var I=l["h"].getNodeCenter(L);Math.abs(k.y-I.y)<this.centerOffset&&(k.y=I.y),D.ep.y=k.y,D.sp.y=k.y}}else D.ep.y=k.y,D.sp.y=k.y;var $=T.getSegmenList(),E=this.covertPointBySegmen($);a.proxy.path=E,a.proxy.render()}}},covertPointBySegmen:function(e){for(var t=[],n=0;n<e.length;n++){var a=e[n];t.push(a.sp),n==e.length-1&&t.push(a.ep)}return t},setNodeLinkNodeInfo:function(e,t,n){e["out"]&&e["out"].indexOf(n.id)<0&&e["out"].push(n.id),t["in"]&&t["in"].indexOf(n.id)<0&&t["in"].push(n.id),n.from=e.id,n.to=t.id},render:function(e){e.remove(),e.stroke=e.getLineStroke();for(var t=l["h"].convertSegmentByPoint(e.path),n=0;n<t.length;n++){var a=t[n],i=new m["a"](e,this.paper,n,{strokeWidth:e.strokeWidth,stroke:e.stroke});i.sp=a.sp,i.ep=a.ep,n==t.length-1&&(i.isLast=!0),i.direction=l["h"].getDirection(i.sp,i.ep),e.addElement(i)}for(var o=e.getSegmenList(),s=0;s<o.length;s++)o[s].render()},globalMove:function(e,t,n){if(e)for(var a=0;a<this.lines.length;a++){for(var i=this.lines[a],o=0;o<i.path.length;o++)t&&(i.path[o].x+=e.x),n&&(i.path[o].y+=e.y);(t||n)&&this.render(i)}},resetLineName:function(e){this.lines.forEach((function(t){if(t.from===e.id){var n=t.name.split("→");2===n.length&&(t.name=e.name+"→"+n[1],t.attributes.BaseInfo.Name=t.name)}if(t.to===e.id){var a=t.name.split("→");2===a.length&&(t.name=a[0]+"→"+e.name,t.attributes.BaseInfo.Name=t.name)}}))},cutOffLine:function(e){var t,n,a,i,o,s,r=this,l=[e.point,{x:e.point.x+e.width,y:e.point.y},{x:e.point.x,y:e.point.y+e.height},{x:e.point.x+e.width,y:e.point.y+e.height}];if(this.lines.forEach((function(c,u){c.path.reduce((function(d,h,p){var f=r.getLine(d,h),m=f.A,g=f.B,_=f.C,b=l.filter((function(e){return m*e.x+g*e.y+_>0}));return 2===b.length&&(b=b.filter((function(t,n){var r;return d.y===h.y&&(d.x<t.x&&t.x<h.x?(r=!0,0===n&&(a={x:t.x,y:d.y}),1===n&&(o={x:t.x,y:d.y}),i="left",s="right",e.point.y=d.y-e.height/2):h.x<t.x&&t.x<d.x&&(r=!0,1===n&&(a={x:t.x,y:d.y}),0===n&&(o={x:t.x,y:d.y}),i="right",s="left",e.point.y=d.y-e.height/2)),d.x===h.x&&(d.y<t.y&&t.y<h.y?(r=!0,0===n&&(a={x:d.x,y:t.y}),1===n&&(o={x:d.x,y:t.y}),i="top",s="bottom",e.point.x=d.x-e.width/2):h.y<t.y&&t.y<d.y&&(r=!0,1===n&&(a={x:d.x,y:t.y}),0===n&&(o={x:d.x,y:t.y}),i="bottom",s="top",e.point.x=d.x-e.width/2)),r}))),b.length>1&&b.length<l.length&&(t=c,u,n=p),h}))})),t){var c=t.path.slice(0,n);c.push(a);var u=t.fromType?this.events.filter((function(e){return e.id===t.from})):this.nodes.filter((function(e){return e.id===t.from}));this.currentLineInfo={endPoint:c[c.length-1],fromDirection:t.linkInfo.fromDirection,fromNode:u[0],startPoint:c[0],targetDirection:i,targetNode:e,path:c},this.drawRealLine();var d=t.path.slice(n,t.path.length);d.unshift(o);var h=this.nodes.filter((function(e){return e.id===t.to}));this.currentLineInfo={endPoint:d[c.length-1],fromDirection:s,fromNode:e,startPoint:d[0],targetDirection:t.linkInfo.toDirection,targetNode:h[0],path:d},this.drawRealLine(),this.$bus.$emit("deleteLine",t),this.currentLineInfo=null}},getLine:function(e,t){return{A:t.y-e.y,B:e.x-t.x,C:t.x*e.y-e.x*t.y}}}},v=b,y=(n("c694"),n("2877")),x=Object(y["a"])(v,a,i,!1,null,"b9d48fec",null);t["a"]=x.exports},be07:function(e,t,n){"use strict";(function(e){t["a"]={name:"WidthInput",props:{canvasSet:{type:Object,required:!0},hasBg:{type:Boolean}},data:function(){return{}},watch:{canvasSet:{handler:function(t){var n=this,a=t.width,i=t.height,o=e(".seat-designer-page").offset().left,s=e(".seat-designer-page").offset().top,r=e(window).height(),l=e(window).width();a&&a+o>l?e(".seat-designer-center").css({"overflow-x":"scroll"}):e(".seat-designer-center").css({"overflow-x":"auto"}),i&&i+s>r?e(".seat-designer-center").css("overflow-y","scroll"):e(".seat-designer-center").css("overflow-y","auto"),n.$store.commit("seatDesign/changeCompelPanelSize",t)},deep:!0}}}}).call(this,n("1157"))},c39a:function(e,t,n){"use strict";n("38e9")},c44c:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("MonacoEditor",{ref:"editor",attrs:{language:e.language},on:{mounted:e.editorLoaded}})},i=[],o=n("2d0f"),s={name:"DesCodeEdit",mixins:[o["a"]],data:function(){return{code:"",language:"",language_format:""}},created:function(){this.language_format=this.config.language,this.language=this.language_format||"javascript","jsonString"==this.language_format&&(this.language="json")},mounted:function(){},methods:{yes:function(){var e=this.$refs.editor.getContent(),t=this.language_format;return"html"==t?dsf.escapeFilter(e):"json"==t?JSON.parse(e):this.$refs.editor.getContent()},editorLoaded:function(){var e=this.currentData,t=this.language_format;"html"==t?e=dsf.unescapeHTML(e):"json"==t&&(e=JSON.stringify(e)),this.$refs.editor.setContent(e)}}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},c465:function(e,t,n){"use strict";t["a"]="function handler(data, button, owner, self){\r\n  //data:表示当前按钮栏所在作用域的数据\r\n  //button:表示当前按钮对象\r\n  //owner:表示当前按钮组所在的组件\r\n  //self:表示按钮栏目组件\r\n  //this:当前按钮栏所在页面组件对象\r\n  $$0$$;\r\n}"},c509:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"control-filter-tree"},[n("dsf-tree-select",{attrs:{"tree-data":e.treeData,"node-key":"dsfa_rm_id","node-name":"name",loading:e.treeLoading,"default-checked-key":e.defaultCheckedKey,"search-control":"","default-expand-all":""},on:{"choose-node":function(t){e.radioData=t}}})],1)},i=[],o=(n("d3b7"),n("2d0f")),s=n("b45c"),r={name:"DesUseLayoutTpl",components:{DsfTreeSelect:s["default"]},mixins:[o["a"]],props:{isMobile:{type:Boolean,default:!1}},data:function(){return{treeData:[],treeLoading:!1,radioData:null,defaultCheckedKey:""}},created:function(){this.getDesignCtrl()},methods:{getDesignCtrl:function(){var e=this;this.loading=!0;var t="/rm/list/temp";this.isMobile&&(t="/rm/list/mobileTemp"),this.$http.get(t).done((function(t){t.success?e.treeData=t.data:dsf.layer.message(t.message,!1)})).error((function(e){dsf.layer.message(e.message,!1)})).finally((function(){e.loading=!1}))}}},l=r,c=n("2877"),u=Object(c["a"])(l,a,i,!1,null,null,null);t["default"]=u.exports},c638:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.popShow,expression:"popShow"}],staticClass:"seat-pop-box",style:e.sty},[n("ul",[e.isExistPerson?n("li",{on:{click:e.removePerson}},[e._v("移除占用")]):e._e(),e.isExistPerson?n("li",{on:{click:e.splicePerson}},[e._v("移除占用并补位")]):e._e(),1!==e.couldSeat?n("li",{on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:(t.stopPropagation(),e.seat2work(t))}}},[e._v("启用")]):e._e(),e._l(e.otherList,(function(t,a){return n("li",{key:a,on:{click:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:(n.stopPropagation(),e.clickOther(t))}}},[e._v(e._s(t.statusText))])}))],2),n("el-dialog",{attrs:{visible:e.dialogVisible,title:"信息",width:"300px",modal:!1,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}})],1)},i=[],o=n("ab71"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["a"]=l.exports},c694:function(e,t,n){"use strict";n("36cc")},c6bf:function(e,t,n){},c6f6:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("b0c0");var a=n("d4ec"),i=n("bee2"),o=n("55c1"),s=function(){function e(t,n){Object(a["a"])(this,e),this.name=t.name,this.url=t.url,this.type=t.type,this.id=t.id||o["h"].uuid(),this.offset=t.offset||(n?{x:n.offsetX,y:n.offsetY}:{x:0,y:0}),this.point=t.point||{x:t.x,y:t.y},this.width=t.width||50,this.height=t.height||50,this.img=t.img||{width:32,height:32},t.from&&(this.from=t.from),this.direction=t.direction,this.index=t.index,this.out=t.out||[],this.hide=t.hide||!1,this.attributes=t.attributes||{Name:this.name,ID:this.id,Type:this.type},this.nodeId=t.nodeId}return Object(i["a"])(e,[{key:"setAttributes",value:function(e){this.attributes=e}},{key:"getAttributes",value:function(){return this.attributes}}]),e}()},c75d:function(e,t,n){},c818:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",{ref:"table",attrs:{data:e.data}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{property:"caption",label:"组件标识"}}),n("el-table-column",{attrs:{property:"type",label:"组件类型"}}),n("el-table-column",{attrs:{property:"label",label:"组件名称"}})],1)},i=[],o=n("753e"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["default"]=l.exports},c856:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100%",border:"1px solid #eee"}},[n("el-aside",{staticStyle:{"border-right":"1px solid #eee"},attrs:{width:"40%"}},[n("div",{staticClass:"design-column-edit"},[e.isReload?e._e():n("el-tree",{ref:"tree",attrs:{data:e.treeData,"highlight-current":!0,"expand-on-click-node":!1,"render-after-expand":!0,"default-expand-all":!0,"node-key":"id",props:e.defaultProps},on:{"node-click":e.nodeClick},scopedSlots:e._u([{key:"default",fn:function(t){return n("span",{staticClass:"custom-tree-node"},[n("span",[e._v(" "+e._s(t.node.label)+" "),n("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(t.data.hide?"[隐藏]":""))])]),n("span",[n("dsf-button",{attrs:{title:"添加子项",size:"small","btn-style":"icon-text",icon:"hao"},on:{click:function(n){return n.stopPropagation(),e.append(t.data)}}}),t.data.isRoot?[n("dsf-button",{staticStyle:{color:"#c0c0c0"},attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"}}),n("dsf-button",{staticStyle:{color:"#c0c0c0"},attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"}}),n("dsf-button",{staticStyle:{color:"#c0c0c0"},attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"}})]:[n("dsf-button",{attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"},on:{click:function(n){return n.stopPropagation(),e.remove(t.node)}}}),n("dsf-button",{attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"},on:{click:function(n){return n.stopPropagation(),e.up(t.node)}}}),n("dsf-button",{attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"},on:{click:function(n){return n.stopPropagation(),e.down(t.node)}}})]],2)])}}],null,!1,4172210902)})],1)]),n("el-main",[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"150px"}},[n("el-form-item",{attrs:{label:"列名称"}},[n("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.label,callback:function(t){e.$set(e.form,"label",t)},expression:"form.label"}})],1),n("el-form-item",{attrs:{label:"列标识(二次开发用)"}},[n("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),n("el-form-item",{attrs:{label:"表头对齐方式"}},[n("el-select",{staticClass:"select-full",attrs:{disabled:e.form.readOnly},model:{value:e.form.headerAlign,callback:function(t){e.$set(e.form,"headerAlign",t)},expression:"form.headerAlign"}},[n("el-option",{attrs:{label:"居左",value:"left"}}),n("el-option",{attrs:{label:"居右",value:"right"}}),n("el-option",{attrs:{label:"居中",value:"center"}})],1)],1),n("el-form-item",{attrs:{label:"数据对齐方式"}},[n("el-select",{staticClass:"select-full",attrs:{disabled:e.form.readOnly},model:{value:e.form.align,callback:function(t){e.$set(e.form,"align",t)},expression:"form.align"}},[n("el-option",{attrs:{label:"居左",value:"left"}}),n("el-option",{attrs:{label:"居右",value:"right"}}),n("el-option",{attrs:{label:"居中",value:"center"}})],1)],1),n("el-form-item",{attrs:{label:"前缀(可以使用html)"}},[n("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.prefix,callback:function(t){e.$set(e.form,"prefix",t)},expression:"form.prefix"}})],1),n("el-form-item",{attrs:{label:"后缀(可以使用html)"}},[n("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.suffix,callback:function(t){e.$set(e.form,"suffix",t)},expression:"form.suffix"}})],1),e.isSubTable?n("el-form-item",{attrs:{label:"必填标识"}},[n("el-switch",{attrs:{disabled:e.form.readOnly},model:{value:e.form.required,callback:function(t){e.$set(e.form,"required",t)},expression:"form.required"}})],1):e._e(),n("el-form-item",{attrs:{label:"宽度"}},[n("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.width,callback:function(t){e.$set(e.form,"width",t)},expression:"form.width"}})],1),n("el-form-item",{attrs:{label:"最小宽度"}},[n("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.minWidth,callback:function(t){e.$set(e.form,"minWidth",t)},expression:"form.minWidth"}})],1),n("el-form-item",{attrs:{label:"是否隐藏"}},[n("el-switch",{attrs:{disabled:e.form.readOnly},model:{value:e.form.hide,callback:function(t){e.$set(e.form,"hide",t)},expression:"form.hide"}})],1)],1)],1)],1)},i=[],o=n("0033"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["default"]=l.exports},c8c9:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{staticClass:"ds-enum-editor",attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[n("el-tab-pane",{staticClass:"ds-enum-editor-item3",attrs:{label:"用户管理",name:"static"}},[n("el-input",{attrs:{type:"textarea",rows:2,resize:"none",placeholder:"支持格式：'文本'、'文本|值'两种格式，多个选项用回车符换行"},model:{value:e.dataTwo,callback:function(t){e.dataTwo=t},expression:"dataTwo"}})],1),n("el-tab-pane",{attrs:{name:"dict",label:"数据字典",lazy:!0}},[n("enum-editor-item",{attrs:{type:"dict","tree-loading":e.treeLoading,"tree-data":e.treeData,"default-checked-key":e.defaultCheckedKey,"table-post":e.tablePost,"empty-text":"请选择数据字典"},model:{value:e.dataOne,callback:function(t){e.dataOne=t},expression:"dataOne"}})],1)],1)},i=[],o=n("3578"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["default"]=l.exports},c8f9:function(e,t,n){"use strict";(function(e,a){n("99af"),n("cb29"),n("c740"),n("4160"),n("c975"),n("d81d"),n("45fc"),n("4e82"),n("e25e"),n("ac1f"),n("5319"),n("1276"),n("159b");var i=n("5530"),o=n("5032"),s=n("76af"),r=n("d0f8"),l=n("2f62");t["a"]={name:"RightTools",props:{},data:function(){return{showTool:!1,sexList:[{val:null,txt:"请选择"},{val:1,txt:"男宿舍"},{val:2,txt:"女宿舍"}],defaultStateList:[{img:"",statusText:"正常",statusValue:1,couldSeat:1},{img:"",statusText:"已排",statusValue:2,couldSeat:1},{img:"",statusText:"锁定",statusValue:3,couldSeat:2},{img:"",statusText:"禁用",statusValue:4,couldSeat:2}],info:{stateList:[]},groupVisible:[!1,!1,!1],visiblePointer:null,oldVisibleStatus:!1,dialogVisible:!1}},computed:Object(i["a"])(Object(i["a"])({},Object(l["b"])("seatDesign",{activeId:"activeId"})),{},{memberWidth:function(){return e.isArray(this.info.member)?this.info.member[0].width:void 0},memberHeight:function(){return e.isArray(this.info.member)?this.info.member[0].height:void 0},memberSpaceTop:function(){return e.isArray(this.info.member)?Object(r["e"])(this.info):void 0},memberSpaceLeft:function(){return e.isArray(this.info.member)?Object(r["d"])(this.info):void 0},infoIsSec:function(){return/^sec_/.test(this.info.type)}}),watch:{activeId:function(t){var n=this;if(t)o["a"].emit(s["a"].GET_ACTIVE_SEAT,(function(t){e.isArray(t.stateList)&&0!==t.stateList.length||(t.stateList=e.cloneDeep(n.defaultStateList)),n.info=t})),this.showTool=!0,this.$nextTick((function(){n.$set(n.groupVisible,n.visiblePointer,n.oldVisibleStatus)}));else{this.showTool=!1;var a=new Array(3);this.groupVisible=e.fill(a,!1)}},info:{handler:function(e){this.$store.commit("seatDesign/changeSeatInfo",e)},deep:!1}},methods:{uploadSingle:function(){var e=this,t=Object(r["b"])();a(t).on("change",(function(){if(!t.files||0===t.files.length)return!1;var n=new FormData;n.append("file",t.files[0]);var i=function(n){if(a(t).val(""),a(t).remove(),t=null,"error"===n)return!1;e.info.bgImg=n[0].relativePath};r["j"].call(e,n,i)})),a(t).click()},uploadMultiple:function(e){var t=this,n=Object(r["b"])();n.multiple=!0,a(n).on("change",(function(){if(!n.files||0===n.files.length)return!1;for(var i=new FormData,o=0;o<n.files.length;o++){var s=n.files[o];i.append("file_"+o,s)}r["j"].call(t,i,(function(i){if(a(n).val(""),a(n).remove(),n=null,"error"===i)return!1;1===i.length?e.img=i[0].relativePath:t.info.stateList.forEach((function(e,t){i[t]&&(e.img=i[t].relativePath)})),"group"===t.info.type&&(t.info.isFrozenMemberSty=!1,t.info.member.forEach((function(e){e.stateList=t.info.stateList})))}))})),a(n).click()},closeGroup:function(e){this.visiblePointer=e,this.$set(this.groupVisible,e,!1),this.oldVisibleStatus=!1},showGroup:function(t){this.visiblePointer=t;var n=new Array(3);this.groupVisible=e.fill(n,!1),this.$set(this.groupVisible,t,!0),this.oldVisibleStatus=!0},saveStatus:function(){var t=this;if(this.info.statusKv){var n,a,i=this.info.statusKv.split("\n"),o=e.cloneDeep(this.defaultStateList),s=[],r=[],l=!0,c="";if(i.some((function(e){if(n=e.split("|").map((function(e){return e.replace(/(^\s*)|(\s*$)/g,"")})),1!==+n[2]&&2!==+n[2])return l=!1,c="statusText|statusValue|couldSeat  当中的couldSeat只能为1或2",!0;var t=o.findIndex((function(e){return e.statusValue===+n[1]}));if(-1!==t)return l=!1,c="你的 statusValue 与系统默认的冲突了",!0;var i=r.indexOf(n[1]);if(-1!==i)return l=!1,c="你设置了重复的 statusValue",!0;r.push(n[1]),a={img:"",statusText:n[0],statusValue:+n[1],couldSeat:+n[2]},s.push(a)})),l){var u=e.differenceBy(s,o,"statusValue");this.info.stateList=e.concat(o,u).sort((function(e,t){return e.statusValue-t.statusValue})),"group"===this.info.type&&(this.info.isFrozenMemberSty=!1,this.info.member.forEach((function(e){e.stateList=t.info.stateList}))),this.dialogVisible=!1}else this.saveStatusError(c)}else this.dialogVisible=!1},saveStatusError:function(e){this.info.statusKv="",dsf.layer.alert(e)},getImagePath:function(e){return e?dsf.url.getWebPath(e):null},getInfoTypeName:function(){switch(this.info.type){case"seat":return"座位";case"bed":return"床位";case"group":if("seat"===this.info.memberType)return"座位组";if("bed"===this.info.memberType)return"床位组";break;case"sec_rect":return"矩形"}},updateWidth:function(e){this.info.width=e,this.info.isFrozenSty=!1,"group"===this.info.type&&(this.info.isFrozenMemberSty=!1,Object(r["i"])(this.info))},updateHeight:function(e){this.info.height=e,this.info.isFrozenSty=!1,"group"===this.info.type&&(this.info.isFrozenMemberSty=!1,Object(r["i"])(this.info))},upGroupMemberPos:function(t,n){var a=e.cloneDeep(this.info);a.member.forEach((function(e){"width"===t?e.width=n:e.height=n})),Object(r["i"])(a),this.info=a,this.info.isFrozenMemberSty=!1},upGroupSize:function(t,n){var a=e.cloneDeep(this.info),i=a.member[0];"row"===t?(a.height=(a.rows-1)*n+a.rows*i.height,Object(r["i"])(a)):"col"===t&&(a.width=(a.cols-1)*n+a.cols*i.width,Object(r["i"])(a)),this.info=a,this.info.isFrozenMemberSty=!1},setNumber:function(e,t){var n=e.target.value,a=n.replace(/[^0-9]/gi,"");a&&a.length>0?(e.target.value=parseInt(a),t.seatNum=parseInt(a)):(e.target.value="",t.seatNum="")}}}}).call(this,n("2ef0"),n("1157"))},c9ef:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("SelectTree",{attrs:{"tree-data":e.nodes,select:e.selectFlow,"show-search":!0,multi:!0},on:{"update:select":function(t){e.selectFlow=t}}})],1)},i=[],o={name:"ApplyTo",props:{data:{type:Array,default:function(){return[]}}},data:function(){return{nodes:[],selectFlow:[]}},created:function(){var e=dsf.mix(!0,this.data);this.nodes=[this.formatData(e[0])]},mounted:function(){},methods:{yes:function(){return this.selectFlow},formatData:function(e){if(delete e.disabled,e.children)for(var t=0;t<e.children.length;t++)this.formatData(e.children[t]);return e}}},s=o,r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["default"]=l.exports},ca3a:function(e,t,n){"use strict";(function(e,a){n("7db0"),n("c740"),n("4160"),n("d81d"),n("a434"),n("159b");var i=n("b85c"),o=n("2d0f");function s(){var e,t=this,n=[],a=Object(i["a"])(t.tools);try{for(a.s();!(e=a.n()).done;){var o=e.value;o.checked&&n.push(o.val)}}catch(err){a.e(err)}finally{a.f()}t.checkedTools=n}function r(){var e=this,t=!e.tools.find((function(e){return!e.checked}));if(t)return e.checkAll=!0,void(e.isIndeterminate=!1);var n=e.tools.findIndex((function(e){return e.checked}));if(-1!==n)return e.checkAll=!1,void(e.isIndeterminate=!0);e.checkAll=!1,e.isIndeterminate=!1}function l(){var e=this;e.dialogUe&&e.dialogUe.destroy(),e.dialogUe=UE.getEditor("u_template",{autoHeightEnabled:!1,toolbars:[e.checkedTools]}),e.dialogUe.ready((function(){c.call(e)}))}function c(){var e=this;a("#u_template").css("width","100%"),e.dialogUe.setHeight(390)}t["a"]={name:"DesUeditorToolbar",mixins:[o["a"]],data:function(){return{checkAll:!1,tools:[{val:"fullscreen",text:"全屏"},{val:"source",text:"源代码"},{val:"undo",text:"撤销"},{val:"redo",text:"重做"},{val:"bold",text:"加粗"},{val:"italic",text:"斜体"},{val:"underline",text:"下划线"},{val:"fontborder",text:"字符边框"},{val:"strikethrough",text:"删除线"},{val:"superscript",text:"上标"},{val:"subscript",text:"下标"},{val:"removeformat",text:"清除格式"},{val:"formatmatch",text:"格式刷"},{val:"autotypeset",text:"自动排版"},{val:"blockquote",text:"引用"},{val:"pasteplain",text:"纯文本粘贴模式"},{val:"forecolor",text:"字体颜色"},{val:"backcolor",text:"背景色"},{val:"insertorderedlist",text:"有序列表"},{val:"insertunorderedlist",text:"无序列表"},{val:"selectall",text:"全选"},{val:"cleardoc",text:"清空文档"},{val:"rowspacingtop",text:"段前距"},{val:"rowspacingbottom",text:"段后距"},{val:"lineheight",text:"行间距"},{val:"customstyle",text:"自定义标题"},{val:"paragraph",text:"段落"},{val:"fontfamily",text:"字体"},{val:"fontsize",text:"字号"},{val:"directionalityltr",text:"从左向右输入"},{val:"directionalityrtl",text:"从右向左输入"},{val:"indent",text:"首行缩进"},{val:"justifyleft",text:"居左对齐"},{val:"justifycenter",text:"居中对齐"},{val:"justifyright",text:"居右对齐"},{val:"justifyjustify",text:"两端对齐"},{val:"touppercase",text:"字母大写"},{val:"tolowercase",text:"字母小写"},{val:"link",text:"超链接"},{val:"unlink",text:"取消链接"},{val:"anchor",text:"锚点"},{val:"imagenone",text:"图片位置默认"},{val:"imageleft",text:"图片左浮动"},{val:"imageright",text:"图片右浮动"},{val:"imagecenter",text:"图片居中"},{val:"simpleupload",text:"单图上传"},{val:"insertimage",text:"多图上传"},{val:"emotion",text:"表情"},{val:"scrawl",text:"涂鸦"},{val:"insertvideo",text:"插入视频"},{val:"music",text:"音乐"},{val:"attachment",text:"附件"},{val:"map",text:"百度地图"},{val:"gmap",text:"Google地图"},{val:"insertframe",text:"插入Iframe"},{val:"insertcode",text:"插入代码"},{val:"webapp",text:"百度应用"},{val:"pagebreak",text:"分页"},{val:"template",text:"模板"},{val:"background",text:"背景"},{val:"horizontal",text:"分隔线"},{val:"date",text:"日期"},{val:"time",text:"时间"},{val:"spechars",text:"特殊字符"},{val:"snapscreen",text:"截图"},{val:"wordimage",text:"图片转存"},{val:"inserttable",text:"插入表格"},{val:"deletetable",text:"删除表格"},{val:"insertparagraphbeforetable",text:"表格前插入行"},{val:"insertrow",text:"表格插入行"},{val:"deleterow",text:"表格删除行"},{val:"insertcol",text:"表格插入列"},{val:"deletecol",text:"表格删除列"},{val:"mergecells",text:"表格合并多个单元格"},{val:"mergeright",text:"表格右合并单元格"},{val:"mergedown",text:"表格下合并单元格"},{val:"splittocells",text:"表格完全拆分单元格"},{val:"splittorows",text:"表格拆分成行"},{val:"splittocols",text:"表格拆分成列"},{val:"charts",text:"图表"},{val:"print",text:"打印"},{val:"preview",text:"预览"},{val:"searchreplace",text:"查询替换"},{val:"drafts",text:"从草稿箱加载"},{val:"help",text:"帮助"}],checkedTools:this.owner.toolBar,isIndeterminate:!1,dialogUe:null}},watch:{checkedTools:function(){l.call(this)}},created:function(){var e,t=this,n=t.tools.map((function(e){return e.checked=!1,e})),a=Object(i["a"])(t.checkedTools);try{var o=function(){var t=e.value,a=n.findIndex((function(e){return e.val===t}));n[a].checked=!0};for(a.s();!(e=a.n()).done;)o()}catch(err){a.e(err)}finally{a.f()}t.tools=n,r.call(t)},mounted:function(){l.call(this)},methods:{chooseItem:function(t,n){var a=this,i=e.assign({},t,{checked:!t.checked});a.tools.splice(n,1,i),s.call(a),r.call(a)},chooseAll:function(){var e=this;e.isIndeterminate=!1,e.checkAll?e.tools.forEach((function(e){e.checked=!0})):e.tools.forEach((function(e){e.checked=!1})),s.call(e)},yes:function(){return this.dialogUe.destroy(),this.checkedTools}}}}).call(this,n("2ef0"),n("1157"))},cb11f:function(e,t,n){"use strict";n("7f19")},cb5a:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{staticClass:"ds-meta-data-select",attrs:{type:"border-card"},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[n("el-tab-pane",{attrs:{name:"0",label:"普通组件"}},[e.loaded[0]?n("meta-data-select-item",{ref:"select0",attrs:{url:"rm/list/control"}}):e._e()],1),n("el-tab-pane",{attrs:{name:"1",label:"业务组件"}},[e.loaded[1]?n("meta-data-select-item",{ref:"select1",attrs:{url:"rm/list/bc"}}):e._e()],1)],1)},i=[],o=(n("e25e"),n("2d0f")),s=n("08a4"),r={name:"DesCustomComponent",components:{MetaDataSelectItem:s["default"]},mixins:[o["a"]],data:function(){return{tabIndex:"0",loaded:[!0,!1]}},watch:{tabIndex:function(e){this.$set(this.loaded,parseInt(e),!0)}},methods:{yes:function(){return this.$refs["select"+this.tabIndex].yes()}}},l=r,c=n("2877"),u=Object(c["a"])(l,a,i,!1,null,null,null);t["default"]=u.exports},cb7c:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:!0}},[n("el-table-column",{attrs:{prop:"text",label:"名称",width:"150"}}),n("el-table-column",{attrs:{prop:"value",label:"宽度"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"auto"},model:{value:t.row.width,callback:function(n){e.$set(t.row,"width",n)},expression:"scope.row.width"}})]}}])})],1)},i=[],o=n("7728"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["default"]=l.exports},cdd7:function(e,t,n){"use strict";(function(e){n("c740"),n("d3b7"),n("4795");var a=n("5530");t["a"]={name:"MobileSetting",data:function(){return{loading:!1,iframeLoading:!1,appId:"",currentType:"info",treeData:[{label:"app配置",type:"root",children:[]}],title:"",navs:null,info:null,preloads:null,src:"",demo:{showBack:!1,title:"",route:null}}},watch:{"demo.route":{handler:function(e){var t,n;e&&(this.demo.showBack=(null===e||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.level)>1,this.demo.title=(null===e||void 0===e||null===(n=e.meta)||void 0===n?void 0:n.title)||"无标题")},immediate:!0}},beforeCreate:function(){window.$mobileSetting=this},created:function(){var e=this;this.appId=this.$route.query.id,this.loadData().then((function(t){!t&&(t=e.getDefaultConfig()),e.navs=t.navs||[],e.info=t.info,e.preloads=t.preloads||[];var n=[{label:"基本配置",type:"info",data:e.info},{label:"导航配置",type:"navs",data:e.navs},{label:"预加载",type:"preloads",data:e.preloads}];window.sessionStorage.setItem("appId",e.info.code),e.treeData[0].children=n,e.selectedNode(e.treeData[0].children[0]),e.loadIframe()}))},mounted:function(){},beforeDestroy:function(){delete window.$mobileSetting,window.sessionStorage.removeItem("appId")},methods:{loadData:function(){var e=this.$route.query.id,t={pageName:"mobileappedit",namespace:"dsfa.mobile",data:JSON.stringify({_id:e})};return this.$webAPI.getFormData(t).then((function(e){var t=e.data,n={id:t.data["dsfa_rm.dsfa_rm_id"],code:t.data["dsfa_rm.ID"],name:t.data["dsfa_rm.name"]},a=t.data["dsfa_rm.content"]?JSON.parse(t.data["dsfa_rm.content"]):{navs:[],preloads:[]};return a.info=n,a}))},selectedNode:function(e){"root"!=e.type&&(this.title=e.label,this.currentType=e.type)},getDefaultConfig:function(){var e={info:{id:"",name:"",code:""},navs:[],preloads:[]};return e},loadIframe:function(){var e=this.treeData[0].children[1].data||[],t=e[0]?e[0].href:"";t=dsf.url.anchorToRoutePath(t),this.src=t?"mobile-index.html?#"+t:""},save:function(){var t=this;e.each(this.navs||[],(function(e){e.href=dsf.url.anchorToRoutePath(e.href),e.href=t.$replace(e.href)})),e.each(this.preloads||[],(function(e){e.href=dsf.url.anchorToRoutePath(e.href),e.href=t.$replace(e.href)}));var n={"dsfa_rm.content":JSON.stringify({navs:this.navs,preloads:this.preloads})},i={namespace:"dsfa.mobile",pageName:"mobileappedit",data:JSON.stringify(Object(a["a"])({_id:this.$route.query.id},n))};this.loading=!0,this.$webAPI.formSave(i).then((function(e){var t=e.data;"20000"==t.state?dsf.layer.message("保存成功"):dsf.layer.message(t.message,!1)})).catch((function(e){dsf.layer.message("保存失败",!1)})).finally((function(){t.loading=!1,t.refresh()}))},refresh:function(){var e=this;this.iframeLoading=!0,this.src="",this.$nextTick((function(){window.setTimeout((function(){e.loadIframe(),e.iframeLoading=!1}),500)}))},getDefaultInfo:function(){return{name:""}},getDefaultNavButton:function(){return{text:"",href:"",iconType:"icon",icon:"",activeIcon:"",imagePath:"",activeImagePath:""}},getDefaultPreLoad:function(){return{href:""}},addPreLoad:function(){if(this.preloads){var e=this.getDefaultPreLoad();this.preloads.push(e)}},addNav:function(){if(this.navs){var e=this.getDefaultNavButton();this.navs.push(e)}},goBack:function(){var e=this.$refs.appDemoFrame.contentWindow;e&&e.history.back()},routeChange:function(e){this.demo.route=e},remove:function(e,t){dsf.array.remove(e,t)},up:function(t,n){var a=e.findIndex(t,n);if(a>0){var i=t[a-1];this.$set(t,a-1,n),this.$set(t,a,i)}},down:function(t,n){var a=e.findIndex(t,n);if(a<t.length-1){var i=t[a+1];this.$set(t,a+1,n),this.$set(t,a,i)}}}}}).call(this,n("2ef0"))},cebe:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{staticClass:"ds-enum-editor",attrs:{type:"border-card"},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[n("el-tab-pane",{attrs:{name:"1",label:"数据源"}},[n("enum-editor-item",{attrs:{type:"db","tree-loading":e.loading[1],"tree-data":e.treeData1,"default-checked-key":e.defaultCheckedKey1,"table-post":e.tablePost1,"empty-text":"请选择数据源"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})],1)],1)},i=[],o=(n("d81d"),n("b0c0"),n("e25e"),n("2d0f")),s=n("090e"),r={name:"DesCascaderItemsEditor",components:{EnumEditorItem:s["default"]},mixins:[o["a"]],data:function(){var e=this;return{tabIndex:"0",loaded:[!1],loading:[!1],value1:{type:"db",code:null,attach:[]},treeData1:[],defaultCheckedKey1:"",tablePost1:function(t,n){e.$http.get("meta/tree/dbSource",{rmId:t}).done((function(e){e.success?n&&n(e.data):dsf.layer.message("请求异常！",!1)}))}}},watch:{tabIndex:function(e){console.log(e),!this.loaded[e-1]&&this["postData"+e]&&this["postData"+e](),this.$set(this.loaded,parseInt(e)-1,!0)}},created:function(){this.currentData&&this.init(this.currentData)},methods:{init:function(e){var t=e.type,n=(e.attach,e.code);this.value1={type:t,attach:[],code:n},this.defaultCheckedKey1=n,this.tabIndex="1"},yes:function(){if("1"===this.tabIndex){var e=this["value"+this.tabIndex];return delete e.attach,e}},postData1:function(){var e=this;this.$set(this.loading,1,!0),this.$http.get("/rm/list/ds",{namespace:""}).done((function(t){t.success?e.treeData1=t.data.map((function(t){return e.dataFormat1(t)})):dsf.layer.message("请求异常！",!1)})).always((function(){e.$set(e.loading,1,!1)}))},dataFormat1:function(e){var t=this,n=e.name,a=e.ID,i=e.type_value,o=e.children,s={label:n,ID:a,nocheck:"3"!==i&&"8"!==i,iconSkin:""};return o?s.children=o.map((function(e){return t.dataFormat1(e)})):s.nocheck&&(s.iconSkin="_special"),s}}},l=r,c=n("2877"),u=Object(c["a"])(l,a,i,!1,null,null,null);t["default"]=u.exports},cf2e:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"designer_tools"},[e._l(e.layout.buttons,(function(e,t){return n("DsfButton",{key:t,attrs:{icon:e.icon,text:e.text,"btn-style":"icon-text"},on:{click:function(t){return e.handler(t,e)}}})})),n("width-input",{attrs:{"canvas-set":e.canvasSet,"has-bg":e.hasBg}})],2)},i=[],o=n("4924"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["a"]=l.exports},d0f8:function(e,t,n){"use strict";(function(e,a){n.d(t,"j",(function(){return s})),n.d(t,"i",(function(){return r})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return p})),n.d(t,"g",(function(){return f})),n.d(t,"f",(function(){return m}));n("4160"),n("caad"),n("c975"),n("a15b"),n("b0c0"),n("2532"),n("159b");var i=n("76af"),o=n("5032");function s(e,t){var n=this,a={headers:{"Content-Type":"multipart/form-data"},transformRequest:[function(e,t){return e}]},o=dsf.layer.loading();n.$http.post(i["b"],e,a).done((function(e){if(!dsf.isDef(e.data)||!e.success)return dsf.layer.message(e.message,!1),t&&t("error"),!1;t&&t(e.data)})).error((function(e){dsf.layer.message("上传图片失败",!1),t&&t("error")})).always((function(){dsf.layer.closeLoading(o)}))}function r(t){var n=t.member[0],a=t.height-n.height*t.rows,i=t.width-n.width*t.cols,o=t.rows>1?a/(t.rows-1):0,s=t.cols>1?i/(t.cols-1):0;t.member.forEach((function(t){t.rowIndex>0&&(t.top=e.floor((t.height+o)*t.rowIndex,2)),t.colIndex>0&&(t.left=e.floor((t.width+s)*t.colIndex,2))}))}function l(t){var n=t.member[0],a=t.width-n.width*t.cols;return 1===t.cols?0:e.floor(a/(t.cols-1),2)}function c(t){var n=t.member[0],a=t.height-n.height*t.rows;return 1===t.rows?0:e.floor(a/(t.rows-1),2)}function u(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.items.forEach((function(t){t.isFrozenSty=!0,e.selectedItems.forEach((function(e){t.id===e.id&&(t.isFrozenSty=!1)}))})),this.groups.forEach((function(n){n.isFrozenSty=!0,n.isFrozenMemberSty=!0,e.selectedItems.forEach((function(e){n.id===e.id&&(n.isFrozenSty=!1,!t&&(n.isFrozenMemberSty=!1))}))}))}function d(){this.items.forEach((function(e){e.isFrozenSty=!1})),this.groups.forEach((function(e){e.isFrozenSty=!1,e.isFrozenMemberSty=!1}))}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dsf-seat-upload";a("input[name='".concat(e,"']")).remove();var t=document.createElement("input");return t.type="file",t.accept="image/*",t.style.display="none",t.name=e,document.body.appendChild(t),t}function p(){var t=this;if(!e.isEmpty(t.postData.backgroundImage)){var n=t.postData.backgroundImage.width,i=t.postData.backgroundImage.height,o=t.postData.canvasSet.width||a(".seat-designer-page").width(),s=o/n;t.postData.canvasSet.width=o,t.postData.canvasSet.height=i*s,a("#panel_bg").css("background-image","url("+t.postData.backgroundImage.absolutePath+")")}}function f(t,n){var s,r=function(e){switch(e){case 17:e="ctrl";break;case 68:e="d";break;case 65:e="a";break;case 46:e="delete";break;case 16:e="shift";break;case 83:e="s";break;default:e=null}return e};a("body").on("keydown",(function(e){if(s=r(e.keyCode),s){var a=t.indexOf(s);-1===a&&t.push(s);var l=t.join("-");n.includes(l)&&(e.stopPropagation(),e.preventDefault()),"ctrl-d"===l&&o["a"].emit(i["a"].KEY_CTRL_D),"delete"===l&&o["a"].emit(i["a"].KEY_DELETE)}})),a("body").on("keyup",(function(n){n.stopPropagation(),n.preventDefault(),s=r(n.keyCode),e.pull(t,s)}))}function m(e,t){return{id:e.id,pid:e.parentId,belong:e.belong,currentState:e.stateList[1],person:t,seatNum:e.seatNum}}}).call(this,n("2ef0"),n("1157"))},d172:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-drawer",{attrs:{title:"页面文档",visible:e.show,"append-to-body":!0,"modal-append-to-body":!0,"destroy-on-close":!1,wrapperClosable:!1,size:"50%","custom-class":"pagedoc-drawer",direction:"rtl"},on:{"update:visible":function(t){e.show=t},close:e.handleClose}},[n("editor-menu-bubble",{attrs:{editor:e.editor,"keep-in-bounds":!0},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.commands,i=t.isActive;return[n("div",{staticClass:"menububble"},[n("div",{class:{"menububble-item":!0,"is-active":i.bold()},on:{click:a.bold}},[n("i",{staticClass:"iconfont icon-bold"})]),n("div",{class:{"menububble-item":!0,"is-active":i.italic()},on:{click:a.italic}},[n("i",{staticClass:"iconfont icon-jurassic_font-tilt"})]),n("div",{class:{"menububble-item":!0,"is-active":i.heading({level:1})},on:{click:function(e){return a.heading({level:1})}}},[n("i",{staticClass:"iconfont icon-h-1"})]),n("div",{class:{"menububble-item":!0,"is-active":i.heading({level:2})},on:{click:function(e){return a.heading({level:2})}}},[n("i",{staticClass:"iconfont icon-h-2"})]),n("div",{class:{"menububble-item":!0,"is-active":i.heading({level:3})},on:{click:function(e){return a.heading({level:3})}}},[n("i",{staticClass:"iconfont icon-h-3"})]),n("div",{class:{"menububble-item":!0,"is-active":i.bullet_list()},on:{click:a.bullet_list}},[n("i",{staticClass:"iconfont icon-richtextbulletedlist"})]),n("div",{class:{"menububble-item":!0,"is-active":i.ordered_list()},on:{click:a.ordered_list}},[n("i",{staticClass:"iconfont icon-youxuliebiao"})]),n("div",{class:{"menububble-item":!0},on:{click:function(e){return a.align({align:"left"})}}},[n("i",{staticClass:"iconfont icon-zuoduiqi"})]),n("div",{class:{"menububble-item":!0},on:{click:function(e){return a.align({align:"center"})}}},[n("i",{staticClass:"iconfont icon-juzhongduiqi"})]),n("div",{class:{"menububble-item":!0},on:{click:function(e){return a.align({align:"right"})}}},[n("i",{staticClass:"iconfont icon-youduiqi"})]),n("div",{class:{"color-item":!0,"menububble-item":!0},style:{borderBottomColor:e.fontColor}},[n("i",{staticClass:"iconfont icon-T-yanse"}),n("el-color-picker",{on:{change:function(t){return a.colormark({color:e.fontColor})}},model:{value:e.fontColor,callback:function(t){e.fontColor=t},expression:"fontColor"}})],1),n("div",{class:{"color-item":!0,"menububble-item":!0},style:{borderBottomColor:e.bgColor}},[n("i",{staticClass:"iconfont icon-ziyuan1"}),n("el-color-picker",{on:{change:function(t){return a.backgroundmark({color:e.bgColor})}},model:{value:e.bgColor,callback:function(t){e.bgColor=t},expression:"bgColor"}})],1),n("div",{class:{"menububble-item":!0},on:{click:a.horizontal_rule}},[n("i",{staticClass:"iconfont icon-758bianjiqi_fengexian"})]),n("div",{class:{"menububble-item":!0},on:{click:a.undo}},[n("i",{staticClass:"iconfont icon-shangyibu1"})]),n("div",{class:{"menububble-item":!0},on:{click:a.redo}},[n("i",{staticClass:"iconfont icon-xiayibu1"})]),n("div",{class:{"menububble-item":!0},on:{click:function(t){e.showSearch=!e.showSearch}}},[n("i",{staticClass:"iconfont icon-sousuo"})])])]}}])}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],staticClass:"search-container"},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入关键字"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1),n("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入替换字符"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.replace(t)}},model:{value:e.replaceText,callback:function(t){e.replaceText=t},expression:"replaceText"}},[n("el-select",{staticStyle:{width:"110px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.replaceType,callback:function(t){e.replaceType=t},expression:"replaceType"}},[n("el-option",{attrs:{label:"单个替换",value:"1"}}),n("el-option",{attrs:{label:"替换所有",value:"2"}})],1),n("el-button",{attrs:{slot:"append",disabled:!e.searchText,icon:"el-icon-s-fold"},on:{click:e.replace},slot:"append"})],1)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showRelationControls,expression:"showRelationControls"}],ref:"menu",staticClass:"autoselect-menu",style:e.pos},e._l(e.relationPageControls,(function(t){return n("div",{key:t.designId,staticClass:"autoselect-menu-item",attrs:{tabindex:"1"},on:{click:function(n){return e.selectRelatComponent(t)},keydown:function(t){return t.stopPropagation(),e.handleMenuKeydown(t)}}},[e._v(e._s(t.caption))])})),0),n("editor-content",{staticClass:"pageeditor",attrs:{editor:e.editor}})],1)},i=[],o=n("ea6f"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["a"]=l.exports},d19a:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("SelectTree",{attrs:{"tree-data":e.flowData,select:e.selectFlow,checked:e.checked,"show-search":!0},on:{"update:select":function(t){e.selectFlow=t}}})],1)},i=[],o=(n("4160"),n("b0c0"),n("159b"),{name:"SetOpinionNode",props:{value:{type:String,default:function(){return""}},subNodes:{type:Array,default:function(){return[]}}},data:function(){return{flowData:[],selectFlow:null,checked:[]}},created:function(){this.initNodes()},mounted:function(){},methods:{yes:function(){return this.selectFlow},validate:function(){return!!this.selectFlow||(dsf.layer.message("请选择流程",!1),!1)},initNodes:function(){this.checked=[this.value],this.flowData=this.formatData(JSON.parse(JSON.stringify(this.subNodes)))},formatData:function(e,t){var n=this;return e.forEach((function(e){e.label=e.name,n.value===e.id&&(n.selectFlow=e)})),e}}}),s=o,r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,"c828074e",null);t["default"]=l.exports},d463:function(e,t,n){"use strict";(function(e){n("4de4"),n("c740"),n("d3b7"),n("ddb0");var a=n("2d0f");t["a"]={name:"DesSuperSearchEnumItems",mixins:[a["a"]],props:{item:{type:Object,default:function(){return{}}},currentData:{type:Object,default:function(){return null}},searchItems:{type:Array,default:function(){return[]}}},data:function(){return{formData:{rel:"",operator:"eq"},activeName:"static",values:{static:[],dict:{key:null,node:null},dbsource:{key:null,node:null},interface:""}}},computed:{sitems:function(){var t=this;return e.filter(this.searchItems,(function(e){return e.id!==t.item.id}))}},created:function(){var e=dsf.mix(!0,{},this.currentData);dsf.isEmptyObject(e)||(this.formData.rel=e.rel,this.formData.operator=e.operator,this.values[e.type]=e.value,this.activeName=e.type||"static"),"treeselect"==this.item.model&&(this.activeName="interface")},mounted:function(){},methods:{yes:function(){return{operator:this.formData.operator,rel:this.formData.rel,type:this.activeName,value:this.values[this.activeName]}},addRow:function(){this.values.static.push({})},remove:function(e){dsf.array.remove(this.values.static,e)},up:function(t){var n=e.findIndex(this.values.static,(function(e){return e==t}));if(n>0){var a=this.values.static[n-1];this.$set(this.values.static,n-1,t),this.$set(this.values.static,n,a)}},down:function(t){var n=e.findIndex(this.values.static,(function(e){return e==t}));if(n<this.values.static.length-1){var a=this.values.static[n+1];this.$set(this.values.static,n+1,t),this.$set(this.values.static,n,a)}}}}}).call(this,n("2ef0"))},d4b4:function(e,t,n){"use strict";(function(e){n("c740"),n("96cf");var a=n("1da1"),i=n("2d0f");t["a"]={name:"DesCustomerOrderByEdit",mixins:[i["a"]],data:function(){return{tableData:[],treeData:[],defaultProps:{children:"children",label:"name"},listColumns:[]}},mounted:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.owner.$$getComponent(),a=n.$options.design.metadata.create.call(n),a&&!(a.length<=1)){t.next=5;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 5:if(i=a[1].metadata.at,i){t.next=9;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 9:return e.listColumns=n.getLastColumns(),t.next=12,e.getTreeData(a[1].metadata,a[1].metadata.rm_type||3);case 12:e.treeData=t.sent,e.tableData=e.currentData||[];case 14:case"end":return t.stop()}}),t)})))()},methods:{toList:function(t,n){if(n.field){var a=e.findIndex(this.tableData,(function(e){return e.field==n.field}));a<0&&this.tableData.push({field:n.field,fieldCaption:n.fieldCaption,column:"",sortType:"asc"})}},getTreeData:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function a(){var i,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=[],"8"!=t){a.next=8;break}return o={rmId:e.rmId},a.next=5,n.$webAPI.getDbSourceFieldsTree(o);case 5:i=a.sent,a.next=13;break;case 8:if("3"!=t){a.next=13;break}return s={namespace:e.at},a.next=12,n.$webAPI.getMetaDataFieldsTree(s);case 12:i=a.sent;case 13:return a.abrupt("return",i);case 14:case"end":return a.stop()}}),a)})))()},remove:function(e){dsf.array.remove(this.tableData,e)},up:function(t){var n=e.findIndex(this.tableData,(function(e){return e==t}));if(n>0){var a=this.tableData[n-1];this.$set(this.tableData,n-1,t),this.$set(this.tableData,n,a)}},down:function(t){var n=e.findIndex(this.tableData,(function(e){return e==t}));if(n<this.tableData.length-1){var a=this.tableData[n+1];this.$set(this.tableData,n+1,t),this.$set(this.tableData,n,a)}},yes:function(){return this.tableData}}}}).call(this,n("2ef0"))},d6cb:function(e,t,n){"use strict";(function(e){n("99af"),n("4de4"),n("0481"),n("4160"),n("a15b"),n("a434"),n("4069"),n("b64b"),n("ac1f"),n("5319"),n("159b");var a=n("2909"),i=(n("96cf"),n("1da1")),o=n("2d0f");t["a"]={name:"LinkSet",mixins:[o["a"]],data:function(){return{searchKey:"",flowData:[],selectFlow:null,checked:[],sID:"",curNode:null,selectTab:0,tempFlow:null,data:[],default:null,disabled:!1,eleColumns:[{prop:"labelCaption",label:"控件名称"},{prop:"readOnly",label:"只读",width:120,isSelect:!0,readOnlyAll:!1,isIndeterminate:!1},{prop:"hidden",label:"隐藏",width:120,isSelect:!0,hiddenAll:!1,isIndeterminate:!1}],btnsColumns:[{prop:"text",label:"按钮名称"},{prop:"visible",label:"可用",width:120,isSelect:!0,visibleAll:!1,isIndeterminate:!1}]}},watch:{selectFlow:function(e){var t=e.ctrls.filter((function(e){return e.readOnly})),n=e.ctrls.filter((function(e){return e.hidden})),a=e.btns.filter((function(e){return e.visible}));this.eleColumns[1].readOnlyAll=t.length===e.ctrls.length,this.eleColumns[2].hiddenAll=n.length===e.ctrls.length,this.btnsColumns[1].visibleAll=a.length===e.btns.length,this.curNode=e}},created:function(){this.sID=this.owner.chooseFlow&&this.owner.chooseFlow.dsfa_rm_id,this.data=this.currentData,this.initFlow()},mounted:function(){},methods:{yes:function(){var e=this;if(0===this.flowData.length)return this.data;this.tempFlow&&(this.owner.chooseFlow=this.tempFlow);var t=dsf.mix(!0,{},this.flowData[0]);return t.children.forEach((function(t){t.ctrls&&t.ctrls.length>0&&t.ctrls.forEach((function(t){e.hiddenToVisible(t)}))})),t.NodeList=t.children,delete t.children,this.$http.post("wfk/saveExWF",{sData:JSON.stringify(t)}).then((function(e){if(2e4==e.data.state)return[t];dsf.layer.message(e.message||"环节设置异常",!1)}))},validate:function(){return!0},hiddenToVisible:function(e){e.visible=!e.hidden,delete e.hidden},visibleToHidden:function(e){e.hidden=!e.visible},initFlow:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a,i,o,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.initDefault(),!(e.data&&e.data.length>0)){t.next=25;break}if(n=dsf.mix(!0,[],e.data),n[0].id!==e.sID){t.next=10;break}if(a=JSON.parse(JSON.stringify(e.default)),a){t.next=8;break}return e.disabled=!0,t.abrupt("return");case 8:t.next=15;break;case 10:return i=n[0].NodeList[0].NameSpace,o=n[0].NodeList[0].code,t.next=14,e.getFormData(i,o);case 14:a=t.sent;case 15:return s=!1,r={},a.ctrls&&n[0].NodeList[0].ctrls&&(a.ctrls.length>n[0].NodeList[0].ctrls.length?a.ctrls.forEach((function(e,t){var a=n[0].NodeList[0].ctrls.filter((function(t){return t.caption===e.caption}));0===a.length&&(s=!0,r[t]=e)})):n[0].NodeList[0].ctrls.forEach((function(e,t){var n=a.ctrls.filter((function(t){return t.caption===e.caption}));0===n.length&&(s=!1,r[t]=e)}))),n[0].NodeList.forEach((function(t){if(Object.keys(r).length>0)if(s)for(var n in r)t.ctrls.splice(n,0,r[n]);else for(var a in r)t.ctrls.splice(a,1);t.ctrls&&t.ctrls.length>0&&t.ctrls.forEach((function(t){e.visibleToHidden(t)})),t.btns&&t.btns.length>0&&t.btns.forEach((function(e){e.visible=!!e.visible}))})),n[0].children=n[0].NodeList,e.checked=[n[0].children[0].id],e.curNode=n[0].children[0],e.selectFlow=n[0].children[0],e.flowData=n,t.abrupt("return");case 25:e.$http.get("wfk/getWFNodeList",{sID:e.sID}).then((function(t){if(t.data.success){var n=e.formatData(t.data.data,void 0);n&&n.children&&(e.checked=[n.children[0].id],e.curNode=n.children[0]),e.flowData=[n]}}));case 26:case"end":return t.stop()}}),t)})))()},initDefault:function(){var e,t=this,n=[],a=[],i=!0;dsf.recursionComponentProps(this.owner.$$getComponent().$page.$props,(function(o){if("DsfViewPart"!==o.ctrlName&&"DsfSection"!=o.ctrlName||n.push({id:o.designId,label:o.caption,labelCaption:"".concat(o.caption),caption:o.caption,readOnly:!1,hidden:!1,visible:!0}),o.isFormControl&&"wfinfo"!==o.caption&&"DsfDisposeIdea"!==o.ctrlName&&"DsfMobileDisposeIdea"!==o.ctrlName){if(!o.metadata_fullcode)return i=!1,void dsf.layer.message("请先保存表单后再操作",!1);n.push({id:o.id,label:o.label,labelCaption:"".concat(o.label,"(").concat(o.caption,")"),caption:o.caption,readOnly:!1,hidden:!1,visible:!0,metadataCode:o.metadata_fullcode})}"page"===o.caption&&(e=o.title),o.ctrlName&&"DsfButtonBar"===o.ctrlName&&(o.buttons.forEach((function(e){e.visible=!0,a.push(e)})),t.btnsColumns[1].visibleAll=!0)}));var o=dsf.url.queryString("B"),s=dsf.url.queryString("M"),r=dsf.url.queryString("pname"),l="".concat(o,".").concat(s,".").concat(r);this.default=i?{pageTitle:e,ctrls:n,btns:a,NameSpace:l,code:r}:null},formatData:function(e,t,n){if(e.label=e.WFName||e.NodeName,e.id=e.WFID||e.NodeID,n){var a=JSON.parse(JSON.stringify(this.default));e.pageTitle=a&&a.pageTitle||"",e.ctrls=a&&a.ctrls||[],e.btns=a&&a.btns||[],e.NameSpace=a&&a.NameSpace||"",e.code=a&&a.code||""}if(void 0===t&&(e.disabled=e.NodeType===t),e.children=e.NodeList,e.children)for(var i=0;i<e.children.length;i++)this.formatData(e.children[i],t,!0);return e},chooseForm:function(){var e=this,t={type:"form"};dsf.layer.pc.openDialog({title:"选择表单",width:"400px",height:"400px",overflow:"hidden",content:"ChooseForm",params:t,btns:[{text:"确定",handler:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n.validate()){t.next=7;break}return a=n.yes(),t.next=4,e.getFormData(a.ID,a.code);case 4:return i=t.sent,Object.assign(e.curNode,i),t.abrupt("return",!0);case 7:return t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()},{text:"取消"}]})},getFormData:function(t,n){var a=this,i=t;i=i.replace("."+n,"");var o="/pc/views/".concat(i,"/").concat(n,".layout.html");return this.$http.get(o,null,{responseType:"text"}).then((function(i){if(i.data){var o=e("<div>"+i.data+"</div>"),s=o.children("script[id='layout']").html()||"",r=new Function(["var layout="+(s||"null")+";","return layout;"].join("\n")),l=r();return{pageTitle:l.title,ctrls:a.getFormctrls(l),btns:a.getBtns(l),NameSpace:t,code:n}}}))},applyTo:function(){var e=this,t={data:this.flowData};dsf.layer.pc.openDialog({title:"应用于",width:"400px",height:"400px",overflow:"hidden",content:"ApplyTo",params:t,btns:[{text:"确定",handler:function(t){var n=t.yes();return n.forEach((function(t){t.NodeID&&e.flowData.forEach((function(n){n.children.forEach((function(n){t.id===n.id&&(n.pageTitle=e.curNode.pageTitle,n.ctrls=dsf.mix(!0,[],e.curNode.ctrls),n.btns=dsf.mix(!0,[],e.curNode.btns),n.NameSpace=e.curNode.NameSpace,n.code=e.curNode.code)}))}))})),!0}},{text:"取消"}]})},getFormctrls:function(e){var t=this,n=[];return"DsfViewPart"!==e.ctrlName&&"DsfSection"!=e.ctrlName||n.push({id:e.designId,label:e.label,labelCaption:"".concat(e.caption),caption:e.caption,readOnly:!1,hidden:!1}),e.isFormControl?"wfinfo"!==e.caption&&"DsfDisposeIdea"!==e.ctrlName&&n.push({id:e.designId,label:e.label,labelCaption:"".concat(e.label,"(").concat(e.caption,")"),caption:e.caption,readOnly:!1,hidden:!1}):e.slots.forEach((function(e){e.controls.forEach((function(e){var a=t.getFormctrls(e);n.push(a)}))})),n.flat(1/0)},getBtns:function(e){var t=this,n=[];return e.ctrlName&&"DsfButtonBar"===e.ctrlName?n.push.apply(n,Object(a["a"])(e.buttons)):e.slots.forEach((function(e){e.controls.forEach((function(e){var a=t.getBtns(e);n.push(a)}))})),n.flat(1/0)},chooseFlow:function(){var e=this,t={currentData:this.tempFlow||this.owner.chooseFlow};dsf.layer.pc.openDialog({title:"流程设置",width:"400px",height:"400px",overflow:"hidden",content:"ChooseFlow",params:t,btns:[{text:"确定",handler:function(t){if(t.validate()){var n=t.yes();return e.tempFlow=n,e.sID=n.dsfa_rm_id,e.data=[],e.initFlow(),!0}return!1}},{text:"取消"}]})}}}}).call(this,n("1157"))},d897:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-question-formwrap"},[n("div",{staticClass:"example"},[n("el-form",{attrs:{"label-position":"top"}},[n("el-form-item",{attrs:{prop:"value",label:e.exampleLabel,rules:e.exampleRules}},["0"==e.form.layout?n("el-radio-group",e._l(e.exampleItems,(function(t){return n("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.text))])})),1):n("el-radio-group",[n("el-row",e._l(e.exampleItems,(function(t){return n("el-col",{key:t.value,attrs:{span:e.getColSpan}},[n("el-radio",{attrs:{label:t.value}},[e._v(e._s(t.text))])],1)})),1)],1)],1)],1)],1),n("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.rules,"label-width":"auto","label-position":"left"}},[n("el-row",{attrs:{gutter:15}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{prop:"questionBody","label-width":"0"}},[n("el-input",{attrs:{placeholder:"请输入题干"},model:{value:e.form.questionBody,callback:function(t){e.$set(e.form,"questionBody",t)},expression:"form.questionBody"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"isOther",label:"是否含有'其他'选项:"}},[n("el-switch",{model:{value:e.form.isOther,callback:function(t){e.$set(e.form,"isOther",t)},expression:"form.isOther"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"readOnly",label:"本题不允许填写:"}},[n("el-switch",{model:{value:e.form.readOnly,callback:function(t){e.$set(e.form,"readOnly",t)},expression:"form.readOnly"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"visible",label:"本题是否显示:"}},[n("el-switch",{model:{value:e.form.visible,callback:function(t){e.$set(e.form,"visible",t)},expression:"form.visible"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"required",label:"必填标识:"}},[n("el-switch",{model:{value:e.form.required,callback:function(t){e.$set(e.form,"required",t)},expression:"form.required"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"layout",label:"排列样式:"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.layout,callback:function(t){e.$set(e.form,"layout",t)},expression:"form.layout"}},[n("el-option",{attrs:{label:"自适应",value:"0"}}),n("el-option",{attrs:{label:"竖向排列",value:"1"}}),n("el-option-group",{attrs:{label:"横向排列"}},[n("el-option",{attrs:{label:"每行2列",value:"2"}}),n("el-option",{attrs:{label:"每行3列",value:"3"}}),n("el-option",{attrs:{label:"每行4列",value:"4"}}),n("el-option",{attrs:{label:"每行5列",value:"5"}})],1)],1)],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",[n("el-button",{attrs:{icon:"el-icon-plus"},on:{click:e.addOption}},[e._v("添加选项")]),n("el-button",{attrs:{icon:"el-icon-circle-plus-outline"},on:{click:e.batchAddOption}},[e._v("批量添加")])],1)],1),n("el-col",{staticStyle:{padding:"15px 0"},attrs:{span:24}},[n("el-table",{attrs:{data:e.form.items}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),n("el-table-column",{attrs:{label:"选项"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-form-item",{attrs:{size:"small",prop:"items."+t.$index+".value","label-width":"0",rules:[{required:!0,message:"请输入"}]}},[n("el-input",{attrs:{placeholder:"请输入"},on:{change:function(n){e.optionChange(e.form.items[t.$index],n)}},model:{value:e.form.items[t.$index].value,callback:function(n){e.$set(e.form.items[t.$index],"value",n)},expression:"form.items[scope.$index].value"}})],1)]}}])}),n("el-table-column",{attrs:{label:"操作",width:"180",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"show",rawName:"v-show",value:0===t.$index,expression:"scope.$index === 0"}],attrs:{circle:"",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:e.addOption}}),n("el-button",{attrs:{circle:"",size:"small",icon:"el-icon-remove-outline"},on:{click:function(n){return e.remove(t)}}}),n("el-button",{attrs:{circle:"",size:"small",icon:"el-icon-top",disabled:0===t.$index},on:{click:function(n){return e.toggle(t,"up")}}}),n("el-button",{attrs:{circle:"",size:"small",icon:"el-icon-bottom",disabled:t.$index===e.form.items.length-1},on:{click:function(n){return e.toggle(t,"down")}}})]}}])})],1)],1),n("el-col",{attrs:{span:24}},[n("div",{staticClass:"ljsz"},[n("span",{staticClass:"label"},[e._v("逻辑设置:")]),n("span",{staticClass:"btn",on:{click:e.showRela}},[e._v("题目关联")]),n("span",{staticClass:"btn",on:{click:e.showLogic}},[e._v("跳题逻辑")])])])],1)],1),n("el-dialog",{attrs:{title:"添加选项",visible:e.dialogVisible,modal:!0,"append-to-body":!0,"modal-append-to-body":!1,"before-close":e.handleClose,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-input",{attrs:{type:"textarea",rows:15,placeholder:"多个选项使用换行分割"},model:{value:e.optionText,callback:function(t){e.optionText=t},expression:"optionText"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("dsf-button",{attrs:{type:"plain"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("dsf-button",{on:{click:e.sure}},[e._v("确 定")])],1)],1)],1)},i=[],o=(n("99af"),n("d81d"),n("a434"),n("d3b7"),n("ac1f"),n("25f0"),n("5319"),n("1276"),n("2909")),s=n("67b0"),r={mixins:[s["a"]],props:["owner"],data:function(){return{form:{questionBody:"请输入题干",readOnly:!1,visible:!0,required:!0,isOther:!1,layout:"0",items:[]},rules:{questionBody:[{required:!0,message:"请输入题干"}]},optionText:"",dialogVisible:!1}},computed:{exampleItems:function(){var e=this.form.items;return this.form.isOther&&(e=[].concat(Object(o["a"])(e),[{text:"其他",value:"其他"}])),e},getColSpan:function(){switch(this.form.layout.toString()){case"1":return 24;case"2":return 12;case"3":return 8;case"4":return 6;case"5":return 4;default:return 24}},exampleLabel:function(){return"".concat(this.owner.questionIndex,".").concat(this.form.questionBody)},exampleRules:function(){return this.form.required?[{required:!0,trigger:"change"}]:null}},created:function(){this.owner.layout=this.owner.layout+""},methods:{optionChange:function(e,t){e.text=t},addOption:function(){var e=this.form.items.length;this.form.items.push({text:"选项".concat(e+1),value:"选项".concat(e+1),attach_text:""})},batchAddOption:function(){this.optionText="",this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1},toggle:function(e,t){var n,a=e.$index,i=Object(o["a"])(this.form.items),s=this.form.items[a];a===this.form.items.length-1&&"down"===t||0===a&&"up"===t||(n="up"===t?a-1:a+1,i.splice(a,1),i.splice(n,0,s),this.form.items=i)},remove:function(e){this.form.items.splice(e.$index,1)},sure:function(){var e=this.optionText.replace(/^\s|\s$/g,"").split(/\n/).map((function(e){var t=e.replace(/^\s|\s$/g,"").split("|");return{text:t[0],value:t[1]?t[1]:t[0],attach_text:""}}));this.form.items=[].concat(Object(o["a"])(this.form.items),Object(o["a"])(e)),this.dialogVisible=!1},showLogic:function(){this.$emit("showDialog","logic")}}},l=r,c=n("2877"),u=Object(c["a"])(l,a,i,!1,null,null,null);t["default"]=u.exports},d939:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n("5530"),i=n("d4ec"),o=n("bee2"),s=n("262e"),r=n("2caf"),l=n("ec87"),c=n("3c04"),u=function(e){Object(s["a"])(n,e);var t=Object(r["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(o["a"])(n,[{key:"commands",value:function(e){var t=e.type;return function(e){return Object(c["toggleWrap"])(t,e)}}},{key:"inputRules",value:function(e){var t=e.type;return[Object(c["wrappingInputRule"])(/^\s*>\s$/,t)]}},{key:"name",get:function(){return"paragraph"}},{key:"defaultOptions",get:function(){return{style:null,class:null}}},{key:"schema",get:function(){return{attrs:{style:{default:null},class:{default:null}},content:"inline*",draggable:!1,group:"block",parseDOM:[{tag:"div",getAttrs:function(e){return{style:e.getAttribute("style"),class:e.getAttribute("class")}}},0],toDOM:function(e){return["div",Object(a["a"])({},e.attrs),0]}}}}]),n}(l["Node"])},da42:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticClass:"ue-header-set"},[n("el-row",{staticClass:"content"},[n("el-col",{staticClass:"left",attrs:{span:6}},[n("el-checkbox",{attrs:{border:"",indeterminate:e.isIndeterminate},on:{change:e.chooseAll},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),n("ul",{staticClass:"check-list"},e._l(e.tools,(function(t,a){return n("li",{key:t.text},[n("el-checkbox",{attrs:{label:t.val,value:t.checked,checked:!1,name:"type"},on:{change:function(n){return e.chooseItem(t,a)}}},[e._v(e._s(t.text))])],1)})),0)],1),n("el-col",{staticClass:"right",attrs:{span:18}},[n("div",{staticClass:"ue-container"},[e.showEditor?n("quill-editor",{ref:"myQuillEditor",staticClass:"quill-editor",style:{display:"flex",height:"100%","flex-direction":"column"},attrs:{options:e.option}}):e._e()],1)])],1)],1)},i=[],o=n("2a3d"),s=o["a"],r=(n("02d8"),n("2877")),l=Object(r["a"])(s,a,i,!1,null,"7f93d009",null);t["default"]=l.exports},dc1c:function(e,t,n){"use strict";n("439a")},dd01:function(e,t,n){"use strict";(function(e){n("4795"),n("96cf");var a=n("1da1");t["a"]={name:"DsfDesignerDialog",model:{prop:"args"},props:["attrdata","args","owner"],data:function(){return{cloneArgs:{},dialogVisible:!1,width:"50%"}},created:function(){var e=this.attrdata;this.owner&&this.owner.isQuestionControl&&e&&e.config&&"DesQuestionConfig"===e.config.content&&this.$bus.$on("questionSetting",this.clickHandler)},destroyed:function(){this.$bus.$off("questionSetting",this.clickHandler)},methods:{sure:function(){},cancel:function(){},clickHandler:function(t){this.dialogVisible=!0;var n=this,i=this.owner,o=this.attrdata.config,s=o.title,r=o.content,l=o.width,c=o.height,u=o.overflow,d=o.class;"array"==dsf.type(this.args)?this.cloneArgs=dsf.mix(!0,[],this.args):"object"==dsf.type(this.args)?this.cloneArgs=dsf.mix(!0,{},this.args):this.cloneArgs=this.args;var h=e.extend({data:function(){return{dialogVisible:!0,title:s||"设置",content:r,config:o,currentData:n.cloneArgs,width:l||"50%",height:c||"auto",destroyOnClose:!0,owner:i,overflow:u||"auto",params:o.params||{},skin:d||""}},methods:{sure:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=null,!e.$refs.content){t.next=9;break}if(!1===e.$refs.content.validate()){t.next=9;break}if(!e.$refs.content.yes){t.next=7;break}return t.next=6,e.$refs.content.yes();case 6:a=t.sent;case 7:e.dialogVisible=!1,e.$nextTick((function(){n.$emit("change",a)}));case 9:case"end":return t.stop()}}),t)})))()},close:function(){this.dialogVisible=!1},cancel:function(){var e=this;p&&(p=null),window.setTimeout((function(){e.$destroy()}),0)}},template:'<DsfDialog :class=\'skin\' :title="title" :visible.sync="dialogVisible" :width="width" top="10vh" :close-on-click-modal="false" :append-to-body="true"  @close="close" @closed="cancel" >\n                    <div :style="{\'height\':height,\'overflow\':(overflow||\'auto\')}">\n                     <component :is="content"  v-bind="params" :current-data="currentData" :owner="owner" :config="config" ref="content"></component>\n                    </div>\n                    <template v-slot:footer>\n                      <DsfButton text="确定" @click="sure" />\n                      <DsfButton text="取消" type="plain" @click="close"/>\n                    </template>\n                  </DsfDialog>'}),p=(new h).$mount()}}}}).call(this,n("a026")["default"])},e0af:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tree-img-list"},e._l(e.imgList,(function(t){return a("div",{key:t.name,staticClass:"img-box",class:{active:t.icon===e.chooseIcon},on:{click:function(n){return e.addClass(t)}}},[a("el-image",{attrs:{alt:t.item,src:n("d5b1")("./"+t.showIcon+".png")}}),a("p",{staticClass:"demonstration"},[e._v(" "+e._s(t.icon)+" ")])],1)})),0)},i=[],o=(n("fb6a"),n("2d0f")),s={name:"DesTreeImgList",mixins:[o["a"]],props:{treeList:{type:Object,default:function(){return{}}}},data:function(){return{imgList:[],chooseIcon:"",urlPath:"../../../assets/styles/themes/tree_img/"}},created:function(){this.getTreeImgList()},mounted:function(){},methods:{addClass:function(e){this.chooseIcon=e.icon,this.treeList.icon=e.icon?this.urlPath+e.icon+".png":""},getTreeImgList:function(){var e=this;this.$http.get("./static/pd_other/treeImgList.json").done((function(t){e.imgList=t[e.treeList.imgType];var n=e.treeList.icon;e.chooseIcon=n?n.slice(e.urlPath.length,-4):""})).error((function(e){dsf.error(e)}))}}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},e159:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("enum-editor-item",{ref:"meta",attrs:{type:"meta","tree-data":e.treeData1,"table-post":e.tablePost,"tree-loading":e.loading,"empty-text":"请选择元数据","name-key":"name","id-key":"treeinfo_globalid"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})},i=[],o=(n("d81d"),n("2d0f")),s=n("090e"),r={name:"DesAutoCompleteMD",components:{EnumEditorItem:s["default"]},mixins:[o["a"]],data:function(){return{loading:!1,value1:{type:"meta",code:"",attach:[]},treeData1:[],tablePost:function(){}}},created:function(){this.currentData?this.init(this.currentData):this.postData1()},methods:{init:function(e){var t=e.type,n=e.attach,a=e.code,i=e.chooseKey,o=dsf.mix(!0,[],n);this.value1={type:t,attach:o,code:a,chooseKey:i},this.postData1()},validate:function(){return this.$refs.meta.getResult(),!!this.value1["code"]||(dsf.layer.message("请选择元数据以及右侧具体节点名称字段",!1),!1)},yes:function(){var e=this.value1.code;return e.id=e.value,e},postData1:function(){var e=this;this.loading=!0,this.$http.get("rm/list/meta",{namespace:""}).done((function(t){t.success?(e.treeData1=t.data.map((function(t){return e.dataFormat(t)})),e.$nextTick((function(){e.$refs.meta.initMetaTable()}))):dsf.layer.message("请求异常！",!1)})).always((function(){e.loading=!1}))},dataFormat:function(e){var t=this;return"3"!=e.type_value&&"8"!=e.type_value&&(e.nocheck=!0),"3"==e.type_value||"8"==e.type_value||e.children||(e.iconSkin="_special"),e.children&&(e.children=e.children.map((function(e){return t.dataFormat(e)}))),e}}},l=r,c=n("2877"),u=Object(c["a"])(l,a,i,!1,null,null,null);t["default"]=u.exports},e1ff:function(e,t,n){"use strict";(function(e){n("d81d");t["a"]={name:"DesMetaDataSource",props:{source:{type:Array,default:function(){return[]}},dict:{type:Array,default:function(){return[]}}},data:function(){return{data:[]}},mounted:function(){this.data=e.map(this.source,(function(e,t){return{label:e.ctrl.label||e.ctrl.caption,ctrl:e.ctrl,mdkey:e.source,initKey:e.source,isChange:!1}}))},methods:{changeKey:function(e,t){t.mdkey!=t.initKey?t.isChange=!0:t.isChange=!1},yes:function(){return this.data}}}}).call(this,n("2ef0"))},e5ff:function(e,t,n){"use strict";(function(e){n("c740"),n("4160"),n("d81d"),n("a434"),n("159b");var a=n("2d0f");t["a"]={name:"DesListStatusEdit",mixins:[a["a"]],data:function(){return{tableData:[]}},created:function(){var t=this;this.currentData&&e.forEach(this.currentData,(function(e,n){t.tableData.push(e)}))},methods:{addCustomButton:function(){var e=dsf.mix(!0,{},{text:"状态值",icon:"icon-shezhi",color:"#5f5f5f"});this.tableData.push(e)},validate:function(){return-1!==e.findIndex(this.tableData,(function(e){return""===e.text}))?(dsf.layer.message("请输入状态值",!1),!1):this.isRepeat(e.map(this.tableData,"text"))?(dsf.layer.message("一种状态值只能配置一次",!1),!1):void 0},isRepeat:function(e){var t={};for(var n in e){if(t[e[n]])return!0;t[e[n]]=!0}return!1},yes:function(){var t={};return e(this.tableData).forEach((function(e){t[e.text]=e})),t},openIcon:function(){window.open(dsf.url.getWebPath("$/pc/iconfont/demo_index.html"),"icondemo")},removeButton:function(e){this.tableData.splice(e.$index,1)}}}}).call(this,n("2ef0"))},e601:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.buttons,(function(t,a){return n("DsfButton",{directives:[{name:"show",rawName:"v-show",value:e.showButton(t),expression:"showButton(button)"}],key:a,attrs:{title:t.text,icon:t.icon,"btn-style":"icon-text"},on:{click:function(e){return t.handler(e,t)}}},[e._v(" "+e._s(t.text)+" ")])})),1)},i=[],o={name:"DsfDesignerButtons",props:{buttons:{type:Array,default:function(){return[]}},designer:{type:Object,default:function(){return null}},showButton:{type:Function,default:dsf.noop}},methods:{}},s=o,r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["a"]=l.exports},e79b:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-question-formwrap"},[n("div",{ref:"UEditor",staticClass:"editor"})])},i=[],o=n("67b0"),s={mixins:[o["a"]],props:["owner"],data:function(){return{ueId:"",toolBar:["fullscreen","undo","redo","bold","italic","underline","removeformat","formatmatch","pasteplain","forecolor","backcolor","insertorderedlist","insertunorderedlist","selectall","cleardoc","rowspacingtop","rowspacingbottom","lineheight","customstyle","paragraph","fontfamily","fontsize","indent","justifyleft","justifycenter","justifyright","justifyjustify","link","unlink","anchor","imagenone","imageleft","imageright","imagecenter","simpleupload","insertimage","insertvideo","inserttable","autotypeset"]}},mounted:function(){var e=this,t=dsf.uuid();this.$refs.UEditor.id=t,this.ueId=t;var n=dsf.url.getWebPath("$/js/libs/UEditor/ueditor.config.js"),a=dsf.url.getWebPath("$/js/libs/UEditor/ueditor.all.js");this.$http.importFiles([n,a]).then((function(){e.renderEditor()})).catch((function(e){dsf.layer.alert("加载UEditor.js文件出错")}))},methods:{renderEditor:function(){var e=this;this.$ue&&this.$ue.destroy(),this.$ue=UE.getEditor(this.ueId,{autoHeightEnabled:!0,toolbars:[this.toolBar],zIndex:2e4}),this.$ue.ready((function(){e.$ue.setContent(e.owner.questionBody)}))}}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},e883:function(e,t,n){"use strict";(function(e){n("4de4"),n("fb6a"),n("b0c0"),n("ac1f"),n("1276");t["a"]={name:"DsfDesignerProperties",props:{data:{type:Array,default:function(){return[]}},owner:{type:Object,default:function(){return{}}}},data:function(){return{tabActive:"1",activeName:"",inCommonUseGroup:[]}},watch:{data:{handler:function(e){this.activeName=e[0]?e[0].name:"",this.inCommonUseGroup=this.getInCommonUse(this.data)}},inCommonUseGroup:function(e){e.length?this.tabActive="1":this.tabActive="2"}},mounted:function(){this.inCommonUseGroup=this.getInCommonUse(this.data)},methods:{getInCommonUse:function(t){var n=[];return e.each(t,(function(t){var a=e.filter(t.attributes,(function(e){return e.inCommonUse}));if(a.length){var i=dsf.mix({},t,{attributes:a});n.push(i)}})),n},getBind:function(e){var t=e.bindControlAttr||"",n=t.split(".");if(1==n.length)return{data:this.owner,key:n[0]||""};var a=n.slice(0,n.length-1),i=this.owner,o=a.shift();while(o){if(!dsf.isDef(i[o])){i=null;break}i=i[o],o=a.shift()}return i||(i=this.owner),{data:i,key:n[n.length-1]}},show:function(e){return!e||this.$eval(e,this.owner)}}}}).call(this,n("2ef0"))},ea22:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-main",{staticStyle:{padding:"0px"}},[n("el-tabs",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("el-tab-pane",{attrs:{label:"自定义",name:"list"}},[n("el-main",[n("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[n("DsfButton",{on:{click:e.addBanner}},[e._v("新增")])],1),n("el-table",{staticClass:"ds-table",attrs:{border:!0,data:e.data.list,"highlight-current-row":!0}},[n("el-table-column",{attrs:{label:"图片地址","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"请输入图片地址"},model:{value:t.row.image,callback:function(n){e.$set(t.row,"image",n)},expression:"scope.row.image"}})]}}])}),n("el-table-column",{attrs:{label:"标题","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.row.title,callback:function(n){e.$set(t.row,"title",e._n(n))},expression:"scope.row.title"}})]}}])}),n("el-table-column",{attrs:{label:"描述","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"请输入描述"},model:{value:t.row.desc,callback:function(n){e.$set(t.row,"desc",e._n(n))},expression:"scope.row.desc"}})]}}])}),n("el-table-column",{attrs:{label:"链接","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"请输入图片链接"},model:{value:t.row.url,callback:function(n){e.$set(t.row,"url",e._n(n))},expression:"scope.row.url"}})]}}])}),n("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(n){return e.insert(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(n){return e.deleted(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(n){return e.up(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(n){return e.down(t)}}})]}}])})],1)],1)],1),n("el-tab-pane",{attrs:{label:"接口",name:"url"}},[n("el-input",{attrs:{placeholder:"请输入接口地址"},model:{value:e.data.url,callback:function(t){e.$set(e.data,"url",t)},expression:"data.url"}})],1)],1)],1)],1)},i=[],o=(n("99af"),n("a623"),n("26e9"),n("fb6a"),n("a434"),n("2909")),s=n("2d0f");function r(){return{title:"",desc:"",image:"",url:""}}var l={name:"DesMobileBannerEdit",mixins:[s["a"]],data:function(){return{data:{url:"",list:[]},tab:"list"}},created:function(){var e=this.owner.$$getComponent(),t=e.url,n=e.list;this.data.url=t,this.data.list=dsf.mix(!0,[],n),this.tab=t?"url":"list",this.data.url||0!==this.data.list.length||this.addBanner()},methods:{addBanner:function(){this.data.list.push(r())},vaildate:function(){var e="";if("url"!==this.tab||this.data.url){if("list"===this.tab){var t=this.data.list.every((function(e){return!!e.image}));t||(e="图片地址不能为空")}}else e="请输入url";return e},deleted:function(e){this.data.list.splice(e.$index,1)},up:function(e){if(e.$index>0){var t,n=this.data.list.slice(e.$index-1,e.$index+1).reverse();(t=this.data.list).splice.apply(t,[e.$index-1,2].concat(Object(o["a"])(n)))}},down:function(e){if(this.data.list.length-1>e.$index){var t,n=this.data.list.slice(e.$index,e.$index+2).reverse();(t=this.data.list).splice.apply(t,[e.$index,2].concat(Object(o["a"])(n)))}},insert:function(e){this.data.list.splice(e.$index+1,0,r())},yes:function(){var e=this.vaildate();if(e)throw dsf.layer.message(e,!1),new Error(e);this.data.url?this.owner.url=this.data.url:this.owner.list=dsf.mix(!0,[],this.data.list)}}},c=l,u=n("2877"),d=Object(u["a"])(c,a,i,!1,null,null,null);t["default"]=d.exports},ea6f:function(e,t,n){"use strict";(function(e,a){n("99af"),n("7db0"),n("4160"),n("e25e"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),n("159b"),n("4795");var i=n("ec87"),o=n("f23d"),s=n("5c89"),r=n("850f"),l=n("8234"),c=n("44ff"),u=n("d939");t["a"]={name:"page-doc",components:{EditorContent:i["EditorContent"],EditorMenuBubble:i["EditorMenuBubble"]},data:function(){return{editor:null,relationPageControls:[],showRelationControls:!1,pos:{},insertPos:{},show:!1,fontColor:"#efefef",bgColor:"transparent",showSearch:!1,replaceType:"1",searchText:"",replaceText:"",isMark:!1}},methods:{selectRelatComponent:function(e){var t=this;this.showRelationControls=!1;var n=this.editor.state.tr.insertText("%%".concat(e.caption,"%%"));this.editor.view.dispatch(n);var a=new RegExp("@%%".concat(e.caption,"%%")),i='<span did="'.concat(e.designId,'" class="marktag">').concat(e.caption,"</span>"),o=this.editor.getHTML().replace(a,i);this.editor.setContent(o),setTimeout((function(){t.editor.focus()}),0)},handleClose:function(){this.$parent.pageDocument=this.editor.getHTML()},handleMenuKeydown:function(t){if(38===t.which){var n=e(t.target).prev(".autoselect-menu-item");n&&n.focus()}else if(40===t.which){var a=e(t.target).next(".autoselect-menu-item");a.focus()}else 13===t.which&&e(t.target).trigger("click")},getPageControls:function(){var e=[],t=function t(n){n.forEach((function(n){n.caption?(e.push(n),(n.slots||n.controls)&&t(n.controls||n.slots)):n.controls&&Array.isArray(n.controls)?t(n.controls):n.slots&&Array.isArray(n.slots)&&t(n.slots)}))};t(this.$parent.page.slots),this.relationPageControls=e},toggleTip:function(e){var t;null!==(t=this.$refs["menu"])&&void 0!==t&&t.contains(e.target)||(this.showRelationControls=!1)},showComponentDoc:function(t){var n=t.id;this.show=!0;var a=this.$parent.pageDocument||"";if(n){this.isMark=!0;var i=e("<div></div>");i.append(e(a));var o,s=i.find("[did=".concat(n,"]")),r=s.parents("div");if(r.length)r.addClass("mark"),this.editor.setContent(i.html());else this.editor.setContent(a),this.editor.commands.find(null===(o=i.find("[did=".concat(n,"]")))||void 0===o?void 0:o.text())}else this.editor.setContent(a)},search:function(){this.editor.commands.find(this.searchText),this.showSearch=!1},replace:function(){1==this.replaceType?this.editor.commands.replace(this.replaceText):this.editor.commands.replaceAll(this.replaceText),this.showSearch=!1},getDocContent:function(){}},mounted:function(){var t=this;this.editor=new i["Editor"]({editable:!0,autoFocus:!0,useBuiltInExtensions:!0,extensions:[new o["a"],new o["c"],new o["e"],new o["f"],new o["g"]({levels:[1,2,3]}),new o["l"],new o["m"],new o["p"],new o["q"],new o["k"],new o["b"],new o["d"],new o["j"],new o["o"],new o["r"],new o["h"],new o["i"],new o["n"]({disableRegex:!1}),new r["a"],new l["a"],new c["a"],new s["a"],new i["Doc"],new u["a"]],content:"",editorProps:{handleTextInput:a.throttle((function(e,n,a,i){if("@"===i){t.getPageControls(),t.showRelationControls=!0;var o=e.state,s=o.selection,r=s.from,l=s.to,c=document.querySelector(".pageeditor"),u=c.offsetTop,d=window.getComputedStyle(c),h=d.width,p=(d.height,document.querySelector(".pagedoc-drawer").offsetLeft),f=e.coordsAtPos(r),m=f.left-p+10,g=f.top-u-27,_=parseInt(h)-200-10;t.pos={left:"".concat(m>_?_:m,"px"),top:"".concat(g,"px")},t.$nextTick((function(){var e=document.querySelector(".autoselect-menu-item:first-child");e.removeAttribute("tabindex"),window.setTimeout((function(){e.setAttribute("tabindex",0),e.focus()}))})),t.insertPos={from:r,to:l}}return!1}),500,{leading:!0,trailing:!1})},onUpdate:function(e){var n=e.getHTML;t.$parent.pageDocument=n()},onFocus:function(){if(t.isMark){var n=e("<div>");n.html(t.editor.getHTML()),n.find("div.mark").removeClass("mark"),t.editor.setContent(n.html()),t.isMark=!1}}}),window.addEventListener("click",this.toggleTip),this.$bus.$on("showComponentDoc",this.showComponentDoc)},beforeDestroy:function(){var e,t;null===(e=this.editor)||void 0===e||null===(t=e.destroy)||void 0===t||t.call(e),window.removeEventListener("click",this.toggleTip),this.$bus.$off("showComponentDoc",this.showComponentDoc)}}}).call(this,n("1157"),n("2ef0"))},eaf5:function(e,t,n){},eb27:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.visible?n("div",{staticClass:"region",style:e.regionSty}):e._e()},i=[],o={name:"Region",props:{visible:{type:Boolean,default:!1},region:{type:Object,default:function(){return{}}}},data:function(){return{test:!1}},computed:{regionSty:function(){return{left:this.region.left+"px",top:this.region.top+"px",width:this.region.width+"px",height:this.region.height+"px"}}},methods:{}},s=o,r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["a"]=l.exports},eb5e:function(e,t,n){"use strict";(function(e,a){n("7db0"),n("4160"),n("ac1f"),n("5319"),n("159b");var i=n("2d0f"),o=n("5c26"),s=n("68d0"),r=n("a6c1"),l=n("e79b"),c=n("d897"),u=n("49b2"),d=n("7ba5");t["a"]={name:"DesQuestionConfig",mixins:[i["a"]],data:function(){return{dialogVisible:!1,logicVisible:!1,relaForm:{relaIndex:"no-rela",relaCheckBox:[],relaRadio:""},question:{},prevObjs:[],relaItem:null,nextObjs:[],logic:{}}},computed:{componentId:function(){var e=null;if(!this.owner.ctrlType)return e;switch(this.owner.ctrlType.toLowerCase().replace("dsf.","")){case"qiqa":e=o["default"];break;case"qirate":e=u["default"];break;case"qifill":e=s["default"];break;case"qicheckbox":e=r["default"];break;case"qiradio":e=c["default"];break;case"qihellomsg":e=l["default"];break;case"qislider":e=d["default"]}return e},property:function(){return{questionIndex:this.owner.questionIndex,questionBody:this.owner.questionBody,required:this.owner.required,readOnly:this.owner.readOnly,items:this.owner.items,visible:this.owner.visible,layout:this.owner.layout,mustCheckNum:this.owner.mustCheckNum,maxCheckNum:this.owner.maxCheckNum,isTextArea:this.owner.isTextArea,maxLength:this.owner.maxLength,isOther:this.owner.isOther,showText:this.owner.showText,starLength:this.owner.starLength,min:this.owner.min,max:this.owner.max,minText:this.owner.minText,maxText:this.owner.maxText,logicRela:this.owner.logicRela,logic:this.owner.logic}}},methods:{validate:function(){var e=!1;return this.$refs.form.form?this.$refs.form.$refs.form.validate((function(t){e=t})):e=!0,e},yes:function(){var e;return this.$refs.form.form?(e=JSON.parse(JSON.stringify(this.$refs.form.form)),e.items&&(this.owner.metadata.dataSource={type:"static",code:e.items})):e={questionBody:this.$refs.form.$ue.getContent()},Object.assign(this.owner,e),null},showDialog:function(t){if("rela"===t){if(this.getPrevRelaQuestions(),!window._.isEmpty(this.owner.logicRela)){var n=this.owner.logicRela.Q;this.relaForm.relaIndex=this.owner.logicRela.Q,this.relaItem=window._.find(this.prevObjs,(function(e){if(e.questionIndex==n)return e})),this.relaForm.relaRadio=this.owner.logicRela.trig[0],this.relaForm.relaCheckBox=window._.clone(this.owner.logicRela.trig)}this.dialogVisible=!0}else if("logic"===t){var a={},i=this;window._.forEach(this.owner.items,(function(t){a[t.value]=e.isUndefined(i.owner.logic[t.value])?"":i.owner.logic[t.value]})),this.logic=a,this.getNextQuestions(),this.logicVisible=!0}},closeRelaDialog:function(){this.dialogVisible=!1},resetRela:function(){this.relaItem=null,this.prevObjs=[],this.relaForm.relaCheckBox=[],this.relaForm.relaRadio="",this.relaForm.relaIndex="no-rela"},setRela:function(){if("no-rela"!=this.relaForm.relaIndex){var e=null;"dsf.qiradio"==this.relaItem.ctrlType?""==this.relaForm.relaRadio?dsf.layer.message("请选择需要关联的选项",!1):e=[this.relaForm.relaRadio]:0===this.relaForm.relaCheckBox.length?dsf.layer.message("请选择需要关联的选项",!1):e=window._.clone(this.relaForm.relaCheckBox),this.$set(this.owner,"logicRela",{Q:this.relaForm.relaIndex,trig:e})}else this.$set(this.owner,"logicRela",{});this.dialogVisible=!1},chooseRela:function(e){this.relaItem=window._.find(this.prevObjs,(function(t){if(t.questionIndex==e)return t})),this.relaForm.relaRadio="",this.relaForm.relaCheckBox=[]},getPrevRelaQuestions:function(){var e=a(this.owner.$el).prevAll().find(".ds-question-item[ctrl_type='dsf.qiradio'],.ds-question-item[ctrl_type='dsf.qicheckbox']"),t=[];window._.forEach(e,(function(e){t.push(e.__vue__)})),this.prevObjs=t},getNextQuestions:function(){var e=a(this.owner.$el).nextAll().find(".ds-question-item:not(.ds-hello)"),t=[];window._.forEach(e,(function(e){e.__vue__.questionIndex&&t.push(e.__vue__.questionIndex)})),this.nextObjs=t},setLogic:function(){var e={};window._.forEach(this.logic,(function(t,n){""!=t&&(e[n]=t)})),this.$set(this.owner,"logic",e),this.logicVisible=!1},resetLogic:function(){this.logic={}},closeLogicDialog:function(){this.logicVisible=!1}}}}).call(this,n("2ef0"),n("1157"))},eb5f:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{staticClass:"ds-enum-editor",attrs:{type:"border-card"},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[n("el-tab-pane",{attrs:{name:"1",label:"数据字典"}},[n("enum-editor-item",{attrs:{type:"dict","tree-loading":e.loading[0],"tree-data":e.treeData1,"default-checked-key":e.defaultCheckedKey1,"table-post":e.tablePost1,"empty-text":"请选择数据字典"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})],1),n("el-tab-pane",{attrs:{name:"2",label:"数据源"}},[n("enum-editor-item",{attrs:{type:"db","tree-loading":e.loading[1],"tree-data":e.treeData2,"default-checked-key":e.defaultCheckedKey2,"table-post":e.tablePost2,"empty-text":"请选择数据源"},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1),n("el-tab-pane",{staticClass:"ds-enum-editor-item3",attrs:{name:"3",label:"静态数据"}},[n("el-input",{attrs:{type:"textarea",rows:2,resize:"none",placeholder:"支持格式：'文本'、'文本|值'两种格式，多个选项用回车符换行"},model:{value:e.value3,callback:function(t){e.value3=t},expression:"value3"}})],1)],1)},i=[],o=(n("a15b"),n("d81d"),n("b0c0"),n("e25e"),n("ac1f"),n("1276"),n("498a"),n("2d0f")),s=n("090e"),r={name:"DesEnumEditor",components:{EnumEditorItem:s["default"]},mixins:[o["a"]],data:function(){var e=this;return{tabIndex:"0",loaded:[!1,!1,!1],loading:[!1,!1],value1:{type:"dict",code:null,attach:[]},value2:{type:"db",code:null,attach:[]},value3:"",treeData1:[],treeData2:[],defaultCheckedKey1:"",defaultCheckedKey2:"",tablePost1:function(t,n){e.$http.get("dict/getList/"+t).done((function(e){e.success?n&&n(e.data):dsf.layer.message("请求异常！",!1)}))},tablePost2:function(t,n){e.$http.get("meta/tree/dbSource",{rmId:t}).done((function(e){e.success?n&&n(e.data):dsf.layer.message("请求异常！",!1)}))}}},watch:{tabIndex:function(e){!this.loaded[e-1]&&this["postData"+e]&&this["postData"+e](),this.$set(this.loaded,parseInt(e)-1,!0)}},created:function(){this.currentData&&this.init(this.currentData)},methods:{init:function(e){var t=e.type,n=(e.attach,e.code);"static"===t?(n&&n.length?this.value3=n.map((function(e){return e.text===e.value?e.text:e.text+"|"+e.value})).join("\n"):this.value3="",this.tabIndex="3",this.$set(this.loaded,2,!0)):"dict"===t?(this.value1={type:t,attach:[],code:n},this.defaultCheckedKey1=n,this.tabIndex="1"):"db"===t&&(this.value2={type:t,attach:[],code:n},this.defaultCheckedKey2=n,this.tabIndex="2")},yes:function(){if("3"===this.tabIndex){var e=this.value3.trim().split("\n");return{type:"static",code:e.map((function(e){return e=e.split("|"),{text:e[0],value:e[1]||e[0]}}))}}var t=this["value"+this.tabIndex];return delete t.attach,t},postData1:function(){var e=this;this.$set(this.loading,0,!0),this.$http.get("/rm/list/dataDic").done((function(t){t.success?e.treeData1=t.data.map((function(t){return e.dataFormat1(t)})):dsf.layer.message("请求异常！",!1)})).always((function(){e.$set(e.loading,0,!1)}))},postData2:function(){var e=this;this.$set(this.loading,1,!0),this.$http.get("/rm/list/ds",{namespace:""}).done((function(t){t.success?e.treeData2=t.data.map((function(t){return e.dataFormat2(t)})):dsf.layer.message("请求异常！",!1)})).always((function(){e.$set(e.loading,1,!1)}))},dataFormat1:function(e){var t=this,n=e.name,a=e.dsfa_rm_id,i=e.type_value,o=e.children,s={label:n,ID:a,nocheck:"5"!==i,iconSkin:""};return o?s.children=o.map((function(e){return t.dataFormat1(e)})):s.nocheck&&(s.iconSkin="_special"),s},dataFormat2:function(e){var t=this,n=e.name,a=e.ID,i=e.type_value,o=e.children,s={label:n,ID:a,nocheck:"3"!==i&&"8"!==i,iconSkin:""};return o?s.children=o.map((function(e){return t.dataFormat2(e)})):s.nocheck&&(s.iconSkin="_special"),s}}},l=r,c=n("2877"),u=Object(c["a"])(l,a,i,!1,null,null,null);t["default"]=u.exports},eb86:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-data-select",staticStyle:{height:"100%",overflow:"auto"}},[n("dsf-tree-select",{attrs:{"tree-data":e.treeData,loading:e.loading[0],"default-checked-key":e.defaultCheckedKey,multiple:e.multiple,"search-control":e.searchControl,theme:e.theme,"node-key":"ID","node-name":"label","default-expand-all":""},on:{"choose-key":e.chooseKey,"choose-node":e.chooseNode}})],1)},i=[],o=(n("d81d"),n("b0c0"),n("4795"),n("b45c")),s={name:"DesDbDataSelect",components:{DsfTreeSelect:o["default"]},props:{value:{type:Object,default:function(){return{key:null,node:null}}},theme:{type:String,default:"theme2"},searchControl:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1}},data:function(){return{loading:!1,treeData:[],defaultCheckedKey:"",node:null}},created:function(){this.initValue(),this.postData(),this.value.key&&(this.defaultCheckedKey=this.value.key||"")},methods:{initValue:function(){this.multiple?this.value.key&&"array"!==dsf.type(this.value.key)&&this.updateValue({key:[this.value.key],node:[this.value.node]}):this.value.key&&"array"===dsf.type(this.value.key)&&this.updateValue({key:this.value.key[0],node:this.value.node[0]})},postData:function(){var e=this;this.loading=!0,this.$http.get("/rm/list/ds",{namespace:""}).done((function(t){t.success?e.treeData=t.data.map((function(t){return e.dataFormat(t)})):dsf.layer.message("请求异常！",!1)})).always((function(){e.loading=!1}))},dataFormat:function(e){var t=this,n=e.name,a=e.ID,i=e.type_value,o=e.children,s={label:n,ID:a,nocheck:"3"!==i&&"8"!==i,iconSkin:""};return o?s.children=o.map((function(e){return t.dataFormat(e)})):s.nocheck&&(s.iconSkin="_special"),s},chooseKey:function(e){var t=this;setTimeout((function(){t.updateValue({key:e,node:t.node})}),20)},chooseNode:function(e){this.node=e},updateValue:function(e){this.$emit("input",e),this.$emit("change",e)}}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,"e4afcb56",null);t["default"]=c.exports},ec6d:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:!0}},[n("el-table-column",{attrs:{prop:"code",label:"标识",width:"100"}}),n("el-table-column",{attrs:{prop:"name",label:"描述"}}),n("el-table-column",{attrs:{prop:"typeValue",label:"数据类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{on:{change:function(n){return e.typeChange(t.row,n)}},model:{value:t.row.typeValue,callback:function(n){e.$set(t.row,"typeValue",n)},expression:"scope.row.typeValue"}},e._l(e.getType(),(function(e){return n("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})})),1)]}}])}),n("el-table-column",{attrs:{prop:"length",label:"数据长度"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"无"},model:{value:t.row.length,callback:function(n){e.$set(t.row,"length",n)},expression:"scope.row.length"}})]}}])}),n("el-table-column",{attrs:{prop:"defaultValue",label:"默认值"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"无"},model:{value:t.row.defaultValue,callback:function(n){e.$set(t.row,"defaultValue",n)},expression:"scope.row.defaultValue"}})]}}])}),n("el-table-column",{attrs:{prop:"encrypt",label:"加密"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{model:{value:t.row.encrypt,callback:function(n){e.$set(t.row,"encrypt",n)},expression:"scope.row.encrypt"}})]}}])}),n("el-table-column",{attrs:{prop:"pinyin",label:"拼音"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{model:{value:t.row.pinyin,callback:function(n){e.$set(t.row,"pinyin",n)},expression:"scope.row.pinyin"}})]}}])})],1)},i=[],o=n("5196"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["default"]=l.exports},ecb4:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"event-setting"},[n("div",{staticClass:"left"},[n("MonacoEditor",{ref:"editor",attrs:{language:e.language},on:{mounted:e.editorLoaded}})],1),n("div",{staticClass:"right"},[n("el-collapse",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.list,(function(t,a){return n("el-collapse-item",{key:a,attrs:{title:t.title,name:a}},[n("SelectTree",{attrs:{"tree-data":t.tree,"hide-checkbox":!0},on:{change:e.change}})],1)})),1)],1)])},i=[],o=n("2909"),s=n("3835"),r={name:"EventSetting",props:{code:{type:String,default:""},language:{type:String,default:"javascript"},isEvent:{type:Boolean,default:function(){return!1}}},data:function(){return{activeName:[0],list:[{title:"上下文",tree:[]},{title:"公用函数",tree:[]}]}},created:function(){this.init()},mounted:function(){},methods:{getContent:function(){var e;return e="html"==this.language?dsf.escapeFilter(this.$refs.editor.getContent()):this.$refs.editor.getContent(),this.isEvent?{Expression:e}:e},editorLoaded:function(){var e=this.code;"html"==this.language&&(e=dsf.unescapeHTML(e)),this.$refs.editor.setContent(e)},init:function(){var e=this;this.$http.all([this.$http.get("./static/pd_other/context.json"),this.$http.get("./static/pd_other/utilityFunction.json")]).then((function(t){var n,a,i=Object(s["a"])(t,2),r=i[0].Context,l=i[1].Function;(n=e.list[0].tree).push.apply(n,Object(o["a"])(r)),(a=e.list[1].tree).push.apply(a,Object(o["a"])(l))})).catch((function(e){console.log(e)}))},change:function(e){e&&e.Key&&this.$refs.editor.insertContent(e.Key)}}},l=r,c=(n("c39a"),n("2877")),u=Object(c["a"])(l,a,i,!1,null,"b34714e0",null);t["default"]=u.exports},edf2:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:!0}},[n("el-table-column",{attrs:{label:"",width:"35"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-radio",{attrs:{label:t.row._id},model:{value:e.radioId,callback:function(t){e.radioId=t},expression:"radioId"}})]}}])}),n("el-table-column",{attrs:{label:"规则名称"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(" "+e._s(n["dsfa_number_rule.name"])+" ")]}}])})],1)},i=[],o=n("2d0f"),s={name:"DesNumeration",mixins:[o["a"]],data:function(){return{tableData:[],loading:!1,param:{pageNum:1,pageSize:1e3,namespace:"dsfa.number.rule",pageName:"list"},radioId:this.currentData}},created:function(){this.initData()},methods:{initData:function(){var e=this;this.loading=!0,this.$http.get("meta/list/data",this.param).done((function(t){t.success?e.tableData=t.data:dsf.layer.message(t.message||"服务器异常",!1)})).error((function(e){dsf.layer.message(e.message||"服务器异常",!1)})).always((function(){e.loading=!1}))},yes:function(){return this.radioId||dsf.layer.message("请选择一个编号规则",!1),this.radioId}}},r=s,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},f08c:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100%"}},[n("el-aside",{staticStyle:{overflow:"auto",height:"100%"},attrs:{width:"25%"}},[n("div",{staticStyle:{overflow:"auto",height:"100%"}},[n("el-tree",{attrs:{data:e.treeData,props:e.defaultProps,"default-expand-all":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,i=t.data;return n("span",{staticClass:"custom-tree-node",on:{dblclick:function(t){return e.toList(a,i)}}},[n("i",{staticClass:"iconfont icon-biaodanzujian-shurukuang",staticStyle:{"margin-right":"5px"}}),n("span",[e._v(e._s(a.label))]),i.field?n("span",{staticStyle:{color:"red"}},[e._v("(字段:"+e._s(i.field)+")")]):e._e()])}}])})],1)]),n("el-main",{staticStyle:{padding:"0px"}},[n("el-container",[n("el-main",{staticStyle:{"padding-top":"0px"}},[n("el-tabs",{attrs:{type:"card",addable:""},on:{"tab-add":e.tabAddHandler,"tab-remove":e.tabRemoveHandler},model:{value:e.currentRule,callback:function(t){e.currentRule=t},expression:"currentRule"}},e._l(e.rules,(function(t,a){return n("el-tab-pane",{key:a,attrs:{label:a,name:a,closable:"rule-1"!==a}},[n("el-table",{attrs:{data:t,stripe:"","highlight-current-row":!0,"row-key":e.getRowId,"tree-props":{children:"children"}}},[n("el-table-column",{attrs:{width:"30",align:"center"}}),n("el-table-column",{attrs:{label:"元数据代码",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.table)+"."+e._s(t.row.code))])]}}],null,!0)}),n("el-table-column",{attrs:{prop:"currentValueAttribute",label:"值属性",width:"150"}}),n("el-table-column",{attrs:{label:"描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"相关文字描述"},model:{value:t.row.caption,callback:function(n){e.$set(t.row,"caption",n)},expression:"scope.row.caption"}})]}}],null,!0)}),n("el-table-column",{attrs:{label:"格式化"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"服务器端格式化函数"},model:{value:t.row.format,callback:function(n){e.$set(t.row,"format",n)},expression:"scope.row.format"}})]}}],null,!0)}),n("el-table-column",{attrs:{label:"操作",width:"130px",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[["enum"==t.row.searchType?n("dsf-button",{attrs:{title:"选项配置",size:"small","btn-style":"icon-text",icon:"shezhi"},on:{click:function(n){return n.stopPropagation(),e.settingEnumItems(t.row)}}}):e._e(),n("dsf-button",{attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"},on:{click:function(n){return n.stopPropagation(),e.remove(t.row)}}}),n("dsf-button",{attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"},on:{click:function(n){return n.stopPropagation(),e.up(t.row)}}}),n("dsf-button",{attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"},on:{click:function(n){return n.stopPropagation(),e.down(t.row)}}})]]}}],null,!0)})],1)],1)})),1)],1)],1)],1)],1)},i=[],o=n("f0fe"),s=o["a"],r=n("2877"),l=Object(r["a"])(s,a,i,!1,null,null,null);t["default"]=l.exports},f09d:function(e,t,n){},f0fe:function(e,t,n){"use strict";(function(e){n("7db0"),n("c740"),n("c975"),n("d81d"),n("b64b"),n("e25e"),n("ac1f"),n("5319"),n("96cf");var a=n("1da1"),i=n("2d0f");t["a"]={name:"DesExportOptions",mixins:[i["a"]],data:function(){return{currentRule:"",rules:{"rule-1":[]},treeData:[],defaultProps:{children:"children",label:"name"},options:[{label:"选项枚举",value:"enum",defaultField:["value"]},{label:"文本",value:"text"},{label:"日期时间",value:"datetime"}]}},created:function(){},mounted:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.owner.$$getComponent(),a=n.$options.design.metadata.create.call(n),a&&!(a.length<=1)){t.next=5;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中,如果是子表请保存布局后再试",!1),t.abrupt("return");case 5:if(i=a[1].metadata.at,i){t.next=9;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中,如果是子表请保存布局后再试",!1),t.abrupt("return");case 9:return t.next=11,e.getTreeData(a[1].metadata,a[1].metadata.rm_type||3);case 11:e.treeData=t.sent,"array"==dsf.type(e.currentData)?e.rules={"rule-1":e.currentData}:e.rules=e.currentData,o=Object.keys(e.rules),e.currentRule=o[0]?o[0]:"rule-1";case 15:case"end":return t.stop()}}),t)})))()},methods:{getRowId:function(e){var t=e.id;return t},getParentRow:function(t){var n=e.find(this.tableData,(function(e){return e.id==t.parent}));return n||{}},toList:function(t,n){if(n.field){var a=this.rules[this.currentRule],i=e.findIndex(a,(function(e){return e.id==n.id}));if(i<0){var o={id:n.id,table:n.id.substr(0,n.id.indexOf(".")),code:n.metadata.code,valueAttributes:e.map(n.metadata.valueAttributes,"code"),currentValueAttribute:n.metadata.valueAttributes.length>1?n.code:n.metadata.valueAttributes[0].code,caption:n.fieldCaption,format:""};a.push(o)}else dsf.layer.pc.message("已经存在，请勿重复添加",!1)}},getMaxRule:function(){var t=Object.keys(this.rules),n=0;return e.each(t,(function(e){var t=e.replace(/[^\d]/g,""),a=parseInt(t);a>n&&(n=a)})),n},tabAddHandler:function(){var e=this.getMaxRule();this.$set(this.rules,"rule-"+(e+1),[]),e=this.getMaxRule(),this.currentRule="rule-"+e},tabRemoveHandler:function(e){var t=this;dsf.layer.confirm("是否要删除"+e).then((function(){t.$delete(t.rules,e);var n=t.getMaxRule();t.currentRule="rule-"+n})).catch((function(){}))},getTreeData:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function a(){var i,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=[],"8"!=t){a.next=8;break}return o={rmId:e.rmId},a.next=5,n.$webAPI.getDbSourceFieldsTree(o);case 5:i=a.sent,a.next=13;break;case 8:if("3"!=t){a.next=13;break}return s={namespace:e.at},a.next=12,n.$webAPI.getMetaDataFieldsTree(s);case 12:i=a.sent;case 13:return a.abrupt("return",i);case 14:case"end":return a.stop()}}),a)})))()},remove:function(e){var t=this.rules[this.currentRule];dsf.array.remove(t,e)},up:function(t){var n=this.rules[this.currentRule],a=e.findIndex(n,(function(e){return e==t}));if(a>0){var i=n[a-1];this.$set(n,a-1,t),this.$set(n,a,i)}},down:function(t){var n=this.rules[this.currentRule],a=e.findIndex(n,(function(e){return e==t}));if(a<n.length-1){var i=n[a+1];this.$set(n,a+1,t),this.$set(n,a,i)}},yes:function(){var e=this.rules;return e}}}}).call(this,n("2ef0"))},f107:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.popShow,expression:"popShow"}],staticClass:"seat-pop-box",style:e.sty},[n("ul",[e.switchNumSet?n("li",{on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.popDialog(t)}}},[e._v("快速填充序号")]):n("li",{on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.popDialog(t)}}},[e._v("方阵组")])]),n("el-dialog",{attrs:{visible:e.dialogVisible,title:"信息",width:"300px",modal:!1,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{attrs:{model:e.form,size:"small"}},[e.switchNumSet?[n("el-form-item",{attrs:{label:"排序开始位置"}},[n("el-radio-group",{model:{value:e.form.orderPosition,callback:function(t){e.$set(e.form,"orderPosition",t)},expression:"form.orderPosition"}},[n("el-radio",{attrs:{label:"lt"}},[e._v("左上角")]),n("el-radio",{attrs:{label:"rt"}},[e._v("右上角")]),n("el-radio",{attrs:{label:"rb"}},[e._v("右下角")]),n("el-radio",{attrs:{label:"lb"}},[e._v("左下角")])],1)],1),n("el-form-item",{attrs:{label:"开始序号"}},[n("el-input-number",{attrs:{precision:0,controls:!1,min:1},model:{value:e.form.orderBegin,callback:function(t){e.$set(e.form,"orderBegin",t)},expression:"form.orderBegin"}})],1)]:[n("el-form-item",{attrs:{label:"列数"}},[n("el-input-number",{attrs:{precision:0,controls:!1,min:1},model:{value:e.form.colNum,callback:function(t){e.$set(e.form,"colNum",t)},expression:"form.colNum"}})],1),n("el-form-item",{attrs:{label:"个数"}},[n("el-input-number",{attrs:{precision:0,controls:!1,min:1},model:{value:e.form.total,callback:function(t){e.$set(e.form,"total",t)},expression:"form.total"}})],1)],n("el-form-item",{staticStyle:{"text-align":"right"}},[e.switchNumSet?n("el-button",{on:{click:e.quickOrder}},[e._v("确定")]):n("el-button",{on:{click:e.setGroup}},[e._v("创建")])],1)],2)],1)],1)},i=[],o=(n("4160"),n("159b"),n("5530")),s=n("2f62"),r=n("5032"),l=n("76af"),c={name:"SeatPop",data:function(){return{dialogVisible:!1,form:{colNum:void 0,total:void 0,orderPosition:"lt",orderBegin:1},seat:{},position:{},popShow:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(s["b"])("seatDesign",["switchNumSet"])),{},{sty:function(){return{left:this.position.x+"px",top:this.position.y+"px"}}}),mounted:function(){var e=this;r["a"].on(l["a"].SEAT_POP,(function(t){"group"!==t.seat.type&&e.switchNumSet?e.popShow=!1:(Object.assign(e,t),e.form.orderBegin=t.maxOrderNum+1,e.popShow=!0,"group"===t.seat.type?(e.form.colNum=t.seat.cols,e.form.total=t.seat.member.length):(e.form.colNum=void 0,e.form.total=void 0))})),r["a"].listen(l["a"].BODY_EMPTY_CLICK,(function(){e.popShow=!1}))},methods:{popDialog:function(e){e.stopPropagation(),e.preventDefault(),this.popShow=!0,this.dialogVisible=!0},setGroup:function(){"group"!==this.seat.type?this.setGroupBySeat():this.setGroupByGroup()},setGroupBySeat:function(){var e=this.form,t=e.total,n=e.colNum;if(!t||!n||1===t)return this.dialogVisible=!1,this.popShow=!1,!1;var a=Math.ceil(t/n),i=dsf.uuid();this.seat.parentId=i,this.seat.belong="group";var s=u.call(this,n,t,this.seat),c=this.seat.width*n,d=this.seat.height*a,h=Object(o["a"])(Object(o["a"])({},this.seat),{},{id:i,type:"group",cols:n,rows:a,width:c,height:d,memberType:this.seat.type,member:s,isFrozenSty:!1,isFrozenMemberSty:!1});this.$store.commit("seatDesign/addGroup2Panel",h),r["a"].emit(l["a"].KEY_DELETE),this.dialogVisible=!1,this.popShow=!1},setGroupByGroup:function(){var e=this.form,t=e.total,n=e.colNum,a=Math.ceil(t/n),i=this.seat.member[0];if(i.parentId=null,i.belong=null,1===t){var s=Object(o["a"])(Object(o["a"])({},i),{},{left:this.seat.left,top:this.seat.top,angle:this.seat.angle,stateList:this.seat.stateList,isFrozenSty:!1});this.$store.commit("seatDesign/addSeat2Panel",s)}else if(t>1){var c=dsf.uuid();i.parentId=c,i.belong="group";var d=u.call(this,n,t,i),h=i.width*n,p=i.height*a,f=Object(o["a"])(Object(o["a"])({},this.seat),{},{id:c,cols:n,rows:a,width:h,height:p,member:d,isFrozenSty:!1,isFrozenMemberSty:!1});this.$store.commit("seatDesign/addGroup2Panel",f)}r["a"].emit(l["a"].KEY_DELETE),this.dialogVisible=!1,this.popShow=!1},quickOrder:function(){var e=this;"lt"===this.form.orderPosition&&this.seat.member.forEach((function(t){t.seatNum==t.seatTxt&&(t.seatTxt=e.form.orderBegin),t.seatNum=e.form.orderBegin,e.form.orderBegin+=1})),r["a"].emit(l["a"].AFTER_QUICK_ORDER),this.dialogVisible=!1,this.popShow=!1}}};function u(e,t,n){for(var a=[],i=0;i<t;i++){var s=Math.floor(i/e),r=i%e,l=r*n.width,c=s*n.height,u=Object(o["a"])(Object(o["a"])({},n),{},{id:dsf.uuid(),left:l,top:c,colIndex:r,rowIndex:s,angle:0});a.push(u)}return a}var d=c,h=n("2877"),p=Object(h["a"])(d,a,i,!1,null,null,null);t["a"]=p.exports},f1d2:function(e,t,n){"use strict";n("0342")},f4a8:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"control-filter-tree"},[n("dsf-tree-select",{attrs:{"tree-data":e.treeData,"node-key":"dsfa_rm_id","node-name":"name",loading:e.treeLoading,"default-checked-key":e.defaultCheckedKey,"search-control":"","default-expand-all":""},on:{"choose-node":function(t){e.radioData=t}}})],1)},i=[],o=(n("d3b7"),n("2d0f")),s=n("b45c"),r={name:"DesBusinessComponent",components:{DsfTreeSelect:s["default"]},mixins:[o["a"]],data:function(){return{treeData:[],treeLoading:!1,radioData:null,defaultCheckedKey:""}},created:function(){this.getDesignCtrl()},methods:{getDesignCtrl:function(){var e=this;this.loading=!0;var t="/rm/list/bc";this.$http.get(t).done((function(t){t.success?e.treeData=t.data:dsf.layer.message("业务组件获取"+t.message,!1)})).error((function(e){dsf.layer.message(e.message,!1)})).finally((function(){e.loading=!1}))}}},l=r,c=n("2877"),u=Object(c["a"])(l,a,i,!1,null,null,null);t["default"]=u.exports},faf1:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-main",{staticStyle:{padding:"0px"}},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"130px"}},[n("el-form-item",{attrs:{label:"字体大小"}},[n("el-select",{model:{value:e.form.fontSize,callback:function(t){e.$set(e.form,"fontSize",t)},expression:"form.fontSize"}},[n("el-option",{attrs:{label:"1号字(34px)",value:"ds-font1"}}),n("el-option",{attrs:{label:"2号字(24px)",value:"ds-font2"}}),n("el-option",{attrs:{label:"3号字(18px)",value:"ds-font3"}}),n("el-option",{attrs:{label:"4号字(16px)",value:"ds-font4"}}),n("el-option",{attrs:{label:"5号字(14px)",value:"ds-font5"}}),n("el-option",{attrs:{label:"6号字(12px)",value:"ds-font6"}})],1)],1),n("el-form-item",{attrs:{label:"是否加粗"}},[n("el-radio-group",{model:{value:e.form.bold,callback:function(t){e.$set(e.form,"bold",t)},expression:"form.bold"}},[n("el-radio",{attrs:{label:!0}},[e._v("是")]),n("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),n("el-form-item",{attrs:{label:"字体颜色"}},[n("el-input",{attrs:{placeholder:"#606266"},model:{value:e.form.color,callback:function(t){e.$set(e.form,"color",t)},expression:"form.color"}})],1),n("el-form-item",{attrs:{label:"高度"}},[n("el-input",{attrs:{placeholder:"auto"},model:{value:e.form.height,callback:function(t){e.$set(e.form,"height",t)},expression:"form.height"}})],1),n("el-form-item",{attrs:{label:"行间距"}},[n("el-select",{model:{value:e.form.lineHeight,callback:function(t){e.$set(e.form,"lineHeight",t)},expression:"form.lineHeight"}},[n("el-option",{attrs:{label:"默认",value:"normal"}}),n("el-option",{attrs:{label:"1.2倍",value:"1.2em"}}),n("el-option",{attrs:{label:"1.5倍",value:"1.5em"}}),n("el-option",{attrs:{label:"2倍",value:"2em"}})],1)],1),n("el-form-item",{attrs:{label:"文字最大显示行数"}},[n("el-input-number",{attrs:{"controls-position":"right",min:0,max:5},model:{value:e.form.lineNum,callback:function(t){e.$set(e.form,"lineNum",t)},expression:"form.lineNum"}}),n("span",{staticStyle:{display:"inline-block","margin-left":"10px",color:"#c0c0c0"}},[e._v(" (0表示不省略且根据内容自动撑开容器)")])],1),n("el-form-item",{attrs:{label:"水平对齐方式"}},[n("el-select",{model:{value:e.form.align,callback:function(t){e.$set(e.form,"align",t)},expression:"form.align"}},[n("el-option",{attrs:{label:"居左",value:"left"}}),n("el-option",{attrs:{label:"居中",value:"center"}}),n("el-option",{attrs:{label:"居右",value:"right"}})],1)],1),n("el-form-item",{attrs:{label:"垂直对齐方式"}},[n("el-select",{model:{value:e.form.verticalAlign,callback:function(t){e.$set(e.form,"verticalAlign",t)},expression:"form.verticalAlign"}},[n("el-option",{attrs:{label:"居上",value:"top"}}),n("el-option",{attrs:{label:"居中",value:"middle"}}),n("el-option",{attrs:{label:"居下",value:"bottom"}})],1)],1),n("el-form-item",{attrs:{label:"边距"}},[n("div",{staticStyle:{display:"inline-block","margin-left":"10px"}},[e._v(" 上： "),n("el-input-number",{staticStyle:{width:"90px"},attrs:{"controls-position":"right",min:0,max:20},model:{value:e.form.paddingTop,callback:function(t){e.$set(e.form,"paddingTop",t)},expression:"form.paddingTop"}})],1),n("div",{staticStyle:{display:"inline-block","margin-left":"10px"}},[e._v(" 右："),n("el-input-number",{staticStyle:{width:"90px"},attrs:{"controls-position":"right",min:0,max:20},model:{value:e.form.paddingRight,callback:function(t){e.$set(e.form,"paddingRight",t)},expression:"form.paddingRight"}})],1),n("div",{staticStyle:{display:"inline-block","margin-left":"10px"}},[e._v(" 下："),n("el-input-number",{staticStyle:{width:"90px"},attrs:{"controls-position":"right",min:0,max:20},model:{value:e.form.paddingBottom,callback:function(t){e.$set(e.form,"paddingBottom",t)},expression:"form.paddingBottom"}})],1),n("div",{staticStyle:{display:"inline-block","margin-left":"10px"}},[e._v(" 左："),n("el-input-number",{staticStyle:{width:"90px"},attrs:{"controls-position":"right",min:0,max:20},model:{value:e.form.paddingLeft,callback:function(t){e.$set(e.form,"paddingLeft",t)},expression:"form.paddingLeft"}})],1)])],1)],1)],1)},i=[],o=n("017e"),s=o["a"],r=(n("0e5e"),n("2877")),l=Object(r["a"])(s,a,i,!1,null,"03bc4982",null);t["default"]=l.exports}}]);
//# sourceMappingURL=dsf-designer.js.map