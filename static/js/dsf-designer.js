/*! Build time : Mon Sep 21 2020 21:58:01 GMT+0800 (香港标准时间) */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dsf-designer"],{"0165":function(e,t,n){},"01c2":function(e,t,n){},"027f":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-question-formwrap"},[n("div",{staticClass:"example"},[n("el-form",{attrs:{"label-position":"top"}},[n("el-form-item",{attrs:{prop:"value",rules:e.exampleRules},scopedSlots:e._u([{key:"label",fn:function(){return[n("span",{domProps:{innerHTML:e._s(e.example)}})]},proxy:!0}])})],1)],1),n("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.rules,"label-width":"auto","label-position":"left"}},[n("el-row",{attrs:{gutter:15}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{prop:"questionBody","label-width":"0"}},[n("el-input",{attrs:{placeholder:"请输入题干"},model:{value:e.form.questionBody,callback:function(t){e.$set(e.form,"questionBody",t)},expression:"form.questionBody"}})],1)],1),n("el-col",{staticClass:"alert",attrs:{span:24}},[n("div",[e._v("注: 题干中输入()系统自动识别为填空内容")]),n("el-button",{on:{click:e.addCode}},[e._v("插入填空符")])],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"isNumber",label:"输入框是否数字:"}},[n("el-switch",{model:{value:e.form.isNumber,callback:function(t){e.$set(e.form,"isNumber",t)},expression:"form.isNumber"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"readOnly",label:"本题不允许填写:"}},[n("el-switch",{model:{value:e.form.readOnly,callback:function(t){e.$set(e.form,"readOnly",t)},expression:"form.readOnly"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"visible",label:"本题是否显示:"}},[n("el-switch",{model:{value:e.form.visible,callback:function(t){e.$set(e.form,"visible",t)},expression:"form.visible"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"required",label:"必填标识:"}},[n("el-switch",{model:{value:e.form.required,callback:function(t){e.$set(e.form,"required",t)},expression:"form.required"}})],1)],1),n("el-col",{attrs:{span:24}},[n("div",{staticClass:"ljsz"},[n("span",{staticClass:"label"},[e._v("逻辑设置:")]),n("span",{staticClass:"btn",on:{click:e.showRela}},[e._v("题目关联")])])])],1)],1)],1)},i=[],o=(n("99af"),n("ac1f"),n("5319"),n("b773")),s={mixins:[o["a"]],props:["owner"],data:function(){return{form:{questionBody:"请输入题干",isNumber:!1,readOnly:!1,visible:!0,required:!0},rules:{questionBody:[{required:!0,message:"请输入题干"}]}}},computed:{example:function(){var e=this.form.questionBody.replace(/\(\)|\（\）/g,'\n          <input type="text" placeholder="请输入" class="ds-qi-fill">\n        ');return"".concat(this.owner.questionIndex,".").concat(e)},exampleRules:function(){return this.form.required?[{required:!0,trigger:"change"}]:null}},methods:{addCode:function(){this.form.questionBody+="()"}}},l=s,r=n("2877"),c=Object(r["a"])(l,a,i,!1,null,null,null);t["a"]=c.exports},"0432":function(e,t,n){"use strict";(function(e,a){n("7db0"),n("4160"),n("ac1f"),n("5319"),n("159b");var i=n("8050"),o=n("566b"),s=n("027f"),l=n("9538"),r=n("5610"),c=n("5d9f"),u=n("b499"),d=n("f0e3");t["a"]={name:"DesQuestionConfig",mixins:[i["a"]],data:function(){return{dialogVisible:!1,logicVisible:!1,relaForm:{relaIndex:"no-rela",relaCheckBox:[],relaRadio:""},question:{},prevObjs:[],relaItem:null,nextObjs:[],logic:{}}},computed:{componentId:function(){var e=null;if(!this.owner.ctrlType)return e;switch(this.owner.ctrlType.toLowerCase().replace("dsf.","")){case"qiqa":e=o["a"];break;case"qirate":e=u["a"];break;case"qifill":e=s["a"];break;case"qicheckbox":e=l["a"];break;case"qiradio":e=c["a"];break;case"qihellomsg":e=r["a"];break;case"qislider":e=d["a"]}return e},property:function(){return{questionIndex:this.owner.questionIndex,questionBody:this.owner.questionBody,required:this.owner.required,readOnly:this.owner.readOnly,items:this.owner.items,visible:this.owner.visible,layout:this.owner.layout,mustCheckNum:this.owner.mustCheckNum,maxCheckNum:this.owner.maxCheckNum,isTextArea:this.owner.isTextArea,maxLength:this.owner.maxLength,isOther:this.owner.isOther,showText:this.owner.showText,starLength:this.owner.starLength,min:this.owner.min,max:this.owner.max,minText:this.owner.minText,maxText:this.owner.maxText,logicRela:this.owner.logicRela,logic:this.owner.logic}}},methods:{validate:function(){var e=!1;return this.$refs.form.form?this.$refs.form.$refs.form.validate((function(t){e=t})):e=!0,e},yes:function(){var e;return this.$refs.form.form?(e=JSON.parse(JSON.stringify(this.$refs.form.form)),e.items&&(this.owner.metadata.dataSource={type:"static",code:e.items})):e={questionBody:this.$refs.form.$ue.getContent()},Object.assign(this.owner,e),null},showDialog:function(t){if("rela"===t){if(this.getPrevRelaQuestions(),!window._.isEmpty(this.owner.logicRela)){var n=this.owner.logicRela.Q;this.relaForm.relaIndex=this.owner.logicRela.Q,this.relaItem=window._.find(this.prevObjs,(function(e){if(e.questionIndex==n)return e})),this.relaForm.relaRadio=this.owner.logicRela.trig[0],this.relaForm.relaCheckBox=window._.clone(this.owner.logicRela.trig)}this.dialogVisible=!0}else if("logic"===t){var a={},i=this;window._.forEach(this.owner.items,(function(t){a[t.value]=e.isUndefined(i.owner.logic[t.value])?"":i.owner.logic[t.value]})),this.logic=a,this.getNextQuestions(),this.logicVisible=!0}},closeRelaDialog:function(){this.dialogVisible=!1},resetRela:function(){this.relaItem=null,this.prevObjs=[],this.relaForm.relaCheckBox=[],this.relaForm.relaRadio="",this.relaForm.relaIndex="no-rela"},setRela:function(){if("no-rela"!=this.relaForm.relaIndex){var e=null;"dsf.qiradio"==this.relaItem.ctrlType?""==this.relaForm.relaRadio?dsf.layer.message("请选择需要关联的选项",!1):e=[this.relaForm.relaRadio]:0===this.relaForm.relaCheckBox.length?dsf.layer.message("请选择需要关联的选项",!1):e=window._.clone(this.relaForm.relaCheckBox),this.$set(this.owner,"logicRela",{Q:this.relaForm.relaIndex,trig:e})}else this.$set(this.owner,"logicRela",{});this.dialogVisible=!1},chooseRela:function(e){this.relaItem=window._.find(this.prevObjs,(function(t){if(t.questionIndex==e)return t})),this.relaForm.relaRadio="",this.relaForm.relaCheckBox=[]},getPrevRelaQuestions:function(){var e=a(this.owner.$el).prevAll().find(".ds-question-item[ctrl_type='dsf.qiradio'],.ds-question-item[ctrl_type='dsf.qicheckbox']"),t=[];window._.forEach(e,(function(e){t.push(e.__vue__)})),this.prevObjs=t},getNextQuestions:function(){var e=a(this.owner.$el).nextAll().find(".ds-question-item:not(.ds-hello)"),t=[];window._.forEach(e,(function(e){e.__vue__.questionIndex&&t.push(e.__vue__.questionIndex)})),this.nextObjs=t},setLogic:function(){var e={};window._.forEach(this.logic,(function(t,n){""!=t&&(e[n]=t)})),this.$set(this.owner,"logic",e),this.logicVisible=!1},resetLogic:function(){this.logic={}},closeLogicDialog:function(){this.logicVisible=!1}}}}).call(this,n("2ef0"),n("1157"))},"04a8":function(e,t,n){"use strict";(function(e,a){n("99af"),n("a623"),n("4de4"),n("7db0"),n("c740"),n("4160"),n("c975"),n("a15b"),n("d81d"),n("a434"),n("b0c0"),n("d3b7"),n("ac1f"),n("5319"),n("1276"),n("498a"),n("159b"),n("4795"),n("96cf");var i=n("1da1"),o=n("2f1f"),s=n("38af"),l=(n("dfde"),12),r=2;function c(){var e=this;a(".ds-tool-item").draggable({addClasses:!1,appendTo:".ds-designer",distance:10,revert:"invalid",cursor:"default",containment:"window",cursorAt:{left:-20,top:-20},helper:function(e){var t=a(e.currentTarget),n=t.get(0).__vue__.data,i=t.clone();return i.addClass("proxy"),i.data("data",{state:"add",attributes:n}),i},start:function(t){e.contextMenuClose(),dsf.designer.broadcast(e,"clearContextMemuHandler",t,null),dsf.designer.broadcast(e,"clearMouseDownHandler",t,null)},stop:function(){e.dragEnd()}})}function u(){var e=this;a(".designer-page").droppable({tolerance:"pointer",drop:function(t,n){var i=n.helper.data("data"),o=a(e.dragProxy_el),s=o.closest("[slot-name]"),l=s.attr("slot-name");if(l){var r=dsf.designer.getParentControl(o);r&&e.dropHandler(t,r,l,i)}e.dragEnd()},over:function(){a(".designer-page").on("mousemove.tooldrag",(function(t){e.dragMouseMoveHandler(t),t.preventDefault()}))},out:function(){e.dragEnd()}})}function d(e,t,n,i){var o=a(this.dragProxy_el).next(".designer-ctrl-proxy");1==this.dragProxy.show&&f.call(this,o.length?o:null,t,n,i)}function h(){a(".designer-page").off("mousemove.tooldrag"),a(this.dragProxy_el).appendTo(this.$el),this.dragProxy.show=!1}function p(t){var n=[],a=function e(t){t.forEach((function(t){t.children?e(t.children):n.push(t)}))};return a(t),e.uniqBy(n,"dsfa_rm_id")}function f(t,n,a,i){var o=this,s=n._isVue?n:n.get(0).__vue__,l=s,r=null,c=null;if(t){var u=t.get(0).__vue__,d=e.find(l.slots,(function(e){return e.name===a}));r=e.findIndex(d.controls,(function(e){return e===u.__context__.props}))}if("add"==i.state){if("control"==i.attributes.type)c=k(i.attributes.data.code,{},this.mobile),c.metadata&&(c.metadata.level=0),c&&this.addControl(l,a,c,r);else if("metadata"==i.attributes.type){var h=i.attributes.data,p=null;p=h.currentControl?h.currentControl.value:h.controls[0].value,p.indexOf("dsf.")<0&&(p="dsf."+p),c=k(p,{},this.mobile),c.metadata.id=h.id,c.metadata.at=h.at,c.metadata.code=h.code,c.metadata.name=h.name,c.metadata.defaultValue=h.defaultValue,c.metadata.controls=h.controls,c.metadata.dataSource=h.dataSource,c.metadata.type=h.type,c.metadata.order=h.order,c.metadata.isFromMetaData=!0,c.metadata.isuser=!1,c.metadata.currentControl=c.metadata.controls[0],c.metadata.level=0,h.rmId&&(c.metadata.rmId=h.rmId),c.metadata.rm_type=i.attributes.group.type_value,c.caption=h.code,c.label=h.name,c&&this.addControl(l,a,c,r)}else if("business"==i.attributes.type){var f=i.attributes.data,m=JSON.parse(f.content);dsf.recursionComponentProps(m,(function(e){var t=dsf.createComponent(e.ctrlType,e);dsf.mix(e,t),e.designId=dsf.uuid(),e.isFormControl&&(e.isBusiness=!0)})),this.addControl(l,a,m,r)}}else i.component.$remove(),this.$nextTick((function(){i.attributes.metadata&&i.attributes.metadata.isuser&&delete i.attributes.metadata.isuser,o.addControl(l,a,i.attributes,r)}))}function m(e,t,n,a,i,o){return g.apply(this,arguments)}function g(){return g=Object(i["a"])(regeneratorRuntime.mark((function e(t,n,a,i,o,s){var l,r,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return l=t||"",r=n||"",c=a||"",u=dsf.designer.getLayoutPath(l,r,c,o,s),e.abrupt("return",this.$http.get(u,null,{responseType:"text"}));case 5:case"end":return e.stop()}}),e,this)}))),g.apply(this,arguments)}function y(e,t,n,a,i){return x.apply(this,arguments)}function x(){return x=Object(i["a"])(regeneratorRuntime.mark((function e(t,n,a,i,o){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=dsf.designer.getExtPath(t,n,a,i,o),e.abrupt("return",this.$http.get(s,null,{responseType:"text"}));case 2:case"end":return e.stop()}}),e,this)}))),x.apply(this,arguments)}function v(){var t=this,n=this.$refs.viewProxy;try{var a=dsf.designer.createViewMetaData(n);if(a.metadata&&!dsf.isEmptyObject(a.metadata)){var i=[],o=[];if(e.each(a.metadata,(function(e,t){var n=t.split("."),a=n[0];n[1]&&n[1];if(e.ref.isFormControl&&!e.ref.isOneToMany&&0==e.level){var s={ctrl:e.ref,source:a};dsf.array.ensure(o,a),i.push(s)}})),o.length>1){var s=this;return void dsf.layer.openDialog({title:"元数据修正",content:"DesMetaDataSource",params:{source:i,dict:o},btns:[{text:"确定",handler:function(t){var n=t.yes();e.each(n,(function(e,t){if(e.isChange){var n=e.ctrl;n.metadata.isuser=!0,n.metadata.id=e.mdkey.replace("_",".")+"."+n.metadata.code,n.metadata.at=e.mdkey.replace("_",".")}})),s.saveLayout()}},{text:"取消"}]})}}this.$nextTick((function(){B.call(t,n,a)}))}catch(r){var l="出现了未知的错误";"string"==dsf.type(r)&&(l=r),dsf.layer.pc.message(l,!1)}}function b(){var e=this;if(1==this.tpl){var t=this.$refs.viewProxy;dsf.designer.recursionLayoutTree(t,null,null,(function(e){e.metadata&&e.metadata.isFromMetaData&&(e.metadata_fullcode="")})),this.$nextTick((function(){M.call(e,t)}))}}function w(){var e=this;try{var t=this.$refs.viewProxy.$$getComponent();dsf.designer.createViewMetaData(t),this.$nextTick((function(){var n=dsf.designer.getLayoutInfo(t,!0);n=dsf.designer.controlToJson(n);var a="/",i='<script type="text/template" id="layout">\n'.concat(n,"\n<").concat(a,"script>");dsf.storage.session.set("layoutContent",i),window.open("./designer.html#"+(e.mobile?"/mobile":"/pc")+"/preview")}))}catch(a){var n="出现了未知的错误";"string"==dsf.type(a)?n=a:dsf.error(a),dsf.layer.pc.message(n,!1)}}function k(e,t,n){var a=dsf.designer.createComponent;n&&(a=dsf.designer.createMobileComponent);var i=dsf.mix(t,{designProxy:!0});return a(e,i)}function D(e){return _.apply(this,arguments)}function _(){return _=Object(i["a"])(regeneratorRuntime.mark((function t(n){var a,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=e.uniqBy(n,(function(e){return e.id})),t.next=4,$.call(this,n);case 4:a=t.sent,e.each(a,(function(e){j.call(i,e)})),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),dsf.error(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])}))),_.apply(this,arguments)}function C(e){return S.apply(this,arguments)}function S(){return S=Object(i["a"])(regeneratorRuntime.mark((function t(n){var a,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=e.uniqBy(n,(function(e){return e.id})),t.next=4,I.call(this,n);case 4:a=t.sent,e.each(a,(function(t){var a=t.data;a=e.filter(a||[],(function(t){return 3==t.type_value?e.map(n,"id").indexOf(t.ID)>=0:e.map(n,"id").indexOf(t.dsfa_rm_id)>=0})),e.each(a,(function(e){O.call(i,e)}))})),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),dsf.error(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])}))),S.apply(this,arguments)}function N(e){return L.apply(this,arguments)}function L(){return L=Object(i["a"])(regeneratorRuntime.mark((function t(n){var a,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,n=e.uniqBy(n,(function(e){return e.id})),a=[],!(n.length>0)){t.next=9;break}return t.next=6,T.call(this,n);case 6:a=t.sent,t.next=10;break;case 9:a=[];case 10:e.each(a.data,(function(e){E.call(i,e)})),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),dsf.error(t.t0);case 16:case"end":return t.stop()}}),t,this,[[0,13]])}))),L.apply(this,arguments)}function $(t){var n=e.map(t,(function(e){return e.id}));return this.$webAPI.getComponents(n).then((function(e){var t=e.data;return t}))}function I(e){for(var t=[],n=0;n<e.length;n++)"3"==e[n].type?t.push(this.$http.get("/rm/list/meta",{namespace:e[n].id})):"8"==e[n].type&&t.push(this.$http.get("/dbsource/rmId",{rmId:e[n].id}));return this.$http.all(t)}function T(t){var n=e.map(t,(function(e){return e.id}));return this.$webAPI.getBusinessComponets(n)}function O(t){var n=this,a=8==t.type_value?t.dsfa_rm_id:t.ID,i={id:a,title:t.name,type:t.type_value,items:[]};e.each(t.metadata,(function(e){var n={type:"metadata",name:e.name,data:e,group:t,id:e.id};8==t.type_value&&(n.rmId=t.dsfa_rm_id),i.items.push(n)}));var o=e.findIndex(this.useMetaGroup.groups,(function(e){return e.id==i.id}));o<0?this.useMetaGroup.groups.push(i):this.useMetaGroup.groups[o].items=i.items,this.$nextTick((function(){n.initToolDrag()}))}function E(t){var n=this,a={id:t.rmId,title:t.name,type:l,items:[]};e.each(t.bcList,(function(e){var n={type:"business",name:e.name,data:e,group:t,id:e.id};a.items.push(n)}));var i=e.findIndex(this.useBusinessControlGroup.groups,(function(e){return e.id==a.id}));i<0?this.useBusinessControlGroup.groups.push(a):this.useBusinessControlGroup.groups[i].items=a.items,this.$nextTick((function(){n.initToolDrag()}))}function j(t){var n=this,a={id:t.rmId,title:t.name,type:r,items:[]};e.each(t.controlList,(function(e){var n={type:"control",name:e.name,data:e,group:t,id:e.id};a.items.push(n)}));var i=e.findIndex(this.useControlsGroup.groups,(function(e){return e.id==a.id}));i<0?this.useControlsGroup.groups.push(a):this.useControlsGroup.groups[i].items=a.items,this.$nextTick((function(){n.initToolDrag()}))}function P(t){var n={};if(!t)return n;for(var a in t){var i=a.split("."),o=i[0],s=i[1]?i[1]:"";1!=t[a].level||s?(n[a]={type:"field",level:0,fieldsLength:t[a].valueAttributes&&t[a].valueAttributes.length,valueAttributes:t[a].valueAttributes&&e.map(t[a].valueAttributes,"code")},n[o]&&(n[a].level=1,n[a].inSubTable=o)):n[a]={type:"subtable",fieldsLength:0,valueAttributes:[],level:1}}return n}function B(t,n){var a=this,i=null;if(n){var o=P.call(this,n.metadata);dsf.isEmptyObject(o)||(i=o)}this.loading=!0;var s=dsf.designer.getLayoutInfo(t);s=dsf.designer.controlToJson(s);var l="",r=this.extScssCode||"",c=(this.page.context.B||"")+"."+(this.page.context.M||""),u=c+"."+(this.page.name||""),d={metadataGroup:{},controlGroup:{},businessControlGroup:{},fromTemplateId:this.fromTemplateId};if(d["metadataGroup"]=e.map(this.useMetaGroup.groups,(function(e){return{name:e.title||e.name,id:e.id,type:e.type}})),d["businessControlGroup"]=e.map(this.useBusinessControlGroup.groups,(function(e){return{name:e.title,id:e.id,type:e.type}})),d["controlGroup"]=e.map(this.useControlsGroup.groups,(function(e){return{name:e.title,id:e.id,type:e.type}})),n&&("form"==t.pageType||"question"==t.pageType||"exam"==t.pageType)){e.each(n.metadata,(function(t,n){var a=n.split("."),i=a[0],o=i.replace(/_/g,"."),s=e.find(d["metadataGroup"],(function(e){return e.id==o}));s||d["metadataGroup"].push({name:o+"元数据",id:o,type:3})}))}dsf.designer.compileCss(this.extScssCode,u).then((function(e){a.extCssCode=e,l=a.extCssCode})).then((function(){var e=a.extJsCode;e=dsf.beautify.js(e,{indent_size:"2",indent_char:" ",keep_array_indentation:!1,break_chained_methods:!0,wrap_line_length:0,space_after_anon_function:!0});var t="/",o={isMobile:a.mobile,md:JSON.stringify(n,(function(e,t){return"ref"==e?void 0:t})),layout:['<script type="text/template" id="layout">\n'.concat(s,"\n<").concat(t,"script>"),'<script type="text/template" id="css">\n'.concat(l,"\n<").concat(t,"script>"),'<script type="text/template" id="scss">\n'.concat(r,"\n<").concat(t,"script>"),'<script type="text/template" id="designer">\n'.concat(JSON.stringify(d),"\n<").concat(t,"script>"),'<script type="text/template" id="metadatedict">\n'.concat(i?JSON.stringify(i):"","\n<").concat(t,"script>")].join("\n"),extJsCode:e,evJsCode:"",templateid:a.fromTemplateId,pageName:a.page.name,namespace:c,pageTitle:a.page.title};a.$webAPI.pageBuild(o).done((function(e){"20000"==e.state?(dsf.layer.message("保存成功",!0),a.saved=!0):dsf.layer.message(e.message,!1)})).error((function(e){dsf.layer.message("保存失败",!1)})).always((function(){C.call(a,d["metadataGroup"]),a.loading=!1}))})).catch((function(e){a.loading=!1,dsf.layer.pc.message(e,!1)}))}function M(t){var n=this;this.loading=!0;var a=dsf.designer.getLayoutInfo(t);a=dsf.designer.controlToJson(a);var i=this.extScssCode||"",o=(this.page.context.B||"")+"."+(this.page.context.M||""),s=(this.page.name,{metadataGroup:{},controlGroup:{},businessControlGroup:{}});s["metadataGroup"]=e.map(this.useMetaGroup.groups,(function(e){return{name:e.name,id:e.id,type:e.type}})),s["businessControlGroup"]=e.map(this.useBusinessControlGroup.groups,(function(e){return{name:e.title,id:e.id,type:e.type}})),s["controlGroup"]=e.map(this.useControlsGroup.groups,(function(e){return{name:e.title,id:e.id,type:e.type}}));var l="/",r={isMobile:this.mobile,layout:['<script type="text/template" id="layout">\n'.concat(a,"\n<").concat(l,"script>"),'<script type="text/template" id="css"><'.concat(l,"script>"),'<script type="text/template" id="scss">\n'.concat(i,"\n<").concat(l,"script>"),'<script type="text/template" id="designer">\n'.concat(JSON.stringify(s),"\n<").concat(l,"script>"),'<script type="text/template" id="metadatedict"><'.concat(l,"script>")].join("\n"),desButtonRules:JSON.stringify(this.buttons),pageName:this.page.name,namespace:o};this.$webAPI.pageSaveTemplate(r).done((function(e){2e4==e.state?dsf.layer.message("保存成功",!0):dsf.layer.message(e.message,!1)})).error((function(e){dsf.layer.message("保存失败",!1)})).always((function(){n.loading=!1}))}function R(e){var t=this.currentUserRoles[e];return!!t}t["a"]={name:"DsfDesigner",components:{dragItem:s["a"]},provide:function(){return{$designer:this}},props:{material:{type:Array,default:function(){return[]}},business:{type:String,default:""},module:{type:String,default:""},pageName:{type:String,default:""},pageTitle:{type:String,default:""},mobile:{type:Boolean,default:!1},tpl:{type:Boolean,default:!1}},data:function(){return{loading:!0,firstOpen:!0,saved:!1,mousedown:{target:null},design:!0,buttons:[{text:"保存",id:"save",icon:"baocun",handler:this.saveLayout,setting:!0,roles:[]},{text:"暂存",id:"stagesave",icon:"baocun",handler:this.stageSaveLayout,setting:!1,roles:[]},{text:"预览",id:"preview",icon:"icon_yulan",handler:this.preView,setting:!1,roles:[]},{text:"模板选择",id:"tpl",icon:"shebeikaifa1",handler:this.useTpl,setting:!0,roles:[]},{text:"控件组选择",id:"ctrl",icon:"icon_shezhi",handler:this.selectComponents,setting:!0,roles:[]},{text:"元数据选择",id:"meta",icon:"icon_shezhi",handler:this.selectMateGroup,setting:!0,roles:[]},{text:"保存业务组件",id:"bctrl",icon:"biaodanzujian-xialakuang",handler:this.saveBusinessComponent,setting:!0,saved:!0,roles:[]},{text:"Vue模板",id:"vue",icon:"shebeikaifa1",handler:this.openVueTemplate,setting:!1,roles:[]},{text:"二次开发JS",id:"js",icon:"shebeikaifa1",handler:this.openExtJs,setting:!1,roles:[],saved:!0},{text:"自定义CSS",id:"css",icon:"shebeikaifa1",handler:this.openExtCss,setting:!1,saved:!0,roles:[]},{text:"自定义审核",id:"ev",icon:"guize",handler:dsf.noop,setting:!1,saved:!0,roles:[]}],templateButtons:[{text:"保存模板",icon:"baocun",handler:this.saveLayoutToTemplate,setting:!1,roles:[],show:function(){return!0}},{text:"预览",icon:"icon_yulan",handler:this.preView,setting:!1,roles:[],show:function(){return!0}},{text:"模板选择",icon:"shebeikaifa1",handler:this.useTpl,setting:!0,roles:[],show:function(){return!0}},{text:"控件组选择",icon:"icon_shezhi",handler:this.selectComponents,setting:!0,roles:[],show:function(){return!0}},{text:"功能授权",icon:"jiaohuan",handler:this.settingFunction,setting:!1,roles:[],show:function(){return!0}}],layout:{toolsBox:{activeName:"controls",tabs:[{name:"controls",label:"基础组件"},{name:"business",label:"业务组件"},{name:"metadata",label:"元数据"}]}},page:null,tools:{activeName:"",groups:[]},useControlsGroup:{activeName:"",groups:[]},useMetaGroup:{activeName:"",groups:[]},useBusinessControlGroup:{activeName:"",groups:[]},dragProxy:{show:!1},attributesGroup:[],attributesOwner:{},subTree:[],controls:{},dragMouseMoveTarget:null,contextMenu:{show:!0,items:[],pos:{x:-10,y:-10},target:null},extJsCode:o["a"],extCssCode:"",extScssCode:"",fromTemplateId:"",desButtons:{},currentUserRoles:{},buttonLoad:!1,leftSearchStr:"",leftSearchInput:""}},computed:{dragProxy_el:function(){return this.$refs.dragProxy},toolBoxGroup:function(){var t=this,n=[];return e.each(this.material,(function(a){var i={title:a.title,items:[]};e.each(a.items,(function(e){e.type="control",t.mobile?e.isMobile&&i.items.push(e):i.items.push(e)})),i.items.length>0&&n.push(i)})),n}},created:function(){window.designer=this},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,e.init(),t.next=5,e.getCurrentUserRoles();case 5:return e.currentUserRoles=t.sent,t.next=8,e.loadLayout();case 8:return t.next=10,e.getFunctionSetting();case 10:t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](1),dsf.error(t.t0),dsf.layer.pc.message("设计器加载失败",!1);case 16:return t.prev=16,e.loading=!1,e.buttonLoad=!0,t.finish(16);case 20:case"end":return t.stop()}}),t,null,[[1,12,16,20]])})))()},updated:function(){},methods:{buttonShow:function(t){var n=this;if(t.saved&&!this.saved)return!1;if(!t.setting)return!0;if(this.currentUserRoles["SUPER_ADMIN"])return!0;if(this.fromTemplateId){var a=this.desButtons[t.id];if(a){var i=!1;return e.every(a,(function(e){return i=R.call(n,e),!i})),i}return!1}return!0},dragEnd:function(){h.call(this)},getFunctionSetting:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if({},n="",n=e.tpl?(e.page.context.B||"")+"."+(e.page.context.M||"")+"."+e.page.name:e.fromTemplateId,!n){t.next=7;break}return t.next=6,e.setDesButtons(n);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))()},init:function(){this.initToolDrag(),this.initDrop()},initToolsBox:function(){},getCurrentUserRoles:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$webAPI.getCurrentUserRoles();case 2:return a=n.sent,n.abrupt("return",e.keyBy(a.data,"serialNumber"));case 4:case"end":return n.stop()}}),n)})))()},settingFunction:function(){var t=this;this.$openDialog({title:"功能授权",content:"DesFunctionSetting",width:"1000px",height:"60vh",params:{buttons:e.filter(this.buttons,(function(e){return e.setting}))},btns:[{text:"确定",handler:function(n){var a=n.yes();a&&e.each(a,(function(n){var a=e.filter(t.buttons,(function(e){return e.id==n.id}));a=a.length>0?a[0]:null,a&&(a.roles=n.roles)}))}},{text:"取消"}]})},initToolDrag:function(){c.call(this)},initDrop:function(){u.call(this)},dragMouseMoveHandler:function(e){var t=a(e.target),n=null;if(!t.hasClass("drag-proxy"))if(t.is("[slot-name]")){var i=dsf.designer.isAllowDrop(t,this);if(i){n=t,this.dragProxy.show=!0;var o=a(this.dragProxy_el);n.append(o)}}else{var s=t.closest(".designer-ctrl-proxy");if(s&&s.length>0){if(!t.hasClass("designer-mask")&&!t.hasClass("ds-control")||t.hasClass("ds-no-drop"))return;var l=dsf.designer.getComponent(s.get(0).__vue__,this);if(l){l.$$getComponent&&(l=l.$$getComponent()),n=s.closest("[slot-name]");var r=dsf.designer.isAllowDrop(n,this);if(r){var c=t.height(),u=a(this.dragProxy_el);this.dragProxy.show=!0,e.offsetY<c/2?s.before(u):s.after(u)}}}}},dropHandler:function(e,t,n,a){d.call(this,e,t,n,a)},addControl:function(t,n,i,o){if(i.designId||(i.designId=dsf.uuid()),!i.caption){var s=i.ctrlType.split(".");i.caption=s[s.length-1].toLowerCase()+this.$refs.viewProxy.getSerial()}if(t.$$getComponent)t=t.$children[0];else while(!t.slots)t=t.$parent;if(t.$el){var l=t.$el.matches(".ds-subtable-cell-content"),r=t.$el.matches(".ds-datagrid-cell-content");(l||r)&&i.isFormControl?(i.showLabel=!1,i.simple=!0,i.lrNoPadding=!0):(i.simple=!1,i.lrNoPadding=!1)}n&&n.textProxy&&i.isFormControl&&(i.simple=!0);var c=e.findIndex(t.slots,(function(e){return e.name==n}));c>=0&&(dsf.isUnDef(o)||o<0?t.slots[c].controls.push(i):t.slots[c].controls.splice(o,0,i),i.isQuestionControl&&this.setQuestionIndex(i,t.slots[c].controls,o)),i.isQuestionControl&&(this.$questionComponentTemp||(this.$questionComponentTemp={}),setTimeout((function(){a("[des-id=".concat(i.designId,"]")).trigger("click")}),0))},setQuestionIndex:function(t,n,a){if(dsf.isUnDef(a)||a<0)this.setPrevQuestionIndex(t,n);else{var i=0;e.forEach(n,(function(e,t){e.isQuestionControl&&e.hasQuestionIndex&&e.visible&&(i++,e.questionIndex=i)}))}},setPrevQuestionIndex:function(t,n){var a=0;e.find(n,(function(e){if(e.isQuestionControl&&e.hasQuestionIndex&&e.visible&&(a++,e.questionIndex=a),e.designId==t.designId)return!0}))},setNextQuestionIndex:function(t,n){e.forEach(n,(function(e){e.hasQuestionIndex&&e.visible&&(e.questionIndex=t,t++)}))},selectedComponent:function(e){var t=this;window.setTimeout((function(){t.contextMenuClose();var n=a(e.target),i=n.closest(".designer-ctrl-proxy");if(i.length){var o=i.get(0).__vue__,s=a(".designer-ctrl-proxy");s.each((function(e,t){var n=t.__vue__;n&&(n.__desContext__.selected=!1)})),o&&(o.isView||(o.__desContext__.selected=!0)),t.$http.get("./static/pd_attributes/"+o.ctrlType+".json").done((function(e){e&&e[0]&&e[0].attributes&&e[0].attributes.forEach((function(e){t.format(e,o)})),t.attributesGroup=e||[],t.attributesOwner=o,o.isQuestionControl&&t.$questionComponentTemp&&!t.$questionComponentTemp[o.designId]&&(t.$questionComponentTemp[o.designId]=!0,setTimeout((function(){t.$bus.$emit("questionSetting")}),200))})).error((function(e){t.attributesGroup=[],t.attributesOwner=o,dsf.error(e)}))}}),0),e.preventDefault(),e.stopPropagation()},format:function(e,t){return e.dictionaryControl&&(e.dictionary&&0===e.dictionary.length&&(e.dictionary=[],dsf.recursionComponentProps(t.$$getComponent().$page.$props,(function(t){t.isFormControl&&"DsfFlowInfo"!==t.ctrlName&&"DsfDisposeIdea"!==t.ctrlName&&e.dictionary.push({id:t.designId,text:"".concat(t.label,"(").concat(t.caption,")"),value:t.caption})}))),console.log(e.dictionary)),e},contextMenuOpen:function(e){var t=this,n=dsf.designer.getComponentByTarget(e.target);if(n){dsf.designer.broadcast(this,"clearContextMemuHandler",e,null,n);do{var i=n?n.$options:{},o=i.design?i.design.contextMenuHandler:null;if(o)break;n=n.$parent}while(n!=this.$root);var s=n.$options,l=n.$options.design?n.$options.design.contextMenuHandler:null;if(l){this.contextMenuClose();var r=s.design.contextMenuHandler.call(n,e,this);r&&r.length>0&&(this.$nextTick((function(){t.contextMenu.items=r,t.contextMenu.show=!0,t.contextMenu.target=n,t.$nextTick((function(){var n=t.$refs.contextmenu;n&&n.childNodes[0]&&(n=n.childNodes[0],t.contextMenu.pos.x=e.pageX,t.contextMenu.pos.y=e.pageY,t.contextMenu.pos.y+n.offsetHeight>t.$refs.designerPanel.offsetHeight&&(t.contextMenu.pos.y=e.pageY-n.offsetHeight))}))})),a(document).one("click",this.contextMenuClose)),e.stopPropagation(),e.preventDefault()}}},contextMenuClose:function(){this.contextMenu.items=[],this.contextMenu.show=!1,this.contextMenu.target=null},contextMenuItemClick:function(e,t){e.disabled?(t.preventDefault(),t.stopPropagation()):e.handler.call(this.contextMenu.target,e)},mouseDownHanlder:function(e){try{if(0!=e.button)return;var t=dsf.designer.getComponentByTarget(e.target);if(!t)return;dsf.designer.broadcast(this,"clearMouseDownHandler",e,null,t),this.mousedown.target=t;var n=t?t.$options:{};n.design.mouseDownHandler&&n.design.mouseDownHandler.call(t,e,this)}catch(i){dsf.error(i)}finally{a(document).one("mouseup",this.mouseUpHandler)}},mouseMoveHanlder:function(e){try{if(this.mousedown.target){var t=this.mousedown.target.$options||{};t.design.mouseMoveHandler&&t.design.mouseMoveHandler.call(this.mousedown.target,e,this)}}catch(n){dsf.error(n)}},mouseUpHandler:function(e){try{if(this.mousedown.target){var t=this.mousedown.target.$options||{};t.design.mouseUpHandler&&t.design.mouseUpHandler.call(this.mousedown.target,e,this)}}catch(n){dsf.error(n)}finally{this.mousedown.target=null}},openExtJs:function(){var e=this;dsf.layer.pc.openDialog({title:"自定义扩展",fullscreen:!0,overflow:"hidden",content:"MonacoEditor",params:{code:this.extJsCode},btns:[{text:"确定",handler:function(t){e.extJsCode=t.getContent()}},{text:"取消"}]})},openExtCss:function(){var e=this;dsf.layer.pc.openDialog({title:"自定义样式",fullscreen:!0,overflow:"hidden",content:"MonacoEditor",params:{code:this.extScssCode||"",language:"scss"},btns:[{text:"确定",handler:function(t){e.extScssCode=t.getContent()}},{text:"取消"}]})},openVueTemplate:function(){var e=this.$refs.viewProxy;dsf.designer.createViewMetaData(e),this.$nextTick((function(){var t=dsf.designer.getLayoutInfo(e),n=dsf.designer.convertTemplateAndControlData(t),a=dsf.beautify.html(n.tpl);dsf.layer.pc.openDialog({title:"Vue模板",fullscreen:!0,overflow:"hidden",content:"MonacoEditor",params:{code:a||"",language:"html"}})}))},loadEmptyDesigner:function(e,t){e=e||"dsf.page",this.page=k(e,t,this.mobile);var n=this.material;D.call(this,n)},loadLayout:function(e,t,n){var o=this;return Object(i["a"])(regeneratorRuntime.mark((function i(){var s,l,r,c,u,d,h,p,f,g,x,v,b,w,_,S,L,$,I,T,O,E;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(o,s=e||o.business,l=t||o.module,r=n||o.pageName,c=o.pageTitle,u=o.mobile?"dsf.mobile.page":"dsf.page",d={caption:"page",name:r,title:c,context:{B:s,M:l}},!(s&&l&&r)){i.next=39;break}return h=null,p=null,f=null,i.prev=9,i.next=12,m.call(o,s,l,r,c,o.mobile,o.tpl);case 12:if(g=i.sent,x=a("<div>"+g.data+"</div>"),v=x.children("script[id='layout']").html()||"",b=x.children("script[id='scss']").html()||"",w=x.children("script[id='designer']").html()||"",_=new Function(["var layout="+(v||"null")+";","return layout;"].join("\n")),S=new Function(["return "+JSON.stringify(b.trim()||"")].join("\n")),L=new Function(["return "+(w||"{}").trim()].join("\n")),h=dsf.fillComponentDefaultProps(_()),p=S(),f=L(),o.tpl){i.next=29;break}return i.next=26,y.call(o,s,l,r,o.mobile,o.tpl);case 26:$=i.sent,I=$.data,o.extJsCode=I;case 29:i.next=34;break;case 31:i.prev=31,i.t0=i["catch"](9),dsf.error(i.t0);case 34:return i.prev=34,h?(o.page=k(u,h,o.mobile),o.extScssCode=p||"",T=dsf.isEmptyObject(f.controlGroup)||!f.controlGroup?o.material:f.controlGroup,D.call(o,T),O=f.metadataGroup||[],C.call(o,O),E=f.businessControlGroup||[],N.call(o,E),o.fromTemplateId=f.fromTemplateId||"",o.firstOpen=!1,o.saved=!0):(o.loadEmptyDesigner(u,d,o.material),o.fromTemplateId="",o.firstOpen=!0,o.saved=!1,o.tpl||o.useTpl(!1,!1,!1)),i.finish(34);case 37:i.next=43;break;case 39:o.loadEmptyDesigner(u,d,o.material),o.fromTemplateId="",o.firstOpen=!0,o.saved=!1;case 43:case"end":return i.stop()}}),i,null,[[9,31,34,37]])})))()},pushToControls:function(e){this.controls[e.designId]=e},saveLayout:function(){var e=dsf.designer.saveLayoutValidate(this.$refs.viewProxy);!1!==e&&v.call(this)},saveLayoutToTemplate:function(){b.call(this)},preView:function(){w.call(this)},saveBusinessComponent:function(){var t=this;this.$openDialog({title:"组件选择",width:"1000px",height:"50vh",params:{designer:this},content:"DesComponents",btns:[{text:"确定",handler:function(n){var a=n.validate();if(!1===a)return!1;var i=n.yes();i.length&&(e.each(i,(function(e){e.props.metadata.id="",e.props.metadata.at="",e.props.metadata_fullcode="",delete e.isFromMetaData})),window.setTimeout((function(){t.saveToBusinessComponentGroup(i)}),1e3))}},{text:"取消"}]})},saveToBusinessComponentGroup:function(t){var n=this,a=this;dsf.layer.openDialog({title:"保存到",fullscreen:!1,content:"DesBusinessComponent",width:"500px",height:"500px",btns:[{text:"确定",handler:function(i){var o=i.radioData,s=e.map(t,(function(t,n){var a=t.metadata,i=[];return a="array"==dsf.type(a)?a:[a],e.each(a,(function(e){e.metadata.id="",e.metadata.at="",i.push(e.metadata)})),{"dsfa_rm_bc_list.version":"1","dsfa_rm_bc_list.name":t.props.label,"dsfa_rm_bc_list.code":t.props.caption,"dsfa_rm_bc_list.md":i?JSON.stringify(i):"","dsfa_rm_bc_list.content":JSON.stringify(t.props,(function(e,t){return"designId"===e?"":t})),"dsfa_rm_bc_list.ds_order":n+1}})),l={namespace:"dsfa.rm.bc",pageName:"edit",data:JSON.stringify({dsfa_rm_bc_list:s,_id:o["dsfa_rm_id"],"dsfa_rm.ID":o["ID"],"dsfa_rm.dsfa_rm_id":o["dsfa_rm_id"]})};a.loading=!0,a.$webAPI.formSave(l).then((function(e){var t=e.data;"20000"==t.state?(dsf.layer.pc.message("保存成功",!0),N.call(n,[{id:t.data["dsfa_rm.dsfa_rm_id"]}])):dsf.layer.pc.message(t.message,!1)})).catch((function(e){dsf.layer.pc.message("保存出现错误",!1)})).finally((function(){a.loading=!1}))}},{text:"取消"}]})},useTpl:function(t,n,o){var s=this,l=this,r=[{text:"确定",handler:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){var i,o,r,c,u,d,h,p,f,g,y,x,v,b,w,_,S;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=n.radioData,!e.isNull(i)){t.next=6;break}return dsf.layer.message("请选择一个模板",!1),t.abrupt("return",!1);case 6:return l.loading=!0,o=i.path.split("/"),r=o.shift(),c=o.pop(),u=o.join("."),d=null,null,h=null,t.prev=12,t.next=15,m.call(s,r,u,c,s.pageTitle,s.mobile,!0);case 15:p=t.sent,f=a("<div>"+p.data+"</div>"),g=f.children("script[id='layout']").html()||"",y=f.children("script[id='scss']").html()||"",x=f.children("script[id='designer']").html()||"",v=new Function(["var layout="+(g||"null")+";","return layout;"].join("\n")),b=new Function(["return "+JSON.stringify(y.trim()||"")].join("\n")),w=new Function(["return "+(x||"{}").trim()].join("\n")),d=dsf.fillComponentDefaultProps(v()),b(),h=w(),e.each(h,(function(t,n){e.each(t,(function(e){e.fromTemplate=!0}))})),l.fromTemplateId=i.ID,t.next=34;break;case 30:t.prev=30,t.t0=t["catch"](12),dsf.layer.pc.message("读取模板失败",!1),dsf.error(t.t0);case 34:if(t.prev=34,!d){t.next=42;break}return t.next=38,l.setDesButtons(i.ID);case 38:_=l.page.context,S=l.page.name,l.page=null,s.$nextTick((function(){var e=dsf.isEmptyObject(h.controlGroup)||!h.controlGroup?s.material:h.controlGroup;D.call(s,e);var t=h.metadataGroup||[];C.call(s,t);var n=h.businessControlGroup||[];N.call(s,n),l.page=k("dsf.page",dsf.mix(d,{context:_,name:S}))}));case 42:return l.loading=!1,t.finish(34);case 44:case"end":return t.stop()}}),t,null,[[12,30,34,44]])})));function n(e){return t.apply(this,arguments)}return n}()}];!1!==n&&r.push({text:"取消"}),dsf.layer.openDialog({title:"选择布局模板",fullscreen:!1,content:"DesUseLayoutTpl",params:{isMobile:this.mobile},width:"500px",height:"500px",showClose:!1!==t,btns:r})},selectComponents:function(){var t=this;dsf.layer.openDialog({title:"选择组件",fullscreen:!1,content:"DesCustomComponent",width:"500px",btns:[{text:"确定",handler:function(n){var a=n.yes(),i="0"==n.tabIndex?r:l;if(!(a.length>0))return dsf.layer.message("请选择一个组件",!1),!1;var o=p.call(t,a),s=e.map(o,(function(e){return{id:e.dsfa_rm_id,type:i}}));i==l?N.call(t,s):D.call(t,s)}},{text:"取消"}]})},selectMateGroup:function(){var t=this;dsf.layer.openDialog({title:"选择元数据组",fullscreen:!1,content:"DesMetaDataSelect",width:"500px",btns:[{text:"确定",handler:function(n){var a=n.yes();if(a.length>0){var i=p.call(t,a),o=e.map(i,(function(e){return{id:"8"==e.type_value?e.dsfa_rm_id:e.ID,type:e.type_value}}));C.call(t,o)}}},{text:"取消"}]})},removeControlGroup:function(e){var t=this;dsf.layer.pc.confirm("确定要删除该控件组吗?").then((function(){dsf.array.remove(t.useControlsGroup.groups,e)})).catch((function(){}))},removeMetaDataGroup:function(e){var t=this;dsf.layer.pc.confirm("确定要删除该元数据吗?").then((function(){dsf.array.remove(t.useMetaGroup.groups,e)})).catch((function(){}))},removeBusinessGroup:function(e){var t=this;dsf.layer.pc.confirm("确定要删除该元数据吗?").then((function(){dsf.array.remove(t.useBusinessControlGroup.groups,e)})).catch((function(){}))},setDesButtons:function(t){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var i,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,n.$webAPI.getDesignerButtons({templateId:t});case 2:i=a.sent,i.data&&(o=i.data.button?JSON.parse(i.data.button):[],s={},e.each(o,(function(t,a){s[t.id]=e.map(t.roles,"serial_number");var i=e.find(n.buttons,(function(e){return e.id==t.id}));i&&(i.roles=t.roles)})),n.desButtons=s);case 4:case"end":return a.stop()}}),a)})))()},leftSearch:function(){this.leftSearchStr=this.leftSearchInput},isMatchLeftSearch:function(e){return!this.leftSearchStr||e.indexOf(this.leftSearchStr)>=0}}}}).call(this,n("2ef0"),n("1157"))},"0d29":function(e,t,n){"use strict";var a=n("35ad"),i=n.n(a);i.a},"0e69":function(e,t,n){"use strict";(function(e,a){n("99af"),n("4de4"),n("7db0"),n("c740"),n("4160"),n("c975"),n("d81d"),n("e25e"),n("159b");var i=n("5530"),o=n("2f62"),s=n("35b5"),l=n("f70e"),r=n("b3c6");function c(e){this.activeId!==e.id&&(D.call(this),this.selectedItems=[e],this.$store.commit("seatDesign/changeActiveId",e.id))}function u(e){var t=d(e),n=x(t),i=this.panelSize,o=(i.left,i.top,i.scale),s=this.regionPosition,l=s.left,r=s.top,c=s.width,u=s.height,h=a(".seat-designer-page").offset(),p={x:l+h.left,y:r+h.top},f={x:l+h.left+c,y:r+h.top+u};p=dsf.math.convertLocalCoordinate("#panel_outer",p,o),f=dsf.math.convertLocalCoordinate("#panel_outer",f,o);var m=n.min_x>=p.x,g=n.max_x<=f.x,y=n.min_y>=p.y,v=n.max_y<=f.y;return m&&g&&y&&v}function d(e){var t=e.angle,n=e.left,a=e.top,i=e.left+e.width,o=e.top+e.height,s={lt:0,lb:0,rt:0,rb:0},l=.5*(i-n)+n,r=.5*(o-a)+a;return s.lt=dsf.math.getRotatedPiont(n,a,l,r,t),s.lb=dsf.math.getRotatedPiont(n,o,l,r,t),s.rt=dsf.math.getRotatedPiont(i,a,l,r,t),s.rb=dsf.math.getRotatedPiont(i,o,l,r,t),s}function h(e,t){var n={};t.length>1?(t.indexOf("l")>=0?n.x=e.left+e.width:n.x=e.left,t.indexOf("t")>=0?n.y=e.top+e.height:n.y=e.top):"r"===t||"b"===t?(n.x=e.left,n.y=e.top):"l"!==t&&"t"!==t||(n.x=e.left+e.width,n.y=e.top+e.height);var a={x:e.left+e.width/2,y:e.top+e.height/2};return n=dsf.math.getRotatedPiont(n.x,n.y,a.x,a.y,e.angle),n}function p(e,t,n,a,i,o){var s,l,r=dsf.math.getDistance(e,a),c=dsf.math.getRadina(e,a,-dsf.math.a2r(t.angle)),u={x:Math.cos(c)*r+t.left,y:Math.sin(c)*r+t.top};if(i.indexOf("r")>=0?s=u.x-t.left:i.indexOf("l")>=0&&(s=t.left-u.x),i.indexOf("b")>=0?l=u.y-t.top:i.indexOf("t")>=0&&(l=t.top-u.y),i.length>1){var d=s/t.width;n.width=t.width*d,n.height=t.height*d}else dsf.isDef(s)?n.width=s:n.width=t.width,dsf.isDef(l)?n.height=l:n.height=t.height;n.width<o[0]&&(n.width=o[0]),n.height<o[1]&&(n.height=o[1]);var h={};i.length>1?(i.indexOf("r")>=0?h.x=e.x+n.width:i.indexOf("l")>=0?h.x=e.x-n.width:h.x=e.x,i.indexOf("b")>=0?h.y=e.y+n.height:i.indexOf("t")>=0?h.y=e.y-n.height:h.y=e.y):"r"===i||"b"===i?(h.x=e.x+n.width,h.y=e.y+n.height):"l"!==i&&"t"!==i||(h.x=e.x-n.width,h.y=e.y-n.height);var p=dsf.math.getRotatedPiont(h.x,h.y,e.x,e.y,t.angle),f={x:.5*(e.x+p.x),y:.5*(e.y+p.y)},m=dsf.math.getRotatedPiont(e.x,e.y,f.x,f.y,-t.angle);return i.length>1?(i.indexOf("r")>=0?n.left=m.x:i.indexOf("l")>=0?n.left=m.x-n.width:n.left=m.x-n.width/2,i.indexOf("b")>=0?n.top=m.y:i.indexOf("t")>=0?n.top=m.y-n.height:n.top=m.y-n.height/2):"r"===i||"b"===i?(n.left=m.x,n.top=m.y):"l"!==i&&"t"!==i||(n.left=m.x-n.width,n.top=m.y-n.height),v(n),n}function f(e,t){var n=dsf.math.getRadina(e,t),a=90+dsf.math.r2a(n);return a=Math.ceil(a)%360,a}function m(t,n){var a={};return e.forEach(t,(function(t){var i=e.assign({},t);a[t.id]={left:(i.left-n.left)/n.width,top:(i.top-n.top)/n.height,width:i.width/n.width,height:i.height/n.height}})),a}function g(t,n,a,i,o){var s=e.assign({},t),l=o[s.id];if(s.left=a.left+a.width*l.left,s.top=a.top+a.height*l.top,2===i.length){var r=a.width/n.width,c=a.height/n.height;r=.5*(r+c),s.width=r*t.width,s.height=r*t.height}else 1===i.length&&(s.width=a.width*l.width,s.height=a.height*l.height);return b(s),s}function y(e){return{x:e.left+e.width/2,y:e.top+e.height/2}}function x(t){var n,a,i,o;return e.forIn(t,(function(e){n=n||e.x,a=a||e.x,i=i||e.y,o=o||e.y,n=n<=e.x?n:e.x,a=a>=e.x?a:e.x,i=i<=e.y?i:e.y,o=o>=e.y?o:e.y})),{min_x:n,min_y:i,max_x:a,max_y:o}}function v(e){e.top=parseInt(e.top),e.left=parseInt(e.left),e.width=parseInt(e.width),e.height=parseInt(e.height)}function b(e){e.top=Math.round(e.top),e.left=Math.round(e.left),e.width=Math.round(e.width),e.height=Math.round(e.height)}function w(t){var n,a,i,o,s;return e.forEach(t,(function(t){s=d(t),e.forIn(s,(function(e){n=n||e.x,a=a||e.x,i=i||e.y,o=o||e.y,n=n<=e.x?n:e.x,a=a>=e.x?a:e.x,i=i<=e.y?i:e.y,o=o>=e.y?o:e.y}))})),{left:k(n),top:k(i),width:k(a-n),height:k(o-i),angle:0,visible:!0}}function k(e){return e<0?Math.floor(e):Math.ceil(e)}function D(){this.selectPosition={top:0,left:0,width:0,height:0,angle:0,visible:!1}}function _(){var t=this,n=e.filter(this.items,(function(e){return e.id!==t.activeId}));return n.map((function(e){return d(e)}))}function C(e,t){for(var n={},a=0,i=0;i<t.length;i++)if(t[i].left===e.left?(n.left=e.left,a+=1):t[i].top===e.top&&(n.top=e.top,a+=1),2===a)break;return n.left||n.top?n:null}function S(t){var n=[],a={};return e.isArray(t)?(e.forEach(t,(function(e){a={left:Math.round(e.lt.x),top:Math.round(e.lt.y)},n.push(a)})),e.uniqWith(n,e.isEqual)):e.isObject(t)?{left:Math.round(t.lt.x),top:Math.round(t.lt.y)}:void 0}function N(e){var t=e.member[0];return[e.cols*t.width,e.rows*t.height]}t["a"]={name:"SeatItem",data:function(){return{items:[],selectedItems:[],originWidth:100,originHeight:100,rectMinSize:[40,40],selectPosition:{top:0,left:0,width:0,height:0,visible:!1},verLine:{left:0,visible:!1},horLine:{top:0,visible:!1},groups:[]}},computed:Object(i["a"])(Object(i["a"])({},Object(o["b"])("seatDesign",{panelSize:"panelSize",newSeatItem:"newSeatItem",newGroupItem:"newGroupItem",activeId:"activeId",regionPosition:"regionPosition",seatInfo:"seatInfo"})),{},{selectSty:function(){var e=this.panelSize.scale;return{width:this.selectPosition.width*e+"px",height:this.selectPosition.height*e+"px",left:this.selectPosition.left*e+"px",top:this.selectPosition.top*e+"px",transform:"rotate(".concat(this.selectPosition.angle,"deg)")}},verLineSty:function(){return{left:"".concat(this.verLine.left*this.panelSize.scale)+"px"}},horLineSty:function(){return{top:"".concat(this.horLine.top*this.panelSize.scale)+"px"}}}),watch:{newSeatItem:function(e){var t=dsf.math.convertLocalCoordinate("#panel_outer",{x:e.pageX,y:e.pageY},this.panelSize.scale),n={id:e.id,type:e.type,left:t.x,top:t.y,width:this.originWidth,height:this.originHeight,angle:0,showText:1,seatTxt:e.seatTxt};this.items.push(n)},newGroupItem:function(t){var n=e.assign({},t);this.groups.push(n)},regionPosition:function(t){var n=this;if(0===t.width||0===t.height)return n.selectedItems=[],void D.call(n);var a=e.concat(n.items,n.groups);n.selectedItems=e.filter(a,(function(e){return u.call(n,e)})),0!==n.selectedItems.length?1===n.selectedItems.length?(D.call(n),n.$store.commit("seatDesign/changeActiveId",n.selectedItems[0].id)):n.selectedItems.length>1&&(n.selectPosition=w(n.selectedItems)):D.call(n)},seatInfo:{handler:function(t){if("group"===t.type){var n=e.findIndex(this.groups,(function(e){return e.id===t.id}));this.$set(this.groups,n,t)}else{var a=e.findIndex(this.items,(function(e){return e.id===t.id}));this.$set(this.items,a,t)}},deep:!0}},beforeDestroy:function(){a(document).off("mouseup.scaleSeatItem"),a(document).off("mousemove.scaleSeatItem")},mounted:function(){var t=this;s["a"].on(l["a"].KEY_CTRL_D,(function(){D.call(t),t.selectedItems=[],t.$store.commit("seatDesign/changeActiveId","")})),s["a"].on(l["a"].KEY_DELETE,(function(){t.deleteActiveSeatItem()})),s["a"].on(l["a"].GET_ACTIVE_SEAT,(function(n){var a=e.concat(t.items,t.groups),i=a.find((function(e){return e.id===t.activeId}));n&&n(i)}))},methods:{getItemSty:function(e){var t=this.panelSize.scale;return{width:e.width*t+"px",height:e.height*t+"px",left:e.left*t+"px",top:e.top*t+"px",transform:"rotate(".concat(e.angle,"deg)")}},getSpanSty:function(e){var t=this.panelSize.scale;return{width:e.width*t+"px",opacity:1===e.showText?1:.4}},preScale:function(t,n,i){t.stopPropagation(),t.preventDefault();var o=this,s=e.assign({},n),l=e.assign({},n),c=h(s,i);function u(t){if(i&&c){var a=dsf.math.convertLocalCoordinate("#panel_outer",{x:t.pageX,y:t.pageY},o.panelSize.scale),u=p(c,s,l,a,i,"group"!==n.type?o.rectMinSize:N(s));e.assign(n,u),"group"===n.type&&Object(r["a"])(u)}}function d(){a(document).off("mousemove.scaleSeatItem"),"group"===n.type&&(1===n.rows&&(n.height=s.height),1===n.cols&&(n.width=s.width))}a(document).off("mousemove.scaleSeatItem"),a(document).on("mousemove.scaleSeatItem",(function(e){e.preventDefault(),e.stopPropagation(),u(e)})),a(document).one("mouseup.scaleSeatItem",(function(){d()}))},preMove:function(t,n){t.preventDefault(),t.stopPropagation();var i=this;c.call(i,n),i.verLine.visible=!1,i.horLine.visible=!1;var o=_.call(i),s=S(o),l=n.left,r=n.top,u=dsf.math.convertLocalCoordinate("#panel_outer",{x:t.pageX,y:t.pageY},i.panelSize.scale);function h(t){var a=dsf.math.convertLocalCoordinate("#panel_outer",{x:t.pageX,y:t.pageY},i.panelSize.scale),o={x:a.x-u.x,y:a.y-u.y},c=l+o.x,h=r+o.y;n.left=parseInt(c),n.top=parseInt(h),i.verLine.visible=!1,i.horLine.visible=!1;var p=d(n),f=S(p),m=C(f,s);m&&(i.horLine.top=m.top,i.horLine.visible=e.isNumber(m.top),i.verLine.left=m.left,i.verLine.visible=e.isNumber(m.left))}function p(){a(document).off("mousemove.moveSeatItem"),i.verLine.visible=!1,i.horLine.visible=!1}a(document).off("mousemove.moveSeatItem"),a(document).on("mousemove.moveSeatItem",(function(e){e.preventDefault(),e.stopPropagation(),h(e)})),a(document).one("mouseup.moveSeatItem",(function(){p()}))},preRotate:function(e,t){e.stopPropagation(),e.preventDefault(),a(".ds-seat-design").addClass("is-rotating");var n=this,i=y(t);function o(e){var a=dsf.math.convertLocalCoordinate("#panel_outer",{x:e.pageX,y:e.pageY},n.panelSize.scale);t.angle=f(i,a)}function s(){a(document).off("mousemove.rotateSeatItem"),a(".ds-seat-design").removeClass("is-rotating")}a(document).off("mousemove.rotateSeatItem"),a(document).on("mousemove.rotateSeatItem",(function(e){e.stopPropagation(),e.preventDefault(),o(e)})),a(document).one("mouseup.rotateSeatItem",(function(){s()}))},selectRotate:function(t){t.stopPropagation(),t.preventDefault(),a(".ds-seat-design").addClass("is-rotating");var n=this,i=e.assign({},n.selectPosition),o=y(i),s={},l=e.concat(n.items,n.groups);function r(e){var t=dsf.math.convertLocalCoordinate("#panel_outer",{x:e.pageX,y:e.pageY},n.panelSize.scale),a=f(o,t),l=a-i.angle;n.selectPosition.angle=a,n.selectedItems.forEach((function(e){var t=s[e.id],n=dsf.math.getRotatedPiont(t.left,t.top,o.x,o.y,a),i=n.x+t.width/2,r=n.y+t.height/2,c=dsf.math.getRotatedPiont(i,r,n.x,n.y,a);n=dsf.math.getRotatedPiont(n.x,n.y,c.x,c.y,-a),e.top=parseInt(n.y),e.left=parseInt(n.x),e.angle=(t.angle+l)%360,t.angle<0&&(e.angle=360+t.angle)}))}function c(){a(".ds-seat-design").removeClass("is-rotating"),n.selectPosition=w(n.selectedItems),a(document).off("mousemove.rotateSelect")}l.forEach((function(t){s[t.id]=e.assign({},t)})),a(document).off("mousemove.rotateSelect"),a(document).on("mousemove.rotateSelect",(function(e){e.preventDefault(),e.stopPropagation(),r(e)})),a(document).one("mouseup.rotateSelect",(function(){c()}))},selectScale:function(t,n){t.stopPropagation(),t.preventDefault();var i=this,o=e.assign({},i.selectPosition),s=e.assign({},i.selectPosition),l={},c=e.concat(i.items,i.groups);c.forEach((function(t){l[t.id]=e.assign({},t)}));var u=h(o,n),d=m(i.selectedItems,i.selectPosition);function f(t){if(n&&u){var a=dsf.math.convertLocalCoordinate("#panel_outer",{x:t.pageX,y:t.pageY},i.panelSize.scale);i.selectPosition=p(u,o,s,a,n,i.rectMinSize),i.selectedItems.forEach((function(t){var a=g(l[t.id],o,i.selectPosition,n,d);"group"===a.type&&Object(r["a"])(a),e.assign(t,a)}))}}function y(){a(document).off("mousemove.scaleSelect"),i.selectedItems.forEach((function(e){"group"===e.type&&(1===e.rows&&(e.height=l[e.id].height),1===e.cols&&(e.width=l[e.id].width))})),i.selectPosition=w(i.selectedItems)}a(document).off("mousemove.scaleSelect"),a(document).on("mousemove.scaleSelect",(function(e){e.preventDefault(),e.stopPropagation(),f(e)})),a(document).one("mouseup.scaleSelect",(function(){y()}))},selectMove:function(t){t.preventDefault(),t.stopPropagation();var n=this,i=n.selectPosition.left,o=n.selectPosition.top,s={},l=e.concat(n.items,n.groups);l.forEach((function(t){s[t.id]=e.assign({},t)}));var r=dsf.math.convertLocalCoordinate("#panel_outer",{x:t.pageX,y:t.pageY},n.panelSize.scale);function c(e){var t=dsf.math.convertLocalCoordinate("#panel_outer",{x:e.pageX,y:e.pageY},n.panelSize.scale),a={x:t.x-r.x,y:t.y-r.y},l=i+a.x,c=o+a.y;n.selectPosition.left=parseInt(l),n.selectPosition.top=parseInt(c),n.selectedItems.forEach((function(e){e.left=parseInt(s[e.id].left+a.x),e.top=parseInt(s[e.id].top+a.y)}))}function u(){a(document).off("mousemove.moveSelect")}a(document).off("mousemove.moveSelect"),a(document).on("mousemove.moveSelect",(function(e){e.preventDefault(),e.stopPropagation(),c(e)})),a(document).one("mouseup.moveSelect",(function(){u()}))},popMenu:function(e,t){if(3===e.which){e.preventDefault(),e.stopPropagation();var n=dsf.math.convertLocalCoordinate(".seat-designer-page",{x:e.pageX,y:e.pageY});c.call(this,t),s["a"].emit(l["a"].SEAT_POP,{position:Object(i["a"])({},n),seat:t})}},deleteActiveSeatItem:function(){0!==this.selectedItems.length&&(this.items=e.differenceWith(this.items,this.selectedItems,(function(t,n){return e.isEqual(t.id,n.id)})),this.selectedItems=[],D.call(this),this.$store.commit("seatDesign/changeActiveId",""))}}}}).call(this,n("2ef0"),n("1157"))},"0e6b":function(e,t,n){"use strict";var a=n("0e80"),i=n.n(a);i.a},"0e80":function(e,t,n){},"0f7f":function(e,t,n){"use strict";(function(e){n("99af"),n("cb29"),n("d81d"),n("4e82"),n("a9e3"),n("b680");var a=n("8050");t["a"]={name:"DesGridLayout",mixins:[a["a"]],data:function(){return{widths:[],heights:[],tableData:[]}},computed:{rowNum:function(){return this.tableData.length},colNum:function(){return this.tableData.length?this.tableData[0].length:0},areas:function(){var t=[],n=e.flattenDeep(this.tableData),a=e.flattenDeep(this.currentData.matrix);return t=n.concat(a),t=e.uniq(t),t=t.sort((function(e,t){return e<t?-1:1})),t=e.map(t,(function(e){return{text:"区域"+e,value:e}})),t}},created:function(){this.tableData=this.owner.layout.matrix,this.widths=dsf.mix(!0,[],this.owner.layout.widths),this.heights=dsf.mix(!0,[],this.owner.layout.heights)},beforeMount:function(){},mounted:function(){},methods:{rowClickHandler:function(){},addCol:function(){for(var e=[],t=0;t<this.rowNum;t++){for(var n=[],a=0;a<=this.colNum;a++)if(a==this.colNum)n.push(t*(this.colNum+1)+a+1);else{var i=this.tableData[t][a],o=(i-1)%this.colNum,s=(i-o-1)/this.colNum;n.push(s*(this.colNum+1)+o+1)}e.push(n)}this.widths=new Array(this.colNum+1).fill(dsf.pxToRem(+(100/(this.colNum+1)).toFixed(3)+"%")),this.tableData=e},addRow:function(){for(var e=[],t=1;t<=this.colNum;t++)e.push(this.colNum*this.rowNum+t);this.tableData.push(e),this.heights.push("46px")},vaildate:function(){return 0!=data.length||(dsf.layer.pc.message("至少存在一格",!1),!1)},deleted:function(e){var t=this;if(e.row.slots[0].controls.length>0){var n=e.row.slots[0].controls;dsf.layer.pc.confirm("栅格中存在"+n.length+"个子组件,删除该单元格子组件将一起被删除。<br/>是否确定要继续?").then((function(){dsf.array.remove(t.tableData,e.row)})).catch((function(){}))}else dsf.array.remove(this.tableData,e.row)},areaChange:function(e,t,n){console.log(e,t,n)},yes:function(){this.owner.layout.widths=this.widths,this.owner.layout.heights=this.heights},checkMaxSpan:function(e,t){e[t]=dsf.isNumber(e[t])?Number(e[t]):null,e[t]&&e[t]>24&&(e[t]=24),e[t]&&e[t]<0&&(e[t]=null)}}}}).call(this,n("2ef0"))},1143:function(e,t,n){"use strict";var a=n("5fbf"),i=n.n(a);i.a},"12c2":function(e,t,n){"use strict";t["a"]="function handler(data, button, owner, self){\r\n  //data:表示当前按钮栏所在作用域的数据\r\n  //button:表示当前按钮对象\r\n  //owner:表示当前按钮组所在的组件\r\n  //self:表示按钮栏目组件\r\n  //this:当前按钮栏所在页面组件对象\r\n  $$0$$;\r\n}"},"12f6":function(e,t,n){"use strict";var a=n("7359"),i=n.n(a);i.a},1485:function(e,t,n){"use strict";(function(e){n.d(t,"d",(function(){return a})),n.d(t,"f",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"g",(function(){return s})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return c})),n.d(t,"h",(function(){return u})),n.d(t,"b",(function(){return d}));n("7db0"),n("4160"),n("3410"),n("159b");var a=function(e,t,n){return e.find((function(e){return(n?e[n]:e.id)===t}))},i=function(e,t){var n;return t.dataset&&t.dataset.id&&e.forEach((function(e){e.id===t.dataset.id&&(n=e)})),n},o=function(e,t,n){var a,i;return n.dataset&&n.dataset.parentId&&e.forEach((function(e){e.id===n.dataset.parentId&&(i=e,e[t].forEach((function(e){e.id===n.dataset.id&&(a=e)})))})),i&&a?{parent:i,sub:a}:void 0},s=function(t){return e(t).data("object")},l=10,r=function(e){var t={x:void 0==e.x?0:e.x,y:void 0==e.y?0:e.y};if(0!=t.x){var n=t.x%l;0!=n&&(t.x=n>l/2?t.x-n+l:t.x-n)}if(0!=t.y){var a=t.y%l;0!=a&&(t.y=a>l/2?t.y-a+l:t.y-a)}return t},c=function(e){var t=Object.getPrototypeOf(e);return Array.isArray(e)?Object.assign([],Object.create(t),e):Object.assign({},Object.create(t),e)},u=function(e){return"".concat(e,"px")},d=function(e){for(var t={},n=0;n<e.rows.length;n++){var a=e.rows[n];if(1==a.nodeLevel)t[a.nodeName]=a.value;else for(var i=t,o=0;o<a.nodeLevel;o++){var s=o+1,l=a["nodeName"+s];o<a.nodeLevel-1?(void 0===i[l]&&(i[l]={}),i=i[l]):void 0===i[l]&&(i[l]=a.value)}}return t}}).call(this,n("1157"))},"14be":function(e,t,n){"use strict";var a=n("a6de"),i=n.n(a);i.a},"160c":function(e,t,n){"use strict";(function(e,a){n("d81d"),n("b0c0"),n("d3b7"),n("e25e"),n("ac1f"),n("25f0"),n("5319"),n("4795");var i=n("5530"),o=n("681c");t["a"]={name:"ExamPage",components:{DsfExamFill:o["b"],DsfExamTrueFalse:o["e"],DsfExamRadioBox:o["c"],DsfExamCheckBox:o["a"],DsfExamSubjective:o["d"]},provide:function(){return{exam:this}},data:function(){return{pageWidth:1170,asideWidth:290,pageType:"exam",namespace:"",examLoading:!0,examTitle:{radio:"单选题",checkbox:"多选题",input:"填空题",judge:"判断题",subjective:"主观题",subjectiveTest:"选答题（请从以下3题中任选2题作答，3题都答得0分)"},examResult:{ys:35,isPass:"",examScore:null,statusValue:4},whether_pop:1,popClose:!1,confirmButtonText:"10s 后可确定",codeDisabled:!1,getAllowSubmit:!0,examTimer:null,isTiming:!0,countDown:0,getTime:null,u:"",e:"",a:"",answerId:"",examInfoData:{},examSubject:[],speedLength:0,componentIs:{radio:o["c"].name,checkbox:o["a"].name,judge:o["e"].name,input:o["b"].name,subjective:o["d"].name},form:{},examMarkActive:[]}},computed:{isDisabled:function(){return"确定"!==this.confirmButtonText}},watch:{form:{handler:function(e,t){console.log("数据变化",e,t)},deep:!0}},created:function(){this.u=dsf.url.queryString("u"),this.e=dsf.url.queryString("e"),this.a=dsf.url.hashString("a"),this.queryData()},mounted:function(){},methods:{queryData:function(){var t=this;dsf.http.all([this.getExamInfo()]).then((function(n){n[0]&&!e.isEmpty(n[0])&&(t.examLoading=!1,t.examInfoData=n[0],t.namespace=t.examInfoData.namespace.replace(/\./g,"_"),t.examInfoData.questions&&t.examInfoData.questions.length>0&&(t.examInfoData=t.loadExamSubject(),t.createExamTimer()))}))},startExam:function(){var e=this;this.popClose=!0;var t=10,n=null;n=setInterval((function(){t--,0===t&&clearInterval(n),e.confirmButtonText=t>0?t+"s 后可确定":"确定"}),1e3)},considerations:function(){this.popClose=!1,this.isTiming=!0,console.log("开始考试",this)},getExamInfo:function(){this.examLoading=!0;this.u,this.e,this.a;return{data:{answerId:"35698343af444140a7be0372caa87374",data:{"exam_paper_00077.C001":"","exam_paper_00077.C010":{},"exam_paper_00077.exam_paper_00077_id":"35698343af444140a7be0372caa87374","exam_paper_00077.C008":"","exam_paper_00077.C009":{},"exam_paper_00077.C006":{},_id:"35698343af444140a7be0372caa87374","exam_paper_00077.C007":{},"exam_paper_00077.C004":{},"exam_paper_00077.C005":{},"exam_paper_00077.C002":"","exam_paper_00077.C003":{}},questions:[{score:{total:20,avg:10},subjects:[{difficulty:"1",column:"2",id:"C005",type:"radio",prompt:'党的<span style="color: rgb(255, 0, 0);">十八届四中全会</span>作出了全面推进依法治国的顶层设计，制定了路线图、施工图，在我国社会主义法治史上具有里程碑意义。来源：《习近平新时代中国特色社会主义思想学习纲要》（学习出版社、人民出版社2019年版）',items:[{id:"6b4a3f9f46f54f68ab07ccedeb89b1a6",text:"十一届三中全会",value:"A"},{id:"f0b8d62a944c4e6e8f0f2c849784e7d8",text:"十一届四中全会",value:"B"},{id:"2e9346e44e4949b98308aa429b724412",text:"十八届三中全会",value:"C"},{id:"7f27b92ac9a6441abe3723902fdfa345",text:"十八届四中全会",value:"D"}],content:"党的（）作出了全面推进依法治国的顶层设计，制定了路线图、施工图，在我国社会主义法治史上具有里程碑意义。来源：《习近平新时代中国特色社会主义思想学习纲要》（学习出版社、人民出版社2019年版）"},{difficulty:"1",column:"3",id:"C006",type:"radio",prompt:'加强和创新社会治理，关键在<span style="color: rgb(255, 0, 0);">体制</span>创新，核心是人。只有人与人和谐相处，社会才会安定有序。来源：《习近平新时代中国特色社会主义思想学习纲要》（学习出版社、人民出版社2019年版）',items:[{id:"f997c79a29914cbf89537e96d405e971",text:"体制",value:"A"},{id:"b6704199a4a44cb587efdb09c9f7e5a5",text:"手端",value:"B"},{id:"28442ab52acc42358865bc76d5f60ca0",text:"形式",value:"C"}],content:"加强和创新社会治理，关键在（）创新，核心是人。只有人与人和谐相处，社会才会安定有序。来源：《习近平新时代中国特色社会主义思想学习纲要》（学习出版社、人民出版社2019年版）"}],type:"radio"},{score:{total:20,avg:10},subjects:[{difficulty:"1",column:"2",id:"C003",type:"checkbox",prompt:'党的十八大以来，以习近平同志为核心的党中央顺应我国经济社会新发展和广大人民群众靳期待，提出了全面建成小康社会新的目标要求，赋予了“小康"更高的标准、更丰富的内涵。全面建成小康社会，意味着<span style="color: rgb(255, 0, 0);">经济高质量发展</span>、<span style="color: rgb(255, 0, 0);">人民生活水平和质量普遍提高</span>、<span style="color: rgb(255, 0, 0);">国民素质和社会文明程度显著提高</span>、<span style="color: rgb(255, 0, 0);">生态环境质量总体改善</span> 、各方面制度更加成熟更加定型。来源：《习近平新时代中国特色社会土义思想学习纲要》（学习出坂社、人民出版社2019年版）',items:[{id:"1d97874aee404792b4cbca739423b34c",text:"经济高质量发展",value:"A"},{id:"40d804f48cc24acd9e4e1a99d313a7f1",text:"人民生活水平和质量普遍提高",value:"B"},{id:"b5945db789fa471da4718426fb4f0ffc",text:"国民素质和社会文明程度显著提高",value:"C"},{id:"4ed1139bb540456aa77eb8d50436aac3",text:"生态环境质量总体改善",value:"D"}],content:'党的十八大以来，以习近平同志为核心的党中央顺应我国经济社会新发展和广大人民群众靳期待，提出了全面建成小康社会新的目标要求，赋予了“小康"更高的标准、更丰富的内涵。全面建成小康社会，意味着（）、（）、（）、（） 、各方面制度更加成熟更加定型。来源：《习近平新时代中国特色社会土义思想学习纲要》（学习出坂社、人民出版社2019年版）'},{difficulty:"1",column:"2",id:"C004",type:"checkbox",prompt:'传承和弘扬中华优秀传统文化，要认真汲取其中的思想精华和道德精髓。深入挖掘和阐发中华优秀传统文化讲仁爱、<span style="color: rgb(255, 0, 0);">重民本</span>、<span style="color: rgb(255, 0, 0);">守诚信</span>、<span style="color: rgb(255, 0, 0);">崇正义</span>、<span style="color: rgb(255, 0, 0);">尚和合</span>、求大同的时代价值，使之成为涵养社会主义核心价值观的重要源泉。来源：《习近平新时代中国特色社会主义思想学习纲要》（学习出版社、人民出版社2019年版）',items:[{id:"b051fe1ae8504bd58daee709e40a8bed",text:"重民本",value:"A"},{id:"136c64b551cf4b229e1cc9ff4b06b817",text:"守诚信",value:"B"},{id:"d413b539ab534bfe94c45ceb1f726044",text:"崇正义",value:"C"},{id:"be902546a59e4d4aae4d805b5501d7c4",text:"尚和合",value:"D"}],content:"传承和弘扬中华优秀传统文化，要认真汲取其中的思想精华和道德精髓。深入挖掘和阐发中华优秀传统文化讲仁爱、（）、（）、（）、（）、求大同的时代价值，使之成为涵养社会主义核心价值观的重要源泉。来源：《习近平新时代中国特色社会主义思想学习纲要》（学习出版社、人民出版社2019年版）"}],type:"checkbox"},{score:{total:20,avg:10},subjects:[{difficulty:"1",column:"2",id:"C009",type:"judge",prompt:"守初心，就是要牢记全心全意为人民服务的根本宗旨，以坚定的理想信念坚守初心，牢记人民对美好生活的向往就是我们的奋斗目标，时刻不忘我们党来自人民、根植人民，永远不能脱离群众、轻视群众、漠视群众疾苦",items:[{id:"ee0d6ed88bf348b9801d4ca398b6c849",text:"全心全意为人民服务、群众对美好生活的向往",value:"A"},{id:"78181d6091e7448ebcbb08db89723db3",text:"全心全意为群众服务、群众对美好未来的向往",value:"B"}],content:"守初心，就是要牢记（）的根本宗旨，以坚定的理想信念坚守初心，牢记（）就是我们的奋斗目标，时刻不忘我们党来自人民、根植人民，永远不能脱离群众、轻视群众、漠视群众疾苦。"},{difficulty:"1",column:"2",id:"C010",type:"judge",prompt:"思想政治受洗礼，重点是教育引导广大党员干部坚定对马克思主义的信仰、对中国特色社会主义的信念，传承红色基因，增强“四个意识”、坚定“四个自信”、做到“两个维护”，自觉在思想上政治上行动上同党中央保持高度一致，始终忠诚于党、忠诚于人民、忠诚于马克思主义。",items:[{id:"4f448c6184b847a0941a4b0a1471d3f6",text:"共产主义、社会主义、红色基因",value:"A"},{id:"c71201bd48a140f980023a6156c00bb1",text:"马克思主义、社会主义、红色文化",value:"B"}],content:"思想政治受洗礼，重点是教育引导广大党员干部坚定对（）的信仰、对（）的信念，传承（），增强“四个意识”、坚定“四个自信”、做到“两个维护”，自觉在思想上政治上行动上同党中央保持高度一致，始终忠诚于党、忠诚于人民、忠诚于马克思主义。"}],type:"judge"},{score:{total:20,avg:10},subjects:[{difficulty:"1",id:"C008",type:"input",prompt:'在我国政治生活中，党是领导一切的，坚持<span style="color: rgb(255, 0, 0);">党的领导</span>、人民当家作主、依法治国有机统一，最根本的是坚持<span style="color: rgb(255, 0, 0);">党的领导</span>。来源：《习近平新时代中国特色社会主义思想学习纲要》（学习出版社、人民出版社2019年版）',content:"在我国政治生活中，党是领导一切的，坚持党的领导、人民当家作主、依法治国有机统一，最根本的是坚持（）（）（）。来源：《习近平新时代中国特色社会主义思想学习纲要》（学习出版社、人民出版社2019年版）",fontNum:[4]},{difficulty:"1",id:"C007",type:"input",prompt:'2019年7月15日至16日，习近平总书记在内蒙古考察并指导开展"不忘初心、牢记使命"主题教育时指出，中华文明植根于<span style="color: rgb(255, 0, 0);">和而不同</span>的多民族文化沃土，历史悠久，是世界上唯一<span style="color: rgb(255, 0, 0);">没有中断</span>、发展至今的文明。',content:'2019年7月15日至16日，习近平总书记在内蒙古考察并指导开展"不忘初心、牢记使命"主题教育时指出，中华文明植根于（）的多民族文化沃土，历史悠久，是世界上唯一（）、发展至今的文明。',fontNum:[4,4]}],type:"input"},{score:{total:20,avg:10},subjects:[{difficulty:"1",id:"C001",type:"subjective",prompt:"<p>井冈山的道路发展的启示：</p>",content:"井冈山的道路发展的启示："},{difficulty:"1",id:"C002",type:"subjective",prompt:"<p>中国特色社会主义道路发展的启示：</p>",content:"中国特色社会主义道路发展的启示："}],type:"subjective"}],remark:"井冈山主题考试",pageName:"index",duration:5236,score:{total:100,pass:60},random:{item:"1",question:"1"},name:"井冈山试题考试",namespace:"exam.paper.00077",allowTime:0,id:"05cff26a6fd94096ba5200291524cf83",state:3},success:!0,state:2e4,message:"成功"}},loadExamSubject:function(){var t=this,n=this.examInfoData.random,a=e.map(this.examInfoData.questions,(function(a){t.speedLength+=a.subjects.length;var o=[],s=a.subjects.length>1&&"1"==n.question?Object(i["a"])(Object(i["a"])({},a),{},{subjects:e.shuffle(a.subjects)}):a;return"checkbox"==a.type||"radio"==a.type||"judge"==a.type?(o=e.map(s.subjects,(function(t){return Object(i["a"])(Object(i["a"])({},t),{},{items:e.shuffle(t.items)})})),Object(i["a"])(Object(i["a"])({},s),{},{subjects:o})):s}));return Object(i["a"])(Object(i["a"])({},this.examInfoData),{},{questions:a})},timeDown:function(e){if(!e)return"00:00:00";var t=e%86400,n=Math.floor(t/3600);t%=3600;var a=Math.floor(t/60),i=t%60;return n=((n||0)+100).toString().substr(1),a=((a||0)+100).toString().substr(1),i=((i||0)+100).toString().substr(1),n+":"+a+":"+i},createExamTimer:function(){var e=this,t=this.examInfoData.duration||0;this.examTimer=window.setInterval((function(){e.isTiming&&(t--,0===e.examInfoData.allowTime&&3===e.examInfoData.state?e.getAllowSubmit=!1:e.examInfoData.allowTime--,10===++e.countDown&&e.saveExamHold(),t<30&&t>1?dsf.layer.message("请注意考试时间还剩余"+t+"秒",!1):t<=0&&(t=0,window.clearInterval(e.examTimer),e.getAllowSubmit=!0,console.log("时间到，强制交卷")),e.getTime=e.timeDown(t),e.popClose&&(e.isTiming=!1))}),1e3)},saveExamHold:function(){var e={C005:{text:"错",value:"B"},C001:[{text:"对",value:"A"},{text:"错",value:"B"}],C002:{text:"错",value:"B"},C003:"中",C004:"gsgs唇形坧二上辰"};this.examInfoData.answerId,this.namespace;this.countDown=0},examPost:function(){var e=this;if(!this.getAllowSubmit&&0===this.examInfoData.allowTime&&3===this.examInfoData.state){this.isTiming=!1;var t="是否现在交卷?";dsf.layer.confirm({title:"提醒",message:t}).then((function(){e.formSave()})).catch((function(){e.isTiming=!0}))}},examParams:function(e){console.log("值",e)},formSave:function(){this.getAllowSubmit=!0,a(document).off("visibilitychange")},toScroll:function(e){var t=a('.ds-exam-content[exam-id="'.concat(e,'"]')).offset().top-10;a("html,body").animate({scrollTop:t},"slow")},bindWindowEvent:function(){var e=this;if(!this.examInfoData.answer){var t=0;a(document).on("visibilitychange",(function(){document.hidden&&"hidden"==document.visibilityState&&(t++,t>5?e.formSave():(dsf.layer.alert({title:"温馨提示",message:"考生跳出答卷页面次数不能超过5次，否则会保存并自动交卷，当前跳出次数为"+t+"次。",showClose:!1}),1===t&&(e.isTiming=!1)))}))}},minutesToSeconds:function(e){var t=new Date,n=new Date(t.getTime()+60*e*1e3),a=parseInt((n-t)/1e3);return a}}}}).call(this,n("2ef0"),n("1157"))},"16f6":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-tree-select",class:[e.theme],style:{"padding-top":e.searchControl?"50px":"0"}},[e.searchControl?n("div",{staticClass:"ds-tree-select-search-box"},[n("el-input",{attrs:{placeholder:"输入关键词（多个关键词空格隔开）"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[n("i",{staticClass:"iconfont icon-Magnifier",attrs:{slot:"suffix"},slot:"suffix"})])],1):e._e(),n("div",{staticClass:"ds-tree-select-tree-box"},[e.multiple?n("el-tree",{ref:"tree",attrs:{"default-expand-all":"",data:e.treeData,"node-key":e.nodeKey,"empty-text":e.loading?"数据加载中...":e.emptyText,"show-checkbox":e.multiple,"default-checked-keys":e.defaultCheckedKeys,"filter-node-method":e.filterNode},on:{check:e.check,"node-click":e.nodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,i=t.data;return n("div",{staticClass:"custom-tree-node"},[void 0!==i.children?[n("i",{staticClass:"iconfont",class:[a.expanded?"icon-dakai":"icon-wenjianjia"]}),n("span",[e._v(e._s(i[e.nodeName]))])]:[n("i",{staticClass:"iconfont icon-shiyongwendang"}),n("span",[e._v(e._s(i[e.nodeName]))])]],2)}}],null,!1,331581664)}):n("el-tree",{ref:"tree",attrs:{"default-expand-all":"",data:e.treeData,"node-key":e.nodeKey,"empty-text":e.loading?"数据加载中...":e.emptyText,"show-checkbox":e.multiple,"default-checked-keys":e.defaultCheckedKeys,"filter-node-method":e.filterNode},on:{check:e.check,"node-click":e.nodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,i=t.data;return n("div",{staticClass:"custom-tree-node"},[void 0!==i.children?[n("i",{staticClass:"iconfont",class:[a.expanded?"icon-dakai":"icon-wenjianjia"]}),n("span",[e._v(e._s(i[e.nodeName]))])]:n("el-radio",{attrs:{label:i[e.nodeKey],disabled:i.nocheck},model:{value:e.radioId,callback:function(t){e.radioId=t},expression:"radioId"}},[n("i",{staticClass:"iconfont icon-shiyongwendang"}),n("span",[e._v(e._s(i[e.nodeName]))])])],2)}}])})],1)])},i=[],o=(n("99af"),n("4de4"),n("c975"),n("a9e3"),n("ac1f"),n("1276"),n("498a"),n("4795"),0),s={name:"DsfTreeSelect",props:{theme:{type:String,default:"theme1"},searchControl:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},radioCanCancel:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},emptyText:{type:String,default:"暂无数据"},nodeKey:{type:String,default:""},nodeName:{type:String,default:"label"},defaultExpandAll:{type:Boolean,default:!1},defaultExpandedKeys:{type:Array,default:function(){return[]}},defaultCheckedKey:{type:[Array,String,Number],default:function(){return[]}},treeData:{type:Array,default:function(){return[]}}},data:function(){return{keyword:"",radioId:"",defaultCheckedKeys:[]}},computed:{keywords:function(){var e=this.keyword.trim();return""===e?[]:e.split(" ")}},watch:{keyword:function(e){this.$refs.tree.filter(e)},defaultCheckedKey:function(e){this.initDefaultCheckedKeys(e)},loading:function(e){if(!e&&this.treeData.length)if(this.multiple)this.handleCheckChange();else{var t=this.$refs.tree.getNode(this.radioId);t&&(this.$emit("choose-node",t.data),this.$emit("choose-key",this.radioId))}}},created:function(){this.initDefaultCheckedKeys(this.defaultCheckedKey)},mounted:function(){if(this.loading)if(this.multiple)this.treeData.length&&this.handleCheckChange();else{var e=this.$refs.tree.getNode(this.radioId);e&&(this.$emit("choose-node",e.data),this.$emit("choose-key",this.radioId))}},methods:{filterNode:function(e,t,n){if(!this.keywords.length)return!0;if(n.parent){if(n.parent.visible&&n.parent.filterText===e)return n.filterText=e,!0}else n.filterText=null;for(var a=0;a<this.keywords.length;a++)if(-1===t[this.nodeName].indexOf(this.keywords[a]))return n.filterText=e,!1;return n.filterText=e,!0},check:function(){this.handleCheckChange()},initDefaultCheckedKeys:function(e){this.multiple?"array"!==dsf.type(e)?this.defaultCheckedKeys=[e]:this.defaultCheckedKeys=e:"array"===dsf.type(e)?this.radioId=e.length?e[0]:"":this.radioId=e},nodeClick:function(e){var t=this;if(!this.multiple&&!e.children){var n=null,a=null;e[this.nodeKey]!==this.radioId?(n=e,a=e[this.nodeKey]):this.radioCanCancel&&setTimeout((function(){t.radioId=""}),0),clearTimeout(o),o=setTimeout((function(){t.$emit("choose-node",n),t.$emit("choose-key",a)}),50)}for(var i=arguments.length,s=new Array(i>1?i-1:0),l=1;l<i;l++)s[l-1]=arguments[l];this.$emit.apply(this,["node-click",e].concat(s))},handleCheckChange:function(){this.$emit("choose-node",this.$refs.tree.getCheckedNodes(!0)),this.$emit("choose-key",this.$refs.tree.getCheckedKeys(!0))},getNode:function(e){return this.$refs.tree.getNode(e)}}},l=s,r=n("2877"),c=Object(r["a"])(l,a,i,!1,null,null,null);t["a"]=c.exports},"1f8f":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return r})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"i",(function(){return h})),n.d(t,"h",(function(){return p}));n("a15b"),n("acd8"),n("ac1f"),n("1276");var a=n("452f"),i=n.n(a),o={vertical:"vertical",horizontal:"horizontal"},s={Left:"left",Right:"right",Top:"top",Bottom:"bottom",LeftTop:"leftTop",LeftBottom:"leftBottom",RightTop:"rightTop",RightBottom:"rightBottom"},l={vertical:"vertical",horizontal:"horizontal"},r={Left:"left",Right:"right",Top:"top",Bottom:"bottom"},c={width:40,height:44},u={width:200,height:124},d={width:500,height:304},h=7,p={uuid:function(e,t){var n,a,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=i,s=[];if(e=e||32,t=t||o.length,e)for(n=0;n<e;n++)s[n]=o[0|Math.random()*t];else for(s[8]=s[13]=s[18]=s[23]="",s[14]="4",n=0;n<36;n++)s[n]||(a=0|16*Math.random(),s[n]=o[19==n?3&a|8:a]);return s.join("")},laneTextRotate:function(e){e.css("transform","rotate(-90deg) translateX(-"+e.outerWidth()+"px)")},getNodeCenter:function(e){var t=e.point.x,n=e.point.y;return t+=e.width/2,n+=e.height/2,{x:t,y:n}},getNodeArriswiseAngle:function(e){var t={x:e.point.x,y:e.point.y},n={x:e.point.x+e.width,y:e.point.y+e.height},a=this.getAngle(t,n);return a},getNodeDirection:function(e,t){var n="",a=this.getNodeArriswiseAngle(e),i=this.getNodeCenter(e),o=t,s=this.getAngle({x:i.x,y:i.y},{x:o.x,y:o.y}),l=a;return n=0==s||s>=360-l||s<=l?r.Right:90==s||s>l&&s<=180-l?r.Bottom:270==s||s>180+l&&s<360-l?r.Top:r.Left,n},getDirection:function(e,t){var n="",a=this.getAngle({x:parseFloat(e.x),y:parseFloat(e.y)},{x:parseFloat(t.x),y:parseFloat(t.y)});return 0==a||360==a?n=s.Right:a>0&&a<90?n=s.RightBottom:90==a?n=s.Bottom:a>90&&a<180?n=s.LeftBottom:180==a?n=s.Left:a>180&&a<270?n=s.LeftTop:270==a?n=s.Top:a>270&&a<360&&(n=s.RightTop),n},getRadina:function(e,t,n){var a=Math.atan((t.y-e.y)/(t.x-e.x));return 0!=n&&(t.y-e.y>0&&t.x-e.x<0||t.y-e.y<0&&t.x-e.x<0?a+=Math.PI:t.y-e.y<0&&t.x-e.x>0&&(a+=2*Math.PI),t.x<e.x&&t.y==e.y?a=Math.PI:t.x==e.x&&t.y<e.y&&(a=1.5*Math.PI)),a},getAngle:function(e,t){var n=this.getRadina(e,t),a=180/(Math.PI/n);return a},angleToRadina:function(e){return e*Math.PI/180},getLineLength:function(e,t){var n=t.x-e.x,a=t.y-e.y,i=Math.sqrt(Math.pow(n,2)+Math.pow(a,2));return i},getNodeJoinPoint:function(e){var t=this.getNodeCenter(e),n={top:{x:t.x,y:t.y-e.height/2},bottom:{x:t.x,y:t.y+e.height/2},left:{x:t.x-e.width/2,y:t.y},right:{x:t.x+e.width/2,y:t.y}};return n},convertSegmentByPoint:function(e){for(var t=[],n=0;n<e.length;n++){var a=e[n],i=e[n+1];a&&i&&t.push({sp:a,ep:i})}return t},getLineType:function(e){return e.sp.y==e.ep.y?l.horizontal:e.sp.x==e.ep.x?l.vertical:void 0},segmentsIntr:function(e,t,n,a){var i=t.y-e.y,o=e.x-t.x,s=a.y-n.y,l=n.x-a.x,r=i*l-o*s;if(0==r)return!1;var c=s*n.x+l*n.y,u=s*e.x+l*e.y-c,d=s*t.x+l*t.y-c;if(u*d>=0)return!1;var h=i*e.x+o*e.y,p=i*n.x+o*n.y-h,f=i*a.x+o*a.y-h;if(p*f>=0)return!1;var m=u/r,g=m*o,y=-m*i;return{x:e.x+g,y:e.y+y}},drawArrow:function(e){var t=8,n=e.ep.x,a=e.ep.y,o=p.getAngle(e.sp,e.ep),s=i.a.rad(o-25),l=i.a.rad(o+25),r=n-Math.cos(s)*t,c=a-Math.sin(s)*t,u=n-Math.cos(l)*t,d=a-Math.sin(l)*t,h=["M",n,a,"L",r,c,"L",u,d,"Z"];return h}}},"20eb":function(e,t,n){},2191:function(e,t,n){},"2ebd":function(e,t,n){"use strict";(function(e){n("4de4"),n("4160"),n("caad"),n("a15b"),n("d81d"),n("b0c0"),n("ac1f"),n("2532"),n("1276"),n("159b");var a=n("8050");t["a"]={name:"DesUploadFileAttr",mixins:[a["a"]],data:function(){return{tabsValue:"0",allowExtObj:{},fileExtArr:[],isLinkeMine:!0,extsSetting:{},fileType:"file",choosenExtsStr:""}},created:function(){this.tabsValue=this.owner.extsSetting.tabIndex||"0",this.getExtObj()},methods:{getExtObj:function(){var t=this;this.$http.get("./static/pd_other/uploadFileExt.json").done((function(n){t.allowExtObj=n,t.fileExtArr=n.file,e.map(t.fileExtArr,(function(n){if(t.owner.extsSetting.CheckedNameStr){var a=t.owner.extsSetting.CheckedNameStr;n.checkStatus=a.includes(n.itemKey)}else{var i=t.owner.extsSetting.extStr;i&&(n.checkType=e.map(n.children,(function(e){return i.includes(e.name)?e.title+"&"+e.value:""})),t.choosenExtsStr=e.filter(i.split(","),(function(e){return""!==e})).join(),t.isLinkeMine=t.owner.extsSetting.isLinkeMine,t.fileType=t.owner.extsSetting.fileType)}n.file={title:e.map(n.children,(function(e){return e.title})).join(),value:e.map(n.children,(function(e){return e.value})).join()}}))})).error((function(e){dsf.error(e)}))},handleFileType:function(e){this.fileType=e},handleCheckedChange:function(){var t="",n="",a="";if("1"==this.tabsValue){var i=e.filter(this.fileExtArr,(function(e){return e.checkType.length}));e.map(i,(function(t){e(t.checkType).forEach((function(e){n+=e.split("&")[0].substr(1)+",",a+=e.split("&")[1]+","}))})),this.choosenExtsStr=e.filter(n.split(","),(function(e){return""!==e})).join(),this.extsSetting={CheckedNameStr:t,extStr:n,mineStr:a}}else{var o=e.filter(this.fileExtArr,(function(e){return e.checkStatus}));e(o).forEach((function(e){t+=e.itemKey+",",n+=e.file.title+",",a+=e.file.value+","})),this.extsSetting={CheckedNameStr:t,extStr:n,mineStr:a}}},handleClick:function(e){this.tabsValue=e.index},yes:function(){return this.owner.extsSetting=Object.assign({},this.extsSetting,{fileType:this.fileType,isLinkeMine:this.isLinkeMine,tabIndex:this.tabsValue}),this.owner.extsSetting}}}}).call(this,n("2ef0"))},"2f1f":function(e,t,n){"use strict";t["a"]="dsf.define(function() {\r\n  return {\r\n    //this.nameSpace获取当前页面命名空间\r\n    //this.pageName获取当前页面的名称\r\n    //this.$viewData中存储表单的数据\r\n    //this.$viewInitData中存储了页面初始化接口获取的数据源、默认值、权限等信息\r\n    //this.queryString获取当前页面的查询字符参数\r\n    //this.frames获取页面中viewPart组件内嵌的内页组件\r\n    //this.$parentView获取被frame嵌套的父页面组件\r\n    data: function() {\r\n      return {}\r\n    },\r\n    created: function() {\r\n    },\r\n    mounted: function() {\r\n    },\r\n    activated:function(){\r\n    },\r\n    deactivated:function(){\r\n    },\r\n    //=======二次开发额外增加的钩子函数 start ===============\r\n    //用于页面初始化数据查询完成，已经获取了表单组件的默认值及下拉框等枚举类组件的数据\r\n    inited: function(data, next) {\r\n      next();\r\n    },\r\n    //用于页面数据读取完成，仅对页面类型为表单时有效\r\n    dataLoaded: function(data, next) {\r\n      next();\r\n    },\r\n    //页面全部加载完成，且元素都已经挂载\r\n    ready:function(){\r\n      \r\n    },\r\n    //表单提交保存验证前触发，此处可以对ignoreValidate属性进行配置设置为true可以忽略表单验证\r\n    validateBefore:function(next,options){\r\n      next();\r\n    },\r\n    //表单提交保存验证后触发\r\n    validateAfter:function(next,options){\r\n      next();\r\n    },\r\n    //表单保存前钩子函数\r\n    saveBefore:function(next,options){\r\n      next();\r\n    },\r\n    //表单保存成功后钩子函数,result为保存后服务器返回的新数据\r\n    saveAfter:function(next,result,options){\r\n      next();\r\n    },\r\n    //表单保存后(无论成功或者失败)钩子函数,result为null表示保存失败否则为保存后服务器返回的新数据\r\n    saveComplete:function(result){\r\n      \r\n    },\r\n    //=======二次开发额外增加的钩子函数 end   ===============\r\n    methods: {\r\n     \r\n    }\r\n  }\r\n});"},"302f":function(e,t,n){},"30b6":function(e,t,n){"use strict";var a=n("a1d1"),i=n.n(a);i.a},3364:function(e,t,n){"use strict";(function(e){n("d81d"),n("fb6a"),n("4e82"),n("b0c0"),n("a9e3"),n("e25e");var a=n("16f6");t["a"]={name:"EnumEditorItem",components:{DsfTreeSelect:a["a"]},props:{value:{type:Object,required:!0},emptyText:{type:String,default:"请选择"},treeLoading:{type:Boolean,default:!1},treeData:{type:Array,default:function(){return[]}},tablePost:{type:Function,default:function(){}},type:{type:String,required:!0},hideRight:{type:Boolean,default:!1},nameKey:{type:String,default:"label",desc:"树节点已哪个字段作为名称"},idKey:{type:String,default:"ID"},defaultCheckedKey:{type:[String,Number],default:""}},data:function(){return{loading:!1,radioId:null,pageSize:100,pageNum:1,metaTree:{},currentRowKey:"",val:this.value.code?this.value:{type:this.type,code:null,attach:[]}}},computed:{total:function(){var e=this.value;return this.metaTree.attach&&(e=this.metaTree),e.attach.length},startIndex:function(){return this.pageNum*this.pageSize-this.pageSize},tableList:function(){var e=this.value;return this.metaTree.attach&&(e=this.metaTree),e.attach.slice(this.startIndex,this.startIndex+this.pageSize)}},watch:{radioId:function(e,t){var n=this;if("meta"===this.type||"ds"===this.type)this.val["chooseKey"]=e;else{var a={type:this.type,code:this.radioId,attach:[]};this.$emit("input",a),this.$emit("change",a),this.pageNum=1,e&&e!==t&&(this.loading=!0,this.tablePost(e,(function(e){n.updateValue(e),n.loading=!1})))}}},created:function(){var e=this;if(this.value){var t=this.value.chooseKey||this.value.code;t&&(this.radioId=t,this.loading=!0,this.tablePost(t,(function(t){e.updateValue(t),e.loading=!1})))}},methods:{tableRowClassName:function(e){var t=e.row;return this.currentRowKey===t["value"]?"current-row":""},chooseNode:function(t){if("meta"===this.type){var n=[],a=function(a){var i=e.extend({},t.metadata[a]);i["text"]=i.name,i["value"]=i.id,i.valueAttributes&&i.valueAttributes.length>1&&(i["children"]=i.valueAttributes.map((function(e){return e.text=e.name,e.value=i.id+"_"+e.code,e.at=i.at,e}))),n.push(i)};for(var i in t.metadata)a(i);n=n.sort((function(e,t){var n=e.order?parseInt(e.order):0,a=t.order?parseInt(t.order):0;return n<a?-1:1})),this.updateValue(n)}else if("ds"===this.type){var o={type:this.type,code:t.dsfa_rm_id,attach:[],chooseKey:t[this.idKey]};this.$emit("input",o),this.$emit("change",o)}},updateValue:function(e){var t={type:this.type,code:this.radioId,attach:e};"meta"===this.type&&(this.metaTree=t),this.$emit("input",t),this.$emit("change",t)},handleCurrentChange:function(e){e&&e.children?(this.$refs.singleTable.setCurrentRow(),this.$refs.singleTable.toggleRowExpansion(e),this.currentRowKey="",this.val.code=null):e&&(this.currentRowKey=e["value"],this.val.code=e)},getResult:function(){this.$emit("input",this.val),this.$emit("change",this.val)},initMetaTable:function(){this.radioId&&"meta"===this.type&&this.$refs.singleTable.setCurrentRow(this.value.code)}}}}).call(this,n("1157"))},"337f":function(e,t,n){"use strict";(function(e){n("4de4"),n("d81d"),n("b0c0"),n("b64b"),n("d3b7"),n("acd8"),n("e25e"),n("25f0");var a=n("8050");t["a"]={name:"DesValidateRule",mixins:[a["a"]],data:function(){return{activeName:"base",valueAttributes:[],currentNodeKey:"",treeConfig:{label:"name"},formModel:{},errorMsg:{required:"该项必须填写",isNumber:"该项必须填写数字",min:"该项长度不可小于@[min]个字符",max:"该项长度不可大于@[max]个字符",numberMin:"该项不可小于@[min]",numberMax:"该项不可大于@[max]",express:"@[expressName]格式不正确",precision:"小数点后最多保留@[precision]位小数"},javascript:"",expressOptions:[{expressName:"",text:"",value:""},{expressName:"身份证号码",text:"身份证号码",value:"isIDCard"},{expressName:"身份证号码",text:"身份证号码(强校验)",value:"isIDCardFull"},{expressName:"手机号码",text:"手机号码",value:"isMobile"},{expressName:"电话号码",text:"电话号码",value:"isTelPhone"},{expressName:"电话/手机号码",text:"电话/手机号码",value:"isMobileOrTelPhone"},{expressName:"电子邮箱",text:"电子邮箱",value:"isEmail"},{expressName:"车牌号",text:"车牌号",value:"isPlateNumber"}],metaDataValidateConfig:null}},computed:{ownerCtrl:function(){return this.owner.$$getComponent()},model:function(){return this.formModel[this.currentNodeKey]}},created:function(){var t=this;this.valueAttributes=dsf.mix(!0,[],this.ownerCtrl.metadata.valueAttributes),this.currentNodeKey=this.valueAttributes[0].code,this.ownerCtrl.metadata.validate&&this.ownerCtrl.metadata.validate.config&&(this.metaDataValidateConfig=dsf.mix(!0,{},this.ownerCtrl.metadata.validate.config)),this.metaDataValidateConfig||(this.metaDataValidateConfig={}),e.each(this.valueAttributes,(function(e){var n=e.code;t.ownerCtrl.metadata&&(t.$set(t.metaDataValidateConfig,n,t.createValideConfig(n)),t.setFormModel(n,t.metaDataValidateConfig[n]))})),this.javascript=this.currentData&&this.currentData.code||""},methods:{yes:function(){var t=this,n={config:null,code:null},a="";if(a)return n.code=a,n;var i={},o=function(n){var a=t.formModel[n],o=a.required,s=a.isNumber,l=a.isNumber?a.numberMin:a.min,r=a.isNumber?a.numberMax:a.max,c=a.isNumber?a.precision:"",u=a.express;if(!o&&!s&&!l&&!r&&!c&&!u)return"continue";var d=e.filter(t.expressOptions,(function(e){return e.value==a.express}));a.expressName=e.map(d,"expressName"),i[n]=a};for(var s in this.formModel)o(s);return 0==Object.keys(i).length?null:(n.config=i,n)},createValideConfig:function(e){var t={required:!1,isNumber:!1,min:"",max:"",express:"",expressName:"",precision:"",errorMsg:dsf.mix({},this.errorMsg)};if(this.metaDataValidateConfig[e]){var n=this.metaDataValidateConfig[e];return dsf.mix(!0,t,n),dsf.mix(n,t)}return dsf.mix({},t)},setFormModel:function(e,t){var n={};n.required=t.required,n.isNumber=t.isNumber,t.isNumber?(n.numberMin=t.min,n.numberMax=t.max,n.precision=t.precision):(n.min=t.min,n.max=t.max,n.precision=""),n.express=t.express,n.expressName=t.expressName,n.errorMsg=t.errorMsg,this.$set(this.formModel,e,n)},tabsCliekHandler:function(e){var t=this;this.$nextTick((function(){var n=e.name,a=n+"Editor";t.$refs[a]&&t.$refs[a].layout()}))},editorLoaded:function(e){var t=e+"Editor";this.$refs[t]&&this.$refs[t].setContent(this.javascript)},checkNum:function(e,t){if(this.model[e]){var n=t?parseInt:parseFloat;this.model[e]=n(this.model[e]).toString(),dsf.isNumber(this.model[e])||(this.model[e]="")}},nodeClickHandler:function(e){this.currentNodeKey=e.code}}}}).call(this,n("2ef0"))},"341c":function(e,t,n){"use strict";var a=n("302f"),i=n.n(a);i.a},"358f":function(e,t,n){"use strict";(function(e){n("c740"),n("d81d"),n("ac1f"),n("5319"),n("2ca0"),n("498a");var a=n("2909"),i=n("8050"),o=n("8b23"),s=n("12c2"),l=/^\s*function(\s+\w*)?\(.*\)\s*{/g;t["a"]={name:"DesButtonEdit",mixins:[i["a"]],props:{defaultShowText:{type:Boolean,default:!0},defaultButtonStyle:{type:String,default:""},isDblClickBind:{type:Boolean,default:!1}},data:function(){return{tableData:[],formModel:{},sysButtonSelect:!1,treeData:[],defaultProps:{label:"text",children:"buttons"}}},created:function(){var e=dsf.mix(!0,[],this.currentData);this.tableData=e,this.treeData=o["a"].groups},mounted:function(){},methods:{openSysButtonSelect:function(){this.$refs.tree&&this.$refs.tree.setCheckedKeys([]),this.sysButtonSelect=!0},allowEdit:function(){return!dsf.isEmptyObject(this.formModel)},addSysButton:function(){var t,n=this,i=this.$refs.tree.getCheckedNodes(!0),o=e.map(i,(function(e){var t=n.createButton(e,!0);return n.defaultShowText||(t.text=""),n.defaultButtonStyle&&(t.btnStyle=n.defaultButtonStyle),t.icon||(t.icon="icon-shezhi"),!t.title&&t.text&&(t.title=t.text),t}));(t=this.tableData).push.apply(t,Object(a["a"])(o)),this.sysButtonSelect=!1},addCustomButton:function(){var e=this.createButton({caption:"自定义按钮",text:this.defaultShowText?"新增按钮":"",btnStyle:this.defaultButtonStyle?this.defaultButtonStyle:"",icon:"icon-shezhi"});this.tableData.push(e)},closeSysButtonSelect:function(){this.sysButtonSelect=!1},yes:function(){return this.tableData},rowClickHandler:function(e){this.formModel=e},createButton:function(e,t){var n={caption:"",text:"",alias:"",icon:"",btnStyle:"",title:"",isSystem:t,actionName:"",if:"",flowSendOverEvent:"",type:"",isMore:!1,isLinkSend:!1,disabled:!1,isDblClick:!1,params:[]},a=dsf.mix(!0,{},n,e);return a},openIcon:function(){window.open(dsf.url.getWebPath("$/pc/iconfont/demo_index.html"),"icondemo")},getIcon:function(e){var t="icon-";return e.startsWith(t)?e.substr(t.length):e},removeButton:function(e){dsf.array.remove(this.tableData,e)},up:function(t){var n=e.findIndex(this.tableData,(function(e){return e==t}));if(n>0){var a=this.tableData[n-1];this.$set(this.tableData,n-1,t),this.$set(this.tableData,n,a)}},down:function(t){var n=e.findIndex(this.tableData,(function(e){return e==t}));if(n>0){var a=this.tableData[n+1];this.$set(this.tableData,n+1,t),this.$set(this.tableData,n,a)}},dblClickChange:function(t){var n=this;!0===t&&e.each(this.tableData,(function(e){n.formModel!=e&&(e.isDblClick=!1)}))},openEditor:function(e,t){if(!t){var n=e.value.trim();n?this.testCodeBlock(e)||(n=s["a"].replace("$$0$$","return "+JSON.stringify(n))):n=s["a"].replace("$$0$$","return ''"),dsf.layer.pc.openDialog({title:"代码编辑",fullscreen:!0,overflow:"hidden",content:"MonacoEditor",params:{code:n,language:"javascript"},btns:[{text:"确定",handler:function(t){e.value=t.getContent()}},{text:"取消"}]})}},testCodeBlock:function(e){var t=e.value.trim();return!!t&&(l.lastIndex=0,l.test(t))}}}}).call(this,n("2ef0"))},"35ad":function(e,t,n){},"35b5":function(e,t,n){"use strict";n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0");var a=n("b85c"),i=n("d4ec"),o=n("bee2"),s=function(){function e(){Object(i["a"])(this,e),this.events=new Map}return Object(o["a"])(e,[{key:"on",value:function(e,t){void 0===this.events.get(e)?this.events.set(e,t):console.log(e+" 注册器重名")}},{key:"emit",value:function(e,t){this.events.get(e)&&this.events.get(e)(t)}},{key:"off",value:function(e){this.events.delete(e)}},{key:"clear",value:function(){this.events.clear()}},{key:"$getAllListener",value:function(){var e,t=this.events.entries(),n={},i=Object(a["a"])(t);try{for(i.s();!(e=i.n()).done;){var o=e.value;console.log(o),n[t[o][0]]=t[o][1]}}catch(err){i.e(err)}finally{i.f()}return n}}]),e}(),l=new s;window.$seatEventBus=l,t["a"]=l},"38af":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-tool-item ellipsis",attrs:{title:e.title,name:e.data.name}},[e._v(" "+e._s(e.data.name||e.data.id)+" ")])},i=[],o=(n("a15b"),n("b0c0"),{name:"DsfMetaDataItem",props:{data:{type:Object,default:function(){return null}}},computed:{title:function(){var e=this.data,t=e.data,n=e.id,a=e.name;return["ID：",n,"\n","标识：",t.code,"\n","名称：",a].join("")}}}),s=o,l=n("2877"),r=Object(l["a"])(s,a,i,!1,null,null,null);t["a"]=r.exports},"3a9e":function(e,t,n){"use strict";var a=n("01c2"),i=n.n(a);i.a},"44a3":function(e,t,n){},"46bb":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-box"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.canvasSet,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"画布宽"}},[n("el-input-number",{attrs:{controls:!1,precision:0,placeholder:"自适应"},model:{value:e.canvasSet.width,callback:function(t){e.$set(e.canvasSet,"width",t)},expression:"canvasSet.width"}})],1),n("el-form-item",{attrs:{label:"画布高"}},[n("el-input-number",{attrs:{controls:!1,disabled:e.hasBg,precision:0,placeholder:"自适应"},model:{value:e.canvasSet.height,callback:function(t){e.$set(e.canvasSet,"height",t)},expression:"canvasSet.height"}})],1)],1)],1)},i=[],o=n("5c4e"),s=o["a"],l=n("2877"),r=Object(l["a"])(s,a,i,!1,null,null,null);t["a"]=r.exports},"46bd":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"seat-item-container"},[e.verLine.visible?n("div",{staticClass:"vertical-line",style:e.verLineSty}):e._e(),e.horLine.visible?n("div",{staticClass:"horizontal-line",style:e.horLineSty}):e._e(),e.selectPosition.visible?n("div",{staticClass:"selected-box",style:e.selectSty,on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.selectMove(t)}}},[n("div",{staticClass:"select"},[n("div",{staticClass:"anchor circle",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.selectRotate(t)}}}),n("div",{staticClass:"anchor line"}),n("div",{staticClass:"anchor lt",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.selectScale(t,"lt")}}}),n("div",{staticClass:"anchor t",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.selectScale(t,"t")}}}),n("div",{staticClass:"anchor rt",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.selectScale(t,"rt")}}}),n("div",{staticClass:"anchor l",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.selectScale(t,"l")}}}),n("div",{staticClass:"anchor r",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.selectScale(t,"r")}}}),n("div",{staticClass:"anchor lb",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.selectScale(t,"lb")}}}),n("div",{staticClass:"anchor b",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.selectScale(t,"b")}}}),n("div",{staticClass:"anchor rb",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.selectScale(t,"rb")}}}),n("div",{staticClass:"anchor info"},[e._v(" 宽:"+e._s(e.selectPosition.width)+";高:"+e._s(e.selectPosition.height)+";角度:"+e._s(e.selectPosition.angle)+" ")])])]):e._e(),e._l(e.items,(function(t,a){return n("div",{key:t.id,staticClass:"seat-box",class:{active:e.activeId===t.id},style:e.getItemSty(t),on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preMove(n,t)},contextmenu:function(n){return e.popMenu(n,t)}}},[n("div",{staticClass:"seat"},[n("div",{staticClass:"anchor circle",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preRotate(n,t)}}}),n("div",{staticClass:"anchor line"}),n("div",{staticClass:"anchor lt",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"lt")}}}),n("div",{staticClass:"anchor t",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"t")}}}),n("div",{staticClass:"anchor rt",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"rt")}}}),n("span",{style:e.getSpanSty(t)},[e._v(e._s(t.seatTxt))]),n("div",{staticClass:"anchor l",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"l")}}}),n("div",{staticClass:"anchor r",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"r")}}}),n("div",{staticClass:"anchor lb",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"lb")}}}),n("div",{staticClass:"anchor b",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"b")}}}),n("div",{staticClass:"anchor rb",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"rb")}}}),n("div",{staticClass:"anchor info"},[e._v("宽:"+e._s(t.width)+";高:"+e._s(t.height)+";角度:"+e._s(t.angle))])])])})),e._l(e.groups,(function(t,a){return n("div",{key:t.id,staticClass:"group-box",class:{active:e.activeId===t.id},style:e.getItemSty(t),on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preMove(n,t)}}},[n("div",{staticClass:"group"},[n("div",{staticClass:"anchor circle",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preRotate(n,t)}}}),n("div",{staticClass:"anchor line"}),n("div",{staticClass:"anchor lt",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"lt")}}}),n("div",{staticClass:"anchor t",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"t")}}}),n("div",{staticClass:"anchor rt",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"rt")}}}),n("div",{staticClass:"anchor l",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"l")}}}),n("div",{staticClass:"anchor r",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"r")}}}),n("div",{staticClass:"anchor lb",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"lb")}}}),n("div",{staticClass:"anchor b",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"b")}}}),n("div",{staticClass:"anchor rb",on:{mousedown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:e.preScale(n,t,"rb")}}}),n("div",{staticClass:"anchor info"},[e._v("宽:"+e._s(t.width)+";高:"+e._s(t.height)+";角度:"+e._s(t.angle))]),e._l(t.member,(function(t,a){return n("div",{key:t.id,staticClass:"member",style:e.getItemSty(t)})}))],2)])}))],2)},i=[],o=n("0e69"),s=o["a"],l=n("2877"),r=Object(l["a"])(s,a,i,!1,null,null,null);t["a"]=r.exports},"50cf":function(e,t,n){},5177:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"subprocess"},[n("lines",{attrs:{"is-draw-line":e.isDrawLine,"parent-node":e.parentNode,lines:e.lines,nodes:e.nodes,events:e.events,checked:e.checked,"is-sub":!0,config:e.config}}),n("nodes",{attrs:{"is-draw-line":e.isDrawLine,"parent-node":e.parentNode,nodes:e.nodes,checked:e.checked,config:e.config,"is-sub":!0,"data-id":e.parentNode.id}}),n("events",{attrs:{"is-draw-line":e.isDrawLine,"parent-node":e.parentNode,nodes:e.nodes,events:e.events,checked:e.checked,"is-sub":!0,config:e.config}})],1)},i=[],o=n("839b"),s=n("7f74"),l={name:"Subprocess",components:{Lines:o["a"],Events:s["a"]},props:{lines:{type:Array,default:function(){return[]}},nodes:{type:Array,default:function(){return[]}},events:{type:Array,default:function(){return[]}},isDrawLine:{type:Boolean,default:function(){return!1}},checked:{type:Object,default:function(){return{}}},config:{type:Object,default:function(){return{}}},parentNode:{type:Object,default:function(){return{}}}}},r=l,c=n("2877"),u=Object(c["a"])(r,a,i,!1,null,"0164dd08",null);t["a"]=u.exports},5189:function(e,t,n){"use strict";var a=n("aaf5"),i=n.n(a);i.a},5287:function(e,t,n){"use strict";(function(e){n("c975");var a=n("2909"),i=n("8050");function o(e,t){var n=e.parent,a=n.childNodes.indexOf(e),i="up"==t?a>0:a<=n.childNodes.length-1;if(i){var o="up"==t?a-1:a+1,s=n.childNodes[o];this.$set(n.data.children,o,e.data),this.$set(n.data.children,a,s.data),this.$set(n.childNodes,o,e),this.$set(n.childNodes,a,s)}}function s(){var e={id:"",level:0,label:"",headerAlign:"center",align:"center",columnId:"",children:[],hide:!1,resizable:!1};return dsf.mix({},e)}t["a"]={name:"DesColumnsEdit",mixins:[i["a"]],data:function(){return{isReload:!1,tableData:[],columns:[],data:[],treeData:[{id:dsf.uuid(),label:"表头",isRoot:!0,level:-1,children:[]}],defaultProps:{children:"children",label:"label"},form:null,formNode:null,formDisabled:{label:"",align:"center",headerAlign:"center",hide:!1,width:"",readOnly:!0}}},watch:{"form.hide":{handler:function(e){var t=this.form;if(t&&!t.readOnly){if(this.formNode&&t.level>0){var n=this.formNode.parent.data.hide;if(n&&n!=e)return dsf.layer.pc.message("父列为隐藏状态时子列不可设置显示状态",!1),void(t.hide=n)}this.deep(t,(function(t){t.hide=e}))}}}},created:function(){this.form=this.formDisabled},mounted:function(){if(this.owner){var e,t=this.owner.$$getComponent(),n=dsf.mix(!0,{},t.columns);(e=this.treeData[0].children).push.apply(e,Object(a["a"])(this.getTreeData(n,0)))}},methods:{getTreeData:function(t,n){var a=this,i=[];return e.each(t,(function(e,t){var o=dsf.mix({},s(),{id:n+"_"+t,level:n,label:e.label,columnId:e.columnId,headerAlign:e.headerAlign,align:e.align,hide:e.hide,width:e.width});i.push(o);var l=a.getTreeData(e.children,n+1);o.children=l})),i},deep:function(t,n,a){var i=this;n&&n(t,a),t.children&&e.each(t.children,(function(e){i.deep(e,n,a+1)}))},append:function(e){var t=null,n=null;n=e||this.treeData[0],t=n.children.length+1;var a=dsf.mix({},s(),{id:e.level+"_"+t,label:"新建列",level:n.level+1,hide:n.hide});n.children.push(a)},remove:function(e){var t=e.parent;dsf.array.remove(t.data.children,e.data)},up:function(e){o.call(this,e,"up")},down:function(e){o.call(this,e,"down")},nodeClick:function(e,t){e.isRoot?(this.form=this.formDisabled,this.formNode=null):(this.form=e,this.formNode=t)},yes:function(){var e=this.treeData[0].children;return e}}}}).call(this,n("2ef0"))},5610:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-question-formwrap"},[n("div",{ref:"UEditor",staticClass:"editor"})])},i=[],o=n("b773"),s={mixins:[o["a"]],props:["owner"],data:function(){return{ueId:"",toolBar:["fullscreen","undo","redo","bold","italic","underline","removeformat","formatmatch","pasteplain","forecolor","backcolor","insertorderedlist","insertunorderedlist","selectall","cleardoc","rowspacingtop","rowspacingbottom","lineheight","customstyle","paragraph","fontfamily","fontsize","indent","justifyleft","justifycenter","justifyright","justifyjustify","link","unlink","anchor","imagenone","imageleft","imageright","imagecenter","simpleupload","insertimage","insertvideo","inserttable","autotypeset"]}},mounted:function(){var e=this,t=dsf.uuid();this.$refs.UEditor.id=t,this.ueId=t;var n=dsf.url.getWebPath("$/js/libs/UEditor/ueditor.config.js"),a=dsf.url.getWebPath("$/js/libs/UEditor/ueditor.all.js");this.$http.importFiles([n,a]).then((function(){e.renderEditor()})).catch((function(e){dsf.layer.alert("加载UEditor.js文件出错")}))},methods:{renderEditor:function(){var e=this;this.$ue&&this.$ue.destroy(),this.$ue=UE.getEditor(this.ueId,{autoHeightEnabled:!0,toolbars:[this.toolBar],zIndex:2e4}),this.$ue.ready((function(){e.$ue.setContent(e.owner.questionBody)}))}}},l=s,r=n("2877"),c=Object(r["a"])(l,a,i,!1,null,null,null);t["a"]=c.exports},"566b":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-question-formwrap"},[n("div",{staticClass:"example"},[n("el-form",{attrs:{"label-position":"top"}},[n("el-form-item",{attrs:{prop:"value",label:e.exampleLabel,rules:e.exampleRules}},[n("el-input",{attrs:{maxlength:e.form.maxLength,readonly:"",placeholder:"输入框效果展示",rows:5,type:e.isTextArea?"textarea":"text","show-word-limit":""}})],1)],1)],1),n("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.rules,"label-width":"auto","label-position":"left"}},[n("el-row",{attrs:{gutter:15}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{prop:"questionBody","label-width":"0"}},[n("el-input",{attrs:{placeholder:"请输入题干"},model:{value:e.form.questionBody,callback:function(t){e.$set(e.form,"questionBody",t)},expression:"form.questionBody"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"isTextArea",label:"使用多行文本框:"}},[n("el-switch",{model:{value:e.form.isTextArea,callback:function(t){e.$set(e.form,"isTextArea",t)},expression:"form.isTextArea"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"readOnly",label:"本题不允许填写:"}},[n("el-switch",{model:{value:e.form.readOnly,callback:function(t){e.$set(e.form,"readOnly",t)},expression:"form.readOnly"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"visible",label:"本题是否显示:"}},[n("el-switch",{model:{value:e.form.visible,callback:function(t){e.$set(e.form,"visible",t)},expression:"form.visible"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"required",label:"必填标识:"}},[n("el-switch",{model:{value:e.form.required,callback:function(t){e.$set(e.form,"required",t)},expression:"form.required"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"maxLength",label:"可输入字数最大限制:"}},[n("el-input-number",{attrs:{min:1,max:200},model:{value:e.form.maxLength,callback:function(t){e.$set(e.form,"maxLength",t)},expression:"form.maxLength"}})],1)],1),n("el-col",{attrs:{span:24}},[n("div",{staticClass:"ljsz"},[n("span",{staticClass:"label"},[e._v("逻辑设置:")]),n("span",{staticClass:"btn",on:{click:e.showRela}},[e._v("题目关联")])])])],1)],1)],1)},i=[],o=(n("99af"),n("b773")),s={mixins:[o["a"]],props:["owner"],data:function(){return{form:{questionBody:"请输入题干",isTextArea:!1,readOnly:!1,visible:!0,maxLength:200,required:!0},rules:{questionBody:[{required:!0,message:"请输入题干"}]}}},computed:{isTextArea:function(){return this.form.isTextArea},exampleLabel:function(){return"".concat(this.owner.questionIndex,".").concat(this.form.questionBody)},exampleRules:function(){return this.form.required?[{required:!0,trigger:"change"}]:null}},methods:{}},l=s,r=n("2877"),c=Object(r["a"])(l,a,i,!1,null,null,null);t["a"]=c.exports},5781:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.visible?n("div",{staticClass:"region",style:e.regionSty}):e._e()},i=[],o={name:"Region",props:{visible:{type:Boolean,default:!1},region:{type:Object,default:function(){return{}}}},data:function(){return{test:!1}},computed:{regionSty:function(){return{left:this.region.left+"px",top:this.region.top+"px",width:this.region.width+"px",height:this.region.height+"px"}}},methods:{}},s=o,l=n("2877"),r=Object(l["a"])(s,a,i,!1,null,null,null);t["a"]=r.exports},5837:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.data,"header-align":"center",align:"center",height:"200",border:"","tooltip-effect":"dark"},on:{"selection-change":e.selectTable}},[e._l(e.columns,(function(t,a){var i=t.type,o=t.isSelect,s=t.prop,l=t.label,r=t.align,c=t.width,u=t.options,d=t.operate,h=t.fieldType;return[u||d||h||o?e._e():n("el-table-column",{key:s,attrs:{type:i,prop:s,label:l,width:c,align:r||"center"}}),u?n("el-table-column",{key:s,attrs:{type:i,prop:s,label:l,width:c,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{staticClass:"level",attrs:{placeholder:"请选择"},model:{value:t.row[s],callback:function(n){e.$set(t.row,s,n)},expression:"scope.row[prop]"}},e._l(u,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}],null,!0)}):e._e(),d?n("el-table-column",{key:s,attrs:{type:i,prop:s,label:l,width:c,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.deleteRow(t.row)}}},[e._v(" 删除 ")])]}}],null,!0)}):e._e(),h&&"input"===h?n("el-table-column",{key:s,attrs:{type:i,prop:s,label:l,width:c,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.row[s],callback:function(n){e.$set(t.row,s,n)},expression:"scope.row[prop]"}})]}}],null,!0)}):e._e(),h&&"editInput"===h?n("el-table-column",{key:s,attrs:{type:i,prop:s,label:l,width:c,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row[s+"Edit"]?e._e():n("span",{staticClass:"edit-filed",on:{click:function(e){t.row[s+"Edit"]=!0}}},[e._v(" "+e._s(t.row[s])+" ")]),t.row[s+"Edit"]?n("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{placeholder:"请输入内容"},on:{blur:function(e){t.row[s+"Edit"]=!1},keyup:function(n){if(!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter"))return null;t.row[s+"Edit"]=!1}},model:{value:t.row[s],callback:function(n){e.$set(t.row,s,n)},expression:"scope.row[prop]"}}):e._e()]}}],null,!0)}):e._e(),o?n("el-table-column",{key:s,attrs:{type:i,prop:s,label:l,width:c,align:r||"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[n("span",[e._v(e._s(l)+" ")]),n("el-checkbox",{attrs:{indeterminate:e.columns[a].isIndeterminate},on:{change:function(n){return e.checkAllChange(e.columns[a][s+"All"],s,e.columns[a],t)}},model:{value:e.columns[a][s+"All"],callback:function(t){e.$set(e.columns[a],s+"All",t)},expression:"columns[index][prop + 'All']"}})]}},{key:"default",fn:function(t){return[n("el-checkbox",{on:{change:function(n){return e.selectRow(t.row[s],s,e.columns[a])}},model:{value:t.row[s],callback:function(n){e.$set(t.row,s,n)},expression:"scope.row[prop]"}})]}}],null,!0)}):e._e()]}))],2)},i=[],o=(n("4de4"),n("4160"),n("c975"),n("a434"),n("159b"),{name:"SelectTree",props:{data:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},select:{type:Array,default:function(){return[]}}},data:function(){return{}},created:function(){},mounted:function(){var e=this;this.select&&this.select.length>0&&this.select.forEach((function(t){e.$refs.multipleTable.toggleRowSelection(t)}))},methods:{selectTable:function(e){this.$emit("update:select",e)},deleteRow:function(e){var t=this.data.indexOf(e);t>=0&&this.data.splice(t,1),this.$parent.deleteRow(e)},checkAllChange:function(e,t,n){this.data.forEach((function(n){n[t]=e})),n.isIndeterminate=!1},selectRow:function(e,t,n){var a=this.data.filter((function(e){return e[t]})),i=a.length;n[t+"All"]=i===this.data.length,n.isIndeterminate=i>0&&i<this.data.length}}}),s=o,l=(n("6479"),n("2877")),r=Object(l["a"])(s,a,i,!1,null,"256ae194",null);t["a"]=r.exports},"5b92":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"designer_tools"},[e._l(e.layout.buttons,(function(e,t){return n("DsfButton",{key:t,attrs:{icon:e.icon,text:e.text,"btn-style":"icon-text"},on:{click:function(t){return e.handler(t,e)}}})})),n("input",{ref:"uploadInput",staticClass:"input-file",attrs:{type:"file",accept:"image/*",name:"file"}}),n("width-input",{attrs:{"canvas-set":e.canvasSet,"has-bg":e.hasBg}})],2)},i=[],o=n("b475"),s=o["a"],l=n("2877"),r=Object(l["a"])(s,a,i,!1,null,null,null);t["a"]=r.exports},"5c4e":function(e,t,n){"use strict";(function(e){t["a"]={name:"WidthInput",props:{canvasSet:{type:Object,required:!0},hasBg:{type:Boolean}},data:function(){return{}},watch:{canvasSet:{handler:function(t){var n=this,a=t.width,i=t.height,o=e(".seat-designer-page").offset().left,s=e(".seat-designer-page").offset().top,l=e(window).height(),r=e(window).width();a&&a+o>r?e(".seat-designer-center").css({"overflow-x":"scroll"}):e(".seat-designer-center").css({"overflow-x":"auto"}),i&&i+s>l?e(".seat-designer-center").css("overflow-y","scroll"):e(".seat-designer-center").css("overflow-y","auto"),n.$store.commit("seatDesign/changeCompelPanelSize",t)},deep:!0}}}}).call(this,n("1157"))},"5cfc":function(e,t,n){},"5d9f":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-question-formwrap"},[n("div",{staticClass:"example"},[n("el-form",{attrs:{"label-position":"top"}},[n("el-form-item",{attrs:{prop:"value",label:e.exampleLabel,rules:e.exampleRules}},["0"==e.form.layout?n("el-radio-group",e._l(e.exampleItems,(function(t){return n("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.text))])})),1):n("el-radio-group",[n("el-row",e._l(e.exampleItems,(function(t){return n("el-col",{key:t.value,attrs:{span:e.getColSpan}},[n("el-radio",{attrs:{label:t.value}},[e._v(e._s(t.text))])],1)})),1)],1)],1)],1)],1),n("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.rules,"label-width":"auto","label-position":"left"}},[n("el-row",{attrs:{gutter:15}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{prop:"questionBody","label-width":"0"}},[n("el-input",{attrs:{placeholder:"请输入题干"},model:{value:e.form.questionBody,callback:function(t){e.$set(e.form,"questionBody",t)},expression:"form.questionBody"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"isOther",label:"是否含有'其他'选项:"}},[n("el-switch",{model:{value:e.form.isOther,callback:function(t){e.$set(e.form,"isOther",t)},expression:"form.isOther"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"readOnly",label:"本题不允许填写:"}},[n("el-switch",{model:{value:e.form.readOnly,callback:function(t){e.$set(e.form,"readOnly",t)},expression:"form.readOnly"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"visible",label:"本题是否显示:"}},[n("el-switch",{model:{value:e.form.visible,callback:function(t){e.$set(e.form,"visible",t)},expression:"form.visible"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"required",label:"必填标识:"}},[n("el-switch",{model:{value:e.form.required,callback:function(t){e.$set(e.form,"required",t)},expression:"form.required"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"layout",label:"排列样式:"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.layout,callback:function(t){e.$set(e.form,"layout",t)},expression:"form.layout"}},[n("el-option",{attrs:{label:"自适应",value:"0"}}),n("el-option",{attrs:{label:"竖向排列",value:"1"}}),n("el-option-group",{attrs:{label:"横向排列"}},[n("el-option",{attrs:{label:"每行2列",value:"2"}}),n("el-option",{attrs:{label:"每行3列",value:"3"}}),n("el-option",{attrs:{label:"每行4列",value:"4"}}),n("el-option",{attrs:{label:"每行5列",value:"5"}})],1)],1)],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",[n("el-button",{attrs:{icon:"el-icon-plus"},on:{click:e.addOption}},[e._v("添加选项")]),n("el-button",{attrs:{icon:"el-icon-circle-plus-outline"},on:{click:e.batchAddOption}},[e._v("批量添加")])],1)],1),n("el-col",{staticStyle:{padding:"15px 0"},attrs:{span:24}},[n("el-table",{attrs:{data:e.form.items}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),n("el-table-column",{attrs:{label:"选项"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-form-item",{attrs:{size:"small",prop:"items."+t.$index+".value","label-width":"0",rules:[{required:!0,message:"请输入"}]}},[n("el-input",{attrs:{placeholder:"请输入"},on:{change:function(n){e.optionChange(e.form.items[t.$index],n)}},model:{value:e.form.items[t.$index].value,callback:function(n){e.$set(e.form.items[t.$index],"value",n)},expression:"form.items[scope.$index].value"}})],1)]}}])}),n("el-table-column",{attrs:{label:"操作",width:"180",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"show",rawName:"v-show",value:0===t.$index,expression:"scope.$index === 0"}],attrs:{circle:"",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:e.addOption}}),n("el-button",{attrs:{circle:"",size:"small",icon:"el-icon-remove-outline"},on:{click:function(n){return e.remove(t)}}}),n("el-button",{attrs:{circle:"",size:"small",icon:"el-icon-top",disabled:0===t.$index},on:{click:function(n){return e.toggle(t,"up")}}}),n("el-button",{attrs:{circle:"",size:"small",icon:"el-icon-bottom",disabled:t.$index===e.form.items.length-1},on:{click:function(n){return e.toggle(t,"down")}}})]}}])})],1)],1),n("el-col",{attrs:{span:24}},[n("div",{staticClass:"ljsz"},[n("span",{staticClass:"label"},[e._v("逻辑设置:")]),n("span",{staticClass:"btn",on:{click:e.showRela}},[e._v("题目关联")]),n("span",{staticClass:"btn",on:{click:e.showLogic}},[e._v("跳题逻辑")])])])],1)],1),n("el-dialog",{attrs:{title:"添加选项",visible:e.dialogVisible,modal:!0,"append-to-body":!0,"modal-append-to-body":!1,"before-close":e.handleClose,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-input",{attrs:{type:"textarea",rows:15,placeholder:"多个选项使用换行分割"},model:{value:e.optionText,callback:function(t){e.optionText=t},expression:"optionText"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("dsf-button",{attrs:{type:"auxiliary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("dsf-button",{on:{click:e.sure}},[e._v("确 定")])],1)],1)],1)},i=[],o=(n("99af"),n("d81d"),n("a434"),n("d3b7"),n("ac1f"),n("25f0"),n("5319"),n("1276"),n("2909")),s=n("b773"),l={mixins:[s["a"]],props:["owner"],data:function(){return{form:{questionBody:"请输入题干",readOnly:!1,visible:!0,required:!0,isOther:!1,layout:"0",items:[]},rules:{questionBody:[{required:!0,message:"请输入题干"}]},optionText:"",dialogVisible:!1}},computed:{exampleItems:function(){var e=this.form.items;return this.form.isOther&&(e=[].concat(Object(o["a"])(e),[{text:"其他",value:"其他"}])),e},getColSpan:function(){switch(this.form.layout.toString()){case"1":return 24;case"2":return 12;case"3":return 8;case"4":return 6;case"5":return 4;default:return 24}},exampleLabel:function(){return"".concat(this.owner.questionIndex,".").concat(this.form.questionBody)},exampleRules:function(){return this.form.required?[{required:!0,trigger:"change"}]:null}},created:function(){this.owner.layout=this.owner.layout+""},methods:{optionChange:function(e,t){e.text=t},addOption:function(){var e=this.form.items.length;this.form.items.push({text:"选项".concat(e+1),value:"选项".concat(e+1),attach_text:""})},batchAddOption:function(){this.optionText="",this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1},toggle:function(e,t){var n,a=e.$index,i=Object(o["a"])(this.form.items),s=this.form.items[a];a===this.form.items.length-1&&"down"===t||0===a&&"up"===t||(n="up"===t?a-1:a+1,i.splice(a,1),i.splice(n,0,s),this.form.items=i)},remove:function(e){this.form.items.splice(e.$index,1)},sure:function(){var e=this.optionText.replace(/^\s|\s$/g,"").split(/\n/).map((function(e){var t=e.replace(/^\s|\s$/g,"").split("|");return{text:t[0],value:t[1]?t[1]:t[0],attach_text:""}}));this.form.items=[].concat(Object(o["a"])(this.form.items),Object(o["a"])(e)),this.dialogVisible=!1},showLogic:function(){this.$emit("showDialog","logic")}}},r=l,c=n("2877"),u=Object(c["a"])(r,a,i,!1,null,null,null);t["a"]=u.exports},"5fbf":function(e,t,n){},6022:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.popShow,expression:"popShow"}],staticClass:"seat-pop-box",style:e.sty},[n("ul",[n("li",{on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.popDialog(t)}}},[e._v("方阵组")])]),n("el-dialog",{attrs:{visible:e.dialogVisible,title:"信息",width:"300px",modal:!1,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{attrs:{model:e.form,size:"small"}},[n("el-form-item",{attrs:{label:"列数"}},[n("el-input-number",{attrs:{precision:0,controls:!1,min:1},model:{value:e.form.colNum,callback:function(t){e.$set(e.form,"colNum",t)},expression:"form.colNum"}})],1),n("el-form-item",{attrs:{label:"个数"}},[n("el-input-number",{attrs:{precision:0,controls:!1,min:1},model:{value:e.form.total,callback:function(t){e.$set(e.form,"total",t)},expression:"form.total"}})],1),n("el-form-item",{staticStyle:{"text-align":"right"}},[n("el-button",{on:{click:e.setGroup}},[e._v("确定")])],1)],1)],1)],1)},i=[],o=(n("e25e"),n("5530")),s=n("35b5"),l=n("f70e"),r={name:"SeatPop",data:function(){return{dialogVisible:!1,form:{colNum:3,total:7},seat:{},position:{},popShow:!1}},computed:{sty:function(){return{left:this.position.x+"px",top:this.position.y+"px"}}},mounted:function(){var e=this;s["a"].on(l["a"].SEAT_POP,(function(t){Object.assign(e,t),console.log(t),e.popShow=!0})),s["a"].on(l["a"].BODY_EMPTY_CLICK,(function(){e.popShow=!1}))},methods:{popDialog:function(e){e.stopPropagation(),e.preventDefault(),this.popShow=!0,this.dialogVisible=!0},setGroup:function(){var e=this.form,t=e.total,n=e.colNum;if(1===t)return this.dialogVisible=!1,this.popShow=!1,!1;var a=t%n,i=parseInt(t/n);a>0&&(i+=1);for(var r=[],c=0;c<t;c++){var u=parseInt(c/n),d=c%n;d=d<0?n-1:d;var h=d*this.seat.width,p=u*this.seat.height,f=Object(o["a"])(Object(o["a"])({},this.seat),{},{id:dsf.uuid(),left:h,top:p,colIndex:d,rowIndex:u,angle:0});r.push(f)}var m=this.seat.width*n,g=this.seat.height*i,y={id:dsf.uuid(),type:"group",left:this.seat.left,top:this.seat.top,cols:n,rows:i,width:m,height:g,angle:this.seat.angle,memberType:this.seat.type,member:r};this.$store.commit("seatDesign/addGroup2Panel",y),s["a"].emit(l["a"].KEY_DELETE),this.dialogVisible=!1,this.popShow=!1}}},c=r,u=n("2877"),d=Object(u["a"])(c,a,i,!1,null,null,null);t["a"]=d.exports},6070:function(e,t,n){"use strict";(function(e){n("c740"),n("96cf");var a=n("1da1"),i=n("8050");t["a"]={name:"DesCustomerOrderByEdit",mixins:[i["a"]],data:function(){return{tableData:[],treeData:[],defaultProps:{children:"children",label:"name"},listColumns:[]}},mounted:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.owner.$$getComponent(),a=n.$options.design.metadata.create.call(n),a&&!(a.length<=1)){t.next=5;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 5:if(i=a[1].metadata.at,i){t.next=9;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 9:return e.listColumns=n.getLastColumns(),t.next=12,e.getTreeData(a[1].metadata,a[1].metadata.rm_type||3);case 12:e.treeData=t.sent,e.tableData=e.currentData||[];case 14:case"end":return t.stop()}}),t)})))()},methods:{toList:function(t,n){if(n.field){var a=e.findIndex(this.tableData,(function(e){return e.field==n.field}));a<0&&this.tableData.push({field:n.field,fieldCaption:n.fieldCaption,column:"",sortType:"asc"})}},getTreeData:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function a(){var i,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=[],"8"!=t){a.next=8;break}return o={rmId:e.rmId},a.next=5,n.$webAPI.getDbSourceFieldsTree(o);case 5:i=a.sent,a.next=13;break;case 8:if("3"!=t){a.next=13;break}return s={namespace:e.at},a.next=12,n.$webAPI.getMetaDataFieldsTree(s);case 12:i=a.sent;case 13:return a.abrupt("return",i);case 14:case"end":return a.stop()}}),a)})))()},remove:function(e){dsf.array.remove(this.tableData,e)},up:function(t){var n=e.findIndex(this.tableData,(function(e){return e==t}));if(n>0){var a=this.tableData[n-1];this.$set(this.tableData,n-1,t),this.$set(this.tableData,n,a)}},down:function(t){var n=e.findIndex(this.tableData,(function(e){return e==t}));if(n<this.tableData.length-1){var a=this.tableData[n+1];this.$set(this.tableData,n+1,t),this.$set(this.tableData,n,a)}},yes:function(){return this.tableData}}}}).call(this,n("2ef0"))},"612f":function(e,t,n){},6479:function(e,t,n){"use strict";var a=n("d084"),i=n.n(a);i.a},"64ac":function(e,t,n){"use strict";(function(e){var a=n("5530"),i=n("2f62"),o=n("46bd"),s=n("5781"),l=n("6022");t["a"]={name:"Canvas",components:{seatItem:o["a"],region:s["a"],seatPop:l["a"]},data:function(){return{regionVisible:!1,regionRect:{}}},computed:Object(a["a"])(Object(a["a"])({},Object(i["b"])("seatDesign",{compelPanelSize:"compelPanelSize",panelSize:"panelSize",canvasCss:function(e){var t=e.compelPanelSize,n=t.width,a=t.height,i=n?"".concat(n,"px"):"100%",o=a?"".concat(a,"px"):"100%";return{width:i,height:o}},panelParentSize:function(t){var n=t.compelPanelSize,a=n.width,i=n.height;return a=a||e(".seat-designer-page").width(),i=i||e(".seat-designer-page").height(),{width:a,height:i}}})),{},{panelSty:function(){return{width:this.panelSize.width?this.panelSize.width+"px":"100%",height:this.panelSize.height?this.panelSize.height+"px":"100%",left:this.panelSize.left+"px",top:this.panelSize.top+"px"}}}),watch:{compelPanelSize:{handler:function(e){var t=e.width,n=e.height,a={width:t,height:n,scale:1,left:0,top:0};this.$store.commit("seatDesign/changePanelSize",a)},deep:!0}},mounted:function(){var t=this;e(".seat-designer-page")[0].addEventListener("mousewheel",t.handleScroll)},methods:{handleScroll:function(t){if(t.ctrlKey){var n=this,a=t.wheelDelta<0?"down":"up",i=dsf.math.convertLocalCoordinate("#panel_outer",{x:t.pageX,y:t.pageY}),o=n.panelParentSize,s=o.width,l=o.height,r=s*n.panelSize.scale,c=l*n.panelSize.scale,u=i.x/r,d=i.y/c,h=n.panelSize.scale;if("up"===a?h+=.1:"down"===a&&(h-=.1),h>=.1){var p=e("#panel_outer"),f=s*h,m=l*h,g=p.position().left+i.x-f*u,y=p.position().top+i.y-m*d,x={scale:Math.round(10*h)/10,width:Math.floor(f),height:Math.floor(m),left:Math.floor(g),top:Math.floor(y)};n.$store.commit("seatDesign/changePanelSize",x)}t.preventDefault(),t.stopPropagation()}},preRegion:function(t){t.stopPropagation(),t.preventDefault();var n=this;n.$store.commit("seatDesign/changeActiveId","");var a=dsf.math.convertLocalCoordinate(".seat-designer-page",{x:t.pageX,y:t.pageY});function i(e){n.regionVisible=!0;var t=dsf.math.convertLocalCoordinate(".seat-designer-page",{x:e.pageX,y:e.pageY});n.$set(n.regionRect,"left",a.x>t.x?t.x:a.x),n.$set(n.regionRect,"top",a.y>t.y?t.y:a.y),n.$set(n.regionRect,"width",Math.abs(t.x-a.x)),n.$set(n.regionRect,"height",Math.abs(t.y-a.y))}function o(){e(document).off("mousemove.region"),n.$store.commit("seatDesign/changeRegionPosition",n.regionRect),n.regionVisible=!1,n.regionRect={}}e(document).off("mousemove.region"),e(document).on("mousemove.region",(function(e){i(e)})),e(document).one("mouseup.region",(function(){o()}))}}}}).call(this,n("1157"))},6550:function(e,t,n){"use strict";(function(e){n("b0c0");var a=n("5530"),i=n("1485"),o=n("a341"),s=function(t,n){var s=[],l={path:[],from:null,to:null,strokeWidth:t.Path.strokeWidth,stroke:t.Path.stroke,arrowEnd:t.Path.arrow},r=!1;if(Object.assign(l,n),this.id=l.id||null,this.name=l.name||"",this.type=l.type||0,this.path=l.path?e.inArray(l.path)?l.path:[l.path]:[],this.from=l.from,this.fromType=l.fromType,this.to=l.to,this.strokeWidth=l.strokeWidth,this.stroke=l.stroke,this.arrowEnd=l.arrowEnd,this.linkInfo=l.linkInfo||{},this.oldstroke=null,this.isHide=l.isHide||!1,l.attributes){var c=Object(i["b"])(Object(o["i"])());this.attributes=dsf.mix(!0,{},c,l.attributes)}this.remove=function(){if(s)for(var e=s.length-1;e>=0;e--)s[e].remove();s=[]},this.getSegmenList=function(){return s},this.refresh=function(){if(s)for(var e=0;e<s.length;e++)s[e].refresh()},this.addElement=function(e){s.push(e)},this.isSelected=function(){return r},this.selected=function(){r=!0,this.oldstroke=this.stroke,this.stroke="#333",this.refresh()},this.unSelected=function(){r=!1,this.stroke=this.getLineStroke.call(this),this.refresh()},this.hide=function(){if(s)for(var e=s.length-1;e>=0;e--)s[e].hide()},this.show=function(){if(s)for(var e=s.length-1;e>=0;e--)s[e].show()},this.getPreLine=function(e){return s[e.index-1]},this.getNextLine=function(e){return s[e.index+1]},this.getLineStroke=function(){if(this.isSelected())return"#333";var e=t.Lines["Line_"+this.type];return e?e.stroke:t.Path.stroke},this.setAttributes=function(e,t){if(this.attributes?this.attributes=Object(a["a"])({},this.attributes):this.attributes=Object(i["b"])(Object(o["i"])()),this.attributes.BaseInfo.StartNodeID=this.from,this.attributes.BaseInfo.EndNodeID=this.to,this.name=this.name||e.name+"→"+t.name,this.attributes.BaseInfo.Name=this.name,this.attributes.BaseInfo.ID=this.id,this.attributes.BaseInfo.Type=this.type,"6"==e.type){var n=e.attributes;if(n.OutLine.SendConditions&&n.OutLine.SendConditions.Condition){var s=null;try{s=n.OutLine.SendConditions.Condition.Switch.ItemValue}catch(d){s=null}if(s){for(var l=!1,r=0;r<s.length;r++){var c=s[r];if(c.LineID==ui.id){l=!0;break}}if(!l){var u={Value:"",Type:"8",LineID:ui.id,LineName:ui.name};s.push(u)}}}}}};t["a"]=s}).call(this,n("1157"))},"6a5d":function(e,t,n){"use strict";(function(e){n("d81d");var a=n("2909"),i=n("8050");t["a"]={name:"DesComponents",mixins:[i["a"]],props:{designer:{type:Object,default:function(){return null}}},data:function(){return{show:!1,data:[]}},mounted:function(){var e=[],t=this.designer.$refs.viewProxy;dsf.designer.recursionLayoutTree(t,null,null,(function(t){if(t.isFormControl&&e.push({id:t.designId,caption:t.caption,label:t.label,type:t.$options.ctrlCaption,ctrl:t}),t.isOneToMany)return!1})),this.data=e,this.show=!0},methods:{validate:function(){var t=[],n=this.$refs.table.selection;if(e.each(n,(function(e){if(e.label){var n=dsf.designer.validateCaption(e.ctrl);t.push.apply(t,Object(a["a"])(n))}else t.push("请为"+e.caption+"起名后再试")})),t.length)return dsf.layer.pc.message(t[0],!1),!1},yes:function(){var t=this.$refs.table.selection,n=e.map(t,(function(e){return e.ctrl})),a=[];return e.each(n,(function(t){var n=t.$options.design.layout.exclude,i=t.$options.design.metadata.create.call(t),o=dsf.mix(!0,{},t.$props),s={props:o,metadata:i};e.each(n,(function(e){delete o[e]})),a.push(s)})),a}}}}).call(this,n("2ef0"))},"6e89":function(e,t,n){"use strict";(function(e){n("c740"),n("4160"),n("d81d"),n("a434"),n("159b");var a=n("8050");t["a"]={name:"DesListStatusEdit",mixins:[a["a"]],data:function(){return{tableData:[]}},created:function(){var t=this;this.currentData&&e.forEach(this.currentData,(function(e,n){t.tableData.push(e)}))},methods:{addCustomButton:function(){var e=dsf.mix(!0,{},{text:"状态值",icon:"icon-shezhi",color:"#5f5f5f"});this.tableData.push(e)},validate:function(){return-1!==e.findIndex(this.tableData,(function(e){return""===e.text}))?(dsf.layer.message("请输入状态值",!1),!1):this.isRepeat(e.map(this.tableData,"text"))?(dsf.layer.message("一种状态值只能配置一次",!1),!1):void 0},isRepeat:function(e){var t={};for(var n in e){if(t[e[n]])return!0;t[e[n]]=!0}return!1},yes:function(){var t={};return e(this.tableData).forEach((function(e){t[e.text]=e})),t},openIcon:function(){window.open(dsf.url.getWebPath("$/pc/iconfont/demo_index.html"),"icondemo")},removeButton:function(e){this.tableData.splice(e.$index,1)}}}}).call(this,n("2ef0"))},7359:function(e,t,n){},"73f1":function(e,t,n){"use strict";var a=n("5cfc"),i=n.n(a);i.a},"762b":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-enum-editor-item"},[n("div",{staticClass:"ds-enum-editor-item-left",class:{fill:e.hideRight}},[n("dsf-tree-select",{attrs:{"tree-data":e.treeData,"node-key":e.idKey,"node-name":e.nameKey,loading:e.treeLoading,"default-checked-key":e.defaultCheckedKey,"search-control":"","default-expand-all":""},on:{"choose-node":e.chooseNode,"choose-key":function(t){e.radioId=t}}})],1),e.hideRight?e._e():n("div",{staticClass:"ds-enum-editor-item-main"},[n("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{border:"",stripe:"","max-height":"378px","row-key":"value","default-expand-all":"","highlight-current-row":"",data:e.tableList,"empty-text":e.loading?"数据加载中...":e.emptyText,"tree-props":{children:"children",hasChildren:"hasChildren"},"row-class-name":e.tableRowClassName},on:{"current-change":e.handleCurrentChange}},[n("el-table-column",{attrs:{type:"index",index:e.startIndex+1,label:"序号",width:"80"}}),n("el-table-column",{attrs:{prop:"text",label:"文本",width:"224"}}),n("el-table-column",{attrs:{prop:"value",label:"值"}})],1),n("div",{staticClass:"ds-enum-editor-item-main-pagination"},[n("el-pagination",{attrs:{"current-page":e.pageNum,"page-size":e.pageSize,"pager-count":5,layout:"total, prev, pager, next, jumper",total:e.total,background:"",small:""},on:{"current-change":function(t){e.pageNum=t}}})],1)],1)])},i=[],o=n("3364"),s=o["a"],l=n("2877"),r=Object(l["a"])(s,a,i,!1,null,null,null);t["a"]=r.exports},"77ec":function(e,t,n){"use strict";var a=n("a58e"),i=n.n(a);i.a},7971:function(e,t,n){"use strict";(function(e){n("c740"),n("d81d"),n("fb6a"),n("a434");var a=n("8050");t["a"]={name:"DesTreeImgSet",mixins:[a["a"]],data:function(){return{tableData:[],imgType:[{name:"请选择类型",value:""},{name:"文件类型",value:"file"},{name:"用户类型",value:"user"},{name:"数据类型",value:"data"},{name:"组织类型",value:"unit"}],path:"../../../assets/styles/themes/tree_img/"}},mounted:function(){this.owner.iconMap&&(this.tableData=this.owner.iconMap)},methods:{sliceIcon:function(e){return e?e.slice(this.path.length):""},addCol:function(){var e={typeName:"",imgType:"",icon:""};this.tableData.push(e)},changeProperty:function(e,t){e.icon&&(this.tableData[t].icon="")},deleted:function(e){var t=this;dsf.layer.confirm("确定要删除【".concat(e.row.typeName,"】节点类型吗?")).then((function(){t.tableData.splice(e.$index,1)})).catch((function(e){return e}))},validate:function(){return-1!==e.findIndex(this.tableData,(function(e){return""===e.typeName}))?(dsf.layer.message("请输入节点类型",!1),!1):this.isRepeat(e.map(this.tableData,"typeName"))?(dsf.layer.message("一种节点类型只能配置一次",!1),!1):void 0},isRepeat:function(e){var t={};for(var n in e){if(t[e[n]])return!0;t[e[n]]=!0}return!1},yes:function(){return this.tableData},openIconDialog:function(e){if(!e.imgType)return dsf.layer.message("请先选择图标类型",!1),!1;dsf.layer.openDialog({title:"树图标选择",fullscreen:!1,content:"DesTreeImgList",params:{treeList:e},width:"500px",height:"350px",btns:[{text:"确定",handler:function(e){}},{text:"取消"}]})}}}}).call(this,n("2ef0"))},"7f74":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"events",style:{top:e.isSub?e.toPx(e.parentNode.imgHeight+2*e.parentNode.padding):0}},e._l(e.events,(function(t){return n("div",{directives:[{name:"show",rawName:"v-show",value:!t.hide,expression:"!ev.hide"}],key:t.id,staticClass:"ds_tool_event_drag tool_event",class:{selected:e.checked===t},style:{width:t.width+"px",height:t.height+"px",top:e.toPx(t.point.y),left:e.toPx(t.point.x)},attrs:{draggable:!e.isDrawLine,"data-id":t.id},on:{mousedown:function(n){return e.selectEvent(n,t)},click:function(n){return e.selectEvent(n,t)},dragstart:function(n){return e.drag(n,t)},touchstart:function(n){return e.drag(n,t)}}},[n("img",{class:{selected:e.checked===t},style:{width:e.toPx(t.img.width),height:e.toPx(t.img.height)},attrs:{src:t.url,draggable:"false"}})])})),0)},i=[],o=(n("4160"),n("c975"),n("159b"),n("4795"),n("5530")),s=n("1485"),l={name:"Events",props:{nodes:{type:Array,default:function(){return[]}},events:{type:Array,default:function(){return[]}},isDrawLine:{type:Boolean,default:function(){return!1}},checked:{type:Object,default:function(){return{}}},isSub:{type:Boolean,default:function(){return!1}},parentNode:{type:Object,default:function(){return null}},config:{type:Object,default:function(){return{}}}},data:function(){return{current:null,crashNode:null}},created:function(){},mounted:function(){this.$bus.$on("showSubNode".concat(this.isSub?this.parentNode.id:""),this.showSubNode),this.$bus.$on("nodeMove".concat(this.isSub?this.parentNode.id:""),this.nodeMove)},methods:{toPx:s["h"],drag:function(e,t){e.dataTransfer.setDragImage(new Image,0,0),"dragstart"===e.type?e=event||e:event.touches&&(e=event.touches[0]?event.touches[0]:event);var n={x:e.offsetX,y:e.offsetY};this.$bus.$emit("update-checked",t),this.current=Object(o["a"])(Object(o["a"])({},t),{},{offset:n}),this.$bus.$emit("dragCloneEvent",e,this.current)},selectEvent:function(e,t){var n=this;if(e.stopPropagation(),this.$bus.$emit("update-checked",t),this.isDrawLine){var a="startDraw".concat(this.isSub?this.parentNode.id:"");setTimeout((function(){n.$bus.$emit(a,e,t,n.parentNode)}),0)}},nodeMove:function(e){var t=this;if(e&&this.events&&this.events.length>0){this.crashNode=e,this.$store.commit("flow/setPointsByNode",{node:e,obj:this.events[0]});var n=this.$store.getters["flow/getPoints"](e.id),a=[],i=this.$store.state.flow.page.scale;n.forEach((function(n){t.events.forEach((function(o){e.id===o.nodeId&&n.direction===o.direction&&n.index===o.index&&(o=Object.assign(o,n),o.point.x=o.point.x/i,o.point.y=o.point.y/i,o.out&&o.out.length>0&&t.$bus.$emit("eventMove".concat(t.isSub?t.parentNode.id:""),o),a.push(n))}))})),a.forEach((function(a){var i=n.indexOf(a);t.$store.commit("flow/deletePoint",{id:e.id,index:i})}))}},showSubNode:function(e){var t=this;this.events.forEach((function(n){n.nodeId===e.id&&(n.hide=!e.open.show,n.out&&n.out.length>0&&t.$bus.$emit("hideLines",n.out,!e.open.show))}))},globalMove:function(e,t,n){if(e)for(var a=0;a<this.events.length;a++){var i=this.events[a];t&&(i.point.x+=e.x),n&&(i.point.y+=e.y)}}}},r=l,c=(n("5189"),n("2877")),u=Object(c["a"])(r,a,i,!1,null,"0c89c60a",null);t["a"]=u.exports},"7ff6":function(e,t,n){"use strict";var a=n("2191"),i=n.n(a);i.a},"82a2":function(e,t,n){"use strict";(function(e){n("4e82"),n("acd8");var a=n("1f8f"),i=function(t,n,i){var o=null,s=null,l=[],r=t;this.sp=null,this.ep=null,this.type=null,this.isLast=!1,this.index=i,this.direction=null,this.hasTransition=!1,this.getLine=function(){return r},this.render=function(){this.sp.x=parseFloat(this.sp.x),this.sp.y=parseFloat(this.sp.y),this.ep.x=parseFloat(this.ep.x),this.ep.y=parseFloat(this.ep.y);var t=[],i={type:"point",data:{x:this.sp.x,y:this.sp.y}},c={type:"point",data:{x:this.ep.x,y:this.ep.y}},u=[];this.remove();var d={sp:{x:i.data.x,y:i.data.y},ep:{x:c.data.x,y:c.data.y}};this.sp.y==this.ep.y?(this.type=a["d"].horizontal,this.isLast&&(d.ep.x=d.ep.x-(i.data.x<c.data.x?2:-2))):(this.type=a["d"].vertical,this.isLast&&(d.ep.y=d.ep.y-(i.data.y<c.data.y?2:-2)));var h=r.getPreLine(this);if(h&&h.type!=this.type&&h.hasTransition&&(this.type==a["d"].horizontal?i.data.x="left"==this.direction?i.data.x-a["i"]:i.data.x+a["i"]:i.data.y="top"==this.direction?i.data.y-a["i"]:i.data.y+a["i"]),this.type==a["d"].horizontal&&l.length>0){var p=5,f="right";this.sp.x>this.ep.x&&(f="left"),l=l.sort((function(e,t){return"right"==f?e.x<t.x?-1:1:e.x<t.x?1:-1})),t.push(i);for(var m=0;m<l.length;m++){var g=l[m],y={type:"point",data:{x:g.x-("right"==f?p:-p),y:g.y}},x={type:"point",data:{x:g.x+("right"==f?p:-p),y:g.y}};t.push(y),t.push({type:"arc",data:{radius:p,overX:x.data.x,overY:x.data.y,sweep:"right"==f?1:0}}),t.push(x)}}else t.push(i);var v=r.getNextLine(this);if(v&&v.type!=this.type){var b=0;b=a["h"].getLineLength(this.sp,this.ep);var w=a["h"].getLineLength(v.sp,v.ep),k=2*a["i"];if(b<=k||w<=k)t.push(c),this.hasTransition=!1;else{var D;if(b=a["h"].getLineLength(v.sp,v.ep),this.type==a["d"].vertical){D={type:"point",data:{x:this.ep.x,y:this.ep.y-("top"==this.direction?-a["i"]:a["i"])}},t.push(D);var _=null;"bottom"==this.direction&&"left"==v.direction||"top"==this.direction&&"right"==v.direction?_=1:("top"==this.direction&&"left"==v.direction||"bottom"==this.direction&&"right"==v.direction)&&(_=0),t.push({type:"arc",data:{radius:a["i"],overX:this.ep.x-("left"==v.direction?a["i"]:-a["i"]),overY:this.ep.y,sweep:_}})}else{D={type:"point",data:{x:this.ep.x-("right"==this.direction?a["i"]:-a["i"]),y:this.ep.y}},t.push(D);var C=null;"left"==this.direction&&"top"==v.direction||"right"==this.direction&&"bottom"==v.direction?C=1:("left"==this.direction&&"bottom"==v.direction||"right"==this.direction&&"top"==v.direction)&&(C=0),t.push({type:"arc",data:{radius:a["i"],overX:this.ep.x,overY:this.ep.y-("top"==v.direction?a["i"]:-a["i"]),sweep:C}})}this.hasTransition=!0}}else t.push(c),this.hasTransition=!1;for(var S=0;S<t.length;S++){var N=t[S];0==S&&"point"==N.type?u.push(["M",N.data.x,N.data.y]):"point"==N.type?u.push(["L",N.data.x,N.data.y]):"arc"==N.type&&u.push(["A",N.data.radius,N.data.radius,0,0,N.data.sweep,N.data.overX,N.data.overY])}try{o=n.path(u).attr({"stroke-width":r.strokeWidth,stroke:r.stroke}),this.isLast&&(s=n.path(a["h"].drawArrow(d)).attr({"stroke-width":r.strokeWidth,stroke:r.stroke,fill:r.stroke}))}catch(L){console.log(L)}o&&e(o[0]).data("object",this),s&&e(s[0]).data("object",this)},this.setIntersection=function(e){l.push(e)},this.clearIntersection=function(){l=[]},this.getIntersection=function(){return l},this.remove=function(){o&&o.remove(),s&&s.remove()},this.refresh=function(){o&&o.attr({"stroke-width":r.strokeWidth,stroke:r.stroke}),s&&s.attr({"stroke-width":r.strokeWidth,stroke:r.stroke,fill:r.stroke})},this.hide=function(){o&&o.hide(),s&&s.hide()},this.show=function(){o&&o.show(),s&&s.show()}};t["a"]=i}).call(this,n("1157"))},"839b":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"lines",staticClass:"lines",style:{height:e.isSub?"calc(100% - "+e.toPx(e.parentNode.imgHeight+2*e.parentNode.padding)+")":"100%",top:e.isSub?e.toPx(e.parentNode.imgHeight+2*e.parentNode.padding):0}})},i=[],o=(n("99af"),n("4160"),n("c975"),n("a434"),n("b0c0"),n("acd8"),n("ac1f"),n("1276"),n("159b"),n("2909")),s=n("452f"),l=n.n(s),r=n("1f8f"),c=function(e,t,n){var a=null,i=null,o={path:[],from:null,to:null,strokeWidth:2,stroke:e.Path.stroke,"stroke-dasharray":n["stroke-dasharray"]};o=Object.assign(o,n),this.id=null,this.path=o.path,this.from=o.from,this.to=o.to,this.linkInfo=o.linkInfo||{},this.render=function(){for(var e=[],n=0;n<this.path.length;n++){var s=this.path[n];0==n?e.push(["M",s.x,s.y]):e.push(["L",s.x,s.y])}if(e.length>1){var l={sp:{x:e[e.length-2][1],y:e[e.length-2][2]},ep:{x:e[e.length-1][1],y:e[e.length-1][2]}};l.sp.y==l.ep.y?l.ep.x=l.ep.x-(l.sp.x<l.ep.x?2:-2):l.ep.y=l.ep.y-(l.sp.y<l.ep.y?2:-2);try{a?(a.attr({path:e,"stroke-width":o.strokeWidth,stroke:o.stroke}),i&&i.attr({path:r["h"].drawArrow(l),"stroke-width":o.strokeWidth,stroke:o.stroke,fill:o.stroke})):(a=t.path(e).attr({"stroke-width":o.strokeWidth,stroke:o.stroke,"stroke-dasharray":o["stroke-dasharray"]}),i=t.path(r["h"].drawArrow(l)).attr({"stroke-width":o.strokeWidth,stroke:o.stroke,fill:o.stroke}),this.isRender=!0)}catch(c){console.log(c)}}},this.remove=function(){a&&a.remove(),i&&i.remove()}},u=c,d=n("dd8c"),h=n("6550"),f=n("d8d9"),m=n("82a2"),g=n("1485");function y(e){var t=e.fromDirection,n=e.targetDirection,a=e.fromNode,i=e.targetNode,o=e.startPoint,s=e.endPoint,l=r["h"].getDirection(o,s),c=[],u=30;if(t==r["b"].Right&&n==r["b"].Left){if(l==r["c"].Right)c.push({x:o.x,y:o.y}),c.push({x:s.x,y:s.y});else if(l==r["c"].RightTop||l==r["c"].RightBottom)c.push({x:o.x,y:o.y}),c.push({x:o.x+(s.x-o.x)/2,y:o.y}),c.push({x:o.x+(s.x-o.x)/2,y:o.y+(s.y-o.y)}),c.push({x:s.x,y:s.y});else if(l==r["c"].Bottom||l==r["c"].Top||l==r["c"].Left||l==r["c"].LeftTop||l==r["c"].LeftBottom)if(c.push({x:o.x,y:o.y}),a.point.y>i.point.y+i.height){c.push({x:o.x+u,y:o.y});var d=c[c.length-1],h=Math.abs(a.point.y-(i.point.y+i.height))/2;c.push({x:d.x,y:a.point.y-h}),d=c[c.length-1],c.push({x:s.x-u,y:d.y}),d=c[c.length-1],c.push({x:d.x,y:s.y}),c.push({x:s.x,y:s.y})}else if(i.point.y>a.point.y+a.height>0){c.push({x:o.x+u,y:o.y});d=c[c.length-1],h=Math.abs(i.point.y-(a.point.y+a.height))/2;c.push({x:d.x,y:i.point.y-h}),d=c[c.length-1],c.push({x:s.x-u,y:d.y}),d=c[c.length-1],c.push({x:d.x,y:s.y}),c.push({x:s.x,y:s.y})}else{var p=u;p=i.point.x+i.width<=a.point.x+a.width?u:i.point.x+i.width+u-o.x,c.push({x:o.x+p,y:o.y});d=c[c.length-1];s.y<o.y?(c.push({x:d.x,y:i.point.y-u}),d=c[c.length-1],c.push({x:i.point.x-u,y:d.y}),c.push({x:i.point.x-u,y:s.y}),c.push({x:s.x,y:s.y})):(c.push({x:d.x,y:i.point.y+i.height+u}),d=c[c.length-1],c.push({x:i.point.x-u,y:d.y}),c.push({x:i.point.x-u,y:s.y}),c.push({x:s.x,y:s.y}))}}else if(t==r["b"].Right&&n==r["b"].Right){if(l==r["c"].Right||l==r["c"].Bottom||l==r["c"].Top||l==r["c"].RightTop||l==r["c"].RightBottom){c.push({x:o.x,y:o.y});d=c[c.length-1];var f={x:d.x,y:d.y};if(d.y>i.point.y-u&&d.y<i.point.y+i.height+u){f.x=a.point.x+a.width+u,c.push(f);d=c[c.length-1],f={x:d.x,y:d.y};Math.abs(d.y-i.point.y)<Math.abs(d.y-(i.point.y+i.height))?f.y=i.point.y-u:f.y=i.point.y+i.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y}}a.point.x+a.width>i.point.x+i.width?f.x=a.point.x+a.width+u:f.x=i.point.x+i.width+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=s.y,c.push(f),c.push(s)}else if(l==r["c"].Left||l==r["c"].LeftTop||l==r["c"].LeftBottom){c.push({x:o.x,y:o.y}),c.push({x:o.x+u,y:o.y});d=c[c.length-1],f={x:d.x,y:d.y};s.y>a.point.y-u&&s.y<a.point.y+a.height+u?Math.abs(s.y-a.point.y)<Math.abs(s.y-(a.point.y+a.height))?f.y=a.point.y-u:f.y=a.point.y+a.height+u:f.y=s.y,c.push(f),d=c[c.length-1],d.y!=s.y&&(f={x:d.x,y:d.y},f.x=s.x+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=s.y,c.push(f)),c.push({x:s.x,y:s.y})}}else if(t==r["b"].Right&&n==r["b"].Top){if(l==r["c"].Right||l==r["c"].Top||l==r["c"].RightBottom||l==r["c"].RightTop){if(c.push({x:o.x,y:o.y}),i.point.y>o.y)c.push({x:s.x,y:o.y});else{if(i.point.x<=a.point.x+a.width&&i.point.x+i.width>=a.point.x){var m=u;m=i.point.x+i.width>a.point.x+a.width?i.point.x+i.width+u:a.point.x+a.width+u,c.push({x:m,y:o.y})}else{var g=Math.abs(i.point.x-(a.point.x+a.width));m=u;g<=u&&(m=g/2),c.push({x:o.x+m,y:o.y})}d=c[c.length-1],f={x:d.x,y:d.y},f.y=i.point.y-u,c.push(f),d=c[c.length-1],c.push({x:s.x,y:d.y})}c.push({x:s.x,y:s.y})}else if(l==r["c"].Left||l==r["c"].Bottom||l==r["c"].LeftTop||l==r["c"].LeftBottom){if(c.push({x:o.x,y:o.y}),l!=r["c"].LeftBottom&&l!=r["c"].Bottom&&i.point.x+i.width>a.point.x+a.width?c.push({x:i.point.x+i.width+u,y:o.y}):c.push({x:o.x+u,y:o.y}),i.point.y-(a.point.y+a.height)>0){d=c[c.length-1],f={x:d.x,y:d.y};m=u;i.point.y-(a.point.y+a.height)<=u&&(m=(i.point.y-(a.point.y+a.height))/2),f.y=i.point.y-m,c.push(f),d=c[c.length-1],f={x:s.x,y:d.y},c.push(f)}else d=c[c.length-1],f={x:d.x,y:d.y},a.point.y<i.point.y?f.y=a.point.y-u:f.y=i.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=s.x,c.push(f);c.push({x:s.x,y:s.y})}}else if(t==r["b"].Right&&n==r["b"].Bottom){if(l==r["c"].Right||l==r["c"].Bottom||l==r["c"].RightBottom||l==r["c"].RightTop){if(c.push({x:o.x,y:o.y}),i.point.y+i.height<o.y)c.push({x:s.x,y:o.y});else{if(i.point.x<=a.point.x+a.width&&i.point.x+i.width>=a.point.x){m=u;m=i.point.x+i.width>a.point.x+a.width?i.point.x+i.width+u:a.point.x+a.width+u,c.push({x:m,y:o.y})}else{g=Math.abs(i.point.x-(a.point.x+a.width)),m=u;g<=u&&(m=g/2),c.push({x:o.x+m,y:o.y})}d=c[c.length-1],f={x:d.x,y:d.y},f.y=i.point.y+i.height+u,c.push(f),d=c[c.length-1],c.push({x:s.x,y:d.y})}c.push({x:s.x,y:s.y})}else if(l==r["c"].Left||l==r["c"].Top||l==r["c"].LeftTop||l==r["c"].LeftBottom){if(c.push({x:o.x,y:o.y}),l!=r["c"].LeftTop&&l!=r["c"].Top&&i.point.x+i.width>a.point.x+a.width?c.push({x:i.point.x+i.width+u,y:o.y}):c.push({x:o.x+u,y:o.y}),a.point.y-(i.point.y+i.height)>0){d=c[c.length-1],f={x:d.x,y:d.y};m=u;i.point.y-(a.point.y+a.height)<=u&&(m=(i.point.y-(a.point.y+a.height))/2),f.y=i.point.y-m,c.push(f),d=c[c.length-1],f={x:s.x,y:d.y},c.push(f)}else d=c[c.length-1],f={x:d.x,y:d.y},i.point.y+i.height>a.point.y+a.height?f.y=i.point.y+i.height+u:f.y=a.point.y+a.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=s.x,c.push(f);c.push({x:s.x,y:s.y})}}else if(t==r["b"].Bottom&&n==r["b"].Left){m=u;if(l==r["c"].RightBottom||l==r["c"].RightTop||l==r["c"].Right)c.push({x:o.x,y:o.y}),s.y>a.point.y+a.height?c.push({x:o.x,y:s.y}):i.point.x<=a.point.x+a.width?(i.point.y+i.height>a.point.y+a.height&&(m=i.point.y+i.height-(a.point.y+a.height)+u),c.push({x:o.x,y:o.y+m}),d=c[c.length-1],f={x:d.x,y:d.y},i.point.x>a.point.x?f.x=a.point.x-u:f.x=i.point.x-u,c.push(f),d=c[c.length-1],c.push({x:d.x,y:s.y})):(c.push({x:o.x,y:o.y+u}),i.point.x-(a.point.x+a.width)<=2*u&&(m=(i.point.x-(a.point.x+a.width))/2),d=c[c.length-1],c.push({x:s.x-m,y:d.y}),d=c[c.length-1],c.push({x:d.x,y:s.y}));else if(l==r["c"].Top||l==r["c"].LeftTop)c.push({x:o.x,y:o.y}),i.point.y+i.height>a.point.y+a.height&&(m=i.point.y+i.height-(a.point.y+a.height)+u),c.push({x:o.x,y:o.y+m}),d=c[c.length-1],f={x:d.x,y:d.y},i.point.x>a.point.x?f.x=a.point.x-u:f.x=i.point.x-u,c.push(f),d=c[c.length-1],c.push({x:d.x,y:s.y});else if(l==r["c"].Bottom||l==r["c"].LeftBottom||l==r["c"].Left)if(c.push({x:o.x,y:o.y}),i.point.y-(a.point.y+a.height)>0){var y=i.point.y-(a.point.y+a.height);y>2*u?c.push({x:o.x,y:o.y+u}):c.push({x:o.x,y:o.y+y/2}),d=c[c.length-1],f={x:d.x,y:d.y},f.x=s.x-30,c.push(f),d=c[c.length-1],f={x:d.x,y:s.y},c.push(f)}else i.point.y+i.height>a.point.y+a.height&&(m=i.point.y+i.height-(a.point.y+a.height)+u),c.push({x:o.x,y:o.y+m}),d=c[c.length-1],f={x:d.x,y:d.y},i.point.x>a.point.x?f.x=a.point.x-u:f.x=i.point.x-u,c.push(f),d=c[c.length-1],c.push({x:d.x,y:s.y});c.push({x:s.x,y:s.y})}else if(t==r["b"].Bottom&&n==r["b"].Bottom){m=u;if(c.push({x:o.x,y:o.y}),l==r["c"].Right||l==r["c"].RightTop||l==r["c"].Top||l==r["c"].LeftTop)if(i.point.y+i.height>a.point.y+a.height&&(m=i.point.y+i.height-(a.point.y+a.height)+u),c.push({x:o.x,y:o.y+m}),d=c[c.length-1],f={x:d.x,y:d.y},s.x<a.point.x+a.width+u&&s.x>a.point.x-u){if(x=r["h"].getNodeCenter(i),x.x>o.x?(f.x=a.point.x+a.width+u,c.push(f)):(f.x=a.point.x-u,c.push(f)),d=c[c.length-1],f={x:d.x,y:d.y},a.point.y-(i.point.y+i.height)>2*u)f.y=i.point.y+i.height+u;else if(a.point.y-(i.point.y+i.height)<=0)f.y=i.point.y+i.height+u;else{y=a.point.y-(i.point.y+i.height);f.y=i.point.y+i.height+y/2}c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=s.x,c.push(f)}else f.x=s.x,c.push(f);else if(l==r["c"].Left||l==r["c"].RightBottom||l==r["c"].LeftBottom||l==r["c"].Bottom)if(d=c[c.length-1],f={x:d.x,y:d.y},i.point.x-u<=o.x&&i.point.x+i.width+u>o.x){if(i.point.y-(a.point.y+a.height)>u||i.point.y-(a.point.y+a.height)<=0)f.y=o.y+u,c.push(f);else{y=(i.point.y-(a.point.y+a.height))/2;f.y=o.y+y,c.push(f)}var x=r["h"].getNodeCenter(i);x.x>o.x?(d=c[c.length-1],f={x:d.x,y:d.y},f.x=i.point.x-u,c.push(f)):(d=c[c.length-1],f={x:d.x,y:d.y},f.x=i.point.x+i.width+u,c.push(f)),d=c[c.length-1],f={x:d.x,y:d.y},f.y=i.point.y+i.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=s.x,c.push(f)}else a.point.y+a.height>i.point.y+i.height?f.y=a.point.y+a.height+u:f.y=i.point.y+i.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=s.x,c.push(f);c.push({x:s.x,y:s.y})}else if(t==r["b"].Bottom&&n==r["b"].Right){m=u;if(c.push({x:o.x,y:o.y}),l==r["c"].Top||l==r["c"].Bottom||l==r["c"].Right||l==r["c"].RightBottom||l==r["c"].RightTop)i.point.y-(a.point.y+a.height)>0?(d=c[c.length-1],f={x:d.x,y:d.y},m=i.point.y-(a.point.y+a.height)>2*u?u:(i.point.y-(a.point.y+a.height))/2,f.y=f.y+m,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=s.x+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=s.y,c.push(f)):(d=c[c.length-1],f={x:d.x,y:d.y},a.point.y+a.height>i.point.y+i.height?f.y=a.point.y+a.height+u:f.y=i.point.y+i.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},a.point.x+a.width>i.point.x+i.width?f.x=a.point.x+a.width+u:f.x=i.point.x+i.width+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=s.y,c.push(f));else if(l==r["c"].LeftTop||l==r["c"].Left||l==r["c"].LeftBottom)if(s.y<=o.y)if(i.point.x+i.width<a.point.x){if(c.push({x:o.x,y:a.point.y+a.height+u}),d=c[c.length-1],f={x:d.x,y:d.y},a.point.x-(i.point.x+i.width)<=u){y=Math.abs(i.point.x+i.width-a.point.x)/2;f.x=i.point.x+i.width+y}else f.x=i.point.x+i.width+u;c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=s.y,c.push(f)}else a.point.y+a.height>i.point.y+i.height?c.push({x:o.x,y:a.point.y+a.height+u}):c.push({x:o.x,y:i.point.y+i.height+u}),d=c[c.length-1],f={x:d.x,y:d.y},i.point.x+i.width>a.point.x+a.width?f.x=i.point.x+i.width+u:f.x=a.point.x+a.width+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=s.y,c.push(f);else c.push({x:o.x,y:s.y});c.push({x:s.x,y:s.y})}else if(t==r["b"].Bottom&&n==r["b"].Top){m=u;if(c.push({x:o.x,y:o.y}),l==r["c"].Top||l==r["c"].Right||l==r["c"].Left||l==r["c"].RightTop||l==r["c"].LeftTop)i.point.x<=a.point.x+a.width&&i.point.x+i.width>=a.point.x?(c.push({x:o.x,y:o.y+u}),x=r["h"].getNodeCenter(i),d=c[c.length-1],f={x:d.x,y:d.y},x.x>o.x?(f.x=a.point.x<i.point.x?a.point.x:i.point.x,f.x-=u):(f.x=a.point.x+a.width<i.point.x+i.width?i.point.x+i.width:a.point.x+a.width,f.x+=u),c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=a.point.y<i.point.y?a.point.y:i.point.y,f.y-=u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=s.x,c.push(f)):(c.push({x:o.x,y:o.y+u}),d=c[c.length-1],f={x:d.x,y:d.y},i.point.x>a.point.x+a.width?f.x=a.point.x+a.width+(i.point.x-(a.point.x+a.width))/2:a.point.x>i.point.x+i.width&&(f.x=a.point.x-(a.point.x-(i.point.x+i.width))/2),c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=s.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=s.x,c.push(f));else if((l==r["c"].Bottom||l==r["c"].LeftBottom||l==r["c"].RightBottom)&&s.x!=o.x){y=i.point.y-(a.point.y+a.height);c.push({x:o.x,y:o.y+y/2}),d=c[c.length-1],f={x:d.x,y:d.y},f.x=s.x,c.push(f)}c.push({x:s.x,y:s.y})}else if(t==r["b"].Left&&n==r["b"].Left){m=u;c.push({x:o.x,y:o.y}),l==r["c"].Top||l==r["c"].Bottom||l==r["c"].Right||l==r["c"].RightTop||l==r["c"].RightBottom?(c.push({x:o.x-u,y:o.y}),d=c[c.length-1],f={x:d.x,y:d.y},s.y>a.point.y-u&&s.y<a.point.y+a.height+u?(s.y<o.y?f.y=a.point.y-u:f.y=a.point.y+a.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=s.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=s.y,c.push(f)):(f.y=s.y,c.push(f))):l!=r["c"].Left&&l!=r["c"].LeftBottom&&l!=r["c"].LeftTop||(d=c[c.length-1],f={x:d.x,y:d.y},o.y>i.point.y-u&&o.y<i.point.y+i.height+u?(c.push({x:o.x-u,y:o.y}),d=c[c.length-1],f={x:d.x,y:d.y},Math.abs(d.y-i.point.y)<Math.abs(d.y-(i.point.y+i.height))?f.y=i.point.y-u:f.y=i.point.y+i.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=i.point.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=s.y,c.push(f)):(f.x=i.point.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=s.y,c.push(f))),c.push({x:s.x,y:s.y})}else if(t==r["b"].Left&&n==r["b"].Top){m=u;if(c.push({x:o.x,y:o.y}),l==r["c"].Right||l==r["c"].RightTop||l==r["c"].RightBottom||l==r["c"].Bottom)if(i.point.y-(a.point.y+a.height)>0){d=c[c.length-1],f={x:d.x,y:d.y},f.x=a.point.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y};y=i.point.y-(a.point.y+a.height);f.y=y>2*u?i.point.y-u:a.point.y+a.height+y/2,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=s.x,c.push(f)}else d=c[c.length-1],f={x:d.x,y:d.y},i.point.x<a.point.x?f.x=i.point.x-u:f.x=a.point.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},i.point.y<a.point.y?f.y=i.point.y-u:f.y=a.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=s.x,c.push(f);else if(l==r["c"].Top||l==r["c"].LeftTop||l==r["c"].Left)if(i.point.x+i.width<a.point.x){d=c[c.length-1],f={x:d.x,y:d.y};y=Math.abs(i.point.x+i.width-a.point.x);f.x=y>2*u?a.point.x-u:a.point.x-y/2,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=i.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=s.x,c.push(f)}else d=c[c.length-1],f={x:d.x,y:d.y},i.point.x<a.point.x?f.x=i.point.x-u:f.x=a.point.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},i.point.y<a.point.y?f.y=i.point.y-u:f.y=a.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=s.x,c.push(f);else l==r["c"].LeftBottom&&c.push({x:s.x,y:o.y});c.push({x:s.x,y:s.y})}else if(t==r["b"].Left&&n==r["b"].Right){m=u;if(c.push({x:o.x,y:o.y}),l==r["c"].Right||l==r["c"].RightTop||l==r["c"].RightBottom||l==r["c"].Top||l==r["c"].Bottom)if(c.push({x:o.x-u,y:o.y}),d=c[c.length-1],f={x:d.x,y:d.y},i.point.y<=a.point.y+a.height&&i.point.y+i.height>=a.point.y){x=r["h"].getNodeCenter(i);x.y>o.y?f.y=a.point.y<i.point.y?a.point.y-u:i.point.y-u:f.y=a.point.y+a.height<i.point.y+i.height?i.point.y+i.height+u:a.point.y+a.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},i.point.x+i.width>a.point.x+a.width?f.x=i.point.x+i.width+u:f.x=a.point.x+a.width+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=s.y,c.push(f)}else{if(i.point.y>a.point.y+a.height){y=Math.abs(i.point.y-(a.point.y+a.height));f.y=a.point.y+a.height+y/2}else if(i.point.y+i.height<a.point.y){y=Math.abs(i.point.y+i.height-a.point.y);f.y=i.point.y+i.height+y/2}c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=i.point.x+i.width+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=s.y,c.push(f)}else if((l==r["c"].Left||l==r["c"].LeftTop||l==r["c"].LeftBottom)&&o.y!=s.y){y=a.point.x-(i.point.x+i.width);c.push({x:a.point.x-y/2,y:o.y}),d=c[c.length-1],f={x:d.x,y:d.y},f.y=s.y,c.push(f)}c.push({x:s.x,y:s.y})}else if(t==r["b"].Left&&n==r["b"].Bottom){m=u;if(c.push({x:o.x,y:o.y}),l==r["c"].Top||l==r["c"].Bottom||l==r["c"].Right||l==r["c"].RightTop||l==r["c"].RightBottom)if(d=c[c.length-1],f={x:d.x,y:d.y},i.point.y+i.height<a.point.y){f.x=a.point.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y};y=Math.abs(i.point.y+i.height-a.point.y);f.y=y<=2*u?i.point.y+i.height+y/2:i.point.y+i.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=s.x,c.push(f)}else d=c[c.length-1],f={x:d.x,y:d.y},i.point.x<a.point.x?f.x=i.point.x-u:f.x=a.point.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},i.point.y+i.height<a.point.y+a.height?f.y=a.point.y+a.height+u:f.y=i.point.y+i.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=s.x,c.push(f);else if(l==r["c"].LeftTop)c.push({x:s.x,y:o.y});else if(l==r["c"].Left||l==r["c"].LeftBottom)if(d=c[c.length-1],f={x:d.x,y:d.y},i.point.x+i.width<a.point.x){y=Math.abs(i.point.x+i.width-a.point.x);f.x=y<2*u?a.point.x-y/2:a.point.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=i.point.y+i.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=s.x,c.push(f)}else f.x=i.point.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=i.point.y+i.height>a.point.y+a.height?i.point.y+i.height+u:a.point.y+a.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=s.x,c.push(f);c.push({x:s.x,y:s.y})}else if(t==r["b"].Top&&n==r["b"].Left){m=u;if(c.push({x:o.x,y:o.y}),l==r["c"].RightTop)c.push({x:o.x,y:s.y});else if(l==r["c"].Right||l==r["c"].RightBottom||l==r["c"].Bottom||l==r["c"].LeftBottom)if(d=c[c.length-1],f={x:d.x,y:d.y},i.point.x>a.point.x+a.width){f.y=a.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y};y=i.point.x-(a.point.x+a.width);f.x=y>2*u?i.point.x-u:i.point.x-y/2,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=s.y,c.push(f)}else i.point.y<a.point.y?f.y=i.point.y-u:f.y=a.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},i.point.x<a.point.x?f.x=i.point.x-u:f.x=a.point.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=s.y,c.push(f);else if(l==r["c"].Left||l==r["c"].LeftTop||l==r["c"].Top)if(i.point.y+i.height<a.point.y){d=c[c.length-1],f={x:d.x,y:d.y};y=Math.abs(i.point.y+i.height-a.point.y);f.y=y>2*u?a.point.y-u:a.point.y-y/2,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=i.point.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=s.y,c.push(f)}else d=c[c.length-1],f={x:d.x,y:d.y},i.point.y<a.point.y?f.y=i.point.y-u:f.y=a.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},i.point.x<a.point.x?f.x=i.point.x-u:f.x=a.point.x-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=s.y,c.push(f);c.push({x:s.x,y:s.y})}else if(t==r["b"].Top&&n==r["b"].Right){m=u;if(c.push({x:o.x,y:o.y}),l==r["c"].Top||l==r["c"].Right||l==r["c"].Bottom||l==r["c"].RightTop||l==r["c"].RightBottom)if(i.point.y+i.height<a.point.y){d=c[c.length-1],f={x:d.x,y:d.y};y=Math.abs(i.point.y+i.height-a.point.y);f.y=y<2*u?a.point.y-y/2:a.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=i.point.x+i.width+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=s.y,c.push(f)}else d=c[c.length-1],f={x:d.x,y:d.y},i.point.y<a.point.y?f.y=i.point.y-u:f.y=a.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},i.point.x+i.width>a.point.x+a.width?f.x=i.point.x+i.width+u:f.x=a.point.x+a.width+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=s.y,c.push(f);else if(l==r["c"].LeftTop)c.push({x:o.x,y:s.y});else if(l==r["c"].Left||l==r["c"].LeftBottom)if(i.point.x+i.width<a.point.x){d=c[c.length-1],f={x:d.x,y:d.y},f.y=a.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y};y=Math.abs(i.point.x+i.width-a.point.x);f.x=y<2*u?i.point.x+i.width+y/2:i.point.x+i.width+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=s.y,c.push(f)}else d=c[c.length-1],f={x:d.x,y:d.y},i.point.y<a.point.y?f.y=i.point.y-u:f.y=a.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},i.point.x+i.width<a.point.x+a.width?f.x=a.point.x+a.width+u:f.x=i.point.x+i.width+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=s.y,c.push(f);c.push({x:s.x,y:s.y})}else if(t==r["b"].Top&&n==r["b"].Top){m=u;if(c.push({x:o.x,y:o.y}),l==r["c"].Right||l==r["c"].Left||l==r["c"].RightBottom||l==r["c"].Bottom||l==r["c"].LeftBottom)if(d=c[c.length-1],f={x:d.x,y:d.y},i.point.y<a.point.y?f.y=i.point.y-u:f.y=a.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},s.x<a.point.x+a.width+u&&s.x>a.point.x-u){x=r["h"].getNodeCenter(i);x.x<o.x?f.x=a.point.x-u:f.x=a.point.x+a.width+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y};y=i.point.y-(a.point.y+a.height);f.y=y<2*u?i.point.y-y/2:i.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=s.x,c.push(f)}else f.x=s.x,c.push(f);else if(l==r["c"].LeftTop||l==r["c"].Top||l==r["c"].RightTop){d=c[c.length-1];if(f={x:d.x,y:d.y},o.x<i.point.x+i.width+u&&o.x>i.point.x-u){y=Math.abs(i.point.y+i.height-a.point.y);f.y=y<2*u&&0!=y?a.point.y-y/2:a.point.y-u,c.push(f);d=c[c.length-1];f={x:d.x,y:d.y};x=r["h"].getNodeCenter(i);x.x<o.x?f.x=i.point.x+i.width+u:f.x=i.point.x-u,c.push(f);d=c[c.length-1];f={x:d.x,y:d.y},f.y=i.point.y-u,c.push(f);d=c[c.length-1];f={x:d.x,y:d.y},f.x=s.x,c.push(f)}else{i.point.y<a.point.y?f.y=i.point.y-u:f.y=a.point.y-u,c.push(f);d=c[c.length-1];f={x:d.x,y:d.y},f.x=s.x,c.push(f)}}c.push({x:s.x,y:s.y})}else if(t==r["b"].Top&&n==r["b"].Bottom){m=u;if(c.push({x:o.x,y:o.y}),l==r["c"].Top||l==r["c"].LeftTop||l==r["c"].RightTop){if(d=c[c.length-1],f={x:d.x,y:d.y},s.x!=o.x){y=Math.abs(i.point.y+i.height-a.point.y);f.y=a.point.y-y/2,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=s.x,c.push(f)}}else if(l==r["c"].Left||l==r["c"].Right||l==r["c"].LeftBottom||l==r["c"].RightBottom||l==r["c"].Bottom)if(d=c[c.length-1],f={x:d.x,y:d.y},i.point.x<=a.point.x+a.width&&i.point.x+i.width>=a.point.x){i.point.y<a.point.y?f.y=i.point.y-u:f.y=a.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y};x=r["h"].getNodeCenter(i);x.x<o.x?f.x=i.point.x<a.point.x?i.point.x-u:a.point.x-u:f.x=i.point.x+i.width<a.point.x+a.width?a.point.x+a.width+u:i.point.x+i.width+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=i.point.y+i.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=s.x,c.push(f)}else{if(f.y=a.point.y-u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},i.point.x+i.width<a.point.x){y=Math.abs(i.point.x+i.width-a.point.x);f.x=a.point.x-y/2}else if(a.point.x+a.width<i.point.x){y=Math.abs(a.point.x+a.width-i.point.x);f.x=i.point.x-y/2}c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.y=i.point.y+i.height+u,c.push(f),d=c[c.length-1],f={x:d.x,y:d.y},f.x=s.x,c.push(f)}c.push({x:s.x,y:s.y})}return c}function x(e,t){if(e){var n=[],a=e.fromDirection,i=e.fromNode,o=e.startPoint,s=t,l=30,c=r["h"].getDirection(o,s),u=r["h"].getAngle(o,s);if(a==r["b"].Right)n.push({x:o.x,y:o.y}),c==r["c"].RightTop||c==r["c"].RightBottom?u>0&&u<45||u>315&&u<360?(d=n[n.length-1],h={x:d.x,y:d.y},h.x=o.x+(s.x-o.x)/2,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=s.y,n.push(h)):(d=n[n.length-1],h={x:d.x,y:d.y},h.x=s.x,n.push(h)):c==r["c"].Bottom||c==r["c"].LeftBottom||c==r["c"].Left?u<135?(d=n[n.length-1],h={x:d.x,y:d.y},h.x=h.x+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=s.y-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=s.x,n.push(h)):(d=n[n.length-1],h={x:d.x,y:d.y},h.x=h.x+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},s.y<=i.point.y+i.height+l?(h.y=i.point.y+i.height+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=s.x+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=s.y,n.push(h)):(h.y=s.y,n.push(h))):c!=r["c"].Top&&c!=r["c"].LeftTop||(u>225?(d=n[n.length-1],h={x:d.x,y:d.y},h.x=h.x+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=s.y+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=s.x,n.push(h)):(d=n[n.length-1],h={x:d.x,y:d.y},h.x=h.x+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},s.y>=i.point.y-l?(h.y=i.point.y-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=s.x+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=s.y,n.push(h)):(h.y=s.y,n.push(h)))),n.push({x:s.x,y:s.y});else if(a==r["b"].Bottom){n.push({x:o.x,y:o.y}),c==r["c"].RightBottom||c==r["c"].LeftBottom?u>90&&u<135||u<90&&u>45?(d=n[n.length-1],h={x:d.x,y:d.y},h.y=o.y+(s.y-o.y)/2,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=s.x,n.push(h)):(d=n[n.length-1],h={x:d.x,y:d.y},h.y=s.y,n.push(h)):c==r["c"].Right||c==r["c"].Top||c==r["c"].RightTop?u>315?(d=n[n.length-1],h={x:d.x,y:d.y},h.y=h.y+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=s.x-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=s.y,n.push(h)):(d=n[n.length-1],h={x:d.x,y:d.y},h.y=h.y+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},s.x<=i.point.x+i.width+l?(h.x=i.point.x+i.width+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=s.y+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=s.x,n.push(h)):(h.x=s.x,n.push(h))):c!=r["c"].Left&&c!=r["c"].LeftTop||(u<225?(d=n[n.length-1],h={x:d.x,y:d.y},h.y=h.y+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=s.x+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=s.y,n.push(h)):(d=n[n.length-1],h={x:d.x,y:d.y},h.y=h.y+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},s.x>=i.point.x-l?(h.x=i.point.x-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=s.y+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=s.x,n.push(h)):(h.x=s.x,n.push(h)))),n.push({x:s.x,y:s.y})}else if(a==r["b"].Left){n.push({x:o.x,y:o.y}),c==r["c"].LeftTop||c==r["c"].LeftBottom?u>135&&u<180||u>180&&u<225?(d=n[n.length-1],h={x:d.x,y:d.y},h.x=o.x+(s.x-o.x)/2,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=s.y,n.push(h)):(d=n[n.length-1],h={x:d.x,y:d.y},h.x=s.x,n.push(h)):c==r["c"].Bottom||c==r["c"].RightBottom||c==r["c"].Right?u>45?(d=n[n.length-1],h={x:d.x,y:d.y},h.x=h.x-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=s.y-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=s.x,n.push(h)):(d=n[n.length-1],h={x:d.x,y:d.y},h.x=h.x-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},s.y<=i.point.y+i.height+l?(h.y=i.point.y+i.height+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=s.x-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=s.y,n.push(h)):(h.y=s.y,n.push(h))):c!=r["c"].Top&&c!=r["c"].RightTop||(u<315?(d=n[n.length-1],h={x:d.x,y:d.y},h.x=h.x-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=s.y+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=s.x,n.push(h)):(d=n[n.length-1],h={x:d.x,y:d.y},h.x=h.x-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},s.y>=i.point.y-l?(h.y=i.point.y-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=s.x-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=s.y,n.push(h)):(h.y=s.y,n.push(h)))),n.push({x:s.x,y:s.y})}else if(a==r["b"].Top){var d,h;n.push({x:o.x,y:o.y}),c==r["c"].RightTop||c==r["c"].LeftTop?u>270&&u<315||u<270&&u>225?(d=n[n.length-1],h={x:d.x,y:d.y},h.y=o.y+(s.y-o.y)/2,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=s.x,n.push(h)):(d=n[n.length-1],h={x:d.x,y:d.y},h.y=s.y,n.push(h)):c==r["c"].Right||c==r["c"].Bottom||c==r["c"].RightBottom?u<45?(d=n[n.length-1],h={x:d.x,y:d.y},h.y=h.y-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=s.x-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=s.y,n.push(h)):(d=n[n.length-1],h={x:d.x,y:d.y},h.y=h.y-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},s.x<=i.point.x+i.width+l?(h.x=i.point.x+i.width+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=s.y-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=s.x,n.push(h)):(h.x=s.x,n.push(h))):c!=r["c"].Left&&c!=r["c"].LeftBottom||(u>135?(d=n[n.length-1],h={x:d.x,y:d.y},h.y=h.y-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=s.x+l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=s.y,n.push(h)):(d=n[n.length-1],h={x:d.x,y:d.y},h.y=h.y-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},s.x>=i.point.x-l?(h.x=i.point.x-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.y=s.y-l,n.push(h),d=n[n.length-1],h={x:d.x,y:d.y},h.x=s.x,n.push(h)):(h.x=s.x,n.push(h)))),n.push({x:s.x,y:s.y})}return n}}var v={name:"Lines",props:{lines:{type:Array,default:function(){return[]}},nodes:{type:Array,default:function(){return[]}},events:{type:Array,default:function(){return[]}},isDrawLine:{type:Boolean,default:function(){return!1}},checked:{type:Object,default:function(){return{}}},isSub:{type:Boolean,default:function(){return!1}},parentNode:{type:Object,default:function(){return null}},config:{type:Object,default:function(){return{}}}},data:function(){return{paper:null,start:!1,currentMouseDrawingLine:null,startInfo:null,startPoint:null,down_direction:null,currentLineInfo:null,centerOffset:10,dragSize:20,maxWidth:0,maxHeight:0,maxSizeOffset:50,currentDragLine:{},isDrag:!1,type:"drawLine",mp:null}},watch:{checked:function(e){this.lines.forEach((function(t){t===e?e.selected():t.unSelected()}))}},mounted:function(){var e=this;this.paper=new l.a(this.$refs.lines,"100%","100%"),this.$refs.lines.addEventListener("mousedown",(function(t){e.mousedown(t)})),document.addEventListener("mousemove",(function(t){e.mousemove(t)})),document.addEventListener("mouseup",(function(t){e.mouseup(t),e.updateIntersection()})),this.$bus.$on("startDraw".concat(this.isSub?this.parentNode.id:""),this.startDraw),this.$bus.$on("nodeMove".concat(this.isSub?this.parentNode.id:""),this.nodeMove),this.$bus.$on("eventMove".concat(this.isSub?this.parentNode.id:""),this.eventMove),this.$bus.$on("addLine".concat(this.isSub?this.parentNode.id:""),this.addLine),this.$bus.$on("showSubNode".concat(this.isSub?this.parentNode.id:""),this.showSubNode),this.$bus.$on("hideLines",this.hideLines),this.$bus.$on("updateIntersection",this.updateIntersection),this.$bus.$on("updateNodeName".concat(this.isSub?this.parentNode.id:""),this.resetLineName)},methods:{toPx:g["h"],startDraw:function(e,t){this.isDrawLine&&this.$bus.$emit("isDrewingLine".concat(this.isSub?this.parentNode.id:""),"end"),this.isDrawLine&&this.checked instanceof d["a"]&&t&&(this.start=!0,this.mouseDrawLine(e),this.type="drawLine");var n=t;this.isDrawLine&&n&&this.checked instanceof f["a"]&&(this.start=!0,this.eventDrawLine(e),this.type="drawLine")},mousedown:function(e){if("path"==e.target.tagName){e.stopPropagation();var t=Object(g["g"])(e.target);if(t){var n=t.getLine();if(this.$bus.$emit("update-checked",n),n){if(n.readOnly)return;this.lineMouseDownHandler(e,n)}}}},mousemove:function(e){if(this.start)return"drawLine"===this.type?(this.drawLine(e),!1):(this.dragLine(e),!1)},addLine:function(e){var t,n,a=Object.assign({type:0},e),i=new h["a"](this.config,a);if(a.from&&(t="event"===a.fromType?Object(g["d"])(this.events,a.from):Object(g["d"])(this.nodes,a.from)),a.to&&(n=Object(g["d"])(this.nodes,a.to)),0===i.path.length){var o=this.getPathPoints(i,t,n);o&&o.length>0&&(i.path=o)}this.addToPanel(i,t,n)},showSubNode:function(e){var t=[],n=function(n,a){var i=n.linkInfo;e.open.show?(n.unFold=i[a],n.fold?i[a]=n.fold:i[a]=i[a]):(n.fold=i[a],n.unFold?i[a]=n.unFold:i[a]=0),t.push(n.id)};this.lines.forEach((function(a){a.from!==e.id&&a.to!==e.id||(n(a,a.from===e.id?"fromOffset":"toOffset"),t.push(a.id))})),t.length>0&&this.renderLines(t),this.updateIntersection()},hideLines:function(e,t){var n=this;e.forEach((function(e){n.lines.forEach((function(n){e===n.id&&(n.isHide=t,t?n.hide():n.show())}))}))},drawLine:function(e){var t=this.$store.state.flow.page.scale,n=this.parentNode?{x:e.pageX-this.parentNode.point.x*t,y:e.pageY-(this.parentNode.point.y+this.parentNode.imgHeight+2*this.parentNode.padding)*t}:{x:e.pageX,y:e.pageY},a=this.$store.getters["flow/getMousePointByCanvas"](n);a.x=a.x/t,a.y=a.y/t;var i=e.target;if(this.currentLineInfo&&(this.currentLineInfo.endPoint=null,this.currentLineInfo.targetNode=null,this.currentLineInfo.targetDirection=null),"IMG"==i.tagName||"DIV"==i.tagName&&-1!==i.className.indexOf("task-node")){var o=Object(g["f"])(this.nodes,i);if(o){var s=this.getDrawLineEndPointInfo(o,n),l=!1;if(this.currentLineInfo.fromNode==o?this.currentLineInfo.fromDirection!=s.direction&&(l=!0):l=!0,l){this.currentLineInfo.endPoint=s.point,this.currentLineInfo.targetNode=o,this.currentLineInfo.targetDirection=s.direction;var r=y(this.currentLineInfo);r&&(this.currentMouseDrawingLine.path=r,this.currentMouseDrawingLine.render())}}}else{var c=x(this.currentLineInfo,a);c&&(this.currentMouseDrawingLine.path=c,this.currentMouseDrawingLine.render())}this.$bus.$emit("autoScroll",{type:"line",data:this.currentMouseDrawingLine,mouse:{x:e.pageX,y:e.pageY}})},dragLine:function(e){var t=this.mp,n=this.$store.getters["flow/getMousePointByCanvas"]({x:e.pageX,y:e.pageY});if(Math.abs(n.x-t.x)<2&&Math.abs(n.y-t.y)<2)return!1;var a=e.target,i=null,o=null,s=this.currentDragLine,l=this.checked;if(s.changeJoinDriection){if("start"==s.dragPosition?(o=Object(g["d"])(this.nodes,l.to),this.$bus.$emit("isDrewingLine".concat(this.isSub?this.parentNode.id:""),"start")):"end"==s.dragPosition&&(i=Object(g["d"])(this.nodes,l.from),this.$bus.$emit("isDrewingLine".concat(this.isSub?this.parentNode.id:""),"end")),"IMG"==a.tagName||"DIV"==a.tagName&&-1!==a.className.indexOf("task-node")){var r=Object(g["f"])(this.nodes,a);r&&("start"==s.dragPosition?(i=r,o=Object(g["d"])(this.nodes,l.to)):"end"==s.dragPosition&&(i="event"===l.fromType?Object(g["d"])(this.events,l.from):Object(g["d"])(this.nodes,l.from),o=r))}else"start"==s.dragPosition?o=Object(g["d"])(this.nodes,l.to):i="event"===l.fromType?Object(g["d"])(this.events,l.from):Object(g["d"])(this.nodes,l.from);this.mouseDragLine(i,o,e)}else i="event"===l.fromType?Object(g["d"])(this.events,l.from):Object(g["d"])(this.nodes,l.from),o=Object(g["d"])(this.nodes,l.to),this.mouseDragLine(i,o,e);this.isDrag=!0,this.$bus.$emit("autoScroll",{type:"line",data:s,mouse:{x:e.pageX,y:e.pageY}}),e.preventDefault()},mouseup:function(e){return e.stopPropagation(),e.preventDefault(),this.start=!1,this.$bus.$emit("isDrewingLine".concat(this.isSub?this.parentNode.id:""),null),"drawLine"===this.type?(this.drawRealLine(),!1):(this.dragRealLine(),!1)},drawRealLine:function(){if(!this.currentLineInfo)return!1;try{var e=this.currentLineInfo.fromNode,t=this.currentLineInfo.targetNode,n={paper:this.paper};e&&e instanceof f["a"]&&(n.fromType="event");var a=new h["a"](this.config,n);this.isSub&&(a.parentNodeId=this.parentNode.id),a.path=this.currentMouseDrawingLine.path,t?(this.updateLineLinkInfo(a,e,t,this.currentLineInfo.fromDirection,this.currentLineInfo.targetDirection),this.currentMouseDrawingLine.remove(),this.addToPanel(a,e,t)):this.currentMouseDrawingLine.remove()}catch(i){console.log(i)}finally{this.currentLineInfo=null}},addToPanel:function(e,t,n){var a=this.maxSizeOffset;e.paper=this.paper,this.lines.push(e);for(var i=!1,o=0;o<e.path.length;o++){var s=e.path[o];parseFloat(s.x)+a>this.maxWidth&&(this.maxWidth=parseFloat(s.x)+a,i=!0),parseFloat(s.y)+a>this.maxWidth&&(this.maxHeight=parseFloat(s.y)+a,i=!0)}i&&this.$bus.$emit("resize"),e.id||(e.id=r["h"].uuid()),this.render(e),e.isHide?e.hide():e.show(),this.updateIntersection(),this.setNodeLinkNodeInfo(t,n,e),e.setAttributes(t,n)},dragRealLine:function(){var e=this.currentDragLine,t=this.checked;try{if(this.isDrag){var n,a,i,o;if(e.changeJoinDriection){if(e.fromNode&&e.toNode){n=e.fromNode?e.fromNode:"event"===t.fromType?Object(g["d"])(this.events,t.from):Object(g["d"])(this.nodes,t.from),a=e.toNode?e.toNode:Object(g["d"])(this.nodes,t.to),i=e.fromDirection?e.fromDirection:t.linkInfo.fromDirection,o=e.toDirection?e.toDirection:t.linkInfo.toDirection;var s=!0;if(n==a&&i==o&&(s=!1),s){var l=e.proxy.path;if(l&&l.length>0&&(t.path=l,this.render(t)),t.id){var r;if(t.from)if(r="event"===t.fromType?Object(g["d"])(this.events,t.from):Object(g["d"])(this.nodes,t.from),r){var c=r["out"].indexOf(t.id);c>=0&&r["out"].splice(c,1)}if(t.to){var u=Object(g["d"])(this.nodes,t.to);if(u){var d=u["in"].indexOf(t.id);d>=0&&u["in"].splice(d,1)}}}}}}else{n="event"===t.fromType?Object(g["d"])(this.events,t.from):Object(g["d"])(this.nodes,t.from),a=Object(g["d"])(this.nodes,t.to),i=e.fromDirection?e.fromDirection:t.linkInfo.fromDirection,o=e.toDirection?e.toDirection:t.linkInfo.toDirection;var h=e.proxy.path;h&&h.length>0&&(t.path=h,this.render(t))}n&&a&&(this.updateLineLinkInfo(t,n,a,i,o),this.setNodeLinkNodeInfo(n,a,t),t.setAttributes(n,a),this.updateIntersection())}}catch(p){console.log(p)}finally{this.isDrag=!1,e.proxy.remove(),e=null,this.$bus.$emit("resize")}},mouseDrawLine:function(e){var t=this.$store.state.flow.page.scale;this.currentMouseDrawingLine=null;var n=this.checked;this.currentMouseDrawingLine=new u(this.config,this.paper,{strokeWidth:2,from:n.id});var a=this.parentNode?{x:e.pageX-this.parentNode.point.x*t,y:e.pageY-(this.parentNode.point.y+this.parentNode.imgHeight+2*this.parentNode.padding)*t}:{x:e.pageX,y:e.pageY};this.startInfo=this.getDrawLineStartPointInfo(n,a),this.startPoint=this.startInfo.point,this.down_direction=this.startInfo.direction,this.currentMouseDrawingLine.path.push(this.startPoint),this.currentLineInfo={startPoint:this.startPoint,fromDirection:this.down_direction,fromNode:n}},eventDrawLine:function(e){this.currentMouseDrawingLine=null;var t=this.checked;this.currentMouseDrawingLine=new u(this.config,this.paper,{strokeWidth:2,from:t.id}),this.startInfo=this.getEventLineStartPointInfo(t,{x:e.pageX,y:e.pageY}),this.startPoint=this.startInfo.point,this.down_direction=this.startInfo.direction,this.currentMouseDrawingLine.path.push(this.startPoint),this.currentLineInfo={startPoint:this.startPoint,fromDirection:this.down_direction,fromNode:t}},getDrawLineStartPointInfo:function(e,t){var n=this.$store.getters["flow/getMousePointByCanvas"]({x:t.x,y:t.y}),a=this.$store.state.flow.page.scale;n.x=n.x/a,n.y=n.y/a;var i=r["h"].getNodeDirection(e,n),o=r["h"].getNodeCenter(e);i==r["b"].Right&&(n.x=o.x+e.width/2,n.y<e.point.y&&(n.y=e.point.y),n.y>e.point.y+e.height&&(n.y=e.point.y+e.height),Math.abs(n.y-o.y)<this.centerOffset?n.y=o.y:n.y=Object(g["c"])(n).y),i==r["b"].Left?(n.x=e.point.x,n.y<e.point.y&&(n.y=e.point.y),n.y>e.point.y+e.height&&(n.y=e.point.y+e.height),Math.abs(n.y-o.y)<this.centerOffset?n.y=o.y:n.y=Object(g["c"])(n).y):i==r["b"].Bottom?(n.y=e.point.y+e.height,n.x<e.point.x&&(n.x=e.point.x),n.x>e.point.x+e.width&&(n.x=e.point.x+e.width),Math.abs(n.x-o.x)<this.centerOffset?n.x=o.x:n.x=Object(g["c"])(n).x):i==r["b"].Top&&(n.y=e.point.y,n.x<e.point.x&&(n.x=e.point.x),n.x>e.point.x+e.width&&(n.x=e.point.x+e.width),Math.abs(n.x-o.x)<this.centerOffset?n.x=o.x:n.x=Object(g["c"])(n).x);var s={x:n.x,y:n.y},l={point:s,direction:i};return l},getDrawLineEndPointInfo:function(e,t){var n=this.$store.getters["flow/getMousePointByCanvas"]({x:t.x,y:t.y}),a=this.$store.state.flow.page.scale;n.x=n.x/a,n.y=n.y/a;var i=r["h"].getNodeCenter(e),o=r["h"].getNodeDirection(e,n);o==r["b"].Left?(n.y<e.point.y&&(n.y=e.point.y),n.y>e.point.y+e.height&&(n.y=e.point.y+e.height),Math.abs(n.y-i.y)<this.centerOffset?n.y=i.y:n.y=Object(g["c"])(n).y,n.x=e.point.x):o==r["b"].Right?(n.y<e.point.y&&(n.y=e.point.y),n.y>e.point.y+e.height&&(n.y=e.point.y+e.height),Math.abs(n.y-i.y)<this.centerOffset?n.y=i.y:n.y=Object(g["c"])(n).y,n.x=e.point.x+e.width):o==r["b"].Top?(n.x<e.point.x&&(n.x=e.point.x),n.x>e.point.x+e.width&&(n.x=e.point.x+e.width),Math.abs(n.x-i.x)<this.centerOffset?n.x=i.x:n.x=Object(g["c"])(n).x,n.y=e.point.y):o==r["b"].Bottom&&(n.x<e.point.x&&(n.x=e.point.x),n.x>e.point.x+e.width&&(n.x=e.point.x+e.width),Math.abs(n.x-i.x)<this.centerOffset?n.x=i.x:n.x=Object(g["c"])(n).x,n.y=e.point.y+e.height);var s={x:n.x,y:n.y},l={point:s,direction:o};return l},getEventLineStartPointInfo:function(e,t){var n=this.$store.getters["flow/getMousePointByCanvas"]({x:t.x,y:t.y}),a=this.$store.state.flow.page.scale;n.x=n.x/a,n.y=n.y/a;var i=e.direction;i==r["b"].Right?(n.x=e.point.x+e.width/2+e.img.width/2,n.y=e.point.y+e.img.width/2):i==r["b"].Left?(n.x=e.point.x+e.width/2-e.img.width/2,n.y=e.point.y+e.img.width/2):i==r["b"].Top?(n.x=e.point.x+e.width/2,n.y=e.point.y):(n.x=e.point.x+e.width/2,n.y=e.point.y+e.img.width);var o={x:n.x,y:n.y},s={point:o,direction:i};return s},updateLineLinkInfo:function(e,t,n,a,i){if("string"==typeof t&&(t=Object(g["d"])(this.nodes,t)),"string"==typeof n&&(n=Object(g["d"])(this.nodes,n)),t&&n){var o=0,s=0,l={x:e.path[0].x,y:e.path[0].y},c={x:e.path[e.path.length-1].x,y:e.path[e.path.length-1].y},u=r["h"].getNodeCenter(t),d=r["h"].getNodeCenter(n);a==r["b"].Top||a==r["b"].Bottom?o=l.x-u.x:a!=r["b"].Left&&a!=r["b"].Right||(o=l.y-u.y),i==r["b"].Top||i==r["b"].Bottom?s=c.x-d.x:i!=r["b"].Left&&i!=r["b"].Right||(s=c.y-d.y),e.linkInfo={fromDirection:a,toDirection:i,fromOffset:o,toOffset:s}}},updateIntersection:function(){for(var e=this.getAllSegments(),t=e.v_segments,n=e.h_segments,a=0;a<n.length;a++){var i=n[a],o=i.getIntersection().length>0;i.clearIntersection();for(var s=0;s<t.length;s++){var l=t[s],c=r["h"].segmentsIntr(i.sp,i.ep,l.sp,l.ep),u=r["i"]+5;if(c){if(Math.abs(c.x-i.sp.x)<=u||Math.abs(c.x-i.ep.x)<=u)continue;if(Math.abs(c.y-l.sp.y)<=u||Math.abs(c.y-l.ep.y)<=u)continue;for(var d=i.getIntersection(),h=!1,p=0;p<d.length;p++)if(d[p].x==c.x&&d[p].y==c.y){h=!0;break}h||i.setIntersection(c)}}if(i.getIntersection().length>0||o){i.render();var f=i.getLine();f.isHide&&i.hide()}}},getAllSegments:function(){for(var e=[],t=[],n=0;n<this.lines.length;n++)for(var a=this.lines[n].getSegmenList(),i=0;i<a.length;i++){var o=a[i],s=this.getLineType(o);s==r["d"].horizontal?t.push(o):e.push(o)}return{v_segments:e,h_segments:t}},getLineType:function(e){return e.sp.y==e.ep.y?r["d"].horizontal:e.sp.x==e.ep.x?r["d"].vertical:void 0},nodeMove:function(e){var t=[].concat(Object(o["a"])(e.in),Object(o["a"])(e.out));this.renderLines(t),this.updateIntersection()},renderLines:function(e){if(e&&(!e||0!=e.length))for(var t=0;t<e.length;t++){var n=e[t],a=Object(g["d"])(this.lines,n),i=void 0;i="event"===a.fromType?Object(g["d"])(this.events,a.from):Object(g["d"])(this.nodes,a.from);var o=Object(g["d"])(this.nodes,a.to),s=this.getPathPoints(a,i,o);s&&s.length>0&&(a.path=s,this.render(a),this.hideOrShowSubNodeLines(a,i,o))}},getPathPoints:function(e,t,n){var a=e.linkInfo,i=("event"===e.fromType?this.getEventPointByLineOffset:this.getPointByLineOffset)(e,t,a.fromDirection),o=this.getPointByLineOffset(e,n,a.toDirection);if(i&&o){var s={fromNode:t,targetNode:n,startPoint:i,endPoint:o,fromDirection:a.fromDirection,targetDirection:a.toDirection};return y(s)}return[]},hideOrShowSubNodeLines:function(e,t,n){e.isHide=!1,"event"===e.fromType&&(t.hide||n.hide)?(e.hide(),e.isHide=!0):e.show()},eventMove:function(e){if(e.out&&e.out.length>0)for(var t=0;t<e.out.length;t++){var n=e.out[t],a=Object(g["d"])(this.lines,n),i=Object(g["d"])(this.events,a.from),o=Object(g["d"])(this.nodes,a.to),s=a.linkInfo,l=0,r=0;l=this.getEventPointByLineOffset(a,i,s.fromDirection),r=this.getPointByLineOffset(a,o,s.toDirection);if(l&&r){var c={fromNode:i,targetNode:o,startPoint:l,endPoint:r,fromDirection:s.fromDirection,targetDirection:s.toDirection},u=y(c);u&&u.length>0&&(a.path=u,this.render(a),this.hideOrShowSubNodeLines(a,i,o))}}this.updateIntersection()},getPointByLineOffset:function(e,t,n){var a=null,i=r["h"].getNodeCenter(t),o=e.from===t.id?"from":e.to===t.id?"to":null;if(!o)return null;var s="from"==o?e.linkInfo.fromOffset:e.linkInfo.toOffset;return a=n==r["b"].Top?{x:i.x+s,y:t.point.y}:n==r["b"].Bottom?{x:i.x+s,y:t.point.y+t.height}:n==r["b"].Left?{x:t.point.x,y:i.y+s}:{x:t.point.x+t.width,y:i.y+s},a},getEventPointByLineOffset:function(e,t,n){var a=null;return a=n==r["b"].Top?{x:t.point.x+t.width/2,y:t.point.y}:n==r["b"].Bottom?{x:t.point.x+t.width/2,y:t.point.y+t.img.height}:n==r["b"].Left?{x:t.point.x+t.width/2-t.img.height/2,y:t.point.y+t.img.height/2}:{x:t.point.x+t.width/2+t.img.height/2,y:t.point.y+t.img.height/2},a},getPointByFold:function(e,t,n,a,i){if(!a){var o="from"===i?e.linkInfo.fromOffset:e.linkInfo.toOffset,s=r["h"].getNodeCenter(t);return n==r["b"].Top?p={x:s.x+o,y:t.point.y}:n==r["b"].Bottom?p={x:s.x+o,y:t.point.y+t.height}:n==r["b"].Left?p={x:t.point.x,y:s.y+o}:p={x:t.point.x+t.width,y:s.y+o},p}},lineMouseDownHandler:function(e,t){this.type="dragline";var n=Object(g["g"])(e.target);if(n){if(this.start=!0,this.isDrag=!1,!t)return!1;var a={segmen:n,line:t,proxy:new u(this.config,this.paper,{"stroke-dasharray":["-"]}),changeJoinDriection:!1};this.currentDragLine=a;var i=this.mp=this.$store.getters["flow/getMousePointByCanvas"]({x:e.pageX,y:e.pageY});1==t.getSegmenList().length?n.type==r["d"].horizontal?Math.abs(n.sp.x-i.x)<=this.dragSize?(a.changeJoinDriection=!0,a.dragPosition="start"):Math.abs(n.ep.x-i.x)<=this.dragSize&&(a.changeJoinDriection=!0,a.dragPosition="end"):0==n.index&&Math.abs(n.sp.y-i.y)<=this.dragSize?(a.changeJoinDriection=!0,a.dragPosition="start"):n.isLast&&Math.abs(n.ep.y-i.y)<=this.dragSize&&(a.changeJoinDriection=!0,a.dragPosition="end"):t.getSegmenList().length>1&&(n.type==r["d"].horizontal?0==n.index&&Math.abs(n.sp.x-i.x)<=this.dragSize?(a.changeJoinDriection=!0,a.dragPosition="start"):n.isLast&&Math.abs(n.ep.x-i.x)<this.dragSize&&(a.changeJoinDriection=!0,a.dragPosition="end"):0==n.index&&Math.abs(n.sp.y-i.y)<=this.dragSize?(a.changeJoinDriection=!0,a.dragPosition="start"):n.isLast&&Math.abs(n.ep.y-i.y)<=this.dragSize&&(a.changeJoinDriection=!0,a.dragPosition="end"))}},mouseDragLine:function(e,t,n){var a=this.currentDragLine;if(a)if(a.changeJoinDriection){C=a.segmen;if(C){L=C.getLine(),D=this.$store.getters["flow/getMousePointByCanvas"]({x:n.pageX,y:n.pageY});var i=this.$store.state.flow.page.scale;if(D.x=D.x/i,D.y=D.y/i,"start"==a.dragPosition){var o=e,s=t,l=null,c=null,u="";if(o)l=this.getDrawLineStartPointInfo(o,{x:n.pageX,y:n.pageY}),c=l.point,u=l.direction;else{var d=Object(g["c"])(D);o={width:0,height:0,point:d,abstract:!0},c=d;var h=r["h"].getNodeDirection(s,d);h==r["c"].Left?u=r["c"].Right:h==r["c"].Right?u=r["c"].Left:h==r["c"].Bottom?u=r["c"].Top:h==r["c"].Top&&(u=r["c"].Bottom)}var p=this.getPointByLineOffset(L,s,L.linkInfo.toDirection),m={startPoint:c,fromDirection:u,fromNode:o,targetNode:s,targetDirection:L.linkInfo.toDirection,endPoint:p};E=y(m);o.abstract?a.fromNode=null:a.fromNode=o,a.toNode=s,a.fromDirection=u,a.proxy.path=E,a.proxy.render()}else if("end"==a.dragPosition){o=e,s=t;var x=null,v=null,b=null;if(s)x=this.getDrawLineStartPointInfo(s,{x:n.pageX,y:n.pageY}),v=x.point,b=x.direction;else{var w=D;s={width:0,height:0,point:w,abstract:!0},v=w;h=r["h"].getNodeDirection(o,w);h==r["c"].Left?b=r["c"].Right:h==r["c"].Right?b=r["c"].Left:h==r["c"].Bottom?b=r["c"].Top:h==r["c"].Top&&(b=r["c"].Bottom)}var k=(o instanceof f["a"]?this.getEventPointByLineOffset:this.getPointByLineOffset)(L,o,L.linkInfo.fromDirection);m={startPoint:k,fromDirection:L.linkInfo.fromDirection,fromNode:o,targetNode:s,targetDirection:b,endPoint:v},E=y(m);a.fromNode=o,s.abstract?a.toNode=null:a.toNode=s,a.toDirection=b,a.proxy.path=E,a.proxy.render()}}}else{var D=this.$store.getters["flow/getMousePointByCanvas"]({x:n.pageX,y:n.pageY});D=Object(g["c"])(D),this.parentNode&&(D.x=D.x-this.parentNode.point.x,D.y=D.y-this.parentNode.point.y-this.parentNode.imgHeight);var _=this.$store.state.flow.page.scale;D.x=D.x/_,D.y=D.y/_;var C=a.segmen;if(C){var S,N,L=C.getLine();if(C.type==r["d"].vertical)if(0==C.index)S="event"===L.fromType?Object(g["d"])(this.events,L.from):Object(g["d"])(this.nodes,L.from),D.x>=S.point.x&&D.x<=S.point.x+S.width&&(C.ep.x=D.x,C.sp.x=D.x);else if(C.isLast){var $=Object(g["d"])(this.nodes,L.to);D.x>=$.point.x&&D.x<=$.point.x+$.width&&(C.ep.x=D.x,C.sp.x=D.x)}else C.ep.x=D.x,C.sp.x=D.x;else if(0==C.index){if(N="event"===L.fromType?Object(g["d"])(this.events,L.from):Object(g["d"])(this.nodes,L.from),D.y>=N.point.y&&D.y<=N.point.y+N.height){var I=r["h"].getNodeCenter(N);Math.abs(D.y-I.y)<this.centerOffset&&(D.y=I.y),C.ep.y=D.y,C.sp.y=D.y}}else if(C.isLast){$=Object(g["d"])(this.nodes,L.to);if(D.y>=$.point.y&&D.y<=$.point.y+$.height){var T=r["h"].getNodeCenter($);Math.abs(D.y-T.y)<this.centerOffset&&(D.y=T.y),C.ep.y=D.y,C.sp.y=D.y}}else C.ep.y=D.y,C.sp.y=D.y;var O=L.getSegmenList(),E=this.covertPointBySegmen(O);a.proxy.path=E,a.proxy.render()}}},covertPointBySegmen:function(e){for(var t=[],n=0;n<e.length;n++){var a=e[n];t.push(a.sp),n==e.length-1&&t.push(a.ep)}return t},setNodeLinkNodeInfo:function(e,t,n){e["out"]&&e["out"].indexOf(n.id)<0&&e["out"].push(n.id),t["in"]&&t["in"].indexOf(n.id)<0&&t["in"].push(n.id),n.from=e.id,n.to=t.id},render:function(e){e.remove(),e.stroke=e.getLineStroke();for(var t=r["h"].convertSegmentByPoint(e.path),n=0;n<t.length;n++){var a=t[n],i=new m["a"](e,this.paper,n,{strokeWidth:e.strokeWidth,stroke:e.stroke});i.sp=a.sp,i.ep=a.ep,n==t.length-1&&(i.isLast=!0),i.direction=r["h"].getDirection(i.sp,i.ep),e.addElement(i)}for(var o=e.getSegmenList(),s=0;s<o.length;s++)o[s].render()},globalMove:function(e,t,n){if(e)for(var a=0;a<this.lines.length;a++){for(var i=this.lines[a],o=0;o<i.path.length;o++)t&&(i.path[o].x+=e.x),n&&(i.path[o].y+=e.y);(t||n)&&this.render(i)}},resetLineName:function(e){this.lines.forEach((function(t){if(t.from===e.id){var n=t.name.split("→");2===n.length&&(t.name=e.name+"→"+n[1],t.attributes.BaseInfo.Name=t.name)}if(t.to===e.id){var a=t.name.split("→");2===a.length&&(t.name=a[0]+"→"+e.name,t.attributes.BaseInfo.Name=t.name)}}))}}},b=v,w=(n("341c"),n("2877")),k=Object(w["a"])(b,a,i,!1,null,"1ad20997",null);t["a"]=k.exports},"8a3c":function(e,t,n){"use strict";(function(e){n("99af"),n("4de4"),n("0481"),n("4160"),n("a15b"),n("4069"),n("ac1f"),n("5319"),n("159b");var a=n("2909"),i=n("8050"),o=n("bf21"),s=n("5837");t["a"]={name:"LinkSet",components:{SelectTree:o["a"],SelectTable:s["a"]},mixins:[i["a"]],data:function(){return{searchKey:"",flowData:[],selectFlow:null,checked:[],sID:"",curNode:null,selectTab:0,tempFlow:null,data:[],default:null,eleColumns:[{prop:"labelCaption",label:"控件名称"},{prop:"readOnly",label:"只读",width:120,isSelect:!0,readOnlyAll:!1,isIndeterminate:!1},{prop:"hidden",label:"隐藏",width:120,isSelect:!0,hiddenAll:!1,isIndeterminate:!1}],btnsColumns:[{prop:"text",label:"按钮名称"},{prop:"readOnly",label:"可用",width:120,isSelect:!0,readOnlyAll:!1,isIndeterminate:!1}]}},watch:{selectFlow:function(e){var t=e.ctrls.filter((function(e){return e.readOnly})),n=e.ctrls.filter((function(e){return e.hidden})),a=e.btns.filter((function(e){return e.readOnly}));this.eleColumns[1].readOnlyAll=t.length===e.ctrls.length,this.eleColumns[2].hiddenAll=n.length===e.ctrls.length,this.btnsColumns[1].readOnlyAll=a.length===e.btns.length,this.curNode=e}},created:function(){this.sID=this.owner.chooseFlow&&this.owner.chooseFlow.dsfa_rm_id,this.data=this.currentData,this.initFlow()},mounted:function(){},methods:{yes:function(){var e=this;this.tempFlow&&(this.owner.chooseFlow=this.tempFlow);var t=dsf.mix(!0,{},this.flowData[0]);return t.children.forEach((function(t){t.ctrls&&t.ctrls.length>0&&t.ctrls.forEach((function(t){e.hiddenToVisible(t)}))})),t.NodeList=t.children,delete t.children,this.$http.post("wfk/saveExWF",{sData:JSON.stringify(t)}).then((function(e){if(2e4==e.data.state)return[t];dsf.layer.message(e.message||"环节设置异常",!1)}))},validate:function(){return!0},hiddenToVisible:function(e){e.visible=!e.hidden,delete e.hidden},visibleToHidden:function(e){e.hidden=!e.visible},initFlow:function(){var e=this;if(this.data&&this.data.length>0){var t=dsf.mix(!0,[],this.data);return t[0].NodeList.forEach((function(t){t.ctrls&&t.ctrls.length>0&&t.ctrls.forEach((function(t){e.visibleToHidden(t)})),t.btns&&t.btns.length>0&&t.btns.forEach((function(e){e.readOnly=!!e.readOnly}))})),t[0].children=t[0].NodeList,this.checked=[t[0].children[0].id],this.curNode=t[0].children[0],void(this.flowData=t)}this.$http.get("wfk/getWFNodeList",{sID:this.sID}).then((function(t){if(t.data.success){e.initDefault();var n=e.formatData(t.data.data,void 0);n&&n.children&&(e.checked=[n.children[0].id],e.curNode=n.children[0]),e.flowData=[n]}}))},initDefault:function(){var e,t=[],n=[],a=!0;dsf.recursionComponentProps(this.owner.$$getComponent().$page.$props,(function(i){if(i.isFormControl&&"DsfFlowInfo"!==i.ctrlName&&"DsfDisposeIdea"!==i.ctrlName){if(!i.metadata_fullcode)return a=!1,void dsf.layer.message("请先保存表单后再操作",!1);t.push({id:i.id,label:i.label,labelCaption:"".concat(i.label,"(").concat(i.caption,")"),caption:i.caption,readOnly:!1,hidden:!1,visible:!0,metadataCode:i.metadata_fullcode})}"page"===i.caption&&"DsfPage"===i.ctrlName&&(e=i.title),i.ctrlName&&"DsfButtonBar"===i.ctrlName&&i.buttons.forEach((function(e){e.readOnly=!1,n.push(e)}))})),this.default=a?{pageTitle:e,ctrls:t,btns:n}:null},formatData:function(e,t,n){if(e.label=e.WFName||e.NodeName,e.id=e.WFID||e.NodeID,n){var a=JSON.parse(JSON.stringify(this.default));e.pageTitle=a&&a.pageTitle||"",e.ctrls=a&&a.ctrls||[],e.btns=a&&a.btns||[];var i=dsf.url.queryString("B"),o=dsf.url.queryString("M"),s=dsf.url.queryString("pname");e.NameSpace="".concat(i,".").concat(o,".").concat(s)}if(void 0===t&&(e.disabled=e.NodeType===t),e.children=e.NodeList,e.children)for(var l=0;l<e.children.length;l++)this.formatData(e.children[l],t,!0);return e},chooseForm:function(){var t=this,n={type:"form"};dsf.layer.pc.openDialog({title:"选择表单",width:"400px",height:"400px",overflow:"hidden",content:"ChooseForm",params:n,btns:[{text:"确定",handler:function(n){if(n.validate()){var a=n.yes(),i=a.ID;i=i.replace("."+a.code,"");var o=dsf.url.getWebPath("/pc/views/".concat(i,"/").concat(a.code,".layout.html"));return t.$http.get(o,null,{responseType:"text"}).then((function(n){if(n.data){var i=e("<div>"+n.data+"</div>"),o=i.children("script[id='layout']").html()||"",s=new Function(["var layout="+(o||"null")+";","return layout;"].join("\n")),l=s();t.curNode.pageTitle=l.title,t.curNode.ctrls=t.getFormctrls(l),t.curNode.btns=t.getBtns(l),t.curNode.NameSpace=a.ID}})),!0}return!1}},{text:"取消"}]})},applyTo:function(){var e=this,t={data:this.flowData};dsf.layer.pc.openDialog({title:"应用于",width:"400px",height:"400px",overflow:"hidden",content:"ApplyTo",params:t,btns:[{text:"确定",handler:function(t){var n=t.yes();return n.forEach((function(t){t.NodeID&&e.flowData.forEach((function(n){n.children.forEach((function(n){t.id===n.id&&(n.pageTitle=e.curNode.pageTitle,n.ctrls=dsf.mix(!0,[],e.curNode.ctrls),n.btns=dsf.mix(!0,[],e.curNode.btns),n.NameSpace=e.curNode.NameSpace)}))}))})),!0}},{text:"取消"}]})},getFormctrls:function(e){var t=this,n=[];return e.isFormControl?n.push({id:e.id,label:e.label,labelCaption:"".concat(e.label,"(").concat(e.caption,")"),caption:e.caption,readOnly:!1,hidden:!1}):e.slots.forEach((function(e){e.controls.forEach((function(e){var a=t.getFormctrls(e);n.push(a)}))})),n.flat(1/0)},getBtns:function(e){var t=this,n=[];return e.ctrlName&&"DsfButtonBar"===e.ctrlName?n.push.apply(n,Object(a["a"])(e.buttons)):e.slots.forEach((function(e){e.controls.forEach((function(e){var a=t.getBtns(e);console.log(a),n.push(a)}))})),n.flat(1/0)},chooseFlow:function(){var e=this,t={currentData:this.tempFlow||this.owner.chooseFlow};dsf.layer.pc.openDialog({title:"流程设置",width:"400px",height:"400px",overflow:"hidden",content:"ChooseFlow",params:t,btns:[{text:"确定",handler:function(t){if(t.validate()){var n=t.yes();return e.tempFlow=n,e.sID=n.dsfa_rm_id,e.data=[],e.initFlow(),!0}return!1}},{text:"取消"}]})}}}}).call(this,n("1157"))},"907c":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DsfButton",{attrs:{type:"auxiliary",icon:"shezhi"},on:{click:e.clickHandler}},[e._v("设置")])},i=[],o=n("94b5"),s=o["a"],l=n("2877"),r=Object(l["a"])(s,a,i,!1,null,null,null);t["a"]=r.exports},"91e3":function(e,t,n){"use strict";(function(e,a){n("99af"),n("cb29"),n("4160"),n("d81d"),n("ac1f"),n("5319"),n("1276"),n("159b");var i=n("5530"),o=n("35b5"),s=n("f70e"),l=n("b3c6"),r=n("2f62");function c(t){var n=e.cloneDeep(this.info);n.member.forEach((function(e){e.width=t})),Object(l["a"])(n),this.info=n}function u(){}function d(){console.log("updateGroupSize4MemberTop")}function h(e){var t=e.member[0],n=e.width-t.width*e.cols;return 1===e.cols?0:n/(e.cols-1)}function p(e){var t=e.member[0],n=e.height-t.height*e.rows;return 1===e.rows?0:n/(e.rows-1)}t["a"]={name:"RightTools",props:{},data:function(){return{showTool:!1,sexList:[{val:null,txt:"请选择"},{val:1,txt:"男宿舍"},{val:2,txt:"女宿舍"}],defaultStateList:[{img:"",statusText:"正常",statusValue:1,couldSeat:1},{img:"",statusText:"已排",statusValue:2,couldSeat:2},{img:"",statusText:"禁用",statusValue:3,couldSeat:2},{img:"",statusText:"锁定",statusValue:4,couldSeat:2}],stateList:[],info:{},groupVisible:[!1,!1,!1],visiblePointer:null,oldVisibleStatus:!1,dialogVisible:!1,statusKv:""}},computed:Object(i["a"])(Object(i["a"])({},Object(r["b"])("seatDesign",{activeId:"activeId"})),{},{memberWidth:{set:function(e){this.info&&this.info.id&&c.call(this,e)},get:function(){return e.isArray(this.info.member)?this.info.member[0].width:void 0}},memberHeight:{set:function(e){this.info&&this.info.id&&u.call(this,e)},get:function(){return e.isArray(this.info.member)?this.info.member[0].height:void 0}},memberSpaceTop:{set:function(e){this.info&&this.info.id&&d.call(this,e)},get:function(){return e.isArray(this.info.member)?p(this.info):void 0}},memberSpaceLeft:{set:function(e){},get:function(){return e.isArray(this.info.member)?h(this.info):void 0}}}),watch:{activeId:function(t){var n=this;if(t){var a;o["a"].emit(s["a"].GET_ACTIVE_SEAT,(function(e){a=e})),this.info=a,this.showTool=!0,this.$nextTick((function(){n.$set(n.groupVisible,n.visiblePointer,n.oldVisibleStatus)}))}else{this.showTool=!1;var i=new Array(3);this.groupVisible=e.fill(i,!1)}},stateList:{handler:function(e){this.info.stateList=e},deep:!0},info:{handler:function(e){this.$store.commit("seatDesign/changeSeatInfo",e)},deep:!0}},created:function(){e.isArray(this.stateList)&&0!==this.stateList.length||(this.stateList=this.defaultStateList)},methods:{printHang:function(e,t){console.log(e),console.log(t)},uploadMultiple:function(e){var t=this,n=this.$refs.uploadInput;a(n).click(),a(n).one("change",(function(){if(0!==n.files.length){for(var i=new FormData,o=0;o<n.files.length;o++){var s=n.files[o];i.append("file_"+o,s)}l["b"].call(t,i,(function(n){if("error"===n)return!1;1===n.length?e.img=n[0].relativePath:t.stateList.forEach((function(e,t){e.img=n[t].relativePath}))})),a(n).val("")}}))},closeGroup:function(e){this.visiblePointer=e,this.$set(this.groupVisible,e,!1),this.oldVisibleStatus=!1},showGroup:function(t){this.visiblePointer=t;var n=new Array(3);this.groupVisible=e.fill(n,!1),this.$set(this.groupVisible,t,!0),this.oldVisibleStatus=!0},saveStatus:function(){var t,n,a=this.statusKv.split("\n"),i=[];a.forEach((function(e){if(t=e.split("|").map((function(e){return e.replace(/(^\s*)|(\s*$)/g,"")})),1!==+t[2]&&2!==+t[2])return dsf.layer.alert("statusText|statusValue|couldSeat  当中的couldSeat只能为1或2"),!1;n={img:"",statusText:t[0],statusValue:+t[1],couldSeat:+t[2]},i.push(n)}));var o=e.differenceBy(this.defaultStateList,i,"statusValue");this.stateList=e.concat(o,i),this.dialogVisible=!1},getImagePath:function(e){return e?dsf.url.getWebPath(e):null},getInfoTypeName:function(){switch(this.info.type){case"seat":return"座位";case"bed":return"床位";case"group":if("seat"===this.info.memberType)return"座位组";if("bed"===this.info.memberType)return"床位组"}}}}}).call(this,n("2ef0"),n("1157"))},"94b5":function(e,t,n){"use strict";(function(e){n("4795"),n("96cf");var a=n("1da1");t["a"]={name:"DsfDesignerDialog",model:{prop:"args"},props:["attrdata","args","owner"],data:function(){return{cloneArgs:{},dialogVisible:!1,width:"50%"}},created:function(){var e=this.attrdata;this.owner&&this.owner.isQuestionControl&&e&&e.config&&"DesQuestionConfig"===e.config.content&&this.$bus.$on("questionSetting",this.clickHandler)},destroyed:function(){this.$bus.$off("questionSetting",this.clickHandler)},methods:{sure:function(){},cancel:function(){},clickHandler:function(t){this.dialogVisible=!0;var n=this,i=this.owner,o=this.attrdata.config,s=o.title,l=o.content,r=o.width,c=o.height,u=o.overflow,d=o.class;"array"==dsf.type(this.args)?this.cloneArgs=dsf.mix(!0,[],this.args):"object"==dsf.type(this.args)?this.cloneArgs=dsf.mix(!0,{},this.args):this.cloneArgs=this.args;var h=e.extend({data:function(){return{dialogVisible:!0,title:s||"设置",content:l,config:o,currentData:n.cloneArgs,width:r||"50%",height:c||"auto",destroyOnClose:!0,owner:i,overflow:u||"auto",params:o.params||{},skin:d||""}},methods:{sure:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=null,!e.$refs.content){t.next=9;break}if(!1===e.$refs.content.validate()){t.next=9;break}if(!e.$refs.content.yes){t.next=7;break}return t.next=6,e.$refs.content.yes();case 6:a=t.sent;case 7:e.dialogVisible=!1,e.$nextTick((function(){n.$emit("change",a)}));case 9:case"end":return t.stop()}}),t)})))()},close:function(){this.dialogVisible=!1},cancel:function(){var e=this;p&&(p=null),window.setTimeout((function(){e.$destroy()}),0)}},template:'<DsfDialog :class=\'skin\' :title="title" :visible.sync="dialogVisible" :width="width" top="10vh" :close-on-click-modal="false" :append-to-body="true"  @close="close" @closed="cancel" >\n                    <div :style="{\'height\':height,\'overflow\':(overflow||\'auto\')}">\n                     <component :is="content"  v-bind="params" :current-data="currentData" :owner="owner" :config="config" ref="content"></component>\n                    </div>\n                    <template v-slot:footer>\n                      <DsfButton text="确定" @click="sure" />\n                      <DsfButton text="取消" type="auxiliary" @click="close"/>\n                    </template>\n                  </DsfDialog>'}),p=(new h).$mount()}}}}).call(this,n("a026")["default"])},9538:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-question-formwrap"},[n("div",{staticClass:"example"},[n("el-form",{attrs:{"label-position":"top"}},[n("el-form-item",{attrs:{prop:"value",label:e.exampleLabel,rules:e.exampleRules}},["0"==e.form.layout?n("el-checkbox-group",{attrs:{value:[]}},e._l(e.exampleItems,(function(t){return n("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.text))])})),1):n("el-checkbox-group",{attrs:{value:[]}},[n("el-row",e._l(e.exampleItems,(function(t){return n("el-col",{key:t.value,attrs:{span:e.getColSpan}},[n("el-checkbox",{attrs:{label:t.value}},[e._v(e._s(t.text))])],1)})),1)],1)],1)],1)],1),n("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.rules,"label-width":"auto","label-position":"left"}},[n("el-row",{attrs:{gutter:15}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{prop:"questionBody","label-width":"0"}},[n("el-input",{attrs:{placeholder:"请输入题干"},model:{value:e.form.questionBody,callback:function(t){e.$set(e.form,"questionBody",t)},expression:"form.questionBody"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"isOther",label:"是否含有'其他'选项:"}},[n("el-switch",{model:{value:e.form.isOther,callback:function(t){e.$set(e.form,"isOther",t)},expression:"form.isOther"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"readOnly",label:"本题不允许填写:"}},[n("el-switch",{model:{value:e.form.readOnly,callback:function(t){e.$set(e.form,"readOnly",t)},expression:"form.readOnly"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"visible",label:"本题是否显示:"}},[n("el-switch",{model:{value:e.form.visible,callback:function(t){e.$set(e.form,"visible",t)},expression:"form.visible"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"required",label:"必填标识:"}},[n("el-switch",{model:{value:e.form.required,callback:function(t){e.$set(e.form,"required",t)},expression:"form.required"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{staticClass:"keep-bottom",attrs:{prop:"maxCheckNum",label:"最多选择数量:"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.maxCheckNum,callback:function(t){e.$set(e.form,"maxCheckNum",t)},expression:"form.maxCheckNum"}},e._l(e.maxSelectOptions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{staticClass:"keep-bottom",attrs:{prop:"layout",label:"排列样式:"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.layout,callback:function(t){e.$set(e.form,"layout",t)},expression:"form.layout"}},[n("el-option",{attrs:{label:"自适应",value:"0"}}),n("el-option",{attrs:{label:"竖向排列",value:"1"}}),n("el-option-group",{attrs:{label:"横向排列"}},[n("el-option",{attrs:{label:"每行2列",value:"2"}}),n("el-option",{attrs:{label:"每行3列",value:"3"}}),n("el-option",{attrs:{label:"每行4列",value:"4"}}),n("el-option",{attrs:{label:"每行5列",value:"5"}})],1)],1)],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"mustCheckNum",label:"限制选择数量:"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.mustCheckNum,callback:function(t){e.$set(e.form,"mustCheckNum",t)},expression:"form.mustCheckNum"}},e._l(e.mustSelectOptions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",[n("el-button",{attrs:{icon:"el-icon-plus"},on:{click:e.addOption}},[e._v("添加选项")]),n("el-button",{attrs:{icon:"el-icon-circle-plus-outline"},on:{click:e.batchAddOption}},[e._v("批量添加")])],1)],1),n("el-col",{staticStyle:{padding:"15px 0"},attrs:{span:24}},[n("el-table",{attrs:{data:e.form.items}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),n("el-table-column",{attrs:{label:"选项"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-form-item",{attrs:{size:"small",prop:"items."+t.$index+".value","label-width":"0",rules:[{required:!0,message:"请输入"}]}},[n("el-input",{attrs:{placeholder:"请输入"},on:{change:function(n){e.optionChange(e.form.items[t.$index],n)}},model:{value:e.form.items[t.$index].text,callback:function(n){e.$set(e.form.items[t.$index],"text",n)},expression:"form.items[scope.$index].text"}})],1)]}}])}),n("el-table-column",{attrs:{label:"操作",width:"180",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"show",rawName:"v-show",value:0===t.$index,expression:"scope.$index === 0"}],attrs:{circle:"",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:e.addOption}}),n("el-button",{attrs:{circle:"",size:"small",icon:"el-icon-remove-outline"},on:{click:function(n){return e.remove(t)}}}),n("el-button",{attrs:{circle:"",size:"small",icon:"el-icon-top",disabled:0===t.$index},on:{click:function(n){return e.toggle(t,"up")}}}),n("el-button",{attrs:{circle:"",size:"small",icon:"el-icon-bottom",disabled:t.$index===e.form.items.length-1},on:{click:function(n){return e.toggle(t,"down")}}})]}}])})],1)],1),n("el-col",{attrs:{span:24}},[n("div",{staticClass:"ljsz"},[n("span",{staticClass:"label"},[e._v("逻辑设置:")]),n("span",{staticClass:"btn",on:{click:e.showRela}},[e._v("题目关联")])])])],1)],1),n("el-dialog",{attrs:{title:"添加选项",visible:e.dialogVisible,modal:!0,"append-to-body":!0,"modal-append-to-body":!1,"before-close":e.handleClose,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-input",{attrs:{type:"textarea",rows:15,placeholder:"多个选项使用换行分割"},model:{value:e.optionText,callback:function(t){e.optionText=t},expression:"optionText"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("dsf-button",{attrs:{type:"auxiliary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("dsf-button",{on:{click:e.sure}},[e._v("确 定")])],1)],1)],1)},i=[],o=(n("99af"),n("d81d"),n("a434"),n("ac1f"),n("5319"),n("1276"),n("2909")),s=n("b773"),l={mixins:[s["a"]],props:["owner"],data:function(){var e=this,t=function(t,n,a){e.form.mustCheckNum>0&&n!=e.form.mustCheckNum?a(new Error("最多选择数量必须等于限选数量")):a()},n=function(t,n,a){e.form.maxCheckNum>0&&n>e.form.maxCheckNum?a(new Error("限选数量不能大于最多选择数量")):a()};return{form:{questionBody:"请输入题干",readOnly:!1,visible:!0,required:!0,isOther:!1,layout:"0",items:[],mustCheckNum:0,maxCheckNum:0},rules:{questionBody:[{required:!0,message:"请输入题干"}],mustCheckNum:[{validator:n,trigger:"change"}],maxCheckNum:[{validator:t,trigger:"change"}]},optionText:"",dialogVisible:!1}},computed:{mustSelectOptions:function(){var e=this.exampleItems.map((function(e,t){var n=t+1;return{label:"限选".concat(n,"项"),value:n}}));return[{label:"不限制",value:0}].concat(Object(o["a"])(e))},maxSelectOptions:function(){var e=this.exampleItems.map((function(e,t){var n=t+1;return{label:"最多选".concat(n,"项"),value:n}}));return[{label:"不限制",value:0}].concat(Object(o["a"])(e))},exampleItems:function(){var e=this.form.items;return this.form.isOther&&(e=[].concat(Object(o["a"])(e),[{text:"其他",value:"其他"}])),e},getColSpan:function(){switch(this.form.layout){case"1":return 24;case"2":return 12;case"3":return 8;case"4":return 6;case"5":return 4;default:return 24}},exampleLabel:function(){return"".concat(this.owner.questionIndex,".").concat(this.form.questionBody)},exampleRules:function(){return this.form.required?[{required:!0,trigger:"blur"}]:null}},created:function(){this.owner.layout=this.owner.layout+""},methods:{optionChange:function(e,t){e.value=t},addOption:function(){var e=this.form.items.length;this.form.items.push({text:"选项".concat(e+1),value:"选项".concat(e+1),attach_text:""})},batchAddOption:function(){this.optionText="",this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1},toggle:function(e,t){var n,a=e.$index,i=Object(o["a"])(this.form.items),s=this.form.items[a];a===this.form.items.length-1&&"down"===t||0===a&&"up"===t||(n="up"===t?a-1:a+1,i.splice(a,1),i.splice(n,0,s),this.form.items=i)},remove:function(e){this.form.items.splice(e.$index,1)},sure:function(){var e=this.optionText.replace(/^\s|\s$/g,"").split(/\n/).map((function(e){var t=e.replace(/^\s|\s$/g,"").split("|");return{text:t[0],value:t[1]?t[1]:t[0],attach_text:""}}));this.form.items=[].concat(Object(o["a"])(this.form.items),Object(o["a"])(e)),this.dialogVisible=!1}}},r=l,c=n("2877"),u=Object(c["a"])(r,a,i,!1,null,null,null);t["a"]=u.exports},"9a9e":function(e,t,n){"use strict";(function(e){n("a15b"),n("d81d"),n("d3b7"),n("acd8"),n("ac1f"),n("25f0"),n("1276");var a=n("907c"),i=n("afe9");t["a"]={name:"DsfDesignerProperty",components:{DsfDesignerDialog:a["a"],DsfRangeSelect:i["a"]},props:{data:{type:Object,default:function(){return{}}},bind:{type:Object,default:function(){return{}}},owner:{type:Object,default:function(){return{}}},desc:{type:String,default:""}},data:function(){return{showHeplerMark:!1,dataValue:this.convertFromDataType(this.bind.data[this.bind.key])}},computed:{config:function(){var e=this.data.config;return e||{}},dataValueArray:{get:function(){return this.dataValue||[]},set:function(e){this.dataValue=e}},inputDisabled:function(){return!!this.config.disabled||!("caption"!=this.data.bindControlAttr||!this.owner.isBusiness)}},created:function(){this.$watch((function(){return this.bind.data[this.bind.key]}),{handler:function(e){this.dataValue=this.convertFromDataType(e)}})},methods:{dataValueChange:function(e){var t=this,n=e;void 0!==n&&this.bind.key&&(this.bind.data[this.bind.key]=this.convertToDataType(e,this.data.splitChart)),this.$nextTick((function(){if(t.data.changeExecFunction){var e=t.data.changeExecFunction,n=t.owner[e];n&&n.call(t.owner)}}))},showHelp:function(){this.showHeplerMark=!0},convertFromDataType:function(e){var t=e;if(dsf.isDef(e))if("text"==this.data.showType)this.data&&this.data&&this.data.dataType&&("Number[]"==this.data.dataType||"String[]"==this.data.dataType?"array"==dsf.type(e)&&(t=e.join(this.data.splitChart||",")):"Number"==this.data.dataType&&(t=e.toString()));else if("timePicker"==this.data.showType&&"array"==dsf.type(e)){var n=dsf.date.format(new Date,"yyyy/mm/dd ");t=[new Date(n+e[0]),new Date(n+e[1])]}return t},convertToDataType:function(t){var n=t;return dsf.isDef(t)&&("text"==this.data.showType&&"string"==dsf.type(t)?"Number[]"==this.data.dataType?(n=t.split(this.data.splitChart||","),n=e.map(n,(function(e){return parseFloat(e)}))):"String[]"==this.data.dataType?n=t.split(this.data.splitChart||","):"Number"==this.data.dataType&&(n=parseFloat(n)):"timePicker"==this.data.showType&&Array.isArray(t)&&(n=[dsf.date.format(t[0],"hh:ii:ss"),dsf.date.format(t[1],"hh:ii:ss")])),n}}}}).call(this,n("2ef0"))},"9d7a":function(e,t,n){"use strict";(function(e){n("4de4"),n("c740"),n("d81d"),n("a434"),n("96cf");var a=n("1da1");t["a"]={name:"DesFunctionSetting",props:{buttons:{type:Array,default:function(){return[]}}},data:function(){return{treeData:[],treeProps:{label:"_name"},buttonsTable:[],currentSelectRow:null}},mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.getOuaRulesTree();case 2:a=n.sent,t.buttonsTable=e.map(t.buttons,(function(e){return e.setting?dsf.mix(!0,{},e):void 0})),console.log(t.buttons),t.buttonsTable=e.filter(t.buttonsTable,(function(e){return e})),t.treeData=a,t.$refs.table.setCurrentRow(t.buttonsTable[0]);case 8:case"end":return n.stop()}}),n)})))()},methods:{getOuaRulesTree:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.$webAPI.getOuaRulesTree().then((function(e){return e.data})).catch((function(e){throw dsf.layer.pc.message("加载角色树失败",!1),e})));case 1:case"end":return t.stop()}}),t)})))()},currentChangeHandler:function(t){this.currentSelectRow=t;var n=this.currentSelectRow.roles;n=e.map(n,"id"),this.$refs.tree.setCheckedKeys(n)},checkChangeHandler:function(t,n,a){if(t&&this.currentSelectRow&&2==t.type_value)if(n){var i=e.findIndex(this.currentSelectRow.roles,(function(e){return e.id===t._id}));i>=0&&this.currentSelectRow.roles.splice(i,1),this.currentSelectRow.roles.push({id:t._id,name:t._name,serial_number:t.serial_number})}else dsf.array.remove(this.currentSelectRow.roles,(function(e,n){return e.id==t._id}))},yes:function(){return this.buttonsTable}}}}).call(this,n("2ef0"))},"9ee9":function(e,t,n){"use strict";n.r(t);n("fb6a"),n("d3b7"),n("ac1f"),n("5319"),n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2cd9"),n("b9f7"),n("32a4"),n("7a9c");var a=n("3c6c"),i=n("b1ac"),o=n("a4f6"),s=n("463c"),l=n("924a"),r=n("681c"),c=n("ccef"),u=(n("b0c0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"nodes",staticClass:"nodes",class:{isSub:e.isSub,active:e.isSub&&e.dragToSubNode===e.parentNode},style:{height:e.current?e.isSub?"calc(100% - "+e.toPx(e.parentNode.imgHeight+2*e.parentNode.padding+2)+")":"100%":0,top:e.isSub?e.toPx(e.parentNode.imgHeight+2*e.parentNode.padding):0,pointerEvents:e.current?"auto":""}},e._l(e.nodes,(function(t){return a("div",{key:t.id,staticClass:"nodeOuter",class:{"task-node":"task"===t.sort&&t.open&&t.open.show},style:{top:e.showOuterPadding(t)?e.toPx(t.point.y-50):e.toPx(t.point.y-t.padding),left:e.showOuterPadding(t)?e.toPx(t.point.x-50):e.toPx(t.point.x-t.padding),padding:e.showOuterPadding(t)?e.toPx(50)+" "+e.toPx(70)+" "+e.toPx(70)+" "+e.toPx(50):e.toPx(t.padding),pointerEvents:e.current&&e.current.id!==t.id||"end"===e.isDrewingLine&&("202"===t.type||"203"===t.type)||"start"===e.isDrewingLine&&"299"===t.type?"none":"auto"},attrs:{"data-id":t.id,"data-parent-id":e.isSub?e.parentNode.id:"",draggable:e.draggable},on:{dragstart:function(n){return e.drag(n,t)},mousedown:function(n){return e.selectNode(n,t)},dblclick:function(n){return e.showSub(n,t)}}},["task"!==t.sort||"task"===t.sort&&t.open&&!t.open.show?a("div",{staticClass:"node",class:{selected:e.checked===t||e.selectedList.indexOf(t)>-1},style:{width:e.toPx(t.width),height:e.toPx(t.height)},attrs:{draggable:"false","data-id":t.id}},[a("img",{class:{selected:e.checked===t||e.selectedList.indexOf(t)>-1},style:{width:e.toPx(t.imgWidth),height:e.toPx(t.imgHeight)},attrs:{src:n("3cfd")("./"+t.type+".png"),"data-id":t.id,draggable:"false"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawLine,expression:"isDrawLine"}],staticClass:"joinPoint l"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawLine,expression:"isDrawLine"}],staticClass:"joinPoint r"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawLine,expression:"isDrawLine"}],staticClass:"joinPoint t"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawLine,expression:"isDrawLine"}],staticClass:"joinPoint b"}),a("p",{staticClass:"nodename ellipsis",style:{width:e.toPx(t.nameWidth)},attrs:{title:t.name},on:{dblclick:function(n){return e.editNode(n,t)}}},[t.edit?e._e():a("span",[e._v(e._s(t.name))]),t.edit?a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"node.name"},{name:"focus",rawName:"v-focus"}],staticClass:"nodenameInput",attrs:{type:"text"},domProps:{value:t.name},on:{keyup:function(n){if(!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter"))return null;t.edit=null},blur:function(e){t.edit=null},input:[function(n){n.target.composing||e.$set(t,"name",n.target.value)},function(n){return e.editName(t)}],mousedown:function(e){e.stopPropagation(),e.preventDefault()},dblclick:function(e){return e.stopPropagation()}}}):e._e()])]):e._e(),"task"===t.sort&&"102"!=t.type&&t.open&&t.open.show?a("div",{staticClass:"node",class:{selected:e.checked===t||e.selectedList.indexOf(t)>-1,"normal-node":"task"===t.sort&&"102"!==t.type},style:{width:e.toPx(t.width),height:e.toPx(t.height),padding:"30px 15px",pointerEvents:e.isDrewingLine?"none":""},attrs:{"data-id":t.id,"data-parent-id":e.isSub?e.parentNode.id:"",draggable:"false"}},[a("img",{staticClass:"img",class:{selected:e.checked===t||e.selectedList.indexOf(t)>-1},style:{width:e.toPx(t.imgWidth),height:e.toPx(t.imgHeight)},attrs:{draggable:"false",src:n("3cfd")("./"+t.type+".png")}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawLine,expression:"isDrawLine"}],staticClass:"joinPoint l"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawLine,expression:"isDrawLine"}],staticClass:"joinPoint r"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawLine,expression:"isDrawLine"}],staticClass:"joinPoint t"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawLine,expression:"isDrawLine"}],staticClass:"joinPoint b"}),a("p",{staticClass:"nodename ellipsis",attrs:{title:t.name},on:{dblclick:function(n){return e.editNode(n,t)}}},[t.edit?e._e():a("span",[e._v(e._s(t.name))]),t.edit?a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"node.name"},{name:"focus",rawName:"v-focus"}],staticClass:"nodenameInput",attrs:{type:"text"},domProps:{value:t.name},on:{keyup:function(n){if(!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter"))return null;t.edit=null},blur:function(e){t.edit=null},input:[function(n){n.target.composing||e.$set(t,"name",n.target.value)},function(n){return e.editName(t)}],mousedown:function(e){e.stopPropagation(),e.preventDefault()},dblclick:function(e){return e.stopPropagation()}}}):e._e()]),a("div",{staticClass:"task-msg",on:{dblclick:function(t){return e.showRangeRule(t)}}},[e._v(" "+e._s(t.taskMsg||"未设置发送范围")+" ")])]):e._e(),"task"===t.sort&&"102"==t.type?a("div",{directives:[{name:"show",rawName:"v-show",value:t.open&&t.open.show,expression:"node.open && node.open.show"}],staticClass:"node",class:{selected:e.checked===t||e.selectedList.indexOf(t)>-1,"sub-node":"102"===t.type&&t.open&&t.open.show},style:{width:e.toPx(t.width),height:e.toPx(t.height),padding:e.toPx(30),pointerEvents:e.isDrewingLine?"none":""},attrs:{"data-id":t.id,"data-parent-id":e.isSub?e.parentNode.id:"",draggable:"false"}},[a("img",{staticClass:"img",class:{selected:e.checked===t||e.selectedList.indexOf(t)>-1},style:{width:e.toPx(t.imgWidth),height:e.toPx(t.imgHeight)},attrs:{draggable:"false",src:n("3cfd")("./"+t.type+".png")}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawLine,expression:"isDrawLine"}],staticClass:"joinPoint l"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawLine,expression:"isDrawLine"}],staticClass:"joinPoint r"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawLine,expression:"isDrawLine"}],staticClass:"joinPoint t"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawLine,expression:"isDrawLine"}],staticClass:"joinPoint b"}),a("p",{staticClass:"nodename ellipsis",attrs:{title:t.name},on:{dblclick:function(n){return e.editNode(n,t)}}},[t.edit?e._e():a("span",[e._v(e._s(t.name))]),t.edit?a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"node.name"},{name:"focus",rawName:"v-focus"}],staticClass:"nodenameInput",attrs:{type:"text"},domProps:{value:t.name},on:{keyup:function(n){if(!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter"))return null;t.edit=null},blur:function(e){t.edit=null},input:[function(n){n.target.composing||e.$set(t,"name",n.target.value)},function(n){return e.editName(t)}],mousedown:function(e){e.stopPropagation(),e.preventDefault()},dblclick:function(e){return e.stopPropagation()}}}):e._e()]),a("subprocess",{ref:"subprocess",refInFor:!0,attrs:{"is-draw-line":e.isDrawLine,lines:t.lines,"parent-node":t,nodes:t.nodes,events:t.events,checked:e.checked,config:e.config}}),a("span",{staticClass:"top-resize",on:{mousedown:function(n){return e.dragResize(n,t,"horizontal","top")}}}),a("span",{staticClass:"right-resize",on:{mousedown:function(n){return e.dragResize(n,t,"vertical","right")}}}),a("span",{staticClass:"bottom-resize",on:{mousedown:function(n){return e.dragResize(n,t,"horizontal","bottom")}}}),a("span",{staticClass:"left-resize",on:{mousedown:function(n){return e.dragResize(n,t,"vertical","left")}}})],1):e._e()])})),0)}),d=[],h=(n("4160"),n("c975"),n("4e82"),n("159b"),n("4795"),n("5530")),p=n("dd8c"),f=n("5177"),m=n("1485"),g=n("1f8f"),y={name:"Nodes",components:{Subprocess:f["a"]},props:{nodes:{type:Array,default:function(){return[]}},isDrawLine:{type:Boolean,default:function(){return!1}},checked:{type:Object,default:function(){return{}}},config:{type:Object,default:function(){return{}}},isSub:{type:Boolean,default:function(){return!1}},parentNode:{type:Object,default:function(){return null}}},data:function(){return{dragToSubNode:null,current:null,edit:null,offset:{},moveObj:null,distance:30,resizeNode:null,mouseDownPonit:null,isDrewingLine:null,isSelected:!1}},computed:{draggable:function(){return!this.isDrawLine&&this.checked instanceof p["a"]&&!this.resizeNode&&this.selectedList.length<=1},scale:function(){return this.$store.state.flow.page.scale},selectedList:function(){return this.$store.state.flow.selectedList}},mounted:function(){var e=this;this.$refs.nodes.ondragover=function(e){return!1},this.setNodePosition(),this.$bus.$on("isMoveNode",(function(t){e.current=t,t||(e.dragToSubNode=null,e.$bus.$emit("update-baseLine",{show:"",top:0,left:0}))})),this.$bus.$on("moveCopyNode".concat(this.isSub?this.parentNode.id:""),(function(t,n){e.move(t,n)})),this.$bus.$on("isDrewingLine".concat(this.isSub?this.parentNode.id:""),(function(t){e.isDrewingLine=t})),this.$bus.$on("startMoveEvent",(function(t){e.moveObj=t})),this.$bus.$on("endMoveEvent",(function(){e.moveObj=null})),this.$bus.$on("dragToSubNode",(function(t){e.dragToSubNode=t})),this.$bus.$on("globalMove".concat(this.isSub?this.parentNode.id:""),this.globalMove),this.$bus.$on("selectGlobal".concat(this.isSub?this.parentNode.id:""),this.selectGlobal),document.addEventListener("mousemove",(function(t){e.resizeNode&&e.moveResize(t)})),document.addEventListener("mouseup",(function(t){e.resizeNode&&e.dropResize(t),t.ctrlKey&&e.setSelectList(t)}))},methods:{toPx:m["h"],showOuterPadding:function(e){return this.moveObj&&"task"===e.sort},getNamePostion:function(e,t){var n={x:e.point.x<0?0:e.point.x,y:e.point.y<0?0:e.point.y},a=(e.width-e.nameWidth)/2,i=e.height,o={top:this.toPx(n.y+i),left:this.toPx(n.x+a)};return o[t]},drag:function(e,t){e.dataTransfer&&e.dataTransfer.setDragImage(new Image,0,0),e.stopPropagation(),this.draggable&&("dragstart"===e.type?e=event||e:event.touches&&(e=event.touches[0]?event.touches[0]:event),this.offset={x:e.offsetX,y:e.offsetY},this.$bus.$emit("update-checked",t),this.current=t,this.$bus.$emit("dragNode",e,this.current,this.offset,!0))},move:function(e,t){var n=this.$store.getters["flow/getMousePointByCanvas"]({x:e.pageX,y:e.pageY}),a={x:n.x-this.offset.x*this.scale<0?0:n.x-this.offset.x*this.scale,y:n.y-this.offset.y*this.scale<0?0:n.y-this.offset.y*this.scale};t.parentNodeId&&(a.x=a.x-this.parentNode.point.x*this.scale,a.y=a.y-this.parentNode.point.y*this.scale-(this.parentNode.imgHeight+2*this.parentNode.padding)*this.scale),a={x:a.x/this.scale,y:a.y/this.scale},this.setNodePosition(),this.showSamePositionNodeBaseLine(t,a)},dragResize:function(e,t,n,a){e.stopPropagation(),this.$bus.$emit("update-checked",t),this.resizeNode=Object(h["a"])(Object(h["a"])({},t),{},{lineDirection:n,direction:a}),this.$bus.$emit("update-baseLine",{show:n,top:0,left:0})},moveResize:function(e){var t,n,a,i,o,s,l=this.$store.state.flow.page,r=this.$store.state.flow.svgRoot,c=this.resizeNode.lineDirection,u=this.$store.getters["flow/lanesWidth"],d=this.$store.getters["flow/lanesHeight"],h=this.scale;switch(this.resizeNode.direction){case"top":s=this.resizeNode.point.y+this.resizeNode.height+d-g["e"].height,a=e.pageY-l.top+r.scrollTop,t={top:a<s*h?a>0?a:0:s*h,left:0};break;case"right":n=this.resizeNode.point.x+g["e"].width+u,a=e.pageX-l.left+r.scrollLeft,t={top:0,left:a>n*h?a:n*h};break;case"bottom":i=this.resizeNode.point.y+g["e"].height+d,a=e.pageY-l.top+r.scrollTop,t={top:a>i*h?a:i*h,left:0};break;case"left":o=this.resizeNode.point.x+this.resizeNode.width+u-g["e"].width,a=e.pageX-l.left+r.scrollLeft,t={top:0,left:a<o*h?a>0?a:0:o*h};break}t.top=t.top/h,t.left=t.left/h;var p=Object.assign(t,{showV:"vertical"===c,showH:"horizontal"===c});this.$bus.$emit("update-baseLine",p),this.$bus.$emit("autoScroll",{type:"lane",data:this.resizeNode,mouse:{x:e.pageX,y:e.pageY}})},dropResize:function(e){if(this.resizeNode&&this.checked&&this.checked instanceof p["a"]){var t,n,a,i,o,s,l,r=this.$store.state.flow.page,c=this.$store.state.flow.svgRoot,u=(this.resizeNode.lineDirection,this.$store.getters["flow/lanesWidth"]),d=this.$store.getters["flow/lanesHeight"],h=this.scale;switch(this.resizeNode.direction){case"top":o=this.resizeNode.point.y+this.resizeNode.height+d-g["e"].height,n=e.pageY-r.top+c.scrollTop,l=this.checked.point.y,this.checked.point.y=(n<o*h?n>0?n:0:o*h)/h,this.checked.height=this.checked.height+l-this.checked.point.y;break;case"right":t=this.resizeNode.point.x+g["e"].width+u,n=e.pageX-r.left+c.scrollLeft,this.checked.width=(n>t*h?n:t*h)/h-this.checked.point.x;break;case"bottom":a=this.resizeNode.point.y+g["e"].height+d,n=e.pageY-r.top+c.scrollTop,this.checked.height=(n>a*h?n:a*h)/h-this.checked.point.y;break;case"left":i=this.resizeNode.point.x+this.resizeNode.width+u-g["e"].width,n=e.pageX-r.left+c.scrollLeft,s=this.checked.point.x,this.checked.point.x=(n<i*h?n>0?n:0:i*h)/h,this.checked.width=this.checked.width+s-this.checked.point.x;break}this.$bus.$emit("nodeMove",this.checked),this.$bus.$emit("update-baseLine",{showV:!1,showH:!1,top:0,left:0}),this.$bus.$emit("resize"),this.resizeNode=null}},selectNode:function(e,t){var n=this;if(this.mouseDownPonit={x:e.pageX,y:e.pageY},e.ctrlKey)this.selectedList.length>1&&-1===this.selectedList.indexOf(t)&&(this.$store.commit("flow/addSelected",t),this.isSelected=!0),this.$bus.$emit("startCopyNodes",e),this.$bus.$emit("update-checked",t),e.stopPropagation();else{if(e.stopPropagation(),!this.isDrawLine&&this.selectedList.length>1&&this.selectedList.indexOf(t)>-1)return this.$bus.$emit("startCopyNodes",e),void this.$bus.$emit("update-checked",t);this.$bus.$emit("update-checked",t),this.isDrawLine&&t&&"204"!==t.type&&setTimeout((function(){n.$bus.$emit("startDraw".concat(n.isSub?n.parentNode.id:""),e,t,n.parentNode)}),0);var a=this.isSub?[]:[t];this.$store.commit("flow/setSelectedList",a)}},setSelectList:function(e){if(!this.isSub&&this.mouseDownPonit){var t=Math.sqrt(Math.pow(this.mouseDownPonit.x-e.pageX,2)+Math.pow(this.mouseDownPonit.y-e.pageY,2));if(!this.isSelected&&t<5){var n=this.selectedList.indexOf(this.checked);n>-1?(this.$store.commit("flow/deleteSelected",n),this.$bus.$emit("update-checked",flow)):this.$store.commit("flow/addSelected",this.checked)}this.isSelected=!1,this.mouseDownPonit=null}},showSub:function(e,t){e.stopPropagation(),"task"===t.sort&&(!t.parentNodeId||t.parentNodeId&&"102"!==t.type)&&(t.open.show=!t.open.show,t.open.show?(t.width=t.open.width,t.height=t.open.height):(t.open.width=t.width,t.open.height=t.height,t.width=g["f"].width,t.height=g["f"].height),this.$bus.$emit("showSubNode".concat(this.isSub?this.parentNode.id:""),t))},editNode:function(e,t){e.stopPropagation(),this.$set(t,"edit",!0)},setNodePosition:function(){this.nodePosition={x:{},xCenter:{},y:{},yCenter:{}};for(var e=0;e<this.nodes.length;e++){var t=this.nodes[e];this.nodePosition.x[t.point.x]||(this.nodePosition.x[t.point.x]=[]),this.nodePosition.y[t.point.y]||(this.nodePosition.y[t.point.y]=[]);var n=Object(m["c"])({x:this.parentNode?this.parentNode.point.x+t.point.x+t.width/2:t.point.x+t.width/2,y:this.parentNode?this.parentNode.point.y+(this.parentNode.imgHeight+2*this.parentNode.padding)+t.point.y+t.height/2:t.point.y+t.height/2});this.nodePosition.xCenter[n.x]||(this.nodePosition.xCenter[n.x]=[]),this.nodePosition.yCenter[n.y]||(this.nodePosition.yCenter[n.y]=[]),this.nodePosition.x[t.point.x].push(t),this.nodePosition.y[t.point.y].push(t),this.nodePosition.xCenter[n.x].push(t),this.nodePosition.yCenter[n.y].push(t)}},showSamePositionNodeBaseLine:function(e,t){var n=this.checkSamePositionNode(e,t),a=this.$store.getters["flow/getSvgOffset"],i={showV:n.V,showH:n.H,left:n.V?n.xCenter?n.x:t.x+a.left/this.scale:0,top:n.H?n.yCenter?n.y:t.y+a.top/this.scale:0};e.parentNodeId&&(i.left=i.left+this.parentNode.point.x,i.top=i.top+this.parentNode.point.y+(this.parentNode.imgHeight+2*this.parentNode.padding)),this.$bus.$emit("update-baseLine",i)},checkSamePositionNode:function(e,t){this.scale;var n=this.nodePosition,a=t.x,i=t.y,o={V:!1,H:!1,xCenter:!1,yCenter:!1};(n.x[a]&&n.x[a].length>0||n.x[a]&&1==n.x[a].length&&n.x[a][0]!=e)&&(o.V="vertical");var s=Object(m["c"])({x:this.parentNode?this.parentNode.point.x+a+e.width/2:a+e.width/2,y:this.parentNode?this.parentNode.point.y+(this.parentNode.imgHeight+2*this.parentNode.padding)+i+e.height/2:i+e.height/2});if(n.xCenter[s.x]&&n.xCenter[s.x].length>0){var l=n.xCenter[s.x][0];o.xCenter=!0,o.V="vertical",o.x=Object(m["c"])({x:l.point.x+l.width/2}).x}if(n.y[i]&&n.y[i].length>0&&(o.H="horizontal"),n.yCenter[s.y]&&n.yCenter[s.y].length>0){var r=n.yCenter[s.y][0];o.yCenter=!0,o.H="horizontal",o.y=Object(m["c"])({y:r.point.y+r.height/2}).y}return o},globalMove:function(e,t,n,a){if(e)for(var i=0;i<this.selectedList.length;i++){var o=this.selectedList[i];t&&(o.point.x+=e.x),n&&(o.point.y+=e.y),(t||n)&&this.$bus.$emit("nodeMove",o)}},selectGlobal:function(e,t){var n=[];e&&t&&this.nodes.forEach((function(a){a.point.x>e.x&&a.point.y>e.y&&a.point.x+a.width<t.x&&a.point.y+a.height<t.y&&n.push(a)})),this.$store.commit("flow/setSelectedList",n)},editName:function(e){this.$set(e.attributes.BaseInfo,"Name",e.name),this.$bus.$emit("updateNodeName".concat(this.isSub?this.parentNode.id:""),this.checked)},showRangeRule:function(e){e.stopPropagation(),e.preventDefault(),document.querySelector(".RangeRule").click()}}},x=y,v=(n("30b6"),n("2877")),b=Object(v["a"])(x,u,d,!1,null,"b7c18fc0",null),w=b.exports;function k(e){e.component(w.name,w)}"undefined"!==typeof window&&window.Vue&&k(window.Vue);var D={install:k},_=(n("f0e6"),n("0165"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],ref:"designerPanel",staticClass:"ds-designer",class:{mobile:e.mobile}},[n("div",{staticClass:"designer-head"},[n("div",{staticClass:"designer_tools"},[e.tpl?e._l(e.templateButtons,(function(t,a){return n("DsfButton",{key:a,attrs:{title:t.text,icon:t.icon,"btn-style":"icon-text"},on:{click:function(e){return t.handler(e,t)}}},[e._v(" "+e._s(t.text)+" ")])})):[e.buttonLoad?e._l(e.buttons,(function(t,a){return n("DsfButton",{directives:[{name:"show",rawName:"v-show",value:e.buttonShow(t),expression:"buttonShow(button)"}],key:a,attrs:{title:t.text,icon:t.icon,"btn-style":"icon-text"},on:{click:function(e){return t.handler(e,t)}}},[e._v(" "+e._s(t.text)+" ")])})):e._e()]],2)]),n("div",{staticClass:"designer-content"},[n("div",{staticClass:"designer-center"},[n("div",{staticClass:"designer-page"},[e.page?n("DsfLayoutTree",{ref:"viewProxy",staticStyle:{position:"absolute",height:"100%",width:"100%"},attrs:{"is-design":!0,"component-props":e.page},on:{"update:componentProps":function(t){e.page=t},"update:component-props":function(t){e.page=t}},nativeOn:{dragstart:function(e){e.preventDefault()},mousedown:function(t){return t.stopPropagation(),e.mouseDownHanlder(t)},mousemove:function(t){return e.mouseMoveHanlder(t)},contextmenu:function(t){return e.contextMenuOpen(t)},click:function(t){return e.selectedComponent(t)}}}):e._e()],1),n("div",{staticClass:"designer-left"},[n("div",{staticClass:"designer-left-tools"},[n("el-tabs",{model:{value:e.layout.toolsBox.activeName,callback:function(t){e.$set(e.layout.toolsBox,"activeName",t)},expression:"layout.toolsBox.activeName"}},e._l(e.layout.toolsBox.tabs,(function(t){return n("el-tab-pane",{key:t.name,attrs:{label:t.label,name:t.name},scopedSlots:e._u([{key:"label",fn:function(){return[n("div",{staticStyle:{"padding-left":"4px"}},[e._v(e._s(t.label))])]},proxy:!0}],null,!0)},[n("div",{staticStyle:{padding:"5px"}},[n("form",{attrs:{action:""},on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.leftSearch(t)}}},[n("el-input",{staticClass:"design-search-input",staticStyle:{height:"30px","line-height":"30px"},model:{value:e.leftSearchInput,callback:function(t){e.leftSearchInput=t},expression:"leftSearchInput"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1)]),"controls"==t.name?e._l(e.useControlsGroup.groups,(function(t,a){return n("el-collapse",{key:a,attrs:{accordion:""},model:{value:e.tools.activeName,callback:function(t){e.$set(e.tools,"activeName",t)},expression:"tools.activeName"}},[n("el-collapse-item",{attrs:{name:t.title}},[n("template",{slot:"title"},[n("div",{staticClass:"ellipsis",staticStyle:{"font-size":"14px"},attrs:{title:t.title}},[e._v(" "+e._s(t.title)+" ")]),n("DsfIcon",{staticStyle:{position:"absolute",right:"30px"},attrs:{name:"guanbi2"},nativeOn:{click:function(n){return n.stopPropagation(),e.removeControlGroup(t)}}})],1),n("div",{staticClass:"ds-tools-group-content",staticStyle:{padding:"10px","max-height":"60vh",overflow:"auto"}},e._l(t.items,(function(t,a){return n("drag-item",{directives:[{name:"show",rawName:"v-show",value:e.isMatchLeftSearch(t.name),expression:"isMatchLeftSearch(item.name)"}],key:a,attrs:{data:t}})})),1)],2)],1)})):"metadata"==t.name?e._l(e.useMetaGroup.groups,(function(t,a){return n("el-collapse",{key:a,attrs:{accordion:""},model:{value:e.useMetaGroup.activeName,callback:function(t){e.$set(e.useMetaGroup,"activeName",t)},expression:"useMetaGroup.activeName"}},[n("el-collapse-item",{attrs:{name:t.id}},[n("template",{slot:"title"},[n("div",{staticClass:"ellipsis",staticStyle:{"font-size":"14px"},attrs:{title:t.title||t.name}},[e._v(" "+e._s(t.title||t.name)+" ")]),n("DsfIcon",{staticStyle:{position:"absolute",right:"30px"},attrs:{name:"guanbi2"},nativeOn:{click:function(n){return n.stopPropagation(),e.removeMetaDataGroup(t)}}})],1),n("div",{staticClass:"ds-tools-group-content",staticStyle:{padding:"10px","max-height":"60vh",overflow:"auto"}},e._l(t.items,(function(t,a){return n("drag-item",{directives:[{name:"show",rawName:"v-show",value:e.isMatchLeftSearch(t.name),expression:"isMatchLeftSearch(item.name)"}],key:a,attrs:{data:t}})})),1)],2)],1)})):"business"==t.name?e._l(e.useBusinessControlGroup.groups,(function(t,a){return n("el-collapse",{key:a,attrs:{accordion:""},model:{value:e.tools.activeName,callback:function(t){e.$set(e.tools,"activeName",t)},expression:"tools.activeName"}},[n("el-collapse-item",{attrs:{name:t.title}},[n("template",{slot:"title"},[n("div",{staticClass:"ellipsis",staticStyle:{"font-size":"14px"},attrs:{title:t.title}},[e._v(" "+e._s(t.title)+" ")]),n("DsfIcon",{staticStyle:{position:"absolute",right:"30px"},attrs:{name:"guanbi2"},nativeOn:{click:function(n){return n.stopPropagation(),e.removeBusinessGroup(t)}}})],1),n("div",{staticClass:"ds-tools-group-content",staticStyle:{padding:"10px","max-height":"60vh",overflow:"auto"}},e._l(t.items,(function(t,a){return n("drag-item",{directives:[{name:"show",rawName:"v-show",value:e.isMatchLeftSearch(t.name),expression:"isMatchLeftSearch(item.name)"}],key:a,attrs:{data:t}})})),1)],2)],1)})):e._e()],2)})),1)],1)]),n("div",{staticClass:"designer-right"},[n("DsfDesignerProperties",{attrs:{data:e.attributesGroup,owner:e.attributesOwner}})],1)])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.dragProxy.show,expression:"dragProxy.show"}],ref:"dragProxy",staticClass:"drag-proxy"}),e.contextMenu.show?n("div",{ref:"contextmenu",staticClass:"ds-contextmenu",style:{top:e.contextMenu.pos.y+"px",left:e.contextMenu.pos.x+"px"}},[n("dl",{staticClass:"ds-contextmenu-child ds-contextmenu-anim"},[e._l(e.contextMenu.items,(function(t,a){return["object"==e.dsf.type(t)?n("dd",{key:a,class:{disabled:t.disabled},on:{click:function(n){return e.contextMenuItemClick(t,n)}}},[n("a",[e._v(e._s(t.text))])]):"-"==t?n("dd",{key:a,staticClass:"split"}):e._e()]}))],2)]):e._e()])}),C=[],S=n("04a8"),N=S["a"],L=Object(v["a"])(N,_,C,!1,null,null,null),$=L.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-collapse",{attrs:{accordion:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.data,(function(t,a){return n("el-collapse-item",{key:a,attrs:{title:t.name,name:t.name}},[n("div",e._l(t.attributes,(function(t,a){return n("DsfDesignerProperty",{directives:[{name:"show",rawName:"v-show",value:e.show(t.hidden),expression:"show(item.hidden)"}],key:(t.bindControlAttr||"")+a,attrs:{a:t.bindControlAttr+a,desc:t.desc,data:t,owner:e.owner,bind:e.getBind(t)}})})),1)])})),1)},T=[],O=(n("1276"),{name:"DsfDesignerProperties",props:{data:{type:Array,default:function(){return[]}},owner:{type:Object,default:function(){return{}}}},data:function(){return{activeName:""}},watch:{data:{handler:function(e){this.activeName=e[0]?e[0].name:""}}},methods:{getBind:function(e){var t=e.bindControlAttr||"",n=t.split(".");if(1==n.length)return{data:this.owner,key:n[0]||""};var a=n.slice(0,n.length-1),i=this.owner,o=a.shift();while(o){if(!dsf.isDef(i[o])){i=null;break}i=i[o],o=a.shift()}return i||(i=this.owner),{data:i,key:n[n.length-1]}},show:function(e){return!e||this.$eval(e,this.owner)}}}),E=O,j=Object(v["a"])(E,I,T,!1,null,null,null),P=j.exports,B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"property-item"},[n("div",{staticClass:"property-item-name"},[e._v(" "+e._s(e.data.text)+" "),e.desc?n("DsfIcon",{staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{name:"bangzhuzhongxin"},nativeOn:{click:function(t){return e.showHelp(t)}}}):e._e(),n("el-dialog",{attrs:{visible:e.showHeplerMark,title:e.data.text,"append-to-body":!0,width:"500px"},on:{"update:visible":function(t){e.showHeplerMark=t}}},[n("div",{staticStyle:{"max-height":"500px","min-height":"300px",overflow:"auto"}},[n("span",{staticStyle:{display:"inline-block","line-height":"1.5em"},domProps:{innerHTML:e._s(e.desc)}})])])],1),"text"==e.data.showType?n("el-input",{attrs:{attrdata:e.data,disabled:e.inputDisabled,placeholder:"请输入"},on:{change:e.dataValueChange},model:{value:e.dataValue,callback:function(t){e.dataValue=t},expression:"dataValue"}}):e._e(),"number"==e.data.showType?n("el-input-number",{staticStyle:{width:"100%"},attrs:{attrdata:e.data,controls:e.config.controls,size:e.config.size,step:e.config.step,"step-strictly":e.config.stepStrictly||!1,min:e.config.min,max:e.config.max,precision:e.config.precision},on:{change:e.dataValueChange},model:{value:e.dataValue,callback:function(t){e.dataValue=t},expression:"dataValue"}}):"boolean"==e.data.showType?n("el-radio-group",{attrs:{attrdata:e.data},on:{change:e.dataValueChange},model:{value:e.dataValue,callback:function(t){e.dataValue=t},expression:"dataValue"}},[n("el-radio",{attrs:{label:!0}},[e._v(" 是 ")]),n("el-radio",{attrs:{label:!1}},[e._v(" 否 ")])],1):"checkbox"==e.data.showType?n("el-checkbox-group",{attrs:{attrdata:e.data},on:{change:e.dataValueChange},model:{value:e.dataValueArray,callback:function(t){e.dataValueArray=t},expression:"dataValueArray"}},e._l(e.data.dictionary,(function(t,a){return n("el-checkbox",{key:a,attrs:{label:t.value}},[e._v(" "+e._s(t.text)+" ")])})),1):"select"==e.data.showType?n("el-select",{attrs:{attrdata:e.data,placeholder:"请选择"},on:{change:e.dataValueChange},model:{value:e.dataValue,callback:function(t){e.dataValue=t},expression:"dataValue"}},e._l(e.data.dictionary,(function(e,t){return n("el-option",{key:t,attrs:{label:e.text,value:e.value}})})),1):"rangeSelect"==e.data.showType?n("DsfRangeSelect",{attrs:{dictionary:e.data.dictionary},on:{change:e.dataValueChange},model:{value:e.dataValue,callback:function(t){e.dataValue=t},expression:"dataValue"}}):"timePicker"==e.data.showType?n("el-time-picker",e._b({staticStyle:{width:"100%"},attrs:{attrdata:e.data},on:{change:e.dataValueChange},model:{value:e.dataValue,callback:function(t){e.dataValue=t},expression:"dataValue"}},"el-time-picker",e.data.attributes,!1)):"datePicker"==e.data.showType?n("el-date-picker",e._b({staticStyle:{width:"100%"},attrs:{attrdata:e.data,"value-format":"timestamp"},on:{change:e.dataValueChange},model:{value:e.dataValue,callback:function(t){e.dataValue=t},expression:"dataValue"}},"el-date-picker",e.data.attributes,!1)):"dialog"==e.data.showType?n("DsfDesignerDialog",{attrs:{owner:e.owner,attrdata:e.data},on:{change:e.dataValueChange},model:{value:e.dataValue,callback:function(t){e.dataValue=t},expression:"dataValue"}}):e._e()],1)},M=[],R=n("9a9e"),A=R["a"],z=Object(v["a"])(A,B,M,!1,null,null,null),V=z.exports,q=n("41c8"),F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"des-default-value"},[e.multiple?n("div",{staticStyle:{"text-align":"right","margin-bottom":"15px"}},[n("DsfButton",{attrs:{text:"增加默认值",size:"mini"},on:{click:e.addData}})],1):e._e(),n("div",{staticStyle:{"max-height":"60vh",overflow:"auto"}},[e._l(e.tableData,(function(t,a){return[n("el-table",{key:a,staticStyle:{width:"100%","margin-bottom":"15px"},attrs:{data:t,border:!0}},[n("el-table-column",{attrs:{prop:"text",label:"名称",width:"150"}}),n("el-table-column",{attrs:{prop:"value",label:"值"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.value,callback:function(n){e.$set(t.row,"value",n)},expression:"scope.row.value"}})]}}],null,!0)},[e.multiple?n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("值")]),n("DsfButton",{staticStyle:{float:"right"},attrs:{text:"删除",size:"mini"},on:{click:function(t){return e.removeData(a)}}})],1):e._e()])],1)]}))],2)])},K=[],H=(n("d81d"),n("a434"),n("8050")),G={name:"DesDefaultValue",mixins:[H["a"]],data:function(){return{multiple:!1,tableData:[]}},created:function(){this.multiple=this.config.multiple||!1,this.valueAttributes=dsf.mix(!0,[],this.owner.metadata.valueAttributes),this.init()},methods:{yes:function(){var e=this.tableData.map((function(e){var t={};return e.forEach((function(e){t[e.code]=e.value||""})),t}));return 1==e.length?e[0]:e},init:function(){var e,t=this,n=this.owner.metadata.defaultValue,a=this.currentData;e="array"==dsf.type(a)?dsf.mix(!0,[],a):"object"==dsf.type(a)?[dsf.mix(!0,{},a)]:"array"==dsf.type(n)?dsf.mix(!0,[],n):[dsf.mix(!0,{},n)],e.forEach((function(e){return t.addData(e)}))},addData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.tableData.push(this.valueAttributes.map((function(t){return{code:t.code,text:t.name,value:void 0==e[t.code]?null:e[t.code]}})))},removeData:function(e){this.tableData.length<2?(this.tableData=[],this.addData()):this.tableData.splice(e,1)}}},U=G,Y=Object(v["a"])(U,F,K,!1,null,null,null),W=Y.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:!0}},[n("el-table-column",{attrs:{prop:"text",label:"名称",width:"150"}}),n("el-table-column",{attrs:{prop:"value",label:"宽度"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"auto"},model:{value:t.row.width,callback:function(n){e.$set(t.row,"width",n)},expression:"scope.row.width"}})]}}])})],1)},X=[],Q=n("bd79"),Z=Q["a"],ee=Object(v["a"])(Z,J,X,!1,null,null,null),te=ee.exports,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:!0}},[n("el-table-column",{attrs:{prop:"text",label:"名称",width:"150"}}),n("el-table-column",{attrs:{prop:"value",label:"高度"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"auto"},model:{value:t.row.height,callback:function(n){e.$set(t.row,"height",n)},expression:"scope.row.height"}})]}}])})],1)},ae=[],ie=(n("498a"),{name:"DesTableRowsInfo",mixins:[H["a"]],data:function(){return{tableData:[]}},mounted:function(){for(var e=0;e<this.currentData.length;e++)this.tableData.push({text:"第"+(e+1)+"行",height:this.currentData[e].height})},methods:{yes:function(){for(var e=0;e<this.tableData.length;e++){var t=this.tableData[e].height;""==t.trim()&&(t=57),dsf.isNumber(t)&&(t+="px"),this.owner.rows[e].height=t}}}}),oe=ie,se=Object(v["a"])(oe,ne,ae,!1,null,null,null),le=se.exports,re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:!0}},[n("el-table-column",{attrs:{prop:"code",label:"标识",width:"100"}}),n("el-table-column",{attrs:{prop:"name",label:"描述"}}),n("el-table-column",{attrs:{prop:"typeValue",label:"数据类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{on:{change:function(n){return e.typeChange(t.row,n)}},model:{value:t.row.typeValue,callback:function(n){e.$set(t.row,"typeValue",n)},expression:"scope.row.typeValue"}},e._l(e.getType(),(function(e){return n("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})})),1)]}}])}),n("el-table-column",{attrs:{prop:"length",label:"数据长度"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"无"},model:{value:t.row.length,callback:function(n){e.$set(t.row,"length",n)},expression:"scope.row.length"}})]}}])}),n("el-table-column",{attrs:{prop:"defaultValue",label:"默认值"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"无"},model:{value:t.row.defaultValue,callback:function(n){e.$set(t.row,"defaultValue",n)},expression:"scope.row.defaultValue"}})]}}])})],1)},ce=[],ue=n("a92c"),de=ue["a"],he=Object(v["a"])(de,re,ce,!1,null,null,null),pe=he.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{staticClass:"ds-enum-editor",attrs:{type:"border-card"},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[n("el-tab-pane",{attrs:{name:"1",label:"数据字典"}},[n("enum-editor-item",{attrs:{type:"dict","tree-loading":e.loading[0],"tree-data":e.treeData1,"default-checked-key":e.defaultCheckedKey1,"table-post":e.tablePost1,"empty-text":"请选择数据字典"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})],1),n("el-tab-pane",{attrs:{name:"2",label:"数据源"}},[n("enum-editor-item",{attrs:{type:"db","tree-loading":e.loading[1],"tree-data":e.treeData2,"default-checked-key":e.defaultCheckedKey2,"table-post":e.tablePost2,"empty-text":"请选择数据源"},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1),n("el-tab-pane",{staticClass:"ds-enum-editor-item3",attrs:{name:"3",label:"静态数据"}},[n("el-input",{attrs:{type:"textarea",rows:2,resize:"none",placeholder:"支持格式：'文本'、'文本|值'两种格式，多个选项用回车符换行"},model:{value:e.value3,callback:function(t){e.value3=t},expression:"value3"}})],1)],1)},me=[],ge=(n("a15b"),n("e25e"),n("762b")),ye={name:"DesEnumEditor",components:{EnumEditorItem:ge["a"]},mixins:[H["a"]],data:function(){var e=this;return{tabIndex:"0",loaded:[!1,!1,!1],loading:[!1,!1],value1:{type:"dict",code:null,attach:[]},value2:{type:"db",code:null,attach:[]},value3:"",treeData1:[],treeData2:[],defaultCheckedKey1:"",defaultCheckedKey2:"",tablePost1:function(t,n){e.$http.get("dict/getList/"+t).done((function(e){e.success?n&&n(e.data):dsf.layer.message("请求异常！",!1)}))},tablePost2:function(t,n){e.$http.get("meta/tree/dbSource",{rmId:t}).done((function(e){e.success?n&&n(e.data):dsf.layer.message("请求异常！",!1)}))}}},watch:{tabIndex:function(e){!this.loaded[e-1]&&this["postData"+e]&&this["postData"+e](),this.$set(this.loaded,parseInt(e)-1,!0)}},created:function(){this.currentData&&this.init(this.currentData)},methods:{init:function(e){var t=e.type,n=(e.attach,e.code);"static"===t?(n&&n.length?this.value3=n.map((function(e){return e.text===e.value?e.text:e.text+"|"+e.value})).join("\n"):this.value3="",this.tabIndex="3",this.$set(this.loaded,2,!0)):"dict"===t?(this.value1={type:t,attach:[],code:n},this.defaultCheckedKey1=n,this.tabIndex="1"):"db"===t&&(this.value2={type:t,attach:[],code:n},this.defaultCheckedKey2=n,this.tabIndex="2")},yes:function(){if("3"===this.tabIndex){var e=this.value3.trim().split("\n");return{type:"static",code:e.map((function(e){return e=e.split("|"),{text:e[0],value:e[1]||e[0]}}))}}var t=this["value"+this.tabIndex];return delete t.attach,t},postData1:function(){var e=this;this.$set(this.loading,0,!0),this.$http.get("/rm/list/dataDic").done((function(t){t.success?e.treeData1=t.data.map((function(t){return e.dataFormat1(t)})):dsf.layer.message("请求异常！",!1)})).always((function(){e.$set(e.loading,0,!1)}))},postData2:function(){var e=this;this.$set(this.loading,1,!0),this.$http.get("/rm/list/ds",{namespace:""}).done((function(t){t.success?e.treeData2=t.data.map((function(t){return e.dataFormat2(t)})):dsf.layer.message("请求异常！",!1)})).always((function(){e.$set(e.loading,1,!1)}))},dataFormat1:function(e){var t=this,n=e.name,a=e.dsfa_rm_id,i=e.type_value,o=e.children,s={label:n,ID:a,nocheck:"5"!==i,iconSkin:""};return o?s.children=o.map((function(e){return t.dataFormat1(e)})):s.nocheck&&(s.iconSkin="_special"),s},dataFormat2:function(e){var t=this,n=e.name,a=e.ID,i=e.type_value,o=e.children,s={label:n,ID:a,nocheck:"3"!==i&&"8"!==i,iconSkin:""};return o?s.children=o.map((function(e){return t.dataFormat2(e)})):s.nocheck&&(s.iconSkin="_special"),s}}},xe=ye,ve=Object(v["a"])(xe,fe,me,!1,null,null,null),be=ve.exports,we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{staticClass:"ds-enum-editor",attrs:{type:"border-card"},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[n("el-tab-pane",{attrs:{name:"1",label:"数据源"}},[n("enum-editor-item",{attrs:{type:"db","tree-loading":e.loading[1],"tree-data":e.treeData1,"default-checked-key":e.defaultCheckedKey1,"table-post":e.tablePost1,"empty-text":"请选择数据源"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})],1)],1)},ke=[],De={name:"DesCascaderItemsEditor",components:{EnumEditorItem:ge["a"]},mixins:[H["a"]],data:function(){var e=this;return{tabIndex:"0",loaded:[!1],loading:[!1],value1:{type:"db",code:null,attach:[]},treeData1:[],defaultCheckedKey1:"",tablePost1:function(t,n){e.$http.get("meta/tree/dbSource",{rmId:t}).done((function(e){e.success?n&&n(e.data):dsf.layer.message("请求异常！",!1)}))}}},watch:{tabIndex:function(e){console.log(e),!this.loaded[e-1]&&this["postData"+e]&&this["postData"+e](),this.$set(this.loaded,parseInt(e)-1,!0)}},created:function(){this.currentData&&this.init(this.currentData)},methods:{init:function(e){var t=e.type,n=(e.attach,e.code);this.value1={type:t,attach:[],code:n},this.defaultCheckedKey1=n,this.tabIndex="1"},yes:function(){if("1"===this.tabIndex){var e=this["value"+this.tabIndex];return delete e.attach,e}},postData1:function(){var e=this;this.$set(this.loading,1,!0),this.$http.get("/rm/list/ds",{namespace:""}).done((function(t){t.success?e.treeData1=t.data.map((function(t){return e.dataFormat1(t)})):dsf.layer.message("请求异常！",!1)})).always((function(){e.$set(e.loading,1,!1)}))},dataFormat1:function(e){var t=this,n=e.name,a=e.ID,i=e.type_value,o=e.children,s={label:n,ID:a,nocheck:"3"!==i&&"8"!==i,iconSkin:""};return o?s.children=o.map((function(e){return t.dataFormat1(e)})):s.nocheck&&(s.iconSkin="_special"),s}}},_e=De,Ce=Object(v["a"])(_e,we,ke,!1,null,null,null),Se=Ce.exports,Ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100%",border:"1px solid #eee"}},[n("el-aside",{staticStyle:{"border-right":"1px solid #eee"},attrs:{width:"40%"}},[n("div",{staticClass:"design-column-edit"},[e.isReload?e._e():n("el-tree",{ref:"tree",attrs:{data:e.treeData,"highlight-current":!0,"expand-on-click-node":!1,"render-after-expand":!0,"default-expand-all":!0,"node-key":"id",props:e.defaultProps},on:{"node-click":e.nodeClick},scopedSlots:e._u([{key:"default",fn:function(t){return n("span",{staticClass:"custom-tree-node"},[n("span",[e._v(" "+e._s(t.node.label)+" "),n("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(t.data.hide?"[隐藏]":""))])]),n("span",[n("dsf-button",{attrs:{title:"添加子项",size:"small","btn-style":"icon-text",icon:"hao"},on:{click:function(n){return n.stopPropagation(),e.append(t.data)}}}),t.data.isRoot?[n("dsf-button",{staticStyle:{color:"#c0c0c0"},attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"}}),n("dsf-button",{staticStyle:{color:"#c0c0c0"},attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"}}),n("dsf-button",{staticStyle:{color:"#c0c0c0"},attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"}})]:[n("dsf-button",{attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"},on:{click:function(n){return n.stopPropagation(),e.remove(t.node)}}}),n("dsf-button",{attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"},on:{click:function(n){return n.stopPropagation(),e.up(t.node)}}}),n("dsf-button",{attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"},on:{click:function(n){return n.stopPropagation(),e.down(t.node)}}})]],2)])}}],null,!1,4172210902)})],1)]),n("el-main",[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"列名称"}},[n("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.label,callback:function(t){e.$set(e.form,"label",t)},expression:"form.label"}})],1),n("el-form-item",{attrs:{label:"表头对齐方式"}},[n("el-select",{staticClass:"select-full",attrs:{disabled:e.form.readOnly},model:{value:e.form.headerAlign,callback:function(t){e.$set(e.form,"headerAlign",t)},expression:"form.headerAlign"}},[n("el-option",{attrs:{label:"居左",value:"left"}}),n("el-option",{attrs:{label:"居右",value:"right"}}),n("el-option",{attrs:{label:"居中",value:"center"}})],1)],1),n("el-form-item",{attrs:{label:"数据对齐方式"}},[n("el-select",{staticClass:"select-full",attrs:{disabled:e.form.readOnly},model:{value:e.form.align,callback:function(t){e.$set(e.form,"align",t)},expression:"form.align"}},[n("el-option",{attrs:{label:"居左",value:"left"}}),n("el-option",{attrs:{label:"居右",value:"right"}}),n("el-option",{attrs:{label:"居中",value:"center"}})],1)],1),n("el-form-item",{attrs:{label:"宽度"}},[n("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.width,callback:function(t){e.$set(e.form,"width",t)},expression:"form.width"}})],1),n("el-form-item",{attrs:{label:"是否隐藏"}},[n("el-switch",{attrs:{disabled:e.form.readOnly},model:{value:e.form.hide,callback:function(t){e.$set(e.form,"hide",t)},expression:"form.hide"}})],1)],1)],1)],1)},Le=[],$e=n("5287"),Ie=$e["a"],Te=Object(v["a"])(Ie,Ne,Le,!1,null,null,null),Oe=Te.exports,Ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.tabsValue,callback:function(t){e.tabsValue=t},expression:"tabsValue"}},[n("el-tab-pane",{attrs:{label:"常用列表",name:"0"}},[n("el-form",{ref:"form"},e._l(e.fileExtArr,(function(t,a){return n("el-form-item",{key:a,attrs:{label:t.itemName}},[n("el-checkbox-group",{on:{change:e.handleCheckedChange},model:{value:e.fileExtArr[a].checkStatus,callback:function(t){e.$set(e.fileExtArr[a],"checkStatus",t)},expression:"fileExtArr[index].checkStatus"}},[n("el-checkbox",{attrs:{label:t.file.value,title:t.file.title}},[e._v(" "+e._s(t.file.title)+" ")])],1)],1)})),1)],1),n("el-tab-pane",{attrs:{label:"个性化配置",name:"1"}},[n("el-form",{ref:"formSel"},[n("el-form-item",{attrs:{label:"允许上传文件类型"}},[n("el-select",{attrs:{placeholder:"请选择活动区域"},on:{change:e.handleFileType},model:{value:e.fileType,callback:function(t){e.fileType=t},expression:"fileType"}},[n("el-option",{attrs:{value:"file",label:"file(所有文件)"}}),n("el-option",{attrs:{value:"images",label:"images（图片）"}}),n("el-option",{attrs:{value:"video",label:"video（视频）"}}),n("el-option",{attrs:{value:"audio",label:"audio（音频）"}})],1)],1),n("p",[e._v("允许上传文件后缀")]),e._l(e.fileExtArr,(function(t,a){return n("el-form-item",{key:a,attrs:{label:t.itemName}},[n("el-checkbox-group",{on:{change:e.handleCheckedChange},model:{value:e.fileExtArr[a].checkType,callback:function(t){e.$set(e.fileExtArr[a],"checkType",t)},expression:"fileExtArr[index].checkType"}},e._l(t.children,(function(t,a){return n("el-checkbox",{key:a+"_sel",attrs:{label:t.title+"&"+t.value,title:t.title}},[e._v(" "+e._s(t.title)+" ")])})),1)],1)})),n("p"),n("el-form-item",{attrs:{label:"是否在文件筛选框中显示指定类型文件"}},[n("el-switch",{attrs:{"inactive-color":"#d2d2d2"},model:{value:e.isLinkeMine,callback:function(t){e.isLinkeMine=t},expression:"isLinkeMine"}})],1),e.choosenExtsStr?n("el-form-item",{attrs:{label:"已选上传文件后缀"}},[e._v(" "+e._s(e.choosenExtsStr)+" ")]):e._e(),n("p")],2)],1)],1)},je=[],Pe=n("2ebd"),Be=Pe["a"],Me=(n("73f1"),Object(v["a"])(Be,Ee,je,!1,null,"44a1dc08",null)),Re=Me.exports,Ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[n("DsfButton",{attrs:{size:"small",icon:"zidingyi"},on:{click:e.addCustomButton}},[e._v("新增状态")]),n("DsfButton",{attrs:{size:"small",icon:"Magnifier",type:"auxiliary"},on:{click:e.openIcon}},[e._v("查看按钮图标")])],1),n("el-main",{staticStyle:{padding:"0px"}},[n("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData}},[n("el-table-column",{attrs:{label:"#",type:"index",align:"center"}}),n("el-table-column",{attrs:{label:"状态值","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.text,callback:function(n){e.$set(t.row,"text",n)},expression:"scope.row.text"}})]}}])}),n("el-table-column",{attrs:{label:"状态图标","header-align":"center",align:"center",width:300},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("i",{class:["iconfont",t.row.icon],style:"color: "+t.row.color}),n("div",{staticStyle:{width:"180px",margin:"0 10px"}},[n("el-input",{model:{value:t.row.icon,callback:function(n){e.$set(t.row,"icon",n)},expression:"scope.row.icon"}})],1),n("el-color-picker",{model:{value:t.row.color,callback:function(n){e.$set(t.row,"color",n)},expression:"scope.row.color"}})],1)]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("DsfButton",{attrs:{"btn-style":"icon-text",icon:"shanchu",size:"small",title:"删除"},on:{click:function(n){return e.removeButton(t)}}})]}}])})],1)],1)],1)},ze=[],Ve=n("6e89"),qe=Ve["a"],Fe=Object(v["a"])(qe,Ae,ze,!1,null,null,null),Ke=Fe.exports,He=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("MonacoEditor",{ref:"editor",attrs:{language:e.language},on:{mounted:e.editorLoaded}})},Ge=[],Ue={name:"DesCodeEdit",mixins:[H["a"]],data:function(){return{code:"",language:""}},created:function(){this.language=this.config.language||"javascript"},mounted:function(){},methods:{yes:function(){return"html"==this.language?dsf.escapeFilter(this.$refs.editor.getContent()):this.$refs.editor.getContent()},editorLoaded:function(){var e=this.currentData;"html"==this.language&&(e=dsf.unescapeHTML(e)),this.$refs.editor.setContent(e)}}},Ye=Ue,We=Object(v["a"])(Ye,He,Ge,!1,null,null,null),Je=We.exports,Xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[n("DsfButton",{on:{click:e.addCol}},[e._v("新增列")])],1),n("el-main",{staticStyle:{padding:"0px"}},[n("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData,"highlight-current-row":!0},on:{"row-click":e.rowClickHandler}},[n("el-table-column",{attrs:{label:"名称","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" 第"+e._s(t.$index+1)+"格 ")]}}])}),n("el-table-column",{attrs:{label:"高度","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.height,callback:function(n){e.$set(t.row,"height",n)},expression:"scope.row.height"}})]}}])}),n("el-table-column",{attrs:{label:"占用列数","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.span,callback:function(n){e.$set(t.row,"span",e._n(n))},expression:"scope.row.span"}})]}}])}),n("el-table-column",{attrs:{label:"列数断点","header-align":"center",align:"center"}},[n("el-table-column",{attrs:{label:"≥1920px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.lg,callback:function(n){e.$set(t.row,"lg",e._n(n))},expression:"scope.row.lg"}})]}}])}),n("el-table-column",{attrs:{label:"≥1200px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.xl,callback:function(n){e.$set(t.row,"xl",e._n(n))},expression:"scope.row.xl"}})]}}])}),n("el-table-column",{attrs:{label:"≥992px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.md,callback:function(n){e.$set(t.row,"md",e._n(n))},expression:"scope.row.md"}})]}}])}),n("el-table-column",{attrs:{label:"≥768px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.sm,callback:function(n){e.$set(t.row,"sm",e._n(n))},expression:"scope.row.sm"}})]}}])}),n("el-table-column",{attrs:{label:"<768px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.xs,callback:function(n){e.$set(t.row,"xs",e._n(n))},expression:"scope.row.xs"}})]}}])})],1),n("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(n){return e.insert(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(n){return e.deleted(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(n){return e.up(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(n){return e.down(t)}}})]}}])})],1)],1)],1)},Qe=[],Ze=n("e69f"),et=Ze["a"],tt=Object(v["a"])(et,Xe,Qe,!1,null,null,null),nt=tt.exports,at=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{staticClass:"design-development-edit",staticStyle:{height:"100%"},on:{"tab-click":e.tabsCliekHandler},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{name:"attrs"}},[n("div",{staticStyle:{width:"100px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("属性/事件")]),n("MonacoEditor",{ref:"attrsEditor",attrs:{language:"json"},on:{mounted:function(t){return e.editorLoaded("attrs")}}})],1),n("el-tab-pane",{attrs:{label:"其他（暂时无用）",name:"events"}},[n("div",{staticStyle:{width:"100px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("其他（暂时无用）")]),n("MonacoEditor",{ref:"eventsEditor",attrs:{language:"json"},on:{mounted:function(t){return e.editorLoaded("events")}}})],1)],1)},it=[],ot={name:"DesDevelopment",mixins:[H["a"]],data:function(){return{activeName:"attrs",data:{}}},created:function(){this.data=dsf.mix(!0,{},this.currentData)},mounted:function(){},methods:{yes:function(){var e={attrs:{},events:{}};for(var t in e){var n=this.$refs[t+"Editor"];n&&(e[t]=JSON.parse(n.getContent()||"{}"))}return e},tabsCliekHandler:function(e){var t=this;this.$nextTick((function(){var n=e.name,a=n+"Editor";t.$refs[a]&&t.$refs[a].layout()}))},editorLoaded:function(e){var t=e+"Editor";this.$refs[t]&&this.$refs[t].setContent(JSON.stringify(this.data[e]))}}},st=ot,lt=Object(v["a"])(st,at,it,!1,null,null,null),rt=lt.exports,ct=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100%"}},[n("el-aside",{staticStyle:{width:"500px",overflow:"auto"}},[n("el-container",[n("el-header",{staticStyle:{padding:"0px 0px 10px 0px","text-align":"right",height:"auto"}},[n("DsfButton",{attrs:{size:"small",icon:"sousuofangda"},on:{click:e.openSysButtonSelect}},[e._v("增加系统按钮")]),n("DsfButton",{attrs:{size:"small",icon:"zidingyi"},on:{click:e.addCustomButton}},[e._v("新增自定义按钮")]),n("DsfButton",{attrs:{size:"small",icon:"Magnifier",type:"auxiliary"},on:{click:e.openIcon}},[e._v("查看按钮图标")])],1),n("el-main",{staticStyle:{padding:"0px",height:"100%"}},[n("el-table",{attrs:{border:"","show-header":!0,data:e.tableData,"highlight-current-row":!0},on:{"row-click":e.rowClickHandler}},[n("el-table-column",{attrs:{label:"#",type:"index",align:"center"}}),n("el-table-column",{attrs:{label:"显示文字",prop:"text"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.text||t.row.title))]}}])}),n("el-table-column",{attrs:{label:"名称",prop:"caption"}}),n("el-table-column",{attrs:{label:"图标",prop:"text"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("DsfButton",{attrs:{"btn-style":"icon-text",size:"small",icon:e.getIcon(t.row.icon)}})]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("DsfButton",{attrs:{"btn-style":"icon-text",icon:"shanchu",size:"small",title:"删除"},on:{click:function(n){return e.removeButton(t.row)}}}),n("DsfButton",{attrs:{"btn-style":"icon-text",icon:"shang",size:"small",title:"上移"},on:{click:function(n){return e.up(t.row)}}}),n("DsfButton",{attrs:{"btn-style":"icon-text",icon:"xia",size:"small",title:"下移"},on:{click:function(n){return e.down(t.row)}}})]}}])})],1)],1)],1)],1),n("el-main",{staticStyle:{padding:"0px"}},[n("el-container",[n("el-main",[n("el-form",{attrs:{model:e.formModel,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{attrs:{disabled:""},model:{value:e.formModel.caption,callback:function(t){e.$set(e.formModel,"caption",t)},expression:"formModel.caption"}})],1),n("el-form-item",{attrs:{label:"别名"}},[n("el-input",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.alias,callback:function(t){e.$set(e.formModel,"alias",t)},expression:"formModel.alias"}})],1),n("el-form-item",{attrs:{label:"显示文字"}},[n("el-input",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.text,callback:function(t){e.$set(e.formModel,"text",t)},expression:"formModel.text"}})],1),n("el-form-item",{attrs:{label:"鼠标悬浮提示"}},[n("el-input",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.title,callback:function(t){e.$set(e.formModel,"title",t)},expression:"formModel.title"}})],1),n("el-form-item",{attrs:{label:"图标"}},[n("el-input",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.icon,callback:function(t){e.$set(e.formModel,"icon",t)},expression:"formModel.icon"}})],1),n("el-form-item",{attrs:{label:"系统按钮"}},[n("span",[e._v(e._s(e.formModel.isSystem?"是":"否"))])]),n("el-form-item",{attrs:{label:"动作"}},[n("el-input",{attrs:{disabled:!e.allowEdit()||e.formModel.isSystem},model:{value:e.formModel.actionName,callback:function(t){e.$set(e.formModel,"actionName",t)},expression:"formModel.actionName"}})],1),n("el-form-item",{attrs:{label:"风格"}},[n("el-select",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.btnStyle,callback:function(t){e.$set(e.formModel,"btnStyle",t)},expression:"formModel.btnStyle"}},[n("el-option",{attrs:{value:"",label:"普通按钮"}}),n("el-option",{attrs:{value:"icon-text",label:"图标按钮"}})],1)],1),n("el-form-item",{attrs:{label:"类型"}},[n("el-select",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.type,callback:function(t){e.$set(e.formModel,"type",t)},expression:"formModel.type"}},[n("el-option",{attrs:{value:"",label:"主要按钮"}}),n("el-option",{attrs:{value:"auxiliary",label:"次要按钮"}})],1)],1),n("el-form-item",{attrs:{label:"显示条件"}},[n("el-input",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.if,callback:function(t){e.$set(e.formModel,"if",t)},expression:"formModel.if"}}),n("span",{staticStyle:{color:"#f56c6c"}},[e._v("注：满足该条件时按钮显示")])],1),"system_flow_send"===e.formModel.actionName?n("el-form-item",{attrs:{label:"环节发送后事件"}},[n("el-input",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.flowSendOverEvent,callback:function(t){e.$set(e.formModel,"flowSendOverEvent",t)},expression:"formModel.flowSendOverEvent"}}),n("span",{staticStyle:{color:"#f56c6c"}},[e._v(" 注：此事件用于二次开发，设置此事件后，发送流程页面发送完结后不自动关闭 ")])],1):e._e(),n("el-form-item",{attrs:{label:"是否被折叠"}},[n("el-switch",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.isMore,callback:function(t){e.$set(e.formModel,"isMore",t)},expression:"formModel.isMore"}})],1),"system_flow_send"===e.formModel.actionName?n("el-form-item",{attrs:{label:"分环节发送"}},[n("el-switch",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.isLinkSend,callback:function(t){e.$set(e.formModel,"isLinkSend",t)},expression:"formModel.isLinkSend"}})],1):e._e(),e.isDblClickBind?n("el-form-item",{attrs:{label:"绑定列表双击"}},[n("el-switch",{attrs:{disabled:!e.allowEdit()},on:{change:e.dblClickChange},model:{value:e.formModel.isDblClick,callback:function(t){e.$set(e.formModel,"isDblClick",t)},expression:"formModel.isDblClick"}})],1):e._e(),e._l(e.formModel.params,(function(t,a){return[n("el-form-item",{key:a,attrs:{label:"参数"+(a+1)}},[n("el-input",{attrs:{placeholder:t.desc+" 默认值:"+(t.default||"无"),disabled:!e.allowEdit()},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"param.value"}},[n("i",{staticClass:"iconfont icon-js",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix",title:"代码编辑"},on:{click:function(n){e.openEditor(t,!e.allowEdit())}},slot:"suffix"})])],1)]}))],2)],1)],1),n("el-dialog",{attrs:{title:"选择系统按钮",visible:e.sysButtonSelect,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.sysButtonSelect=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("dsf-button",{on:{click:e.addSysButton}},[e._v("确定")]),n("dsf-button",{attrs:{type:"auxiliary"},on:{click:e.closeSysButtonSelect}},[e._v("取消")])]},proxy:!0}])},[[n("div",{staticStyle:{height:"500px",overflow:"auto"}},[n("el-tree",{ref:"tree",attrs:{data:e.treeData,props:e.defaultProps,"node-key":"text","default-checked-keys":[],"default-expand-all":"","show-checkbox":""}})],1)]],2)],1)],1)},ut=[],dt=n("358f"),ht=dt["a"],pt=Object(v["a"])(ht,ct,ut,!1,null,null,null),ft=pt.exports,mt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-row",{staticStyle:{width:"100%"}},[n("el-col",{attrs:{span:6}},[n("el-checkbox",{attrs:{border:"",indeterminate:e.isIndeterminate},on:{change:e.chooseAll},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),n("ul",{staticClass:"check-list"},e._l(e.tools,(function(t,a){return n("li",{key:t.val},[n("el-checkbox",{attrs:{label:t.val,value:t.checked,checked:!1,name:"type"},on:{change:function(n){return e.chooseItem(t,a)}}},[e._v(e._s(t.text))])],1)})),0)],1),n("el-col",{attrs:{span:18}},[n("div",{staticClass:"ue-container"},[n("div",{attrs:{id:"u_template"}})])])],1)],1)},gt=[],yt=n("f939"),xt=yt["a"],vt=(n("1143"),Object(v["a"])(xt,mt,gt,!1,null,"5814144e",null)),bt=vt.exports,wt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("enum-editor-item",{ref:"meta",attrs:{type:"meta","tree-data":e.treeData1,"table-post":e.tablePost,"tree-loading":e.loading,"empty-text":"请选择元数据","name-key":"name","id-key":"treeinfo_globalid"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})},kt=[],Dt={name:"DesAutoCompleteMD",components:{EnumEditorItem:ge["a"]},mixins:[H["a"]],data:function(){return{loading:!1,value1:{type:"meta",code:"",attach:[]},treeData1:[],tablePost:function(){}}},created:function(){this.currentData?this.init(this.currentData):this.postData1()},methods:{init:function(e){var t=e.type,n=e.attach,a=e.code,i=e.chooseKey,o=dsf.mix(!0,[],n);this.value1={type:t,attach:o,code:a,chooseKey:i},this.postData1()},validate:function(){return this.$refs.meta.getResult(),!!this.value1["code"]||(dsf.layer.message("请选择元数据以及右侧具体节点名称字段",!1),!1)},yes:function(){var e=this.value1.code;return e.id=e.value,e},postData1:function(){var e=this;this.loading=!0,this.$http.get("rm/list/meta",{namespace:""}).done((function(t){t.success?(e.treeData1=t.data.map((function(t){return e.dataFormat(t)})),e.$nextTick((function(){e.$refs.meta.initMetaTable()}))):dsf.layer.message("请求异常！",!1)})).always((function(){e.loading=!1}))},dataFormat:function(e){var t=this;return"3"!=e.type_value&&"8"!=e.type_value&&(e.nocheck=!0),"3"==e.type_value||"8"==e.type_value||e.children||(e.iconSkin="_special"),e.children&&(e.children=e.children.map((function(e){return t.dataFormat(e)}))),e}}},_t=Dt,Ct=Object(v["a"])(_t,wt,kt,!1,null,null,null),St=Ct.exports,Nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",{staticStyle:{"padding-right":"10px","text-align":"right"}},[n("DsfButton",{on:{click:e.addCol}},[e._v("新增")])],1),n("el-main",{staticStyle:{padding:"0px"}},[n("el-table",{staticClass:"ds-table",attrs:{border:!0,data:e.tableData,size:"small","highlight-current-row":!0}},[n("el-table-column",{attrs:{label:"节点类型","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"请输入"},model:{value:t.row.typeName,callback:function(n){e.$set(t.row,"typeName",n)},expression:"scope.row.typeName"}})]}}])}),n("el-table-column",{attrs:{label:"图标类型","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{placeholder:"请选择"},on:{change:function(n){return e.changeProperty(t.row,t.$index)}},model:{value:t.row.imgType,callback:function(n){e.$set(t.row,"imgType",n)},expression:"scope.row.imgType"}},e._l(e.imgType,(function(e){return n("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)]}}])}),n("el-table-column",{attrs:{label:"节点图标","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.openIconDialog(t.row)}}},[e._v(" "+e._s(t.row.icon?e.sliceIcon(t.row.icon):"选择图标")+" ")])]}}])}),n("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.deleted(t)}}},[e._v("删除")])]}}])})],1)],1)],1)},Lt=[],$t=n("7971"),It=$t["a"],Tt=Object(v["a"])(It,Nt,Lt,!1,null,null,null),Ot=Tt.exports,Et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tree-img-list"},e._l(e.imgList,(function(t){return a("div",{key:t.name,staticClass:"img-box",class:{active:t.icon===e.chooseIcon},on:{click:function(n){return e.addClass(t)}}},[a("el-image",{attrs:{alt:t.item,src:n("7729")("./"+t.showIcon+".png")}}),a("p",{staticClass:"demonstration"},[e._v(" "+e._s(t.icon)+" ")])],1)})),0)},jt=[],Pt={name:"DesTreeImgList",mixins:[H["a"]],props:{treeList:{type:Object,default:function(){return{}}}},data:function(){return{imgList:[],chooseIcon:"",urlPath:"../../../assets/styles/themes/tree_img/"}},created:function(){this.getTreeImgList()},mounted:function(){},methods:{addClass:function(e){this.chooseIcon=e.icon,this.treeList.icon=e.icon?this.urlPath+e.icon+".png":""},getTreeImgList:function(){var e=this;this.$http.get("./static/pd_other/treeImgList.json").done((function(t){e.imgList=t[e.treeList.imgType];var n=e.treeList.icon;e.chooseIcon=n?n.slice(e.urlPath.length,-4):""})).error((function(e){dsf.error(e)}))}}},Bt=Pt,Mt=Object(v["a"])(Bt,Et,jt,!1,null,null,null),Rt=Mt.exports,At=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100%"}},[n("el-aside",{attrs:{width:"200px"}},[n("el-tree",{attrs:{data:e.valueAttributes,props:e.treeConfig,"highlight-current":!0,"node-key":"code","current-node-key":e.currentNodeKey},on:{"node-click":e.nodeClickHandler}})],1),n("el-main",{staticStyle:{overflow:"auto"}},[n("el-form",{attrs:{model:e.model,"label-width":"130px"}},[n("el-card",{staticStyle:{"margin-bottom":"10px"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" 必填规则 ")]},proxy:!0}])},[n("el-form-item",{attrs:{label:"是否必填"}},[n("el-switch",{model:{value:e.model.required,callback:function(t){e.$set(e.model,"required",t)},expression:"model.required"}})],1),n("el-form-item",{attrs:{label:"错误提示"}},[n("el-input",{model:{value:e.model.errorMsg.required,callback:function(t){e.$set(e.model.errorMsg,"required",t)},expression:"model.errorMsg.required"}})],1)],1),n("el-card",{staticStyle:{"margin-bottom":"10px"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" 类型规则 ")]},proxy:!0}])},[n("el-form-item",{attrs:{label:"是否是数字"}},[n("el-switch",{model:{value:e.model.isNumber,callback:function(t){e.$set(e.model,"isNumber",t)},expression:"model.isNumber"}})],1),n("el-form-item",{attrs:{label:"错误提示"}},[n("el-input",{model:{value:e.model.errorMsg.isNumber,callback:function(t){e.$set(e.model.errorMsg,"isNumber",t)},expression:"model.errorMsg.isNumber"}})],1)],1),n("el-card",{staticStyle:{"margin-bottom":"10px"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" 精度规则 ")]},proxy:!0}])},[e.model.isNumber?[n("el-form-item",{attrs:{label:"最小数"}},[n("el-input",{on:{change:function(t){return e.checkNum("numberMin")}},model:{value:e.model.numberMin,callback:function(t){e.$set(e.model,"numberMin",t)},expression:"model.numberMin"}})],1),n("el-form-item",{attrs:{label:"错误提示"}},[n("el-input",{model:{value:e.model.errorMsg.numberMin,callback:function(t){e.$set(e.model.errorMsg,"numberMin",t)},expression:"model.errorMsg.numberMin"}})],1),n("el-form-item",{attrs:{label:"最大数"}},[n("el-input",{on:{change:function(t){return e.checkNum("numberMax")}},model:{value:e.model.numberMax,callback:function(t){e.$set(e.model,"numberMax",t)},expression:"model.numberMax"}})],1),n("el-form-item",{attrs:{label:"错误提示"}},[n("el-input",{model:{value:e.model.errorMsg.numberMax,callback:function(t){e.$set(e.model.errorMsg,"numberMax",t)},expression:"model.errorMsg.numberMax"}})],1),n("el-form-item",{attrs:{label:"小数点后保留位数"}},[n("el-input",{on:{change:function(t){return e.checkNum("precision",!0)}},model:{value:e.model.precision,callback:function(t){e.$set(e.model,"precision",t)},expression:"model.precision"}})],1),n("el-form-item",{attrs:{label:"错误提示"}},[n("el-input",{model:{value:e.model.errorMsg.precision,callback:function(t){e.$set(e.model.errorMsg,"precision",t)},expression:"model.errorMsg.precision"}})],1)]:[n("el-form-item",{attrs:{label:"字符串最小长度"}},[n("el-input",{attrs:{min:0},on:{change:function(t){return e.checkNum("min",!0)}},model:{value:e.model.min,callback:function(t){e.$set(e.model,"min",t)},expression:"model.min"}})],1),n("el-form-item",{attrs:{label:"错误提示"}},[n("el-input",{model:{value:e.errorMsg.min,callback:function(t){e.$set(e.errorMsg,"min",t)},expression:"errorMsg.min"}})],1),n("el-form-item",{attrs:{label:"字符串最大长度"}},[n("el-input",{attrs:{min:0},on:{change:function(t){return e.checkNum("max",!0)}},model:{value:e.model.max,callback:function(t){e.$set(e.model,"max",t)},expression:"model.max"}})],1),n("el-form-item",{attrs:{label:"错误提示"}},[n("el-input",{model:{value:e.model.errorMsg.max,callback:function(t){e.$set(e.model.errorMsg,"max",t)},expression:"model.errorMsg.max"}})],1)]],2),n("el-card",{staticStyle:{"margin-bottom":"10px"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" 格式规则 ")]},proxy:!0}])},[n("el-form-item",{attrs:{label:"格式"}},[n("el-select",{staticStyle:{width:"100%"},model:{value:e.model.express,callback:function(t){e.$set(e.model,"express",t)},expression:"model.express"}},e._l(e.expressOptions,(function(e,t){return n("el-option",{key:t,attrs:{label:e.text||"无",value:e.value}})})),1)],1),n("el-form-item",{attrs:{label:"错误提示"}},[n("el-input",{model:{value:e.model.errorMsg.express,callback:function(t){e.$set(e.model.errorMsg,"express",t)},expression:"model.errorMsg.express"}})],1)],1)],1)],1)],1)},zt=[],Vt=n("337f"),qt=Vt["a"],Ft=Object(v["a"])(qt,At,zt,!1,null,null,null),Kt=Ft.exports,Ht=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",[n("div",{staticStyle:{"text-align":"right",height:"auto",margin:"0px -20px"}},[n("DsfButton",{on:{click:e.add}},[e._v("新增")])],1)]),n("el-main",{staticStyle:{padding:"0px"}},[n("el-table",{attrs:{data:e.tableData,border:""}},[n("el-table-column",{attrs:{prop:"code",label:"元数据代码"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.code,callback:function(n){e.$set(t.row,"code",n)},expression:"scope.row.code"}})]}}])}),e.type?e._e():n("el-table-column",{attrs:{prop:"type",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{model:{value:t.row.type,callback:function(n){e.$set(t.row,"type",n)},expression:"scope.row.type"}},[n("el-option",{attrs:{value:0,label:"检索框"}}),n("el-option",{attrs:{value:1,label:"附加条件"}})],1)]}}],null,!1,1675615170)}),n("el-table-column",{attrs:{prop:"operation",label:"操作符"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{model:{value:t.row.operation,callback:function(n){e.$set(t.row,"operation",n)},expression:"scope.row.operation"}},[n("el-option",{attrs:{value:"like",label:"模糊匹配"}}),n("el-option",{attrs:{value:"slike",label:"开头匹配"}}),n("el-option",{attrs:{value:"elike",label:"结尾匹配"}}),n("el-option",{attrs:{value:"eq",label:"等于"}}),n("el-option",{attrs:{value:"noteq",label:"不等于"}}),n("el-option",{attrs:{value:"lt",label:"小于"}}),n("el-option",{attrs:{value:"gt",label:"大于"}}),n("el-option",{attrs:{value:"lteq",label:"小于等于"}}),n("el-option",{attrs:{value:"gteq",label:"大于等于"}})],1)]}}])}),n("el-table-column",{attrs:{prop:"valueExpress",label:"值"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{disabled:0===t.row.type},model:{value:t.row.valueExpress,callback:function(n){e.$set(t.row,"valueExpress",n)},expression:"scope.row.valueExpress"}})]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-link",{attrs:{type:"primary"},on:{click:function(n){return e.remove(t.row)}}},[e._v("删除")])]}}])})],1)],1)],1)},Gt=[],Ut={name:"DesDataGridSearch",mixins:[H["a"]],data:function(){return{tableData:[],type:0}},created:function(){var e=this.currentData||[];this.tableData=e,this.config.other&&(this.type=1*(this.config.other.type||"0"))},mounted:function(){},methods:{add:function(){this.tableData.push({code:"",type:this.type,operation:"like",valueExpress:""})},remove:function(e){dsf.array.remove(this.tableData,e)},yes:function(){return this.tableData}}},Yt=Ut,Wt=Object(v["a"])(Yt,Ht,Gt,!1,null,null,null),Jt=Wt.exports,Xt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"control-filter-tree"},[n("dsf-tree-select",{attrs:{"tree-data":e.treeData,"node-key":"dsfa_rm_id","node-name":"name",loading:e.treeLoading,"default-checked-key":e.defaultCheckedKey,"search-control":"","default-expand-all":""},on:{"choose-node":function(t){e.radioData=t}}})],1)},Qt=[],Zt=n("16f6"),en={name:"DesBusinessComponent",components:{DsfTreeSelect:Zt["a"]},mixins:[H["a"]],data:function(){return{treeData:[],treeLoading:!1,radioData:null,defaultCheckedKey:""}},created:function(){this.getDesignCtrl()},methods:{getDesignCtrl:function(){var e=this;this.loading=!0;var t="/rm/list/bc";this.$http.get(t).done((function(t){t.success?e.treeData=t.data:dsf.layer.message("业务组件获取"+t.message,!1)})).error((function(e){dsf.layer.message(e.message,!1)})).finally((function(){e.loading=!1}))}}},tn=en,nn=Object(v["a"])(tn,Xt,Qt,!1,null,null,null),an=nn.exports,on=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"control-filter-tree"},[n("dsf-tree-select",{attrs:{"tree-data":e.treeData,"node-key":"dsfa_rm_id","node-name":"name",loading:e.treeLoading,"default-checked-key":e.defaultCheckedKey,"search-control":"","default-expand-all":""},on:{"choose-node":function(t){e.radioData=t}}})],1)},sn=[],ln={name:"DesUseLayoutTpl",components:{DsfTreeSelect:Zt["a"]},mixins:[H["a"]],props:{isMobile:{type:Boolean,default:!1}},data:function(){return{treeData:[],treeLoading:!1,radioData:null,defaultCheckedKey:""}},created:function(){this.getDesignCtrl()},methods:{getDesignCtrl:function(){var e=this;this.loading=!0;var t="/rm/list/temp";this.isMobile&&(t="/rm/list/mobileTemp"),this.$http.get(t).done((function(t){t.success?e.treeData=t.data:dsf.layer.message(t.message,!1)})).error((function(e){dsf.layer.message(e.message,!1)})).finally((function(){e.loading=!1}))}}},rn=ln,cn=Object(v["a"])(rn,on,sn,!1,null,null,null),un=cn.exports,dn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"control-filter-tree"},[n("dsf-tree-select",{attrs:{"tree-data":e.nodeList,loading:e.loading,theme:"theme1","node-key":"dsfa_rm_id","node-name":"name","search-control":"","default-expand-all":"",multiple:""},on:{"choose-node":function(t){e.checkNodeList=t}}})],1)},hn=[],pn={name:"DesControlSelect",components:{DsfTreeSelect:Zt["a"]},mixins:[H["a"]],data:function(){return{loading:!1,checkNodeList:[],nodeList:[]}},created:function(){this.getDesignCtrl()},methods:{filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},getDesignCtrl:function(){var e=this;this.loading=!0;var t="/rm/list/control";this.$http.get(t).done((function(t){t.success?e.nodeList=t.data:dsf.layer.message("控件组获取"+t.message,!1)})).error((function(e){dsf.layer.message(e.message,!1)})).finally((function(){e.loading=!1}))}}},fn=pn,mn=Object(v["a"])(fn,dn,hn,!1,null,null,null),gn=mn.exports,yn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{staticClass:"ds-meta-data-select",attrs:{type:"border-card"},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[n("el-tab-pane",{attrs:{name:"0",label:"普通组件"}},[e.loaded[0]?n("meta-data-select-item",{ref:"select0",attrs:{url:"rm/list/control"}}):e._e()],1),n("el-tab-pane",{attrs:{name:"1",label:"业务组件"}},[e.loaded[1]?n("meta-data-select-item",{ref:"select1",attrs:{url:"rm/list/bc"}}):e._e()],1)],1)},xn=[],vn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-meta-data-select-item"},[n("dsf-tree-select",{attrs:{"tree-data":e.treeData,loading:e.loading,theme:"theme2","node-key":"ID","node-name":"name","search-control":"","default-expand-all":"",multiple:""},on:{"choose-node":function(t){e.checkList=t}}})],1)},bn=[],wn={name:"DesMetaDataSelectItem",components:{DsfTreeSelect:Zt["a"]},props:{url:{type:String,required:!0}},data:function(){return{loading:!1,treeData:[],checkList:[]}},created:function(){this.postData()},methods:{yes:function(){return this.checkList},postData:function(){var e=this;this.loading=!0,this.$http.get(this.url,{namespace:""}).then((function(t){var n=t.data;n.success?(e.dataFormat(n.data),e.treeData=n.data):dsf.layer.message("请求异常！",!1)})).finally((function(){e.loading=!1}))},dataFormat:function(e){for(var t=0;t<e.length;t++){var n=e[t];n.label=n.name,"3"!==n.type_value&&"8"!==n.type_value&&(n.nocheck=!0),"3"===n.type_value||"8"===n.type_value||n.children||(n.iconSkin="_special"),n.children&&this.dataFormat(n.children)}}}},kn=wn,Dn=Object(v["a"])(kn,vn,bn,!1,null,null,null),_n=Dn.exports,Cn={name:"DesCustomComponent",components:{MetaDataSelectItem:_n},mixins:[H["a"]],data:function(){return{tabIndex:"0",loaded:[!0,!1]}},watch:{tabIndex:function(e){this.$set(this.loaded,parseInt(e),!0)}},methods:{yes:function(){return this.$refs["select"+this.tabIndex].yes()}}},Sn=Cn,Nn=Object(v["a"])(Sn,yn,xn,!1,null,null,null),Ln=Nn.exports,$n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{staticClass:"ds-meta-data-select",attrs:{type:"border-card"},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[n("el-tab-pane",{attrs:{name:"0",label:"元数据"}},[e.loaded[0]?n("meta-data-select-item",{ref:"select0",attrs:{url:"rm/list/meta"}}):e._e()],1),n("el-tab-pane",{attrs:{name:"1",label:"数据源"}},[e.loaded[1]?n("meta-data-select-item",{ref:"select1",attrs:{url:"rm/list/ds"}}):e._e()],1)],1)},In=[],Tn={name:"DesMetaDataSelect",components:{MetaDataSelectItem:_n},mixins:[H["a"]],data:function(){return{tabIndex:"0",loaded:[!0,!1]}},watch:{tabIndex:function(e){this.$set(this.loaded,parseInt(e),!0)}},methods:{yes:function(){return this.$refs["select"+this.tabIndex].yes()}}},On=Tn,En=Object(v["a"])(On,$n,In,!1,null,null,null),jn=En.exports,Pn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n(e.componentId,{ref:"form",tag:"component",attrs:{owner:e.property},on:{showDialog:e.showDialog}}),n("el-dialog",{attrs:{title:"题目关联",visible:e.dialogVisible,modal:!0,"append-to-body":!0,"modal-append-to-body":!1,"before-close":e.closeRelaDialog,closed:e.resetRela,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{attrs:{model:e.relaForm,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"当前题目:"}},[n("el-input",{staticStyle:{border:"none"},attrs:{value:e.owner.questionIndex+"题",readonly:""}})],1),n("el-form-item",{attrs:{label:"关联题目:"}},[n("el-select",{on:{change:e.chooseRela},model:{value:e.relaForm.relaIndex,callback:function(t){e.$set(e.relaForm,"relaIndex",t)},expression:"relaForm.relaIndex"}},[n("el-option",{attrs:{value:"no-rela",label:"无关联"}}),e._l(e.prevObjs,(function(e){return n("el-option",{key:e.questionIndex,attrs:{label:e.questionIndex+"题",value:e.questionIndex}})}))],2)],1),n("el-form-item",{attrs:{label:""}},[n("div",{staticClass:"rela-option-box"},[e.relaItem?[n("p",[e._v("当“关联题目”选择下面的选项：")]),"dsf.qiradio"==e.relaItem.ctrlType?[n("el-radio-group",{model:{value:e.relaForm.relaRadio,callback:function(t){e.$set(e.relaForm,"relaRadio",t)},expression:"relaForm.relaRadio"}},e._l(e.relaItem.items,(function(t){return n("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.text))])})),1)]:"dsf.qicheckbox"==e.relaItem.ctrlType?[n("el-checkbox-group",{model:{value:e.relaForm.relaCheckBox,callback:function(t){e.$set(e.relaForm,"relaCheckBox",t)},expression:"relaForm.relaCheckBox"}},e._l(e.relaItem.items,(function(t){return n("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.text))])})),1)]:void 0,n("p",[e._v("“当前题目”才出现")])]:e._e()],2)])],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("dsf-button",{on:{click:e.setRela}},[e._v("确 定")]),n("dsf-button",{attrs:{type:"auxiliary"},on:{click:e.closeRelaDialog}},[e._v("取 消")])],1)],1),n("el-dialog",{attrs:{title:"跳题逻辑",visible:e.logicVisible,modal:!0,"append-to-body":!0,"modal-append-to-body":!1,"before-close":e.closeLogicDialog,closed:e.resetLogic,width:"600px"},on:{"update:visible":function(t){e.logicVisible=t}}},[n("div",{staticClass:"ds-logic-option-box"},[e.owner.items&&e.owner.items.length>0?n("table",{staticClass:"el-table el-table--border",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[n("thead",[n("th"),n("th",[e._v("选项")]),n("th",[e._v("选项值")]),n("th",[e._v("跳转到")])]),n("tbody",e._l(e.owner.items,(function(t){return n("tr",{key:t.value},[n("td",[n("b",[e._v("选择")])]),n("td",[e._v(e._s(t.text))]),n("td",[e._v(e._s(t.value))]),n("td",[n("el-select",{on:{change:e.chooseRela},model:{value:e.logic[t.value],callback:function(n){e.$set(e.logic,t.value,n)},expression:"logic[item.value]"}},[n("el-option",{attrs:{value:"",label:"不跳题"}}),e._l(e.nextObjs,(function(e){return n("el-option",{key:e,attrs:{value:e,label:e+"题"}})}))],2)],1)])})),0)]):e._e()]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("dsf-button",{on:{click:e.setLogic}},[e._v("确 定")]),n("dsf-button",{attrs:{type:"auxiliary"},on:{click:e.closeLogicDialog}},[e._v("取 消")])],1)])],1)},Bn=[],Mn=n("0432"),Rn=Mn["a"],An=Object(v["a"])(Rn,Pn,Bn,!1,null,null,null),zn=An.exports,Vn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{staticClass:"ds-enum-editor",attrs:{type:"border-card"},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[n("el-tab-pane",{attrs:{name:"1",label:"元数据"}},[n("enum-editor-item",{ref:"meta",attrs:{type:"meta","tree-data":e.treeData1,"default-checked-key":e.defaultCheckedKey1,"table-post":e.tablePost,"tree-loading":e.loading[0],"empty-text":"请选择元数据","name-key":"name","id-key":"treeinfo_globalid"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})],1),e.config&&e.config.other&&"ds"==e.config.other.exclude?e._e():n("el-tab-pane",{attrs:{name:"2",label:"数据源"}},[n("enum-editor-item",{attrs:{type:"ds","tree-data":e.treeData2,"default-checked-key":e.defaultCheckedKey2,"table-post":e.tablePost,"hide-right":!0,"tree-loading":e.loading[1],"empty-text":"请选择数据源","name-key":"name","id-key":"treeinfo_globalid"},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1)],1)},qn=[],Fn={name:"TreeDataSource",components:{EnumEditorItem:ge["a"]},mixins:[H["a"]],data:function(){return{tabIndex:0,loaded:[!1,!1],loading:[!1,!1],value1:{type:"meta",code:"",attach:[]},value2:{type:"ds",code:null,attach:[]},treeData1:[],treeData2:[],defaultCheckedKey1:"",defaultCheckedKey2:"",tablePost:function(){}}},watch:{tabIndex:function(e){!this.loaded[e-1]&&this["postData"+e]&&this["postData"+e](),this.$set(this.loaded,parseInt(e)-1,!0)}},created:function(){this.currentData&&void 0!==this.currentData.type?this.init(this.currentData):this.$attrs&&this.$attrs.chooseMetaData&&this.$attrs.chooseMetaData.code?this.init(this.$attrs.chooseMetaData):this.tabIndex="1"},methods:{init:function(e){var t=e.type,n=e.attach,a=e.code,i=e.chooseKey,o=dsf.mix(!0,[],n);"meta"===t?(this.value1={type:t,attach:o,code:a,chooseKey:i},this.defaultCheckedKey1=i,this.tabIndex="1"):"ds"===t&&(this.value2={type:t,attach:o,code:a,chooseKey:i},this.defaultCheckedKey2=i,this.tabIndex="2")},validate:function(){return this.$refs.meta.getResult(),!!this["value"+this.tabIndex]["code"]||(dsf.layer.message("请选择"+("1"===this.tabIndex?"元数据以及右侧具体节点名称字段":"数据源"),!1),!1)},yes:function(){return this["value"+this.tabIndex]},postData1:function(){var e=this;this.$set(this.loading,0,!0),this.$http.get("rm/list/meta",{namespace:""}).then((function(t){var n=t.data;n.success?(e.treeData1=n.data.map((function(t){return e.dataFormat(t,"1")})),e.$nextTick((function(){e.$refs.meta.initMetaTable()}))):dsf.layer.message("请求异常！",!1)})).finally((function(){e.$set(e.loading,0,!1)}))},postData2:function(){var e=this;this.$set(this.loading,1,!0),this.$http.get("/rm/list/ds",{namespace:""}).then((function(t){var n=t.data;n.success?e.treeData2=n.data.map((function(t){return e.dataFormat(t,"2")})):dsf.layer.message("请求异常！",!1)})).finally((function(){e.$set(e.loading,1,!1)}))},dataFormat:function(e,t){var n=this;return"3"!=e.type_value&&"8"!=e.type_value&&(e.nocheck=!0),"3"==e.type_value||"8"==e.type_value||e.children||(e.iconSkin="_special"),e.children&&(e.children=e.children.map((function(e){return n.dataFormat(e,t)}))),e}}},Kn=Fn,Hn=Object(v["a"])(Kn,Vn,qn,!1,null,null,null),Gn=Hn.exports,Un=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",[n("div",{staticStyle:{"text-align":"right",height:"auto",margin:"0px -20px"}},[n("DsfButton",{on:{click:e.add}},[e._v("新增")])],1)]),n("el-main",{staticStyle:{padding:"0px"}},[n("el-table",{attrs:{data:e.tableData,border:"","highlight-current-row":!0}},[n("el-table-column",{attrs:{prop:"code",label:"元数据代码","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.code,callback:function(n){e.$set(t.row,"code",n)},expression:"scope.row.code"}})]}}])}),n("el-table-column",{attrs:{prop:"name",label:"描述","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{disabled:!t.row.isAttach},model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}})]}}])}),n("el-table-column",{attrs:{prop:"valueExpress",label:"对应字段","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.dataField,callback:function(n){e.$set(t.row,"dataField",n)},expression:"scope.row.dataField"}})]}}])}),n("el-table-column",{attrs:{label:"操作",width:"80px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isAttach?n("el-link",{attrs:{type:"primary"},on:{click:function(n){return e.remove(t.row)}}},[e._v("删除")]):e._e()]}}])})],1)],1)],1)},Yn=[],Wn={name:"NavTreeEdit",mixins:[H["a"]],data:function(){return{tableData:[],type:0}},created:function(){var e=this.currentData||[];this.tableData=e},mounted:function(){},methods:{add:function(){this.tableData.push({code:"",isAttach:!0,alias:"",name:"",type:{text:"文本",value:"string"},length:"100",dataField:"",defaultValue:null,unit:null})},remove:function(e){dsf.array.remove(this.tableData,e)},yes:function(){return this.tableData}}},Jn=Wn,Xn=Object(v["a"])(Jn,Un,Yn,!1,null,null,null),Qn=Xn.exports,Zn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"ds-control ds-form-item ds-radio-box ds-has-label"},[n("label",{staticClass:"ds-form-label"},[e._v("范围：")]),n("div",{staticClass:"ds-form-block"},[n("el-radio-group",{model:{value:e.scope,callback:function(t){e.scope=t},expression:"scope"}},[n("el-radio",{attrs:{label:"0"}},[e._v("无限制")]),n("el-radio",{attrs:{label:"1"}},[e._v("我的")]),n("el-radio",{attrs:{label:"2"}},[e._v("本机构的")])],1)],1)]),n("div",{directives:[{name:"show",rawName:"v-show",value:"2"==e.scope,expression:"scope=='2'"}],staticClass:"ds-control ds-form-item ds-radio-box ds-has-label"},[n("label",{staticClass:"ds-form-label"},[e._v("本机构范围：")]),n("div",{staticClass:"ds-form-block"},[n("el-checkbox-group",{model:{value:e.unit,callback:function(t){e.unit=t},expression:"unit"}},[n("el-checkbox",{attrs:{label:"1"}},[e._v("上级机构")]),n("el-checkbox",{attrs:{label:"2"}},[e._v("下级机构")])],1)],1)])])},ea=[],ta={name:"BrowseScopeEdit",mixins:[H["a"]],data:function(){return{scope:2,unit:[]}},created:function(){this.scope=this.currentData.scope,this.unit=this.currentData.unit},methods:{yes:function(){return{scope:this.scope,unit:"2"!=this.scope?[]:this.unit}}}},na=ta,aa=Object(v["a"])(na,Zn,ea,!1,null,null,null),ia=aa.exports,oa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[n("DsfButton",{on:{click:e.add}},[e._v("新增页签")])],1),n("el-main",{staticStyle:{padding:"0px"}},[n("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData,"row-class-name":e.tableRowClassName}},[n("el-table-column",{attrs:{label:"显示名称","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.title,callback:function(n){e.$set(t.row,"title",n)},expression:"scope.row.title"}})]}}])}),n("el-table-column",{attrs:{label:"标识","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}})]}}])}),n("el-table-column",{attrs:{label:"是否禁用","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"支持表达式"},model:{value:t.row.disable,callback:function(n){e.$set(t.row,"disable",n)},expression:"scope.row.disable"}})]}}])}),n("el-table-column",{attrs:{label:"是否隐藏","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"支持表达式"},model:{value:t.row.isHide,callback:function(n){e.$set(t.row,"isHide",e._n(n))},expression:"scope.row.isHide"}})]}}])}),n("el-table-column",{attrs:{label:"是否懒加载","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"支持表达式"},model:{value:t.row.lazy,callback:function(n){e.$set(t.row,"lazy",e._n(n))},expression:"scope.row.lazy"}})]}}])}),n("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(n){return e.insert(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(n){return e.deleted(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(n){return e.up(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(n){return e.down(t)}}})]}}])})],1)],1)],1)},sa=[],la=(n("a9e3"),{name:"NavTabEdit",mixins:[H["a"]],data:function(){return{tableData:[],names:[]}},created:function(){this.tableData=this.currentData||[this.newTab()]},methods:{tableRowClassName:function(e){var t=e.row,n=e.rowIndex,a="";if(t.name){this.names[n]="";var i=this.names.indexOf(t.name);-1!=i&&i<n&&(a="warning-row"),this.names[n]=t.name}return a},newTab:function(){return{title:"Tab"+(this.tableData.length+1),name:null,disable:"false",isHide:"false",badge:null,lazy:"false",controls:[],error:!1}},add:function(){this.tableData.push(this.newTab())},insert:function(e){this.tableData.splice(e.$index+1,0,this.newTab())},deleted:function(e){dsf.array.remove(this.tableData,e.row)},up:function(e){if(e.$index>0){var t=this.tableData[e.$index],n=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(n-1,0,t)}},down:function(e){if(this.tableData.length-1>e.$index){var t=this.tableData[e.$index],n=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(n+1,0,t)}},validate:function(){for(var e in this.tableData){this.tableData[e]["name"]=this.tableData[e]["name"]||dsf.uuid();var t=this.names.indexOf(this.tableData[e]["name"]);if(-1!=t&&t<e)return dsf.layer.message("请解决重复标识",!1),!1}return!0},yes:function(){return this.tableData},checkMaxSpan:function(e,t){e[t]=dsf.isNumber(e[t])?Number(e[t]):null,e[t]&&e[t]>24&&(e[t]=24),e[t]&&e[t]<0&&(e[t]=null)}}}),ra=la,ca=Object(v["a"])(ra,oa,sa,!1,null,null,null),ua=ca.exports,da=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{staticClass:"ds-enum-editor",attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[n("el-tab-pane",{staticClass:"ds-enum-editor-item3",attrs:{label:"用户管理",name:"static"}},[n("el-input",{attrs:{type:"textarea",rows:2,resize:"none",placeholder:"支持格式：'文本'、'文本|值'两种格式，多个选项用回车符换行"},model:{value:e.dataTwo,callback:function(t){e.dataTwo=t},expression:"dataTwo"}})],1),n("el-tab-pane",{attrs:{name:"dict",label:"数据字典",lazy:!0}},[n("enum-editor-item",{attrs:{type:"dict","tree-loading":e.treeLoading,"tree-data":e.treeData,"default-checked-key":e.defaultCheckedKey,"table-post":e.tablePost,"empty-text":"请选择数据字典"},model:{value:e.dataOne,callback:function(t){e.dataOne=t},expression:"dataOne"}})],1)],1)},ha=[],pa=n("bbd1"),fa=pa["a"],ma=Object(v["a"])(fa,da,ha,!1,null,null,null),ga=ma.exports,ya=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticClass:"tree-selector-edit"},[n("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[n("DsfButton",{on:{click:e.add}},[e._v("新增")])],1),n("el-main",{staticStyle:{padding:"0px"}},[n("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData,"row-class-name":e.tableRowClassName}},[n("el-table-column",{attrs:{label:"显示名称","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.title,callback:function(n){e.$set(t.row,"title",n)},expression:"scope.row.title"}})]}}])}),n("el-table-column",{attrs:{label:"复选框模式","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{placeholder:"启用/不启用"},model:{value:t.row.showCheckBox,callback:function(n){e.$set(t.row,"showCheckBox",n)},expression:"scope.row.showCheckBox"}},[n("el-option",{attrs:{label:"启用",value:"1"}}),n("el-option",{attrs:{label:"不启用",value:"0"}})],1)]}}])}),n("el-table-column",{attrs:{label:"选择条件","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"无"},model:{value:t.row.types,callback:function(n){e.$set(t.row,"types",n)},expression:"scope.row.types"}})]}}])},[n("template",{slot:"header"},[n("el-popover",{attrs:{trigger:"hover",placement:"top"}},[n("p",[e._v("支持表达式，严格区分值类型；比如:@[isExist(_type,1,2,'3')]")]),n("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[n("div",[e._v("选择条件")])])])],1)],2),n("el-table-column",{attrs:{label:"父子关联状态","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{placeholder:"关联/不关联"},model:{value:t.row.chooseOneNode,callback:function(n){e.$set(t.row,"chooseOneNode",n)},expression:"scope.row.chooseOneNode"}},[n("el-option",{attrs:{label:"关联",value:"1"}}),n("el-option",{attrs:{label:"不关联",value:"0"}})],1)]}}])},[n("template",{slot:"header"},[n("el-popover",{attrs:{trigger:"hover",placement:"top"}},[n("p",[e._v(" 选中一个节点后，父子节点的选中状态是否受当前节点选中状态影响 ")]),n("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[n("div",[e._v("父子关联状态")])])])],1)],2),n("el-table-column",{attrs:{label:"初始化展开层级","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"无"},model:{value:t.row.defaultOpenSeries,callback:function(n){e.$set(t.row,"defaultOpenSeries",n)},expression:"scope.row.defaultOpenSeries"}})]}}])}),e.isOuaSelect?n("el-table-column",{attrs:{label:"数据类型","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.metaDataType,callback:function(n){e.$set(t.row,"metaDataType",n)},expression:"scope.row.metaDataType"}},[n("el-option",{attrs:{label:"本部门",value:"2"}}),n("el-option",{attrs:{label:"本单位",value:"3"}}),n("el-option",{attrs:{label:"组织架构",value:"4"}})],1)]}}],null,!1,1136998362)}):n("el-table-column",{attrs:{label:"数据类型","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.metaDataType,callback:function(n){e.$set(t.row,"metaDataType",n)},expression:"scope.row.metaDataType"}},[n("el-option",{attrs:{label:"接口",value:"0"}}),n("el-option",{attrs:{label:"元数据组",value:"1"}})],1)]}}])}),n("el-table-column",{attrs:{label:"数据详情","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1*t.row.metaDataType>1?n("div",[n("el-select",{attrs:{placeholder:"显示类型",title:"选择显示类型：人员、部门，两者的请求接口不一样。"},model:{value:t.row.showType,callback:function(n){e.$set(t.row,"showType",n)},expression:"scope.row.showType"}},[n("el-option",{attrs:{label:"人员类型",value:"user"}}),n("el-option",{attrs:{label:"部门类型",value:"dept"}})],1),"4"==t.row.metaDataType&&"user"==t.row.showType?n("el-select",{attrs:{placeholder:"仅显示子机构",title:"是否仅显示子机构"},model:{value:t.row.showSubDept,callback:function(n){e.$set(t.row,"showSubDept",n)},expression:"scope.row.showSubDept"}},[n("el-option",{attrs:{label:"仅显示子机构",value:"1"}}),n("el-option",{attrs:{label:"不仅显示子机构",value:"0"}})],1):e._e(),"4"==t.row.metaDataType?n("el-input",{attrs:{title:"组织架构显示层级（0代表子机构）"},model:{value:t.row.showLevel,callback:function(n){e.$set(t.row,"showLevel",n)},expression:"scope.row.showLevel"}},[n("template",{slot:"prepend"},[e._v("显示第")]),n("template",{slot:"append"},[e._v("级")])],2):e._e()],1):"1"!=t.row.metaDataType?n("el-input",{attrs:{disabled:"0"!=t.row.metaDataType,placeholder:"支持表达式",title:"数据请求地址"},model:{value:t.row.sqlUrl,callback:function(n){e.$set(t.row,"sqlUrl",n)},expression:"scope.row.sqlUrl"}}):n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.setChooseMetaData(t)}}},[e._v(" 选择元数据组 ")])]}}])}),n("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(n){return e.insert(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(n){return e.deleted(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(n){return e.up(t)}}}),n("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(n){return e.down(t)}}})]}}])})],1)],1)],1)},xa=[],va={name:"TreeSelectorEdit",mixins:[H["a"]],data:function(){return{tableData:[],names:[],isOuaSelect:!1}},created:function(){this.config.params&&"checkNode"==this.config.params.type&&(this.isOuaSelect=!0),this.tableData=this.currentData||[]},methods:{tableRowClassName:function(e){var t=e.row,n=e.rowIndex,a="";if(t.title){this.names[n]="";var i=this.names.indexOf(t.title);-1!=i&&i<n&&(a="warning-row"),this.names[n]=t.title}return a},newTab:function(){return{title:"Tab"+(this.tableData.length+1),showCheckBox:"0",types:"",chooseOneNode:"1",defaultOpenSeries:"1",metaDataType:this.isOuaSelect?"2":"0",showType:"user",showSubDept:"1",showLevel:"0",chooseMetaData:{},sqlUrl:"",async:"0",controls:[],name:dsf.uuid(),error:!1}},add:function(){this.tableData.push(this.newTab())},insert:function(e){this.tableData.splice(e.$index+1,0,this.newTab())},deleted:function(e){dsf.array.remove(this.tableData,e.row)},up:function(e){if(e.$index>0){var t=this.tableData[e.$index],n=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(n-1,0,t)}},down:function(e){if(this.tableData.length-1>e.$index){var t=this.tableData[e.$index],n=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(n+1,0,t)}},validate:function(){for(var e in this.tableData){this.tableData[e]["title"]=this.tableData[e]["title"]||dsf.uuid();var t=this.names.indexOf(this.tableData[e]["title"]);if(-1!=t&&t<e)return dsf.layer.message("请解决重复名称",!1),!1}return!0},yes:function(){return this.tableData},setChooseMetaData:function(e){var t=this;dsf.layer.openDialog({title:"请选择",fullscreen:!1,width:"1000px",overflow:"hidden",content:"TreeDataSource",params:{chooseMetaData:t["tableData"][e.$index].chooseMetaData},btns:[{text:"确定",handler:function(n){var a=n.validate();if(!a)return!1;t["tableData"][e.$index].chooseMetaData=n.yes()}},{text:"取消"}]})}}},ba=va,wa=Object(v["a"])(ba,ya,xa,!1,null,null,null),ka=wa.exports,Da=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",{ref:"table",attrs:{data:e.data}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{property:"caption",label:"组件标识"}}),n("el-table-column",{attrs:{property:"type",label:"组件类型"}}),n("el-table-column",{attrs:{property:"label",label:"组件名称"}})],1)},_a=[],Ca=n("6a5d"),Sa=Ca["a"],Na=Object(v["a"])(Sa,Da,_a,!1,null,null,null),La=Na.exports,$a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",{attrs:{data:e.data,fit:""}},[n("el-table-column",{attrs:{label:"组件名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.label))])]}}])}),n("el-table-column",{attrs:{label:"元数据代码"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{on:{change:function(n){return e.changeKey(n,t.row)}},model:{value:t.row.mdkey,callback:function(n){e.$set(t.row,"mdkey",n)},expression:"scope.row.mdkey"}},e._l(e.dict,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)]}}])})],1)},Ia=[],Ta=n("e2a9"),Oa=Ta["a"],Ea=Object(v["a"])(Oa,$a,Ia,!1,null,null,null),ja=Ea.exports,Pa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100%"}},[n("el-aside",{staticStyle:{overflow:"auto",height:"100%",border:"1px solid #d4d4d4"},attrs:{width:"30%"}},[n("el-table",{ref:"table",attrs:{data:e.buttonsTable,"highlight-current-row":""},on:{"current-change":e.currentChangeHandler}},[n("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),n("el-table-column",{attrs:{label:"按钮名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.text))])]}}])})],1)],1),n("el-main",{staticStyle:{padding:"0px",border:"1px solid #d4d4d4","margin-left":"10px"}},[n("el-tree",{ref:"tree",attrs:{"node-key":"_id","show-checkbox":"","default-expand-all":"","expand-on-click-node":!1,"check-on-click-node":!0,data:e.treeData,props:e.treeProps},on:{"check-change":e.checkChangeHandler}})],1)],1)},Ba=[],Ma=n("9d7a"),Ra=Ma["a"],Aa=Object(v["a"])(Ra,Pa,Ba,!1,null,null,null),za=Aa.exports,Va=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100%"}},[n("el-aside",{staticStyle:{overflow:"auto",height:"100%"},attrs:{width:"35%"}},[n("div",{staticStyle:{overflow:"auto",height:"100%"}},[n("el-tree",{attrs:{data:e.treeData,props:e.defaultProps,"default-expand-all":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,i=t.data;return n("span",{staticClass:"custom-tree-node"},[n("i",{staticClass:"iconfont icon-biaodanzujian-shurukuang",staticStyle:{"margin-right":"5px"}}),n("span",{on:{dblclick:function(t){return e.toList(a,i)}}},[e._v(e._s(a.label))]),i.field?n("span",{staticStyle:{color:"red"},on:{dblclick:function(t){return e.toList(a,i)}}},[e._v("(字段:"+e._s(i.field)+")")]):e._e()])}}])})],1)]),n("el-main",{staticStyle:{padding:"0px"}},[n("el-container",[n("el-main",[n("el-table",{attrs:{data:e.tableData,border:"","highlight-current-row":!0}},[n("el-table-column",{attrs:{prop:"fieldCaption",label:"字段描述"}}),n("el-table-column",{attrs:{prop:"field",label:"字段名称"}}),n("el-table-column",{attrs:{label:"排序类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{model:{value:t.row.sortType,callback:function(n){e.$set(t.row,"sortType",n)},expression:"scope.row.sortType"}},[n("el-option",{attrs:{value:"asc",label:"升序"}}),n("el-option",{attrs:{value:"desc",label:"降序"}})],1)]}}])}),n("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("dsf-button",{attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"},on:{click:function(n){return n.stopPropagation(),e.remove(t.row)}}}),n("dsf-button",{attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"},on:{click:function(n){return n.stopPropagation(),e.up(t.row)}}}),n("dsf-button",{attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"},on:{click:function(n){return n.stopPropagation(),e.down(t.row)}}})]}}])})],1)],1)],1)],1)],1)},qa=[],Fa=n("a9ea"),Ka=Fa["a"],Ha=Object(v["a"])(Ka,Va,qa,!1,null,null,null),Ga=Ha.exports,Ua=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100%"}},[n("el-aside",{staticStyle:{overflow:"auto",height:"100%"},attrs:{width:"25%"}},[n("div",{staticStyle:{overflow:"auto",height:"100%"}},[n("el-tree",{attrs:{data:e.treeData,props:e.defaultProps,"default-expand-all":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,i=t.data;return n("span",{staticClass:"custom-tree-node",on:{dblclick:function(t){return e.toList(a,i)}}},[n("i",{staticClass:"iconfont icon-biaodanzujian-shurukuang",staticStyle:{"margin-right":"5px"}}),n("span",[e._v(e._s(a.label))]),i.field?n("span",{staticStyle:{color:"red"}},[e._v("(字段:"+e._s(i.field)+")")]):e._e()])}}])})],1)]),n("el-main",{staticStyle:{padding:"0px"}},[n("el-container",[n("el-main",[n("el-table",{attrs:{data:e.tableData,stripe:"","highlight-current-row":!0,"row-key":e.getRowId,"tree-props":{children:"children"}}},[n("el-table-column",{attrs:{width:"30",align:"center"}}),n("el-table-column",{attrs:{label:"名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.fieldCaption,callback:function(n){e.$set(t.row,"fieldCaption",n)},expression:"scope.row.fieldCaption"}})]}}])}),n("el-table-column",{attrs:{prop:"field",label:"字段名"}}),n("el-table-column",{attrs:{label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{on:{change:function(n){return e.searchTypeChange(n,t.row)}},model:{value:t.row.searchType,callback:function(n){e.$set(t.row,"searchType",n)},expression:"scope.row.searchType"}},e._l(e.options,(function(e){return n("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)]}}])}),n("el-table-column",{attrs:{label:"默认值(选中)"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.defaultValue,callback:function(n){e.$set(t.row,"defaultValue",n)},expression:"scope.row.defaultValue"}})]}}])}),n("el-table-column",{attrs:{label:"布局"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{on:{change:function(n){return e.updateLayout(t.row)}},model:{value:t.row.layout,callback:function(n){e.$set(t.row,"layout",n)},expression:"scope.row.layout"}},[n("el-option",{attrs:{value:"24",label:"整行"}}),n("el-option",{attrs:{value:"12",label:"1/2"}}),n("el-option",{attrs:{value:"8",label:"1/3"}}),n("el-option",{attrs:{value:"6",label:"1/4"}})],1)]}}])}),n("el-table-column",{attrs:{label:"显示方式"},scopedSlots:e._u([{key:"default",fn:function(t){return["enum"==t.row.searchType?n("el-select",{on:{change:function(n){return e.updateModel(t.row)}},model:{value:t.row.model,callback:function(n){e.$set(t.row,"model",n)},expression:"scope.row.model"}},[n("el-option",{attrs:{value:"select",label:"下拉框"}}),n("el-option",{attrs:{value:"tile",label:"平铺"}})],1):e._e(),"text"==t.row.searchType?n("el-select",{model:{value:t.row.model,callback:function(n){e.$set(t.row,"model",n)},expression:"scope.row.model"}},[n("el-option",{attrs:{value:"textbox",label:"文本框"}})],1):e._e(),"datetime"==t.row.searchType?n("el-select",{model:{value:t.row.model,callback:function(n){e.$set(t.row,"model",n)},expression:"scope.row.model"}},[n("el-option",{attrs:{value:"ymd",label:"年月日"}}),n("el-option",{attrs:{value:"ym",label:"年月"}})],1):e._e()]}}])}),n("el-table-column",{attrs:{label:"操作符"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{model:{value:t.row.operator,callback:function(n){e.$set(t.row,"operator",n)},expression:"scope.row.operator"}},["enum"==t.row.searchType?[n("el-option",{attrs:{label:"包含",value:"in"}}),n("el-option",{attrs:{label:"区间",value:"between"}})]:"text"==t.row.searchType?[n("el-option",{attrs:{label:"匹配",value:"like"}}),n("el-option",{attrs:{label:"匹配开始字符",value:"slike"}}),n("el-option",{attrs:{label:"匹配结尾字符",value:"elike"}})]:"datetime"==t.row.searchType?[n("el-option",{attrs:{label:"大于",value:"gt"}}),n("el-option",{attrs:{label:"小于",value:"lt"}}),n("el-option",{attrs:{label:"大于等于",value:"gteq"}}),n("el-option",{attrs:{label:"小于等于",value:"lteq"}}),n("el-option",{attrs:{label:"区间",value:"between"}})]:e._e()],2)]}}])}),n("el-table-column",{attrs:{label:"操作",width:"130px",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[["enum"==t.row.searchType?n("dsf-button",{attrs:{title:"选项配置",size:"small","btn-style":"icon-text",icon:"shezhi"},on:{click:function(n){return n.stopPropagation(),e.settingEnumItems(t.row)}}}):e._e(),n("dsf-button",{attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"},on:{click:function(n){return n.stopPropagation(),e.remove(t.row)}}}),n("dsf-button",{attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"},on:{click:function(n){return n.stopPropagation(),e.up(t.row)}}}),n("dsf-button",{attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"},on:{click:function(n){return n.stopPropagation(),e.down(t.row)}}})]]}}])})],1)],1)],1)],1)],1)},Ya=[],Wa=n("ce58"),Ja=Wa["a"],Xa=Object(v["a"])(Ja,Ua,Ya,!1,null,null,null),Qa=Xa.exports,Za=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100%"}},[n("el-main",{staticStyle:{padding:"0px"}},[n("el-form",{ref:"form",attrs:{inline:!0,model:e.formData,"label-width":"100px"}}),n("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"静态数据",name:"static"}},[n("div",{staticStyle:{height:"400px",overflow:"auto"}},[n("div",{staticStyle:{"margin-bottom":"5px",float:"right"}},[n("dsf-button",{attrs:{size:"small",icon:"hao"},on:{click:e.addRow}},[e._v("增加")]),n("dsf-button",{attrs:{size:"small",icon:"guanbi2",type:"auxiliary"}},[e._v("清空")])],1),n("el-table",{attrs:{data:e.values.static,border:""}},[n("el-table-column",{attrs:{label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"选项文本"},model:{value:t.row.text,callback:function(n){e.$set(t.row,"text",n)},expression:"scope.row.text"}})]}}])}),n("el-table-column",{attrs:{label:"值"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"多个值用;分割"},model:{value:t.row.value,callback:function(n){e.$set(t.row,"value",n)},expression:"scope.row.value"}})]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("dsf-button",{attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"},on:{click:function(n){return n.stopPropagation(),e.remove(t.row)}}}),n("dsf-button",{attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"},on:{click:function(n){return n.stopPropagation(),e.up(t.row)}}}),n("dsf-button",{attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"},on:{click:function(n){return n.stopPropagation(),e.down(t.row)}}})]}}])})],1)],1)]),n("el-tab-pane",{attrs:{label:"数据字典",name:"dict"}},[n("div",{staticStyle:{height:"400px",overflow:"auto"}},[n("DesDictDataSelect",{model:{value:e.values.dict,callback:function(t){e.$set(e.values,"dict",t)},expression:"values.dict"}})],1)]),n("el-tab-pane",{attrs:{label:"数据源",name:"dbsource"}},[n("div",{staticStyle:{height:"400px",overflow:"auto"}},[n("DesDbDataSelect",{model:{value:e.values.dbsource,callback:function(t){e.$set(e.values,"dbsource",t)},expression:"values.dbsource"}})],1)]),n("el-tab-pane",{attrs:{label:"接口",name:"interface"}},[n("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入接口地址"},model:{value:e.values.interface,callback:function(t){e.$set(e.values,"interface",t)},expression:"values.interface"}})],1)],1)],1)],1)},ei=[],ti=n("b968"),ni=ti["a"],ai=Object(v["a"])(ni,Za,ei,!1,null,null,null),ii=ai.exports,oi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100%"}},[n("el-aside",{staticStyle:{overflow:"auto",height:"100%"},attrs:{width:"35%"}},[n("div",{staticStyle:{overflow:"auto",height:"100%"}},[n("el-tree",{attrs:{data:e.treeData,props:e.defaultProps,"default-expand-all":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,i=t.data;return n("span",{staticClass:"custom-tree-node"},[n("i",{staticClass:"iconfont icon-biaodanzujian-shurukuang",staticStyle:{"margin-right":"5px"}}),n("span",{on:{dblclick:function(t){return e.toList(a,i)}}},[e._v(e._s(a.label))]),i.field?n("span",{staticStyle:{color:"red"},on:{dblclick:function(t){return e.toList(a,i)}}},[e._v("(字段:"+e._s(i.field)+")")]):e._e()])}}])})],1)]),n("el-main",{staticStyle:{padding:"0px"}},[n("el-container",[n("el-main",[n("el-table",{attrs:{data:e.tableData,border:"","highlight-current-row":!0}},[n("el-table-column",{attrs:{prop:"fieldCaption",label:"字段描述"}}),n("el-table-column",{attrs:{prop:"field",label:"字段名称"}}),n("el-table-column",{attrs:{label:"默认排序类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{model:{value:t.row.sortType,callback:function(n){e.$set(t.row,"sortType",n)},expression:"scope.row.sortType"}},[n("el-option",{attrs:{value:"",label:"不参与"}}),n("el-option",{attrs:{value:"asc",label:"升序"}}),n("el-option",{attrs:{value:"desc",label:"降序"}})],1)]}}])}),n("el-table-column",{attrs:{prop:"column",label:"对应列表的列"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{model:{value:t.row.column,callback:function(n){e.$set(t.row,"column",n)},expression:"scope.row.column"}},[n("el-option",{attrs:{value:"",label:""}}),e._l(e.listColumns,(function(e){return n("el-option",{key:e.columnId,attrs:{value:e.columnId,label:e.label}})}))],2)]}}])}),n("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("dsf-button",{attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"},on:{click:function(n){return n.stopPropagation(),e.remove(t.row)}}}),n("dsf-button",{attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"},on:{click:function(n){return n.stopPropagation(),e.up(t.row)}}}),n("dsf-button",{attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"},on:{click:function(n){return n.stopPropagation(),e.down(t.row)}}})]}}])})],1)],1)],1)],1)],1)},si=[],li=n("6070"),ri=li["a"],ci=Object(v["a"])(ri,oi,si,!1,null,null,null),ui=ci.exports,di=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-data-select",staticStyle:{height:"100%",overflow:"auto"}},[n("dsf-tree-select",{attrs:{"tree-data":e.treeData,loading:e.loading[0],"default-checked-key":e.defaultCheckedKey,multiple:e.multiple,"search-control":e.searchControl,theme:e.theme,"node-key":"ID","node-name":"label","default-expand-all":""},on:{"choose-key":e.chooseKey,"choose-node":e.chooseNode}})],1)},hi=[],pi={name:"DesDbDataSelect",components:{DsfTreeSelect:Zt["a"]},props:{value:{type:Object,default:function(){return{key:null,node:null}}},theme:{type:String,default:"theme2"},searchControl:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1}},data:function(){return{loading:!1,treeData:[],defaultCheckedKey:"",node:null}},created:function(){this.initValue(),this.postData(),this.value.key&&(this.defaultCheckedKey=this.value.key||"")},methods:{initValue:function(){this.multiple?this.value.key&&"array"!==dsf.type(this.value.key)&&this.updateValue({key:[this.value.key],node:[this.value.node]}):this.value.key&&"array"===dsf.type(this.value.key)&&this.updateValue({key:this.value.key[0],node:this.value.node[0]})},postData:function(){var e=this;this.loading=!0,this.$http.get("/rm/list/ds",{namespace:""}).done((function(t){t.success?e.treeData=t.data.map((function(t){return e.dataFormat(t)})):dsf.layer.message("请求异常！",!1)})).always((function(){e.loading=!1}))},dataFormat:function(e){var t=this,n=e.name,a=e.ID,i=e.type_value,o=e.children,s={label:n,ID:a,nocheck:"3"!==i&&"8"!==i,iconSkin:""};return o?s.children=o.map((function(e){return t.dataFormat(e)})):s.nocheck&&(s.iconSkin="_special"),s},chooseKey:function(e){var t=this;setTimeout((function(){t.updateValue({key:e,node:t.node})}),20)},chooseNode:function(e){this.node=e},updateValue:function(e){this.$emit("input",e),this.$emit("change",e)}}},fi=pi,mi=Object(v["a"])(fi,di,hi,!1,null,"ade41840",null),gi=mi.exports,yi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-data-select",staticStyle:{height:"100%",overflow:"auto"}},[n("dsf-tree-select",{attrs:{"tree-data":e.treeData,loading:e.loading[0],"default-checked-key":e.defaultCheckedKey,multiple:e.multiple,"search-control":e.searchControl,theme:e.theme,"node-key":"ID","node-name":"label","default-expand-all":""},on:{"choose-key":e.chooseKey,"choose-node":e.chooseNode}})],1)},xi=[],vi={name:"DesDictDataSelect",components:{DsfTreeSelect:Zt["a"]},props:{value:{type:Object,default:function(){return{key:null,node:null}}},theme:{type:String,default:"theme2"},searchControl:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1}},data:function(){return{loading:!1,treeData:[],defaultCheckedKey:"",node:null}},created:function(){this.initValue(),this.postData(),this.value.key&&(this.defaultCheckedKey=this.value.key||"")},methods:{initValue:function(){this.multiple?this.value.key&&"array"!==dsf.type(this.value.key)&&this.updateValue({key:[this.value.key],node:[this.value.node]}):this.value.key&&"array"===dsf.type(this.value.key)&&this.updateValue({key:this.value.key[0],node:this.value.node[0]})},postData:function(){var e=this;this.loading=!0,this.$http.get("/rm/list/dataDic").done((function(t){t.success?e.treeData=t.data.map((function(t){return e.dataFormat(t)})):dsf.layer.message("请求异常！",!1)})).always((function(){e.loading=!1}))},dataFormat:function(e){var t=this,n=e.name,a=e.dsfa_rm_id,i=e.type_value,o=e.children,s={label:n,ID:a,nocheck:"5"!==i,iconSkin:""};return o?s.children=o.map((function(e){return t.dataFormat(e)})):s.nocheck&&(s.iconSkin="_special"),s},chooseKey:function(e){var t=this;setTimeout((function(){t.updateValue({key:e,node:t.node})}),20)},chooseNode:function(e){this.node=e},updateValue:function(e){this.$emit("input",e),this.$emit("change",e)}}},bi=vi,wi=Object(v["a"])(bi,yi,xi,!1,null,"78a47328",null),ki=wi.exports,Di=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:!0}},[n("el-table-column",{attrs:{label:"",width:"35"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-radio",{attrs:{label:t.row._id},model:{value:e.radioId,callback:function(t){e.radioId=t},expression:"radioId"}})]}}])}),n("el-table-column",{attrs:{label:"规则名称"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(" "+e._s(n["dsfa_number_rule.name"])+" ")]}}])})],1)},_i=[],Ci={name:"DesNumeration",mixins:[H["a"]],data:function(){return{tableData:[],loading:!1,param:{pageNum:1,pageSize:1e3,namespace:"dsfa.number.rule",pageName:"list"},radioId:this.currentData}},created:function(){this.initData()},methods:{initData:function(){var e=this;this.loading=!0,this.$http.get("meta/list/data",this.param).done((function(t){t.success?e.tableData=t.data:dsf.layer.message(t.message||"服务器异常",!1)})).error((function(e){dsf.layer.message(e.message||"服务器异常",!1)})).always((function(){e.loading=!1}))},yes:function(){return this.radioId||dsf.layer.message("请选择一个编号规则",!1),this.radioId}}},Si=Ci,Ni=Object(v["a"])(Si,Di,_i,!1,null,null,null),Li=Ni.exports,$i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",{staticStyle:{padding:"10px 0","text-align":"right"}},[n("DsfButton",{on:{click:e.addRow}},[e._v("新增行")]),n("DsfButton",{on:{click:e.addCol}},[e._v("新增列")])],1),n("el-main",{staticStyle:{padding:"0"}},[n("table",{staticClass:"table"},[n("tr",[n("td",{staticStyle:{width:"100px","text-align":"center"}},[n("div",{staticClass:"size-title"},[e._v(" 宽度\\高度 ")])]),e._l(e.colNum,(function(t){return n("td",{key:t},[n("dsf-textbox",{attrs:{"show-label":!1},model:{value:e.widths[t-1],callback:function(n){e.$set(e.widths,t-1,n)},expression:"widths[$index-1]"}})],1)}))],2),e._l(e.tableData,(function(t,a){return n("tr",{key:a},[n("td",[n("dsf-textbox",{attrs:{"show-label":!1},model:{value:e.heights[a],callback:function(t){e.$set(e.heights,a,t)},expression:"heights[$index]"}})],1),e._l(t,(function(e,t){return n("td",{key:t,staticStyle:{"text-align":"center"}})}))],2)}))],2)])],1)},Ii=[],Ti=n("0f7f"),Oi=Ti["a"],Ei=(n("9f16"),Object(v["a"])(Oi,$i,Ii,!1,null,"4eb7ac35",null)),ji=Ei.exports,Pi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"event-setting"},[n("div",{staticClass:"left"},[n("MonacoEditor",{ref:"editor",attrs:{language:e.language},on:{mounted:e.editorLoaded}})],1),n("div",{staticClass:"right"},[n("el-collapse",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.list,(function(t,a){return n("el-collapse-item",{key:a,attrs:{title:t.title,name:a}},[n("SelectTree",{attrs:{"tree-data":t.tree,"hide-checkbox":!0},on:{change:e.change}})],1)})),1)],1)])},Bi=[],Mi=n("2909"),Ri=n("3835"),Ai=n("bf21"),zi={name:"EventSetting",components:{SelectTree:Ai["a"]},props:{code:{type:String,default:""},language:{type:String,default:"javascript"},isEvent:{type:Boolean,default:function(){return!1}}},data:function(){return{activeName:[0],list:[{title:"上下文",tree:[]},{title:"公用函数",tree:[]}]}},created:function(){this.init()},mounted:function(){},methods:{getContent:function(){var e;return e="html"==this.language?dsf.escapeFilter(this.$refs.editor.getContent()):this.$refs.editor.getContent(),this.isEvent?{Expression:e}:e},editorLoaded:function(){var e=this.code;"html"==this.language&&(e=dsf.unescapeHTML(e)),this.$refs.editor.setContent(e)},init:function(){var e=this;this.$http.all([this.$http.get("./static/pd_other/context.json"),this.$http.get("./static/pd_other/utilityFunction.json")]).then((function(t){var n,a,i=Object(Ri["a"])(t,2),o=i[0].Context,s=i[1].Function;(n=e.list[0].tree).push.apply(n,Object(Mi["a"])(o)),(a=e.list[1].tree).push.apply(a,Object(Mi["a"])(s))})).catch((function(e){console.log(e)}))},change:function(e){e&&e.Key&&this.$refs.editor.insertContent(e.Key)}}},Vi=zi,qi=(n("77ec"),Object(v["a"])(Vi,Pi,Bi,!1,null,"674c8922",null)),Fi=qi.exports,Ki=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"range-rule"},[n("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.config.selectTab,callback:function(t){e.$set(e.config,"selectTab",t)},expression:"config.selectTab"}},[n("el-tab-pane",{staticClass:"dept",attrs:{label:"部门+角色",name:"0"}},[n("div",{staticClass:"dept_left"},[n("div",{staticClass:"top"},[n("el-radio",{attrs:{label:"assign"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 指定部门 ")]),n("el-radio",{attrs:{label:"extend"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 继承节点部门 ")]),n("el-radio",{attrs:{label:"super"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 高级模式 ")]),n("el-checkbox",{staticClass:"send-to-people",model:{value:e.config.IsUser,callback:function(t){e.$set(e.config,"IsUser",t)},expression:"config.IsUser"}},[e._v(" 发送到人 ")]),n("el-checkbox",{staticClass:"is-deep",model:{value:e.config.IsDeep,callback:function(t){e.$set(e.config,"IsDeep",t)},expression:"config.IsDeep"}},[e._v(" 深度遍历 ")])],1),n("div",{staticClass:"content-box",class:{assign:"assign"===e.config.model}},[n("SelectTree",{directives:[{name:"show",rawName:"v-show",value:"assign"==e.config.model,expression:"config.model == 'assign'"}],attrs:{"tree-data":e.deptData,select:e.selectDept},on:{"update:select":function(t){e.selectDept=t}}}),"extend"===e.config.model?n("SelectTable",{attrs:{data:e.nodesData,select:e.selectExtends,columns:e.deptColumns},on:{"update:select":function(t){e.selectExtends=t}}}):e._e(),"super"==e.config.model?n("div",{staticClass:"super"},[n("EventSetting",{ref:"editor",attrs:{language:e.language,code:e.code}})],1):e._e()],1)]),n("div",{staticClass:"dept_right"},[n("SelectTree",{attrs:{"tree-data":e.roleData,select:e.selectRole},on:{"update:select":function(t){e.selectRole=t}}})],1)]),n("el-tab-pane",{attrs:{label:"直接选人",name:"1"}},[n("div",{staticClass:"dept_left"},[n("div",{staticClass:"top"},[n("el-radio",{attrs:{label:"assign"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 指定人员 ")]),n("el-radio",{attrs:{label:"extend"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 继承节点经办人 ")]),n("el-radio",{attrs:{label:"super"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 高级模式 ")])],1),n("div",{staticClass:"content-box",class:{assign:"assign"===e.config.model}},[n("SelectTree",{directives:[{name:"show",rawName:"v-show",value:"assign"==e.config.model,expression:"config.model == 'assign'"}],attrs:{"tree-data":e.peopleData,multi:!0,select:e.selectPeople},on:{"update:select":function(t){e.selectPeople=t}}}),"extend"===e.config.model?n("SelectTable",{attrs:{data:e.nodesData,select:e.selectExtendPerson,columns:e.noLevelColumns},on:{"update:select":function(t){e.selectExtendPerson=t}}}):e._e(),"super"==e.config.model?n("div",{staticClass:"super"},[n("EventSetting",{ref:"personEditor",attrs:{language:e.language,code:e.code}})],1):e._e()],1)])]),n("el-tab-pane",{attrs:{label:"行政岗位",name:"2"}},[n("div",{staticClass:"dept_left"},[n("div",{staticClass:"top"},[n("el-radio",{attrs:{label:"assign"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 指定岗位 ")]),n("el-radio",{attrs:{label:"super"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 高级模式 ")]),n("el-checkbox",{staticClass:"send-to-people",model:{value:e.config.IsUser,callback:function(t){e.$set(e.config,"IsUser",t)},expression:"config.IsUser"}},[e._v(" 发送到人 ")]),n("el-checkbox",{staticClass:"is-deep",model:{value:e.config.IsDeep,callback:function(t){e.$set(e.config,"IsDeep",t)},expression:"config.IsDeep"}},[e._v(" 深度遍历 ")])],1),n("div",{staticClass:"content-box",class:{assign:"assign"===e.config.model}},["assign"===e.config.model?n("SelectTable",{attrs:{data:e.jobData,select:e.selectJobs,columns:e.jobColumns},on:{"update:select":function(t){e.selectJobs=t}}}):e._e(),"super"==e.config.model?n("div",{staticClass:"super"},[n("EventSetting",{ref:"jobEditor",attrs:{language:e.language,code:e.code}})],1):e._e()],1)])]),n("el-tab-pane",{staticClass:"dept",attrs:{label:"人+关系",name:"3",lazy:!0}},[n("div",{staticClass:"dept_left"},[n("div",{staticClass:"top"},[n("el-radio",{attrs:{label:"assign"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 继承节点经办人 ")]),n("el-radio",{attrs:{label:"super"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 高级模式 ")]),n("el-checkbox",{staticClass:"send-to-people",model:{value:e.config.IsUser,callback:function(t){e.$set(e.config,"IsUser",t)},expression:"config.IsUser"}},[e._v(" 发送到人 ")])],1),n("div",{staticClass:"content-box"},["assign"===e.config.model?n("SelectTable",{attrs:{data:e.nodesData,select:e.selectAgents,columns:e.noLevelColumns},on:{"update:select":function(t){e.selectAgents=t}}}):e._e(),"super"==e.config.model?n("div",{staticClass:"super"},[n("EventSetting",{ref:"relationEditor",attrs:{language:e.language,code:e.code}})],1):e._e()],1)]),n("div",{staticClass:"dept_right"},[n("SelectTree",{attrs:{"tree-data":e.roleData,select:e.selectRelation},on:{"update:select":function(t){e.selectRelation=t}}})],1)])],1),n("div",{staticClass:"bottom"},[n("div",{staticClass:"btnBox"},[n("el-button",{staticClass:"ds-button auxiliary",attrs:{icon:"iconfont icon-xia",size:"small"},on:{click:e.chooseFun}},[e._v(" 选择 ")]),n("el-button",{staticClass:"ds-button auxiliary",attrs:{icon:"iconfont icon-delete",size:"small"},on:{click:e.clearData}},[e._v(" 清空 ")])],1),n("div",{staticClass:"table-box"},[n("SelectTable",{attrs:{data:e.config.tableResult.Rule||[],columns:e.resultColumns}})],1)])],1)},Hi=[],Gi=(n("99af"),n("7db0"),n("a341")),Ui=n("5837"),Yi={name:"RangeRule",components:{SelectTree:Ai["a"],SelectTable:Ui["a"]},props:{nodes:{type:Array,default:function(){return[]}},checked:{type:Object,default:function(){return{}}},code:{type:String,default:""},language:{type:String,default:"javascript"},value:{type:Object,default:function(){return{}}}},data:function(){return{config:{selectTab:"0",model:"assign",IsDeep:!1,IsUser:!0,tableResult:{Type:"",IsUser:1,Rule:[]},chooseDataObj:{}},rangeType:null,deptData:[],nodesData:[],roleData:[],peopleData:[],extendPersonData:[],jobData:[{label:1,desc:2}],selectDept:null,selectRole:null,selectExtends:[],selectPeople:null,selectExtendPerson:[],selectJobs:[],selectAgents:[],selectRelation:null,deptOptions:[{label:"当前部门",value:-1},{label:"子机构",value:0},{label:"一级部门",value:1},{label:"二级部门",value:2},{label:"三级部门",value:3}],deptColumns:[],resultColumns:[{prop:"name",label:"范围"},{prop:"IsSelected",label:"状态",width:"140",options:Object(Gi["f"])()},{label:"操作",width:"100",operate:!0}],noLevelColumns:[],jobColumns:[{selection:!0,type:"selection",width:50},{prop:"label",label:"岗位名称"},{prop:"desc",label:"备注"}]}},created:function(){var e=[{type:"index",width:44},{selection:!0,type:"selection",width:50},{prop:"label",label:"范围"}];this.deptColumns=[].concat(e,[{prop:"level",label:"级别",options:this.deptOptions}]),this.noLevelColumns=[].concat(e),this.initExtendDataForOrg(),this.initAssignDataForOrg(),this.getFlowPosition(),this.initAssignDataForPeople(),this.initData()},mounted:function(){},methods:{getContent:function(){return this.config.tableResult},tabsChange:function(e){this.clearData()},initData:function(){var e=this,t=this.value&&dsf.mix(!0,[],this.value.Rule)||[];t&&t.length>0&&(this.config.tableResult=dsf.mix(!0,{},this.value),t.forEach((function(t){var n,a=e.value,i=e.config;12===a.Type?(i.model="super",i.selectTab="2",n="jobAdvanced"):21===a.Type?(i.model="assign",i.selectTab="1",n=t.id):22===a.Type?(i.model="extend",i.selectTab="1",n=t.id):23===a.Type?(i.model="super",i.selectTab="1",n="personAdvanced"):31===a.Type?(i.model="assign",i.selectTab="0",n=t.DeptID+"-"+t.RoleID):32===a.Type?(i.model="extend",i.selectTab="0",n=t.NodeID+"-"+t.RoleID):33===a.Type?(i.model="super",i.selectTab="0",n="role-"+t.RoleID):41===a.Type?(i.model="assign",i.selectTab="3",n="relation"+t.id):42===a.Type?(i.model="super",i.selectTab="3",n="relationAdvanced"):n=t.id,e.config.chooseDataObj[n]=t})))},initAssignDataForOrg:function(){var e=this;this.$http.get("oua/getDeptByCurUnit",{}).then((function(t){if(t.data.success){var n=e.formatData(t.data.data);e.deptData=[n]}}))},initExtendDataForOrg:function(){var e=this.nodes,t=[];t.push({id:"DS_CUR_SEND_NODE",label:"当前发送节点",level:1});for(var n=0;n<e.length;n++)t.push({id:e[n].id,label:e[n].name,level:1});this.nodesData=t},initAssignDataForPeople:function(){var e=this;this.$http.get("oua/getUserByCurUnit",{}).then((function(t){if(t.data.success){var n=e.formatData(t.data.data,"1");e.peopleData=[n]}}))},getFlowPosition:function(){var e=this;this.$http.get("oua/getRole",{}).then((function(t){if(t.data.success){var n=[];t.data.data.forEach((function(t){n.push(e.formatData(t,"2"))})),e.roleData=n}}))},formatData:function(e,t){if(e.label=e.NAME||e._name,e.id=e.id||e._id,e.type=e.TYPE||e._type,t&&(e.disabled=e.type!=t),e.attributes={NAME:e.label,id:e.id,FID:e.pid,type:e.type},delete e.NAME,delete e.Atts,delete e.TYPE,delete e.FID,e.children)for(var n=0;n<e.children.length;n++)this.formatData(e.children[n],t);return e},handleClick:function(e){e.index;this.config.model="assign",this.clearData()},editorLoaded:function(e){var t=this.code;"html"==this.language&&(t=dsf.unescapeHTML(t)),this.$refs[e].setContent(t)},deleteRow:function(e){12===e.Type?delete this.config.chooseDataObj["jobAdvanced"]:23===e.Type?delete this.config.chooseDataObj["personAdvanced"]:31===e.Type?delete this.config.chooseDataObj[e.DeptID+"-"+e.RoleID]:32===e.Type?delete this.config.chooseDataObj[e.NodeID+"-"+e.RoleID]:33===e.Type?delete this.config.chooseDataObj["role-"+e.RoleID]:41===e.Type?delete this.config.chooseDataObj["relation"+e.id]:42===e.Type?delete this.config.chooseDataObj["relationAdvanced"]:delete this.config.chooseDataObj[e.id]},chooseFun:function(){var e=this;if(this.verify()){var t=this.config;if("0"===t.selectTab)if("assign"===t.model)this.addRule(this.selectDept,this.selectRole);else if("extend"===t.model)this.selectExtends.forEach((function(t){e.addRule(t,e.selectRole)}));else{var n={label:"表达式选角色",exp:this.$refs.editor.getContent(),id:dsf.uuid(32)};this.addRule(n,this.selectRole)}else if("1"===t.selectTab)if("assign"===t.model)this.selectPeople.forEach((function(t){e.addPerson(t)}));else if("extend"===t.model)this.selectExtendPerson.forEach((function(t){e.addPerson(t)}));else{var a={label:"表达式选人",exp:this.$refs.personEditor.getContent(),id:dsf.uuid(32)};this.addPerson(a)}else if("2"===t.selectTab){if("super"===t.model){var i={label:"表达式选岗位"+(t.IsUser?"(发送到人)":""),exp:this.$refs.jobEditor.getContent(),id:dsf.uuid(32)};this.addJob(i)}}else if("assign"===t.model)this.selectAgents.forEach((function(t){e.addRelation(t,e.selectRelation)}));else if("super"===t.model){var o={label:"表达式选关系",exp:this.$refs.relationEditor.getContent(),id:dsf.uuid(32)};this.addRelation(o,this.selectRelation)}}},verify:function(){var e=this.config;if("0"===e.selectTab){if("assign"===e.model&&!this.selectDept)return dsf.layer.alert("请选择左侧指定部门节点"),!1;if("extend"===e.model&&0===this.selectExtends.length)return dsf.layer.alert("请选择继承的节点部门"),!1;if(!this.selectRole)return dsf.layer.alert("请选择右侧角色节点"),!1}else if("1"===e.selectTab){if("assign"===e.model&&!this.selectPeople)return dsf.layer.alert("请选择指定人员"),!1;if("extend"===e.model&&0===this.selectExtendPerson.length)return dsf.layer.alert("请选择继承节点经办人"),!1}else if("2"===e.selectTab){if("assign"===e.model)return dsf.layer.alert("暂无真实数据"),!1}else{if("assign"===e.model&&0===this.selectAgents.length)return dsf.layer.alert("请选择左侧继承节点经办人"),!1;if(!this.selectRelation)return dsf.layer.alert("请选择右侧关系节点"),!1}return!0},addRule:function(e,t){var n=this.config,a="";a+=n.IsDeep?"深度遍历":"",a+=n.IsDeep&&n.IsUser?",":"",a+=n.IsUser?"发送到人":"";var i,o="".concat(e&&e.label,"-").concat(this.getDeptLevel(e&&e.level)).concat(t.label).concat(a?"("+a+")":""),s={id:dsf.uuid(32),name:o,IsDeep:n.IsDeep?1:0,IsUser:n.IsUser?1:0,IsSelected:0,RoleID:t.id,RoleName:t.label};"assign"===n.model?(Object.assign(s,{Type:31,DeptID:e.id,DeptName:e.label}),i=s.DeptID+"-"+s.RoleID):"extend"===n.model?(Object.assign(s,{NodeID:e.id,NodeName:e.label,Type:32,Level:e.level,DeptName:e.label}),i=s.NodeID+"-"+s.RoleID):(Object.assign(s,{Type:33,exp:e.exp}),i="role-"+t.id),this.addToTable(n,i,s)},addPerson:function(e){var t,n=this.config,a={id:e.id,name:e.label,IsSelected:0,IsUser:1};"assign"===n.model?(Object.assign(a,{UserID:e.id,UserName:e.label,DeptID:e.UnitID,DeptName:e.UnitName,Type:21}),t=a.id):"extend"===n.model?(a.Type=22,t=a.id):(Object.assign(a,{exp:e.exp,Type:23}),t="personAdvanced"),this.addToTable(n,t,a)},addJob:function(e){var t,n=this.config,a={id:e.id,name:e.label,IsDeep:n.IsDeep?1:0,IsUser:n.IsUser?1:0,IsSelected:0};"super"===n.model&&(Object.assign(a,{JobID:e.id,JobName:e.label,exp:e.exp,Type:12}),t="jobAdvanced"),this.addToTable(n,t,a)},addRelation:function(e,t){var n,a=this.config,i="".concat(e&&e.label,"-").concat(t.label).concat(a.IsUser?"(发送到人)":""),o={id:e.id,name:i,IsUser:a.IsUser?1:0,RelationID:t.id,RelationName:t.label,IsSelected:0};"assign"===a.model?(Object.assign(o,{NodeID:e.id,NodeName:e.label,Type:41}),n="relation"+e.id):"super"===a.model&&(o.Type=42,n="relationAdvanced"),this.addToTable(a,n,o)},addToTable:function(e,t,n){e.chooseDataObj[t]||(e.tableResult.IsUser=n.IsUser,e.tableResult.Type=n.Type,e.chooseDataObj[t]=n,e.tableResult.Rule.push(n))},getDeptLevel:function(e){if(!e||"0"!==this.config.selectTab)return"";var t=this.deptOptions.find((function(t){return t.value===e}));return t.label+"-"},clearData:function(){this.config.tableResult.Type=31,this.config.tableResult.IsUser=0,this.config.tableResult.Rule=[],this.config.chooseDataObj={}}}},Wi=Yi,Ji=(n("0d29"),Object(v["a"])(Wi,Ki,Hi,!1,null,"2719d640",null)),Xi=Ji.exports,Qi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"summary"},[n("p",[n("span",[e._v("汇总比例：")]),n("el-input-number",{attrs:{"controls-position":"right",min:0,max:100},model:{value:e.config.Proportion,callback:function(t){e.$set(e.config,"Proportion",t)},expression:"config.Proportion"}}),n("span",[e._v("%")])],1),n("div",{staticClass:"table"},[n("SelectTable",{attrs:{data:e.nodesData,select:e.selectNodes,columns:e.columns},on:{"update:select":function(t){e.selectNodes=t}}})],1)])},Zi=[],eo={name:"Summary",components:{SelectTable:Ui["a"]},props:{lines:{type:Array,default:function(){return[]}},checked:{type:Object,default:function(){return{}}},value:{type:Object,default:function(){return{}}}},data:function(){return{config:{Proportion:0,GatherRange:""},nodesData:[],selectNodes:[],columns:[{selection:!0,type:"selection",width:50},{prop:"label",label:"连线名称",align:"left"}]}},created:function(){this.initTabel()},mounted:function(){},methods:{getContent:function(){return this.config.GatherRange=this.selectNodes.map((function(e){return e.value})).join(","),this.config},initTabel:function(){var e=this,t=this.value,n=t.GatherRange,a=t.Proportion,i=n&&n.split(",")||[];this.config.Proportion=a||0,this.selectNodes=[],this.nodesData=[];for(var o=function(t){var n=e.lines[t];if(n.id!=e.checked.id){var a={value:n.id,label:n.name};e.nodesData.push(a),i&&i.length>0&&i.forEach((function(t){t===n.id&&e.selectNodes.push(a)}))}},s=0;s<this.lines.length;s++)o(s)}}},to=eo,no=(n("3a9e"),Object(v["a"])(to,Qi,Zi,!1,null,"b8b543fe",null)),ao=no.exports,io=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"send-condition"},[n("div",{staticClass:"editor"},[n("EventSetting",{ref:"event",attrs:{language:e.language,code:e.config.Condition.Expression}})],1),n("div",{staticClass:"table"},[n("SelectTable",{attrs:{data:e.config.Condition.Switch.ItemValue,columns:e.columns}})],1)])},oo=[],so={name:"SendCondition",components:{SelectTable:Ui["a"]},props:{lines:{type:Array,default:function(){return[]}},checked:{type:Object,default:function(){return{}}},value:{type:Object,default:function(){return{}}},code:{type:String,default:""},language:{type:String,default:"javascript"}},data:function(){return{config:{IsEnabled:"1",Condition:{Expression:"",Switch:{ItemValue:[]}}},selectNodes:[],columns:[{prop:"LineName",label:"连线名称"},{prop:"Type",label:"条件",width:"140",options:[{label:"等于",value:0},{label:"包含",value:1},{label:"被包含",value:2},{label:"大于",value:3},{label:"大于等于",value:4},{label:"小于",value:5},{label:"小于等于",value:6},{label:"范围",value:7},{label:"有效",value:8}]},{prop:"Value",label:"值",fieldType:"input"}]}},created:function(){this.initTabel()},mounted:function(){},methods:{getContent:function(){return this.config.Condition.Expression=this.$refs.event.getContent(),this.config},initTabel:function(){var e,t=this,n=this.value.Condition;n&&n.Switch&&n.Switch.ItemValue&&(e=n.Switch.ItemValue),n&&n.Expression&&(this.config.Condition.Expression=n.Expression);var a={};e&&e.length>0&&e.forEach((function(e){a[e.LineID]=e}));var i=this.config.Condition.Switch.ItemValue,o=this.checked.out;o&&o.length>0&&o.forEach((function(e){t.lines.forEach((function(t){if(t.id===e){var n=a[t.id],o={Value:n&&n.Value||"",Type:n&&n.Type||8,LineID:t.id,LineName:t.name};i.push(o)}}))}))}}},lo=so,ro=(n("7ff6"),Object(v["a"])(lo,io,oo,!1,null,"0541be6e",null)),co=ro.exports,uo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("SelectTree",{attrs:{"tree-data":e.flowData,select:e.selectFlow,checked:e.checked,"show-search":!0},on:{"update:select":function(t){e.selectFlow=t}}})],1)},ho=[],po={name:"ChooseFlow",components:{SelectTree:Ai["a"]},mixins:[H["a"]],data:function(){return{flowData:[],selectFlow:null,checked:[]}},created:function(){this.initFlow()},mounted:function(){},methods:{yes:function(){return this.owner&&(this.owner.metadata.defaultValue={wf_id:this.selectFlow.ID,wf_name:this.selectFlow.name}),this.selectFlow},validate:function(){return!!this.selectFlow||(dsf.layer.message("请选择流程",!1),!1)},initFlow:function(){var e=this;this.$http.get("rm/list/wf",{}).then((function(t){if(t.data.success){var n=t.data.data[0],a=n?e.formatData(t.data.data[0],"0"):null;e.flowData=n?[a]:[],e.currentData&&e.currentData.dsfa_rm_id&&(e.checked=[e.currentData.dsfa_rm_id],e.selectFlow=e.currentData)}}))},formatData:function(e,t){if(e.label=e.name,e.id=e.dsfa_rm_id,t&&(e.disabled=e.type_value===t),"4"!=e.type_value&&(e.nocheck=!0),"4"==e.type_value||e.children||(e.iconSkin="_special"),e.children)for(var n=0;n<e.children.length;n++)this.formatData(e.children[n],t);return e}}},fo=po,mo=Object(v["a"])(fo,uo,ho,!1,null,"560d3d45",null),go=mo.exports,yo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("SelectTree",{attrs:{"tree-data":e.formData,select:e.selectForm,checked:e.checked,"show-search":!0},on:{"update:select":function(t){e.selectForm=t}}})],1)},xo=[],vo={name:"ChooseForm",components:{SelectTree:Ai["a"]},mixins:[H["a"]],data:function(){return{formData:[],selectForm:null,checked:[]}},created:function(){this.initFlow()},mounted:function(){},methods:{yes:function(){return this.selectForm},validate:function(){return!!this.selectForm||(dsf.layer.message("请选择表单",!1),!1)},initFlow:function(){var e=this;this.$http.get("oua/getPage",{},$$webRoot).then((function(t){if(t.data.success){var n=t.data.data,a=[];n.forEach((function(t){a.push(e.formatData(t,"0"))})),e.formData=a}}))},formatData:function(e,t){if(e.label=e.name,e.id=e.dsfa_rm_id,t&&(e.disabled=e.type_value===t),e.children)for(var n=0;n<e.children.length;n++)this.formatData(e.children[n],t);return e}}},bo=vo,wo=(n("12f6"),Object(v["a"])(bo,yo,xo,!1,null,"5ba90ec6",null)),ko=wo.exports,Do=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("div",{staticClass:"ds-tree-box fl-box"},[n("div",{staticClass:"dsf-tree-search"},[n("el-input",{attrs:{placeholder:"输入名称"},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}},[n("i",{staticClass:"iconfont el-input__icon icon-Magnifier",attrs:{slot:"suffix"},slot:"suffix"})]),n("el-button",{staticClass:"ds-button small chooseForm",on:{click:function(t){return e.chooseFlow()}}},[e._v(" 选择流程 ")])],1),n("SelectTree",{attrs:{"tree-data":e.flowData,select:e.selectFlow,checked:e.checked,"show-search":!1,"form-search-key":e.searchKey},on:{"update:select":function(t){e.selectFlow=t}}})],1),n("div",{staticClass:"fr-box"},[n("div",{staticClass:"top"},[n("div",{staticClass:"inline"},[n("label",{staticClass:"form-label"},[e._v("表单名称：")]),n("div",{staticClass:"input-inline",attrs:{title:e.curNode&&e.curNode.pageTitle}},[e._v(" "+e._s(e.curNode&&e.curNode.pageTitle||"暂无")+" ")])]),n("el-button",{staticClass:"ds-button small chooseForm",on:{click:function(t){return e.chooseForm()}}},[e._v(" 选择表单 ")]),n("el-button",{staticClass:"ds-button small applyTo",on:{click:function(t){return e.applyTo()}}},[e._v(" 应用于 ")])],1),n("el-tabs",{staticClass:"tabs",model:{value:e.selectTab,callback:function(t){e.selectTab=t},expression:"selectTab"}},[n("el-tab-pane",{staticClass:"pa",attrs:{label:"元素控制",name:"0"}},[n("SelectTable",{attrs:{data:e.curNode&&e.curNode.ctrls||[],columns:e.eleColumns}})],1),n("el-tab-pane",{attrs:{label:"操作控制",name:"1"}},[n("SelectTable",{attrs:{data:e.curNode&&e.curNode.btns||[],columns:e.btnsColumns}})],1)],1)],1)])},_o=[],Co=n("8a3c"),So=Co["a"],No=(n("14be"),Object(v["a"])(So,Do,_o,!1,null,"de8f9464",null)),Lo=No.exports,$o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-ueditor"},[n("DsfUEditor",{attrs:{value:e.content,"show-label":!1,"$rich-txt-height":320},on:{"editor-change":e.valueChange}})],1)},Io=[],To={name:"RichText",props:{value:{type:String,default:function(){return""}}},data:function(){return{content:""}},created:function(){this.content=this.value},mounted:function(){},methods:{getContent:function(){return this.content},valueChange:function(e,t){this.content=e.data}}},Oo=To,Eo=Object(v["a"])(Oo,$o,Io,!1,null,null,null),jo=Eo.exports,Po=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-set-params"},[n("SelectTable",{attrs:{data:e.data,columns:e.columns}}),n("p",{staticClass:"add-btn"},[n("el-button",{attrs:{type:"danger"},on:{click:e.deleteAll}},[e._v(" 删除所有 ")]),n("el-button",{attrs:{type:"success"},on:{click:e.addRow}},[e._v(" 新增一行 ")])],1)],1)},Bo=[],Mo={name:"SetParams",components:{SelectTable:Ui["a"]},props:{value:{type:Array,default:function(){return[]}}},data:function(){return{data:[],columns:[{prop:"Key",label:"Key",fieldType:"editInput"},{prop:"Value",label:"Value",fieldType:"editInput"},{label:"操作",width:"100",operate:!0}]}},created:function(){this.init()},methods:{getContent:function(){var e=this.data.map((function(e){return{Key:e.Key,Value:e.Value}}));return e},init:function(){this.value&&this.value.length>0?this.data=this.value:this.addRow()},deleteRow:function(){},deleteAll:function(){this.data=[]},addRow:function(){this.data.push({Key:"",KeyEdit:!1,Value:"",ValueEdit:!1})}}},Ro=Mo,Ao=(n("0e6b"),Object(v["a"])(Ro,Po,Bo,!1,null,"578bacc1",null)),zo=Ao.exports,Vo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("SelectTree",{attrs:{"tree-data":e.nodes,select:e.selectFlow,"show-search":!0,multi:!0},on:{"update:select":function(t){e.selectFlow=t}}})],1)},qo=[],Fo={name:"ApplyTo",components:{SelectTree:Ai["a"]},props:{data:{type:Array,default:function(){return[]}}},data:function(){return{nodes:[],selectFlow:[]}},created:function(){var e=dsf.mix(!0,this.data);this.nodes=[this.formatData(e[0])]},mounted:function(){},methods:{yes:function(){return this.selectFlow},formatData:function(e){if(delete e.disabled,e.children)for(var t=0;t<e.children.length;t++)this.formatData(e.children[t]);return e}}},Ko=Fo,Ho=Object(v["a"])(Ko,Vo,qo,!1,null,null,null),Go=Ho.exports;function Uo(e){e.component(W.name,W),e.component(te.name,te),e.component(le.name,le),e.component(pe.name,pe),e.component(be.name,be),e.component(Se.name,Se),e.component(Oe.name,Oe),e.component(Je.name,Je),e.component(nt.name,nt),e.component(rt.name,rt),e.component(ft.name,ft),e.component(Re.name,Re),e.component(bt.name,bt),e.component(Ot.name,Ot),e.component(Rt.name,Rt),e.component(Kt.name,Kt),e.component(an.name,an),e.component(un.name,un),e.component(gn.name,gn),e.component(Ln.name,Ln),e.component(jn.name,jn),e.component(zn.name,zn),e.component(St.name,St),e.component(Jt.name,Jt),e.component(Gn.name,Gn),e.component(Qn.name,Qn),e.component(ia.name,ia),e.component(ua.name,ua),e.component(ga.name,ga),e.component(ka.name,ka),e.component(La.name,La),e.component(ja.name,ja),e.component(za.name,za),e.component(Qa.name,Qa),e.component(ii.name,ii),e.component(gi.name,gi),e.component(ki.name,ki),e.component(Ke.name,Ke),e.component(ji.name,ji),e.component(Fi.name,Fi),e.component(Xi.name,Xi),e.component(ao.name,ao),e.component(co.name,co),e.component(go.name,go),e.component(ko.name,ko),e.component(Lo.name,Lo),e.component(Ga.name,Ga),e.component(ui.name,ui),e.component(Li.name,Li),e.component(jo.name,jo),e.component(zo.name,zo),e.component(Go.name,Go)}var Yo=Uo;function Wo(e){e.use(Yo),e.component($.name,$),e.component(P.name,P),e.component(V.name,V),e.component(q["a"].name,q["a"])}"undefined"!==typeof window&&window.Vue&&Wo(window.Vue);var Jo=Wo,Xo=(n("20eb"),n("970a"),n("5dfc"),n("517e")),Qo=n("022c"),Zo=n("a6a4"),es=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},ts=[],ns={name:"DesignerApp",data:function(){return{themes:dsf.config.defaultTheme}},beforeCreate:function(){},created:function(){},mounted:function(){document.body.classList.add(this.themes)}},as=ns,is=Object(v["a"])(as,es,ts,!1,null,null,null),os=is.exports,ss=n("a026"),ls=n("8c4f"),rs=n("c033"),cs=n("7d45"),us=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"design-view-box"},[n("button",{on:{click:e.test}},[e._v("dfdfd")]),n("el-row",[n("el-col",{attrs:{md:12}},[n("div",{staticStyle:{height:"500px",border:"1px solid red"}})]),n("el-col",{attrs:{md:12}},[n("div",{staticStyle:{height:"250px",border:"1px solid red"}})]),n("el-col",{attrs:{md:12}},[n("div",{staticStyle:{height:"250px",border:"1px solid red"}})])],1)],1)},ds=[],hs={name:"Test",data:function(){return{layout:{ctrlName:"DsfTextbox",readOnly:!1,slots:[]},layout1:{ctrlName:"DsfSelect",readOnly:!1,slots:[]},rows:[{weng:"1"},{weng:"2"}],obj:{weng:"dddd",weng1:"weng3"},props:{readOnly:!1,value:"dddddddddd"},event:{"value-change":function(){}}}},created:function(){},mounted:function(){},updated:function(){console.log("test更新")},methods:{test:function(){this.layout.readOnly=!this.layout.readOnly}}},ps=hs,fs=Object(v["a"])(ps,us,ds,!1,null,null,null),ms=fs.exports,gs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"designerPanel",staticClass:"ds-designer ds-seat-design"},[n("div",{staticClass:"designer-head"},[n("top-tools")],1),n("div",{staticClass:"designer-content"},[n("div",{staticClass:"seat-designer-center"},[n("left-tools"),n("seat-canvas"),n("right-tools")],1)])])},ys=[],xs=n("aabf"),vs=xs["a"],bs=(n("ad76"),Object(v["a"])(vs,gs,ys,!1,null,null,null)),ws=bs.exports,ks=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" 啦啦啦 ")])},Ds=[],_s={name:"SeatView"},Cs=_s,Ss=Object(v["a"])(Cs,ks,Ds,!1,null,"182d030a",null),Ns=Ss.exports,Ls=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticClass:"ds-exam-page",style:"width: "+e.pageWidth+"px"},[n("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.examLoading,expression:"examLoading"}],staticClass:"scroll-content",attrs:{"element-loading-text":"加载试卷中..."}},[n("h2",{staticClass:"ds-font2"},[e._v(e._s(e.examInfoData.name))]),e.examInfoData.remark?n("div",{staticClass:"exam-remark"},[e._v(e._s(e.examInfoData.remark))]):e._e(),e._l(e.examInfoData.questions,(function(t,a){return[n("h3",{key:t.type+a,staticClass:"ds-font3"},[e._v(e._s(e.dsf.math.toChinesNum(++a)+"、"+e.examTitle[t.type]+(t.score&&t.score.total?" (共"+t.score.total+"分)":"")))]),n(e.componentIs[t.type],{key:t.type+a,tag:"component",attrs:{"res-data":t.subjects,"exam-mark-active":e.examMarkActive}})]}))],2),n("el-aside",{staticClass:"ds-exam-aside",style:"width: "+e.asideWidth+"px"},[n("div",{staticClass:"aside-content",style:"width: "+e.asideWidth+"px"},[n("div",{staticClass:"ds-exam-submit",class:{disabled:e.getAllowSubmit},on:{click:e.examPost}},[n("i",{staticClass:"iconfont icon-dui"}),n("p",[e._v("提交试卷")])]),n("div",{staticClass:"ds-exam-time-info"},[n("div",{staticClass:"ds-exam-score"},[n("span",{staticClass:"ds-font4"},[e._v(e._s(e.examInfoData.answer||3!==e.examInfoData.state?"成绩":"剩余时间"))]),e.examInfoData.answer||3!==e.examInfoData.state?n("span",{staticClass:"ds-font2 exam-result"},[e._v(e._s(e.examResult?e.examResult.examScore||"正在阅卷中":1==e.examInfoData.state?"待":2==e.examInfoData.state?"已阅卷":"待阅卷"))]):n("span",{staticClass:"ds-font2",class:{"exam-result":e.examInfoData.answer}},[e._v(e._s(e.getTime))])]),n("div",{staticClass:"ds-exam-score"},[n("span",{staticClass:"ds-font4"},[e._v("当前进度")]),n("span",{staticClass:"ds-font2"},[e._v("2/"+e._s(e.speedLength))])])]),n("div",{staticClass:"ds-exam-card"},[n("p",{staticClass:"title"},[e._v("答题卡")]),n("div",{staticClass:"content"},e._l(e.examInfoData.questions,(function(t,a){return n("ul",{key:t.type+a,staticClass:"lists"},[n("li",[n("p",{staticClass:"exam-tit"},[e._v(e._s(e.dsf.math.toChinesNum(++a)+"、"+e.examTitle[t.type]+(t.score&&t.score.total?" (共"+t.score.total+"分)":"")))]),e._l(t.subjects,(function(t,a){return[n("span",{key:a,staticClass:"item",class:{marked:-1!=e.examMarkActive.indexOf(t.id)},attrs:{"data-id":t.id},on:{click:function(n){return e.toScroll(t.id)}}},[e._v(e._s(++a)+" "),n("i",{staticClass:"iconfont icon-icon2 error"})])]}))],2)])})),0)])])]),e.popClose?n("div",{staticClass:"el-message-box__wrapper",staticStyle:{"z-index":"15001"}},[n("div",{staticClass:"el-message-box",staticStyle:{"margin-top":"20vh"}},[n("div",{staticClass:"el-message-box__header"},[n("div",{staticClass:"el-message-box__title"},[e._v("考试注意事项")])]),n("div",{staticClass:"el-message-box__content"},[n("div",{staticClass:"el-message-box__container"},[n("div",{staticClass:"el-message-box__message"},[e._v(" 考试注意事项考试注意事项考试注意事项考试注意事项考试注意事项考试注意事项考试注意事项考试注意事项考试注意事项考试注意事项考试注意事项 ")])])]),n("div",{staticClass:"el-message-box__btns"},[n("el-button",{attrs:{size:"small",type:e.isDisabled?"info":"primary",disabled:e.isDisabled},on:{click:e.considerations}},[e._v(" "+e._s(e.confirmButtonText)+" ")])],1)])]):e._e(),e.popClose?n("div",{staticClass:"v-modal",staticStyle:{"z-index":"15000"}}):e._e()],1)},$s=[],Is=n("160c"),Ts=Is["a"],Os=Object(v["a"])(Ts,Ls,$s,!1,null,null,null),Es=Os.exports,js=[{path:"/pc/preview",name:"DsfLayoutPreView",meta:{title:"预览"},component:rs["a"],props:function(e){return{mobile:"1"==e.query["mobile"],tpl:"1"==e.query["tpl"]}}},{path:"/mobile/preview",name:"DsfMobileLayoutPreView",meta:{title:"预览"},component:cs["a"]},{path:"/test",name:"Test",component:ms},{path:"/seatDesign",name:"seatDesign",component:ws},{path:"/seatView",name:"seatView",component:Ns},{path:"/flow",name:"Flow",meta:{title:"流程设计器"},component:function(){return Promise.all([n.e("jquery-ui"),n.e("Flow")]).then(n.bind(null,"7105"))}},{path:"/todoTemp",name:"TodoTemp",meta:{title:"待办事项"},component:function(){return n.e("TodoTemp").then(n.bind(null,"9495"))}},{path:"/exam",name:"Exam",component:Es,meta:{title:"在线考试"}}],Ps=js,Bs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isReload?e._e():n("dsf-designer",e._b({attrs:{model:"design",material:e.material}},"dsf-designer",this.$attrs,!1))},Ms=[],Rs=[],As=Object(Mi["a"])(Rs),zs=As,Vs={name:"Designer",inheritAttrs:!1,data:function(){return{material:zs,isReload:!1}},beforeCreate:function(){},created:function(){},mounted:function(){},beforeRouteEnter:function(e,t,n){t.name==e.name?n((function(e){e.isReload=!0,e.$nextTick((function(){e.isReload=!1}))})):n((function(e){e.isReload=!1}))},beforeRouteUpdate:function(e,t,n){var a=this;this.isReload=!0,this.$nextTick((function(){a.isReload=!1})),n()}},qs=Vs,Fs=Object(v["a"])(qs,Bs,Ms,!1,null,null,null),Ks=Fs.exports;ss["default"].use(ls["a"]);var Hs=[].concat(Object(Mi["a"])(Ps),[{path:"/pc/page",name:"Designer",component:Ks,meta:{title:"页面设计器"},props:function(e){return{business:e.query.B,module:e.query.M,pageName:e.query.pname,pageTitle:e.query.title,mobile:!1,tpl:1==e.query.tpl}}},{path:"/mobile/page",name:"Designer",component:Ks,meta:{title:"页面设计器"},props:function(e){return{business:e.query.B,module:e.query.M,pageName:e.query.pname,mobile:!0,tpl:1==e.query.tpl}}}]),Gs=new ls["a"]({mode:"hash",base:"",routes:Hs});dsf.init.initRouter(Gs,"pc");var Us=Gs;ss["default"].use(a["a"]),ss["default"].use(i["a"]),ss["default"].use(o["a"]),ss["default"].use(s["a"]),ss["default"].use(Jo),ss["default"].use(c["a"]),ss["default"].use(D),ss["default"].use(l["a"]),ss["default"].use(r["f"]),ss["default"].use(Zo["b"]),n.e("jquery-ui").then(n.t.bind(null,"b032",7));var Ys=n.e("jquery-ui").then(n.t.bind(null,"8a5f",7));dsf.init.injectionDsf(ss["default"],dsf),dsf.init.injectionHttp(ss["default"],dsf.http),dsf.init.injectionWebAPI(ss["default"],Qo["a"]);var Ws=new ss["default"];Object.defineProperties(ss["default"].prototype,{$bus:{get:function(){return Ws}}}),ss["default"].directive("focus",{inserted:function(e){e.focus()}}),Us.beforeResolve((function(e,t,n){document.title=e.meta.title||dsf.config.defaultTitle||"",n()})),Ys.then((function(){ss["default"].config.productionTip=!1,new ss["default"]({router:Us,store:Xo["a"],data:function(){return{}},created:function(){var e=this;dsf.resizeDetector(),"-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style&&window.addEventListener("hashchange",(function(){var t=window.location.hash.slice(1);e.$router.path!==t&&e.$router.replace(t)}),!1)},render:function(e){return e(os)}}).$mount("#app")}))},"9f16":function(e,t,n){"use strict";var a=n("50cf"),i=n.n(a);i.a},a1d1:function(e,t,n){},a341:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a})),n.d(t,"k",(function(){return i})),n.d(t,"n",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"m",(function(){return c})),n.d(t,"q",(function(){return u})),n.d(t,"l",(function(){return d})),n.d(t,"h",(function(){return h})),n.d(t,"o",(function(){return l})),n.d(t,"j",(function(){return r})),n.d(t,"i",(function(){return p})),n.d(t,"g",(function(){return f})),n.d(t,"d",(function(){return m})),n.d(t,"b",(function(){return g})),n.d(t,"e",(function(){return x})),n.d(t,"f",(function(){return b})),n.d(t,"r",(function(){return R})),n.d(t,"p",(function(){return M}));n("b0c0");var a=function(){return{rows:[{name:"标识",value:"",hide:!0,group:"流程基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"ID",desc:"流程的唯一标识"},{name:"名称",value:"",group:"流程基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Name",desc:"流程的名称",isBase:!0,required:!0},{name:"版本",value:"",group:"流程基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Version",desc:"流程的版本号",isBase:!0,nodeType:"flow"},{name:"办理期限类型",value:"",group:"流程基本信息",editor:{type:"combobox",options:{data:y()}},nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"TimeLimit",nodeName3:"Type",desc1:"流程的办理期限",desc:"期限类型:0：无限制，1:自然日，2:工作日，13:(自然日)时，14:(自然日)分，23:(工作日)时，24:(工作日)分",isBase:!0,showRob:"Value"},{name:"办理期限值",value:"",group:"流程基本信息",editor:"numberbox",nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"TimeLimit",nodeName3:"Value",desc:"流程的办理期限:限制值",isBase:!0},{name:"流程说明",value:"",group:"流程基本信息",editor:"textarea",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Desc",desc:"流程的说明"},{name:"启动流程",value:"",group:"事件",nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"Event",nodeName3:"onStart",desc1:"事件",desc:"启动流程",type:"dialog",config:{title:"启动流程",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"办结流程",value:"",group:"事件",nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"Event",nodeName3:"onClose",desc1:"事件",desc:"办结流程",type:"dialog",config:{title:"办结流程",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"强制办结",value:"",group:"事件",nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"Event",nodeName3:"onForceClose",desc1:"事件",desc:"强制办结",type:"dialog",config:{title:"强制办结",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"增发",value:"",group:"事件",nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"Event",nodeName3:"onExSend",desc1:"事件",desc:"增发",type:"dialog",config:{title:"增发",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"销毁",value:"",group:"事件",nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"Event",nodeName3:"onDestory",desc1:"事件",desc:"销毁",type:"dialog",config:{title:"销毁",width:"1000px",height:"600px",content:"EventSetting"}},{name:"应用接入商ID",value:"",group:"厂商信息",nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"Vendor",nodeName3:"ID",desc1:"厂商信息",desc:"厂商ID"},{name:"应用接入商名称",value:"",group:"厂商信息",nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"Vendor",nodeName3:"Name",desc:"厂商信息"}]}},i=function(){return{rows:[{name:"标识",value:"",hide:!0,group:"节点基本信息",nodeLevel:1,nodeName:"ID",desc:"节点的唯一标识"},{name:"名称",value:"",group:"节点基本信息",editor:"text",nodeLevel:1,nodeName:"Name",desc:"节点的名称",required:!0},{name:"节点类型",value:0,hide:!0,group:"节点基本信息",editor:{type:"combobox",options:{data:k()}},nodeLevel:1,nodeName:"Type",desc:"节点类型,0：开始节点，1：一般节点，2：结束节点，3：跳转节点，4：子流程，5：自动流"},{name:"选择子流程",value:"",group:"节点基本信息",nodeLevel:1,nodeName:"subFlow",desc:"选择子流程",type:"dialog",href:"selectFlow.htm",width:300,height:400},{name:"备注",value:"",group:"节点基本信息",editor:"textarea",nodeLevel:1,nodeName:"Desc",desc:"节点的备注"},{name:"节点期限类型",value:0,group:"节点基本信息",editor:{type:"combobox",options:{data:y()}},nodeLevel:2,nodeName1:"TimeLimit",nodeName2:"Type",desc1:"节点的办理期限",desc:"期限类型:0：无限制，1:自然日，2:工作日，13:(自然日)时，14:(自然日)分，23:(工作日)时，24:(工作日)分"},{name:"办理期限值",value:"",group:"节点基本信息",editor:"numberbox",nodeLevel:2,nodeName1:"TimeLimit",nodeName2:"Value",desc:"节点的办理期限:限制值"},{name:"消息配置信息",value:"",group:"消息配置信息",nodeLevel:1,nodeName:"Message",desc:"消息配置信息",type:"dialog",href:"property_dialog_message_content.htm"},{name:"出线信息类型",value:0,group:"出线信息",editor:{type:"radio",options:{data:D()}},nodeLevel:2,nodeName1:"OutLine",nodeName2:"Type",desc1:"出线信息",desc:"出线信息类型：0，或分支，1，与分支"},{name:"是否可以批量发送",value:0,group:"出线信息",editor:{type:"combobox",options:{data:_()}},nodeLevel:2,nodeName1:"OutLine",nodeName2:"IsEnableBatch",desc:"是否可以批量发送,  0：不可以，1，可以"},{name:"是否启用前置条件",value:0,group:"出线信息",nodeLevel:3,nodeName1:"OutLine",nodeName2:"SendPreConditions",nodeName3:"IsEnabled",desc:"是否启用前置条件，0：不启用，1：启用",editor:{type:"combobox",options:{data:T()}}},{name:"退回控制",value:0,group:"出线信息",nodeLevel:2,nodeName1:"OutLine",nodeName2:"SendBackType",desc:"退回控制，0：退回到上一节点，1：按路径退回，2：按环节退回",editor:{type:"combobox",options:{data:O()}}},{name:"发送前置条件",value:"",group:"出线信息",nodeLevel:2,nodeName1:"OutLine",nodeName2:"SendPreConditions",desc:"发送前置条件，如果不满足，则提示用户并终止发送操作",type:"dialog",href:"property_dialog_sendPreTerm.html"},{name:"是否启用发送条件",value:0,hide:!0,group:"出线信息",nodeLevel:3,nodeName1:"OutLine",nodeName2:"SendConditions",nodeName3:"IsEnabled",desc:"是否启用发送条件，0：不启用，1：启用",editor:{type:"combobox",options:{data:T()}}},{name:"发送条件",value:"",hide:!0,group:"出线信息",nodeLevel:2,nodeName1:"OutLine",nodeName2:"SendConditions",desc:"发送条件，判断哪些发送路线有效",type:"dialog",href:"property_dialog_send1.htm"},{name:"自动处理规则",value:"",hide:!0,group:"出线信息",nodeLevel:2,nodeName1:"OutLine",nodeName2:"AutoDo",desc:"自动处理规则",type:"dialog",href:"property_dialog3.htm",width:300,height:300},{name:"特送的子流程",value:"",group:"出线信息",nodeLevel:2,nodeName1:"OutLine",nodeName2:"SpecialSendRange",desc:"特送的节点范围",type:"dialog",href:"property_dialog_tsjd.htm",width:300,height:400},{name:"是否为抄送",value:0,group:"入线信息",editor:{type:"radio",options:{data:C()}},nodeLevel:2,nodeName1:"InLine",nodeName2:"IsCC",desc1:"入线信息",desc:"是否为抄送，0：否，1：是"},{name:"是否自动发送",value:0,group:"入线信息",editor:{type:"combobox",options:{data:S()}},nodeLevel:2,nodeName1:"InLine",nodeName2:"IsAutoSend",desc:"是否自动发送：0，不自动发送，1，自动发送;满足自动发送的条件：1、IsAutoSend=1,2、选择范围只有一个选项或选择范围为必选,3、继承节点经办人"},{name:"继承节点经办人",value:0,group:"入线信息",editor:{type:"combobox",options:{data:N()}},nodeLevel:2,nodeName1:"InLine",nodeName2:"IsInherit",desc:"继承节点经办人：0，不继承，1，继承;当该节点已经流转过，则再次发送默认发给最近一次的经办人，否则根据发送范围选择。"},{name:"用户选择树的展开级别",value:-1,group:"入线信息",editor:{type:"combobox",options:{data:w()}},nodeLevel:2,nodeName1:"InLine",nodeName2:"ExpandLevel",desc:"用户选择树的展开级别，-1:全部展开，0:不展开，1：一级，2:2级，3:3级。。。"},{name:"是否允许多人办理",value:0,group:"入线信息",editor:{type:"radio",options:{data:L()}},nodeLevel:3,nodeName1:"InLine",nodeName2:"Multiplayer",nodeName3:"IsEnabled",desc2:"多人办理",desc:"是否允许多人办理：0，不允许，1，允许"},{name:"发送模式",value:0,group:"入线信息",editor:{type:"combobox",options:{data:$()}},nodeLevel:3,nodeName1:"InLine",nodeName2:"Multiplayer",nodeName3:"SendMode",desc:"发送模式：0，并行，1，串行，2，两者皆可，默认并行，3，两者皆可，默认串行"},{name:"发送范围",value:"",group:"入线信息",nodeLevel:2,nodeName1:"InLine",nodeName2:"RangeRule",desc:"发送范围",type:"dialog",width:"800",height:"600",href:"property_dialog_sendScope.html"},{name:"发送后额外操作",value:"",group:"入线信息",nodeLevel:2,nodeName1:"InLine",nodeName2:"ExAction",href:"iframe_gjSelect.html",height:"300",desc:"发送到当前环节后需要做的额外操作",type:"dialog"},{name:"退回后额外操作",value:"",group:"入线信息",nodeLevel:2,nodeName1:"InLine",nodeName2:"SendBackAction",href:"iframe_gjSelect.html",height:"300",desc:"退回或被回收需要执行的额外操作",type:"dialog"},{name:"额外的配置信息",value:"",group:"入线信息",nodeLevel:2,nodeName1:"InLine",nodeName2:"ExInfo",href:"form_ext.htm",desc:"额外的配置信息，有业务系统自定义，自解析",type:"dialog"},{name:"自动处理环节的业务逻辑",value:"",group:"入线信息",nodeLevel:2,nodeName1:"InLine",nodeName2:"AutoAction",desc:"自动处理环节的业务逻辑",type:"dialog",href:"iframe_gjSelect.html",height:"300"}]}},o=function(){return{rows:[{name:"标识",value:"",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"ID",desc:"节点的唯一标识"},{name:"名称",value:"",group:"节点基本信息",editor:"text",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Name",desc:"节点的名称",isBase:!0,required:!0},{name:"任务类型",value:"用户任务",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Type",desc:"任务类型"},{name:"节点期限类型",value:0,group:"节点基本信息",editor:{type:"combobox",options:{data:y()}},nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"TimeLimit",nodeName3:"Type",desc1:"节点的办理期限",desc:"期限类型:0：无限制，1:自然日，2:工作日，13:(自然日)时，14:(自然日)分，23:(工作日)时，24:(工作日)分",isBase:!0,showRob:"Value"},{name:"办理期限值",value:"",group:"节点基本信息",editor:"numberbox",nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"TimeLimit",nodeName3:"Value",desc:"节点的办理期限:限制值",isBase:!0},{name:"处理模式",value:0,group:"入线信息",editor:{type:"combobox",options:{data:x()}},nodeLevel:2,nodeName1:"InLine",nodeName2:"Type",desc1:"入线信息",desc:"处理模式:0：单人办理，1:会签（多人同时处理），2:多人依次处理，3:抄送（需提交），4:抄送（不需提交），5:抢办（按人数），6:抢办（按比例）",isBase:!0,showRob:"RushInfo"},{name:"人数",value:"1",group:"入线信息",editor:"text",nodeLevel:2,nodeName1:"InLine",nodeName2:"RushInfo",desc:"抢办人数",isBase:!0,hide:!0,unit:"（人）",max:999999},{name:"处理范围",value:"",group:"入线信息",class:"RangeRule",nodeLevel:2,nodeName1:"InLine",nodeName2:"RangeRule",desc:"处理范围",type:"dialog",config:{content:"RangeRule",width:"800px",height:"552px"},isBase:!0},{name:"展开层级",value:0,group:"入线信息",editor:{type:"combobox",options:{data:w()}},nodeLevel:2,nodeName1:"InLine",nodeName2:"ExpandLevel",desc1:"入线信息",desc:"展开层级:-1： 全部展开， 0：不展开，1:一级，2:两级，3:三级"},{name:"继承节点经办人",value:1,group:"入线信息",editor:{type:"radio",options:{data:N()}},nodeLevel:2,nodeName1:"InLine",nodeName2:"IsInherit",desc1:"入线信息",desc:"继承节点经办人: 0：不继承，1：继承"},{name:"出线信息类型",value:0,group:"出线信息",editor:{type:"radio",options:{data:D()}},nodeLevel:2,nodeName1:"OutLine",nodeName2:"Type",desc1:"出线信息",desc:"出线信息类型：0，或分支，1，与分支"},{name:"是否必填意见",value:0,group:"出线信息",editor:{type:"radio",options:{data:[{value:0,text:"否"},{value:1,text:"是"}]}},nodeLevel:2,nodeName1:"OutLine",nodeName2:"IsEnableBatch",desc:"是否必填意见,  0：否，1：是"},{name:"退回控制",value:0,group:"出线信息",editor:{type:"combobox",options:{data:[{value:0,text:"退回到上一节点"},{value:1,text:"按路径退回"},{value:2,text:"按环节退回"}]}},nodeLevel:2,nodeName1:"OutLine",nodeName2:"SendBackType",desc:"退回控制，0：退回到上一节点，1：按路径退回, 2: 按环节退回"},{name:"发送后",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onAfterSend",desc1:"事件",desc:"发送后",type:"dialog",config:{title:"发送后",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"退回",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onSendBack",desc1:"事件",desc:"办结流程",type:"dialog",config:{title:"办结流程",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"强制办结",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onForceClose",desc1:"事件",desc:"强制办结",type:"dialog",config:{title:"强制办结",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"回收",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onRecovery",desc1:"事件",desc:"回收",type:"dialog",config:{title:"回收",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"强制回收",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onForceRecovery",desc1:"事件",desc:"强制回收",type:"dialog",config:{title:"强制回收",width:"1000px",height:"600px",content:"EventSetting"}},{name:"增发",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onExSend",desc1:"事件",desc:"增发",type:"dialog",config:{title:"增发",width:"1000px",height:"600px",content:"EventSetting"}}]}},s=function(){return{rows:[{name:"标识",value:"",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"ID",desc:"节点的唯一标识"},{name:"名称",value:"",group:"节点基本信息",editor:"text",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Name",desc:"节点的名称",isBase:!0,required:!0},{name:"任务类型",value:"子流程任务",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Type",desc:"任务类型"},{name:"节点期限类型",value:0,group:"节点基本信息",editor:{type:"combobox",options:{data:y()}},nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"TimeLimit",nodeName3:"Type",desc1:"节点的办理期限",desc:"期限类型:0：无限制，1:自然日，2:工作日，13:(自然日)时，14:(自然日)分，23:(工作日)时，24:(工作日)分",isBase:!0,showRob:"Value"},{name:"办理期限值",value:"",group:"节点基本信息",editor:"numberbox",nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"TimeLimit",nodeName3:"Value",desc:"节点的办理期限:限制值",isBase:!0}]}},l=function(){return{rows:[{name:"标识",value:"",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"ID",desc:"节点的唯一标识"},{name:"名称",value:"",group:"节点基本信息",editor:"text",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Name",desc:"节点的名称",isBase:!0,required:!0},{name:"任务类型",value:"web服务任务",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Type",desc:"任务类型"},{name:"URL",value:"",group:"脚本信息",editor:"text",nodeLevel:2,nodeName1:"Services",nodeName2:"URL",desc:"URL"},{name:"请求方式",value:0,group:"脚本信息",editor:{type:"combobox",options:{data:[{value:0,text:"get"},{value:1,text:"post-form-data"},{value:2,text:"post-raw"}]}},nodeLevel:2,nodeName1:"Services",nodeName2:"Type",desc:"请求方式,0：get，1：post-form-data，2：post-raw",showRob:"Params,Content"},{name:"参数",value:[],group:"脚本信息",nodeLevel:2,nodeName1:"Services",nodeName2:"Params",desc:"参数，当type=0,1",type:"dialog",config:{width:"500px",height:"260px",content:"SetParams"},hide:!0},{name:"请求内容",value:"",group:"脚本信息",nodeLevel:2,nodeName1:"Services",nodeName2:"Content",desc:"请求内容,当Type=2",editor:"textarea",hide:!0},{name:"超时时间",value:"",group:"脚本信息",nodeLevel:2,nodeName1:"Services",nodeName2:"TimeOut",desc:"超时时间:单位（秒）",editor:"text"},{name:"开始执行",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onStart",desc1:"事件",desc:"开始执行",type:"dialog",config:{title:"开始执行",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"执行结束",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onComplete",desc1:"事件",desc:"执行结束",type:"dialog",config:{title:"执行结束",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"异常",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onError",desc1:"事件",desc:"异常",type:"dialog",config:{title:"异常",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"超时",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onTimeout",desc1:"事件",desc:"超时",type:"dialog",config:{title:"超时",width:"1000px",height:"600px",content:"EventSetting",language:"java"}}]}},r=function(){return{rows:[{name:"标识",value:"",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"ID",desc:"节点的唯一标识"},{name:"名称",value:"",group:"节点基本信息",editor:"text",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Name",desc:"节点的名称",isBase:!0,required:!0},{name:"任务类型",value:"消息任务",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Type",desc:"任务类型"},{name:"消息类型",value:[],group:"消息发送参数",editor:{type:"checkbox",options:{data:[{value:1,text:"短信"},{value:2,text:"邮件"},{value:3,text:"系统消息"},{value:4,text:"钉消息"}]}},nodeLevel:2,nodeName1:"Params",nodeName2:"Type",desc:"请求方式,1：短信，2：邮件，3：系统消息,4：钉消息",showRob:"Params"},{name:"发送范围",value:"",group:"消息发送参数",editor:"text",nodeLevel:2,nodeName1:"Params",nodeName2:"SendRange",desc:"发送范围"},{name:"消息内容",value:"",group:"消息发送参数",nodeLevel:2,nodeName1:"Params",nodeName2:"Content",desc:"消息内容",type:"dialog",config:{width:"800px",height:"400px",content:"RichText"}},{name:"超时时间",value:"",group:"消息发送参数",nodeLevel:2,nodeName1:"Params",nodeName2:"TimeOut",desc:"超时时间: 单位（秒）",editor:"text"},{name:"开始执行",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onStart",desc1:"事件",desc:"开始执行",type:"dialog",config:{title:"开始执行",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"执行结束",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onComplete",desc1:"事件",desc:"执行结束",type:"dialog",config:{title:"执行结束",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"异常",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onError",desc1:"事件",desc:"异常",type:"dialog",config:{title:"异常",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"超时",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onTimeout",desc1:"事件",desc:"超时",type:"dialog",config:{title:"超时",width:"1000px",height:"600px",content:"EventSetting",language:"java"}}]}},c=function(){return{rows:[{name:"标识",value:"",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"ID",desc:"节点的唯一标识"},{name:"名称",value:"",group:"节点基本信息",editor:"text",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Name",desc:"节点的名称",isBase:!0,required:!0},{name:"任务类型",value:"开始事件",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Type",desc:"任务类型"},{name:"节点期限类型",value:0,group:"节点基本信息",editor:{type:"combobox",options:{data:y()}},nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"TimeLimit",nodeName3:"Type",desc1:"节点的办理期限",desc:"期限类型:0：无限制，1:自然日，2:工作日，13:(自然日)时，14:(自然日)分，23:(工作日)时，24:(工作日)分",isBase:!0,showRob:"Value"},{name:"办理期限值",value:"",group:"节点基本信息",editor:"numberbox",nodeLevel:3,nodeName1:"BaseInfo",nodeName2:"TimeLimit",nodeName3:"Value",desc:"节点的办理期限:限制值",isBase:!0},{name:"处理模式",value:0,group:"入线信息",editor:{type:"combobox",options:{data:x()}},nodeLevel:2,nodeName1:"InLine",nodeName2:"Type",desc1:"入线信息",desc:"处理模式:0：单人办理，1:会签（多人同时处理），2:多人依次处理，3:抄送（需提交），4:抄送（不需提交），5:抢办（按人数），6:抢办（按比例）",isBase:!0,showRob:"RushInfo"},{name:"人数",value:"1",group:"入线信息",editor:"text",nodeLevel:2,nodeName1:"InLine",nodeName2:"RushInfo",desc:"抢办人数",isBase:!0,hide:!0,unit:"（人）",max:999999},{name:"处理范围",value:"",group:"入线信息",nodeLevel:2,nodeName1:"InLine",nodeName2:"RangeRule",desc:"处理范围",type:"dialog",config:{content:"RangeRule",width:"800px",height:"552px"},isBase:!0},{name:"展开层级",value:0,group:"入线信息",editor:{type:"combobox",options:{data:w()}},nodeLevel:2,nodeName1:"InLine",nodeName2:"ExpandLevel",desc1:"入线信息",desc:"展开层级:-1： 全部展开， 0：不展开，1:一级，2:两级，3:三级"},{name:"继承节点经办人",value:1,group:"入线信息",editor:{type:"radio",options:{data:N()}},nodeLevel:2,nodeName1:"InLine",nodeName2:"IsInherit",desc1:"入线信息",desc:"继承节点经办人: 0：不继承，1：继承"},{name:"出线信息类型",value:0,group:"出线信息",editor:{type:"radio",options:{data:D()}},nodeLevel:2,nodeName1:"OutLine",nodeName2:"Type",desc1:"出线信息",desc:"出线信息类型：0，或分支，1，与分支"},{name:"是否必填意见",value:0,group:"出线信息",editor:{type:"radio",options:{data:[{value:0,text:"否"},{value:1,text:"是"}]}},nodeLevel:2,nodeName1:"OutLine",nodeName2:"IsEnableBatch",desc:"是否必填意见,  0：否，1：是"},{name:"退回控制",value:0,group:"出线信息",editor:{type:"combobox",options:{data:[{value:0,text:"退回到上一节点"},{value:1,text:"按路径退回"},{value:2,text:"按环节退回"}]}},nodeLevel:2,nodeName1:"OutLine",nodeName2:"SendBackType",desc:"退回控制，0：退回到上一节点，1：按路径退回, 2: 按环节退回"},{name:"发送后",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onAfterSend",desc1:"事件",desc:"发送后",type:"dialog",config:{title:"发送后",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"退回",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onSendBack",desc1:"事件",desc:"办结流程",type:"dialog",config:{title:"办结流程",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"强制办结",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onForceClose",desc1:"事件",desc:"强制办结",type:"dialog",config:{title:"强制办结",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"回收",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onRecovery",desc1:"事件",desc:"回收",type:"dialog",config:{title:"回收",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"强制回收",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onForceRecovery",desc1:"事件",desc:"强制回收",type:"dialog",config:{title:"强制回收",width:"1000px",height:"600px",content:"EventSetting"}},{name:"增发",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onExSend",desc1:"事件",desc:"增发",type:"dialog",config:{title:"增发",width:"1000px",height:"600px",content:"EventSetting"}}]}},u=function(){return{rows:[{name:"标识",value:"",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"ID",desc:"节点的唯一标识"},{name:"名称",value:"",group:"节点基本信息",editor:"text",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Name",desc:"节点的名称",isBase:!0,required:!0},{name:"任务类型",value:"结束事件",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Type",desc:"任务类型"},{name:"发送后",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onAfterSend",desc1:"事件",desc:"发送后",type:"dialog",config:{title:"发送后",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"强制办结",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onForceClose",desc1:"事件",desc:"强制办结",type:"dialog",config:{title:"强制办结",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"回收",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onRecovery",desc1:"事件",desc:"回收",type:"dialog",config:{title:"回收",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"强制回收",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onForceRecovery",desc1:"事件",desc:"强制回收",type:"dialog",config:{title:"强制回收",width:"1000px",height:"600px",content:"EventSetting"}}]}},d=function(e){return{rows:[{name:"标识",value:"",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"ID",desc:"节点的唯一标识"},{name:"名称",value:"",group:"节点基本信息",editor:"text",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Name",desc:"节点的名称",isBase:!0,required:!0},{name:"任务类型",value:e.Type||"脚本任务",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Type",desc:"任务类型"},{name:"数据库",value:0,group:"脚本信息",editor:{type:"combobox",options:{data:[{value:0,text:"当前数据库"},{value:1,text:"其他注册数据库"}]}},nodeLevel:2,nodeName1:"Exp",nodeName2:"Server",desc1:"数据库",desc:"数据库:0：当前数据库，1:其他注册数据库",hide:"SQL"!==e.language},{name:e.name||"脚本代码",value:"",group:"脚本信息",nodeLevel:2,nodeName1:"Exp",nodeName2:"Content",desc1:"事件",desc:"发送后",type:"dialog",config:{title:e.name||"脚本代码",width:"1000px",height:"600px",content:"EventSetting",language:e.language||"java"}},{name:"超时时间",value:"",group:"脚本信息",editor:"numberbox",nodeLevel:2,nodeName1:"Exp",nodeName2:"TimeOut",desc:"超时时间,单位（s）"},{name:"开始执行",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onStart",desc1:"事件",desc:"开始执行",type:"dialog",config:{title:"开始执行",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"执行结束",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onComplete",desc1:"事件",desc:"执行结束",type:"dialog",config:{title:"执行结束",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"异常",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onError",desc1:"事件",desc:"异常",type:"dialog",config:{title:"异常",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"超时",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onTimeout",desc1:"事件",desc:"超时",type:"dialog",config:{title:"超时",width:"1000px",height:"600px",content:"EventSetting",language:"java"}}]}},h=function(){return{rows:[{name:"标识",value:"",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"ID",desc:"节点的唯一标识"},{name:"名称",value:"",group:"节点基本信息",editor:"text",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Name",desc:"节点的名称",isBase:!0,required:!0},{name:"任务类型",value:"跳转网关",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Type",desc:"任务类型"},{name:"出线信息类型",value:0,group:"出线信息",editor:{type:"radio",options:{data:D()}},nodeLevel:2,nodeName1:"OutLine",nodeName2:"Type",desc1:"出线信息",desc:"出线信息类型：0，或分支，1，与分支"}]}},p=function(){return{rows:[{name:"标识",value:"",group:"连线基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"ID",desc:"节点的唯一标识"},{name:"名称",value:"",group:"连线基本信息",editor:"text",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Name",desc:"节点的名称",isBase:!0,required:!0},{name:"连线类型",value:0,group:"连线基本信息",editor:{type:"combobox",options:{data:I()}},nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Type",desc:"连线类型,0:一般线，1：汇总线，2：退回线",showRob:"GatherRule",isBase:!0},{name:"汇总信息",value:"",group:"连线基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"GatherRule",desc:"汇总，当连线类型为汇总线时有效",type:"dialog",config:{width:"300px",height:"260px",content:"Summary"},isBase:!0,hide:!0},{name:"是否启用",value:0,group:"发送参数",editor:{type:"radio",options:{data:C()}},nodeLevel:2,nodeName1:"SendParameter",nodeName2:"IsEnabled",desc1:"发送参数，是否启用发线信息",desc:"是否启用，0：否，1：是"},{name:"处理模式",value:0,group:"发送参数",editor:{type:"combobox",options:{data:x()}},nodeLevel:2,nodeName1:"SendParameter",nodeName2:"Type",desc1:"发送参数",desc:"处理模式:0：单人办理，1:会签（多人同时处理），2:多人依次处理，3:抄送（需提交），4:抄送（不需提交），5:抢办（按人数），6:抢办（按比例）",showRob:"RushInfo"},{name:"人数",value:"1",group:"发送参数",editor:"text",nodeLevel:2,nodeName1:"SendParameter",nodeName2:"RushInfo",desc:"抢办人数",hide:!0,unit:"（人）",max:999999},{name:"处理范围",value:"",group:"发送参数",nodeLevel:2,nodeName1:"SendParameter",nodeName2:"RangeRule",desc:"处理范围",type:"dialog",config:{content:"RangeRule",width:"800px",height:"552px"}},{name:"展开层级",value:0,group:"发送参数",editor:{type:"combobox",options:{data:w()}},nodeLevel:2,nodeName1:"InLine",nodeName2:"ExpandLevel",desc1:"入线信息",desc:"展开层级:-1： 全部展开， 0：不展开，1:一级，2:两级，3:三级"},{name:"继承节点经办人",value:1,group:"发送参数",editor:{type:"radio",options:{data:N()}},nodeLevel:2,nodeName1:"SendParameter",nodeName2:"IsInherit",desc1:"发送参数",desc:"继承节点经办人: 0：不继承，1：继承"},{name:"发送后",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onAfterSend",desc1:"事件",desc:"发送后",type:"dialog",config:{title:"发送后",width:"1000px",height:"600px",content:"EventSetting",language:"java"}},{name:"增发",value:"",group:"事件",nodeLevel:2,nodeName1:"Event",nodeName2:"onExSend",desc1:"事件",desc:"增发",type:"dialog",config:{title:"增发",width:"1000px",height:"600px",content:"EventSetting"}}]}},f=function(){return{rows:[{name:"标识",value:"",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"ID",desc:"节点的唯一标识"},{name:"名称",value:"",group:"节点基本信息",editor:"text",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Name",desc:"节点的名称",isBase:!0},{name:"任务类型",value:"条件网关",group:"节点基本信息",nodeLevel:2,nodeName1:"BaseInfo",nodeName2:"Type",desc:"任务类型"},{name:"发送条件",value:"",group:"判断规则",nodeLevel:2,nodeName1:"OutLine",nodeName2:"SendConditions",desc:"发送条件，判断哪些发送路线有效",type:"dialog",isDefault:!0,isBase:!0,config:{content:"SendCondition",width:"800px",height:"564px"}}]}},m=function(){return{rows:[{name:"标识",value:"",hide:!0,group:"基本信息",nodeLevel:1,nodeName:"ID",desc:"标示"},{name:"名称",value:"",group:"基本信息",editor:"text",nodeLevel:1,nodeName:"Name",desc:"名称"},{name:"描述",value:"",group:"基本信息",editor:"text",nodeLevel:1,nodeName:"Desc",desc:"描述"}]}},g=function(){return{rows:[{name:"标识",value:"",hide:!0,group:"基本信息",nodeLevel:1,nodeName:"ID",desc:"标示"},{name:"名称",value:"",group:"基本信息",editor:"text",nodeLevel:1,nodeName:"Name",desc:"名称"},{name:"描述",value:"",group:"基本信息",editor:"text",nodeLevel:1,nodeName:"Desc",desc:"描述"}]}};function y(){return[{value:0,text:"无限制"},{value:1,text:"自然日"},{value:2,text:"工作日"},{value:13,text:"(自然日)时"},{value:14,text:"(自然日)分"},{value:23,text:"(工作日)时"},{value:24,text:"(工作日)分"}]}function x(e){var t=[{value:0,text:"单人办理"},{value:1,text:"会签（多人同时处理）"},{value:2,text:"多人依次处理"},{value:3,text:"抄送（需提交）"},{value:4,text:"抄送（不需提交）"},{value:5,text:"抢办（按人数）"},{value:6,text:"抢办（按比例）"}];return void 0!==e?v(t,e):t}function v(t,n){if(n+""&&e.isNumeric(n))for(var a=0;a<t.length;a++)if(n==t[a].value)return t[a].text||t[a].label}function b(e){var t=[{label:"人工选择",value:0},{label:"默认选中",value:1},{label:"必选",value:2}];return void 0!==e?v(t,e):t}function w(e){var t=[{value:-1,text:"全部展开"},{value:0,text:"不展开"},{value:1,text:"一级"},{value:2,text:"两级"},{value:3,text:"三级"}];return void 0!==e?v(t,e):t}function k(t){var n=[{value:0,text:"开始节点"},{value:1,text:"一般节点"},{value:2,text:"结束节点"},{value:3,text:"跳转节点"},{value:4,text:"子流程"},{value:5,text:"自动流"},{value:6,text:"判断节点"}];if(t+""&&e.isNumeric(t))for(var a=0;a<n.length;a++)if(t==n[a].value)return n[a].text;return n}function D(t){var n=[{value:0,text:"或分支"},{value:1,text:"与分支"}];if(t+""&&e.isNumeric(t))for(var a=0;a<n.length;a++)if(t==n[a].value)return n[a].text;return n}function _(t){var n=[{value:0,text:"不可以"},{value:1,text:"可以"}];if(t+""&&e.isNumeric(t))for(var a=0;a<n.length;a++)if(t==n[a].value)return n[a].text;return n}function C(e){var t=[{value:0,text:"否"},{value:1,text:"是"}];return t}function S(t){var n=[{value:0,text:"不自动发送"},{value:1,text:"自动发送"}];if(t+""&&e.isNumeric(t))for(var a=0;a<n.length;a++)if(t==n[a].value)return n[a].text;return n}function N(e){var t=[{value:0,text:"不继承"},{value:1,text:"继承"}];return t}function L(t){var n=[{value:0,text:"不允许"},{value:1,text:"允许"}];if(t+""&&e.isNumeric(t))for(var a=0;a<n.length;a++)if(t==n[a].value)return n[a].text;return n}function $(t){var n=[{value:0,text:"并行"},{value:1,text:"串行"},{value:2,text:"两者皆可，默认并行"},{value:3,text:"两者皆可，默认串行"}];if(t+""&&e.isNumeric(t))for(var a=0;a<n.length;a++)if(t==n[a].value)return n[a].text;return n}function I(t){var n=[{value:0,text:"一般线"},{value:1,text:"汇总线"},{value:2,text:"退回线"}];if(t+""&&e.isNumeric(t))for(var a=0;a<n.length;a++)if(t==n[a].value)return n[a].text;return n}function T(t){var n=[{value:0,text:"不启用"},{value:1,text:"启用"}];if(t+""&&e.isNumeric(t))for(var a=0;a<n.length;a++)if(t==n[a].value)return n[a].text;return n}function O(t){var n=[{value:0,text:"退回到上一节点"},{value:1,text:"按路径退回"},{value:2,text:"按环节退回"}];if(t+""&&e.isNumeric(t))for(var a=0;a<n.length;a++)if(t==n[a].value)return n[a].text;return n}var E=[{name:"开始事件",sort:"event",type:201,img:n("fc8d")},{name:"用户任务",sort:"task",type:101,img:n("f7fc")},{name:"条件网关",sort:"gateway",type:301,img:n("8ea6")},{name:"跳转网关",sort:"gateway",type:302,img:n("1e7f")},{name:"子流程任务",sort:"task",type:102,img:n("71b0")},{name:"脚本任务",sort:"task",type:103,img:n("603b")},{name:"结束事件",sort:"event",type:299,img:n("3f7d")}],j=[{name:"用户任务",sort:"task",type:101,img:n("f7fc")},{name:"子流程任务",sort:"task",type:102,img:n("71b0")},{name:"脚本任务",sort:"task",type:103,img:n("603b")},{name:"web服务任务",sort:"task",type:104,img:n("8de7")},{name:"消息任务",sort:"task",type:105,img:n("0fc7")},{name:"python任务",sort:"task",type:106,img:n("841e")},{name:"shell任务",sort:"task",type:107,img:n("51ca")},{name:"SQL任务",sort:"task",type:108,img:n("8eca")}],P=[{name:"开始事件",sort:"event",type:201,img:n("fc8d")},{name:"结束事件",sort:"event",type:299,img:n("f6d4")}],B=[{name:"条件网关",sort:"gateway",type:301,img:n("8ea6")},{name:"跳转网关",sort:"gateway",type:302,img:n("1e7f")}],M=[{name:"终止事件",sort:"boundaryEvent",type:401,url:n("e53f")},{name:"超时事件",sort:"boundaryEvent",type:402,url:n("7882")},{name:"异常事件",sort:"boundaryEvent",type:403,url:n("4f2a")}],R=[{title:"基础",data:E},{title:"任务",data:j},{title:"事件",data:P},{title:"网关",data:B}]}).call(this,n("1157"))},a58e:function(e,t,n){},a6de:function(e,t,n){},a92c:function(e,t,n){"use strict";(function(e){n("7db0");var a=n("8050");t["a"]={name:"DesValueAttributes",mixins:[a["a"]],data:function(){return{tableData:[]}},mounted:function(){var t=this;if(this.owner){var n=dsf.mix(!0,[],this.owner.metadata.valueAttributes);e.each(n,(function(e){e.typeValue=e.type.value,t.tableData.push(e)}))}},methods:{getType:function(){return dsf.metadata.dataType},typeChange:function(t,n){t.type=e.find(dsf.metadata.dataType,(function(e){return e.value==n}))},yes:function(){var t=dsf.mix(!0,[],this.tableData),n=[];return e.each(t,(function(e){delete e.typeValue,n.push(e)})),n}}}}).call(this,n("2ef0"))},a9ea:function(e,t,n){"use strict";(function(e){n("c740"),n("96cf");var a=n("1da1"),i=n("8050");t["a"]={name:"DesListOrderByEdit",mixins:[i["a"]],data:function(){return{tableData:[],treeData:[],defaultProps:{children:"children",label:"name"}}},mounted:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.owner.$$getComponent(),a=n.$options.design.metadata.create.call(n),a&&!(a.length<=1)){t.next=5;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 5:if(i=a[1].metadata.at,i){t.next=9;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 9:return t.next=11,e.getTreeData(a[1].metadata,a[1].metadata.rm_type||3);case 11:e.treeData=t.sent,e.tableData=e.currentData||[];case 13:case"end":return t.stop()}}),t)})))()},methods:{toList:function(t,n){if(n.field){var a=e.findIndex(this.tableData,(function(e){return e.field==n.field}));a<0&&this.tableData.push({field:n.field,fieldCaption:n.fieldCaption,sortType:"asc"})}},getTreeData:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function a(){var i,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=[],"8"!=t){a.next=8;break}return o={rmId:e.rmId},a.next=5,n.$webAPI.getDbSourceFieldsTree(o);case 5:i=a.sent,a.next=13;break;case 8:if("3"!=t){a.next=13;break}return s={namespace:e.at},a.next=12,n.$webAPI.getMetaDataFieldsTree(s);case 12:i=a.sent;case 13:return a.abrupt("return",i);case 14:case"end":return a.stop()}}),a)})))()},remove:function(e){dsf.array.remove(this.tableData,e)},up:function(t){var n=e.findIndex(this.tableData,(function(e){return e==t}));if(n>0){var a=this.tableData[n-1];this.$set(this.tableData,n-1,t),this.$set(this.tableData,n,a)}},down:function(t){var n=e.findIndex(this.tableData,(function(e){return e==t}));if(n<this.tableData.length-1){var a=this.tableData[n+1];this.$set(this.tableData,n+1,t),this.$set(this.tableData,n,a)}},yes:function(){return this.tableData}}}}).call(this,n("2ef0"))},aabf:function(e,t,n){"use strict";(function(e,a){n("c975"),n("a15b");var i=n("5b92"),o=n("ddb2"),s=n("e2b6"),l=n("ad4c"),r=n("35b5"),c=n("f70e");function u(e){switch(e){case 17:e="ctrl";break;case 18:e="alt";break;case 68:e="d";break;case 65:e="a";break;case 46:e="delete";break;case 16:e="shift";break;default:e=null}return e}t["a"]={name:"DsfSeatDesign",components:{topTools:i["a"],leftTools:o["a"],SeatCanvas:l["a"],rightTools:s["a"]},data:function(){return{keyStack:[]}},computed:{},beforeDestroy:function(){e(document).off("keydown"),e(document).off("keyup")},mounted:function(){var t,n=this;e("body").on("keydown",(function(e){if(t=u(e.keyCode),t){var a=n.keyStack.indexOf(t);-1===a&&n.keyStack.push(t);var i=n.keyStack.join("-");"ctrl"!==i&&"ctrl-d"!==i||(e.stopPropagation(),e.preventDefault()),"ctrl-d"===i&&r["a"].emit(c["a"].KEY_CTRL_D),"delete"===i&&r["a"].emit(c["a"].KEY_DELETE)}})),e("body").on("keyup",(function(e){e.stopPropagation(),e.preventDefault(),t=u(e.keyCode),a.pull(n.keyStack,t)})),e("body").on("click",(function(){r["a"].emit(c["a"].BODY_EMPTY_CLICK)}))},methods:{}}}).call(this,n("1157"),n("2ef0"))},aaf5:function(e,t,n){},ad4c:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"seat-designer-page",style:e.canvasCss,on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.preRegion(t)}}},[n("region",{attrs:{visible:e.regionVisible,region:e.regionRect}}),n("div",{style:e.panelSty,attrs:{id:"panel_outer"}},[n("seat-item"),n("div",{staticClass:"ds_seat_panel_bg",attrs:{id:"panel_bg"}})],1),n("seat-pop")],1)},i=[],o=n("64ac"),s=o["a"],l=n("2877"),r=Object(l["a"])(s,a,i,!1,null,null,null);t["a"]=r.exports},ad76:function(e,t,n){"use strict";var a=n("612f"),i=n.n(a);i.a},afe9:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-range-select"},[n("el-select",{attrs:{placeholder:"请选择"},on:{change:e.valueChange},model:{value:e.startValue,callback:function(t){e.startValue=t},expression:"startValue"}},e._l(e.start,(function(e,t){return n("el-option",{key:"start-"+t,attrs:{label:e.text,value:e.value}})})),1),n("span",{staticClass:"seperate"},[e._v("至")]),n("el-select",{attrs:{placeholder:"请选择"},on:{change:e.valueChange},model:{value:e.endValue,callback:function(t){e.endValue=t},expression:"endValue"}},e._l(e.end,(function(e,t){return n("el-option",{key:"start-"+t,attrs:{label:e.text,value:e.value}})})),1)],1)},i=[],o=(n("c740"),n("fb6a"),n("45fc"),{props:{value:{type:Array,default:function(){return[]}},dictionary:{type:Array,default:function(){return[]}}},data:function(){return{startValue:"",endValue:""}},computed:{start:function(){return this.dictionary},end:function(){var e=this,t=this.dictionary.findIndex((function(t){return t.value===e.startValue}));return this.dictionary.slice(t)}},watch:{value:function(){this.initValue()}},created:function(){this.initValue(),this.valueChange()},methods:{initValue:function(){this.startValue=this.value.length?this.value[0]:this.dictionary[0].value,this.endValue=this.value.length?this.value[1]:this.dictionary[this.dictionary.length-1].value},valueChange:function(){var e=this;if(this.end.some((function(t){return t.value===e.endValue}))){var t=[this.startValue,this.endValue];this.$emit("input",t),this.$emit("change",t)}else this.endValue=this.end[0].value}}}),s=o,l=n("2877"),r=Object(l["a"])(s,a,i,!1,null,null,null);t["a"]=r.exports},b3c6:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));n("4160"),n("159b");var a=n("f70e");function i(t,n){var i=this,o={headers:{"Content-Type":"multipart/form-data"},transformRequest:[function(e,t){return e}]},s=dsf.layer.loading();i.$http.post(a["b"],t,o).done((function(e){if(!dsf.isDef(e.data)||!e.success)return dsf.layer.message(e.message,!1),n&&n("error"),!1;n&&n(e.data)})).error((function(e){dsf.layer.message("上传图片失败",!1),n&&n("error")})).always((function(){dsf.layer.closeLoading(s),e("#inputBaseImg").val("")}))}function o(e){var t=e.member[0],n=e.height-t.height*e.rows,a=e.width-t.width*e.cols,i=n/(e.rows-1),o=a/(e.cols-1);e.member.forEach((function(e){e.rowIndex>0&&(e.top=(e.height+i)*e.rowIndex),e.colIndex>0&&(e.left=(e.width+o)*e.colIndex)}))}}).call(this,n("1157"))},b475:function(e,t,n){"use strict";(function(e){var a=n("5530"),i=n("b3c6"),o=n("2f62"),s=n("46bb");function l(e){var t=this,n=new Image;n.src=dsf.url.getWebPath(e.relativePath),n.onload=function(){t.hasBg=!0,t.backgroundImage.width=n.naturalWidth,t.backgroundImage.height=n.naturalHeight,t.backgroundImage.relativePath=e.relativePath,t.backgroundImage.absolutePath=e.absolutePath,r.call(t)},n.onerror=function(){dsf.layer.message("图片加载失败",!1),t.hasBg=!1}}function r(){var t=this,n=t.backgroundImage.width,a=t.backgroundImage.height,i=t.compelPanelSize.width||e(".seat-designer-page").width(),o=i/n;t.canvasSet.width=i,t.canvasSet.height=a*o,e("#panel_bg").css("background-image","url("+t.backgroundImage.absolutePath+")")}t["a"]={name:"TopTools",components:{widthInput:s["a"]},data:function(){return{layout:{buttons:[{text:"保存",icon:"baocun",handler:this.saveLayout},{text:"序号设置",icon:"shuzishurukuang",handler:this.saveLayout},{text:"底图",icon:"tupiantianjia",handler:this.updateBG},{text:"复位",icon:"shuaxin",handler:this.saveLayout},{text:"回退",icon:"shangyibu1",handler:this.saveLayout}]},backgroundImage:{url:"",width:0,height:0},hasBg:!1,canvasSet:{width:void 0,height:void 0}}},computed:Object(a["a"])({},Object(o["b"])("seatDesign",["compelPanelSize"])),watch:{"canvasSet.width":function(t){var n=this;if(this.hasBg)if(t){var a=t/this.backgroundImage.width;this.canvasSet.height=this.backgroundImage.height*a}else this.$nextTick((function(){var t=e(".seat-designer-page").width(),a=t/n.backgroundImage.width;n.canvasSet.height=n.backgroundImage.height*a}))}},methods:{saveLayout:function(){},updateBG:function(){var t=this,n=t.$refs.uploadInput;e(n).click(),e(n).off("change").on("change",(function(){if(0!==n.files.length){var e=new FormData;e.append("file",n.files[0]);var a=function(e){if("error"===e)return t.hasBg=!1,!1;l.call(t,e[0])};i["b"].call(t,e,a)}}))}}}}).call(this,n("1157"))},b499:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-question-formwrap ds-question-item"},[n("div",{staticClass:"example"},[n("el-form",{attrs:{"label-position":"top"}},[n("el-form-item",{attrs:{prop:"value",label:e.exampleLabel,rules:e.exampleRules}},[n("el-rate",{attrs:{max:e.form.starLength,"show-text":e.form.showText}})],1)],1)],1),n("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.rules,"label-width":"auto","label-position":"left"}},[n("el-row",{attrs:{gutter:15}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{prop:"questionBody","label-width":"0"}},[n("el-input",{attrs:{placeholder:"请输入题干"},model:{value:e.form.questionBody,callback:function(t){e.$set(e.form,"questionBody",t)},expression:"form.questionBody"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"starLength",label:"星星数量:"}},[n("el-input-number",{attrs:{min:1},model:{value:e.form.starLength,callback:function(t){e.$set(e.form,"starLength",t)},expression:"form.starLength"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"readOnly",label:"本题不允许填写:"}},[n("el-switch",{model:{value:e.form.readOnly,callback:function(t){e.$set(e.form,"readOnly",t)},expression:"form.readOnly"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"visible",label:"本题是否显示:"}},[n("el-switch",{model:{value:e.form.visible,callback:function(t){e.$set(e.form,"visible",t)},expression:"form.visible"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"required",label:"必填标识:"}},[n("el-switch",{model:{value:e.form.required,callback:function(t){e.$set(e.form,"required",t)},expression:"form.required"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"maxLength",label:"显示评分对应星级:"}},[n("el-switch",{model:{value:e.form.showText,callback:function(t){e.$set(e.form,"showText",t)},expression:"form.showText"}})],1)],1),n("el-col",{attrs:{span:24}},[n("div",{staticClass:"ljsz"},[n("span",{staticClass:"label"},[e._v("逻辑设置:")]),n("span",{staticClass:"btn",on:{click:e.showRela}},[e._v("题目关联")])])])],1)],1)],1)},i=[],o=(n("99af"),n("b773")),s={mixins:[o["a"]],props:["owner"],data:function(){return{form:{questionBody:"请输入题干",starLength:5,readOnly:!1,visible:!0,required:!0,showText:!1},rules:{questionBody:[{required:!0,message:"请输入题干"}]}}},computed:{exampleLabel:function(){return"".concat(this.owner.questionIndex,".").concat(this.form.questionBody)},exampleRules:function(){return this.form.required?[{required:!0,trigger:"change"}]:null}},methods:{}},l=s,r=n("2877"),c=Object(r["a"])(l,a,i,!1,null,null,null);t["a"]=c.exports},b968:function(e,t,n){"use strict";(function(e){n("4de4"),n("c740"),n("d3b7"),n("ddb0");var a=n("8050");t["a"]={name:"DesSuperSearchEnumItems",mixins:[a["a"]],props:{item:{type:Object,default:function(){return{}}},currentData:{type:Object,default:function(){return null}},searchItems:{type:Array,default:function(){return[]}}},data:function(){return{formData:{rel:"",operator:"eq"},activeName:"static",values:{static:[],dict:{key:null,node:null},dbsource:{key:null,node:null},interface:""}}},computed:{sitems:function(){var t=this;return e.filter(this.searchItems,(function(e){return e.id!==t.item.id}))}},created:function(){var e=dsf.mix(!0,{},this.currentData);dsf.isEmptyObject(e)||(this.formData.rel=e.rel,this.formData.operator=e.operator,this.values[e.type]=e.value,this.activeName=e.type||"static")},mounted:function(){},methods:{yes:function(){return{operator:this.formData.operator,rel:this.formData.rel,type:this.activeName,value:this.values[this.activeName]}},addRow:function(){this.values.static.push({})},remove:function(e){dsf.array.remove(this.values.static,e)},up:function(t){var n=e.findIndex(this.values.static,(function(e){return e==t}));if(n>0){var a=this.values.static[n-1];this.$set(this.values.static,n-1,t),this.$set(this.values.static,n,a)}},down:function(t){var n=e.findIndex(this.values.static,(function(e){return e==t}));if(n<this.values.static.length-1){var a=this.values.static[n+1];this.$set(this.values.static,n+1,t),this.$set(this.values.static,n,a)}}}}}).call(this,n("2ef0"))},bbd1:function(e,t,n){"use strict";(function(e){n("a15b"),n("d81d"),n("b0c0"),n("ac1f"),n("1276"),n("498a");var a=n("8050"),i=n("762b");t["a"]={name:"DesExamEnumEditor",components:{EnumEditorItem:i["a"]},mixins:[a["a"]],data:function(){var e=this;return{tabIndex:"static",treeLoading:!1,isTreeCheck:!1,treeData:[],defaultCheckedKey:"",dataTwo:"",dataOne:{type:"dict",code:null,attach:[]},tablePost:function(t,n){e.$http.get("dict/getList/"+t).done((function(e){e.success?n&&n(e.data):dsf.layer.message("请求异常！",!1)}))}}},created:function(){this.currentData&&this.init(this.currentData)},methods:{handleClick:function(e,t){"dict"===e.name&&!this.isTreeCheck&&this.treeData&&this.getTreeData()},init:function(e){var t=e.type,n=e.attach,a=e.code;if("static"===t){if(this.tabIndex="static",!n)return!1;this.dataTwo=n.map((function(e){return e.text===e.value?e.text:e.text+"|"+e.value})).join("\n")}else this.dataOne={type:t,code:a,attach:n},this.defaultCheckedKey=a,this.tabIndex="dict",this.getTreeData()},yes:function(){if("static"===this.tabIndex){var t=this.dataTwo.trim().split("\n");return{type:"static",attach:0==t?[]:t.map((function(t){if(!e.isEmpty(t))return t=t.split("|"),{text:t[0],value:t[1]||t[0]}}))}}return this.dataOne},getTreeData:function(){var e=this;this.treeLoading=!0,this.$http.get("/rm/list/dataDic").done((function(t){t.success?(e.isTreeCheck=!0,e.treeData=t.data.map((function(t){return e.dataFormat(t)}))):dsf.error(err)})).always((function(){e.treeLoading=!1}))},dataFormat:function(e){var t=this,n=e.name,a=e.dsfa_rm_id,i=e.type_value,o=e.children,s={label:n,ID:a,nocheck:"5"!==i,iconSkin:""};return o?s.children=o.map((function(e){return t.dataFormat(e)})):s.nocheck&&(s.iconSkin="_special"),s}}}}).call(this,n("2ef0"))},bd79:function(e,t,n){"use strict";(function(e){n("d81d");var a=n("8050");t["a"]={name:"DesTableColumnsInfo",mixins:[a["a"]],data:function(){return{tableData:[]}},mounted:function(){for(var e=0;e<this.currentData.length;e++)this.tableData.push({text:"第"+(e+1)+"列",width:this.currentData[e].width})},methods:{yes:function(){var t=e.map(this.tableData,(function(e){return dsf.isNumber(e.width)&&(e.width=e.width+"px"),{width:e.width}}));return t}}}}).call(this,n("2ef0"))},bf21:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.showSearch?n("div",{staticClass:"dsf-tree-search"},[n("el-input",{attrs:{placeholder:"输入名称"},on:{input:e.search},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}},[n("i",{staticClass:"iconfont el-input__icon icon-Magnifier",attrs:{slot:"suffix"},slot:"suffix"})])],1):e._e(),n("div",{staticClass:"dsf-select-tree",style:{height:e.showSearch?"340px":"100%"}},[n("el-tree",{ref:"treeForm",attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","show-checkbox":!e.hideCheckbox,"default-expand-all":!0,"default-checked-keys":e.checked,"check-strictly":!e.multi,"check-on-click-node":!0,"expand-on-click-node":!1,"filter-node-method":e.filterData},on:{"check-change":e.selectTree,"node-click":e.choose},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,i=t.data;return n("div",{staticClass:"custom-tree-node"},[void 0!==i[e.defaultProps.children]?[n("i",{staticClass:"iconfont",class:[a.expanded?"icon-dakai":"icon-wenjianjia"]}),n("span",{domProps:{innerHTML:e._s(i[e.defaultProps.label])}})]:[n("i",{staticClass:"iconfont icon-shiyongwendang"}),n("span",{domProps:{innerHTML:e._s(i[e.defaultProps.label])}})]],2)}}])})],1)])},i=[],o=(n("4de4"),n("c975"),{name:"SelectTree",props:{treeData:{type:Array,default:function(){return[]}},select:{type:[Object,Array],default:function(){return{}}},checked:{type:Array,default:function(){return[]}},showSearch:{type:Boolean,default:function(){return!1}},hideCheckbox:{type:Boolean,default:function(){return!1}},multi:{type:Boolean,default:function(){return!1}},formSearchKey:{type:String,default:function(){return""}}},data:function(){return{searchKey:"",defaultProps:{children:"children",label:"label"}}},created:function(){},mounted:function(){},methods:{selectTree:function(e,t,n){1!=t||this.multi||this.$refs.treeForm.setCheckedNodes([e]);var a=this.$refs.treeForm.getCheckedNodes();a=a.filter((function(e){return!e.disabled})),this.$emit("update:select",this.multi?a:a[0])},filterData:function(e,t){return!e||-1!==t.label.indexOf(e)},search:function(){this.$refs.treeForm.filter(this.searchKey)},choose:function(e){this.$emit("change",e)}}}),s=o,l=(n("df58"),n("2877")),r=Object(l["a"])(s,a,i,!1,null,"5fbd6849",null);t["a"]=r.exports},ce58:function(e,t,n){"use strict";(function(e){n("7db0"),n("c740"),n("d81d"),n("96cf");var a=n("1da1"),i=n("8050");t["a"]={name:"DesSuperSearchSetting",mixins:[i["a"]],data:function(){return{tableData:[],treeData:[],defaultProps:{children:"children",label:"name"},options:[{label:"选项枚举",value:"enum",defaultField:["value"]},{label:"文本",value:"text"},{label:"日期时间",value:"datetime"}]}},created:function(){},mounted:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.owner.$$getComponent(),a=n.$options.design.metadata.create.call(n),console.log(a),a&&!(a.length<=1)){t.next=6;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 6:if(i=a[1].metadata.at,i){t.next=10;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 10:return t.next=12,e.getTreeData(a[1].metadata,a[1].metadata.rm_type||3);case 12:e.treeData=t.sent,e.tableData=e.currentData||[];case 14:case"end":return t.stop()}}),t)})))()},methods:{getRowId:function(e){var t=e.id;return t},getParentRow:function(t){var n=e.find(this.tableData,(function(e){return e.id==t.parent}));return n||{}},searchTypeChange:function(e,t){this.updateValueAttributeJoin(t,e)},updateValueAttributeJoin:function(e,t){"enum"==e.searchType?(e.model="select",e.operator="in"):"text"==e.searchType?(e.model="textbox",e.operator="like"):"datetime"==e.searchType&&(e.model="ymd",e.operator="between")},updateLayout:function(e){"24"!=e.layout&&"enum"==e.searchType&&(e.model="select")},updateModel:function(e){"tile"==e.model&&"enum"==e.searchType&&(e.layout="24")},toList:function(t,n){if(n.field){var a=e.findIndex(this.tableData,(function(e){return e.field==n.field}));if(a<0){var i={id:n.id,field:n.field,fieldCaption:n.fieldCaption,type:"metadata",searchType:"enum",code:n.code,layout:"24",model:"select",defaultValue:"",operator:"in"};this.updateValueAttributeJoin(i,i.searchType),this.tableData.push(i)}}},settingEnumItems:function(e){this.$openDialog({title:"选项设置",content:"DesSuperSearchEnumItems",height:"60vh",width:"700px",params:{item:e,searchItems:this.tableData,currentData:e.setting},btns:[{text:"确定",handler:function(t){var n=t.yes();e.setting=n||null}},{text:"取消"}]})},getTreeData:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function a(){var i,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=[],"8"!=t){a.next=8;break}return o={rmId:e.rmId},a.next=5,n.$webAPI.getDbSourceFieldsTree(o);case 5:i=a.sent,a.next=13;break;case 8:if("3"!=t){a.next=13;break}return s={namespace:e.at},a.next=12,n.$webAPI.getMetaDataFieldsTree(s);case 12:i=a.sent;case 13:return a.abrupt("return",i);case 14:case"end":return a.stop()}}),a)})))()},remove:function(e){dsf.array.remove(this.tableData,e)},up:function(t){var n=e.findIndex(this.tableData,(function(e){return e==t}));if(n>0){var a=this.tableData[n-1];this.$set(this.tableData,n-1,t),this.$set(this.tableData,n,a)}},down:function(t){var n=e.findIndex(this.tableData,(function(e){return e==t}));if(n<this.tableData.length-1){var a=this.tableData[n+1];this.$set(this.tableData,n+1,t),this.$set(this.tableData,n,a)}},yes:function(){var t=e.map(this.tableData,(function(e){var t=dsf.mix(!0,{},e);return"enum"!=t.searchType&&delete t.items,t}));return t}}}}).call(this,n("2ef0"))},d084:function(e,t,n){},d8d9:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("b0c0");var a=n("d4ec"),i=n("bee2"),o=n("1f8f"),s=function(){function e(t,n){Object(a["a"])(this,e),this.name=t.name,this.url=t.url,this.type=t.type,this.id=t.id||o["h"].uuid(),this.offset=t.offset||(n?{x:n.offsetX,y:n.offsetY}:{x:0,y:0}),this.point=t.point||{x:t.x,y:t.y},this.width=t.width||50,this.height=t.height||50,this.img=t.img||{width:32,height:32},t.from&&(this.from=t.from),this.direction=t.direction,this.index=t.index,this.out=t.out||[],this.hide=t.hide||!1,this.attributes=t.attributes||{Name:this.name,ID:this.id,Type:this.type},this.nodeId=t.nodeId}return Object(i["a"])(e,[{key:"setAttributes",value:function(e){this.attributes=e}},{key:"getAttributes",value:function(){return this.attributes}}]),e}()},dd8c:function(e,t,n){"use strict";n("4e82"),n("b0c0");var a=n("5530"),i=n("1f8f"),o=n("1485"),s=n("a341"),l=function(e){var t="task"===e.sort&&"102"!==e.type?i["g"]:i["f"];this.padding=5,this.nameWidth=120;var n,l=Object.assign({name:"",width:t.width,height:t.height,x:0,y:0,img:"",sort:"task",type:"101"},e);if(this.id=l.id||null,this.name=l.name,this.point={x:l.x,y:l.y},this.img=l.img,this.width=l.width,this.height=l.height,this.imgWidth=i["f"].width,this.imgHeight=i["f"].height,"task"===l.sort&&(this.open=Object.assign({show:"102"!==l.type,width:"102"===l.type?i["e"].width:i["g"].width,height:"102"===l.type?i["e"].height:i["g"].height},l.open),this.taskMsg=l.taskMsg||""),this.isRender=!1,this.type=l.type,this.sort=l.sort,this.out=[],this.in=[],"6"===l.type&&(this.OutLine={}),l.attributes)this.attributes=Object(a["a"])({},l.attributes);else{if("101"===l.type)n=Object(s["n"])();else if("102"===l.type)n=Object(s["c"])();else if("103"===l.type){var r={name:"脚本任务",Type:"脚本任务",language:"java"};n=Object(s["l"])(r)}else if("104"===l.type)n=Object(s["o"])();else if("105"===l.type)n=Object(s["j"])();else if("106"===l.type){var c={name:"python任务",Type:"python任务",language:"python"};n=Object(s["l"])(c)}else if("107"===l.type){var u={name:"shell任务",Type:"shell任务",language:"shell"};n=Object(s["l"])(u)}else if("108"===l.type){var d={name:"SQL任务",Type:"SQL任务",language:"SQL"};n=Object(s["l"])(d)}else n="201"===l.type?Object(s["m"])():"299"===l.type?Object(s["q"])():"301"===l.type?Object(s["g"])():"302"===l.type?Object(s["h"])():Object(s["k"])();this.attributes=Object(o["b"])(n),this.attributes.BaseInfo||(this.attributes.BaseInfo={}),this.attributes.BaseInfo.Name=this.name,this.attributes.BaseInfo.ID=this.id}};t["a"]=l},ddb2:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"designer-left"},[n("div",{staticClass:"designer-left-tools"},e._l(e.leftMenu.group,(function(t,a){return n("el-collapse",{key:a,model:{value:e.leftMenu.activeName,callback:function(t){e.$set(e.leftMenu,"activeName",t)},expression:"leftMenu.activeName"}},[n("el-collapse-item",{attrs:{title:t.title,name:t.title}},[n("div",{staticClass:"ds-tools-group-content",staticStyle:{padding:"10px"}},e._l(t.items,(function(t,a){return n("div",{key:a,staticClass:"ds-tool-item",attrs:{name:t.name,"data-type":t.type}},[e._v(" "+e._s(t.name)+" ")])})),0)])],1)})),1)])},i=[],o=n("e396"),s=o["a"],l=n("2877"),r=Object(l["a"])(s,a,i,!1,null,null,null);t["a"]=r.exports},df58:function(e,t,n){"use strict";var a=n("44a3"),i=n.n(a);i.a},e2a9:function(e,t,n){"use strict";(function(e){n("d81d");t["a"]={name:"DesMetaDataSource",props:{source:{type:Array,default:function(){return[]}},dict:{type:Array,default:function(){return[]}}},data:function(){return{data:[]}},mounted:function(){this.data=e.map(this.source,(function(e,t){return{label:e.ctrl.label||e.ctrl.caption,ctrl:e.ctrl,mdkey:e.source,initKey:e.source,isChange:!1}}))},methods:{changeKey:function(e,t){t.mdkey!=t.initKey?t.isChange=!0:t.isChange=!1},yes:function(){return this.data}}}}).call(this,n("2ef0"))},e2b6:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.showTool?n("div",{staticClass:"right-tool-box"},[n("div",{staticClass:"box-item",on:{click:function(t){return e.showGroup(0)}}},[n("el-popover",{attrs:{value:e.groupVisible[0],placement:"left-start",width:"340",trigger:"manual","popper-class":"ds-seat-design-popover"}},[n("div",{staticClass:"header"},[e._v(" 度量 "),n("i",{staticClass:"el-icon-arrow-right",on:{click:function(t){return e.closeGroup(0)}}})]),n("div",{staticClass:"inner"},[n("div",{staticClass:"title"},[n("label",{staticClass:"label-box"},[e._v("当前对象：")]),n("span",{domProps:{textContent:e._s(e.getInfoTypeName())}})]),n("div",{staticClass:"inner-item"},[n("label",{staticClass:"label-box"},[e._v("X")]),n("el-input-number",{attrs:{size:"mini",controls:!1},model:{value:e.info.left,callback:function(t){e.$set(e.info,"left",t)},expression:"info.left"}}),n("label",{staticClass:"label-box",staticStyle:{"margin-left":"5px"}},[e._v("Y")]),n("el-input-number",{attrs:{size:"mini",controls:!1},model:{value:e.info.top,callback:function(t){e.$set(e.info,"top",t)},expression:"info.top"}})],1),n("div",{staticClass:"inner-item"},[n("label",{staticClass:"label-box"},[e._v("宽")]),n("el-input-number",{attrs:{size:"mini",min:0,controls:!1},model:{value:e.info.width,callback:function(t){e.$set(e.info,"width",t)},expression:"info.width"}}),n("label",{staticClass:"label-box",staticStyle:{"margin-left":"5px"}},[e._v("高")]),n("el-input-number",{attrs:{size:"mini",min:0,controls:!1},model:{value:e.info.height,callback:function(t){e.$set(e.info,"height",t)},expression:"info.height"}})],1),n("div",{staticClass:"inner-item"},[n("label",{staticClass:"label-box"},[e._v("角度")]),n("el-input-number",{attrs:{size:"mini",min:0,max:360,controls:!1},model:{value:e.info.angle,callback:function(t){e.$set(e.info,"angle",t)},expression:"info.angle"}})],1),"group"===e.info.type?[n("div",{staticClass:"inner-item"},[n("label",{staticClass:"label-box"},[e._v("成员宽")]),n("el-input-number",{attrs:{size:"mini",controls:!1},model:{value:e.memberWidth,callback:function(t){e.memberWidth=t},expression:"memberWidth"}}),n("label",{staticClass:"label-box"},[e._v("成员高")]),n("el-input-number",{attrs:{size:"mini",controls:!1},model:{value:e.memberHeight,callback:function(t){e.memberHeight=t},expression:"memberHeight"}})],1),n("div",{staticClass:"inner-item"},[n("label",{staticClass:"label-box"},[e._v("行间距")]),n("el-input-number",{attrs:{value:e.memberSpaceTop,size:"mini",controls:!1},on:{change:e.printHang}}),n("label",{staticClass:"label-box"},[e._v("列间距")]),n("el-input-number",{attrs:{size:"mini",controls:!1},model:{value:e.memberSpaceLeft,callback:function(t){e.memberSpaceLeft=t},expression:"memberSpaceLeft"}})],1)]:e._e()],2),n("i",{staticClass:"iconfont icon-resize-",attrs:{slot:"reference"},slot:"reference"})])],1),n("div",{staticClass:"box-item",on:{click:function(t){return e.showGroup(1)}}},[n("el-popover",{attrs:{value:e.groupVisible[1],placement:"left",width:"340",trigger:"manual","popper-class":"ds-seat-design-popover"}},[n("div",{staticClass:"header"},[e._v(" 属性 "),n("i",{staticClass:"el-icon-arrow-right",on:{click:function(t){return e.closeGroup(1)}}})]),n("div",{staticClass:"inner"},["bed"===e.info.type||"bedGroup"===e.info.type?n("div",{staticClass:"inner-item"},[n("label",{staticClass:"label-box"},[e._v("宿舍")]),n("el-input",{attrs:{size:"mini"},model:{value:e.info.dormName,callback:function(t){e.$set(e.info,"dormName",t)},expression:"info.dormName"}}),n("label",{staticClass:"label-box",staticStyle:{"margin-left":"5px"}},[e._v("楼层")]),n("el-input",{attrs:{size:"mini"},model:{value:e.info.floorName,callback:function(t){e.$set(e.info,"floorName",t)},expression:"info.floorName"}})],1):e._e(),"bed"===e.info.type||"bedGroup"===e.info.type?n("div",{staticClass:"inner-item"},[n("label",{staticClass:"label-box"},[e._v("类型")]),n("el-select",{attrs:{size:"mini"},model:{value:e.info.dormType,callback:function(t){e.$set(e.info,"dormType",t)},expression:"info.dormType"}},e._l(e.sexList,(function(e,t){return n("el-option",{key:t,attrs:{label:e.txt,value:e.val}})})),1),n("label",{staticClass:"label-box",staticStyle:{"margin-left":"5px"}},[e._v("备注")]),n("el-input",{attrs:{size:"mini"},model:{value:e.info.remark,callback:function(t){e.$set(e.info,"remark",t)},expression:"info.remark"}})],1):e._e(),"seat"===e.info.type||"seatGroup"===e.info.type?n("div",{staticClass:"inner-item"},[n("label",{staticClass:"label-box"},[e._v("房间号")]),n("el-input",{attrs:{size:"mini"},model:{value:e.info.roomNum,callback:function(t){e.$set(e.info,"roomNum",t)},expression:"info.roomNum"}}),n("label",{staticClass:"label-box",staticStyle:{"margin-left":"5px"}},[e._v("备注")]),n("el-input",{attrs:{size:"mini"},model:{value:e.info.remark,callback:function(t){e.$set(e.info,"remark",t)},expression:"info.remark"}})],1):e._e(),n("div",{staticClass:"inner-item"},[n("label",{staticClass:"label-box",staticStyle:{width:"80px","margin-right":"10px"}},[e._v("显示文本")]),n("el-radio-group",{model:{value:e.info.showText,callback:function(t){e.$set(e.info,"showText",t)},expression:"info.showText"}},[n("el-radio",{attrs:{label:1}},[e._v("是")]),n("el-radio",{attrs:{label:2}},[e._v("否")])],1)],1),e.info.memberList&&e.info.memberList.length>0?n("div",{staticClass:"inner-item"},e._l(e.info.memberList,(function(t,a){return n("div",{key:a},[n("div",{staticClass:"title"},[e._v("1行1列:")]),n("label",{staticClass:"label-box"},[e._v("序号")]),n("el-input-number",{attrs:{size:"mini",min:0,controls:!1}}),n("label",{staticClass:"label-box"},[e._v("文本")]),n("el-input-number",{attrs:{size:"mini",min:0,controls:!1}})],1)})),0):e._e(),n("div",{staticClass:"inner-item"},[n("label",{staticClass:"label-box"},[e._v("序号")]),n("el-input-number",{attrs:{size:"mini",min:0,controls:!1},model:{value:e.info.seatNum,callback:function(t){e.$set(e.info,"seatNum",t)},expression:"info.seatNum"}}),n("label",{staticClass:"label-box"},[e._v("文本")]),n("el-input",{attrs:{size:"mini"},model:{value:e.info.seatTxt,callback:function(t){e.$set(e.info,"seatTxt",t)},expression:"info.seatTxt"}})],1)]),n("i",{staticClass:"iconfont icon-xingzhuang-wenzi",attrs:{slot:"reference"},slot:"reference"})])],1),n("div",{staticClass:"box-item",on:{click:function(t){return e.showGroup(2)}}},[n("el-popover",{attrs:{value:e.groupVisible[2],placement:"left-start",width:"365",trigger:"manual","popper-class":"ds-seat-design-popover"}},[n("input",{ref:"uploadInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*",multiple:""}}),n("div",{staticClass:"header"},[e._v(" 上传 "),n("i",{staticClass:"el-icon el-icon-s-tools",on:{click:function(t){e.dialogVisible=!0}}}),n("i",{staticClass:"el-icon-arrow-right",on:{click:function(t){return e.closeGroup(2)}}})]),n("div",{staticClass:"inner",staticStyle:{"padding-top":"15px","padding-right":"0"}},e._l(e.stateList,(function(t,a){return n("div",{key:t.statusValue,staticClass:"upload-box"},[n("img",{attrs:{src:e.getImagePath(t.img)},on:{click:function(n){return e.uploadMultiple(t)}}}),n("p",[e._v(e._s(t.statusText))])])})),0),n("i",{staticClass:"iconfont icon-tupiantianjia",attrs:{slot:"reference"},slot:"reference"})])],1),n("el-dialog",{attrs:{title:"座位状态管理",visible:e.dialogVisible,modal:!1,width:"35%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",{staticClass:"dialog-box"},[n("p",{staticClass:"title"},[e._v("说明")]),n("p",[e._v("statusText - 座位状态")]),n("p",[e._v("statusValue - 座位状态对应的值")]),n("p",[e._v("couldSeat - 此状态下人员能否入座（1能、2否）")]),n("p",{staticClass:"title"},[e._v("默认状态")]),n("p",[n("span",[e._v("正常|1|1")]),n("span",[e._v("已排|2|2")])]),n("p",[n("span",[e._v("禁用|3|2")]),n("span",[e._v("锁定|4|2")])]),n("p",{staticClass:"title"},[e._v("自定义座位状态")]),n("el-input",{attrs:{type:"textarea",rows:5,placeholder:"statusText | statusValue | couldSeat 以|分隔，一行定义一种状态"},model:{value:e.statusKv,callback:function(t){e.statusKv=t},expression:"statusKv"}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.saveStatus}},[e._v("确 定")])],1)])],1):e._e()},i=[],o=n("91e3"),s=o["a"],l=n("2877"),r=Object(l["a"])(s,a,i,!1,null,null,null);t["a"]=r.exports},e396:function(e,t,n){"use strict";(function(e){var a=n("5530"),i=n("2f62");t["a"]={name:"LeftTools",data:function(){return{leftMenu:{activeName:["对象","辅助对象","自定义对象"],group:[{title:"对象",items:[{name:"座席",type:"seat"},{name:"床位",type:"bed"}]},{title:"辅助对象",items:[{name:"矩形",type:"rect"},{name:"文字",type:"text"}]},{title:"自定义对象",items:[{name:"床位"}]}]}}},computed:Object(a["a"])({},Object(i["b"])("seatDesign",{compelPanelSize:"compelPanelSize"})),mounted:function(){var t=this;e(".ds-tool-item").draggable({helper:function(){var t=e(this).text();return e('<div class="drag-item">'.concat(t,"</div>"))},cursor:"default",cursorAt:{top:0,left:0},stop:function(n,a){var i=dsf.math.convertLocalCoordinate(".seat-designer-page",{x:n.pageX,y:n.pageY}),o=t.compelPanelSize.width||e(".seat-designer-page").width(),s=t.compelPanelSize.height||e(".seat-designer-page").height();if(i.x>=0&&i.x<=o&&i.y>=0&&i.y<=s){var l=e(n.target).data("type"),r=e(n.target).attr("name");t.$store.commit("seatDesign/addSeat2Panel",{id:dsf.uuid(),pageX:n.pageX,pageY:n.pageY,type:l,seatTxt:r})}}})}}}).call(this,n("1157"))},e69f:function(e,t,n){"use strict";(function(e){n("d81d"),n("a434"),n("a9e3");var a=n("8050");t["a"]={name:"DesFlexGrid",mixins:[a["a"]],data:function(){return{form:null,formNode:null,tableData:[],sizeMap:[{size:"lg",desc:"≥1920px"},{size:"xl",desc:"≥1200px"},{size:"md",desc:"≥992px"},{size:"sm",desc:"≥768px"},{size:"xs",desc:"<768px"}]}},created:function(){},beforeMount:function(){},mounted:function(){var t=this,n=this.owner.$$getComponent().slots;if(n=dsf.mix(!0,[],n),n[0]){var a=n[0].controls;e.each(a,(function(e){t.tableData.push(e)}))}},methods:{rowClickHandler:function(){},addCol:function(){var e={span:6,height:"auto"};this.tableData.push(dsf.designer.createComponent("dsf.col",e))},vaildate:function(){return 0!=data.length||(dsf.layer.pc.message("至少存在一格",!1),!1)},deleted:function(e){var t=this;if(e.row.slots[0].controls.length>0){var n=e.row.slots[0].controls;dsf.layer.pc.confirm("栅格中存在"+n.length+"个子组件,删除该单元格子组件将一起被删除。<br/>是否确定要继续?").then((function(){dsf.array.remove(t.tableData,e.row)})).catch((function(){}))}else dsf.array.remove(this.tableData,e.row)},up:function(e){if(e.$index>0){var t=this.tableData[e.$index],n=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(n-1,0,t)}},down:function(e){if(this.tableData.length-1>e.$index){var t=this.tableData[e.$index],n=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(n+1,0,t)}},insert:function(e){var t={span:6,height:"auto"};this.tableData.splice(e.$index+1,0,dsf.designer.createComponent("dsf.col",t))},yes:function(){var t=this,n=this.tableData;e.each(n,(function(n){t.checkMaxSpan(n,"span");var a=e.map(t.sizeMap,"size");e.each(a,(function(e){t.checkMaxSpan(n,e)}))})),this.owner.slots[0].controls=[],this.$nextTick((function(){var a=t.owner.slots[0].controls;e.each(n,(function(e){a.push(e)}))}))},checkMaxSpan:function(e,t){e[t]=dsf.isNumber(e[t])?Number(e[t]):null,e[t]&&e[t]>24&&(e[t]=24),e[t]&&e[t]<0&&(e[t]=null)}}}}).call(this,n("2ef0"))},f0e3:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-question-formwrap ds-question-item"},[n("div",{staticClass:"example question-slider"},[n("el-form",{attrs:{"label-position":"top"}},[n("el-form-item",{attrs:{prop:"value",label:e.exampleLabel}},[n("el-slider",{attrs:{min:e.form.min,max:e.form.max,disabled:e.form.readOnly,step:e.form.step},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1)],1),n("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.rules,"label-width":"auto","label-position":"left"}},[n("el-row",{attrs:{gutter:15}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{prop:"questionBody","label-width":"0"}},[n("el-input",{attrs:{placeholder:"请输入题干"},model:{value:e.form.questionBody,callback:function(t){e.$set(e.form,"questionBody",t)},expression:"form.questionBody"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"step",label:"最小滑动单位:"}},[n("el-input-number",{attrs:{min:e.form.min,max:e.form.max},model:{value:e.form.step,callback:function(t){e.$set(e.form,"step",t)},expression:"form.step"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"min",label:"最小值:"}},[n("el-input-number",{attrs:{min:0,max:e.form.max},model:{value:e.form.min,callback:function(t){e.$set(e.form,"min",t)},expression:"form.min"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"max",label:"最大值:"}},[n("el-input-number",{attrs:{min:e.form.min},model:{value:e.form.max,callback:function(t){e.$set(e.form,"max",t)},expression:"form.max"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"minText",label:"最小值显示文本:"}},[n("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.minText,callback:function(t){e.$set(e.form,"minText",t)},expression:"form.minText"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"maxText",label:"最大值显示文本:"}},[n("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.maxText,callback:function(t){e.$set(e.form,"maxText",t)},expression:"form.maxText"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"readOnly",label:"本题不允许填写:"}},[n("el-switch",{model:{value:e.form.readOnly,callback:function(t){e.$set(e.form,"readOnly",t)},expression:"form.readOnly"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"visible",label:"本题是否显示:"}},[n("el-switch",{model:{value:e.form.visible,callback:function(t){e.$set(e.form,"visible",t)},expression:"form.visible"}})],1)],1),n("el-col",{attrs:{span:24}},[n("div",{staticClass:"ljsz"},[n("span",{staticClass:"label"},[e._v("逻辑设置:")]),n("span",{staticClass:"btn",on:{click:e.showRela}},[e._v("题目关联")])])])],1)],1)],1)},i=[],o=(n("99af"),n("b773")),s={mixins:[o["a"]],props:["owner"],data:function(){return{value:0,form:{questionBody:"请输入题干",step:1,readOnly:!1,visible:!0,min:0,max:100,minText:"",maxText:""},rules:{questionBody:[{required:!0,message:"请输入题干"}]}}},computed:{exampleLabel:function(){return"".concat(this.owner.questionIndex,".").concat(this.form.questionBody,"(").concat(this.value,")")},exampleRules:function(){return this.form.required?[{required:!0,trigger:"change"}]:null}},methods:{}},l=s,r=n("2877"),c=Object(r["a"])(l,a,i,!1,null,null,null);t["a"]=c.exports},f70e:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var a="file/upload/",i={KEY_DELETE:"key_delete",KEY_CTRL_D:"key_ctrl_d",BODY_EMPTY_CLICK:"body_empty_click",SEAT_POP:"seat_pop",GET_ACTIVE_SEAT:"get_active_seat"}},f939:function(e,t,n){"use strict";(function(e,a){n("7db0"),n("c740"),n("4160"),n("d81d"),n("a434"),n("159b");var i=n("b85c"),o=n("8050");function s(){var e,t=this,n=[],a=Object(i["a"])(t.tools);try{for(a.s();!(e=a.n()).done;){var o=e.value;o.checked&&n.push(o.val)}}catch(err){a.e(err)}finally{a.f()}t.checkedTools=n}function l(){var e=this,t=!e.tools.find((function(e){return!e.checked}));if(t)return e.checkAll=!0,void(e.isIndeterminate=!1);var n=e.tools.findIndex((function(e){return e.checked}));if(-1!==n)return e.checkAll=!1,void(e.isIndeterminate=!0);e.checkAll=!1,e.isIndeterminate=!1}function r(){var e=this;e.dialogUe&&e.dialogUe.destroy(),e.dialogUe=UE.getEditor("u_template",{autoHeightEnabled:!1,toolbars:[e.checkedTools]}),e.dialogUe.ready((function(){c.call(e)}))}function c(){var e=this;a("#u_template").css("width","100%"),e.dialogUe.setHeight(390)}t["a"]={name:"DesUeditorToolbar",mixins:[o["a"]],data:function(){return{checkAll:!1,tools:[{val:"fullscreen",text:"全屏"},{val:"source",text:"源代码"},{val:"undo",text:"撤销"},{val:"redo",text:"重做"},{val:"bold",text:"加粗"},{val:"italic",text:"斜体"},{val:"underline",text:"下划线"},{val:"fontborder",text:"字符边框"},{val:"strikethrough",text:"删除线"},{val:"superscript",text:"上标"},{val:"subscript",text:"下标"},{val:"removeformat",text:"清除格式"},{val:"formatmatch",text:"格式刷"},{val:"autotypeset",text:"自动排版"},{val:"blockquote",text:"引用"},{val:"pasteplain",text:"纯文本粘贴模式"},{val:"forecolor",text:"字体颜色"},{val:"backcolor",text:"背景色"},{val:"insertorderedlist",text:"有序列表"},{val:"insertunorderedlist",text:"无序列表"},{val:"selectall",text:"全选"},{val:"cleardoc",text:"清空文档"},{val:"rowspacingtop",text:"段前距"},{val:"rowspacingbottom",text:"段后距"},{val:"lineheight",text:"行间距"},{val:"customstyle",text:"自定义标题"},{val:"paragraph",text:"段落"},{val:"fontfamily",text:"字体"},{val:"fontsize",text:"字号"},{val:"directionalityltr",text:"从左向右输入"},{val:"directionalityrtl",text:"从右向左输入"},{val:"indent",text:"首行缩进"},{val:"justifyleft",text:"居左对齐"},{val:"justifycenter",text:"居中对齐"},{val:"justifyright",text:"居右对齐"},{val:"justifyjustify",text:"两端对齐"},{val:"touppercase",text:"字母大写"},{val:"tolowercase",text:"字母小写"},{val:"link",text:"超链接"},{val:"unlink",text:"取消链接"},{val:"anchor",text:"锚点"},{val:"imagenone",text:"图片位置默认"},{val:"imageleft",text:"图片左浮动"},{val:"imageright",text:"图片右浮动"},{val:"imagecenter",text:"图片居中"},{val:"simpleupload",text:"单图上传"},{val:"insertimage",text:"多图上传"},{val:"emotion",text:"表情"},{val:"scrawl",text:"涂鸦"},{val:"insertvideo",text:"插入视频"},{val:"music",text:"音乐"},{val:"attachment",text:"附件"},{val:"map",text:"百度地图"},{val:"gmap",text:"Google地图"},{val:"insertframe",text:"插入Iframe"},{val:"insertcode",text:"插入代码"},{val:"webapp",text:"百度应用"},{val:"pagebreak",text:"分页"},{val:"template",text:"模板"},{val:"background",text:"背景"},{val:"horizontal",text:"分隔线"},{val:"date",text:"日期"},{val:"time",text:"时间"},{val:"spechars",text:"特殊字符"},{val:"snapscreen",text:"截图"},{val:"wordimage",text:"图片转存"},{val:"inserttable",text:"插入表格"},{val:"deletetable",text:"删除表格"},{val:"insertparagraphbeforetable",text:"表格前插入行"},{val:"insertrow",text:"表格插入行"},{val:"deleterow",text:"表格删除行"},{val:"insertcol",text:"表格插入列"},{val:"deletecol",text:"表格删除列"},{val:"mergecells",text:"表格合并多个单元格"},{val:"mergeright",text:"表格右合并单元格"},{val:"mergedown",text:"表格下合并单元格"},{val:"splittocells",text:"表格完全拆分单元格"},{val:"splittorows",text:"表格拆分成行"},{val:"splittocols",text:"表格拆分成列"},{val:"charts",text:"图表"},{val:"print",text:"打印"},{val:"preview",text:"预览"},{val:"searchreplace",text:"查询替换"},{val:"drafts",text:"从草稿箱加载"},{val:"help",text:"帮助"}],checkedTools:this.owner.toolBar,isIndeterminate:!1,dialogUe:null}},watch:{checkedTools:function(){r.call(this)}},created:function(){var e,t=this,n=t.tools.map((function(e){return e.checked=!1,e})),a=Object(i["a"])(t.checkedTools);try{var o=function(){var t=e.value,a=n.findIndex((function(e){return e.val===t}));n[a].checked=!0};for(a.s();!(e=a.n()).done;)o()}catch(err){a.e(err)}finally{a.f()}t.tools=n,l.call(t)},mounted:function(){r.call(this)},methods:{chooseItem:function(t,n){var a=this,i=e.assign({},t,{checked:!t.checked});a.tools.splice(n,1,i),s.call(a),l.call(a)},chooseAll:function(){var e=this;e.isIndeterminate=!1,e.checkAll?e.tools.forEach((function(e){e.checked=!0})):e.tools.forEach((function(e){e.checked=!1})),s.call(e)},yes:function(){return this.dialogUe.destroy(),this.checkedTools}}}}).call(this,n("2ef0"),n("1157"))}}]);
//# sourceMappingURL=dsf-designer.js.map