{"version":3,"sources":["webpack:///./platform/dsf/designer/flow/flow.vue?1103","webpack:///./platform/dsf/designer/flow/flowInfo.vue?030b","webpack:///./node_modules/core-js/modules/es.string.sub.js","webpack:///./node_modules/core-js/modules/es.set.js","webpack:///./platform/dsf/designer/flow/flow.vue?0143","webpack:///./platform/dsf/designer/flow/Lane.js","webpack:///./platform/dsf/designer/flow/flowInfo.vue?5878","webpack:///platform/dsf/designer/flow/flowInfo.vue","webpack:///./platform/dsf/designer/flow/flowInfo.vue?0030","webpack:///./platform/dsf/designer/flow/flowInfo.vue","webpack:///./platform/dsf/designer/flow/flowContent.vue?dd18","webpack:///platform/dsf/designer/flow/flowContent.vue","webpack:///./platform/dsf/designer/flow/flowContent.vue?f8e8","webpack:///./platform/dsf/designer/flow/flowContent.vue","webpack:///./platform/dsf/designer/flow/Lanes.vue?05b5","webpack:///platform/dsf/designer/flow/Lanes.vue","webpack:///./platform/dsf/designer/flow/Lanes.vue?6466","webpack:///./platform/dsf/designer/flow/Lanes.vue","webpack:///platform/dsf/designer/flow/flow.vue","webpack:///./platform/dsf/designer/flow/flow.vue?bee5","webpack:///./platform/dsf/designer/flow/flow.vue","webpack:///./platform/dsf/designer/flow/Lanes.vue?c993","webpack:///./platform/dsf/designer/flow/flowContent.vue?ad25"],"names":["$","createHTML","forcedStringHTMLMethod","target","proto","forced","sub","this","collection","collectionStrong","module","exports","init","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","doSave","_v","_m","class","selected","isDrawLine","drawLine","$event","addLane","disabled","scale","rootScale","_s","Math","round","exportFlow","saveAsFlow","openFlow","startTestFlow","monitorFlow","ref","onScroll","style","width","toPx","height","transform","transformOrigin","has_v_head","lanes","vertical","has_h_head","horizontal","baseLine","_e","flowInfo","lines","nodes","events","checked","config","model","value","callback","$$v","activeNames","expression","_l","tool","index","key","title","item","type","name","sort","dragTool","img","staticStyle","event","dragBoundaryEvent","url","staticRenderFns","Lane","opt","options","Object","assign","size","direction","LaneDirection","id","isRender","attributes","getAttributes","CorridorProperties","Name","ID","directives","rawName","status","itemIndex","attr","hide","isBase","slot","nativeOn","showHelp","showHeplerMark","$set","domProps","desc","nodeType","nodeName2","minValue","changeVesion","max","changeProperty","unit","show","editor","nodeName1","option","i","text","$index","doOpenDialog","components","DsfDesignerDialog","props","default","Array","data","curSelectObj","curNodeObj","curElement","AppInfo","computed","Number","oldValue","split","value0","watch","loadPropertyWindow","ui","mounted","$bus","$on","methods","keys","obj","loadPropertyDom","setPropertyData","pro","Node","Type","language","group","groupIndex","json","rows","nodeLevel","nodeName","push","forEach","value1","value2","showRob","rowData","Line","Rule","RangeRule","taskMsg","field","nodeName3","code","content","params","dsf","layer","pc","openDialog","overflow","btns","component","Lines","Events","subprocess","Boolean","val","created","initFlow","flow","lane","left","top","selectLane","hideEdit","composing","edit","dragLane","current","minSize","document","addEventListener","$emit","e","stopPropagation","dropLane","pageX","page","svgRoot","scrollLeft","pageY","scrollTop","showV","showH","$store","commit","moveLane","resize","minLeft","mouse","x","y","isEdit","window","FlowInfo","FlowContent","Lanes","dragNode","dragEvent","endTarget","maxWidth","maxHeight","xmlId","distance","cloneObj","crashNode","state","dragSize","maxSizeOffset","flowTools","boundaryEvents","showLineV","showLineH","isGlobalPosMove","globalPos","globalMoveLastMouse","globalRect","isGlobalSelect","selectGlobalPos","selectGlobalPonits","start","end","globalSelect","isCtrlKey","ctrlCopyNodes","isCopyNodes","copyNodesPos","copyNodes","reset","ds_page","clientWidth","clientHeight","initData","$http","initEvent","parentAutoScroll","autoScroll","dragCloneEvent","startGlobalMove","startCopyNodes","keydown","onresize","$refs","root","scrollwheel","preventDefault","copyNewNode","ev","dataTransfer","setDragImage","Image","cloneNode","setAttribute","offset","copy","copyNode","className","position","zIndex","pointerEvents","cursor","body","appendChild","createCopyNodes","selectedList","node","point","getPoint","getDisplacement","move_p","last_p","nodesMove","displacement","ctrlKey","dragToolOver","getTargetIsNodes","indexOf","contains","parentElement","getBeforeCopyLine","lineIds","line","from","fromType","to","newLine","tools","fromNodeIds","toNodeIds","newLines","resetLineFromAndTo","nodeId","newNode","in","out","copyEventsLines","linkInfo","nodesMoveEnd","isMove","nodeMoveEnd","parentNodeId","deleteNode","mouseConvert","p","padding","fromCopyId","copyNodeNext","removeChild","copyNodeEvent","dragToolEnd","nodeResize","BoundaryEvent","offsetY","offsetX","dragEventOver","parentAndSub","subNode","points","getters","comp","parentNode","dragEventEnd","touches","splice","deleteEvent","addNewEvent","copyEvent","copyEvents","fromId","all","realDistance","min","getDistance","dis","computedPoint","getOptions","mp","addNode","addSubNode","children","showSubNode","readOnly","keyCode","setTimeout","deleteLine","l","find","remove","deleteFromOrOut","f_index","t_index","createLane","before","getFromNodes","arr","lineId","fn","getToNodes","loadElement","NodeList","Nodes","isArray","LineList","EventList","dataMap","ElementList","element","parseFloat","BaseInfo","subNodes","newEvent","fromOffset","toOffset","path","isHide","WorkFlow","LaneList","fromNodearr","copyMap","nc","toNodearr","temp","line_copy","StartNodeID","infoCopy","deleteLines","OutLine","SendConditions","rfn","IsEnabled","paper","child","postData","arrowEnd","sData","JSON","stringify","getFlowAllObjectMap","dm","info","lastV","horizontalWidth","minWidth","lastH","verticalHeight","minHeight","maxHeigth","arg","abs","h","parent","setCursor","evt","tagName","segmen","setRootCursor","getRect","globalMove","current_p","x_move","y_move","n","getWheelDirect","wheelDelta","detail","selectGlobalMove","createElement","selectGlobalEnd","documentCopy","pasteNode"],"mappings":";0JAAA,yBAAmjB,EAAG,G,oCCAtjB,yBAA+kB,EAAG,G,oCCCllB,IAAIA,EAAI,EAAQ,QACZC,EAAa,EAAQ,QACrBC,EAAyB,EAAQ,QAIrCF,EAAE,CAAEG,OAAQ,SAAUC,OAAO,EAAMC,OAAQH,EAAuB,QAAU,CAC1EI,IAAK,WACH,OAAOL,EAAWM,KAAM,MAAO,GAAI,Q,kCCRvC,IAAIC,EAAa,EAAQ,QACrBC,EAAmB,EAAQ,QAI/BC,EAAOC,QAAUH,EAAW,OAAO,SAAUI,GAC3C,OAAO,WAAiB,OAAOA,EAAKL,KAAMM,UAAUC,OAASD,UAAU,QAAKE,MAC3EN,I,yCCRH,IAAIO,EAAS,WAAa,IAAIC,EAAIV,KAASW,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,0BAA0BC,MAAM,CAAC,GAAK,aAAa,CAACH,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,IAAI,CAACE,YAAY,uBAAuBE,GAAG,CAAC,MAAQP,EAAIQ,SAAS,CAACL,EAAG,IAAI,CAACE,YAAY,yBAAyBF,EAAG,OAAO,CAACH,EAAIS,GAAG,UAAUT,EAAIU,GAAG,GAAGV,EAAIU,GAAG,GAAGV,EAAIU,GAAG,GAAGV,EAAIU,GAAG,GAAGP,EAAG,IAAI,CAACE,YAAY,uBAAuBM,MAAM,CAAEC,SAAUZ,EAAIa,YAAaN,GAAG,CAAC,MAAQP,EAAIc,WAAW,CAACX,EAAG,IAAI,CAACE,YAAY,4BAA4BF,EAAG,OAAO,CAACH,EAAIS,GAAG,UAAUN,EAAG,IAAI,CAACE,YAAY,wBAAwB,CAACF,EAAG,IAAI,CAACE,YAAY,gCAAgCL,EAAIU,GAAG,GAAGP,EAAG,KAAK,CAACE,YAAY,mBAAmB,CAACF,EAAG,KAAK,CAACI,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAIgB,QAAQ,eAAe,CAACb,EAAG,OAAO,CAACH,EAAIS,GAAG,cAAcN,EAAG,KAAK,CAACI,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAIgB,QAAQ,iBAAiB,CAACb,EAAG,OAAO,CAACH,EAAIS,GAAG,kBAAkBN,EAAG,IAAI,CAACE,YAAY,8BAA8B,CAACF,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,IAAI,CAACE,YAAY,gBAAgBM,MAAM,CAAEM,SAAUjB,EAAIkB,OAAS,IAAMX,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAImB,UAAU,YAAYhB,EAAG,OAAO,CAACE,YAAY,WAAW,CAACL,EAAIS,GAAGT,EAAIoB,GAAGC,KAAKC,MAAkB,IAAZtB,EAAIkB,QAAc,OAAOf,EAAG,IAAI,CAACE,YAAY,eAAeM,MAAM,CAAEM,SAAUjB,EAAIkB,OAAS,GAAIX,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAImB,UAAU,YAAYhB,EAAG,OAAO,CAACH,EAAIS,GAAG,UAAUN,EAAG,IAAI,CAACE,YAAY,wBAAwB,CAACF,EAAG,IAAI,CAACE,YAAY,wBAAwBL,EAAIU,GAAG,GAAGP,EAAG,KAAK,CAACE,YAAY,mBAAmB,CAACF,EAAG,IAAI,CAACI,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAIuB,gBAAgB,CAACpB,EAAG,OAAO,CAACH,EAAIS,GAAG,WAAWN,EAAG,IAAI,CAACE,YAAY,QAAQE,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAIwB,gBAAgB,CAACrB,EAAG,OAAO,CAACH,EAAIS,GAAG,aAAaN,EAAG,IAAI,CAACI,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAIyB,cAAc,CAACtB,EAAG,OAAO,CAACH,EAAIS,GAAG,eAAeN,EAAG,IAAI,CAACE,YAAY,wBAAwB,CAACF,EAAG,IAAI,CAACE,YAAY,6BAA6BL,EAAIU,GAAG,GAAGP,EAAG,KAAK,CAACE,YAAY,mBAAmB,CAACF,EAAG,IAAI,CAACI,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAIuB,gBAAgB,CAACpB,EAAG,OAAO,CAACH,EAAIS,GAAG,UAAUN,EAAG,IAAI,CAACE,YAAY,SAAS,CAACL,EAAIS,GAAG,SAASN,EAAG,IAAI,CAACE,YAAY,SAAS,CAACL,EAAIS,GAAG,aAAaN,EAAG,IAAI,CAACE,YAAY,SAAS,CAACL,EAAIS,GAAG,SAASN,EAAG,IAAI,CAACE,YAAY,eAAe,CAACL,EAAIS,GAAG,UAAUN,EAAG,IAAI,CAACI,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAIyB,cAAc,CAACtB,EAAG,OAAO,CAACH,EAAIS,GAAG,UAAUN,EAAG,IAAI,CAACE,YAAY,SAAS,CAACL,EAAIS,GAAG,SAASN,EAAG,IAAI,CAACE,YAAY,SAAS,CAACL,EAAIS,GAAG,aAAaN,EAAG,IAAI,CAACE,YAAY,SAAS,CAACL,EAAIS,GAAG,SAASN,EAAG,IAAI,CAACE,YAAY,eAAe,CAACL,EAAIS,GAAG,UAAUN,EAAG,IAAI,CAACE,YAAY,QAAQE,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAI0B,mBAAmB,CAACvB,EAAG,OAAO,CAACH,EAAIS,GAAG,YAAYN,EAAG,IAAI,CAACI,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAI2B,iBAAiB,CAACxB,EAAG,OAAO,CAACH,EAAIS,GAAG,oBAAoBN,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,MAAM,CAACyB,IAAI,UAAUvB,YAAY,kDAAkDE,GAAG,CAAC,OAAS,SAASQ,GAAQ,OAAOf,EAAI6B,SAASd,MAAW,CAACZ,EAAG,MAAM,CAACyB,IAAI,YAAYvB,YAAY,OAAOyB,MAAM,CACjiGC,MAAO/B,EAAIgC,KAAKhC,EAAIkB,MAAQ,EAAIlB,EAAI+B,MAAQ/B,EAAIkB,MAAQlB,EAAI+B,MAAQ/B,EAAIkB,OACxEe,OAAQjC,EAAIgC,KAAKhC,EAAIkB,MAAQ,EAAIlB,EAAIiC,OAASjC,EAAIkB,MAAQlB,EAAIiC,OAASjC,EAAIkB,OAC3EgB,UAAY,SAAWlC,EAAIkB,MAAQ,kBACnCiB,gBAAiB,YAChB7B,MAAM,CAAC,GAAK,aAAa,CAACH,EAAG,MAAM,CAACyB,IAAI,OAAOvB,YAAY,OAAOM,MAAM,CACvEyB,WAAYpC,EAAIqC,OAASrC,EAAIqC,MAAMC,SAASzC,OAAS,EACrD0C,WAAYvC,EAAIqC,OAASrC,EAAIqC,MAAMG,WAAW3C,OAAS,GACvDiC,MAAM,CACNC,MAAO/B,EAAIgC,KAAKhC,EAAIkB,MAAQ,EAAIlB,EAAI+B,MAAQ/B,EAAIkB,MAAQlB,EAAI+B,MAAQ/B,EAAIkB,OACxEe,OAAQjC,EAAIgC,KAAKhC,EAAIkB,MAAQ,EAAIlB,EAAIiC,OAASjC,EAAIkB,MAAQlB,EAAIiC,OAASjC,EAAIkB,SACzE,CAAElB,EAAIyC,SAAc,MAAEtC,EAAG,OAAO,CAACE,YAAY,aAAayB,MAAM,CAAGI,UAAY,eAAkBlC,EAAIyC,SAAa,KAAI,eAAkBzC,EAAI0C,KAAM1C,EAAIyC,SAAc,MAAEtC,EAAG,OAAO,CAACE,YAAY,aAAayB,MAAM,CAAGI,UAAY,kBAAqBlC,EAAIyC,SAAY,IAAI,YAAezC,EAAI0C,KAAKvC,EAAG,eAAe,CAACyB,IAAI,cAActB,MAAM,CAAC,YAAYN,EAAI2C,SAAS,eAAe3C,EAAIa,WAAW,MAAQb,EAAI4C,MAAM,MAAQ5C,EAAI6C,MAAM,MAAQ7C,EAAIqC,MAAM,OAASrC,EAAI8C,OAAO,QAAU9C,EAAI+C,QAAQ,OAAS/C,EAAIgD,UAAU7C,EAAG,MAAM,CAACyB,IAAI,aAAavB,YAAY,oBAAoB,CAACF,EAAG,MAAM,CAACyB,IAAI,SAASvB,YAAY,UAAU,CAACF,EAAG,QAAQ,CAACG,MAAM,CAAC,MAAQN,EAAIqC,OAASrC,EAAIqC,MAAMC,SAAS,QAAUtC,EAAI+C,SAASxC,GAAG,CAAC,QAAUP,EAAIgB,YAAY,GAAGb,EAAG,MAAM,CAACyB,IAAI,SAASvB,YAAY,UAAU,CAACF,EAAG,QAAQ,CAACG,MAAM,CAAC,MAAQN,EAAIqC,OAASrC,EAAIqC,MAAMG,WAAW,QAAUxC,EAAI+C,SAASxC,GAAG,CAAC,QAAUP,EAAIgB,YAAY,MAAM,SAASb,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACE,YAAY,uBAAuB,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,UAAY,IAAI2C,MAAM,CAACC,MAAOlD,EAAe,YAAEmD,SAAS,SAAUC,GAAMpD,EAAIqD,YAAYD,GAAKE,WAAW,gBAAgB,CAACtD,EAAIuD,GAAIvD,EAAa,WAAE,SAASwD,EAAKC,GAAO,OAAOtD,EAAG,mBAAmB,CAACuD,IAAID,EAAMnD,MAAM,CAAC,MAAQkD,EAAKG,MAAM,KAAOF,IAAQ,CAACtD,EAAG,MAAM,CAACE,YAAY,kCAAkC,CAACL,EAAIuD,GAAIC,EAAS,MAAE,SAASI,GAAM,OAAOzD,EAAG,MAAM,CAACuD,IAAIE,EAAKC,KAAKxD,YAAY,0BAA0BC,MAAM,CAAC,MAAQsD,EAAKE,KAAK,KAAOF,EAAKG,KAAK,SAAWH,EAAKC,KAAK,UAAY,QAAQtD,GAAG,CAAC,UAAY,SAASQ,GAAQ,OAAOf,EAAIgE,SAASjD,EAAQ6C,MAAS,CAACzD,EAAG,MAAM,CAACG,MAAM,CAAC,IAAMsD,EAAKK,IAAI,UAAY,WAAWjE,EAAIS,GAAG,IAAIT,EAAIoB,GAAGwC,EAAKE,MAAM,UAAS3D,EAAG,MAAM,CAAC+D,YAAY,CAAC,MAAQ,WAAW,QAAO/D,EAAG,mBAAmB,CAACG,MAAM,CAAC,MAAQ,OAAO,KAAO,MAAM,CAACH,EAAG,MAAM,CAACE,YAAY,kCAAkCL,EAAIuD,GAAIvD,EAAkB,gBAAE,SAASmE,GAAO,OAAOhE,EAAG,MAAM,CAACuD,IAAIS,EAAMN,KAAKxD,YAAY,2BAA2BC,MAAM,CAAC,MAAQ6D,EAAML,KAAK,SAAWK,EAAMN,OAAO,CAAC1D,EAAG,MAAM,CAACE,YAAY,kBAAkBC,MAAM,CAAC,UAAY,QAAQC,GAAG,CAAC,UAAY,SAASQ,GAAQ,OAAOf,EAAIoE,kBAAkBrD,EAAQoD,MAAU,CAAChE,EAAG,MAAM,CAACG,MAAM,CAAC,IAAM6D,EAAME,IAAI,UAAY,aAAalE,EAAG,OAAO,CAACH,EAAIS,GAAGT,EAAIoB,GAAG+C,EAAML,cAAa,MAAM,IAAI,KAAK3D,EAAG,MAAM,CAACE,YAAY,iBAAiBC,MAAM,CAAC,GAAK,gBAAgB,CAACH,EAAG,YAAY,CAACG,MAAM,CAAC,QAAUN,EAAI+C,QAAQ,MAAQ/C,EAAI6C,MAAM,MAAQ7C,EAAI4C,MAAM,YAAY5C,EAAI2C,aAAa,QACp5E2B,EAAkB,CAAC,WAAa,IAAItE,EAAIV,KAASW,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,IAAI,CAACE,YAAY,wBAAwB,CAACF,EAAG,IAAI,CAACE,YAAY,yBAAyBF,EAAG,OAAO,CAACH,EAAIS,GAAG,WAAW,WAAa,IAAIT,EAAIV,KAASW,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,IAAI,CAACE,YAAY,wBAAwB,CAACF,EAAG,IAAI,CAACE,YAAY,gCAAgCF,EAAG,OAAO,CAACH,EAAIS,GAAG,QAAQN,EAAG,IAAI,CAACE,YAAY,yBAAyBF,EAAG,KAAK,CAACE,YAAY,mBAAmB,CAACF,EAAG,IAAI,CAACE,YAAY,SAAS,CAACF,EAAG,OAAO,CAACH,EAAIS,GAAG,YAAYN,EAAG,IAAI,CAACA,EAAG,OAAO,CAACH,EAAIS,GAAG,kCAAkCN,EAAG,IAAI,CAACE,YAAY,SAAS,CAACF,EAAG,OAAO,CAACH,EAAIS,GAAG,YAAYN,EAAG,IAAI,CAACA,EAAG,OAAO,CAACH,EAAIS,GAAG,kCAAkCN,EAAG,IAAI,CAACA,EAAG,OAAO,CAACH,EAAIS,GAAG,kCAAkCN,EAAG,IAAI,CAACA,EAAG,OAAO,CAACH,EAAIS,GAAG,kCAAkCN,EAAG,IAAI,CAACA,EAAG,OAAO,CAACH,EAAIS,GAAG,uCAAuC,WAAa,IAAIT,EAAIV,KAASW,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,IAAI,CAACE,YAAY,wBAAwB,CAACF,EAAG,IAAI,CAACE,YAAY,+BAA+BF,EAAG,OAAO,CAACH,EAAIS,GAAG,YAAY,WAAa,IAAIT,EAAIV,KAASW,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,IAAI,CAACE,YAAY,wBAAwB,CAACF,EAAG,IAAI,CAACE,YAAY,yBAAyBF,EAAG,OAAO,CAACH,EAAIS,GAAG,WAAW,WAAa,IAAIT,EAAIV,KAASW,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,OAAO,CAACH,EAAIS,GAAG,QAAQN,EAAG,IAAI,CAACE,YAAY,0BAA0B,WAAa,IAAIL,EAAIV,KAASW,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,OAAO,CAACH,EAAIS,GAAG,QAAQN,EAAG,IAAI,CAACE,YAAY,0BAA0B,WAAa,IAAIL,EAAIV,KAASW,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,OAAO,CAACH,EAAIS,GAAG,QAAQN,EAAG,IAAI,CAACE,YAAY,2B,4SCJ1vDkE,EAAO,SAAUC,GACrB,IAAIC,EAAUC,OAAOC,OAAO,CAAEC,KAAM,IAAKC,UAAWC,OAAcxC,UAAYkC,GAC9ElF,KAAKyF,GAAKN,EAAQM,IAAM,KACxBzF,KAAKwE,KAAOW,EAAQX,MAAQ,GAC5BxE,KAAKmE,MAAQgB,EAAQhB,MACrBnE,KAAKuF,UAAYJ,EAAQI,UACzBvF,KAAK0F,UAAW,EAChB1F,KAAKsF,KAAOH,EAAQG,KAEfH,EAAQQ,WAKX3F,KAAK2F,WAAL,kBAAuBR,EAAQQ,aAJ/B3F,KAAK2F,WAAaC,eAAcC,kBAChC7F,KAAK2F,WAAWG,KAAO9F,KAAKwE,KAC5BxE,KAAK2F,WAAWI,GAAK/F,KAAKyF,KAKfR,I,wBCzBX,EAAS,WAAa,IAAIvE,EAAIV,KAASW,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACmF,WAAW,CAAC,CAACxB,KAAK,OAAOyB,QAAQ,SAASrC,MAAsB,SAAflD,EAAIwF,OAAmBlC,WAAW,sBAAsBjD,YAAY,QAAQ,CAACF,EAAG,IAAI,CAACE,YAAY,SAAS,CAACF,EAAG,OAAO,CAACH,EAAIS,GAAG,QAAQN,EAAG,YAAY,CAACE,YAAY,gBAAgBC,MAAM,CAAC,KAAO,OAAO,MAAQ,IAAIC,GAAG,CAAC,MAAQ,SAASQ,GAAQf,EAAIwF,OAAS,cAAc,CAACrF,EAAG,OAAO,CAACH,EAAIS,GAAG,QAAQN,EAAG,IAAI,CAACE,YAAY,2BAA2B,GAAGF,EAAG,MAAM,CAACE,YAAY,6BAA6BL,EAAIuD,GAAIvD,EAAQ,MAAE,SAAS4D,EAAK6B,GAAW,OAAOtF,EAAG,UAAU,CAACuD,IAAI+B,EAAUpF,YAAY,gBAAgBC,MAAM,CAAC,iBAAiB,MAAM,cAAc,SAASN,EAAIuD,GAAIK,EAAe,YAAE,SAAS8B,EAAKjC,GAAO,OAAOtD,EAAG,MAAM,CAACuD,IAAID,EAAMpD,YAAY,iBAAiB,EAAGqF,EAAKC,MAAQD,EAAKE,OAAQzF,EAAG,eAAe,CAACA,EAAG,OAAO,CAACE,YAAY,qBAAqBC,MAAM,CAAC,KAAO,SAASuF,KAAK,SAAS,CAAC7F,EAAIS,GAAG,IAAIT,EAAIoB,GAAGsE,EAAK5B,MAAM,KAAM4B,EAAS,KAAEvF,EAAG,UAAU,CAAC+D,YAAY,CAAC,cAAc,MAAM,OAAS,WAAW5D,MAAM,CAAC,KAAO,mBAAmBwF,SAAS,CAAC,MAAQ,SAAS/E,GAAQ,OAAOf,EAAI+F,SAASL,OAAU1F,EAAI0C,KAAKvC,EAAG,YAAY,CAACG,MAAM,CAAC,QAAUoF,EAAKM,eAAe,MAAQN,EAAK5B,KAAK,kBAAiB,EAAK,MAAQ,SAASvD,GAAG,CAAC,iBAAiB,SAASQ,GAAQ,OAAOf,EAAIiG,KAAKP,EAAM,iBAAkB3E,MAAW,CAACZ,EAAG,MAAM,CAAC+D,YAAY,CAAC,aAAa,QAAQ,aAAa,QAAQ,SAAW,SAAS,CAAC/D,EAAG,OAAO,CAAC+D,YAAY,CAAC,QAAU,eAAe,cAAc,SAASgC,SAAS,CAAC,UAAYlG,EAAIoB,GAAGsE,EAAKS,cAAc,GAAsB,SAAlBT,EAAKU,UAA0C,YAAnBV,EAAKW,UAAyBlG,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,kBAAkB,CAACG,MAAM,CAAC,oBAAoB,QAAQ,IAAMN,EAAIsG,SAASZ,EAAM,IAAInF,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAIuG,aAAab,EAAM,KAAKzC,MAAM,CAACC,MAAOwC,EAAW,OAAEvC,SAAS,SAAUC,GAAMpD,EAAIiG,KAAKP,EAAM,SAAUtC,IAAME,WAAW,iBAAiBnD,EAAG,OAAO,CAACH,EAAIS,GAAG,OAAON,EAAG,kBAAkB,CAACG,MAAM,CAAC,oBAAoB,QAAQ,IAAMN,EAAIsG,SAASZ,EAAM,IAAInF,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAIuG,aAAab,EAAM,KAAKzC,MAAM,CAACC,MAAOwC,EAAW,OAAEvC,SAAS,SAAUC,GAAMpD,EAAIiG,KAAKP,EAAM,SAAUtC,IAAME,WAAW,iBAAiBnD,EAAG,OAAO,CAACH,EAAIS,GAAG,OAAON,EAAG,WAAW,CAACG,MAAM,CAAC,SAAW,YAAY2C,MAAM,CAACC,MAAOwC,EAAW,OAAEvC,SAAS,SAAUC,GAAMpD,EAAIiG,KAAKP,EAAM,SAAUtC,IAAME,WAAW,kBAAkB,GAAGtD,EAAI0C,KAAMgD,EAAS,KAAEvF,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,kBAAkB,CAACG,MAAM,CAAC,oBAAoB,QAAQ,IAAM,EAAE,IAAMoF,EAAKc,KAAKjG,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAIyG,eAAef,KAAQzC,MAAM,CAACC,MAAOwC,EAAU,MAAEvC,SAAS,SAAUC,GAAMpD,EAAIiG,KAAKP,EAAM,QAAStC,IAAME,WAAW,gBAAgBnD,EAAG,OAAO,CAACE,YAAY,QAAQ,CAACL,EAAIS,GAAGT,EAAIoB,GAAGsE,EAAKgB,UAAU,GAAG1G,EAAI0C,KAAM1C,EAAI2G,KAAKjB,GAAOvF,EAAG,WAAW,CAACG,MAAM,CAAC,UAAYoF,EAAKkB,QAAQrG,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAIyG,eAAef,KAAQzC,MAAM,CAACC,MAAOwC,EAAU,MAAEvC,SAAS,SAAUC,GAAMpD,EAAIiG,KAAKP,EAAM,QAAStC,IAAME,WAAW,gBAAgBtD,EAAI0C,KAAsB,aAAhBgD,EAAKkB,OAAuBzG,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,WAAW,YAAc,SAASC,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAIyG,eAAef,KAAQzC,MAAM,CAACC,MAAOwC,EAAU,MAAEvC,SAAS,SAAUC,GAAMpD,EAAIiG,KAAKP,EAAM,QAAStC,IAAME,WAAW,gBAAgBtD,EAAI0C,KAAMgD,EAAKkB,QAA+B,aAArBlB,EAAKkB,OAAO/C,KAAqB1D,EAAG,YAAY,CAACG,MAAM,CAAC,KAAcoF,EAAKmB,UAAY,IAAMnB,EAAKW,WAAa9F,GAAG,CAAC,OAAS,SAASQ,GAAQ,OAAOf,EAAIyG,eAAef,KAAQzC,MAAM,CAACC,MAAOwC,EAAU,MAAEvC,SAAS,SAAUC,GAAMpD,EAAIiG,KAAKP,EAAM,QAAStC,IAAME,WAAW,eAAetD,EAAIuD,GAAImC,EAAKkB,OAAOnC,QAAY,MAAE,SAASqC,EAAOC,GAAG,OAAO5G,EAAG,YAAY,CAACuD,IAAIqD,EAAEzG,MAAM,CAAC,MAAQwG,EAAOE,KAAK,MAAQF,EAAO5D,YAAW,GAAGlD,EAAI0C,KAAMgD,EAAKkB,QAA+B,UAArBlB,EAAKkB,OAAO/C,KAAkB1D,EAAG,iBAAiB,CAACI,GAAG,CAAC,OAAS,SAASQ,GAAQ,OAAOf,EAAIyG,eAAef,KAAQzC,MAAM,CAACC,MAAOwC,EAAU,MAAEvC,SAAS,SAAUC,GAAMpD,EAAIiG,KAAKP,EAAM,QAAStC,IAAME,WAAW,eAAetD,EAAIuD,GAAImC,EAAKkB,OAAOnC,QAAY,MAAE,SAASqC,EAAOG,GAAQ,OAAO9G,EAAG,WAAW,CAACuD,IAAIuD,EAAO3G,MAAM,CAAC,MAAQwG,EAAO5D,QAAQ,CAAClD,EAAIS,GAAG,IAAIT,EAAIoB,GAAG0F,EAAOE,MAAM,UAAS,GAAGhH,EAAI0C,KAAMgD,EAAKkB,QAA+B,aAArBlB,EAAKkB,OAAO/C,KAAqB1D,EAAG,oBAAoB,CAACI,GAAG,CAAC,OAAS,SAASQ,GAAQ,OAAOf,EAAIyG,eAAef,KAAQzC,MAAM,CAACC,MAAOwC,EAAU,MAAEvC,SAAS,SAAUC,GAAMpD,EAAIiG,KAAKP,EAAM,QAAStC,IAAME,WAAW,eAAetD,EAAIuD,GAAImC,EAAKkB,OAAOnC,QAAY,MAAE,SAASqC,EAAOG,GAAQ,OAAO9G,EAAG,cAAc,CAACuD,IAAIuD,EAAO3G,MAAM,CAAC,MAAQwG,EAAO5D,QAAQ,CAAClD,EAAIS,GAAG,IAAIT,EAAIoB,GAAG0F,EAAOE,MAAM,UAAS,GAAGhH,EAAI0C,KAAoB,WAAdgD,EAAK7B,KAAmB1D,EAAG,YAAY,CAACQ,MAAM+E,EAAK/E,MAAML,MAAM,CAAC,KAAO,YAAY,KAAO,UAAUC,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAIkH,aAAaxB,MAAS,CAAC1F,EAAIS,GAAG,UAAUT,EAAI0C,MAAM,GAAG1C,EAAI0C,MAAM,MAAK,MAAK,KAAKvC,EAAG,MAAM,CAACmF,WAAW,CAAC,CAACxB,KAAK,OAAOyB,QAAQ,SAASrC,MAAsB,aAAflD,EAAIwF,OAAuBlC,WAAW,0BAA0BjD,YAAY,YAAY,CAACF,EAAG,IAAI,CAACE,YAAY,SAAS,CAACF,EAAG,OAAO,CAACH,EAAIS,GAAG,QAAQN,EAAG,YAAY,CAACE,YAAY,iBAAiBC,MAAM,CAAC,KAAO,OAAO,MAAQ,IAAIC,GAAG,CAAC,MAAQ,SAASQ,GAAQf,EAAIwF,OAAS,UAAU,CAACrF,EAAG,IAAI,CAACE,YAAY,uBAAuBF,EAAG,OAAO,CAACH,EAAIS,GAAG,WAAW,GAAGN,EAAG,cAAc,CAACG,MAAM,CAAC,UAAY,IAAI2C,MAAM,CAACC,MAAOlD,EAAe,YAAEmD,SAAS,SAAUC,GAAMpD,EAAIqD,YAAYD,GAAKE,WAAW,gBAAgBtD,EAAIuD,GAAIvD,EAAQ,MAAE,SAAS4D,GAAM,OAAOzD,EAAG,mBAAmB,CAACuD,IAAIE,EAAKE,KAAKxD,MAAM,CAAC,MAAQsD,EAAKE,KAAK,KAAOF,EAAKE,OAAO,CAAC3D,EAAG,UAAU,CAACE,YAAY,gBAAgBC,MAAM,CAAC,iBAAiB,MAAM,cAAc,SAASN,EAAIuD,GAAIK,EAAe,YAAE,SAAS8B,EAAKjC,GAAO,OAAOtD,EAAG,MAAM,CAACuD,IAAID,EAAMpD,YAAY,iBAAiB,CAAGqF,EAAKC,KAE5/E3F,EAAI0C,KAF8/EvC,EAAG,eAAe,CAACA,EAAG,OAAO,CAACE,YAAY,qBAAqBC,MAAM,CAAC,KAAO,SAASuF,KAAK,SAAS,CAAC7F,EAAIS,GAAG,IAAIT,EAAIoB,GAAGsE,EAAK5B,MAAM,KAAM4B,EAAS,KAAEvF,EAAG,UAAU,CAAC+D,YAAY,CAAC,cAAc,MAAM,OAAS,WAAW5D,MAAM,CAAC,KAAO,mBAAmBwF,SAAS,CAAC,MAAQ,SAAS/E,GAAQ,OAAOf,EAAI+F,SAASL,OAAU1F,EAAI0C,KAAKvC,EAAG,YAAY,CAACG,MAAM,CAAC,QAAUoF,EAAKM,eAAe,MAAQN,EAAK5B,KAAK,kBAAiB,EAAK,MAAQ,SAASvD,GAAG,CAAC,iBAAiB,SAASQ,GAAQ,OAAOf,EAAIiG,KAAKP,EAAM,iBAAkB3E,MAAW,CAACZ,EAAG,MAAM,CAAC+D,YAAY,CAAC,aAAa,QAAQ,aAAa,QAAQ,SAAW,SAAS,CAAC/D,EAAG,OAAO,CAAC+D,YAAY,CAAC,QAAU,eAAe,cAAc,SAASgC,SAAS,CAAC,UAAYlG,EAAIoB,GAAGsE,EAAKS,cAAc,GACnwM,SAAlBT,EAAKU,UAA0C,YAAnBV,EAAKW,UACjClG,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,kBAAkB,CAACG,MAAM,CAAC,oBAAoB,QAAQ,IAAMN,EAAIsG,SAASZ,EAAM,IAAInF,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAIuG,aAAab,EAAM,KAAKzC,MAAM,CAACC,MAAOwC,EAAW,OAAEvC,SAAS,SAAUC,GAAMpD,EAAIiG,KAAKP,EAAM,SAAUtC,IAAME,WAAW,iBAAiBnD,EAAG,OAAO,CAACH,EAAIS,GAAG,OAAON,EAAG,kBAAkB,CAACG,MAAM,CAAC,oBAAoB,QAAQ,IAAMN,EAAIsG,SAASZ,EAAM,IAAInF,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAIuG,aAAab,EAAM,KAAKzC,MAAM,CAACC,MAAOwC,EAAW,OAAEvC,SAAS,SAAUC,GAAMpD,EAAIiG,KAAKP,EAAM,SAAUtC,IAAME,WAAW,iBAAiBnD,EAAG,OAAO,CAACH,EAAIS,GAAG,OAAON,EAAG,WAAW,CAACG,MAAM,CAAC,SAAW,YAAY2C,MAAM,CAACC,MAAOwC,EAAW,OAAEvC,SAAS,SAAUC,GAAMpD,EAAIiG,KAAKP,EAAM,SAAUtC,IAAME,WAAW,kBAAkB,GAAGtD,EAAI0C,KAAMgD,EAAS,KAAEvF,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,kBAAkB,CAACG,MAAM,CAAC,oBAAoB,QAAQ,IAAM,EAAE,IAAMoF,EAAKc,KAAKjG,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAIyG,eAAef,KAAQzC,MAAM,CAACC,MAAOwC,EAAU,MAAEvC,SAAS,SAAUC,GAAMpD,EAAIiG,KAAKP,EAAM,QAAStC,IAAME,WAAW,gBAAgBnD,EAAG,OAAO,CAACE,YAAY,QAAQ,CAACL,EAAIS,GAAGT,EAAIoB,GAAGsE,EAAKgB,UAAU,GAAG1G,EAAI0C,KAAM1C,EAAI2G,KAAKjB,GAAOvF,EAAG,WAAW,CAACG,MAAM,CAAC,UAAYoF,EAAKkB,QAAQrG,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAIyG,eAAef,KAAQzC,MAAM,CAACC,MAAOwC,EAAU,MAAEvC,SAAS,SAAUC,GAAMpD,EAAIiG,KAAKP,EAAM,QAAStC,IAAME,WAAW,gBAAgBtD,EAAI0C,KAAsB,aAAhBgD,EAAKkB,OAAuBzG,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,WAAW,YAAc,SAASC,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAIyG,eAAef,KAAQzC,MAAM,CAACC,MAAOwC,EAAU,MAAEvC,SAAS,SAAUC,GAAMpD,EAAIiG,KAAKP,EAAM,QAAStC,IAAME,WAAW,gBAAgBtD,EAAI0C,KAAMgD,EAAKkB,QAA+B,aAArBlB,EAAKkB,OAAO/C,KAAqB1D,EAAG,YAAY,CAACG,MAAM,CAAC,KAAcoF,EAAKmB,UAAY,IAAMnB,EAAKW,WAAa9F,GAAG,CAAC,OAAS,SAASQ,GAAQ,OAAOf,EAAIyG,eAAef,KAAQzC,MAAM,CAACC,MAAOwC,EAAU,MAAEvC,SAAS,SAAUC,GAAMpD,EAAIiG,KAAKP,EAAM,QAAStC,IAAME,WAAW,eAAetD,EAAIuD,GAAImC,EAAKkB,OAAOnC,QAAY,MAAE,SAASqC,EAAOC,GAAG,OAAO5G,EAAG,YAAY,CAACuD,IAAIqD,EAAEzG,MAAM,CAAC,MAAQwG,EAAOE,KAAK,MAAQF,EAAO5D,YAAW,GAAGlD,EAAI0C,KAAMgD,EAAKkB,QAA+B,UAArBlB,EAAKkB,OAAO/C,KAAkB1D,EAAG,iBAAiB,CAACI,GAAG,CAAC,OAAS,SAASQ,GAAQ,OAAOf,EAAIyG,eAAef,KAAQzC,MAAM,CAACC,MAAOwC,EAAU,MAAEvC,SAAS,SAAUC,GAAMpD,EAAIiG,KAAKP,EAAM,QAAStC,IAAME,WAAW,eAAetD,EAAIuD,GAAImC,EAAKkB,OAAOnC,QAAY,MAAE,SAASqC,EAAOG,GAAQ,OAAO9G,EAAG,WAAW,CAACuD,IAAIuD,EAAO3G,MAAM,CAAC,MAAQwG,EAAO5D,QAAQ,CAAClD,EAAIS,GAAG,IAAIT,EAAIoB,GAAG0F,EAAOE,MAAM,UAAS,GAAGhH,EAAI0C,KAAMgD,EAAKkB,QAA+B,aAArBlB,EAAKkB,OAAO/C,KAAqB1D,EAAG,oBAAoB,CAACI,GAAG,CAAC,OAAS,SAASQ,GAAQ,OAAOf,EAAIyG,eAAef,KAAQzC,MAAM,CAACC,MAAOwC,EAAU,MAAEvC,SAAS,SAAUC,GAAMpD,EAAIiG,KAAKP,EAAM,QAAStC,IAAME,WAAW,eAAetD,EAAIuD,GAAImC,EAAKkB,OAAOnC,QAAY,MAAE,SAASqC,EAAOG,GAAQ,OAAO9G,EAAG,cAAc,CAACuD,IAAIuD,EAAO3G,MAAM,CAAC,MAAQwG,EAAO5D,QAAQ,CAAClD,EAAIS,GAAG,IAAIT,EAAIoB,GAAG0F,EAAOE,MAAM,UAAS,GAAGhH,EAAI0C,KAAoB,WAAdgD,EAAK7B,KAAmB1D,EAAG,YAAY,CAACQ,MAAM+E,EAAK/E,MAAML,MAAM,CAAC,KAAO,YAAY,KAAO,UAAUC,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAIkH,aAAaxB,MAAS,CAAC1F,EAAIS,GAAG,UAAUT,EAAI0C,MAAM,IAAa,MAAK,IAAI,MAAK,IAAI,MACtmG,EAAkB,G,sDC6VtB,GACEoB,KAAM,WACNqD,WAAY,CACVC,kBAAJ,QAEEC,MAAO,CACLtE,QAAS,CACPc,KAAMa,OACN4C,QAFN,WAGQ,MAAO,KAGX3E,SAAU,CACRkB,KAAMa,OACN4C,QAFN,WAGQ,MAAO,KAGXzE,MAAO,CACLgB,KAAM0D,MACND,QAFN,WAGQ,MAAO,KAGX1E,MAAO,CACLiB,KAAM0D,MACND,QAFN,WAGQ,MAAO,MAIbE,KA/BF,WAgCI,MAAO,CACLnE,YAAa,CAAC,KACdoE,aAAc,KACdC,WAAY,KACZC,WAAY,KACZC,QAAS,KACTJ,KAAM,GACNhC,OAAQ,OACRQ,gBAAgB,IAGpB6B,SAAU,CACRvB,SADJ,WAEM,OAAO,SAAb,KACQ,OAAc,IAAV7C,EACKqE,OAAOpC,EAAKqC,SAASC,MAAM,KAAK,IAErCtC,EAAKuC,OAASH,OAAOpC,EAAKqC,SAASC,MAAM,KAAK,KAAiB,IAAVvE,EAChD,EAEFqE,OAAOpC,EAAKqC,SAASC,MAAM,KAAK,OAI7CE,MAAO,CACLnF,QADJ,SACA,GACMzD,KAAK6I,mBAAmBC,KAG5BC,QA7DF,WA6DA,WACI/I,KAAKgJ,KAAKC,IAAI,cAAc,SAAhC,GACM,EAAN,0BAGEC,QAAS,CACP7B,KADJ,SACA,GACM,OACN,YACA,0BACA,UACA,oBACA,2BACA,wBAGIwB,mBAXJ,SAWA,GACsC,IAA5BzD,OAAO+D,KAAKC,GAAK7I,SAGrBP,KAAKmI,aAAeiB,GAAO,KAC3BpJ,KAAKoI,WAAcgB,EAAaA,EAAIzD,WAAX,KACzB3F,KAAKqJ,gBAAgBD,EAAMpJ,KAAKsJ,gBAAgBF,GAAO,MAEzD3C,SAnBJ,SAmBA,GACMzG,KAAK2G,KAAKP,EAAM,kBAAkB,IAEpCkD,gBAtBJ,SAsBA,GACM,IAAIC,EAAM,KACV,GAAIH,aAAeI,EAAzB,KACQ,GAAgB,OAAZJ,EAAI7E,KACNgF,EAAM,OAAhB,OAAgB,QAChB,iBACUA,EAAM,OAAhB,OAAgB,QAChB,kBACU,IAAV,GACY/E,KAAM,OACNiF,KAAM,OACNC,SAAU,QAEZH,EAAM,OAAhB,OAAgB,CAAhB,QACA,kBACUA,EAAM,OAAhB,OAAgB,QAChB,kBACUA,EAAM,OAAhB,OAAgB,QAChB,mBACU,IAAV,GACY/E,KAAM,WACNiF,KAAM,WACNC,SAAU,UAEZH,EAAM,OAAhB,OAAgB,CAAhB,QACA,mBACU,IAAV,GACY/E,KAAM,UACNiF,KAAM,UACNC,SAAU,SAEZH,EAAM,OAAhB,OAAgB,CAAhB,QACA,mBACU,IAAV,GACY/E,KAAM,QACNiF,KAAM,QACNC,SAAU,OAEZH,EAAM,OAAhB,OAAgB,CAAhB,QAEUA,EADV,cACgB,OAAhB,OAAgB,GAChB,cACgB,OAAhB,OAAgB,GAChB,cACgB,OAAhB,OAAgB,GAChB,cACgB,OAAhB,OAAgB,GAEA,OAAhB,OAAgB,QAGRA,EADR,oBACc,OAAd,OAAc,GACd,eACc,OAAd,OAAc,GACd,oBACc,OAAd,OAAc,GAGA,OAAd,OAAc,GAER,IAAInD,EAAOgD,EAAIzD,WAEXgE,EAAQ,KACRC,GAAc,EAClBL,EAAIM,KAAO,GACX,IAAK,IAAX,wBACqC,GAAzBN,EAAIO,KAAKrC,GAAGsC,UAEdR,EAAIO,KAAKrC,GAAG7D,MAAQwC,EAAKmD,EAAIO,KAAKrC,GAAGuC,UAC/C,uBAEc5D,EAAKmD,EAAIO,KAAKrC,GAAGF,WACnBgC,EAAIO,KAAKrC,GAAG7D,MACxB,4CAEY2F,EAAIO,KAAKrC,GAAG7D,MAAQ,GAEhC,yBAGA,wBACA,4CAEY2F,EAAIO,KAAKrC,GAAG7D,MACxB,4CACA,qBAGY2F,EAAIO,KAAKrC,GAAG7D,MAAQ,IAGpB2F,EAAIO,KAAKrC,GAAGkC,OAASA,IACvBC,IACAD,EAAQJ,EAAIO,KAAKrC,GAAGkC,MACpBJ,EAAIM,KAAKD,GAAc,CACrBpF,KAAMmF,EACNhE,WAAY,KAGhB4D,EAAIM,KAAKD,GAAY,cAAcK,KAAKV,EAAIO,KAAKrC,IAEnD,OAAO8B,EAAIM,MAEbR,gBA7HJ,SA6HA,cACA,KACMnB,EAAKgC,SAAQ,SAAnB,GACQ5F,EAAKqB,WAAWuE,SAAQ,SAAhC,GACc9D,EAAKkB,QAA+B,aAArBlB,EAAKkB,OAAO/C,KAC7B6B,EAAKxC,MAAQwC,EAAKxC,OAAS,GACvC,qCACYwC,EAAKxC,MACjB,oCACA,gBACA,QACA,8CAEYwC,EAAKqC,SAAWrC,EAAKxC,MACrBwC,EAAKuC,OAASvC,EAAKxC,MAAM8E,MAAM,KAAK,GACpCtC,EAAK+D,OAAS/D,EAAKxC,MAAM8E,MAAM,KAAK,GACpCtC,EAAKgE,OAAShE,EAAKxC,MAAM8E,MAAM,KAAK,IAEpCtC,EAAKxC,MAAQwC,EAAKxC,MAGhBwC,EAAKiE,SACPP,EAAKG,KAAK7D,SAIhBpG,KAAKkI,KAAOA,EAGR4B,GAAQA,EAAKvJ,OAAS,GACxBuJ,EAAKI,SAAQ,SAArB,GACU,EAAV,cAGMlK,KAAK+D,YAAc,CAAC/D,KAAKkI,KAAK,GAAG1D,OAEnCyC,aAjKJ,SAiKA,KACUb,IACY,IAAVjC,IACFiC,EAAK+D,OAAS,EACd/D,EAAKgE,OAAS,QAEhBhE,EAAKxC,MAAQwC,EAAKuC,OAAS,IAAMvC,EAAK+D,OAAS,IAAM/D,EAAKgE,OAC1DpK,KAAKmH,eAAef,KAGxBe,eA3KJ,SA2KA,GAeM,GAdImD,EAAQvD,WAAkC,QAArBuD,EAAQvD,YAC3B/G,KAAKmI,wBAAwBqB,EAAzC,OACUxJ,KAAKmI,aAAa3D,KAAO8F,EAAQ1G,OAE/B5D,KAAKmI,wBAAwB,IAC/BnI,KAAKmI,aAAa3D,KAAO8F,EAAQ1G,QAGjC0G,EAAQD,SAA8B,cAAnBC,EAAQD,SAEzBrK,KAAKmI,wBAAwBoC,EAAzC,OACUvK,KAAKmI,aAAa5D,KAAO+F,EAAQ1G,OAG3C,8CACQ,IAAR,0BACA,KACA,0EACA,gBACU4G,EAAKN,SAAQ,SAAvB,KACYO,EAAUR,KAAK3F,EAAKE,KAAO,IAAM,OAA7C,OAA6C,CAA7C,kBAEUxE,KAAKmI,aAAauC,QAAU,GAAtC,oCAIM,GAAN,iGACQ,IAAR,8CACA,KACQJ,EAAQ1G,MAAM4G,KAAKN,SAAQ,SAAnC,KACU,EAAV,iDAGQlK,KAAKmI,aAAauC,QAAU,GAApC,mCAGM1K,KAAKqK,QAAQC,GACY,GAArBA,EAAQP,UACV/J,KAAKoI,WAAWkC,EAAQN,UAAYM,EAAQ1G,MACpD,eACQ5D,KAAKoI,WAAWkC,EAAQ/C,WAAW+C,EAAQvD,WAAauD,EAAQ1G,MACxE,iBACQ5D,KAAKoI,WAAWkC,EAAQ/C,WAAW+C,EAAQvD,WACnD,aACA,UAGIsD,QA3NJ,SA2NA,GACUC,EAAQD,SACVrK,KAAKkI,KAAKgC,SAAQ,SAA1B,GACU5F,EAAKqB,WAAWuE,SAAQ,SAAlC,GACY,IAAZ,uBACYG,EAAQH,SAAQ,SAA5B,GACkB9D,EAAKW,YAAc4D,GAASvE,EAAKwE,YAAcD,IACnC,aAAVA,EACoB,IAAlBL,EAAQ1G,MAEVwB,OAAOC,OAAOe,EAAM,CAClB5B,KAAM,KACNZ,MAAO,EACPsD,IAAK,OACLE,KAAM,MACNf,MAAM,IAE5B,YAEoBjB,OAAOC,OAAOe,EAAM,CAClB5B,KAAM,KACNZ,MAAO,GACPsD,IAAK,IACLE,KAAM,IACNf,MAAM,IAGRD,EAAKC,MAAO,EAEhC,iBACwC,IAAlBiE,EAAQ1G,OAAiC,IAAlB0G,EAAQ1G,MACjCwC,EAAKC,MAAO,EAEZD,EAAKC,MAAO,EAEhC,aACwC,IAAlBiE,EAAQ1G,OAAiC,IAAlB0G,EAAQ1G,MACjCwC,EAAKC,MAAO,EAEZD,EAAKC,MAAO,EAEhC,cACwC,IAAlBiE,EAAQ1G,MACVwC,EAAKC,MAAO,EAEZD,EAAKC,MAAO,EAEhC,cACwC,IAAlBiE,EAAQ1G,MACVwC,EAAKC,MAAO,EAEZD,EAAKC,MAAO,cAS5BuB,aAvRJ,SAuRA,cACA,IACA,GACQiD,KAAM,EAAd,8BACQnB,SAAU,OACVjG,QAASzD,KAAKyD,QACdG,MAAOsE,EAAKtE,OAEVsE,EAAKxE,QAAUwE,EAAKxE,OAAOoH,UACD,cAAxB5C,EAAKxE,OAAOoH,SACdC,EAAOxH,MAAQvD,KAAKuD,MACpBwH,EAAOnH,MAAQsE,EAAKtE,OAAS,KACvC,8BAGA,sCAFUmH,EAAOzH,MAAQtD,KAAKsD,MACpByH,EAAOnH,MAAQsE,EAAKtE,OAAS,KAMjCoH,IAAIC,MAAMC,GAAGC,WAAW,CACtB9G,MAAO6D,EAAK1D,KACZ/B,MAAOyF,EAAKxE,OAAOjB,MACnBE,OAAQuF,EAAKxE,OAAOf,OACpByI,SAAU,SACVN,QAAS5C,EAAKxE,OAAOoH,QACrBC,OAAQA,EACRM,KAAM,CACd,CACU,KAAV,KACU,QAAV,YACY,EAAZ,qBACY,EAAZ,oBAGA,CACU,KAAV,YC7tBgX,I,wBCQ5WC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,QCnBX,EAAS,WAAa,IAAI5K,EAAIV,KAASW,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACyB,IAAI,UAAUvB,YAAY,WAAW,CAACF,EAAG,QAAQ,CAACyB,IAAI,QAAQtB,MAAM,CAAC,eAAeN,EAAIa,WAAW,MAAQb,EAAI4C,MAAM,MAAQ5C,EAAI6C,MAAM,OAAS7C,EAAI8C,OAAO,QAAU9C,EAAI+C,QAAQ,OAAS/C,EAAIgD,UAAU7C,EAAG,QAAQ,CAACG,MAAM,CAAC,eAAeN,EAAIa,WAAW,MAAQb,EAAI6C,MAAM,QAAU7C,EAAI+C,QAAQ,OAAS/C,EAAIgD,UAAU7C,EAAG,SAAS,CAACG,MAAM,CAAC,eAAeN,EAAIa,WAAW,MAAQb,EAAI6C,MAAM,OAAS7C,EAAI8C,OAAO,QAAU9C,EAAI+C,QAAQ,OAAS/C,EAAIgD,WAAW,IACpiB,EAAkB,G,oCC+BtB,GACEc,KAAM,cACNqD,WAAY,CACV0D,MAAJ,OACIC,OAAJ,OACIC,WAAJ,QAEE1D,MAAO,CACL1E,SAAU,CACRkB,KAAMa,OACN4C,QAFN,WAGQ,MAAO,KAGX1E,MAAO,CACLiB,KAAM0D,MACND,QAFN,WAGQ,MAAO,KAGXzE,MAAO,CACLgB,KAAM0D,MACND,QAFN,WAGQ,MAAO,KAGXjF,MAAO,CACLwB,KAAMa,OACN4C,QAFN,WAGQ,MAAO,KAGXxE,OAAQ,CACNe,KAAM0D,MACND,QAFN,WAGQ,MAAO,KAGXzG,WAAY,CACVgD,KAAMmH,QACN1D,QAFN,WAGQ,OAAO,IAGXvE,QAAS,CACPc,KAAMa,OACN4C,QAFN,WAGQ,MAAO,KAGXtE,OAAQ,CACNa,KAAMa,OACN4C,QAFN,WAGQ,MAAO,MAIbE,KAzDF,WA0DI,MAAO,IAETU,MAAO,CACLvF,SADJ,SACA,GACUsI,GACF3L,KAAKK,SAIXuL,QAnEF,aAoEE7C,QApEF,aAqEEG,QAAS,CACP7I,KADJ,WAEML,KAAK6L,YAEPA,SAJJ,WAMMC,KAAO,CACLnG,WAAYP,OAAOC,OAC3B,iCACA,mBC9GmX,ICQ/W,G,UAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,OAIa,I,QCnBX,EAAS,WAAa,IAAI3E,EAAIV,KAASW,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,SAASL,EAAIuD,GAAIvD,EAAS,OAAE,SAASqL,EAAK5H,GAAO,OAAOtD,EAAG,MAAM,CAACuD,IAAI2H,EAAKtG,IAAMtB,EAAMpD,YAAY,OAAOM,MAAM,CAAEC,SAAUZ,EAAI+C,UAAYsI,GAAOvJ,MAAM,CACzQwJ,KAAMtL,EAAIgC,KAAKqJ,EAAKC,MACpBC,IAAKvL,EAAIgC,KAAKqJ,EAAKE,KACnBxJ,MAA0B,aAAnBsJ,EAAKxG,UAA2B7E,EAAIgC,KAAKqJ,EAAKzG,MAAQ,GAC7D3C,OAA2B,eAAnBoJ,EAAKxG,UAA6B7E,EAAIgC,KAAKqJ,EAAKzG,MAAQ,IAC/DtE,MAAM,CAAC,MAAQmD,GAAOlD,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAIwL,WAAWzK,EAAQsK,MAAS,CAAClL,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,aAAa,CAACG,MAAM,CAAC,UAA+B,aAAnB+K,EAAKxG,UAA2B,SAAW,QAAQ,MAAQ,OAAO,MAAQ,MAAM,QAAU,UAAU5B,MAAM,CAACC,MAAOmI,EAAW,OAAElI,SAAS,SAAUC,GAAMpD,EAAIiG,KAAKoF,EAAM,SAAUjI,IAAME,WAAW,gBAAgB,CAACnD,EAAG,MAAM,CAACE,YAAY,YAAY,CAAEgL,EAAW,OAAElL,EAAG,QAAQ,CAACmF,WAAW,CAAC,CAACxB,KAAK,QAAQyB,QAAQ,UAAUrC,MAAOmI,EAAS,KAAE/H,WAAW,aAAa,CAACQ,KAAK,QAAQyB,QAAQ,YAAYlF,YAAY,kBAAkBC,MAAM,CAAC,UAAY,GAAG,KAAO,OAAO,YAAc,SAAS4F,SAAS,CAAC,MAASmF,EAAS,MAAG9K,GAAG,CAAC,OAAS,SAASQ,GAAQsK,EAAKpG,WAAWG,KAAOiG,EAAKvH,KAAK9D,EAAIyL,YAAa,MAAQ,SAAS1K,GAAWA,EAAO7B,OAAOwM,WAAqB1L,EAAIiG,KAAKoF,EAAM,OAAQtK,EAAO7B,OAAOgE,WAAWlD,EAAI0C,OAAOvC,EAAG,OAAO,CAACE,YAAY,uBAAuByB,MAAM,CACr7BC,MAAO/B,EAAIgC,KAAKqJ,EAAKzG,MACrB1C,UAA8B,eAAnBmJ,EAAKxG,UAA8B,8BAAiCwG,EAAS,KAAI,MAAS,IACpG/K,MAAM,CAAC,KAAO,aAAaC,GAAG,CAAC,SAAW,SAASQ,GAAQ,OAAOf,EAAI2L,KAAKN,KAAQxF,KAAK,aAAa,CAAC7F,EAAIS,GAAGT,EAAIoB,GAAGiK,EAAKvH,WAAW3D,EAAG,MAAM,CAACE,YAAY,YAAYC,MAAM,CAAC,IAAM,oDAAoDC,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAIgB,QAAQqK,EAAKxG,UAAWpB,OAAWtD,EAAG,MAAM,CAACE,YAAY,aAAaC,MAAM,CAAC,IAAM,oDAAoDC,GAAG,CAAC,MAAQ,SAASQ,GAAQ,OAAOf,EAAIgB,QAAQqK,EAAKxG,UAAWpB,EAAQ,OAAOtD,EAAG,OAAO,CAACE,YAAY,aAAaE,GAAG,CAAC,UAAY,SAASQ,GAAQ,OAAOf,EAAI4L,SAAS7K,EAAQsK,QAAW,KAAKlL,EAAG,MAAM,CAACE,YAAY,QAAQF,EAAG,MAAM,CAACE,YAAY,sBAAqB,IAC1qB,EAAkB,GC6DtB,GACEyD,KAAM,QACNuD,MAAO,CACLhF,MAAO,CACLwB,KAAM0D,MACND,QAFN,WAGQ,MAAO,KAGXvE,QAAS,CACPc,KAAMa,OACN4C,QAFN,WAGQ,MAAO,MAIbE,KAhBF,WAiBI,MAAO,CACLqE,QAAS,KACTC,QAAS,MAGbzD,QAtBF,WAsBA,WACI0D,SAASC,iBAAiB,aAAa,SAA3C,GACM,IAAN,WACA,sJACQ,EAAR,cAGID,SAASC,iBAAiB,aAAa,SAA3C,GACM,EAAN,eAEID,SAASC,iBAAiB,WAAW,SAAzC,GACM,EAAN,gBAGExD,QAAS,CACPxG,KADJ,SACA,GACM,MAAO,GAAb,gBAEIwJ,WAJJ,SAIA,KACMlM,KAAKgJ,KAAK2D,MAAM,iBAAkBZ,GAClCa,EAAEC,mBAEJnL,QARJ,SAQA,KACM1B,KAAK2M,MAAM,UAAWpH,EAAWpB,IAEnCmI,SAXJ,SAWA,KACMtM,KAAKgJ,KAAK2D,MAAM,iBAAkBrI,GAClCtE,KAAKuM,QAAU,OAArB,OAAqB,CAArB,MACMvM,KAAKgJ,KAAK2D,MAAM,kBAAmB,CACjCtF,KAAMrH,KAAKuM,QAAQhH,UACnB0G,IAAK,EACLD,KAAM,KAKVc,SAtBJ,SAsBA,GACM,GAAN,aAAM,CAGA,IAAN,8BACA,iCACA,oCACU9M,KAAKuM,QAAQhH,YAAc,EAArC,cACQvF,KAAKuM,QAAQjH,MAAQsH,EAAEG,MAAQ/M,KAAKuM,QAAQP,KAAOgB,EAAKhB,KAAOiB,EAAQC,YAActL,EAErF5B,KAAKuM,QAAQjH,MAAQsH,EAAEO,MAAQnN,KAAKuM,QAAQN,IAAMe,EAAKf,IAAMgB,EAAQG,WAAaxL,EAEpF5B,KAAKuM,QAAQjH,KAAOtF,KAAKuM,QAAQjH,KAAOtF,KAAKwM,QAAUxM,KAAKuM,QAAQjH,KAAOtF,KAAKwM,QAEhFxM,KAAKgJ,KAAK2D,MAAM,kBAAmB,CACjCU,OAAO,EACPC,OAAO,EACPrB,IAAK,EACLD,KAAM,IAERhM,KAAKuN,OAAOC,OAAO,kBAAmBxN,KAAKuM,SAC3CvM,KAAKgJ,KAAK2D,MAAM,UAChB3M,KAAKuM,QAAU,OAEjBkB,SA9CJ,SA8CA,GACM,IAAKzN,KAAKuM,QACR,OAAO,EAET,IAAN,EACA,8BACA,iCACA,oCACM,GAAIvM,KAAKuM,QAAQhH,YAAc,EAArC,eACQ,IAAR,iCACA,8BACQmI,EAAS,CACPzB,IAAK,GACLD,MAAOO,EAAUoB,EAAU/L,EAAQ2K,EAAUoB,EAAU/L,GAASA,OAE1E,CACQ,IAAR,gCACA,4BACQ8L,EAAS,CACPzB,KAAM,EAAhB,aACUD,KAAM,IAGV,IAAN,mBACQqB,MAAkC,aAA3BrN,KAAKuM,QAAQhH,UACpB+H,MAAkC,eAA3BtN,KAAKuM,QAAQhH,YAEtBvF,KAAKgJ,KAAK2D,MAAM,kBAAmBxJ,GACnCnD,KAAKgJ,KAAK2D,MAAM,aAAc,CAC5BpI,KAAM,OACN2D,KAAMlI,KAAKuM,QACXqB,MAAO,CACLC,EAAGjB,EAAEG,MACLe,EAAGlB,EAAEO,UAIXd,KAnFJ,SAmFA,GACMrM,KAAK+C,MAAMmH,SAAQ,SAAzB,GAEU5F,EAAKyJ,OADf,UAOI5B,SA5FJ,WA6FMnM,KAAK+C,MAAMmH,SAAQ,SAAzB,GACQ5F,EAAKyJ,QAAS,QCxMuV,ICQzW,G,UAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,OAIa,I,4BC+PfC,OAAOlC,KAAO,KA8Bd,OACEtH,KAAM,OACNqD,WAAY,CACVoG,SAAJ,EACIC,YAAJ,EACIC,MAAJ,GAEEjG,KAPF,WAQI,MAAO,CACLnE,YAAa,CAAC,GACdxC,YAAY,EACZ6M,SAAU,KACVC,UAAW,KACXC,UAAW,KACX7L,MAAO,EACPE,OAAQ,EACR4L,SAAU,EACVC,UAAW,EACX1C,KAAM,KACNzI,SAAU,KACVK,OAAQ,KACR+K,MACN,yCACA,mCACMlL,MAAO,GACPD,MAAO,GACPE,OAAQ,GACRkL,SAAU,GACVC,SAAU,KACVC,UAAW,KACXhN,MAAO5B,KAAKuN,OAAOsB,MAAM/C,KAAKkB,KAAKpL,MACnCkN,SAAU,GACVC,cAAe,GACfC,UAAW,EAAjB,KACMC,eAAgB,EAAtB,KACMxL,QAAS,KACTN,SAAU,CACRkE,KAAM,GACN4E,IAAK,EACLD,KAAM,GAERkD,WAAW,EACXC,WAAW,EACXC,iBAAiB,EACjBC,UAAW,KACXC,oBAAqB,KACrBC,WAAY,KACZC,gBAAgB,EAChBC,gBAAiB,KACjBC,mBAAoB,CAClBC,MAAO,CAAf,SACQC,IAAK,CAAb,UAEMC,aAAc,KACdC,WAAW,EACXC,cAAe,KACfC,aAAa,EACbC,aAAc,KACdC,UAAW,KAGf3H,SAAU,OAAZ,OAAY,CAAZ,GACA,gBACI,MAAJ,YACM,OAAN,iBAIEqD,QApEF,aAqEE7C,QArEF,WAsEI/I,KAAKmQ,QACLnQ,KAAKK,OACLL,KAAK8L,KAAO9L,KAAKuN,OAAOsB,MAAM/C,MAEhC5C,QAAS,CACPxG,KAAJ,OACIyN,MAFJ,WAGM,IAAN,qBACMnQ,KAAKuN,OAAOC,OAAO,eAAgB,CACjC/K,MAAO2N,EAAQC,YACf1N,OAAQyN,EAAQE,gBAGpB,KATJ,WASA,wKACA,aADA,OAEA,gBAEA,cAJA,8CAMIC,SAfJ,WAeA,WAEM,OAAOvQ,KAAKwQ,MAClB,KACA,uDACA,eACA,sBACA,CACQ,IAAR,YAEA,kBAGA,kBACQ,EAAR,YACQ,EAAR,+BAEA,mBACQ,EAAR,YACQ,QAAR,WAGIC,UArCJ,WAqCA,WACMhE,SAASC,iBAAiB,YAAY,SAA5C,GACY,EAAZ,WACU,EAAV,oBACU,EAAV,iBAEY,EAAZ,WACU,EAAV,oBAGMD,SAASC,iBAAiB,WAAW,SAA3C,GACY,EAAZ,UACU,EAAV,eAEY,EAAZ,YACU,EAAV,gBACU,EAAV,kDACU,EAAV,eACU,EAAV,cACU,EAAV,eACU,EAAV,kCAGM1M,KAAKgJ,KAAKC,IAAI,mBAAmB,SAAvC,GACQ,EAAR,cAEMjJ,KAAKgJ,KAAKC,IAAI,kBAAkB,SAAtC,GACQ,EAAR,aAEMjJ,KAAKgJ,KAAKC,IAAI,mBAAoBjJ,KAAK0Q,kBACvC1Q,KAAKgJ,KAAKC,IAAI,aAAcjJ,KAAK2Q,YACjC3Q,KAAKgJ,KAAKC,IAAI,SAAUjJ,KAAK0N,QAC7B1N,KAAKgJ,KAAKC,IAAI,iBAAkBjJ,KAAK4Q,gBACrC5Q,KAAKgJ,KAAKC,IAAI,WAAYjJ,KAAK0E,UAE/B1E,KAAKgJ,KAAKC,IAAI,kBAAmBjJ,KAAK6Q,iBACtC7Q,KAAKgJ,KAAKC,IAAI,iBAAkBjJ,KAAK8Q,gBACrCrE,SAASC,iBAAiB,UAAW1M,KAAK+Q,SAE1C/C,OAAOgD,SAAW,WAChB,EAAR,QACQ,EAAR,UAEMhR,KAAKiR,MAAMC,KAAKxE,iBAAiB,aAAa,SAApD,GACA,iCAOA,2BAGA,IAFA,uDACA,gBAGU,EAAV,aACU,EAAV,gCACU,EAAV,kBACU,EAAV,iCACA,8BACA,CACYmB,EAAGjB,EAAEG,MACLe,EAAGlB,EAAEO,YAOXnN,KAAKiR,MAAMC,KAAKxE,iBAAiB,aAAa,SAApD,GACY,EAAZ,WAGQ,EAAR,aACY,EAAZ,iBACU,EAAV,cAGY,EAAZ,gBACU,EAAV,oBAGY,EAAZ,aACU,EAAV,iBAGMD,SAASC,iBAAiB,WAAW,SAA3C,GACY,EAAZ,kBACU,EAAV,mBACU,EAAV,eACU,EAAV,SAEU,EAAV,mCAGY,EAAZ,iBACU,EAAV,mBACU,EAAV,SAEU,EAAV,mCAGY,EAAZ,aACU,EAAV,mBAIM1M,KAAKiR,MAAMb,QAAQ1D,iBAAiB,QAAS1M,KAAKmR,aAAa,GAE/D1E,SAASC,iBAAiB,QAAQ,SAAxC,GACQE,EAAEwE,iBACF,EAAR,mBAEM3E,SAASC,iBAAiB,SAAS,SAAzC,GACQE,EAAEwE,iBACF,EAAR,iBAGIC,YA5JJ,SA4JA,SACMC,EAAGC,cAAgBD,EAAGC,aAAaC,aAAa,IAAIC,MAAS,EAAG,GAChE,IAAN,cACA,kBA8BM,OA7BAC,EAAUC,aAAa,aAAa,GACpCD,EAAUE,OAAS,CACjB/D,EAAG+D,EAASA,EAAO/D,EAAI,EACvBC,EAAG8D,EAASA,EAAO9D,EAAI,GAGrB+D,IACFH,EAAUI,SAAW5N,GAElB2N,GAAsB,MAAd3N,EAAKK,OAChBmN,EAAUxN,KAAOA,GAEnBwN,EAAUK,UAAYL,EAAUK,UAAY,kBAC5C3M,OAAOC,OAAOqM,EAAUlP,MAAO,CAC7BwP,SAAU,WACVC,OAAQ,KACRhG,IAAKjM,KAAK0C,KAClB,gDAEQsJ,KAAMhM,KAAK0C,KACnB,gDAEQwP,cAAe,OACfC,OAAQ,OACRvP,UAAW,SAAnB,uCACQC,gBAAiB,aAEnB4J,SAAS2F,KAAKC,YAAYX,GAC1B1R,KAAKgJ,KAAK2D,MAAM,aAAckF,EAAOH,EAAUI,SAAWJ,GACnDA,GAETZ,eA/LJ,SA+LA,GACM9Q,KAAKgQ,aAAc,EACnBhQ,KAAKiQ,aAAe,CAClBpC,EAAGjB,EAAEG,MACLe,EAAGlB,EAAEO,QAGTmF,gBAtMJ,SAsMA,cAEA,4CACUC,GAAgBA,EAAahS,OAAS,IACxCP,KAAKkQ,UAAY,GACjBqC,EAAarI,SAAQ,SAA7B,GACU,IAAV,uDACA,KADA,OAGA,GACY2D,EAAG2E,EAAKC,MAAM5E,EAAI,EAA9B,MACYC,EAAG0E,EAAKC,MAAM3E,EAAI,EAA9B,OAEA,gDACA,GAEUlO,EAAOmN,MAAQ2F,EAAS7E,EACxBjO,EAAOuN,MAAQuF,EAAS5E,EACxB,IAAV,6BACUgE,EAASW,MAAQC,EACjB,EAAV,uBAIIhO,SA9NJ,SA8NA,SACM1E,KAAKoO,SAAWpO,KAAKqR,YAAYC,EAAIpN,EAAM0N,EAAQC,IAErDc,gBAjOJ,SAiOA,GACM,IAAN,GACQ9E,EAAGjB,EAAEG,MACLe,EAAGlB,EAAEO,OAEb,oCACA,oBACM,MAAO,CACLU,EAAG+E,EAAO/E,EAAIgF,EAAOhF,EACrBC,EAAG8E,EAAO9E,EAAI+E,EAAO/E,IAGzBgF,UA7OJ,SA6OA,cACA,4BAEA,6DACA,mCAGQ9S,KAAKsS,gBAAgB1F,GAEvB5M,KAAKkQ,UAAUhG,SAAQ,SAA7B,GACA,WAAQ,IACR,WACA,GACU2D,EAAG2E,EAAKC,MAAM5E,EAAIkF,EAAalF,EAAI+D,EAAO/D,EAAI,EAAxD,MACUC,EAAG0E,EAAKC,MAAM3E,EAAIiF,EAAajF,EAAI8D,EAAO9D,EAAI,EAAxD,OAEQ0E,EAAKhQ,MAAMyJ,IAAM,EAAzB,UACQuG,EAAKhQ,MAAMwJ,KAAO,EAA1B,aAEMhM,KAAK8P,UAAYlD,EAAEoG,SAErBC,aAlQJ,SAkQA,GACM,IAAN,gBACA,WACMT,EAAKhQ,MAAMyJ,IAAMjM,KAAK0C,KAAKkK,EAAEO,MAAQyE,EAAO9D,EAAI9N,KAAK4B,OACrD4Q,EAAKhQ,MAAMwJ,KAAOhM,KAAK0C,KAAKkK,EAAEG,MAAQ6E,EAAO/D,EAAI7N,KAAK4B,OACtD,IAAN,aAEM,GADA5B,KAAKsO,UAAYtO,KAAKkT,iBAAiBtG,EAAEhN,OAAQkS,GAAYU,EAAKtO,MAC7DlE,KAAKsO,UAAV,CAGA,IAAN,2CACM,GAAIyD,EAAUoB,QAAQ,gBAAkB,EAAG,CACzC,IAAR,4CACQnT,KAAKgJ,KAAK2D,MAAM,gBAAiBmF,IAAa,EAAtD,aAEQ9R,KAAKgJ,KAAK2D,MAAM,gBAAiB,MAE/BmF,GACF9R,KAAKgJ,KAAK2D,MAAM,eAAxB,OACA,oBACA,EACA,KAIIuG,iBA3RJ,SA2RA,KACM,IAAN,qCACM,OAAKjG,EAAQmG,SAASxT,GAIlBkS,GAA6B,OAAjBA,EAASvN,MACnB3E,EAAOmS,UAAUoB,QAAQ,gBAAkB,EACtCnT,KAAKkT,iBAAiBtT,EAAOyT,eAGpCzT,EAAOmS,UAAUoB,QAAQ,UAAY,EAChCvT,EAEFI,KAAKkT,iBAAiBtT,EAAOyT,eAX3B,MAaXC,kBA3SJ,SA2SA,cAEA,KACM/P,EAAM2G,SAAQ,SAApB,GACQqJ,EAAU,GAAlB,wEAEMA,EAAU,OAAhB,OAAgB,CAAhB,YAEM,IAAN,KACA,KACA,KAsBM,OArBAA,EAAQrJ,SAAQ,SAAtB,GACQ,IAAR,4BACQ,GAAKsJ,EAAL,CAGA,IAAR,EAEUC,EADoB,UAAlBD,EAAKE,SACA,OAAjB,OAAiB,CAAjB,iBAEiB,OAAjB,OAAiB,CAAjB,UAEQ,IAAR,yBACQ,GAAID,GAAQE,EAAI,CAEd,IAAV,oBACUC,EAAQnO,GAAKoO,EAAvB,YACUC,EAAY7J,KAAK,CAA3B,qBACU8J,EAAU9J,KAAK,CAAzB,qBACU+J,EAAS/J,KAAK2J,QAGX,CACLE,YAAR,EACQC,UAAR,EACQC,SAAR,IAGIC,mBAjVJ,SAiVA,SACUH,EAAYvT,OAAS,GACvBuT,EAAY5J,SAAQ,SAA5B,GACc5F,EAAK4P,SAAWpC,EAASrM,KAC3B0O,EAAQC,GAAGnK,KAAK3F,EAAKkP,KAAK/N,IAC1BnB,EAAKkP,KAAKC,KAAOU,EAAQ1O,OAI3BsO,EAAUxT,OAAS,GACrBwT,EAAU7J,SAAQ,SAA1B,GACc5F,EAAK4P,SAAWpC,EAASrM,KAC3B0O,EAAQE,IAAIpK,KAAK3F,EAAKkP,KAAK/N,IAC3BnB,EAAKkP,KAAKG,GAAKQ,EAAQ1O,QAK/B6O,gBAnWJ,SAmWA,cACMN,EAAS9J,SAAQ,SAAvB,GACQ,GAAsB,UAAlBsJ,EAAKE,SAAsB,CAE7B,IAAV,2CACc,UACK,EAAnB,OACYF,EAAKC,KAAO,EAAxB,IAEYD,EAAKC,KAAO,KAGZD,EAAKC,MAAQD,EAAKG,IACpB,EAAV,sBACYlO,GAAI+N,EAAK/N,GACTlB,KAAMiP,EAAKjP,KACXC,KAAMgP,EAAKhP,KACXiP,KAAMD,EAAKC,KACXC,SAAUF,EAAKE,SACfC,GAAIH,EAAKG,GACTY,SAAUf,EAAKe,eAKvBC,aA5XJ,SA4XA,cACM,GAAIxU,KAAKkQ,WAAalQ,KAAKkQ,UAAU3P,OAAS,EAAG,CAC/C,IAMR,EANA,uDADA,EAEA,uBACA,GADA,EAFA,EAEA,cAFA,EAEA,YAFA,EAEA,SAGA,0BACA,KAEQP,KAAKkQ,UAAUhG,SAAQ,SAA/B,GACU,IAAV,aAEA,GADA,SACA,CACY6C,MAAOyF,EAAKC,MAAM5E,EAAIkF,EAAalF,EACnCV,MAAOqF,EAAKC,MAAM3E,EAAIiF,EAAajF,IAE/C,qBACcqG,EAAQ1O,KAAOqM,EAASrM,GAC1BgP,GAAS,EAET,EAAZ,4BAEU,EAAV,UACUlC,EAAatI,KAAKkK,MAEfM,GACHzU,KAAKsU,gBAAgBN,GAGvBhU,KAAKuN,OAAOC,OAAO,uBAAwB+E,GAE7CvS,KAAKgQ,aAAc,EACnBhQ,KAAKiQ,aAAe,KACpBjQ,KAAKkQ,UAAY,GACjBlQ,KAAKgJ,KAAK2D,MAAM,cAAc,IAEhC+H,YAhaJ,SAgaA,KACM,IAAN,QAEA,gBACM,GAAI5C,EAAU,CACZ,IAAR,WAEQ,GAAIA,EAAS6C,aAEX3U,KAAK4U,WAAW9C,UACTA,EAASrM,UACTqM,EAAS6C,oBACT7C,EAASW,MAChBA,EAAQrN,OAAOC,OAAOyM,EAAU,CAC9BjE,EACZ,iCACA,uBACA,UACYC,EACZ,iCACA,uBACA,UACY+G,cAAc,QAE1B,CAEU,IAAV,qDACYhH,EAAGjB,EAAEG,MAAQ6E,EAAO/D,EAAI7N,KAAK4B,MAC7BkM,EAAGlB,EAAEO,MAAQyE,EAAO9D,EAAI9N,KAAK4B,QAGzC,IACUkT,EAAI,CACFjH,EAAGiH,EAAEjH,EAAIiE,EAASiD,QAAUD,EAAEjH,EAAIiE,EAASiD,QAC3CjH,EAAGgH,EAAEhH,EAAIgE,EAASiD,QAAUD,EAAEhH,EAAIgE,EAASiD,SAGzC/U,KAAK8P,WAEPkF,EAAalD,EAASrM,GACtBgN,EAAQrN,OAAOC,OAAO,GAAIyM,EAAU,CAClCrM,GAAIoO,EAAlB,YACcQ,IAAK,GACLD,GAAI,GACJvG,EAAGiH,EAAEjH,EACLC,EAAGgH,EAAEhH,MAIPgH,EAAI,CACFjH,EAAGiH,EAAEjH,EAAI7N,KAAK4B,MACdkM,EAAGgH,EAAEhH,EAAI9N,KAAK4B,OAGhBkT,EAAI,OAAhB,OAAgB,CAAhB,GACYhD,EAASW,MAAM5E,EAAIiH,EAAEjH,EACrBiE,EAASW,MAAM3E,EAAIgH,EAAEhH,EACrB9N,KAAKgJ,KAAK2D,MAAM,WAAYmF,GAC5B2C,GAAS,IAIf,IAAKA,EAAQ,CAEX,IAAR,8CACA,0CACQhC,EAAQA,GAAS,CACflO,KAAMA,EACNE,KAAMA,EACNoJ,EAAGjB,EAAEG,MACLe,EAAGlB,EAAEO,MACL0H,cAAc,GAEhBV,EAAUnU,KAAKiV,aAAaxC,EAAOuC,EAAYlD,GAqBjD,OAFArF,SAAS2F,KAAK8C,YAAY1C,GAC1BxS,KAAK0N,SACE+G,EAAS3C,EAAWqC,GAE7Bc,aAhgBJ,SAggBA,kBACA,kBAqBM,OApBAjV,KAAKuD,MAAM0G,KAAKuI,GACZwC,GAEFhV,KAAKmV,cAAcH,EAAYxC,GAG7BV,GAAYA,EAASvO,OAASuO,EAASvO,MAAMhD,OAAS,IACxDiS,EAAKjP,MAAQ,GACbuO,EAASvO,MAAM2G,SAAQ,SAA/B,GACU,IAAV,oBACA,gBACA,CACY,EAAZ,UACY,EAAZ,WAEA,GAEUsI,EAAKjP,MAAM0G,KAAK,EAA1B,qBAGauI,GAET4C,YAxhBJ,SAwhBA,GACM,GAAIpV,KAAKsO,UAAW,CAClB,IAAR,2CACQ,GAAIyD,EAAUoB,QAAQ,gBAAkB,EAAG,CACzC,IAAV,4CACU,GAAIX,EAAM,CACR,IAAZ,IAEY,GAAIxS,KAAKoO,UAAYpO,KAAKoO,SAAS0D,SAAU,CAC3C,IAAd,yBACA,uBAEc,IACd,gBACA,sCAEgBW,EAAQrN,OAAOC,OAAOyM,EAAU,CAC9BjE,EAClB,iCACA,uBACA,UACkBC,EAClB,iCACA,uBACA,UACkB+G,cAAc,IAEhB7U,KAAK4U,WAAW9C,UACTA,EAASrM,OAChC,CAEgBgN,EAAQ,CACN5E,EAAGjB,EAAEG,MAAQ6E,EAAO/D,EAAI7N,KAAK4B,MAC7BkM,EAAGlB,EAAEO,MAAQyE,EAAO9D,EAAI9N,KAAK4B,MAC7BiT,cAAc,GAEhB,IAAhB,qBACgB/C,EAASW,MAAM5E,EAAI1I,EAAQ0I,EAAI2E,EAAKC,MAAM5E,EAE1CiE,EAASW,MAAM3E,EAC/B,sCACgB9N,KAAKgJ,KAAK2D,MAAM,WAAhC,0BACgB8H,GAAS,GAGb,IAAKA,EAAQ,CAEX,IAAd,8CACA,0CACchC,EAAQA,GAAS,CACflO,KAAMA,EACNE,KAAMA,EACNoJ,EAAGjB,EAAEG,MACLe,EAAGlB,EAAEO,MACL0H,cAAc,GAEhB,IAAd,uBACcrC,EAAKjP,MACnB,gBACA,yBACcvD,KAAK2G,KAAK6L,EAAM,QAASA,EAAKlP,OAAS,IACvCtD,KAAK2G,KAAK6L,EAAM,SAAUA,EAAKhP,QAAU,IACzCxD,KAAKqV,WAAW7C,IAIpB/F,SAAS2F,KAAK8C,YAAYlV,KAAKoO,eACzC,wBACUpO,KAAKyD,QAAUzD,KAAK0U,YAAY9H,EAAG5M,KAAKoO,UACxCpO,KAAKuN,OAAOC,OAAO,uBAAwB,CAACxN,KAAKyD,gBAGnDgJ,SAAS2F,KAAK8C,YAAYlV,KAAKoO,UAEjCpO,KAAKoO,SAAW,KAChBpO,KAAKgJ,KAAK2D,MAAM,cAAc,IAEhC7H,kBArmBJ,SAqmBA,KACMwM,EAAGC,aAAaC,aAAa,IAAIC,MAAS,EAAG,GAC7CzR,KAAKqO,UAAYiD,EAAG1R,OAAO8R,WAAU,GACrC1R,KAAKqO,UAAU0D,UAAY,qBAC3B/R,KAAKqO,UAAUsD,aAAa,aAAa,GACzC,IAAN,oBACM3R,KAAK2O,SAAW,IAAI2G,EAA1B,UACMlQ,OAAOC,OAAOrF,KAAKqO,UAAU7L,MAAO,CAClCwP,SAAU,WACVC,OAAQ,KACRxP,MAAOzC,KAAK0C,KAAK1C,KAAK2O,SAASlM,OAC/BE,OAAQ3C,KAAK0C,KAAK1C,KAAK2O,SAAShM,QAChCsJ,IAAKjM,KAAK0C,KAAK4O,EAAGnE,MAAQmE,EAAGiE,SAC7BvJ,KAAMhM,KAAK0C,KAAK4O,EAAGvE,MAAQuE,EAAGkE,SAC9BtD,cAAe,OACftP,UAAW,SAAnB,uCACQC,gBAAiB,aAEnB4J,SAAS2F,KAAKC,YAAYrS,KAAKqO,WAC/BrO,KAAKgJ,KAAK2D,MAAM,iBAAkB3M,KAAKqO,YAEzCoH,cA1nBJ,SA0nBA,GACM,GAAIzV,KAAKqO,UAAW,CAElB,IAAR,uCACQ,GACR,wDACA,mDACA,CACU,IAAV,iBACA,WACA,QACA,UAEU,GAAIqH,EAAc,CAChB,IAAZ,WACA,QACY1V,KAAK4O,UAAY+G,EACjB,IAAZ,8CACiBC,IACH5V,KAAKuN,OAAOC,OAAO,uBAAwB,CACzCgF,KAAMmD,EACNvM,IAAKpJ,KAAK2O,WAEZiH,EAAS5V,KAAKuN,OAAOsI,QAAQ,kBAAkBF,EAAQlQ,KAEzD,IAAZ,GACcgN,MAAO,CACL5E,EAAGiI,EAAKrD,MAAM5E,EAAIkI,EAAWtD,MAAM5E,EAAI7N,KAAK4B,MAC5CkM,EAChB,WACA,UACA,UACA,YACA,aACA,aAGA,mCACY,GAAI2E,EAAO,CACTzS,KAAK2O,SAAWvJ,OAAOC,OAAOrF,KAAK2O,SAAU8D,EAAO,CAClDsD,WAAhB,IAEc,IAAd,mDACA,SAWc,OATArD,EAAS7E,EAAI6E,EAAS7E,EAAIkI,EAAWtD,MAAM5E,EAAI7N,KAAK4B,MACpD8Q,EAAS5E,EACvB,KACA,UACA,YACA,aACA,WACc9N,KAAKqO,UAAU7L,MAAMyJ,IAAMjM,KAAK0C,KAAKgQ,EAAS5E,QAC9C9N,KAAKqO,UAAU7L,MAAMwJ,KAAOhM,KAAK0C,KAAKgQ,EAAS7E,KAInD,IAAV,sCAEU,GAAI2E,EAAM,CACRxS,KAAK4O,UAAY4D,EACjB,IAAZ,8CACiB,IACHxS,KAAKuN,OAAOC,OAAO,uBAAwB,CACzCgF,KAAhB,EACgBpJ,IAAKpJ,KAAK2O,WAEZ,EAAd,6CAEY,IAAZ,mCACY,GAAI,EAAhB,CACc3O,KAAK2O,SAAWvJ,OAAOC,OAAOrF,KAAK2O,SAAU,GAC7C,IAAd,mDACA,SAIc,OAFA3O,KAAKqO,UAAU7L,MAAMyJ,IAAMjM,KAAK0C,KAAK,EAAnD,QACc1C,KAAKqO,UAAU7L,MAAMwJ,KAAOhM,KAAK0C,KAAK,EAApD,MAKQ1C,KAAKqO,UAAU7L,MAAMyJ,IAAMjM,KAAK0C,KAAKkK,EAAEO,OACvCnN,KAAKqO,UAAU7L,MAAMwJ,KAAOhM,KAAK0C,KAAKkK,EAAEG,SAG5CiJ,aA/sBJ,SA+sBA,cASM,GARe,SAAXpJ,EAAErI,MACJqI,EAAI/H,OAAgB+H,EACpBA,EAAEwE,kBAEEvM,MAAMoR,UACRrJ,EAAI/H,MAAMoR,QAAQ,GAAKpR,MAAMoR,QAAQ,GAAKpR,OAGzC7E,KAAK4O,UAAV,CAGA,IAAN,2DACA,sCACM,GAAI5O,KAAK2O,SAASoH,WAAY,CAC5B,IAAR,2BACQ3M,EAAM,CACJqJ,MAAO,CACL5E,EAAGzE,EAAIqJ,MAAM5E,EAAIkI,EAAWtD,MAAM5E,EAAI7N,KAAK4B,MAC3CkM,EACZ,WACA,UACA,UACA,YACA,aACA,aAIM,IAAN,mCACM,GAAI2E,EAAO,CAIT,GAFAmD,EAAOM,OAAON,EAAOzC,QAAQV,GAAQ,GAEjCzS,KAAK2O,SAAS8E,KAAM,CACtB,IAAV,2BACA,gCACA,YACUjQ,EAAO0G,SAAQ,SAAzB,GACgB5F,EAAKmB,KAAO,EAA5B,eAEc,EAAd,+BACgBA,GAAI,EAApB,gBACgB2D,IAAK,CACHqJ,MAAO,CACL5E,EAAGvJ,EAAKmO,MAAM5E,EACdC,EAAGxJ,EAAKmO,MAAM3E,GAEhB3J,MAAOG,EAAKH,MACZoB,UAAWjB,EAAKiB,gBAKxBvF,KAAKmW,YAAYnW,KAAK2O,SAAS8E,KAAMjQ,GACrCxD,KAAK2O,SAASlJ,GAAKzF,KAAK2O,SAAS8E,YAC1BzT,KAAK2O,SAAS8E,KAGvBzT,KAAK2O,SAAWvJ,OAAOC,OAAOrF,KAAK2O,SAAU8D,GAC7CzS,KAAK2O,SAAS8D,MAAM5E,EAAI7N,KAAK2O,SAAS8D,MAAM5E,EAAI7N,KAAK4B,MACrD5B,KAAK2O,SAAS8D,MAAM3E,EAAI9N,KAAK2O,SAAS8D,MAAM3E,EAAI9N,KAAK4B,MACrD5B,KAAK2O,SAASuF,OAASlU,KAAK4O,UAAUnJ,GACtCzF,KAAKoW,YAAYpW,KAAK2O,UACtB3O,KAAKyD,QAAUzD,KAAK2O,SAChB3O,KAAK2O,SAAS0F,KAAOrU,KAAK2O,SAAS0F,IAAI9T,OAAS,GAClDP,KAAKgJ,KAAK2D,MAAM,YAA1B,OAEA,yDAEA,kBAMIyJ,YA3xBJ,SA2xBA,GACUzH,EAASoH,WACX/V,KAAKuD,MAAM2G,SAAQ,SAA3B,GACcyE,EAASoH,YAAcpH,EAASoH,WAAWtQ,KAAO+M,EAAK/M,IACzD+M,EAAKhP,OAAOyG,KAAK0E,MAIrB3O,KAAKwD,OAAOyG,KAAK0E,IAGrBiC,eAtyBJ,SAsyBA,KACM,IAAN,oBACMyF,EAAU5C,KAAO5O,EAAMY,GACvB4Q,EAAU5Q,GAAKoO,EAArB,YACM7T,KAAK8E,kBAAkB8H,EAAGyJ,IAG5BlB,cA7yBJ,SA6yBA,gBACA,KAMM,GALAnV,KAAKwD,OAAO0G,SAAQ,SAA1B,GACYoH,EAAG4C,SAAWc,GAChBsB,EAAWrM,KAAK,OAA1B,OAA0B,CAA1B,OAGgC,IAAtBqM,EAAW/V,OAAf,CAIAP,KAAKuN,OAAOC,OAAO,uBAAwB,CAAjD,kBACM,IAAN,8CACMoI,EAAO1L,SAAQ,SAArB,GACQoM,EAAWpM,SAAQ,SAA3B,GACcoH,EAAG/L,YAAcjB,EAAKiB,WAAa+L,EAAGnN,QAAUG,EAAKH,QACvDmN,EAAGiF,OAASjF,EAAG7L,GACf6L,EAAG7L,GAAKoO,EAApB,YACYvC,EAAGmB,MAAQnO,EAAKmO,MAChBnB,EAAG4C,OAAS1B,EAAK/M,GACjB,EAAZ,wBAKIiN,SAt0BJ,SAs0BA,WACA,EADA,OAEA,IAUM,OATA8D,EAAItM,SAAQ,SAAlB,GACQ,IAAR,qBACYuM,GAAgB/H,GACdgI,EAAMD,IACRC,EAAMD,EACNhE,EAAQnO,MAIPmO,GAETkE,YAp1BJ,SAo1BA,KACM,IAAN,YACA,gCACA,iCAGM,OAAOC,GAETC,cA51BJ,SA41BA,KACM,IAAN,qDACQhJ,EAAGjB,EAAEG,MACLe,EAAGlB,EAAEO,QAEP,MAAO,CAAb,0BAEI2J,WAn2BJ,SAm2BA,GACM,IAAN,gBACA,CACQ,GAAR,cACQ,KAAR,GAEA,GAEA,GACQjJ,EAAG1I,EAAQ0I,GAAK,EAChBC,EAAG3I,EAAQ2I,GAAK,GAElB,GAA4B,GAAxB3I,EAAQ0P,aAAsB,CAChC,IAAR,qDACUhH,EAAG1I,EAAQ0I,EACXC,EAAG3I,EAAQ2I,IAEbgH,EAAEjH,EAAIkJ,EAAGlJ,EACTiH,EAAEhH,EAAIiJ,EAAGjJ,EAKX,OAHAgH,EAAI,OAAV,OAAU,CAAV,GACM3P,EAAQ0I,EAAIiH,EAAEjH,EAAI7N,KAAK4B,MACvBuD,EAAQ2I,EAAIgH,EAAEhH,EAAI9N,KAAK4B,MAChBuD,GAGT6R,QA73BJ,SA63BA,GACM,IAAN,qBACM7R,EAAQX,KAAOW,EAAQX,MAAQ,OAASxE,KAAKuD,MAAMhD,OACnD,IAAN,gBACM,OAAOiS,GAGTyE,WAp4BJ,SAo4BA,KACM,IAAN,qBACM9R,EAAQX,KACd,4CACkC,GAAxBW,EAAQ0P,eACV1P,EAAQ0I,EAAI1I,EAAQ0I,EAAI2E,EAAKC,MAAM5E,EAEnC1I,EAAQ2I,EAChB,uCAEM,IAAN,gBAEM,OADAoJ,EAASvC,aAAenC,EAAK/M,GACtByR,GAETC,YAl5BJ,SAk5BA,KA6BIpG,QA/6BJ,SA+6BA,cACM,KAAI/Q,KAAKyD,UAAWzD,KAAKyD,QAAQ2T,WAGhB,IAAbxK,EAAEyK,QAAe,CACnB,IAAR,4CAEQ,GAAI9E,GAAgBA,EAAahS,OAAS,EAMxCgS,EAAarI,SAAQ,SAA/B,GACYoN,YAAW,WACT,EAAd,gBACA,WAEA,kCAEUtX,KAAK4U,WAAW5U,KAAKyD,cAC/B,6BACUzD,KAAKuN,OAAOC,OAAO,kBAAmBxN,KAAKyD,SAC3CzD,KAAK0N,cACf,kCACU1N,KAAKuX,WAAWvX,KAAKyD,cAC/B,mCAEU,IADA,IAAV,eACA,8BACY,IAAZ,yCACgB+T,GACFxX,KAAKuX,WAAWC,GAGpB,IAAV,0BACA,+BACA,YAEUxX,KAAKmW,YAAYnW,KAAKyD,QAAQgC,GAAIjC,GAEpCxD,KAAKyD,QAAU,KAGnBmR,WA19BJ,SA09BA,GAEM,IAAN,EACUpC,EAAKmC,eACPoB,EAAa/V,KAAKuD,MAAMkU,MAAK,SAArC,oCAEM,IAAN,oCACA,oCACA,sCACA,eACM,GAAItT,GAAS,EAAG,CAGd,IAFA,IAAR,IAEA,8BACU,IAAV,gCACcqT,GACFxX,KAAKuX,WAAWC,GAGpB,IAAK,IAAb,6BACU,IAAV,+BACc,GACFxX,KAAKuX,WAAW,GAIpB,IAAK,IAAb,oBACU,IAAV,cACU,GAAIrD,IAAW9K,EAAI3D,GAAI,CAGrB,IAFA,IAAZ,OAEA,2BACc,IAAd,sCACkB+N,GACFxT,KAAKuX,WAAW/D,GAGpBhQ,EAAO0S,OAAO,EAA1B,GACY,KAIJ3S,EAAM2S,OAAO/R,EAAO,KAGxBoT,WAvgCJ,SAugCA,GAGM,IAAN,EAFM/D,EAAKkE,SAGDlE,EAAKmB,eACPoB,EAAa/V,KAAKuD,MAAMkU,MAAK,SAArC,oCAEM,IAAN,oCACA,oCACA,eACUtT,GAAS,GACXnE,KAAK2X,gBAAgBpU,EAAOD,EAAOkQ,EAAMrP,IAG7CwT,gBArhCJ,SAqhCA,SACM,IAAN,2BACA,yBACM,GAAIlE,EAAM,CACR,IAAR,yBACYmE,GAAW,GACbnE,EAAK,OAAOyC,OAAO0B,EAAS,GAGhC,GAAIjE,EAAI,CACN,IAAR,wBACYkE,GAAW,GACblE,EAAG,MAAMuC,OAAO2B,EAAS,GAG7BvU,EAAM4S,OAAO/R,EAAO,GACpBnE,KAAKgJ,KAAK2D,MAAM,uBAElBwJ,YAviCJ,SAuiCA,KACM,IAAN,8BACA,YAAQ,OAAR,YAEMhS,GAAS,IAAMX,GAAkBxD,KAAKwD,QAAQ0S,OAAO/R,EAAO,GAE5DnE,KAAKuN,OAAOC,OAAO,gBAAiB,CAClC/H,GAAIzF,KAAKyD,QAAQyQ,OACjB9K,IAAK,CACHqJ,MAAO,CACL5E,EAAG7N,KAAKyD,QAAQgP,MAAM5E,EACtBC,EAAG9N,KAAKyD,QAAQgP,MAAM3E,GAExB3J,MAAOnE,KAAKyD,QAAQU,MACpBoB,UAAWvF,KAAKyD,QAAQ8B,cAM9B7D,QA3jCJ,SA2jCA,KACM1B,KAAK8X,WAAW,CACdvS,UAAWA,EACXpB,MAAOA,KAGX2T,WAjkCJ,SAikCA,GACM,IAAN,cACM3S,EAAQX,KACd,sCACMW,EAAQM,GAAKN,EAAQM,IAAMoO,EAAjC,YACM,IAAN,WACA,iBACA,kCAEUtO,GAAa,EAAvB,cAEQwG,EAAKC,KAAO+L,EAASA,EAAOzS,KAAOyS,EAAO/L,KAAO,EAGjDD,EAAKE,IAAM8L,EAASA,EAAOzS,KAAOyS,EAAO9L,IAAM,EAEjDjM,KAAKuN,OAAOC,OAAO,eAAgB,CACjCjI,UAAR,EACQwG,KAAR,EACQ5H,MAAOgB,EAAQhB,QAEjBnE,KAAK0N,UAEPnL,SAxlCJ,SAwlCA,GACM,IAAN,WACMvC,KAAKuN,OAAOC,OAAO,kBAAmB,CACpCJ,UAAWxN,EAAOwN,UAClBF,WAAYtN,EAAOsN,cAIvB8K,aAhmCJ,SAgmCA,GACM,IAAKxF,EAAK,OAASA,EAAK,MAAMjS,QAAU,EACtC,OAAO,KAGT,IADA,IAAI0X,EAAM,GAChB,0BACQ,IAAIC,EAAS1F,EAAK,MAAM/K,GACpB+L,EAAO,OAAnB,OAAmB,CAAnB,cACQ,GAAIA,EAAM,CACR,IAAI2E,EAAK,OAAnB,OAAmB,CAAnB,mBACUF,EAAIhO,KAAKkO,IAGb,OAAOF,GAGTG,WAhnCJ,SAgnCA,GACM,IAAK5F,EAAK,QAAUA,EAAK,OAAOjS,QAAU,EACxC,OAAO,KAGT,IADA,IAAI0X,EAAM,GAChB,2BACQ,IAAIC,EAAS1F,EAAK,OAAO/K,GACrB+L,EAAO,OAAnB,OAAmB,CAAnB,cACQ,GAAIA,EAAM,CACR,IAAI2E,EAAK,OAAnB,OAAmB,CAAnB,iBACUF,EAAIhO,KAAKkO,IAGb,OAAOF,GAETI,YA/nCJ,WA+nCA,WACM,GACN,eACA,2BACA,mCACA,CACQ,IAAR,KACA,KACA,KACA,KACA,KAWQ,GAVIrY,KAAKqD,SAASiV,WAChBC,EAAQtQ,MAAMuQ,QAAQxY,KAAKqD,SAASiV,UAC9C,uBACA,0BAEYtY,KAAKqD,SAASoV,WAChBlN,EAAQtD,MAAMuQ,QAAQxY,KAAKqD,SAASoV,UAC9C,uBACA,0BAEYzY,KAAKqD,SAASqV,UAEhB,IADA,IAAV,0BACA,mBACY1Y,KAAKwD,OAAOyG,KAAK,IAAIqL,EAAjC,YAIQ,IADA,IAAR,KACA,mBACUqD,EAAQJ,EAAM,GAAxB,SAEQ,IAAK,IAAb,mBACUI,EAAQpN,EAAM,GAAxB,SAEQvL,KAAKqD,SAASuV,YAAc3Q,MAAMuQ,QAAQxY,KAAKqD,SAASuV,aAChE,0BACA,4BACQ,IAAK,IAAb,4CACU,IAAV,+BAEkC,QAApBC,EAAQ/R,SACVvD,EAAM0G,KAAK4O,GAGvB,mBACA,UAGA,oBACA,UAGQ,IA/CR,eA+CA,GACU,IAAV,OACUrG,EAAK,MAAQvK,MAAMuQ,QAAQhG,EAAK,OAC1C,QACA,QACA,UACA,GACUA,EAAK,OAASvK,MAAMuQ,QAAQhG,EAAK,QAC3C,SACA,SACA,WACA,GACUA,EAAKC,MAAM5E,EAAIiL,WAAWtG,EAAKC,MAAM5E,GACrC2E,EAAKC,MAAM3E,EAAIgL,WAAWtG,EAAKC,MAAM3E,GACrC0E,EAAOpN,OAAOC,OACxB,CACY,EAAZ,UACY,EAAZ,WAEA,GAEU,EAAV,0BACYnB,EAAKgE,KAAKgC,SAAQ,SAA9B,GACA,qCACgBsI,EAAK7M,WAAWoT,SAAStP,KAAOnF,EAAKE,YAI3C,IAAV,eAEU,GADA,EAAV,cACcgO,EAAKjP,MAAO,CAEd,IAAZ,UACY,EAAZ,mBACYyV,EAAS9O,SAAQ,SAA7B,GACc5F,EAAOc,OAAOC,OAC5B,CACgB,EAAhB,UACgB,EAAhB,WAEA,GAEc8O,EAAQ5Q,MAAM0G,KAAK,EAAjC,oBAEY,EAAZ,mBACY,EAAZ,oBAEcuI,EAAKhP,QACPgP,EAAKhP,OAAO0G,SAAQ,SAAhC,GACc,IAAd,gBACc+O,EAASlD,WAAavD,EACtB2B,EAAQ3Q,OAAOyG,KAAKgP,MAGpBzG,EAAKlP,OACPkP,EAAKlP,MAAM4G,SAAQ,SAA/B,GACkBsJ,EAAKe,WACPf,EAAKe,SAAS2E,WAAaJ,WAAWtF,EAAKe,SAAS2E,YACpD1F,EAAKe,SAAS4E,SAAWL,WAAWtF,EAAKe,SAAS4E,WAGpD7B,YAAW,WACT,EAAhB,mCACkB7R,GAAI+N,EAAK/N,GACTlB,KAAMiP,EAAKjP,KACXC,KAAMgP,EAAKhP,KACX4U,KAAM5F,EAAK4F,KACX3F,KAAMD,EAAKC,KACXC,SAAUF,EAAKE,SACfC,GAAIH,EAAKG,GACTY,SAAUf,EAAKe,SACf5O,WAAY6N,EAAK7N,eAEnC,OAzEA,wBA6EQ,IAAK,IAAb,oBACU,IAAV,OAEcgT,EAAQnF,EAAK/N,KACFkT,EAAQnF,EAAK/N,IAExB+N,EAAKe,WACPf,EAAKe,SAAS2E,WAAaJ,WAAWtF,EAAKe,SAAS2E,YACpD1F,EAAKe,SAAS4E,SAAWL,WAAWtF,EAAKe,SAAS4E,WAEpDnZ,KAAKgJ,KAAK2D,MAAM,UAAW,CACzBlH,GAAI+N,EAAK/N,GACTlB,KAAMiP,EAAKjP,KACXC,KAAMgP,EAAKhP,KACX4U,KAAM5F,EAAK4F,KACX3F,KAAMD,EAAKC,KACXC,SAAUF,EAAKE,SACf2F,OAAQ7F,EAAK6F,OACb1F,GAAIH,EAAKG,GACTY,SAAUf,EAAKe,SACf5O,WAAY6N,EAAK7N,aAIrB,IAAK,IAAb,oBACU,IAAV,OACU3F,KAAK8X,WAAW,CACdrS,GAAIsG,EAAKtG,GACTjB,KAAMuH,EAAKvH,KACXc,KAAMyG,EAAKzG,KACXnB,MAAO4H,EAAK5H,MACZoB,UAAWwG,EAAKxG,UAChBI,WAAYoG,EAAKpG,cAIvB3F,KAAK0N,UAGPxM,OAvyCJ,WAyyCM4K,KAAKnG,WAAWoT,SAAShT,GAAK/F,KAAKyO,MA4BnC,IA3BA,IAAN,GACQ6K,SAAU,CACRP,SAAUjN,KAAKnG,WAAWoT,SAC1BT,SAAU,GACVG,SAAU,GACVC,UAAW,GACXa,SAAU,CACRrW,WAAY,GACZF,SAAU,IAEZ4V,YAAa,KAGvB,GACQrV,MAAO,OAAf,OAAe,CAAf,wCACQR,MAAO,OAAf,OAAe,CAAf,eACQO,MAAO,OAAf,OAAe,CAAf,YACQE,OAAQ,OAAhB,OAAgB,CAAhB,cAIA,mBACA,8BAEA,KACA,KAEA,0BACQ,IAAR,aAEQ,GAAiB,KAAbgP,EAAKjO,KAAa,CAEpB,IAAV,KACA,KACA,uBACU,GAAI0T,EACF,IAAK,IAAjB,oBACc,IAAd,OACcuB,EAAYvP,KAAKwP,EAAQC,EAAGjU,KAKhC,GADAwS,EAAMjY,KAAKoY,WAAW5F,GAClByF,EACF,IAAK,IAAjB,oBACc,IAAd,OACc0B,EAAU1P,KAAKwP,EAAQ,EAArC,KAGU,IAAV,GACYjH,KAAMA,EACNiB,KAAM+F,EACN7F,GAAIgG,GAENC,EAAK3P,KAAKb,IAGd,IAAK,IAAX,oBACQ,IAAR,OACA,OAEQ,GAAI,EAAZ,sBAEU,IAAK,IAAf,yBAEY,IADA,IAAZ,YACA,gCACc,IAAd,mBACA,4BACcyQ,EAAUlU,WAAWI,GAAK8T,EAAUpU,GAAK,IAAM0S,EAAG1S,GAClDoU,EAAUlU,WAAWmU,YAAc3B,EAAG1S,GACtCsU,EAASzW,MAAM2G,KAAK4P,GACpBG,EAAY/P,KAAKiO,GAEnBC,EAAGxS,WAAWsU,QAAQC,eAClC,yCACY,IAAZ,kCACgBC,IACFA,EAAIxU,WAAWsU,QAAQC,eACrC,0CAIU,IAAK,IAAf,8BACYF,EAAY/P,KAAK,EAA7B,oBAGU,IAAK,IAAf,yBACY,IAAZ,YACY,EAAZ,mCACcmQ,UAAW,KAEb,IAAZ,kCACgB,IACF,EAAd,mCACgBA,UAAW,OAOrB,IAAK,IAAX,mBACQ,IAAK,IAAb,4BACcL,EAASzW,MAAM,GAA7B,qBACYyW,EAASzW,MAAM4S,OAAO,EAAlC,GAKM,IAhHN,eAgHA,GACQ,IAAR,aACY1D,EAAKlP,OACPkP,EAAKlP,MAAM4G,SAAQ,SAA7B,UACmBsJ,EAAK6G,SAGZ7H,EAAKhP,QACPgP,EAAKhP,OAAO0G,SAAQ,SAA9B,GACYsI,EAAKmC,aAAenC,EAAKuD,WAAWtQ,UAC7B+M,EAAKuD,cAGZvD,EAAKjP,OACPiP,EAAKjP,MAAM2G,SAAQ,SAA7B,UACmBoQ,EAAM5U,gBACN4U,EAAMjO,QAIjB,EAAR,0BACUnI,EAAKgE,KAAKgC,SAAQ,SAA5B,GACA,qCACcsI,EAAK7M,WAAWoT,SAAStP,KAAOnF,EAAKC,YAI3CgW,EAASjB,SAAShB,SAASrO,KAAKuI,EAAK7M,YACrC6M,EAAK1L,SAAW,OAChByT,EAASjB,SAASV,YAAY3O,KAAKuI,IA7B3C,8BA+BM,IAAK,IAAX,0BACQ,IAAR,oBACegB,EAAK6G,MACZE,EAASjB,SAASb,SAASxO,KAAKuJ,EAAK7N,mBAE9B6N,EAAKgH,gBACLhH,EAAK9N,SACZ8N,EAAK1M,SAAW,OAChByT,EAASjB,SAASV,YAAY3O,KAAKuJ,GAErC,IAAK,IAAX,2BACQ,IAAR,cACQ+G,EAASjB,SAASZ,UAAUzO,KAAK,EAAzC,YAEQ,EAAR,iBACQsQ,EAASjB,SAASV,YAAY3O,KAAK,GAGrC,IAAK,IAAX,qCACQ,IAAR,wBACA,2BACe,EAAf,SACQsQ,EAASjB,SAASC,SAASrW,WAAW+G,KAAK8B,EAAKpG,YAChD,EAAR,gBACQ4U,EAASjB,SAASV,YAAY3O,KAAK,GAErC,IAAK,IAAX,mCACQ,IAAR,sBACA,2BACe,EAAf,SACQsQ,EAASjB,SAASC,SAASvW,SAASiH,KAAK,EAAjD,YACQ,EAAR,gBACQsQ,EAASjB,SAASV,YAAY3O,KAAK,GAErC,IAAN,GACQwQ,MAAOC,KAAKC,UAAUJ,IAExBva,KAAKwQ,MACX,8CACA,kBACA,UACU,IAAV,yBAEU,IAAV,4BAGA,kBACQ,IAAR,6BAGIoK,oBAx+CJ,SAw+CA,GAEM,IADA,IAAIC,EAAK,GACf,0BACQ,IAAIrI,EAAOsI,EAAKvX,MAAMkE,GACtBoT,EAAGrI,EAAK/M,IAAM+M,EAEhB,IAAK,IAAX,0BACQ,IAAIgB,EAAOsH,EAAKxX,MAAM,GACtBuX,EAAGrH,EAAK/N,IAAM+N,EAEhB,IAAK,IAAX,qCACQ,IAAIzH,EAAO+O,EAAK/X,MAAMG,WAAW,GACjC2X,EAAG9O,EAAKtG,IAAMsG,EAEhB,IAAK,IAAX,mCACYA,EAAO+O,EAAK/X,MAAMC,SAAS,GAC/B6X,EAAG9O,EAAKtG,IAAMsG,EAEhB,OAAO8O,GAETrZ,SA5/CJ,WA6/CMxB,KAAKuB,YAAcvB,KAAKuB,YAE1BmM,OA//CJ,WAggDM,IAAN,oCACA,qCACA,OACA,OAEA,oDAEA,yCAEUqN,GAASA,EAAMzV,KAAOyV,EAAM/O,KAAOgP,EAAkBvY,EACvDzC,KAAKyC,MAAQsY,EAAMzV,KAAOyV,EAAM/O,KAAOgP,EAEvChb,KAAKyC,MAAQwY,EAGf,IAAN,wDAEA,0CAEUC,GAASA,EAAM5V,KAAO4V,EAAMjP,IAAMkP,EAAiBxY,EACrD3C,KAAK2C,OAASuY,EAAM5V,KAAO4V,EAAMjP,IAAMkP,EAEvCnb,KAAK2C,OAASyY,EAIhB,IAAN,IACA,IACMpb,KAAKuD,MAAM2G,SAAQ,SAAzB,GACYsI,EAAK/P,MAAQ+P,EAAKC,MAAM5E,EAAmB,EAAf2E,EAAKuC,QAAcxG,IACjDA,EAAWiE,EAAK/P,MAAQ+P,EAAKC,MAAM5E,EAAmB,EAAf2E,EAAKuC,SAE1CvC,EAAK7P,OAAS6P,EAAKC,MAAM3E,EAAmB,EAAf0E,EAAKuC,QAAc,GAAKsG,IACvDA,EAAY7I,EAAK7P,OAAS6P,EAAKC,MAAM3E,EAAmB,EAAf0E,EAAKuC,QAAc,OAGhE/U,KAAKyC,MAAQzC,KAAKyC,MAAQ8L,EAAWvO,KAAKyC,MAAQ8L,EAClDvO,KAAK2C,OAAS3C,KAAK2C,OAAS0Y,EAAYrb,KAAK2C,OAAS0Y,GAExDhG,WAviDJ,SAuiDA,GAEM,IAAN,IACA,IACM7C,EAAKjP,MAAM2G,SAAQ,SAAzB,GACY5F,EAAK7B,MAAQ6B,EAAKmO,MAAM5E,EAAmB,EAAfvJ,EAAKyQ,QAAcxG,IACjDA,EAAWjK,EAAK7B,MAAQ6B,EAAKmO,MAAM5E,EAAmB,EAAfvJ,EAAKyQ,SAGtD,SACA,UACA,YACA,GACA,YACA,YACA,IAGUsG,EACV,SACA,UACA,YACA,GACA,YACA,gBAGM7I,EAAK/P,MAAQ+P,EAAK/P,MAAQ8L,EAAWiE,EAAK/P,MAAQ8L,EAClDiE,EAAK7P,OAAS6P,EAAK7P,OAAS0Y,EAAY7I,EAAK7P,OAAS0Y,EACtDrb,KAAKgJ,KAAK2D,MAAM,WAAY6F,IAE9B7B,WAtkDJ,SAskDA,GACM,IAAN,OACA,SACkB,QAARpM,GACFkO,EAAQ6I,EAAI7I,MACR6I,EAAI1N,MAAMC,EAAI7N,KAAKyC,MAAQ,EAC7BgQ,EAAM5E,EAAI4E,EAAM5E,EAAIyN,EAAIpT,KAAKzF,MAAQzC,KAAK+O,cAE1C0D,EAAM5E,EAAI4E,EAAM5E,EAEdyN,EAAI1N,MAAME,EAAI9N,KAAK2C,OAAS,EAC9B8P,EAAM3E,EAAI2E,EAAM3E,EAAIwN,EAAIpT,KAAKvF,OAAS3C,KAAK+O,cAE3C0D,EAAM3E,EAAI2E,EAAM3E,GAE1B,WACQ2E,EAAQzS,KAAKuN,OAAOsI,QAAQ,8BAA8B,CACxDhI,EAAGyN,EAAI1N,MAAMC,EACbC,EAAGwN,EAAI1N,MAAME,IAEXwN,EAAI1N,MAAMC,EAAI7N,KAAKyC,MAAQ,EAC7BgQ,EAAM5E,EAAI4E,EAAM5E,EAAI7N,KAAK+O,cAEzB0D,EAAM5E,EAAI4E,EAAM5E,EAAI7N,KAAK+O,cAEvBuM,EAAI1N,MAAME,EAAI9N,KAAK2C,OAAS,EAC9B8P,EAAM3E,EAAI2E,EAAM3E,EAAI9N,KAAK+O,cAEzB0D,EAAM3E,EAAI2E,EAAM3E,EAAI9N,KAAK+O,eAEnC,YACQ0D,EAAQzS,KAAKuN,OAAOsI,QAAQ,8BAA8B,CACxDhI,EAAGyN,EAAI1N,MAAMC,EACbC,EAAGwN,EAAI1N,MAAME,IAEXwN,EAAI1N,MAAMC,EAAI7N,KAAKyC,MAAQ,EAC7BgQ,EAAM5E,EAAI4E,EAAM5E,EAAI7N,KAAK+O,cAEzB0D,EAAM5E,EAAI4E,EAAM5E,EAEdyN,EAAI1N,MAAME,EAAI9N,KAAK2C,OAAS,EAC9B8P,EAAM3E,EAAI2E,EAAM3E,EAAI9N,KAAK+O,cAEzB0D,EAAM3E,EAAI2E,EAAM3E,GAIpB,IACN,MADA,qBAEU2E,EAAM5E,EAAIwF,EAAcnG,aAC1B5H,EAAOvD,KAAKwZ,IAAIlI,EAAcnG,WAAauF,EAAM5E,GACjDX,EAAamG,EAAcnG,WAC3BmG,EAAcnG,WAAaA,EAAa5H,EAAO,GAE7CmN,EAAM3E,EAAIuF,EAAcjG,YAC1B9H,EAAOvD,KAAKwZ,IAAIlI,EAAcjG,UAAYqF,EAAM3E,GAChDV,EAAYiG,EAAcjG,UAC1BiG,EAAcjG,UAAYA,EAAY9H,EAAO,GAE3CmN,EAAM+I,EAAInI,EAAcjG,YAC1B9H,EAAOvD,KAAKwZ,IAAIlI,EAAcnG,WAAauF,EAAM5E,GACjDX,EAAamG,EAAcnG,WAC3BmG,EAAcnG,WAAaA,EAAa5H,EAAO,GAG7CmN,EAAM5E,EAAIwF,EAAchD,YAAcgD,EAAcnG,aACtDlN,KAAKyC,MAAQgQ,EAAM5E,EACnBvI,EAAOvD,KAAKwZ,IACpB,gCAEQrO,EAAamG,EAAcnG,WAC3BmG,EAAcnG,WAAaA,EAAa5H,EAAO,GAE7CmN,EAAM3E,EAAIuF,EAAc/C,aAAe+C,EAAcjG,YACvDpN,KAAK2C,OAAS8P,EAAM3E,EACpBxI,EAAOvD,KAAKwZ,IACpB,gCAEQnO,EAAYiG,EAAcjG,UAC1BiG,EAAcjG,UAAYA,EAAY9H,EAAO,IAGjDoL,iBAxpDJ,SAwpDA,GAEM,IAAN,UACA,UACA,WACA,SACU+B,EAAM5E,EAAI4N,EAAOhZ,MAAQgZ,EAAOhJ,MAAM5E,EACxC4E,EAAM5E,EAAI4E,EAAM5E,EAAI2E,EAAK/P,MAAQzC,KAAK+O,cAEtC0D,EAAM5E,EAAI4E,EAAM5E,EAEd4E,EAAM3E,EAAI2N,EAAO9Y,OAAS8Y,EAAOhJ,MAAM3E,EACzC2E,EAAM3E,EAAI2E,EAAM3E,EAAI0E,EAAK7P,OAAS3C,KAAK+O,cAEvC0D,EAAM3E,EAAI2E,EAAM3E,EAGd2E,EAAM5E,EAAI4N,EAAOhZ,MAAQ,IAC3BgZ,EAAOhZ,MAAQgQ,EAAM5E,GAEnB4E,EAAM3E,EAAI2N,EAAO9Y,OAAS,IAC5B8Y,EAAO9Y,OAAS8P,EAAM3E,GAExB9N,KAAKgJ,KAAK2D,MAAM,WAAY8O,GAC5Bzb,KAAK2Q,WAAW,CACdpM,KAAM,OACN2D,KAAMuT,EACN7N,MAAO,CACLC,EAAGD,EAAMC,EACTC,EAAGF,EAAME,GAEX2E,MAAO,CACL5E,EAAG4E,EAAM5E,EACTC,EAAG2E,EAAM3E,MAIf4N,UA7rDJ,SA6rDA,GACM,GAA0B,OAAtBC,EAAI/b,OAAOgc,QAAkB,CACfD,EAAI/b,OAAOmS,UAC3B,GAA0B,QAAtB4J,EAAI/b,OAAOgc,QAAmB,CAChC,IAAIC,EAAS,OAAvB,OAAuB,CAAvB,UACU,GAAIA,EAAQ,CACV,IAAI9E,EAAK/W,KAAKuN,OAAOsI,QAAQ,8BAA8B,CACzDhI,EAAG8N,EAAI5O,MACPe,EAAG6N,EAAIxO,QAEL0O,EAAOtX,MAAQ,EAA/B,gBAEA,YACA,qCAIA,UACA,oCAHgBvE,KAAK8b,cAAc,QAOnB9b,KAAK8b,cAAc,aAInC,YACA,qCAIA,UACA,oCAHgB9b,KAAK8b,cAAc,QAOnB9b,KAAK8b,cAAc,oBAM3B9b,KAAK8b,cAAc,YAGvBA,cA1uDJ,SA0uDA,GACM9b,KAAKiR,MAAMC,KAAK1O,MAAM2P,OAAS5N,GAEjCsM,gBA7uDJ,SA6uDA,GAEM7Q,KAAKoP,iBAAkB,EACvBpP,KAAKqP,UAAYrP,KAAKuN,OAAOsI,QAAQ,8BAA8B,CACjEhI,EAAGjB,EAAEG,MACLe,EAAGlB,EAAEO,QAEPnN,KAAKsP,oBAAsB,CACzBzB,EAAGjB,EAAEG,MACLe,EAAGlB,EAAEO,OAEPnN,KAAKuP,WAAavP,KAAK+b,WAEzBC,WA1vDJ,SA0vDA,GACM,GAAIhc,KAAKoP,gBAAiB,CACxB,IAAR,GACUvB,EAAG8N,EAAI5O,MACPe,EAAG6N,EAAIxO,OAEjB,2CACA,oBACA,GACUU,EAAG+E,EAAO/E,EAAIgF,EAAOhF,EACrBC,EAAG8E,EAAO9E,EAAI+E,EAAO/E,GAE/B,iBACA,iBACQ,GAAmB,GAAfmO,EAAUpO,GAAyB,GAAfoO,EAAUnO,EAChC,OAAO,EAET,IAAR,KACA,KAWQ,OAVI9N,KAAKuP,WAAW1B,EAAIoO,EAAUpO,EAAI,IACpC7N,KAAKuP,WAAW1B,GAAKoO,EAAUpO,EAC/BqO,GAAS,GAEPlc,KAAKuP,WAAWzB,EAAImO,EAAUnO,GAAK,IACrC9N,KAAKuP,WAAWzB,GAAKmO,EAAUnO,EAC/BqO,GAAS,GAEXnc,KAAKgJ,KAAK2D,MAAM,aAAcsP,EAAWC,EAAQC,EAAQR,QACzD3b,KAAKsP,oBAAsBsD,KAI/BmJ,QA1xDJ,WA+xDM,IAJA,IAAN,mBACA,mBACA,mBACA,mBACA,6BACQ,IAAR,gBACYvJ,EAAKC,MAAM5E,EAAIA,IACjBA,EAAI2E,EAAKC,MAAM5E,GAEb2E,EAAKC,MAAM5E,EAAI2E,EAAK/P,MAAQA,IAC9BA,EAAQ+P,EAAKC,MAAM5E,EAAI2E,EAAK/P,OAE1B+P,EAAKC,MAAM3E,EAAIA,IACjBA,EAAI0E,EAAKC,MAAM3E,GAEb0E,EAAKC,MAAM3E,EAAI0E,EAAK7P,OAASA,IAC/BA,EAAS6P,EAAKC,MAAM3E,EAAI0E,EAAK7P,QAGjC,IAAK,IAAX,4BAEQ,IADA,IAAR,gBACA,wBACc6Q,EAAK4F,KAAKgD,GAAGvO,EAAIA,IACnBA,EAAI2F,EAAK4F,KAAKgD,GAAGvO,GAEf2F,EAAK4F,KAAKgD,GAAGvO,EAAIpL,IACnBA,EAAQ+Q,EAAK4F,KAAKgD,GAAGvO,GAEnB2F,EAAK4F,KAAKgD,GAAGtO,EAAIA,IACnBA,EAAI0F,EAAK4F,KAAKgD,GAAGtO,GAEf0F,EAAK4F,KAAKgD,GAAGtO,EAAInL,IACnBA,EAAS6Q,EAAK4F,KAAKgD,GAAGtO,GAI5B,MAAO,CACLD,EAAGA,EACHC,EAAGA,EACHrL,MAAOA,EACPE,OAAQA,IAGZ0Z,eAt0DJ,SAs0DA,GAEM,IAAN,EAsBM,OAvBAzP,EAAIA,GAAKoB,OAAOnJ,MAEZ+H,EAAE0P,YAEA1P,EAAE0P,WAAa,IAEjB/W,EAAY,MAEVqH,EAAE0P,WAAa,IAEjB/W,EAAY,SAEtB,WAEYqH,EAAE2P,OAAS,IAEbhX,EAAY,MAEVqH,EAAE2P,OAAS,IAEbhX,EAAY,SAGTA,GAET4L,YAh2DJ,SAg2DA,GAIM,GAHAvE,EAAIA,GAAKoB,OAAOnJ,MAGZ+H,EAAE0P,YAAc1P,EAAEoG,QAAS,CAC7BpG,EAAEwE,iBACF,IAAR,yBACQpR,KAAK6B,UAAU0D,KAGnB1D,UA12DJ,SA02DA,GAEQ7B,KAAK4B,MAAQ4G,OADG,OAAdjD,GAEV,+CAIA,6CAGMvF,KAAKuN,OAAOC,OAAO,eAAgB,CACjC5L,MAAO5B,KAAK4B,QAEd5B,KAAKuN,OAAOC,OAAO,qBAErBgP,iBAz3DJ,SAy3DA,GAaM,GAZKxc,KAAK6P,eACR7P,KAAK6P,aAAepD,SAASgQ,cAAc,OAC3Czc,KAAK6P,aAAakC,UAAY,eAC9B3M,OAAOC,OAAOrF,KAAK6P,aAAarN,MAAO,CACrCyP,OAAQ,KACRrP,UAAW,eAArB,wDACA,kCADA,UAGUsP,cAAe,SAEjBlS,KAAKiR,MAAMC,KAAKmB,YAAYrS,KAAK6P,eAE/B7P,KAAKyP,gBAAiB,CACxB,IAKR,QALA,uBACA,qDACU5B,EAAGjB,EAAEG,MACLe,EAAGlB,EAAEO,QAGHyC,EAAI/B,EAAI8B,EAAM9B,GAChB7B,EAAO2D,EAAM9B,EACbpL,EAAQmN,EAAI/B,EAAI8B,EAAM9B,IAEtB7B,EAAO4D,EAAI/B,EACXpL,EAAQkN,EAAM9B,EAAI+B,EAAI/B,GAEpB+B,EAAI9B,EAAI6B,EAAM7B,GAChB7B,EAAM0D,EAAM7B,EACZnL,EAASiN,EAAI9B,EAAI6B,EAAM7B,IAEvB7B,EAAM2D,EAAI9B,EACVnL,EAASgN,EAAM7B,EAAI8B,EAAI9B,GAEzB9N,KAAK0P,mBAAmBC,MAAM9B,EAAI7B,EAAOhM,KAAK4B,MAC9C5B,KAAK0P,mBAAmBC,MAAM7B,EAAI7B,EAAMjM,KAAK4B,MAC7C5B,KAAK0P,mBAAmBE,IAAI/B,GAAK7B,EAAOvJ,GAASzC,KAAK4B,MACtD5B,KAAK0P,mBAAmBE,IAAI9B,GAAK7B,EAAMtJ,GAAU3C,KAAK4B,MACtDwD,OAAOC,OAAOrF,KAAK6P,aAAarN,MAAO,CACrCI,UAAW,eAArB,mCACA,aADA,UAGUH,MAAOzC,KAAK0C,KAAKD,EAAQzC,KAAK4B,OAC9Be,OAAQ3C,KAAK0C,KAAKC,EAAS3C,KAAK4B,WAItC8a,gBAx6DJ,SAw6DA,GAEM,GADA1c,KAAKwP,gBAAiB,EAClBxP,KAAK6P,aAAc,CAC7B,mDACUhC,EAAGjB,EAAEG,MACLe,EAAGlB,EAAEO,QAEPnN,KAAKgJ,KAAK2D,MAClB,eACA,8BACA,6BAEQ3M,KAAKiR,MAAMC,KAAKgE,YAAYlV,KAAK6P,cACjC7P,KAAK6P,aAAe,OAGxB8M,aAx7DJ,SAw7DA,GACM,IAAN,sCACUpK,GAAgBA,EAAahS,OAAS,EACxCP,KAAK+P,cAAgB,OAA7B,OAA6B,CAA7B,GAEQ/P,KAAK+P,cAAgB,CAAC/P,KAAKyD,UAG/BmZ,UAh8DJ,SAg8DA,cACA,KADA,EAEA,uBACA,oBADA,EAFA,EAEA,cAFA,EAEA,YAFA,EAEA,SAGM5c,KAAK+P,cAAc7F,SAAQ,SAAjC,GACQ,IAAR,IAEA,OACA,sBACUzE,GAAIoO,EAAd,YACUQ,IAAK,GACLD,GAAI,GACJvG,EAAGiE,EAASW,MAAM5E,EAAI,GACtBC,EAAGgE,EAASW,MAAM3E,EAAI,KAEhC,wBACQ,EAAR,4BACQoC,EAAUjG,KAAKkK,GACf,EAAR,aAEMnU,KAAKsU,gBAAgBN,GACrBhU,KAAK+P,cAAgBG,EACrBlQ,KAAKuN,OAAOC,OAAO,uBAAwB0C,MCj1E2T,ICQxW,G,UAAY,eACd,EACAzP,EACAuE,GACA,EACA,KACA,KACA,OAIa,e,2CCnBf,yBAA4kB,EAAG,G,kFCA/kB,yBAA0jB,EAAG","file":"static/js/Flow.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flow.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flow.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flowInfo.vue?vue&type=style&index=0&id=4ed6962c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flowInfo.vue?vue&type=style&index=0&id=4ed6962c&lang=scss&scoped=true&\"","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.sub` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.sub\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('sub') }, {\n  sub: function sub() {\n    return createHTML(this, 'sub', '', '');\n  }\n});\n","'use strict';\nvar collection = require('../internals/collection');\nvar collectionStrong = require('../internals/collection-strong');\n\n// `Set` constructor\n// https://tc39.github.io/ecma262/#sec-set-objects\nmodule.exports = collection('Set', function (init) {\n  return function Set() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionStrong);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ds_workflow ds-designer\",attrs:{\"id\":\"desginer\"}},[_c('div',{staticClass:\"designer-head\"},[_c('div',{staticClass:\"desginer_tools\"},[_c('a',{staticClass:\"ds-button__icon-text\",on:{\"click\":_vm.doSave}},[_c('i',{staticClass:\"iconfont icon-baocun\"}),_c('span',[_vm._v(\"保存\")])]),_vm._m(0),_vm._m(1),_vm._m(2),_vm._m(3),_c('a',{staticClass:\"ds-button__icon-text\",class:{ selected: _vm.isDrawLine },on:{\"click\":_vm.drawLine}},[_c('i',{staticClass:\"iconfont icon-liujisuan\"}),_c('span',[_vm._v(\"连线\")])]),_c('a',{staticClass:\"ds-button__icon-text\"},[_c('i',{staticClass:\"iconfont icon-iframetianjia\"}),_vm._m(4),_c('dl',{staticClass:\"layui-nav-child\"},[_c('dd',{on:{\"click\":function($event){return _vm.addLane('vertical')}}},[_c('span',[_vm._v(\"泳道(垂直)\")])]),_c('dd',{on:{\"click\":function($event){return _vm.addLane('horizontal')}}},[_c('span',[_vm._v(\"泳道(水平)\")])])])]),_c('a',{staticClass:\"ds-button__icon-text scale\"},[_c('div',{staticClass:\"scale-com\"},[_c('i',{staticClass:\"el-icon-minus\",class:{ disabled: _vm.scale <= 0.4 },on:{\"click\":function($event){return _vm.rootScale('down')}}}),_c('span',{staticClass:\"percent\"},[_vm._v(_vm._s(Math.round(_vm.scale * 100))+\"%\")]),_c('i',{staticClass:\"el-icon-plus\",class:{ disabled: _vm.scale >= 2 },on:{\"click\":function($event){return _vm.rootScale('up')}}})]),_c('span',[_vm._v(\"缩放\")])]),_c('a',{staticClass:\"ds-button__icon-text\"},[_c('i',{staticClass:\"iconfont icon-dakai\"}),_vm._m(5),_c('dl',{staticClass:\"layui-nav-child\"},[_c('p',{on:{\"click\":function($event){return _vm.exportFlow()}}},[_c('span',[_vm._v(\"创建组\")])]),_c('p',{staticClass:\"label\",on:{\"click\":function($event){return _vm.saveAsFlow()}}},[_c('span',[_vm._v(\"保存为组件\")])]),_c('p',{on:{\"click\":function($event){return _vm.openFlow()}}},[_c('span',[_vm._v(\"选择组\")])])])]),_c('a',{staticClass:\"ds-button__icon-text\"},[_c('i',{staticClass:\"iconfont icon-lianjieliu\"}),_vm._m(6),_c('dl',{staticClass:\"layui-nav-child\"},[_c('p',{on:{\"click\":function($event){return _vm.exportFlow()}}},[_c('span',[_vm._v(\"导出\")])]),_c('p',{staticClass:\"child\"},[_vm._v(\"DFR\")]),_c('p',{staticClass:\"child\"},[_vm._v(\"BPMN2.0\")]),_c('p',{staticClass:\"child\"},[_vm._v(\"XML\")]),_c('p',{staticClass:\"label child\"},[_vm._v(\"JSON\")]),_c('p',{on:{\"click\":function($event){return _vm.openFlow()}}},[_c('span',[_vm._v(\"导入\")])]),_c('p',{staticClass:\"child\"},[_vm._v(\"DFR\")]),_c('p',{staticClass:\"child\"},[_vm._v(\"BPMN2.0\")]),_c('p',{staticClass:\"child\"},[_vm._v(\"XML\")]),_c('p',{staticClass:\"label child\"},[_vm._v(\"JSON\")]),_c('p',{staticClass:\"label\",on:{\"click\":function($event){return _vm.startTestFlow()}}},[_c('span',[_vm._v(\"仿真测试\")])]),_c('p',{on:{\"click\":function($event){return _vm.monitorFlow()}}},[_c('span',[_vm._v(\"浏览监控\")])])])])])]),_c('div',{staticClass:\"designer-content\"},[_c('div',{staticClass:\"designer-center\"},[_c('div',{ref:\"ds_page\",staticClass:\"ds_control ds_page layui-form leftRight_ design\",on:{\"scroll\":function($event){return _vm.onScroll($event)}}},[_c('div',{ref:\"container\",staticClass:\"flow\",style:({\n            width: _vm.toPx(_vm.scale > 1 ? _vm.width * _vm.scale : _vm.width / _vm.scale),\n            height: _vm.toPx(_vm.scale > 1 ? _vm.height * _vm.scale : _vm.height / _vm.scale),\n            transform: (\"scale(\" + _vm.scale + \") translateZ(0)\"),\n            transformOrigin: 'left top',\n          }),attrs:{\"id\":\"flow_box\"}},[_c('div',{ref:\"root\",staticClass:\"root\",class:{\n              has_v_head: _vm.lanes && _vm.lanes.vertical.length > 0,\n              has_h_head: _vm.lanes && _vm.lanes.horizontal.length > 0,\n            },style:({\n              width: _vm.toPx(_vm.scale > 1 ? _vm.width * _vm.scale : _vm.width / _vm.scale),\n              height: _vm.toPx(_vm.scale > 1 ? _vm.height * _vm.scale : _vm.height / _vm.scale),\n            })},[(_vm.baseLine.showV)?_c('span',{staticClass:\"baseLine_v\",style:({ transform: (\"translate3d(\" + (_vm.baseLine.left) + \"px, 0, 0)\") })}):_vm._e(),(_vm.baseLine.showH)?_c('span',{staticClass:\"baseLine_h\",style:({ transform: (\"translate3d(0, \" + (_vm.baseLine.top) + \"px, 0)\") })}):_vm._e(),_c('flow-content',{ref:\"flowContent\",attrs:{\"flow-info\":_vm.flowInfo,\"is-draw-line\":_vm.isDrawLine,\"lines\":_vm.lines,\"nodes\":_vm.nodes,\"lanes\":_vm.lanes,\"events\":_vm.events,\"checked\":_vm.checked,\"config\":_vm.config}}),_c('div',{ref:\"backLayout\",staticClass:\"backgroundLayout\"},[_c('div',{ref:\"v_lane\",staticClass:\"v_lane\"},[_c('lanes',{attrs:{\"lanes\":_vm.lanes && _vm.lanes.vertical,\"checked\":_vm.checked},on:{\"addLane\":_vm.addLane}})],1),_c('div',{ref:\"h_lane\",staticClass:\"h_lane\"},[_c('lanes',{attrs:{\"lanes\":_vm.lanes && _vm.lanes.horizontal,\"checked\":_vm.checked},on:{\"addLane\":_vm.addLane}})],1)])],1)])])]),_c('div',{staticClass:\"designer-left\"},[_c('div',{staticClass:\"designer-left-tools\"},[_c('el-collapse',{attrs:{\"accordion\":\"\"},model:{value:(_vm.activeNames),callback:function ($$v) {_vm.activeNames=$$v},expression:\"activeNames\"}},[_vm._l((_vm.flowTools),function(tool,index){return _c('el-collapse-item',{key:index,attrs:{\"title\":tool.title,\"name\":index}},[_c('div',{staticClass:\"layui-colla-content layui-show\"},[_vm._l((tool.data),function(item){return _c('div',{key:item.type,staticClass:\"ds_tool_item nodeButton\",attrs:{\"title\":item.name,\"sort\":item.sort,\"nodetype\":item.type,\"draggable\":\"true\"},on:{\"dragstart\":function($event){return _vm.dragTool($event, item)}}},[_c('img',{attrs:{\"src\":item.img,\"draggable\":\"false\"}}),_vm._v(\" \"+_vm._s(item.name)+\" \")])}),_c('div',{staticStyle:{\"clear\":\"both\"}})],2)])}),_c('el-collapse-item',{attrs:{\"title\":\"边界事件\",\"name\":\"5\"}},[_c('div',{staticClass:\"layui-colla-content layui-show\"},_vm._l((_vm.boundaryEvents),function(event){return _c('div',{key:event.type,staticClass:\"nodeButton ds_tool_event\",attrs:{\"title\":event.name,\"nodetype\":event.type}},[_c('div',{staticClass:\"tool_event_drag\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":function($event){return _vm.dragBoundaryEvent($event, event)}}},[_c('img',{attrs:{\"src\":event.url,\"draggable\":\"false\"}})]),_c('span',[_vm._v(_vm._s(event.name))])])}),0)])],2)],1)]),_c('div',{staticClass:\"designer-right\",attrs:{\"id\":\"propertyBox\"}},[_c('flow-info',{attrs:{\"checked\":_vm.checked,\"nodes\":_vm.nodes,\"lines\":_vm.lines,\"flow-info\":_vm.flowInfo}})],1)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"ds-button__icon-text\"},[_c('i',{staticClass:\"iconfont icon-baocun\"}),_c('span',[_vm._v(\"发布\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"ds-button__icon-text\"},[_c('i',{staticClass:\"iconfont icon-iframetianjia\"}),_c('span',[_vm._v(\" 版本 \"),_c('i',{staticClass:\"iconfont icon-xia1\"})]),_c('dl',{staticClass:\"layui-nav-child\"},[_c('p',{staticClass:\"label\"},[_c('span',[_vm._v(\"当前版本\")])]),_c('p',[_c('span',[_vm._v(\"2.0.11 2020-4-10 16：20： 10\")])]),_c('p',{staticClass:\"label\"},[_c('span',[_vm._v(\"历史版本\")])]),_c('p',[_c('span',[_vm._v(\"2.0.11 2020-4-10 16：20： 10\")])]),_c('p',[_c('span',[_vm._v(\"2.0.11 2020-4-10 16：20： 10\")])]),_c('p',[_c('span',[_vm._v(\"2.0.11 2020-4-10 16：20： 10\")])]),_c('p',[_c('span',[_vm._v(\"2.0.11 2020-4-10 16：20： 10\")])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"ds-button__icon-text\"},[_c('i',{staticClass:\"iconfont icon-shebeikaifa1\"}),_c('span',[_vm._v(\"模板库\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"ds-button__icon-text\"},[_c('i',{staticClass:\"iconfont icon-baocun\"}),_c('span',[_vm._v(\"关闭\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_vm._v(\" 泳道 \"),_c('i',{staticClass:\"iconfont icon-xia1\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_vm._v(\" 组件 \"),_c('i',{staticClass:\"iconfont icon-xia1\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_vm._v(\" 更多 \"),_c('i',{staticClass:\"iconfont icon-xia1\"})])}]\n\nexport { render, staticRenderFns }","import { LaneDirection } from './tools';\r\n\r\nimport { getAttributes } from \"./common\";\r\nimport {\r\n  CorridorProperties,\r\n} from \"./propertySource\";\r\n\r\n//泳道类\r\nconst Lane = function (opt) {\r\n  var options = Object.assign({ size: 260, direction: LaneDirection.vertical }, opt);\r\n  this.id = options.id || null;\r\n  this.name = options.name || \"\";\r\n  this.index = options.index;\r\n  this.direction = options.direction;\r\n  this.isRender = false;\r\n  this.size = options.size;\r\n\r\n  if (!options.attributes) {\r\n    this.attributes = getAttributes(CorridorProperties());\r\n    this.attributes.Name = this.name;\r\n    this.attributes.ID = this.id;\r\n  } else {\r\n    this.attributes = { ...options.attributes };\r\n  }\r\n}\r\nexport default Lane;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ds_attr_root\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.status === 'base'),expression:\"status === 'base'\"}],staticClass:\"base\"},[_c('p',{staticClass:\"title\"},[_c('span',[_vm._v(\"常用\")]),_c('el-button',{staticClass:\"el-button-all\",attrs:{\"size\":\"mini\",\"round\":\"\"},on:{\"click\":function($event){_vm.status = 'advanced'}}},[_c('span',[_vm._v(\"全部\")]),_c('i',{staticClass:\"el-icon-arrow-right\"})])],1),_c('div',{staticClass:\"el-collapse-item__content\"},_vm._l((_vm.data),function(item,itemIndex){return _c('el-form',{key:itemIndex,staticClass:\"colla-content\",attrs:{\"label-position\":\"top\",\"label-width\":\"80px\"}},_vm._l((item.attributes),function(attr,index){return _c('div',{key:index,staticClass:\"property-item\"},[(!attr.hide && attr.isBase)?_c('el-form-item',[_c('span',{staticClass:\"property-item-name\",attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\" \"+_vm._s(attr.name)+\" \"),(attr.desc)?_c('DsfIcon',{staticStyle:{\"margin-left\":\"5px\",\"cursor\":\"pointer\"},attrs:{\"name\":\"bangzhuzhongxin\"},nativeOn:{\"click\":function($event){return _vm.showHelp(attr)}}}):_vm._e(),_c('el-dialog',{attrs:{\"visible\":attr.showHeplerMark,\"title\":attr.name,\"append-to-body\":true,\"width\":'500px'},on:{\"update:visible\":function($event){return _vm.$set(attr, \"showHeplerMark\", $event)}}},[_c('div',{staticStyle:{\"max-height\":\"500px\",\"min-height\":\"300px\",\"overflow\":\"auto\"}},[_c('span',{staticStyle:{\"display\":\"inline-block\",\"line-height\":\"1.5em\"},domProps:{\"innerHTML\":_vm._s(attr.desc)}})])])],1),(attr.nodeType === 'flow' && attr.nodeName2 === 'Version')?_c('div',{staticClass:\"inline\"},[_c('el-input-number',{attrs:{\"controls-position\":\"right\",\"min\":_vm.minValue(attr, 0)},on:{\"input\":function($event){return _vm.changeVesion(attr, 0)}},model:{value:(attr.value0),callback:function ($$v) {_vm.$set(attr, \"value0\", $$v)},expression:\"attr.value0\"}}),_c('span',[_vm._v(\".\")]),_c('el-input-number',{attrs:{\"controls-position\":\"right\",\"min\":_vm.minValue(attr, 1)},on:{\"input\":function($event){return _vm.changeVesion(attr, 1)}},model:{value:(attr.value1),callback:function ($$v) {_vm.$set(attr, \"value1\", $$v)},expression:\"attr.value1\"}}),_c('span',[_vm._v(\".\")]),_c('el-input',{attrs:{\"disabled\":\"disabled\"},model:{value:(attr.value2),callback:function ($$v) {_vm.$set(attr, \"value2\", $$v)},expression:\"attr.value2\"}})],1):_vm._e(),(attr.unit)?_c('div',{staticClass:\"inline\"},[_c('el-input-number',{attrs:{\"controls-position\":\"right\",\"min\":1,\"max\":attr.max},on:{\"input\":function($event){return _vm.changeProperty(attr)}},model:{value:(attr.value),callback:function ($$v) {_vm.$set(attr, \"value\", $$v)},expression:\"attr.value\"}}),_c('span',{staticClass:\"unit\"},[_vm._v(_vm._s(attr.unit))])],1):_vm._e(),(_vm.show(attr))?_c('el-input',{attrs:{\"disabled\":!attr.editor},on:{\"input\":function($event){return _vm.changeProperty(attr)}},model:{value:(attr.value),callback:function ($$v) {_vm.$set(attr, \"value\", $$v)},expression:\"attr.value\"}}):_vm._e(),(attr.editor === 'textarea')?_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"请输入内容\"},on:{\"input\":function($event){return _vm.changeProperty(attr)}},model:{value:(attr.value),callback:function ($$v) {_vm.$set(attr, \"value\", $$v)},expression:\"attr.value\"}}):_vm._e(),(attr.editor && attr.editor.type === 'combobox')?_c('el-select',{attrs:{\"name\":(\"\" + (attr.nodeName1 + '_' + attr.nodeName2))},on:{\"change\":function($event){return _vm.changeProperty(attr)}},model:{value:(attr.value),callback:function ($$v) {_vm.$set(attr, \"value\", $$v)},expression:\"attr.value\"}},_vm._l((attr.editor.options.data),function(option,i){return _c('el-option',{key:i,attrs:{\"label\":option.text,\"value\":option.value}})}),1):_vm._e(),(attr.editor && attr.editor.type === 'radio')?_c('el-radio-group',{on:{\"change\":function($event){return _vm.changeProperty(attr)}},model:{value:(attr.value),callback:function ($$v) {_vm.$set(attr, \"value\", $$v)},expression:\"attr.value\"}},_vm._l((attr.editor.options.data),function(option,$index){return _c('el-radio',{key:$index,attrs:{\"label\":option.value}},[_vm._v(\" \"+_vm._s(option.text)+\" \")])}),1):_vm._e(),(attr.editor && attr.editor.type === 'checkbox')?_c('el-checkbox-group',{on:{\"change\":function($event){return _vm.changeProperty(attr)}},model:{value:(attr.value),callback:function ($$v) {_vm.$set(attr, \"value\", $$v)},expression:\"attr.value\"}},_vm._l((attr.editor.options.data),function(option,$index){return _c('el-checkbox',{key:$index,attrs:{\"label\":option.value}},[_vm._v(\" \"+_vm._s(option.text)+\" \")])}),1):_vm._e(),(attr.type === 'dialog')?_c('DsfButton',{class:attr.class,attrs:{\"type\":\"auxiliary\",\"icon\":\"shezhi\"},on:{\"click\":function($event){return _vm.doOpenDialog(attr)}}},[_vm._v(\" 设置 \")]):_vm._e()],1):_vm._e()],1)}),0)}),1)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.status === 'advanced'),expression:\"status === 'advanced'\"}],staticClass:\"advanced\"},[_c('p',{staticClass:\"title\"},[_c('span',[_vm._v(\"全部\")]),_c('el-button',{staticClass:\"el-button-base\",attrs:{\"size\":\"mini\",\"round\":\"\"},on:{\"click\":function($event){_vm.status = 'base'}}},[_c('i',{staticClass:\"el-icon-arrow-left\"}),_c('span',[_vm._v(\"常用\")])])],1),_c('el-collapse',{attrs:{\"accordion\":\"\"},model:{value:(_vm.activeNames),callback:function ($$v) {_vm.activeNames=$$v},expression:\"activeNames\"}},_vm._l((_vm.data),function(item){return _c('el-collapse-item',{key:item.name,attrs:{\"title\":item.name,\"name\":item.name}},[_c('el-form',{staticClass:\"colla-content\",attrs:{\"label-position\":\"top\",\"label-width\":\"80px\"}},_vm._l((item.attributes),function(attr,index){return _c('div',{key:index,staticClass:\"property-item\"},[(!attr.hide)?_c('el-form-item',[_c('span',{staticClass:\"property-item-name\",attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\" \"+_vm._s(attr.name)+\" \"),(attr.desc)?_c('DsfIcon',{staticStyle:{\"margin-left\":\"5px\",\"cursor\":\"pointer\"},attrs:{\"name\":\"bangzhuzhongxin\"},nativeOn:{\"click\":function($event){return _vm.showHelp(attr)}}}):_vm._e(),_c('el-dialog',{attrs:{\"visible\":attr.showHeplerMark,\"title\":attr.name,\"append-to-body\":true,\"width\":'500px'},on:{\"update:visible\":function($event){return _vm.$set(attr, \"showHeplerMark\", $event)}}},[_c('div',{staticStyle:{\"max-height\":\"500px\",\"min-height\":\"300px\",\"overflow\":\"auto\"}},[_c('span',{staticStyle:{\"display\":\"inline-block\",\"line-height\":\"1.5em\"},domProps:{\"innerHTML\":_vm._s(attr.desc)}})])])],1),(\n                  attr.nodeType === 'flow' && attr.nodeName2 === 'Version'\n                )?_c('div',{staticClass:\"inline\"},[_c('el-input-number',{attrs:{\"controls-position\":\"right\",\"min\":_vm.minValue(attr, 0)},on:{\"input\":function($event){return _vm.changeVesion(attr, 0)}},model:{value:(attr.value0),callback:function ($$v) {_vm.$set(attr, \"value0\", $$v)},expression:\"attr.value0\"}}),_c('span',[_vm._v(\".\")]),_c('el-input-number',{attrs:{\"controls-position\":\"right\",\"min\":_vm.minValue(attr, 1)},on:{\"input\":function($event){return _vm.changeVesion(attr, 1)}},model:{value:(attr.value1),callback:function ($$v) {_vm.$set(attr, \"value1\", $$v)},expression:\"attr.value1\"}}),_c('span',[_vm._v(\".\")]),_c('el-input',{attrs:{\"disabled\":\"disabled\"},model:{value:(attr.value2),callback:function ($$v) {_vm.$set(attr, \"value2\", $$v)},expression:\"attr.value2\"}})],1):_vm._e(),(attr.unit)?_c('div',{staticClass:\"inline\"},[_c('el-input-number',{attrs:{\"controls-position\":\"right\",\"min\":1,\"max\":attr.max},on:{\"input\":function($event){return _vm.changeProperty(attr)}},model:{value:(attr.value),callback:function ($$v) {_vm.$set(attr, \"value\", $$v)},expression:\"attr.value\"}}),_c('span',{staticClass:\"unit\"},[_vm._v(_vm._s(attr.unit))])],1):_vm._e(),(_vm.show(attr))?_c('el-input',{attrs:{\"disabled\":!attr.editor},on:{\"input\":function($event){return _vm.changeProperty(attr)}},model:{value:(attr.value),callback:function ($$v) {_vm.$set(attr, \"value\", $$v)},expression:\"attr.value\"}}):_vm._e(),(attr.editor === 'textarea')?_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"请输入内容\"},on:{\"input\":function($event){return _vm.changeProperty(attr)}},model:{value:(attr.value),callback:function ($$v) {_vm.$set(attr, \"value\", $$v)},expression:\"attr.value\"}}):_vm._e(),(attr.editor && attr.editor.type === 'combobox')?_c('el-select',{attrs:{\"name\":(\"\" + (attr.nodeName1 + '_' + attr.nodeName2))},on:{\"change\":function($event){return _vm.changeProperty(attr)}},model:{value:(attr.value),callback:function ($$v) {_vm.$set(attr, \"value\", $$v)},expression:\"attr.value\"}},_vm._l((attr.editor.options.data),function(option,i){return _c('el-option',{key:i,attrs:{\"label\":option.text,\"value\":option.value}})}),1):_vm._e(),(attr.editor && attr.editor.type === 'radio')?_c('el-radio-group',{on:{\"change\":function($event){return _vm.changeProperty(attr)}},model:{value:(attr.value),callback:function ($$v) {_vm.$set(attr, \"value\", $$v)},expression:\"attr.value\"}},_vm._l((attr.editor.options.data),function(option,$index){return _c('el-radio',{key:$index,attrs:{\"label\":option.value}},[_vm._v(\" \"+_vm._s(option.text)+\" \")])}),1):_vm._e(),(attr.editor && attr.editor.type === 'checkbox')?_c('el-checkbox-group',{on:{\"change\":function($event){return _vm.changeProperty(attr)}},model:{value:(attr.value),callback:function ($$v) {_vm.$set(attr, \"value\", $$v)},expression:\"attr.value\"}},_vm._l((attr.editor.options.data),function(option,$index){return _c('el-checkbox',{key:$index,attrs:{\"label\":option.value}},[_vm._v(\" \"+_vm._s(option.text)+\" \")])}),1):_vm._e(),(attr.type === 'dialog')?_c('DsfButton',{class:attr.class,attrs:{\"type\":\"auxiliary\",\"icon\":\"shezhi\"},on:{\"click\":function($event){return _vm.doOpenDialog(attr)}}},[_vm._v(\" 设置 \")]):_vm._e()],1):_vm._e()],1)}),0)],1)}),1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"ds_attr_root\">\r\n    <div v-show=\"status === 'base'\" class=\"base\">\r\n      <p class=\"title\">\r\n        <span>常用</span>\r\n        <el-button\r\n          class=\"el-button-all\"\r\n          size=\"mini\"\r\n          round\r\n          @click=\"status = 'advanced'\"\r\n        >\r\n          <span>全部</span>\r\n          <i class=\"el-icon-arrow-right\"></i>\r\n        </el-button>\r\n      </p>\r\n      <div class=\"el-collapse-item__content\">\r\n        <el-form\r\n          v-for=\"(item, itemIndex) in data\"\r\n          :key=\"itemIndex\"\r\n          class=\"colla-content\"\r\n          label-position=\"top\"\r\n          label-width=\"80px\"\r\n        >\r\n          <div\r\n            v-for=\"(attr, index) in item.attributes\"\r\n            :key=\"index\"\r\n            class=\"property-item\"\r\n          >\r\n            <el-form-item v-if=\"!attr.hide && attr.isBase\">\r\n              <span slot=\"label\" class=\"property-item-name\">\r\n                {{ attr.name }}\r\n                <DsfIcon\r\n                  v-if=\"attr.desc\"\r\n                  style=\"margin-left: 5px; cursor: pointer;\"\r\n                  name=\"bangzhuzhongxin\"\r\n                  @click.native=\"showHelp(attr)\"\r\n                ></DsfIcon>\r\n                <el-dialog\r\n                  :visible.sync=\"attr.showHeplerMark\"\r\n                  :title=\"attr.name\"\r\n                  :append-to-body=\"true\"\r\n                  :width=\"'500px'\"\r\n                >\r\n                  <div\r\n                    style=\"\r\n                      max-height: 500px;\r\n                      min-height: 300px;\r\n                      overflow: auto;\r\n                    \"\r\n                  >\r\n                    <span\r\n                      style=\"display: inline-block; line-height: 1.5em;\"\r\n                      v-html=\"attr.desc\"\r\n                    ></span>\r\n                  </div>\r\n                </el-dialog>\r\n              </span>\r\n              <div\r\n                v-if=\"attr.nodeType === 'flow' && attr.nodeName2 === 'Version'\"\r\n                class=\"inline\"\r\n              >\r\n                <el-input-number\r\n                  v-model=\"attr.value0\"\r\n                  controls-position=\"right\"\r\n                  :min=\"minValue(attr, 0)\"\r\n                  @input=\"changeVesion(attr, 0)\"\r\n                ></el-input-number>\r\n                <span>.</span>\r\n                <el-input-number\r\n                  v-model=\"attr.value1\"\r\n                  controls-position=\"right\"\r\n                  :min=\"minValue(attr, 1)\"\r\n                  @input=\"changeVesion(attr, 1)\"\r\n                ></el-input-number>\r\n                <span>.</span>\r\n                <el-input v-model=\"attr.value2\" disabled=\"disabled\"></el-input>\r\n              </div>\r\n              <div v-if=\"attr.unit\" class=\"inline\">\r\n                <el-input-number\r\n                  v-model=\"attr.value\"\r\n                  controls-position=\"right\"\r\n                  :min=\"1\"\r\n                  :max=\"attr.max\"\r\n                  @input=\"changeProperty(attr)\"\r\n                ></el-input-number>\r\n                <span class=\"unit\">{{ attr.unit }}</span>\r\n              </div>\r\n              <el-input\r\n                v-if=\"show(attr)\"\r\n                v-model=\"attr.value\"\r\n                :disabled=\"!attr.editor\"\r\n                @input=\"changeProperty(attr)\"\r\n              ></el-input>\r\n              <el-input\r\n                v-if=\"attr.editor === 'textarea'\"\r\n                v-model=\"attr.value\"\r\n                type=\"textarea\"\r\n                placeholder=\"请输入内容\"\r\n                @input=\"changeProperty(attr)\"\r\n              ></el-input>\r\n              <el-select\r\n                v-if=\"attr.editor && attr.editor.type === 'combobox'\"\r\n                v-model=\"attr.value\"\r\n                :name=\"`${attr.nodeName1 + '_' + attr.nodeName2}`\"\r\n                @change=\"changeProperty(attr)\"\r\n              >\r\n                <el-option\r\n                  v-for=\"(option, i) in attr.editor.options.data\"\r\n                  :key=\"i\"\r\n                  :label=\"option.text\"\r\n                  :value=\"option.value\"\r\n                ></el-option>\r\n              </el-select>\r\n              <!--单选-->\r\n              <el-radio-group\r\n                v-if=\"attr.editor && attr.editor.type === 'radio'\"\r\n                v-model=\"attr.value\"\r\n                @change=\"changeProperty(attr)\"\r\n              >\r\n                <el-radio\r\n                  v-for=\"(option, $index) in attr.editor.options.data\"\r\n                  :key=\"$index\"\r\n                  :label=\"option.value\"\r\n                >\r\n                  {{ option.text }}\r\n                </el-radio>\r\n              </el-radio-group>\r\n              <!--多选-->\r\n              <el-checkbox-group\r\n                v-if=\"attr.editor && attr.editor.type === 'checkbox'\"\r\n                v-model=\"attr.value\"\r\n                @change=\"changeProperty(attr)\"\r\n              >\r\n                <el-checkbox\r\n                  v-for=\"(option, $index) in attr.editor.options.data\"\r\n                  :key=\"$index\"\r\n                  :label=\"option.value\"\r\n                >\r\n                  {{ option.text }}\r\n                </el-checkbox>\r\n              </el-checkbox-group>\r\n              <!--弹出框-->\r\n              <DsfButton\r\n                v-if=\"attr.type === 'dialog'\"\r\n                type=\"auxiliary\"\r\n                icon=\"shezhi\"\r\n                :class=\"attr.class\"\r\n                @click=\"doOpenDialog(attr)\"\r\n              >\r\n                设置\r\n              </DsfButton>\r\n            </el-form-item>\r\n          </div>\r\n        </el-form>\r\n      </div>\r\n    </div>\r\n    <div v-show=\"status === 'advanced'\" class=\"advanced\">\r\n      <p class=\"title\">\r\n        <span>全部</span>\r\n        <el-button\r\n          class=\"el-button-base\"\r\n          size=\"mini\"\r\n          round\r\n          @click=\"status = 'base'\"\r\n        >\r\n          <i class=\"el-icon-arrow-left\"></i>\r\n          <span>常用</span>\r\n        </el-button>\r\n      </p>\r\n      <el-collapse v-model=\"activeNames\" accordion>\r\n        <el-collapse-item\r\n          v-for=\"item in data\"\r\n          :key=\"item.name\"\r\n          :title=\"item.name\"\r\n          :name=\"item.name\"\r\n        >\r\n          <el-form\r\n            label-position=\"top\"\r\n            label-width=\"80px\"\r\n            class=\"colla-content\"\r\n          >\r\n            <div\r\n              v-for=\"(attr, index) in item.attributes\"\r\n              :key=\"index\"\r\n              class=\"property-item\"\r\n            >\r\n              <el-form-item v-if=\"!attr.hide\">\r\n                <span slot=\"label\" class=\"property-item-name\">\r\n                  {{ attr.name }}\r\n                  <!-- <el-popover placement=\"bottom\" width=\"210\" trigger=\"click\" :content=\"attr.desc\">\r\n                    <i slot=\"reference\" class=\"el-icon-question\"></i>\r\n                  </el-popover>-->\r\n                  <DsfIcon\r\n                    v-if=\"attr.desc\"\r\n                    style=\"margin-left: 5px; cursor: pointer;\"\r\n                    name=\"bangzhuzhongxin\"\r\n                    @click.native=\"showHelp(attr)\"\r\n                  ></DsfIcon>\r\n                  <el-dialog\r\n                    :visible.sync=\"attr.showHeplerMark\"\r\n                    :title=\"attr.name\"\r\n                    :append-to-body=\"true\"\r\n                    :width=\"'500px'\"\r\n                  >\r\n                    <div\r\n                      style=\"\r\n                        max-height: 500px;\r\n                        min-height: 300px;\r\n                        overflow: auto;\r\n                      \"\r\n                    >\r\n                      <span\r\n                        style=\"display: inline-block; line-height: 1.5em;\"\r\n                        v-html=\"attr.desc\"\r\n                      ></span>\r\n                    </div>\r\n                  </el-dialog>\r\n                </span>\r\n                <div\r\n                  v-if=\"\r\n                    attr.nodeType === 'flow' && attr.nodeName2 === 'Version'\r\n                  \"\r\n                  class=\"inline\"\r\n                >\r\n                  <el-input-number\r\n                    v-model=\"attr.value0\"\r\n                    controls-position=\"right\"\r\n                    :min=\"minValue(attr, 0)\"\r\n                    @input=\"changeVesion(attr, 0)\"\r\n                  ></el-input-number>\r\n                  <span>.</span>\r\n                  <el-input-number\r\n                    v-model=\"attr.value1\"\r\n                    controls-position=\"right\"\r\n                    :min=\"minValue(attr, 1)\"\r\n                    @input=\"changeVesion(attr, 1)\"\r\n                  ></el-input-number>\r\n                  <span>.</span>\r\n                  <el-input\r\n                    v-model=\"attr.value2\"\r\n                    disabled=\"disabled\"\r\n                  ></el-input>\r\n                </div>\r\n                <div v-if=\"attr.unit\" class=\"inline\">\r\n                  <el-input-number\r\n                    v-model=\"attr.value\"\r\n                    controls-position=\"right\"\r\n                    :min=\"1\"\r\n                    :max=\"attr.max\"\r\n                    @input=\"changeProperty(attr)\"\r\n                  ></el-input-number>\r\n                  <span class=\"unit\">{{ attr.unit }}</span>\r\n                </div>\r\n                <el-input\r\n                  v-if=\"show(attr)\"\r\n                  v-model=\"attr.value\"\r\n                  :disabled=\"!attr.editor\"\r\n                  @input=\"changeProperty(attr)\"\r\n                ></el-input>\r\n                <el-input\r\n                  v-if=\"attr.editor === 'textarea'\"\r\n                  v-model=\"attr.value\"\r\n                  type=\"textarea\"\r\n                  placeholder=\"请输入内容\"\r\n                  @input=\"changeProperty(attr)\"\r\n                ></el-input>\r\n                <el-select\r\n                  v-if=\"attr.editor && attr.editor.type === 'combobox'\"\r\n                  v-model=\"attr.value\"\r\n                  :name=\"`${attr.nodeName1 + '_' + attr.nodeName2}`\"\r\n                  @change=\"changeProperty(attr)\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"(option, i) in attr.editor.options.data\"\r\n                    :key=\"i\"\r\n                    :label=\"option.text\"\r\n                    :value=\"option.value\"\r\n                  ></el-option>\r\n                </el-select>\r\n                <!--单选-->\r\n                <el-radio-group\r\n                  v-if=\"attr.editor && attr.editor.type === 'radio'\"\r\n                  v-model=\"attr.value\"\r\n                  @change=\"changeProperty(attr)\"\r\n                >\r\n                  <el-radio\r\n                    v-for=\"(option, $index) in attr.editor.options.data\"\r\n                    :key=\"$index\"\r\n                    :label=\"option.value\"\r\n                  >\r\n                    {{ option.text }}\r\n                  </el-radio>\r\n                </el-radio-group>\r\n                <!--多选-->\r\n                <el-checkbox-group\r\n                  v-if=\"attr.editor && attr.editor.type === 'checkbox'\"\r\n                  v-model=\"attr.value\"\r\n                  @change=\"changeProperty(attr)\"\r\n                >\r\n                  <el-checkbox\r\n                    v-for=\"(option, $index) in attr.editor.options.data\"\r\n                    :key=\"$index\"\r\n                    :label=\"option.value\"\r\n                  >\r\n                    {{ option.text }}\r\n                  </el-checkbox>\r\n                </el-checkbox-group>\r\n                <!--弹出框-->\r\n                <DsfButton\r\n                  v-if=\"attr.type === 'dialog'\"\r\n                  type=\"auxiliary\"\r\n                  icon=\"shezhi\"\r\n                  :class=\"attr.class\"\r\n                  @click=\"doOpenDialog(attr)\"\r\n                >\r\n                  设置\r\n                </DsfButton>\r\n              </el-form-item>\r\n            </div>\r\n          </el-form>\r\n        </el-collapse-item>\r\n      </el-collapse>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { MessageBox, Message } from \"element-ui\";\r\nimport {\r\n  BaseInfoProperties,\r\n  NodeProperties,\r\n  UserTaskNodeProperties,\r\n  ChildTaskProperties,\r\n  StartNodeProperties,\r\n  endNodeProperties,\r\n  ScriptNodeProperties,\r\n  JumpNodeProperties,\r\n  LineProperties,\r\n  WebTaskProperties,\r\n  MessageTaskProperties,\r\n  JudgementNodeProperties,\r\n  CorridorProperties,\r\n  BoundaryEventProperties,\r\n  GetInlineTypeData,\r\n  GetIsSelected\r\n} from \"./propertySource\";\r\nimport Line from \"./Line\";\r\nimport Lane from \"./Lane\";\r\nimport Node from \"./Node\";\r\nimport BoundaryEvent from \"./BoundaryEvent\";\r\nimport { deepClone } from \"./common\";\r\nimport DsfDesignerDialog from \"_platform/dsf/designer/propertyEditor/dsfDesignerDialog\";\r\n\r\nexport default {\r\n  name: \"FlowInfo\",\r\n  components: {\r\n    DsfDesignerDialog,\r\n  },\r\n  props: {\r\n    checked: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    },\r\n    flowInfo: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    },\r\n    nodes: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    lines: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      activeNames: [\"1\"],\r\n      curSelectObj: null,\r\n      curNodeObj: null,\r\n      curElement: null,\r\n      AppInfo: null,\r\n      data: [],\r\n      status: \"base\",\r\n      showHeplerMark: false,\r\n    };\r\n  },\r\n  computed: {\r\n    minValue() {\r\n      return (attr, index) => {\r\n        if (index === 0) {\r\n          return Number(attr.oldValue.split(\".\")[0]);\r\n        }\r\n        if (attr.value0 > Number(attr.oldValue.split(\".\")[0]) && index === 1) {\r\n          return 0;\r\n        }\r\n        return Number(attr.oldValue.split(\".\")[1]);\r\n      };\r\n    },\r\n  },\r\n  watch: {\r\n    checked(ui) {\r\n      this.loadPropertyWindow(ui);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.$bus.$on(\"updateName\", (ui) => {\r\n      this.loadPropertyWindow(ui);\r\n    });\r\n  },\r\n  methods: {\r\n    show(attr) {\r\n      return (\r\n        (!attr.nodeType &&\r\n          attr.nodeName2 !== \"Version\" &&\r\n          !attr.editor &&\r\n          attr.type !== \"dialog\") ||\r\n        (!attr.unit && attr.editor === \"text\") ||\r\n        attr.editor === \"numberbox\"\r\n      );\r\n    },\r\n    loadPropertyWindow(obj) {\r\n      if (Object.keys(obj).length === 0) {\r\n        return;\r\n      }\r\n      this.curSelectObj = obj || null;\r\n      this.curNodeObj = !obj ? null : obj.attributes;\r\n      this.loadPropertyDom(obj ? this.setPropertyData(obj) : []);\r\n    },\r\n    showHelp(attr) {\r\n      this.$set(attr, \"showHeplerMark\", true);\r\n    },\r\n    setPropertyData(obj) {\r\n      var pro = null;\r\n      if (obj instanceof Node) {\r\n        if (obj.type == \"101\") {\r\n          pro = UserTaskNodeProperties();\r\n        } else if (obj.type == \"102\") {\r\n          pro = ChildTaskProperties();\r\n        } else if (obj.type == \"103\") {\r\n          const config = {\r\n            name: \"脚本任务\",\r\n            Type: \"脚本任务\",\r\n            language: \"java\",\r\n          };\r\n          pro = ScriptNodeProperties(config);\r\n        } else if (obj.type === \"104\") {\r\n          pro = WebTaskProperties();\r\n        } else if (obj.type === \"105\") {\r\n          pro = MessageTaskProperties();\r\n        } else if (obj.type === \"106\") {\r\n          const config = {\r\n            name: \"python任务\",\r\n            Type: \"python任务\",\r\n            language: \"python\",\r\n          };\r\n          pro = ScriptNodeProperties(config);\r\n        } else if (obj.type === \"107\") {\r\n          const config = {\r\n            name: \"shell任务\",\r\n            Type: \"shell任务\",\r\n            language: \"shell\",\r\n          };\r\n          pro = ScriptNodeProperties(config);\r\n        } else if (obj.type === \"108\") {\r\n          const config = {\r\n            name: \"SQL任务\",\r\n            Type: \"SQL任务\",\r\n            language: \"SQL\",\r\n          };\r\n          pro = ScriptNodeProperties(config);\r\n        } else if (obj.type == \"201\") {\r\n          pro = StartNodeProperties();\r\n        } else if (obj.type == \"299\") {\r\n          pro = endNodeProperties();\r\n        } else if (obj.type == \"301\") {\r\n          pro = JudgementNodeProperties();\r\n        } else if (obj.type == \"302\") {\r\n          pro = JumpNodeProperties();\r\n        } else {\r\n          pro = NodeProperties();\r\n        }\r\n      } else if (obj instanceof Line) {\r\n        pro = LineProperties();\r\n      } else if (obj instanceof Lane) {\r\n        pro = CorridorProperties();\r\n      } else if (obj instanceof BoundaryEvent) {\r\n        pro = BoundaryEventProperties();\r\n      } else {\r\n        // 基本流\r\n        pro = BaseInfoProperties();\r\n      }\r\n      var attr = obj.attributes;\r\n      // 转成平台要的样子\r\n      var group = null;\r\n      var groupIndex = -1;\r\n      pro.json = [];\r\n      for (let i = 0; i < pro.rows.length; i++) {\r\n        if (pro.rows[i].nodeLevel == 1) {\r\n          // 类似文本框\r\n          pro.rows[i].value = attr[pro.rows[i].nodeName];\r\n        } else if (pro.rows[i].nodeLevel == 2) {\r\n          // 期限类型-会根据流程信息去取值\r\n          if (attr[pro.rows[i].nodeName1]) {\r\n            pro.rows[i].value =\r\n              attr[pro.rows[i].nodeName1][pro.rows[i].nodeName2];\r\n          } else {\r\n            pro.rows[i].value = \"\";\r\n          }\r\n        } else if (pro.rows[i].nodeLevel == 3) {\r\n          // 应用名称应用信息 - 初步认为是只读\r\n          if (\r\n            attr[pro.rows[i].nodeName1] &&\r\n            attr[pro.rows[i].nodeName1][pro.rows[i].nodeName2]\r\n          ) {\r\n            pro.rows[i].value =\r\n              attr[pro.rows[i].nodeName1][pro.rows[i].nodeName2][\r\n                pro.rows[i].nodeName3\r\n              ];\r\n          } else {\r\n            pro.rows[i].value = \"\";\r\n          }\r\n        }\r\n        if (pro.rows[i].group != group) {\r\n          groupIndex++;\r\n          group = pro.rows[i].group;\r\n          pro.json[groupIndex] = {\r\n            name: group,\r\n            attributes: [],\r\n          };\r\n        }\r\n        pro.json[groupIndex][\"attributes\"].push(pro.rows[i]);\r\n      }\r\n      return pro.json;\r\n    },\r\n    loadPropertyDom(data) {\r\n      let rows = [];\r\n      data.forEach((item) => {\r\n        item.attributes.forEach((attr) => {\r\n          if (attr.editor && attr.editor.type === \"checkbox\") {\r\n            attr.value = attr.value || [];\r\n          } else if (attr.editor && attr.editor.type !== \"checkbox\") {\r\n            attr.value =\r\n              attr.editor && attr.editor.options && attr.value\r\n                ? Number(attr.value)\r\n                : attr.value;\r\n          } else if (attr.nodeType === \"flow\" && attr.nodeName2 === \"Version\") {\r\n            // 工作流版本\r\n            attr.oldValue = attr.value;\r\n            attr.value0 = attr.value.split(\".\")[0];\r\n            attr.value1 = attr.value.split(\".\")[1];\r\n            attr.value2 = attr.value.split(\".\")[2];\r\n          } else {\r\n            attr.value = attr.value;\r\n          }\r\n\r\n          if (attr.showRob) {\r\n            rows.push(attr);\r\n          }\r\n        });\r\n      });\r\n      this.data = data;\r\n\r\n      // 加载处理模式 抢办人数/比例  连线汇总信息\r\n      if (rows && rows.length > 0) {\r\n        rows.forEach((row) => {\r\n          this.showRob(row);\r\n        });\r\n      }\r\n      this.activeNames = [this.data[0].name];\r\n    },\r\n    changeVesion(attr, index) {\r\n      if (attr) {\r\n        if (index === 0) {\r\n          attr.value1 = 0;\r\n          attr.value2 = \"0001\";\r\n        }\r\n        attr.value = attr.value0 + \".\" + attr.value1 + \".\" + attr.value2;\r\n        this.changeProperty(attr);\r\n      }\r\n    },\r\n    changeProperty(rowData) {\r\n      if (rowData.nodeName2 && rowData.nodeName2 == \"Name\") {\r\n        if (this.curSelectObj instanceof Node) {\r\n          this.curSelectObj.name = rowData.value;\r\n        }\r\n        if (this.curSelectObj instanceof Lane) {\r\n          this.curSelectObj.name = rowData.value;\r\n        }\r\n      }\r\n      if (rowData.showRob && rowData.showRob == \"GatherRule\") {\r\n        // 线 连线类型变化\r\n        if (this.curSelectObj instanceof Line) {\r\n          this.curSelectObj.type = rowData.value;\r\n        }\r\n      }\r\n      if(rowData.nodeName1 === \"InLine\" && rowData.nodeName2 === \"Type\") {\r\n        let name = GetInlineTypeData(rowData.value);\r\n        let RangeRule = [];\r\n        const Rule = this.curNodeObj.InLine.RangeRule && this.curNodeObj.InLine.RangeRule.Rule;\r\n        if(Rule && Rule.length > 0) {\r\n          Rule.forEach((item, index) => {\r\n            RangeRule.push(item.name + '/' + GetIsSelected(item.IsSelected));\r\n          });\r\n          this.curSelectObj.taskMsg = `${name}: ${RangeRule.join(\",\")}`;\r\n        }\r\n\r\n      }\r\n      if(rowData.nodeName1 === \"InLine\" && rowData.nodeName2 === \"RangeRule\" && rowData.value && rowData.value.Rule && rowData.value.Rule.length > 0) {\r\n        let name = GetInlineTypeData(this.curNodeObj.InLine.Type);\r\n        let RangeRule = [];\r\n        rowData.value.Rule.forEach((item, index) => {\r\n          RangeRule.push(item.name + '/' + GetIsSelected(item.IsSelected));\r\n        });\r\n        \r\n        this.curSelectObj.taskMsg = `${name}: ${RangeRule.join(\",\")}`;\r\n      }\r\n      // 处理模式为抢办 需要单独处理\r\n      this.showRob(rowData);\r\n      if (rowData.nodeLevel == 1) {\r\n        this.curNodeObj[rowData.nodeName] = rowData.value;\r\n      } else if (rowData.nodeLevel == 2) {\r\n        this.curNodeObj[rowData.nodeName1][rowData.nodeName2] = rowData.value;\r\n      } else if (rowData.nodeLevel == 3) {\r\n        this.curNodeObj[rowData.nodeName1][rowData.nodeName2][\r\n          rowData.nodeName3\r\n        ] = rowData.value;\r\n      }\r\n    },\r\n    showRob(rowData) {\r\n      if (rowData.showRob) {\r\n        this.data.forEach((item) => {\r\n          item.attributes.forEach((attr) => {\r\n            const showRob = rowData.showRob.split(\",\");\r\n            showRob.forEach((field) => {\r\n              if (attr.nodeName2 === field || attr.nodeName3 === field) {\r\n                if (field === \"RushInfo\") {\r\n                  if (rowData.value === 5) {\r\n                    //修改默认值\r\n                    Object.assign(attr, {\r\n                      name: \"人数\",\r\n                      value: 1,\r\n                      max: 999999,\r\n                      unit: \"（人）\",\r\n                      hide: false,\r\n                    });\r\n                  } else if (rowData.value === 6) {\r\n                    //修改默认值\r\n                    Object.assign(attr, {\r\n                      name: \"比例\",\r\n                      value: 60,\r\n                      max: 100,\r\n                      unit: \"%\",\r\n                      hide: false,\r\n                    });\r\n                  } else {\r\n                    attr.hide = true;\r\n                  }\r\n                } else if (field === \"GatherRule\") {\r\n                  if (rowData.value === 1 || rowData.value === 2) {\r\n                    attr.hide = false;\r\n                  } else {\r\n                    attr.hide = true;\r\n                  }\r\n                } else if (field === \"Params\") {\r\n                  if (rowData.value === 0 || rowData.value === 1) {\r\n                    attr.hide = false;\r\n                  } else {\r\n                    attr.hide = true;\r\n                  }\r\n                } else if (field === \"Content\") {\r\n                  if (rowData.value === 2) {\r\n                    attr.hide = false;\r\n                  } else {\r\n                    attr.hide = true;\r\n                  }\r\n                } else if (field === \"Value\") {\r\n                  if (rowData.value !== 0) {\r\n                    attr.hide = false;\r\n                  } else {\r\n                    attr.hide = true;\r\n                  }\r\n                }\r\n              }\r\n            });\r\n          });\r\n        });\r\n      }\r\n    },\r\n    doOpenDialog(rowData) {\r\n      let data = rowData;\r\n      let params = {\r\n        code: (data.value && data.value.Expression) || \"\",\r\n        language: \"java\",\r\n        checked: this.checked,\r\n        value: data.value,\r\n      };\r\n      if (data.config && data.config.content) {\r\n        if (data.config.content === \"RangeRule\") {\r\n          params.nodes = this.nodes;\r\n          params.value = data.value || {};\r\n        } else if (data.config.content === \"Summary\") {\r\n          params.lines = this.lines;\r\n          params.value = data.value || {};\r\n        } else if (data.config.content === \"SendCondition\") {\r\n          params.lines = this.lines;\r\n          params.value = data.value || {};\r\n        }\r\n      }\r\n      dsf.layer.pc.openDialog({\r\n        title: data.name,\r\n        width: data.config.width,\r\n        height: data.config.height,\r\n        overflow: \"hidden\",\r\n        content: data.config.content,\r\n        params: params,\r\n        btns: [\r\n          {\r\n            text: \"确定\",\r\n            handler: (component) => {\r\n              data.value = component.getContent();\r\n              this.changeProperty(data);\r\n            },\r\n          },\r\n          {\r\n            text: \"取消\",\r\n          },\r\n        ],\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.inline {\r\n  display: flex;\r\n  /deep/ .el-input__inner {\r\n    text-align: center;\r\n    padding: 0;\r\n  }\r\n  .el-input-number {\r\n    width: 300px;\r\n    /deep/ .el-input-number__decrease,\r\n    /deep/ .el-input-number__increase {\r\n      width: 20px;\r\n    }\r\n    /deep/ .el-input__inner {\r\n      padding-right: 16px;\r\n    }\r\n  }\r\n\r\n  .el-input-number.is-controls-right .el-input__inner {\r\n    padding-right: 34px;\r\n  }\r\n  .unit {\r\n    display: inline-block;\r\n    width: 42px;\r\n    text-align: center;\r\n  }\r\n}\r\n.title {\r\n  height: 50px;\r\n  line-height: 50px;\r\n  text-align: center;\r\n  position: relative;\r\n  .el-button {\r\n    position: absolute;\r\n    top: 12px;\r\n    padding: 7px 10px;\r\n    &.el-button-all {\r\n      right: 5px;\r\n    }\r\n    &.el-button-base {\r\n      left: 5px;\r\n    }\r\n  }\r\n}\r\n.el-select {\r\n  width: 100%;\r\n}\r\n/deep/ .el-checkbox {\r\n  margin-right: 12px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flowInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flowInfo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./flowInfo.vue?vue&type=template&id=4ed6962c&scoped=true&\"\nimport script from \"./flowInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./flowInfo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./flowInfo.vue?vue&type=style&index=0&id=4ed6962c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4ed6962c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"svgRoot\",staticClass:\"svgRoot\"},[_c('lines',{ref:\"lines\",attrs:{\"is-draw-line\":_vm.isDrawLine,\"lines\":_vm.lines,\"nodes\":_vm.nodes,\"events\":_vm.events,\"checked\":_vm.checked,\"config\":_vm.config}}),_c('nodes',{attrs:{\"is-draw-line\":_vm.isDrawLine,\"nodes\":_vm.nodes,\"checked\":_vm.checked,\"config\":_vm.config}}),_c('events',{attrs:{\"is-draw-line\":_vm.isDrawLine,\"nodes\":_vm.nodes,\"events\":_vm.events,\"checked\":_vm.checked,\"config\":_vm.config}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div ref=\"svgRoot\" class=\"svgRoot\">\r\n    <lines\r\n      ref=\"lines\"\r\n      :is-draw-line=\"isDrawLine\"\r\n      :lines=\"lines\"\r\n      :nodes=\"nodes\"\r\n      :events=\"events\"\r\n      :checked=\"checked\"\r\n      :config=\"config\"\r\n    ></lines>\r\n    <nodes\r\n      :is-draw-line=\"isDrawLine\"\r\n      :nodes=\"nodes\"\r\n      :checked=\"checked\"\r\n      :config=\"config\"\r\n    ></nodes>\r\n    <events\r\n      :is-draw-line=\"isDrawLine\"\r\n      :nodes=\"nodes\"\r\n      :events=\"events\"\r\n      :checked=\"checked\"\r\n      :config=\"config\"\r\n    ></events>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Lines from \"./Lines\";\r\nimport Events from \"./Events\";\r\nimport subprocess from \"./Subprocess\";\r\nimport { getAttributes } from \"./common\";\r\nimport { BaseInfoProperties } from \"./propertySource\";\r\nexport default {\r\n  name: \"FlowContent\",\r\n  components: {\r\n    Lines,\r\n    Events,\r\n    subprocess,\r\n  },\r\n  props: {\r\n    flowInfo: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    },\r\n    lines: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    nodes: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    lanes: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    },\r\n    events: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    isDrawLine: {\r\n      type: Boolean,\r\n      default() {\r\n        return false;\r\n      },\r\n    },\r\n    checked: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    },\r\n    config: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    },\r\n  },\r\n  data() {\r\n    return {};\r\n  },\r\n  watch: {\r\n    flowInfo(val) {\r\n      if (val) {\r\n        this.init();\r\n      }\r\n    },\r\n  },\r\n  created() {},\r\n  mounted() {},\r\n  methods: {\r\n    init() {\r\n      this.initFlow();\r\n    },\r\n    initFlow() {\r\n      //流程插件初始化\r\n      flow = {\r\n        attributes: Object.assign(\r\n          getAttributes(BaseInfoProperties()),\r\n          this.flowInfo\r\n        ),\r\n      };\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n// @import \"_platform/assets/styles/designer/workFlow.scss\";\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flowContent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flowContent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./flowContent.vue?vue&type=template&id=de0b44a8&\"\nimport script from \"./flowContent.vue?vue&type=script&lang=js&\"\nexport * from \"./flowContent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./flowContent.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"lanes\"},_vm._l((_vm.lanes),function(lane,index){return _c('div',{key:lane.id || index,staticClass:\"lane\",class:{ selected: _vm.checked === lane },style:({\n      left: _vm.toPx(lane.left),\n      top: _vm.toPx(lane.top),\n      width: lane.direction === 'vertical' ? _vm.toPx(lane.size) : '',\n      height: lane.direction === 'horizontal' ? _vm.toPx(lane.size) : '',\n    }),attrs:{\"index\":index},on:{\"click\":function($event){return _vm.selectLane($event, lane)}}},[_c('div',{staticClass:\"head\"},[_c('div',{staticClass:\"title\"},[_c('el-popover',{attrs:{\"placement\":lane.direction === 'vertical' ? 'bottom' : 'right',\"title\":\"修改名称\",\"width\":\"200\",\"trigger\":\"manual\"},model:{value:(lane.isEdit),callback:function ($$v) {_vm.$set(lane, \"isEdit\", $$v)},expression:\"lane.isEdit\"}},[_c('div',{staticClass:\"el-input\"},[(lane.isEdit)?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(lane.name),expression:\"lane.name\"},{name:\"focus\",rawName:\"v-focus\"}],staticClass:\"el-input__inner\",attrs:{\"autofocus\":\"\",\"type\":\"text\",\"placeholder\":\"请输入内容\"},domProps:{\"value\":(lane.name)},on:{\"change\":function($event){lane.attributes.Name = lane.name;_vm.hideEdit();},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(lane, \"name\", $event.target.value)}}}):_vm._e()]),_c('span',{staticClass:\"textContent ellipsis\",style:({\n              width: _vm.toPx(lane.size),\n              transform: lane.direction === 'horizontal' ? (\"rotate(-90deg) translateX(-\" + (lane.size) + \"px)\") : '',\n            }),attrs:{\"slot\":\"reference\"},on:{\"dblclick\":function($event){return _vm.edit(lane)}},slot:\"reference\"},[_vm._v(_vm._s(lane.name))])]),_c('img',{staticClass:\"plus left\",attrs:{\"src\":\"/dsfa/res/dsf_styles/themes/workFlow/addLane.png\"},on:{\"click\":function($event){return _vm.addLane(lane.direction, index)}}}),_c('img',{staticClass:\"plus right\",attrs:{\"src\":\"/dsfa/res/dsf_styles/themes/workFlow/addLane.png\"},on:{\"click\":function($event){return _vm.addLane(lane.direction, index + 1)}}}),_c('span',{staticClass:\"resizeLane\",on:{\"mousedown\":function($event){return _vm.dragLane($event, lane)}}})],1)]),_c('div',{staticClass:\"bg/\"}),_c('div',{staticClass:\"laneSelected\"})])}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\n<template>\r\n  <div class=\"lanes\">\r\n    <div\r\n      v-for=\"(lane, index) in lanes\"\r\n      :key=\"lane.id || index\"\r\n      :index=\"index\"\r\n      :style=\"{\r\n        left: toPx(lane.left),\r\n        top: toPx(lane.top),\r\n        width: lane.direction === 'vertical' ? toPx(lane.size) : '',\r\n        height: lane.direction === 'horizontal' ? toPx(lane.size) : '',\r\n      }\"\r\n      :class=\"{ selected: checked === lane }\"\r\n      class=\"lane\"\r\n      @click=\"selectLane($event, lane)\"\r\n    >\r\n      <div class=\"head\">\r\n        <div class=\"title\">\r\n          <el-popover\r\n            v-model=\"lane.isEdit\"\r\n            :placement=\"lane.direction === 'vertical' ? 'bottom' : 'right'\"\r\n            title=\"修改名称\"\r\n            width=\"200\"\r\n            trigger=\"manual\"\r\n          >\r\n            <div class=\"el-input\">\r\n              <input\r\n                v-if=\"lane.isEdit\"\r\n                v-model=\"lane.name\"\r\n                v-focus\r\n                autofocus\r\n                class=\"el-input__inner\"\r\n                type=\"text\"\r\n                placeholder=\"请输入内容\"\r\n                @change=\"lane.attributes.Name = lane.name;hideEdit();\"\r\n              />\r\n            </div>\r\n            <span\r\n              slot=\"reference\"\r\n              class=\"textContent ellipsis\"\r\n              :style=\"{\r\n                width: toPx(lane.size),\r\n                transform: lane.direction === 'horizontal' ? `rotate(-90deg) translateX(-${lane.size}px)` : '',\r\n              }\"\r\n              @dblclick=\"edit(lane)\"\r\n            >{{ lane.name }}</span>\r\n          </el-popover>\r\n          <img\r\n            class=\"plus left\"\r\n            src=\"/dsfa/res/dsf_styles/themes/workFlow/addLane.png\"\r\n            @click=\"addLane(lane.direction, index)\"\r\n          />\r\n          <img\r\n            class=\"plus right\"\r\n            src=\"/dsfa/res/dsf_styles/themes/workFlow/addLane.png\"\r\n            @click=\"addLane(lane.direction, index + 1)\"\r\n          />\r\n          <span class=\"resizeLane\" @mousedown=\"dragLane($event, lane)\"></span>\r\n        </div>\r\n      </div>\r\n      <div class=\"bg/\"></div>\r\n      <div class=\"laneSelected\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n/* eslint-disable no-unused-vars */\r\nimport { LaneDirection } from './tools';\r\n\r\nexport default {\r\n  name: \"Lanes\",\r\n  props: {\r\n    lanes: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    checked: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      current: null,\r\n      minSize: 100 // 最小的泳道宽度/高度\r\n    };\r\n  },\r\n  mounted() {\r\n    document.addEventListener('mousedown', (e) => {\r\n      const target = e.target;\r\n      if(target.getAttribute(\"role\") !== \"tooltip\" && target.parentElement.getAttribute(\"role\") !== \"tooltip\" && target.parentElement.parentElement.getAttribute(\"role\") !== \"tooltip\") {\r\n        this.hideEdit();\r\n      }\r\n    });\r\n    document.addEventListener('mousemove', (e) => {\r\n      this.moveLane(e);\r\n    });\r\n    document.addEventListener('mouseup', (e) => {\r\n      this.dropLane(e);\r\n    });\r\n  },\r\n  methods: {\r\n    toPx(number) {\r\n      return `${number}px`;\r\n    },\r\n    selectLane(e, lane) {\r\n      this.$bus.$emit(\"update-checked\", lane);\r\n      e.stopPropagation();\r\n    },\r\n    addLane(direction, index) {\r\n      this.$emit('addLane', direction, index);\r\n    },\r\n    dragLane(e, item) {\r\n      this.$bus.$emit(\"update-checked\", item);\r\n      this.current = { ...item };\r\n      this.$bus.$emit('update-baseLine', {\r\n        show: this.current.direction,\r\n        top: 0,\r\n        left: 0\r\n      });\r\n      // 鼠标点击的位置在整个页面上的坐标是（e.clientX，e.clientY）\r\n      // 鼠标点击的位置在图片的位置坐标为（X1，Y1）\r\n    },\r\n    dropLane(e) {\r\n      if(!this.current) {\r\n        return;\r\n      }\r\n      const page = this.$store.state.flow.page;\r\n      const svgRoot =  this.$store.state.flow.svgRoot;\r\n      const scale = this.$store.state.flow.page.scale;\r\n      if (this.current.direction === LaneDirection.vertical) {\r\n        this.current.size = (e.pageX - this.current.left - page.left + svgRoot.scrollLeft) / scale;\r\n      } else {\r\n        this.current.size = (e.pageY - this.current.top - page.top + svgRoot.scrollTop) / scale;\r\n      }\r\n      this.current.size = this.current.size > this.minSize ? this.current.size : this.minSize;\r\n      // 根据鼠标点击的位置在整个页面上的坐标和在图片上的坐标来确定整个图片的坐标\r\n      this.$bus.$emit('update-baseLine', {\r\n        showV: false,\r\n        showH: false,\r\n        top: 0,\r\n        left: 0\r\n      });\r\n      this.$store.commit(\"flow/changeLane\", this.current);\r\n      this.$bus.$emit('resize');\r\n      this.current = null;\r\n    },\r\n    moveLane(e) {\r\n      if (!this.current) {\r\n        return false;\r\n      }\r\n      let resize;\r\n      const page = this.$store.state.flow.page;\r\n      const svgRoot =  this.$store.state.flow.svgRoot;\r\n      const scale = this.$store.state.flow.page.scale;\r\n      if (this.current.direction === LaneDirection.vertical) {\r\n        const minLeft = this.current.left + this.minSize;\r\n        const current = e.pageX - page.left + svgRoot.scrollLeft;\r\n        resize = {\r\n          top: 10,\r\n          left: (current > minLeft * scale ? current : minLeft * scale) / scale\r\n        };\r\n      } else {\r\n        const minTop = this.current.top + this.minSize;\r\n        const current = e.pageY - page.top + svgRoot.scrollTop;\r\n        resize = {\r\n          top: (current > minTop * scale ? current * scale : minTop) / scale,\r\n          left: 10\r\n        };\r\n      }\r\n      const baseLine = Object.assign(resize, {\r\n        showV: this.current.direction === 'vertical',\r\n        showH: this.current.direction === 'horizontal',\r\n      });\r\n      this.$bus.$emit('update-baseLine', baseLine);\r\n      this.$bus.$emit('autoScroll', {\r\n        type: \"lane\",\r\n        data: this.current,\r\n        mouse: {\r\n          x: e.pageX,\r\n          y: e.pageY,\r\n        },\r\n      });\r\n    },\r\n    edit(lane) {\r\n      this.lanes.forEach(item => {\r\n        if(lane === item) {\r\n          item.isEdit = true;\r\n        } else {\r\n          item.isEdit = false;\r\n        }\r\n      });\r\n    },\r\n    hideEdit() {\r\n      this.lanes.forEach(item => {\r\n        item.isEdit = false;\r\n      });\r\n    }\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.lanes {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lanes.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lanes.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Lanes.vue?vue&type=template&id=c192e5b2&scoped=true&\"\nimport script from \"./Lanes.vue?vue&type=script&lang=js&\"\nexport * from \"./Lanes.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Lanes.vue?vue&type=style&index=0&id=c192e5b2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c192e5b2\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div id=\"desginer\" class=\"ds_workflow ds-designer\">\r\n    <!-- 按钮栏 -->\r\n    <div class=\"designer-head\">\r\n      <div class=\"desginer_tools\">\r\n        <a class=\"ds-button__icon-text\" @click=\"doSave\">\r\n          <i class=\"iconfont icon-baocun\"></i>\r\n          <span>保存</span>\r\n        </a>\r\n        <a class=\"ds-button__icon-text\">\r\n          <i class=\"iconfont icon-baocun\"></i>\r\n          <span>发布</span>\r\n        </a>\r\n        <a class=\"ds-button__icon-text\">\r\n          <i class=\"iconfont icon-iframetianjia\"></i>\r\n          <span>\r\n            版本\r\n            <i class=\"iconfont icon-xia1\"></i>\r\n          </span>\r\n          <dl class=\"layui-nav-child\">\r\n            <p class=\"label\">\r\n              <span>当前版本</span>\r\n            </p>\r\n            <p>\r\n              <span>2.0.11 2020-4-10 16：20： 10</span>\r\n            </p>\r\n            <p class=\"label\">\r\n              <span>历史版本</span>\r\n            </p>\r\n            <p>\r\n              <span>2.0.11 2020-4-10 16：20： 10</span>\r\n            </p>\r\n            <p>\r\n              <span>2.0.11 2020-4-10 16：20： 10</span>\r\n            </p>\r\n            <p>\r\n              <span>2.0.11 2020-4-10 16：20： 10</span>\r\n            </p>\r\n            <p>\r\n              <span>2.0.11 2020-4-10 16：20： 10</span>\r\n            </p>\r\n          </dl>\r\n        </a>\r\n        <a class=\"ds-button__icon-text\">\r\n          <i class=\"iconfont icon-shebeikaifa1\"></i>\r\n          <span>模板库</span>\r\n        </a>\r\n        <a class=\"ds-button__icon-text\">\r\n          <i class=\"iconfont icon-baocun\"></i>\r\n          <span>关闭</span>\r\n        </a>\r\n        <a\r\n          class=\"ds-button__icon-text\"\r\n          :class=\"{ selected: isDrawLine }\"\r\n          @click=\"drawLine\"\r\n        >\r\n          <i class=\"iconfont icon-liujisuan\"></i>\r\n          <span>连线</span>\r\n        </a>\r\n        <a class=\"ds-button__icon-text\">\r\n          <i class=\"iconfont icon-iframetianjia\"></i>\r\n          <span>\r\n            泳道\r\n            <i class=\"iconfont icon-xia1\"></i>\r\n          </span>\r\n          <dl class=\"layui-nav-child\">\r\n            <dd @click=\"addLane('vertical')\">\r\n              <span>泳道(垂直)</span>\r\n            </dd>\r\n            <dd @click=\"addLane('horizontal')\">\r\n              <span>泳道(水平)</span>\r\n            </dd>\r\n          </dl>\r\n        </a>\r\n        <a class=\"ds-button__icon-text scale\">\r\n          <div class=\"scale-com\">\r\n            <i\r\n              class=\"el-icon-minus\"\r\n              :class=\"{ disabled: scale <= 0.4 }\"\r\n              @click=\"rootScale('down')\"\r\n            ></i>\r\n            <span class=\"percent\">{{ Math.round(scale * 100) }}%</span>\r\n            <i\r\n              class=\"el-icon-plus\"\r\n              :class=\"{ disabled: scale >= 2 }\"\r\n              @click=\"rootScale('up')\"\r\n            ></i>\r\n          </div>\r\n          <span>缩放</span>\r\n        </a>\r\n        <a class=\"ds-button__icon-text\">\r\n          <i class=\"iconfont icon-dakai\"></i>\r\n          <span>\r\n            组件\r\n            <i class=\"iconfont icon-xia1\"></i>\r\n          </span>\r\n          <dl class=\"layui-nav-child\">\r\n            <p @click=\"exportFlow()\">\r\n              <span>创建组</span>\r\n            </p>\r\n            <p class=\"label\" @click=\"saveAsFlow()\">\r\n              <span>保存为组件</span>\r\n            </p>\r\n            <p @click=\"openFlow()\">\r\n              <span>选择组</span>\r\n            </p>\r\n          </dl>\r\n        </a>\r\n        <a class=\"ds-button__icon-text\">\r\n          <i class=\"iconfont icon-lianjieliu\"></i>\r\n          <span>\r\n            更多\r\n            <i class=\"iconfont icon-xia1\"></i>\r\n          </span>\r\n          <dl class=\"layui-nav-child\">\r\n            <p @click=\"exportFlow()\">\r\n              <span>导出</span>\r\n            </p>\r\n            <p class=\"child\">DFR</p>\r\n            <p class=\"child\">BPMN2.0</p>\r\n            <p class=\"child\">XML</p>\r\n            <p class=\"label child\">JSON</p>\r\n            <p @click=\"openFlow()\">\r\n              <span>导入</span>\r\n            </p>\r\n            <p class=\"child\">DFR</p>\r\n            <p class=\"child\">BPMN2.0</p>\r\n            <p class=\"child\">XML</p>\r\n            <p class=\"label child\">JSON</p>\r\n            <p class=\"label\" @click=\"startTestFlow()\">\r\n              <span>仿真测试</span>\r\n            </p>\r\n            <p @click=\"monitorFlow()\">\r\n              <span>浏览监控</span>\r\n            </p>\r\n          </dl>\r\n        </a>\r\n      </div>\r\n    </div>\r\n    <!-- 中、左、右 -->\r\n    <div class=\"designer-content\">\r\n      <div class=\"designer-center\">\r\n        <div\r\n          ref=\"ds_page\"\r\n          class=\"ds_control ds_page layui-form leftRight_ design\"\r\n          @scroll=\"onScroll($event)\"\r\n        >\r\n          <div\r\n            id=\"flow_box\"\r\n            ref=\"container\"\r\n            class=\"flow\"\r\n            :style=\"{\r\n              width: toPx(scale > 1 ? width * scale : width / scale),\r\n              height: toPx(scale > 1 ? height * scale : height / scale),\r\n              transform: `scale(${scale}) translateZ(0)`,\r\n              transformOrigin: 'left top',\r\n            }\"\r\n          >\r\n            <div\r\n              ref=\"root\"\r\n              :class=\"{\r\n                has_v_head: lanes && lanes.vertical.length > 0,\r\n                has_h_head: lanes && lanes.horizontal.length > 0,\r\n              }\"\r\n              :style=\"{\r\n                width: toPx(scale > 1 ? width * scale : width / scale),\r\n                height: toPx(scale > 1 ? height * scale : height / scale),\r\n              }\"\r\n              class=\"root\"\r\n            >\r\n              <span\r\n                v-if=\"baseLine.showV\"\r\n                :style=\"{ transform: `translate3d(${baseLine.left}px, 0, 0)` }\"\r\n                class=\"baseLine_v\"\r\n              ></span>\r\n              <span\r\n                v-if=\"baseLine.showH\"\r\n                :style=\"{ transform: `translate3d(0, ${baseLine.top}px, 0)` }\"\r\n                class=\"baseLine_h\"\r\n              ></span>\r\n              <flow-content\r\n                ref=\"flowContent\"\r\n                :flow-info=\"flowInfo\"\r\n                :is-draw-line=\"isDrawLine\"\r\n                :lines=\"lines\"\r\n                :nodes=\"nodes\"\r\n                :lanes=\"lanes\"\r\n                :events=\"events\"\r\n                :checked=\"checked\"\r\n                :config=\"config\"\r\n              ></flow-content>\r\n              <div ref=\"backLayout\" class=\"backgroundLayout\">\r\n                <div ref=\"v_lane\" class=\"v_lane\">\r\n                  <lanes\r\n                    :lanes=\"lanes && lanes.vertical\"\r\n                    :checked=\"checked\"\r\n                    @addLane=\"addLane\"\r\n                  ></lanes>\r\n                </div>\r\n                <div ref=\"h_lane\" class=\"h_lane\">\r\n                  <lanes\r\n                    :lanes=\"lanes && lanes.horizontal\"\r\n                    :checked=\"checked\"\r\n                    @addLane=\"addLane\"\r\n                  ></lanes>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"designer-left\">\r\n        <div class=\"designer-left-tools\">\r\n          <el-collapse v-model=\"activeNames\" accordion>\r\n            <el-collapse-item\r\n              v-for=\"(tool, index) in flowTools\"\r\n              :key=\"index\"\r\n              :title=\"tool.title\"\r\n              :name=\"index\"\r\n            >\r\n              <div class=\"layui-colla-content layui-show\">\r\n                <div\r\n                  v-for=\"item in tool.data\"\r\n                  :key=\"item.type\"\r\n                  class=\"ds_tool_item nodeButton\"\r\n                  :title=\"item.name\"\r\n                  :sort=\"item.sort\"\r\n                  :nodetype=\"item.type\"\r\n                  draggable=\"true\"\r\n                  @dragstart=\"dragTool($event, item)\"\r\n                >\r\n                  <img :src=\"item.img\" draggable=\"false\" />\r\n                  {{ item.name }}\r\n                </div>\r\n                <div style=\"clear: both;\"></div>\r\n              </div>\r\n            </el-collapse-item>\r\n            <el-collapse-item title=\"边界事件\" name=\"5\">\r\n              <div class=\"layui-colla-content layui-show\">\r\n                <div\r\n                  v-for=\"event in boundaryEvents\"\r\n                  :key=\"event.type\"\r\n                  class=\"nodeButton ds_tool_event\"\r\n                  :title=\"event.name\"\r\n                  :nodetype=\"event.type\"\r\n                >\r\n                  <div\r\n                    class=\"tool_event_drag\"\r\n                    draggable=\"true\"\r\n                    @dragstart=\"dragBoundaryEvent($event, event)\"\r\n                  >\r\n                    <img :src=\"event.url\" draggable=\"false\" />\r\n                  </div>\r\n                  <span>{{ event.name }}</span>\r\n                </div>\r\n              </div>\r\n            </el-collapse-item>\r\n          </el-collapse>\r\n        </div>\r\n      </div>\r\n      <div id=\"propertyBox\" class=\"designer-right\">\r\n        <flow-info\r\n          :checked=\"checked\"\r\n          :nodes=\"nodes\"\r\n          :lines=\"lines\"\r\n          :flow-info=\"flowInfo\"\r\n        ></flow-info>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n/* eslint-disable no-unused-vars */\r\n/* eslint-disable no-redeclare */\r\nwindow.flow = null;\r\nimport { mapState } from \"vuex\";\r\nimport Node from \"./Node\";\r\nimport Lane from \"./Lane\";\r\nimport Line from \"./Line\";\r\nimport BoundaryEvent from \"./BoundaryEvent\";\r\nimport FlowInfo from \"./flowInfo\";\r\nimport FlowContent from \"./flowContent\";\r\nimport {\r\n  getObjById,\r\n  getObjByTarget,\r\n  getObjByParentTarget,\r\n  getObjectByTarget,\r\n  getGridPoint,\r\n  deepClone,\r\n  toPx,\r\n} from \"./common\";\r\nimport { _LineType, LaneDirection, nodeSize, tools } from \"./tools\";\r\nimport Lanes from \"./Lanes\";\r\nimport {\r\n  NodeProperties,\r\n  LineProperties,\r\n  BaseInfoProperties,\r\n  CorridorProperties,\r\n  JudgementNodeProperties,\r\n  flowTools,\r\n  boundaryEvents,\r\n} from \"./propertySource\";\r\nimport \"jqueryui/jquery-ui.min.css\";\r\nimport \"jqueryui/jquery-ui.min.js\";\r\nexport default {\r\n  name: \"Flow\",\r\n  components: {\r\n    FlowInfo,\r\n    FlowContent,\r\n    Lanes,\r\n  },\r\n  data() {\r\n    return {\r\n      activeNames: [0],\r\n      isDrawLine: false,\r\n      dragNode: null,\r\n      dragEvent: null,\r\n      endTarget: null,\r\n      width: 0,\r\n      height: 0,\r\n      maxWidth: 0,\r\n      maxHeight: 0,\r\n      flow: null,\r\n      flowInfo: null,\r\n      config: null,\r\n      xmlId:\r\n        (this.$route.query && this.$route.query.id) ||\r\n        \"5b2d48d830c44b509d4fa730fa9d0b9b\",\r\n      nodes: [],\r\n      lines: [],\r\n      events: [],\r\n      distance: 30, // 吸附距离\r\n      cloneObj: null,\r\n      crashNode: null,\r\n      scale: this.$store.state.flow.page.scale,\r\n      dragSize: 20,\r\n      maxSizeOffset: 50,\r\n      flowTools: flowTools,\r\n      boundaryEvents: boundaryEvents,\r\n      checked: null,\r\n      baseLine: {\r\n        show: \"\",\r\n        top: 0,\r\n        left: 0,\r\n      },\r\n      showLineV: false,\r\n      showLineH: false,\r\n      isGlobalPosMove: false,\r\n      globalPos: null,\r\n      globalMoveLastMouse: null,\r\n      globalRect: null,\r\n      isGlobalSelect: false,\r\n      selectGlobalPos: null,\r\n      selectGlobalPonits: {\r\n        start: { x: 0, y: 0 },\r\n        end: { x: 0, y: 0 },\r\n      },\r\n      globalSelect: null,\r\n      isCtrlKey: false,\r\n      ctrlCopyNodes: null,\r\n      isCopyNodes: false,\r\n      copyNodesPos: null,\r\n      copyNodes: [],\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      lanes: (state) => {\r\n        return state.flow.lanes;\r\n      },\r\n    }),\r\n  },\r\n  created() {},\r\n  mounted() {\r\n    this.reset();\r\n    this.init();\r\n    this.flow = this.$store.state.flow;\r\n  },\r\n  methods: {\r\n    toPx,\r\n    reset() {\r\n      const ds_page = this.$refs.ds_page;\r\n      this.$store.commit(\"flow/setPage\", {\r\n        width: ds_page.clientWidth,\r\n        height: ds_page.clientHeight,\r\n      });\r\n    },\r\n    async init() {\r\n      await this.initData();\r\n      this.loadElement();\r\n      // 绑定流程画布上的事件\r\n      this.initEvent();\r\n    },\r\n    initData() {\r\n      // 获取flow.json数据 及配置项\r\n      return this.$http\r\n        .all([\r\n          this.$http.get(\"./static/pd_attributes/dsf.flow.json\"),\r\n          this.$http.get(\r\n            \"wfm/getWFDefinition\",\r\n            {\r\n              sID: this.xmlId,\r\n            },\r\n            $$webRoot.dsfa\r\n          ),\r\n        ])\r\n        .then((res) => {\r\n          this.config = res[0];\r\n          this.flowInfo = res[1].data.WorkFlow;\r\n        })\r\n        .catch((error) => {\r\n          this.flowInfo = {};\r\n          console.log(error);\r\n        });\r\n    },\r\n    initEvent() {\r\n      document.addEventListener(\"dragover\", (e) => {\r\n        if (this.dragNode) {\r\n          this.isCtrlKey = e.ctrlKey; // dragend时候 ctrlKey一直是false 故这么解决\r\n          this.dragToolOver(e);\r\n        }\r\n        if (this.dragEvent) {\r\n          this.dragEventOver(e);\r\n        }\r\n      });\r\n      document.addEventListener(\"dragend\", (e) => {\r\n        if (this.dragNode) {\r\n          this.dragToolEnd(e);\r\n        }\r\n        if (this.dragEvent) {\r\n          this.dragEventEnd(e);\r\n          this.dragEvent && document.body.removeChild(this.dragEvent);\r\n          this.dragEvent = null;\r\n          this.cloneObj = null;\r\n          this.crashNode = null;\r\n          this.$bus.$emit(\"endMoveEvent\", true);\r\n        }\r\n      });\r\n      this.$bus.$on(\"update-baseLine\", (baseLine) => {\r\n        this.baseLine = baseLine;\r\n      });\r\n      this.$bus.$on(\"update-checked\", (checked) => {\r\n        this.checked = checked;\r\n      });\r\n      this.$bus.$on(\"parentAutoScroll\", this.parentAutoScroll);\r\n      this.$bus.$on(\"autoScroll\", this.autoScroll);\r\n      this.$bus.$on(\"resize\", this.resize);\r\n      this.$bus.$on(\"dragCloneEvent\", this.dragCloneEvent);\r\n      this.$bus.$on(\"dragNode\", this.dragTool);\r\n      // this.$bus.$on('showSubNode', this.showSubNode);\r\n      this.$bus.$on(\"startGlobalMove\", this.startGlobalMove);\r\n      this.$bus.$on(\"startCopyNodes\", this.startCopyNodes);\r\n      document.addEventListener(\"keydown\", this.keydown);\r\n\r\n      window.onresize = () => {\r\n        this.reset();\r\n        this.resize();\r\n      };\r\n      this.$refs.root.addEventListener(\"mousedown\", (e) => {\r\n        const selectedList = this.$store.state.flow.selectedList || null;\r\n        // if (e.ctrlKey && selectedList && selectedList.length > 1) {\r\n        //   // this.startGlobalMove(e);\r\n        //   //如果按住ctrl键，则开始复制多个节点\r\n        // } else {\r\n        // 点击空白处 父父节点不是子流程\r\n        if (\r\n          e.target.tagName === \"svg\" &&\r\n          e.target.parentElement.parentElement.className.indexOf(\r\n            \"subprocess\"\r\n          ) === -1\r\n        ) {\r\n          this.checked = flow;\r\n          this.$bus.$emit(\"selectGlobal\", null);\r\n          this.isGlobalSelect = true;\r\n          this.selectGlobalPos = this.$store.getters[\r\n            \"flow/getMousePointByCanvas\"\r\n          ]({\r\n            x: e.pageX,\r\n            y: e.pageY,\r\n          });\r\n        }\r\n        // }\r\n      });\r\n      //鼠标移动过程中的操作\r\n      // 载入私有方法(root内鼠标按下事件、root内鼠标移动事件、root内双击编辑事件、泳道插入事件)\r\n      this.$refs.root.addEventListener(\"mousemove\", (e) => {\r\n        if (this.readOnly) {\r\n          return;\r\n        }\r\n        this.setCursor(e);\r\n        if (this.isGlobalPosMove) {\r\n          this.globalMove(e);\r\n        }\r\n\r\n        if (this.isGlobalSelect) {\r\n          this.selectGlobalMove(e);\r\n        }\r\n\r\n        if (this.isCopyNodes) {\r\n          this.nodesMove(e);\r\n        }\r\n      });\r\n      document.addEventListener(\"mouseup\", (e) => {\r\n        if (this.isGlobalPosMove) {\r\n          this.isGlobalPosMove = false;\r\n          this.globalPos = null;\r\n          this.resize();\r\n          // 删除边界的点\r\n          this.$store.commit(\"flow/clearPoints\");\r\n        }\r\n\r\n        if (this.isGlobalSelect) {\r\n          this.selectGlobalEnd(e);\r\n          this.resize();\r\n          // 删除边界的点\r\n          this.$store.commit(\"flow/clearPoints\");\r\n        }\r\n\r\n        if (this.isCopyNodes) {\r\n          this.nodesMoveEnd(e);\r\n        }\r\n      });\r\n      // 滚动滑轮事件\r\n      this.$refs.ds_page.addEventListener(\"wheel\", this.scrollwheel, true);\r\n      // 复制事件\r\n      document.addEventListener(\"copy\", (e) => {\r\n        e.preventDefault();\r\n        this.documentCopy(e);\r\n      });\r\n      document.addEventListener(\"paste\", (e) => {\r\n        e.preventDefault();\r\n        this.pasteNode(e);\r\n      });\r\n    },\r\n    copyNewNode(ev, tool, offset, copy) {\r\n      ev.dataTransfer && ev.dataTransfer.setDragImage(new Image(), 0, 0); // 设置 拖动背景图为空\r\n      const target = ev.target || ev;\r\n      let cloneNode = target.cloneNode(true);\r\n      cloneNode.setAttribute(\"draggable\", true);\r\n      cloneNode.offset = {\r\n        x: offset ? offset.x : 0,\r\n        y: offset ? offset.y : 0,\r\n      };\r\n      // 节点之间拖动\r\n      if (copy) {\r\n        cloneNode.copyNode = tool;\r\n      }\r\n      if (!copy && tool.type === 102) {\r\n        cloneNode.tool = tool;\r\n      }\r\n      cloneNode.className = cloneNode.className + \" drag_nodeOuter\";\r\n      Object.assign(cloneNode.style, {\r\n        position: \"absolute\",\r\n        zIndex: 9999,\r\n        top: this.toPx(\r\n          ev.pageY - ((tool.padding || 0) + cloneNode.offset.y) * this.scale\r\n        ),\r\n        left: this.toPx(\r\n          ev.pageX - ((tool.padding || 0) + cloneNode.offset.x) * this.scale\r\n        ),\r\n        pointerEvents: \"none\",\r\n        cursor: \"move\",\r\n        transform: `scale(${this.scale}) translateZ(0px)`,\r\n        transformOrigin: \"left top\",\r\n      });\r\n      document.body.appendChild(cloneNode);\r\n      this.$bus.$emit(\"isMoveNode\", copy ? cloneNode.copyNode : cloneNode);\r\n      return cloneNode;\r\n    },\r\n    startCopyNodes(e) {\r\n      this.isCopyNodes = true;\r\n      this.copyNodesPos = {\r\n        x: e.pageX,\r\n        y: e.pageY,\r\n      };\r\n    },\r\n    createCopyNodes(e) {\r\n      //复制多个节点\r\n      const selectedList = this.$store.state.flow.selectedList || null;\r\n      if (selectedList && selectedList.length > 1) {\r\n        this.copyNodes = [];\r\n        selectedList.forEach((node) => {\r\n          const target = document.querySelector(\r\n            `.nodeOuter[data-id=\"${node.id}\"]`\r\n          );\r\n          const point = {\r\n            x: node.point.x * this.scale,\r\n            y: node.point.y * this.scale,\r\n          };\r\n          let getPoint = this.$store.getters[\"flow/getMousePointByPoint\"](\r\n            point\r\n          );\r\n          target.pageX = getPoint.x;\r\n          target.pageY = getPoint.y;\r\n          const copyNode = this.copyNewNode(target, node, null, true);\r\n          copyNode.point = getPoint;\r\n          this.copyNodes.push(copyNode);\r\n        });\r\n      }\r\n    },\r\n    dragTool(ev, tool, offset, copy) {\r\n      this.dragNode = this.copyNewNode(ev, tool, offset, copy);\r\n    },\r\n    getDisplacement(e) {\r\n      const localMouse = {\r\n        x: e.pageX,\r\n        y: e.pageY,\r\n      };\r\n      const last_p = getGridPoint(this.copyNodesPos);\r\n      const move_p = getGridPoint(localMouse);\r\n      return {\r\n        x: move_p.x - last_p.x,\r\n        y: move_p.y - last_p.y,\r\n      }; // 位移\r\n    },\r\n    nodesMove(e) {\r\n      const displacement = this.getDisplacement(e); // 位移\r\n      if (\r\n        (!this.copyNodes || (this.copyNodes && this.copyNodes.length === 0)) &&\r\n        (Math.abs(displacement.x) > 5 || Math.abs(displacement.y) > 5)\r\n      ) {\r\n        // 当位移大于5\r\n        this.createCopyNodes(e);\r\n      }\r\n      this.copyNodes.forEach((node) => {\r\n        const copyNode = node.copyNode;\r\n        const offset = node.offset;\r\n        const end = {\r\n          x: node.point.x + displacement.x - offset.x * this.scale,\r\n          y: node.point.y + displacement.y - offset.y * this.scale,\r\n        };\r\n        node.style.top = this.toPx(end.y);\r\n        node.style.left = this.toPx(end.x);\r\n      });\r\n      this.isCtrlKey = e.ctrlKey;\r\n    },\r\n    dragToolOver(e) {\r\n      const node = this.dragNode;\r\n      const offset = node.offset;\r\n      node.style.top = this.toPx(e.pageY - offset.y * this.scale);\r\n      node.style.left = this.toPx(e.pageX - offset.x * this.scale);\r\n      const copyNode = node.copyNode;\r\n      this.endTarget = this.getTargetIsNodes(e.target, copyNode || node.tool);\r\n      if (!this.endTarget) {\r\n        return;\r\n      }\r\n      const className = this.endTarget && this.endTarget.className;\r\n      if (className.indexOf(\"nodes isSub\") > -1) {\r\n        const node = getObjByTarget(this.nodes, this.endTarget);\r\n        this.$bus.$emit(\"dragToSubNode\", copyNode !== node ? node : null);\r\n      } else {\r\n        this.$bus.$emit(\"dragToSubNode\", null);\r\n      }\r\n      if (copyNode) {\r\n        this.$bus.$emit(\r\n          `moveCopyNode${copyNode.parentNodeId || \"\"}`,\r\n          e,\r\n          copyNode\r\n        );\r\n      }\r\n    },\r\n    getTargetIsNodes(target, copyNode) {\r\n      const svgRoot = document.querySelector(\".svgRoot\");\r\n      if (!svgRoot.contains(target)) {\r\n        return null;\r\n      }\r\n      // 子流程不能拖动到子流程\r\n      if (copyNode && copyNode.type == \"102\") {\r\n        if (target.className.indexOf(\"nodes isSub\") > -1) {\r\n          return this.getTargetIsNodes(target.parentElement);\r\n        }\r\n      }\r\n      if (target.className.indexOf(\"nodes\") > -1) {\r\n        return target;\r\n      }\r\n      return this.getTargetIsNodes(target.parentElement);\r\n    },\r\n    getBeforeCopyLine(nodes) {\r\n      // 获取拷贝节点之间的线\r\n      let lineIds = [];\r\n      nodes.forEach((item) => {\r\n        lineIds = [...lineIds, ...item.out, ...item.in];\r\n      });\r\n      lineIds = [...new Set(lineIds)]; // 去重\r\n\r\n      let fromNodeIds = [];\r\n      let toNodeIds = [];\r\n      let newLines = [];\r\n      lineIds.forEach((lineId) => {\r\n        let line = getObjById(this.lines, lineId);\r\n        if (!line) {\r\n          return;\r\n        }\r\n        let from;\r\n        if (line.fromType === \"event\") {\r\n          from = getObjById(this.events, line.from);\r\n        } else {\r\n          from = getObjById(nodes, line.from);\r\n        }\r\n        const to = getObjById(nodes, line.to);\r\n        if (from && to) {\r\n          // 保证是节点之间的线\r\n          const newLine = deepClone(line);\r\n          newLine.id = tools.uuid();\r\n          fromNodeIds.push({ line: newLine, nodeId: from.id });\r\n          toNodeIds.push({ line: newLine, nodeId: to.id });\r\n          newLines.push(newLine);\r\n        }\r\n      });\r\n      return {\r\n        fromNodeIds,\r\n        toNodeIds,\r\n        newLines,\r\n      };\r\n    },\r\n    resetLineFromAndTo(fromNodeIds, toNodeIds, newNode, copyNode) {\r\n      if (fromNodeIds.length > 0) {\r\n        fromNodeIds.forEach((item) => {\r\n          if (item.nodeId === copyNode.id) {\r\n            newNode.in.push(item.line.id);\r\n            item.line.from = newNode.id;\r\n          }\r\n        });\r\n      }\r\n      if (toNodeIds.length > 0) {\r\n        toNodeIds.forEach((item) => {\r\n          if (item.nodeId === copyNode.id) {\r\n            newNode.out.push(item.line.id);\r\n            item.line.to = newNode.id;\r\n          }\r\n        });\r\n      }\r\n    },\r\n    copyEventsLines(newLines) {\r\n      newLines.forEach((line) => {\r\n        if (line.fromType === \"event\") {\r\n          // 边界事件\r\n          const event = getObjById(this.events, line.from, \"fromId\");\r\n          if (event) {\r\n            delete event.fromId;\r\n            line.from = event.id;\r\n          } else {\r\n            line.from = null;\r\n          }\r\n        }\r\n        if (line.from && line.to) {\r\n          this.$bus.$emit(\"addLine\", {\r\n            id: line.id,\r\n            type: line.type,\r\n            name: line.name,\r\n            from: line.from,\r\n            fromType: line.fromType,\r\n            to: line.to,\r\n            linkInfo: line.linkInfo,\r\n          });\r\n        }\r\n      });\r\n    },\r\n    nodesMoveEnd(e) {\r\n      if (this.copyNodes && this.copyNodes.length > 0) {\r\n        const nodes = this.copyNodes.map((item) => item.copyNode);\r\n        const { fromNodeIds, toNodeIds, newLines } = this.getBeforeCopyLine(\r\n          nodes\r\n        );\r\n        const displacement = this.getDisplacement(e);\r\n        const selectedList = [];\r\n        let isMove;\r\n        this.copyNodes.forEach((node) => {\r\n          const copyNode = node.copyNode;\r\n          const offset = node.offset;\r\n          const end = {\r\n            pageX: node.point.x + displacement.x,\r\n            pageY: node.point.y + displacement.y,\r\n          };\r\n          const newNode = this.nodeMoveEnd(end, node);\r\n          if (newNode.id === copyNode.id) {\r\n            isMove = true;\r\n          } else {\r\n            this.resetLineFromAndTo(fromNodeIds, toNodeIds, newNode, copyNode);\r\n          }\r\n          this.checked = newNode;\r\n          selectedList.push(newNode);\r\n        });\r\n        if (!isMove) {\r\n          this.copyEventsLines(newLines);\r\n        }\r\n        // 选中拷贝后的节点\r\n        this.$store.commit(\"flow/setSelectedList\", selectedList);\r\n      }\r\n      this.isCopyNodes = false;\r\n      this.copyNodesPos = null;\r\n      this.copyNodes = [];\r\n      this.$bus.$emit(\"isMoveNode\", false);\r\n    },\r\n    nodeMoveEnd(e, node) {\r\n      let newNode, point, isMove, fromCopyId;\r\n      // 节点的拖动\r\n      const copyNode = node && node.copyNode;\r\n      if (copyNode) {\r\n        const offset = node.offset;\r\n        // 从子流程中拖到流程中\r\n        if (copyNode.parentNodeId) {\r\n          // 删除子流程的节点\r\n          this.deleteNode(copyNode);\r\n          delete copyNode.id;\r\n          delete copyNode.parentNodeId;\r\n          delete copyNode.point;\r\n          point = Object.assign(copyNode, {\r\n            x:\r\n              e.pageX - offset.x * this.scale > copyNode.padding\r\n                ? e.pageX - offset.x * this.scale\r\n                : copyNode.padding,\r\n            y:\r\n              e.pageY - offset.y * this.scale > copyNode.padding\r\n                ? e.pageY - offset.y * this.scale\r\n                : copyNode.padding,\r\n            mouseConvert: true,\r\n          });\r\n        } else {\r\n          // 流程位置移动\r\n          const mp = this.$store.getters[\"flow/getMousePointByCanvas\"]({\r\n            x: e.pageX - offset.x * this.scale,\r\n            y: e.pageY - offset.y * this.scale,\r\n          });\r\n          // let p = getGridPoint(mp);\r\n          let p = mp;\r\n          p = {\r\n            x: p.x > copyNode.padding ? p.x : copyNode.padding,\r\n            y: p.y > copyNode.padding ? p.y : copyNode.padding,\r\n          };\r\n          // 按住ctrl 就是复制\r\n          if (this.isCtrlKey) {\r\n            // 复制一个节点\r\n            fromCopyId = copyNode.id;\r\n            point = Object.assign({}, copyNode, {\r\n              id: tools.uuid(),\r\n              out: [],\r\n              in: [],\r\n              x: p.x,\r\n              y: p.y,\r\n            });\r\n          } else {\r\n            // 缩放后的坐标\r\n            p = {\r\n              x: p.x / this.scale,\r\n              y: p.y / this.scale,\r\n            };\r\n            // 只是移动位置\r\n            p = getGridPoint(p);\r\n            copyNode.point.x = p.x;\r\n            copyNode.point.y = p.y;\r\n            this.$bus.$emit(\"nodeMove\", copyNode);\r\n            isMove = true;\r\n          }\r\n        }\r\n      }\r\n      if (!isMove) {\r\n        // 从环节类型中拖动到流程\r\n        const type = e.target && e.target.getAttribute(\"nodetype\");\r\n        const sort = e.target && e.target.getAttribute(\"sort\");\r\n        point = point || {\r\n          type: type,\r\n          sort: sort,\r\n          x: e.pageX,\r\n          y: e.pageY,\r\n          mouseConvert: true,\r\n        };\r\n        newNode = this.copyNodeNext(point, fromCopyId, copyNode);\r\n        // this.nodes.push(newNode);\r\n        // if(fromCopyId) {\r\n        //   // 节点复制后 复制边界事件\r\n        //   this.copyNodeEvent(fromCopyId, newNode);\r\n        // }\r\n        // // 子流程拷贝后 子节点复制\r\n        // if(copyNode && copyNode.nodes && copyNode.nodes.length > 0) {\r\n        //   newNode.nodes = [];\r\n        //   copyNode.nodes.forEach(item => {\r\n        //     const subNode = deepClone(item);\r\n        //     const subPoint = Object.assign({\r\n        //       x: subNode.point.x,\r\n        //       y: subNode.point.y,\r\n        //     }, subNode);\r\n        //     newNode.nodes.push(this.addSubNode(subPoint, newNode));\r\n        //   });\r\n        // }\r\n      }\r\n      document.body.removeChild(node);\r\n      this.resize();\r\n      return isMove ? copyNode : newNode;\r\n    },\r\n    copyNodeNext(point, fromCopyId, copyNode) {\r\n      const node = this.addNode(point);\r\n      this.nodes.push(node);\r\n      if (fromCopyId) {\r\n        // 节点复制后 复制边界事件\r\n        this.copyNodeEvent(fromCopyId, node);\r\n      }\r\n      // 子流程拷贝后 子节点复制\r\n      if (copyNode && copyNode.nodes && copyNode.nodes.length > 0) {\r\n        node.nodes = [];\r\n        copyNode.nodes.forEach((item) => {\r\n          const subNode = deepClone(item);\r\n          const subPoint = Object.assign(\r\n            {\r\n              x: subNode.point.x,\r\n              y: subNode.point.y,\r\n            },\r\n            subNode\r\n          );\r\n          node.nodes.push(this.addSubNode(subPoint, node));\r\n        });\r\n      }\r\n      return node;\r\n    },\r\n    dragToolEnd(e) {\r\n      if (this.endTarget) {\r\n        const className = this.endTarget && this.endTarget.className;\r\n        if (className.indexOf(\"nodes isSub\") > -1) {\r\n          const node = getObjByTarget(this.nodes, this.endTarget);\r\n          if (node) {\r\n            let point, isMove;\r\n            // 节点的拖动\r\n            if (this.dragNode && this.dragNode.copyNode) {\r\n              const copyNode = this.dragNode.copyNode;\r\n              const offset = this.dragNode.offset;\r\n              // 从流程中拖到子流程中 或者子流程到宁外一个子流程\r\n              if (\r\n                !copyNode.parentNodeId ||\r\n                (copyNode.parentNodeId && copyNode.parentNodeId !== node.id)\r\n              ) {\r\n                point = Object.assign(copyNode, {\r\n                  x:\r\n                    e.pageX - offset.x * this.scale > copyNode.padding\r\n                      ? e.pageX - offset.x * this.scale\r\n                      : copyNode.padding,\r\n                  y:\r\n                    e.pageY - offset.y * this.scale > copyNode.padding\r\n                      ? e.pageY - offset.y * this.scale\r\n                      : copyNode.padding,\r\n                  mouseConvert: true,\r\n                });\r\n                this.deleteNode(copyNode);\r\n                delete copyNode.id;\r\n              } else {\r\n                // 在当前子流程中 只是位置移动\r\n                point = {\r\n                  x: e.pageX - offset.x * this.scale,\r\n                  y: e.pageY - offset.y * this.scale,\r\n                  mouseConvert: true,\r\n                };\r\n                const options = this.getOptions(point);\r\n                copyNode.point.x = options.x - node.point.x;\r\n                // 子节点相对于父节点的位置\r\n                copyNode.point.y =\r\n                  options.y - node.point.y - node.imgHeight - node.padding * 2;\r\n                this.$bus.$emit(`nodeMove${copyNode.parentNodeId}`, copyNode);\r\n                isMove = true;\r\n              }\r\n            }\r\n            if (!isMove) {\r\n              // 从环节类型中拖动到子流程\r\n              const type = e.target && e.target.getAttribute(\"nodetype\");\r\n              const sort = e.target && e.target.getAttribute(\"sort\");\r\n              point = point || {\r\n                type: type,\r\n                sort: sort,\r\n                x: e.pageX,\r\n                y: e.pageY,\r\n                mouseConvert: true,\r\n              };\r\n              const subNode = this.addSubNode(point, node);\r\n              node.nodes\r\n                ? node.nodes.push(subNode)\r\n                : this.$set(node, \"nodes\", [subNode]);\r\n              this.$set(node, \"lines\", node.lines || []);\r\n              this.$set(node, \"events\", node.events || []);\r\n              this.nodeResize(node);\r\n              // this.checked = subNode;\r\n            }\r\n          }\r\n          document.body.removeChild(this.dragNode);\r\n        } else if (className.indexOf(\"nodes\") > -1) {\r\n          this.checked = this.nodeMoveEnd(e, this.dragNode);\r\n          this.$store.commit(\"flow/setSelectedList\", [this.checked]);\r\n        }\r\n      } else {\r\n        document.body.removeChild(this.dragNode);\r\n      }\r\n      this.dragNode = null;\r\n      this.$bus.$emit(\"isMoveNode\", false);\r\n    },\r\n    dragBoundaryEvent(ev, event) {\r\n      ev.dataTransfer.setDragImage(new Image(), 0, 0); // 设置 拖动背景图为空\r\n      this.dragEvent = ev.target.cloneNode(true);\r\n      this.dragEvent.className = \"ds_tool_event_drag\";\r\n      this.dragEvent.setAttribute(\"draggable\", false);\r\n      const cloneTool = deepClone(event);\r\n      this.cloneObj = new BoundaryEvent(cloneTool, ev);\r\n      Object.assign(this.dragEvent.style, {\r\n        position: \"absolute\",\r\n        zIndex: 9999,\r\n        width: this.toPx(this.cloneObj.width),\r\n        height: this.toPx(this.cloneObj.height),\r\n        top: this.toPx(ev.pageY - ev.offsetY),\r\n        left: this.toPx(ev.pageX - ev.offsetX),\r\n        pointerEvents: \"none\",\r\n        transform: `scale(${this.scale}) translateZ(0px)`,\r\n        transformOrigin: \"left top\",\r\n      });\r\n      document.body.appendChild(this.dragEvent);\r\n      this.$bus.$emit(\"startMoveEvent\", this.dragEvent);\r\n    },\r\n    dragEventOver(e) {\r\n      if (this.dragEvent) {\r\n        // 拖动边界事件\r\n        const comp = this.computedPoint(e, this.dragEvent);\r\n        if (\r\n          Array.from(e.target.classList).indexOf(\"task-node\") > -1 ||\r\n          Array.from(e.target.parentElement).indexOf(\"node\")\r\n        ) {\r\n          const parentAndSub = getObjByParentTarget(\r\n            this.nodes,\r\n            \"nodes\",\r\n            e.target\r\n          );\r\n          if (parentAndSub) {\r\n            const parentNode = parentAndSub.parent;\r\n            const subNode = parentAndSub.sub;\r\n            this.crashNode = subNode;\r\n            let points = this.$store.getters[\"flow/getPoints\"](subNode.id);\r\n            if (!points) {\r\n              this.$store.commit(\"flow/setPointsByNode\", {\r\n                node: subNode,\r\n                obj: this.cloneObj,\r\n              });\r\n              points = this.$store.getters[\"flow/getPoints\"](subNode.id);\r\n            }\r\n            const subComp = {\r\n              point: {\r\n                x: comp.point.x - parentNode.point.x * this.scale,\r\n                y:\r\n                  comp.point.y -\r\n                  (parentNode.point.y +\r\n                    parentNode.padding +\r\n                    parentNode.imgHeight +\r\n                    parentNode.padding * 2) *\r\n                    this.scale,\r\n              },\r\n            };\r\n            const point = this.getPoint(subComp, points, this.distance);\r\n            if (point) {\r\n              this.cloneObj = Object.assign(this.cloneObj, point, {\r\n                parentNode,\r\n              });\r\n              let getPoint = this.$store.getters[\"flow/getMousePointByPoint\"](\r\n                point.point\r\n              );\r\n              getPoint.x = getPoint.x + parentNode.point.x * this.scale;\r\n              getPoint.y =\r\n                getPoint.y +\r\n                (parentNode.point.y +\r\n                  parentNode.imgHeight +\r\n                  parentNode.padding * 2) *\r\n                  this.scale;\r\n              this.dragEvent.style.top = this.toPx(getPoint.y);\r\n              this.dragEvent.style.left = this.toPx(getPoint.x);\r\n              return;\r\n            }\r\n          }\r\n          const node = getObjByTarget(this.nodes, e.target);\r\n          // 父节点吸附\r\n          if (node) {\r\n            this.crashNode = node;\r\n            let points = this.$store.getters[\"flow/getPoints\"](node.id);\r\n            if (!points) {\r\n              this.$store.commit(\"flow/setPointsByNode\", {\r\n                node,\r\n                obj: this.cloneObj,\r\n              });\r\n              points = this.$store.getters[\"flow/getPoints\"](node.id);\r\n            }\r\n            const point = this.getPoint(comp, points, this.distance);\r\n            if (point) {\r\n              this.cloneObj = Object.assign(this.cloneObj, point);\r\n              const getPoint = this.$store.getters[\"flow/getMousePointByPoint\"](\r\n                point.point\r\n              );\r\n              this.dragEvent.style.top = this.toPx(getPoint.y);\r\n              this.dragEvent.style.left = this.toPx(getPoint.x);\r\n              return;\r\n            }\r\n          }\r\n        }\r\n        this.dragEvent.style.top = this.toPx(e.pageY);\r\n        this.dragEvent.style.left = this.toPx(e.pageX);\r\n      }\r\n    },\r\n    dragEventEnd(e) {\r\n      if (e.type === \"drop\") {\r\n        e = event ? event : e;\r\n        e.preventDefault();\r\n      } else {\r\n        if (event.touches) {\r\n          e = event.touches[0] ? event.touches[0] : event;\r\n        }\r\n      }\r\n      if (!this.crashNode) {\r\n        return;\r\n      }\r\n      const points = this.$store.getters[\"flow/getPoints\"](this.crashNode.id);\r\n      let obj = this.computedPoint(e, this.cloneObj);\r\n      if (this.cloneObj.parentNode) {\r\n        const parentNode = this.cloneObj.parentNode;\r\n        obj = {\r\n          point: {\r\n            x: obj.point.x - parentNode.point.x * this.scale,\r\n            y:\r\n              obj.point.y -\r\n              (parentNode.point.y +\r\n                parentNode.padding +\r\n                parentNode.imgHeight +\r\n                parentNode.padding * 2) *\r\n                this.scale,\r\n          },\r\n        };\r\n      }\r\n      const point = this.getPoint(obj, points, this.distance);\r\n      if (point) {\r\n        // 删除吸附点\r\n        points.splice(points.indexOf(point), 1);\r\n        // 当前node上面移动位置\r\n        if (this.cloneObj.from) {\r\n          const events = this.cloneObj.parentNode\r\n            ? this.cloneObj.parentNode.events\r\n            : this.events;\r\n          events.forEach((item) => {\r\n            if (item.id === this.cloneObj.from) {\r\n              // 恢复可吸附点\r\n              this.$store.commit(\"flow/addPoint\", {\r\n                id: this.cloneObj.nodeId,\r\n                obj: {\r\n                  point: {\r\n                    x: item.point.x,\r\n                    y: item.point.y,\r\n                  },\r\n                  index: item.index,\r\n                  direction: item.direction,\r\n                },\r\n              });\r\n            }\r\n          });\r\n          this.deleteEvent(this.cloneObj.from, events);\r\n          this.cloneObj.id = this.cloneObj.from;\r\n          delete this.cloneObj.from;\r\n        }\r\n        // 最后位置\r\n        this.cloneObj = Object.assign(this.cloneObj, point);\r\n        this.cloneObj.point.x = this.cloneObj.point.x / this.scale;\r\n        this.cloneObj.point.y = this.cloneObj.point.y / this.scale;\r\n        this.cloneObj.nodeId = this.crashNode.id;\r\n        this.addNewEvent(this.cloneObj);\r\n        this.checked = this.cloneObj;\r\n        if (this.cloneObj.out && this.cloneObj.out.length > 0) {\r\n          this.$bus.$emit(\r\n            `eventMove${\r\n              this.cloneObj.parentNode ? this.cloneObj.parentNode.id : \"\"\r\n            }`,\r\n            this.cloneObj\r\n          );\r\n          // this.$bus.$emit(\"eventMove\", this.cloneObj);\r\n        }\r\n      }\r\n    },\r\n    addNewEvent(cloneObj) {\r\n      if (cloneObj.parentNode) {\r\n        this.nodes.forEach((node) => {\r\n          if (cloneObj.parentNode && cloneObj.parentNode.id === node.id) {\r\n            node.events.push(cloneObj);\r\n          }\r\n        });\r\n      } else {\r\n        this.events.push(cloneObj);\r\n      }\r\n    },\r\n    dragCloneEvent(e, event) {\r\n      const copyEvent = deepClone(event);\r\n      copyEvent.from = event.id;\r\n      copyEvent.id = tools.uuid();\r\n      this.dragBoundaryEvent(e, copyEvent);\r\n    },\r\n    // 节点拷贝后 拷贝边界事件\r\n    copyNodeEvent(fromCopyId, node) {\r\n      let copyEvents = [];\r\n      this.events.forEach((ev) => {\r\n        if (ev.nodeId === fromCopyId) {\r\n          copyEvents.push(deepClone(ev));\r\n        }\r\n      });\r\n      if (copyEvents.length === 0) {\r\n        return;\r\n      }\r\n      // 获取边界事件坐标点\r\n      this.$store.commit(\"flow/setPointsByNode\", { node, obj: copyEvents[0] });\r\n      const points = this.$store.getters[\"flow/getPoints\"](node.id);\r\n      points.forEach((item) => {\r\n        copyEvents.forEach((ev) => {\r\n          if (ev.direction === item.direction && ev.index === item.index) {\r\n            ev.fromId = ev.id; // 用于画线\r\n            ev.id = tools.uuid();\r\n            ev.point = item.point;\r\n            ev.nodeId = node.id;\r\n            this.addNewEvent(ev);\r\n          }\r\n        });\r\n      });\r\n    },\r\n    getPoint(obj, all, distance) {\r\n      let point;\r\n      let min = 0;\r\n      all.forEach((item) => {\r\n        let realDistance = this.getDistance(item, obj);\r\n        if (realDistance <= distance) {\r\n          if (min < realDistance) {\r\n            min = realDistance;\r\n            point = item;\r\n          }\r\n        }\r\n      });\r\n      return point;\r\n    },\r\n    getDistance(p1, p2) {\r\n      const dis = Math.sqrt(\r\n        Math.pow(p1.point.x - p2.point.x, 2) +\r\n          Math.pow(p1.point.y - p2.point.y, 2)\r\n      );\r\n      // console.log(dis);\r\n      return dis;\r\n    },\r\n    computedPoint(e, moveObj) {\r\n      const mp = this.$store.getters[\"flow/getMousePointByCanvas\"]({\r\n        x: e.pageX,\r\n        y: e.pageY,\r\n      });\r\n      return { point: getGridPoint(mp) };\r\n    },\r\n    getOptions(opts) {\r\n      const options = Object.assign(\r\n        {\r\n          id: tools.uuid(),\r\n          type: 1,\r\n        },\r\n        opts\r\n      );\r\n      let p = {\r\n        x: options.x || 0,\r\n        y: options.y || 0,\r\n      };\r\n      if (options.mouseConvert == true) {\r\n        const mp = this.$store.getters[\"flow/getMousePointByCanvas\"]({\r\n          x: options.x,\r\n          y: options.y,\r\n        });\r\n        p.x = mp.x;\r\n        p.y = mp.y;\r\n      }\r\n      p = getGridPoint(p);\r\n      options.x = p.x / this.scale;\r\n      options.y = p.y / this.scale;\r\n      return options;\r\n    },\r\n    // 增加节点\r\n    addNode(opts) {\r\n      const options = this.getOptions(opts);\r\n      options.name = options.name || \"新建环节\" + this.nodes.length;\r\n      const node = new Node(options);\r\n      return node;\r\n    },\r\n    // 增加子流程子节点\r\n    addSubNode(opts, node) {\r\n      const options = this.getOptions(opts);\r\n      options.name =\r\n        options.name || \"新建环节\" + ((node.nodes && node.nodes.length) || 0);\r\n      if (options.mouseConvert == true) {\r\n        options.x = options.x - node.point.x;\r\n        // 子节点相对于父节点的位置\r\n        options.y =\r\n          options.y - node.point.y - node.imgHeight - node.padding * 2;\r\n      }\r\n      let children = new Node(options);\r\n      children.parentNodeId = node.id; // 子流程才有\r\n      return children;\r\n    },\r\n    showSubNode(node) {\r\n      // console.log(node);\r\n      // if(node.open && node.open.show) {\r\n      //   // 展开\r\n      //   this.nodes.forEach(item => {\r\n      //     if(item !== node) {\r\n      //       if(item.point.x > node.point.x + nodeSize.width) {\r\n      //         item.point.x = item.point.x + (node.width - nodeSize.width - node.padding * 2);\r\n      //       }\r\n      //       if(item.point.y > node.point.y + nodeSize.height) {\r\n      //         item.point.y = item.point.y + (node.height - nodeSize.height - node.padding * 2);\r\n      //       }\r\n      //     }\r\n      //   });\r\n      // } else {\r\n      //   // 收起来\r\n      //   this.nodes.forEach(item => {\r\n      //     if(item !== node) {\r\n      //       if(item.point.x > node.point.x + node.open.width) {\r\n      //         item.point.x = item.point.x - (node.open.width - node.width - node.padding * 2);\r\n      //       }\r\n      //       if(item.point.y > node.point.y + node.open.height) {\r\n      //         item.point.y = item.point.y - (node.open.height - node.height - node.padding * 2);\r\n      //       }\r\n      //     }\r\n      //   });\r\n      // }\r\n    },\r\n    // 监听鼠标\r\n    keydown(e) {\r\n      if (this.checked && this.checked.readOnly) {\r\n        return;\r\n      }\r\n      if (e.keyCode == 46) {\r\n        const selectedList = this.$store.state.flow.selectedList || null;\r\n        // 多选才删除\r\n        if (selectedList && selectedList.length > 1) {\r\n          // for(let i = 0; i < selectedList.length; i++) {\r\n          //   let node = selectedList[i];\r\n          //   this.deleteNode(node);\r\n          //   console.log(selectedList);\r\n          // }\r\n          selectedList.forEach((node) => {\r\n            setTimeout(() => {\r\n              this.deleteNode(node);\r\n            }, 0);\r\n          });\r\n        } else if (this.checked instanceof Node) {\r\n          // 删除单个\r\n          this.deleteNode(this.checked);\r\n        } else if (this.checked instanceof Lane) {\r\n          this.$store.commit(\"flow/deleteLane\", this.checked);\r\n          this.resize();\r\n        } else if (this.checked instanceof Line) {\r\n          this.deleteLine(this.checked);\r\n        } else if (this.checked instanceof BoundaryEvent) {\r\n          const obj = this.checked;\r\n          for (let i = obj[\"out\"].length - 1; i >= 0; i--) {\r\n            const l = getObjById(this.lines, obj[\"out\"][i]);\r\n            if (l) {\r\n              this.deleteLine(l);\r\n            }\r\n          }\r\n          const events = this.checked.parentNode\r\n            ? this.checked.parentNode.events\r\n            : this.events;\r\n          // 删除单个\r\n          this.deleteEvent(this.checked.id, events);\r\n        }\r\n        this.checked = {};\r\n      }\r\n    },\r\n    deleteNode(node) {\r\n      // 删除子流程节点\r\n      let parentNode;\r\n      if (node.parentNodeId) {\r\n        parentNode = this.nodes.find((item) => node.parentNodeId === item.id);\r\n      }\r\n      const nodes = node.parentNodeId ? parentNode.nodes : this.nodes;\r\n      const lines = node.parentNodeId ? parentNode.lines : this.lines;\r\n      const events = node.parentNodeId ? parentNode.events : this.events;\r\n      const index = nodes.indexOf(node);\r\n      if (index > -1) {\r\n        const obj = node;\r\n        // 删除线\r\n        for (let i = obj[\"out\"].length - 1; i >= 0; i--) {\r\n          const l = getObjById(lines, obj[\"out\"][i]);\r\n          if (l) {\r\n            this.deleteLine(l);\r\n          }\r\n        }\r\n        for (let i = obj[\"in\"].length - 1; i >= 0; i--) {\r\n          const l = getObjById(lines, obj[\"in\"][i]);\r\n          if (l) {\r\n            this.deleteLine(l);\r\n          }\r\n        }\r\n        // 删除边界事件\r\n        for (let i = 0; i < events.length; i++) {\r\n          let nodeId = events[i].nodeId;\r\n          if (nodeId === obj.id) {\r\n            let event = events[i];\r\n            // 删除线\r\n            for (let j = event.out.length - 1; j >= 0; j--) {\r\n              const line = getObjById(this.lines, event.out[j]);\r\n              if (line) {\r\n                this.deleteLine(line);\r\n              }\r\n            }\r\n            events.splice(i, 1);\r\n            i--;\r\n          }\r\n        }\r\n        // 删除节点\r\n        nodes.splice(index, 1);\r\n      }\r\n    },\r\n    deleteLine(line) {\r\n      line.remove();\r\n      // 删除子流程的线\r\n      let parentNode;\r\n      if (line.parentNodeId) {\r\n        parentNode = this.nodes.find((item) => line.parentNodeId === item.id);\r\n      }\r\n      const nodes = line.parentNodeId ? parentNode.nodes : this.nodes;\r\n      const lines = line.parentNodeId ? parentNode.lines : this.lines;\r\n      const index = lines.indexOf(line);\r\n      if (index > -1) {\r\n        this.deleteFromOrOut(nodes, lines, line, index);\r\n      }\r\n    },\r\n    deleteFromOrOut(nodes, lines, line, index) {\r\n      const from = getObjById(nodes, line.from);\r\n      const to = getObjById(nodes, line.to);\r\n      if (from) {\r\n        const f_index = from[\"out\"].indexOf(line.id);\r\n        if (f_index >= 0) {\r\n          from[\"out\"].splice(f_index, 1);\r\n        }\r\n      }\r\n      if (to) {\r\n        const t_index = to[\"in\"].indexOf(line.id);\r\n        if (t_index >= 0) {\r\n          to[\"in\"].splice(t_index, 1);\r\n        }\r\n      }\r\n      lines.splice(index, 1);\r\n      this.$bus.$emit(\"updateIntersection\");\r\n    },\r\n    deleteEvent(id, events) {\r\n      const index = (events ? events : this.events).findIndex(\r\n        (ev) => ev.id === id\r\n      );\r\n      index > -1 && (events ? events : this.events).splice(index, 1);\r\n      // 恢复可吸附点\r\n      this.$store.commit(\"flow/addPoint\", {\r\n        id: this.checked.nodeId,\r\n        obj: {\r\n          point: {\r\n            x: this.checked.point.x,\r\n            y: this.checked.point.y,\r\n          },\r\n          index: this.checked.index,\r\n          direction: this.checked.direction,\r\n        },\r\n      });\r\n      // this.dragEvent && document.body.removeChild(this.dragEvent);\r\n    },\r\n    // 添加泳道\r\n    addLane(direction, index) {\r\n      this.createLane({\r\n        direction: direction,\r\n        index: index,\r\n      });\r\n    },\r\n    createLane(options) {\r\n      const direction = options.direction;\r\n      options.name =\r\n        options.name || \"泳道\" + (this.lanes[direction].length + 1);\r\n      options.id = options.id || tools.uuid();\r\n      const lane = new Lane(options);\r\n      const before = this.lanes[direction][\r\n        (options.index || this.lanes[direction].length) - 1\r\n      ];\r\n      if (direction == LaneDirection.vertical) {\r\n        // 水平方向\r\n        lane.left = before ? before.size + before.left : 0;\r\n      } else {\r\n        // 垂直方向\r\n        lane.top = before ? before.size + before.top : 0;\r\n      }\r\n      this.$store.commit(\"flow/addLane\", {\r\n        direction,\r\n        lane,\r\n        index: options.index,\r\n      });\r\n      this.resize();\r\n    },\r\n    onScroll(e) {\r\n      const target = e.target;\r\n      this.$store.commit(\"flow/setSvgRoot\", {\r\n        scrollTop: target.scrollTop,\r\n        scrollLeft: target.scrollLeft,\r\n      });\r\n    },\r\n    //获取上一步节点\r\n    getFromNodes(node) {\r\n      if (!node[\"in\"] || node[\"in\"].length <= 0) {\r\n        return null;\r\n      }\r\n      var arr = [];\r\n      for (let i = 0; i < node[\"in\"].length; i++) {\r\n        var lineId = node[\"in\"][i];\r\n        var line = getObjById(this.lines, lineId);\r\n        if (line) {\r\n          var fn = getObjById(this.nodes, line.from);\r\n          arr.push(fn);\r\n        }\r\n      }\r\n      return arr;\r\n    },\r\n    //获取下一步节点\r\n    getToNodes(node) {\r\n      if (!node[\"out\"] || node[\"out\"].length <= 0) {\r\n        return null;\r\n      }\r\n      var arr = [];\r\n      for (let i = 0; i < node[\"out\"].length; i++) {\r\n        var lineId = node[\"out\"][i];\r\n        var line = getObjById(this.lines, lineId);\r\n        if (line) {\r\n          var fn = getObjById(this.nodes, line.to);\r\n          arr.push(fn);\r\n        }\r\n      }\r\n      return arr;\r\n    },\r\n    loadElement() {\r\n      if (\r\n        this.flowInfo &&\r\n        this.flowInfo.ElementList &&\r\n        this.flowInfo.ElementList.length > 0\r\n      ) {\r\n        let nodes = [],\r\n          lines = [],\r\n          lanes = [],\r\n          Nodes = [],\r\n          Lines = [];\r\n        if (this.flowInfo.NodeList) {\r\n          Nodes = Array.isArray(this.flowInfo.NodeList)\r\n            ? this.flowInfo.NodeList\r\n            : [this.flowInfo.NodeList];\r\n        }\r\n        if (this.flowInfo.LineList) {\r\n          Lines = Array.isArray(this.flowInfo.LineList)\r\n            ? this.flowInfo.LineList\r\n            : [this.flowInfo.LineList];\r\n        }\r\n        if (this.flowInfo.EventList) {\r\n          const EventList = this.flowInfo.EventList;\r\n          for (let i = 0; i < EventList.length; i++) {\r\n            this.events.push(new BoundaryEvent(EventList[i]));\r\n          }\r\n        }\r\n        let dataMap = {};\r\n        for (let i = 0; i < Nodes.length; i++) {\r\n          dataMap[Nodes[i].ID] = Nodes[i];\r\n        }\r\n        for (let i = 0; i < Lines.length; i++) {\r\n          dataMap[Lines[i].ID] = Lines[i];\r\n        }\r\n        this.flowInfo.ElementList = Array.isArray(this.flowInfo.ElementList)\r\n          ? this.flowInfo.ElementList\r\n          : [this.flowInfo.ElementList];\r\n        for (let i = 0; i < this.flowInfo.ElementList.length; i++) {\r\n          let element = this.flowInfo.ElementList[i];\r\n          //节点\r\n          if (element.nodeType == \"node\") {\r\n            nodes.push(element);\r\n          }\r\n          //线\r\n          else if (element.nodeType == \"line\") {\r\n            lines.push(element);\r\n          }\r\n          //泳道\r\n          else if (element.nodeType == \"lane\") {\r\n            lanes.push(element);\r\n          }\r\n        }\r\n        for (let i = 0; i < nodes.length; i++) {\r\n          let node = nodes[i];\r\n          node[\"in\"] = Array.isArray(node[\"in\"])\r\n            ? node[\"in\"]\r\n            : node[\"in\"]\r\n            ? [node[\"in\"]]\r\n            : [];\r\n          node[\"out\"] = Array.isArray(node[\"out\"])\r\n            ? node[\"out\"]\r\n            : node[\"out\"]\r\n            ? [node[\"out\"]]\r\n            : [];\r\n          node.point.x = parseFloat(node.point.x);\r\n          node.point.y = parseFloat(node.point.y);\r\n          node = Object.assign(\r\n            {\r\n              x: node.point.x,\r\n              y: node.point.y,\r\n            },\r\n            node\r\n          );\r\n          flowTools.forEach(tool => {\r\n            tool.data.forEach(item => {\r\n              if(node.attributes.BaseInfo.Type == item.type) {\r\n                node.attributes.BaseInfo.Type = item.name;\r\n              }\r\n            });\r\n          });\r\n          const newNode = this.addNode(node);\r\n          this.nodes.push(newNode);\r\n          if (node.nodes) {\r\n            // 显示子节点\r\n            const subNodes = node.nodes;\r\n            this.$set(newNode, \"nodes\", []);\r\n            subNodes.forEach((item) => {\r\n              item = Object.assign(\r\n                {\r\n                  x: item.point.x,\r\n                  y: item.point.y,\r\n                },\r\n                item\r\n              );\r\n              newNode.nodes.push(this.addSubNode(item, newNode));\r\n            });\r\n            this.$set(newNode, \"lines\", []);\r\n            this.$set(newNode, \"events\", []);\r\n          }\r\n          if (node.events) {\r\n            node.events.forEach((event) => {\r\n              let newEvent = new BoundaryEvent(event);\r\n              newEvent.parentNode = node;\r\n              newNode.events.push(newEvent);\r\n            });\r\n          }\r\n          if (node.lines) {\r\n            node.lines.forEach((line) => {\r\n              if (line.linkInfo) {\r\n                line.linkInfo.fromOffset = parseFloat(line.linkInfo.fromOffset);\r\n                line.linkInfo.toOffset = parseFloat(line.linkInfo.toOffset);\r\n              }\r\n              // 加到队列里面 等页面渲染后再发通知\r\n              setTimeout(() => {\r\n                this.$bus.$emit(`addLine${node.id}`, {\r\n                  id: line.id,\r\n                  type: line.type,\r\n                  name: line.name,\r\n                  path: line.path,\r\n                  from: line.from,\r\n                  fromType: line.fromType,\r\n                  to: line.to,\r\n                  linkInfo: line.linkInfo,\r\n                  attributes: line.attributes,\r\n                });\r\n              }, 0);\r\n            });\r\n          }\r\n        }\r\n        for (let j = 0; j < lines.length; j++) {\r\n          let line = lines[j];\r\n          let attributes = {};\r\n          if (dataMap[line.id]) {\r\n            attributes = dataMap[line.id];\r\n          }\r\n          if (line.linkInfo) {\r\n            line.linkInfo.fromOffset = parseFloat(line.linkInfo.fromOffset);\r\n            line.linkInfo.toOffset = parseFloat(line.linkInfo.toOffset);\r\n          }\r\n          this.$bus.$emit(\"addLine\", {\r\n            id: line.id,\r\n            type: line.type,\r\n            name: line.name,\r\n            path: line.path,\r\n            from: line.from,\r\n            fromType: line.fromType,\r\n            isHide: line.isHide,\r\n            to: line.to,\r\n            linkInfo: line.linkInfo,\r\n            attributes: line.attributes,\r\n          });\r\n        }\r\n        // this.lanes = lanes;\r\n        for (let i = 0; i < lanes.length; i++) {\r\n          let lane = lanes[i];\r\n          this.createLane({\r\n            id: lane.id,\r\n            name: lane.name,\r\n            size: lane.size,\r\n            index: lane.index,\r\n            direction: lane.direction,\r\n            attributes: lane.attributes,\r\n          });\r\n        }\r\n      }\r\n      this.resize();\r\n    },\r\n    // 保存\r\n    doSave() {\r\n      // var loadingIndex = dsf.layer.loadding();\r\n      flow.attributes.BaseInfo.ID = this.xmlId;\r\n      let postData = {\r\n        WorkFlow: {\r\n          BaseInfo: flow.attributes.BaseInfo,\r\n          NodeList: [],\r\n          LineList: [],\r\n          EventList: [],\r\n          LaneList: {\r\n            horizontal: [],\r\n            vertical: [],\r\n          },\r\n          ElementList: [],\r\n        },\r\n      };\r\n      const info = {\r\n        nodes: [...JSON.parse(JSON.stringify(this.nodes))],\r\n        lanes: { ...this.lanes },\r\n        lines: [...this.lines],\r\n        events: [...this.events],\r\n      };\r\n\r\n      //深度复制对象作为流程引擎使用\r\n      let infoCopy = dsf.mix(true, {}, info);\r\n      const copyMap = this.getFlowAllObjectMap(infoCopy);\r\n\r\n      let temp = [],\r\n        deleteLines = [];\r\n      //判断节点特殊操作\r\n      for (let i = 0; i < infoCopy.nodes.length; i++) {\r\n        let node = infoCopy.nodes[i];\r\n        //如果为判断节点 开始\r\n        if (node.type == \"6\") {\r\n          //获取该节点的上一步节点\r\n          let fromNodearr = [],\r\n            toNodearr = [];\r\n          let arr = this.getFromNodes(node);\r\n          if (arr) {\r\n            for (let n = 0; n < arr.length; n++) {\r\n              let nc = arr[n];\r\n              fromNodearr.push(copyMap[nc.id]);\r\n            }\r\n          }\r\n          //获取该节点的下一步个节点\r\n          arr = this.getToNodes(node);\r\n          if (arr) {\r\n            for (let n = 0; n < arr.length; n++) {\r\n              let nc = arr[n];\r\n              toNodearr.push(copyMap[nc.id]);\r\n            }\r\n          }\r\n          const obj = {\r\n            node: node,\r\n            from: fromNodearr,\r\n            to: toNodearr,\r\n          };\r\n          temp.push(obj);\r\n        }\r\n      }\r\n      for (let i = 0; i < temp.length; i++) {\r\n        let obj = temp[i];\r\n        let node = obj.node;\r\n        //判断有没有下一步节点\r\n        if (obj.node[\"out\"].length > 0) {\r\n          //将判断节点的的出线全部复制给上一步的节点\r\n          for (let c = 0; c < obj.from.length; c++) {\r\n            let fn = obj.from[c];\r\n            for (let n = 0; n < obj.node[\"out\"].length; n++) {\r\n              let lineId = obj.node[\"out\"][n];\r\n              let line_copy = Object.assign(true, {}, copyMap[lineId]);\r\n              line_copy.attributes.ID = line_copy.id + \"_\" + fn.id;\r\n              line_copy.attributes.StartNodeID = fn.id;\r\n              infoCopy.lines.push(line_copy);\r\n              deleteLines.push(lineId);\r\n            }\r\n            fn.attributes.OutLine.SendConditions =\r\n              obj.node.attributes.OutLine.SendConditions;\r\n            let rfn = getObjById(this.nodes, fn.id);\r\n            if (rfn) {\r\n              rfn.attributes.OutLine.SendConditions =\r\n                obj.node.attributes.OutLine.SendConditions;\r\n            }\r\n          }\r\n          //删除判断节点入线\r\n          for (let c = 0; c < obj.node[\"in\"].length; c++) {\r\n            deleteLines.push(obj.node[\"in\"][c]);\r\n          }\r\n        } else {\r\n          for (let c = 0; c < obj.from.length; c++) {\r\n            let fn = obj.from[c];\r\n            fn.attributes.OutLine.SendConditions = {\r\n              IsEnabled: \"0\",\r\n            };\r\n            let rfn = getObjById(this.nodes, fn.id);\r\n            if (rfn) {\r\n              rfn.attributes.OutLine.SendConditions = {\r\n                IsEnabled: \"0\",\r\n              };\r\n            }\r\n          }\r\n        }\r\n      }\r\n      //删除多余的线\r\n      for (let i = 0; i < deleteLines.length; i++) {\r\n        for (let n = infoCopy.lines.length - 1; n >= 0; n--) {\r\n          if (infoCopy.lines[n].attributes.ID == deleteLines[i]) {\r\n            infoCopy.lines.splice(n, 1);\r\n          }\r\n        }\r\n      }\r\n      //判断节点特殊操作 结束\r\n      for (let i = 0; i < infoCopy.nodes.length; i++) {\r\n        let node = infoCopy.nodes[i];\r\n        if (node.lines) {\r\n          node.lines.forEach((line) => {\r\n            delete line.paper;\r\n          });\r\n        }\r\n        if (node.events) {\r\n          node.events.forEach((node) => {\r\n            node.parentNodeId = node.parentNode.id;\r\n            delete node.parentNode;\r\n          });\r\n        }\r\n        if (node.nodes) {\r\n          node.nodes.forEach((child) => {\r\n            delete child.isRender;\r\n            delete child.edit;\r\n          });\r\n        }\r\n        \r\n        flowTools.forEach(tool => {\r\n          tool.data.forEach(item => {\r\n            if(node.attributes.BaseInfo.Type == item.name) {\r\n              node.attributes.BaseInfo.Type = item.type;\r\n            }\r\n          });\r\n        });\r\n        postData.WorkFlow.NodeList.push(node.attributes);\r\n        node.nodeType = \"node\";\r\n        postData.WorkFlow.ElementList.push(node);\r\n      }\r\n      for (let i = 0; i < infoCopy.lines.length; i++) {\r\n        let line = infoCopy.lines[i];\r\n        delete line.paper;\r\n        postData.WorkFlow.LineList.push(line.attributes);\r\n        //整理传递给后台的保存参数\r\n        delete line.arrowEnd;\r\n        delete line.isRender;\r\n        line.nodeType = \"line\";\r\n        postData.WorkFlow.ElementList.push(line);\r\n      }\r\n      for (let i = 0; i < infoCopy.events.length; i++) {\r\n        let event = infoCopy.events[i];\r\n        postData.WorkFlow.EventList.push(event.attributes);\r\n        //整理传递给后台的保存参数\r\n        event.nodeType = \"event\";\r\n        postData.WorkFlow.ElementList.push(event);\r\n      }\r\n\r\n      for (let i = 0; i < info.lanes.horizontal.length; i++) {\r\n        let lane = info.lanes.horizontal[i];\r\n        let n = deepClone(lane);\r\n        delete n.isRender;\r\n        postData.WorkFlow.LaneList.horizontal.push(lane.attributes);\r\n        n.nodeType = \"lane\";\r\n        postData.WorkFlow.ElementList.push(n);\r\n      }\r\n      for (let i = 0; i < info.lanes.vertical.length; i++) {\r\n        let lane = info.lanes.vertical[i];\r\n        let n = deepClone(lane);\r\n        delete n.isRender;\r\n        postData.WorkFlow.LaneList.vertical.push(lane.attributes);\r\n        n.nodeType = \"lane\";\r\n        postData.WorkFlow.ElementList.push(n);\r\n      }\r\n      const param = {\r\n        sData: JSON.stringify(postData),\r\n      };\r\n      this.$http\r\n        .post(\"wfm/saveWFDefinition\", param, $$webRoot.dsfa)\r\n        .done((result) => {\r\n          if (result.success) {\r\n            dsf.layer.message(\"保存成功\", true);\r\n          } else {\r\n            dsf.layer.message(\"保存失败\", false);\r\n          }\r\n        })\r\n        .error(() => {\r\n          dsf.layer.message(\"保存失败\", false);\r\n        });\r\n    },\r\n    getFlowAllObjectMap(info) {\r\n      var dm = {};\r\n      for (let i = 0; i < info.nodes.length; i++) {\r\n        var node = info.nodes[i];\r\n        dm[node.id] = node;\r\n      }\r\n      for (let i = 0; i < info.lines.length; i++) {\r\n        var line = info.lines[i];\r\n        dm[line.id] = line;\r\n      }\r\n      for (let i = 0; i < info.lanes.horizontal.length; i++) {\r\n        var lane = info.lanes.horizontal[i];\r\n        dm[lane.id] = lane;\r\n      }\r\n      for (let i = 0; i < info.lanes.vertical.length; i++) {\r\n        var lane = info.lanes.vertical[i];\r\n        dm[lane.id] = lane;\r\n      }\r\n      return dm;\r\n    },\r\n    drawLine() {\r\n      this.isDrawLine = !this.isDrawLine;\r\n    },\r\n    resize() {\r\n      const minWidth = this.$store.state.flow.page.width;\r\n      const minHeight = this.$store.state.flow.page.height;\r\n      const width = minWidth || 0;\r\n      const height = minHeight || 0;\r\n\r\n      const lastV = this.lanes.vertical[this.lanes.vertical.length - 1];\r\n      // 水平方向泳道标题的宽度\r\n      const horizontalWidth = this.$store.getters[\"flow/lanesWidth\"];\r\n      // 泳道水平长度超出\r\n      if (lastV && lastV.size + lastV.left + horizontalWidth > width) {\r\n        this.width = lastV.size + lastV.left + horizontalWidth;\r\n      } else {\r\n        this.width = minWidth;\r\n      }\r\n\r\n      const lastH = this.lanes.horizontal[this.lanes.horizontal.length - 1];\r\n      // 垂直方向泳道标题的宽度\r\n      const verticalHeight = this.$store.getters[\"flow/lanesHeight\"];\r\n      // 泳道垂直长度超出\r\n      if (lastH && lastH.size + lastH.top + verticalHeight > height) {\r\n        this.height = lastH.size + lastH.top + verticalHeight;\r\n      } else {\r\n        this.height = minHeight;\r\n      }\r\n\r\n      // 和最长的节点宽度比较\r\n      let maxWidth = 0;\r\n      let maxHeigth = 0;\r\n      this.nodes.forEach((node) => {\r\n        if (node.width + node.point.x + node.padding * 2 > maxWidth) {\r\n          maxWidth = node.width + node.point.x + node.padding * 2;\r\n        }\r\n        if (node.height + node.point.y + node.padding * 2 + 20 > maxHeigth) {\r\n          maxHeigth = node.height + node.point.y + node.padding * 2 + 20;\r\n        }\r\n      });\r\n      this.width = this.width > maxWidth ? this.width : maxWidth;\r\n      this.height = this.height > maxHeigth ? this.height : maxHeigth;\r\n    },\r\n    nodeResize(node) {\r\n      // 和最长的节点宽度比较\r\n      let maxWidth = 0;\r\n      let maxHeigth = 0;\r\n      node.nodes.forEach((item) => {\r\n        if (item.width + item.point.x + item.padding * 2 > maxWidth) {\r\n          maxWidth = item.width + item.point.x + item.padding * 2;\r\n        }\r\n        if (\r\n          item.height +\r\n            item.point.y +\r\n            item.padding * 2 +\r\n            20 +\r\n            node.imgHeight +\r\n            node.padding * 2 >\r\n          maxHeigth\r\n        ) {\r\n          // 节点高度 + 节点纵坐标 + padding + 名称高度 + 父节点占用高度\r\n          maxHeigth =\r\n            item.height +\r\n            item.point.y +\r\n            item.padding * 2 +\r\n            20 +\r\n            node.imgHeight +\r\n            node.padding * 2;\r\n        }\r\n      });\r\n      node.width = node.width > maxWidth ? node.width : maxWidth;\r\n      node.height = node.height > maxHeigth ? node.height : maxHeigth;\r\n      this.$bus.$emit(\"nodeMove\", node);\r\n    },\r\n    autoScroll(arg) {\r\n      let point = null;\r\n      const type = arg.type;\r\n      if (type == \"node\") {\r\n        point = arg.point;\r\n        if (arg.mouse.x > this.width / 2) {\r\n          point.x = point.x + arg.data.width + this.maxSizeOffset;\r\n        } else {\r\n          point.x = point.x;\r\n        }\r\n        if (arg.mouse.y > this.height / 2) {\r\n          point.y = point.y + arg.data.height + this.maxSizeOffset;\r\n        } else {\r\n          point.y = point.y;\r\n        }\r\n      } else if (type == \"line\") {\r\n        point = this.$store.getters[\"flow/getMousePointByCanvas\"]({\r\n          x: arg.mouse.x,\r\n          y: arg.mouse.y,\r\n        });\r\n        if (arg.mouse.x > this.width / 2) {\r\n          point.x = point.x + this.maxSizeOffset;\r\n        } else {\r\n          point.x = point.x - this.maxSizeOffset;\r\n        }\r\n        if (arg.mouse.y > this.height / 2) {\r\n          point.y = point.y + this.maxSizeOffset;\r\n        } else {\r\n          point.y = point.y - this.maxSizeOffset;\r\n        }\r\n      } else if (type == \"lane\") {\r\n        point = this.$store.getters[\"flow/getMousePointByCanvas\"]({\r\n          x: arg.mouse.x,\r\n          y: arg.mouse.y,\r\n        });\r\n        if (arg.mouse.x > this.width / 2) {\r\n          point.x = point.x + this.maxSizeOffset;\r\n        } else {\r\n          point.x = point.x;\r\n        }\r\n        if (arg.mouse.y > this.height / 2) {\r\n          point.y = point.y + this.maxSizeOffset;\r\n        } else {\r\n          point.y = point.y;\r\n        }\r\n      }\r\n      //滚动条自动回滚\r\n      let parentElement = this.$refs.ds_page;\r\n      let size, scrollLeft, scrollTop;\r\n      if (point.x < parentElement.scrollLeft) {\r\n        size = Math.abs(parentElement.scrollLeft - point.x);\r\n        scrollLeft = parentElement.scrollLeft;\r\n        parentElement.scrollLeft = scrollLeft - size / 3;\r\n      }\r\n      if (point.y < parentElement.scrollTop) {\r\n        size = Math.abs(parentElement.scrollTop - point.y);\r\n        scrollTop = parentElement.scrollTop;\r\n        parentElement.scrollTop = scrollTop - size / 3;\r\n      }\r\n      if (point.h < parentElement.scrollTop) {\r\n        size = Math.abs(parentElement.scrollLeft - point.x);\r\n        scrollLeft = parentElement.scrollLeft;\r\n        parentElement.scrollLeft = scrollLeft - size / 3;\r\n      }\r\n      //滚动条自动延伸\r\n      if (point.x > parentElement.clientWidth + parentElement.scrollLeft) {\r\n        this.width = point.x;\r\n        size = Math.abs(\r\n          parentElement.clientWidth + parentElement.scrollLeft - point.x\r\n        );\r\n        scrollLeft = parentElement.scrollLeft;\r\n        parentElement.scrollLeft = scrollLeft + size / 3;\r\n      }\r\n      if (point.y > parentElement.clientHeight + parentElement.scrollTop) {\r\n        this.height = point.y;\r\n        size = Math.abs(\r\n          parentElement.clientHeight + parentElement.scrollTop - point.y\r\n        );\r\n        scrollTop = parentElement.scrollTop;\r\n        parentElement.scrollTop = scrollTop + size / 3;\r\n      }\r\n    },\r\n    parentAutoScroll(arg) {\r\n      // 计算有问题 先不管\r\n      let mouse = arg.mouse;\r\n      let point = arg.point;\r\n      let parent = arg.parent;\r\n      let node = arg.node;\r\n      if (point.x > parent.width + parent.point.x) {\r\n        point.x = point.x + node.width + this.maxSizeOffset;\r\n      } else {\r\n        point.x = point.x;\r\n      }\r\n      if (point.y > parent.height + parent.point.y) {\r\n        point.y = point.y + node.height + this.maxSizeOffset;\r\n      } else {\r\n        point.y = point.y;\r\n      }\r\n      //滚动条自动延伸\r\n      if (point.x > parent.width + 0) {\r\n        parent.width = point.x;\r\n      }\r\n      if (point.y > parent.height + 0) {\r\n        parent.height = point.y;\r\n      }\r\n      this.$bus.$emit(\"nodeMove\", parent);\r\n      this.autoScroll({\r\n        type: \"node\",\r\n        data: parent,\r\n        mouse: {\r\n          x: mouse.x,\r\n          y: mouse.y,\r\n        },\r\n        point: {\r\n          x: point.x,\r\n          y: point.y,\r\n        },\r\n      });\r\n    },\r\n    setCursor(evt) {\r\n      if (evt.target.tagName != \"svg\") {\r\n        var className = evt.target.className || \"\";\r\n        if (evt.target.tagName == \"path\") {\r\n          var segmen = getObjectByTarget(evt.target);\r\n          if (segmen) {\r\n            var mp = this.$store.getters[\"flow/getMousePointByCanvas\"]({\r\n              x: evt.pageX,\r\n              y: evt.pageY,\r\n            });\r\n            if (segmen.type == _LineType.horizontal) {\r\n              if (\r\n                segmen.index == 0 &&\r\n                Math.abs(segmen.sp.x - mp.x) <= this.dragSize\r\n              ) {\r\n                this.setRootCursor(\"move\");\r\n              } else if (\r\n                segmen.isLast &&\r\n                Math.abs(segmen.ep.x - mp.x) <= this.dragSize\r\n              ) {\r\n                this.setRootCursor(\"move\");\r\n              } else {\r\n                this.setRootCursor(\"ns-resize\");\r\n              }\r\n            } else {\r\n              if (\r\n                segmen.index == 0 &&\r\n                Math.abs(segmen.sp.y - mp.y) <= this.dragSize\r\n              ) {\r\n                this.setRootCursor(\"move\");\r\n              } else if (\r\n                segmen.isLast &&\r\n                Math.abs(segmen.ep.y - mp.y) <= this.dragSize\r\n              ) {\r\n                this.setRootCursor(\"move\");\r\n              } else {\r\n                this.setRootCursor(\"ew-resize\");\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        this.setRootCursor(\"default\");\r\n      }\r\n    },\r\n    setRootCursor(type) {\r\n      this.$refs.root.style.cursor = type;\r\n    },\r\n    startGlobalMove(e) {\r\n      //如果按住shift键，则启动全局位移功能\r\n      this.isGlobalPosMove = true;\r\n      this.globalPos = this.$store.getters[\"flow/getMousePointByCanvas\"]({\r\n        x: e.pageX,\r\n        y: e.pageY,\r\n      });\r\n      this.globalMoveLastMouse = {\r\n        x: e.pageX,\r\n        y: e.pageY,\r\n      };\r\n      this.globalRect = this.getRect();\r\n    },\r\n    globalMove(evt) {\r\n      if (this.isGlobalPosMove) {\r\n        const localMouse = {\r\n          x: evt.pageX,\r\n          y: evt.pageY,\r\n        };\r\n        const last_p = getGridPoint(this.globalMoveLastMouse);\r\n        const move_p = getGridPoint(localMouse);\r\n        const current_p = {\r\n          x: move_p.x - last_p.x,\r\n          y: move_p.y - last_p.y,\r\n        };\r\n        const maxWidth = Number.MIN_VALUE,\r\n          maxHeight = Number.MIN_VALUE;\r\n        if (current_p.x == 0 && current_p.y == 0) {\r\n          return false;\r\n        }\r\n        let x_move = false,\r\n          y_move = false;\r\n        if (this.globalRect.x + current_p.x > 0) {\r\n          this.globalRect.x += current_p.x;\r\n          x_move = true;\r\n        }\r\n        if (this.globalRect.y + current_p.y >= 0) {\r\n          this.globalRect.y += current_p.y;\r\n          y_move = true;\r\n        }\r\n        this.$bus.$emit(\"globalMove\", current_p, x_move, y_move, evt);\r\n        this.globalMoveLastMouse = move_p;\r\n        return;\r\n      }\r\n    },\r\n    getRect() {\r\n      let x = Number.MAX_VALUE,\r\n        y = Number.MAX_VALUE,\r\n        width = Number.MIN_VALUE,\r\n        height = Number.MIN_VALUE;\r\n      for (let i = 0; i < this.nodes.length; i++) {\r\n        let node = this.nodes[i];\r\n        if (node.point.x < x) {\r\n          x = node.point.x;\r\n        }\r\n        if (node.point.x + node.width > width) {\r\n          width = node.point.x + node.width;\r\n        }\r\n        if (node.point.y < y) {\r\n          y = node.point.y;\r\n        }\r\n        if (node.point.y + node.height > height) {\r\n          height = node.point.y + node.height;\r\n        }\r\n      }\r\n      for (let i = 0; i < this.lines.length; i++) {\r\n        let line = this.lines[i];\r\n        for (let n = 0; n < line.path.length; n++) {\r\n          if (line.path[n].x < x) {\r\n            x = line.path[n].x;\r\n          }\r\n          if (line.path[n].x > width) {\r\n            width = line.path[n].x;\r\n          }\r\n          if (line.path[n].y < y) {\r\n            y = line.path[n].y;\r\n          }\r\n          if (line.path[n].y > height) {\r\n            height = line.path[n].y;\r\n          }\r\n        }\r\n      }\r\n      return {\r\n        x: x,\r\n        y: y,\r\n        width: width,\r\n        height: height,\r\n      };\r\n    },\r\n    getWheelDirect(e) {\r\n      e = e || window.event;\r\n      let direction;\r\n      if (e.wheelDelta) {\r\n        //判断浏览器IE，谷歌滑轮事件\r\n        if (e.wheelDelta > 0) {\r\n          //当滑轮向上滚动时\r\n          direction = \"up\";\r\n        }\r\n        if (e.wheelDelta < 0) {\r\n          //当滑轮向下滚动时\r\n          direction = \"down\";\r\n        }\r\n      } else if (e.detail) {\r\n        //Firefox滑轮事件\r\n        if (e.detail > 0) {\r\n          //当滑轮向上滚动时\r\n          direction = \"up\";\r\n        }\r\n        if (e.detail < 0) {\r\n          //当滑轮向下滚动时\r\n          direction = \"down\";\r\n        }\r\n      }\r\n      return direction;\r\n    },\r\n    scrollwheel(e) {\r\n      e = e || window.event;\r\n      // if(e.preventDefault && e.ctrlKey) e.preventDefault();\r\n      // if(e.ctrlKey) e.returnValue = false;\r\n      if (e.wheelDelta && e.ctrlKey) {\r\n        e.preventDefault();\r\n        const direction = this.getWheelDirect(e);\r\n        this.rootScale(direction);\r\n      }\r\n    },\r\n    rootScale(direction) {\r\n      if (direction === \"up\") {\r\n        this.scale = Number(\r\n          (this.scale + 0.05 < 2 ? this.scale + 0.05 : 2).toFixed(2)\r\n        );\r\n      } else {\r\n        this.scale = Number(\r\n          (this.scale > 0.4 ? this.scale - 0.05 : 0.4).toFixed(2)\r\n        );\r\n      }\r\n      this.$store.commit(\"flow/setPage\", {\r\n        scale: this.scale,\r\n      });\r\n      this.$store.commit(\"flow/clearPoints\");\r\n    },\r\n    selectGlobalMove(e) {\r\n      if (!this.globalSelect) {\r\n        this.globalSelect = document.createElement(\"div\");\r\n        this.globalSelect.className = \"select-nodes\";\r\n        Object.assign(this.globalSelect.style, {\r\n          zIndex: 9999,\r\n          transform: `translate3d(${this.selectGlobalPos.x / this.scale}px, ${\r\n            this.selectGlobalPos.y / this.scale\r\n          }px, 0)`,\r\n          pointerEvents: \"none\",\r\n        });\r\n        this.$refs.root.appendChild(this.globalSelect);\r\n      }\r\n      if (this.selectGlobalPos) {\r\n        const start = this.selectGlobalPos;\r\n        const end = this.$store.getters[\"flow/getMousePointByCanvas\"]({\r\n          x: e.pageX,\r\n          y: e.pageY,\r\n        });\r\n        let top, left, width, height;\r\n        if (end.x > start.x) {\r\n          left = start.x;\r\n          width = end.x - start.x;\r\n        } else {\r\n          left = end.x;\r\n          width = start.x - end.x;\r\n        }\r\n        if (end.y > start.y) {\r\n          top = start.y;\r\n          height = end.y - start.y;\r\n        } else {\r\n          top = end.y;\r\n          height = start.y - end.y;\r\n        }\r\n        this.selectGlobalPonits.start.x = left / this.scale;\r\n        this.selectGlobalPonits.start.y = top / this.scale;\r\n        this.selectGlobalPonits.end.x = (left + width) / this.scale;\r\n        this.selectGlobalPonits.end.y = (top + height) / this.scale;\r\n        Object.assign(this.globalSelect.style, {\r\n          transform: `translate3d(${left / this.scale}px, ${\r\n            top / this.scale\r\n          }px, 0)`,\r\n          width: this.toPx(width / this.scale),\r\n          height: this.toPx(height / this.scale),\r\n        });\r\n      }\r\n    },\r\n    selectGlobalEnd(e) {\r\n      this.isGlobalSelect = false;\r\n      if (this.globalSelect) {\r\n        const end = this.$store.getters[\"flow/getMousePointByCanvas\"]({\r\n          x: e.pageX,\r\n          y: e.pageY,\r\n        });\r\n        this.$bus.$emit(\r\n          \"selectGlobal\",\r\n          this.selectGlobalPonits.start,\r\n          this.selectGlobalPonits.end\r\n        );\r\n        this.$refs.root.removeChild(this.globalSelect);\r\n        this.globalSelect = null;\r\n      }\r\n    },\r\n    documentCopy(e) {\r\n      const selectedList = this.$store.state.flow.selectedList;\r\n      if (selectedList && selectedList.length > 1) {\r\n        this.ctrlCopyNodes = [...selectedList];\r\n      } else {\r\n        this.ctrlCopyNodes = [this.checked];\r\n      }\r\n    },\r\n    pasteNode(e) {\r\n      let copyNodes = [];\r\n      const { fromNodeIds, toNodeIds, newLines } = this.getBeforeCopyLine(\r\n        this.ctrlCopyNodes\r\n      );\r\n      this.ctrlCopyNodes.forEach((item) => {\r\n        const copyNode = item;\r\n        // 复制一个节点\r\n        const fromCopyId = copyNode.id;\r\n        const point = Object.assign({}, copyNode, {\r\n          id: tools.uuid(),\r\n          out: [],\r\n          in: [],\r\n          x: copyNode.point.x + 10,\r\n          y: copyNode.point.y + 10,\r\n        });\r\n        const newNode = this.copyNodeNext(point, fromCopyId, copyNode);\r\n        this.resetLineFromAndTo(fromNodeIds, toNodeIds, newNode, copyNode);\r\n        copyNodes.push(newNode);\r\n        this.checked = newNode;\r\n      });\r\n      this.copyEventsLines(newLines);\r\n      this.ctrlCopyNodes = copyNodes;\r\n      this.$store.commit(\"flow/setSelectedList\", copyNodes);\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n@import \"_platform/assets/styles/designer/workFlow.scss\";\r\n.flow {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n  .root {\r\n    position: relative;\r\n    min-width: 100%;\r\n    min-height: 100%;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flow.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./flow.vue?vue&type=template&id=19416c7e&\"\nimport script from \"./flow.vue?vue&type=script&lang=js&\"\nexport * from \"./flow.vue?vue&type=script&lang=js&\"\nimport style0 from \"./flow.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lanes.vue?vue&type=style&index=0&id=c192e5b2&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lanes.vue?vue&type=style&index=0&id=c192e5b2&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flowContent.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flowContent.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}