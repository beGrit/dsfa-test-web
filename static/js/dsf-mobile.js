/*! Build time : Mon Jan 18 2021 19:25:36 GMT+0800 (中国标准时间) */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dsf-mobile"],{"0248":function(e,t,a){"use strict";(function(e){a("99af"),a("7db0"),a("a9e3");var i=a("2909"),n=a("55f5"),s={value:"",text:""};t["a"]=dsf.component({name:"DsfMobileRadioBox",mixins:[n["a"]],ctrlCaption:"单选框",props:{value:{type:[Object,String,Number,Boolean],default:function(){return s}},items:{type:Array,default:function(){return[]}},cancel:{type:Boolean,default:!1},isOther:{type:Boolean,default:!1},formatter:{type:String,default:"textValue^text"},metadata:{type:Object,default:function(){return dsf.metadata.get("items-meta-data")}},inputAlign:{type:String,default:"right"},direction:{type:String,default:"horizontal"},iconSize:{type:String,default:"1.43em"},shape:{type:String,default:"round"},labelPosition:{type:String,default:"right"},disabledItemValues:{type:Array,default:function(){return[]}}},data:function(){return{result:{text:"",value:""}}},computed:{$items:function(){var e=this.items||[];return this.isDesign&&!e.length&&(e=[{value:"1",text:"数据1"},{value:"2",text:"数据2"}]),this.isOther?[].concat(Object(i["a"])(e),[{value:"else",text:"其他"}]):e},radioValue:{get:function(){return this.result.value},set:function(e){var t=this,a={text:"",value:""};e&&this.$items.length&&(a=this.$items.find((function(t){return t.value==e}))||{text:"",value:""}),this.result=a,this.emitValueChange(a),this.$nextTick((function(){t.emitFormValidate(a)}))}}},watch:{value:function(e){this.initValue(e)}},created:function(){this.initValue(this.value)},methods:{initValue:function(t){if(!(this.simple||this.readOnly||this.isDesign||e.isEqual(t,this.result))){var a=dsf.type(t);if("object"==a&&(t=t.value,a="string"),dsf.isUnDef(t))this.radioValue=null;else if("string"==a||"number"==a||"boolean"==a){var i=this.$items.find((function(e){return e.value==t}));i?(this.result=i,this.emitValueChange(i)):this.radioValue=null}else this.radioValue=null}},change:function(){this.$dispatch("change",this.value)}}})}).call(this,a("2ef0"))},"070e":function(e,t,a){"use strict";(function(e){a("99af"),a("b0c0"),a("a9e3"),a("4795");var i=a("2909"),n=a("3893"),s=a("9501");t["a"]=dsf.component({name:"DsfMobilePage",ctrlCaption:"移动端页面",mixins:[n["a"],s["a"]],data:function(){var e;return{gotoIcon:"1"==dsf.config.setting_public_gotoIcon,headHeight:0,footHeight:0,footInnerHeight:0,bottomSafeAreaHeight:0,centerHeight:"auto",headerStyle:{},footerStyle:{},leftAndRIghtStyle:{},containerHeight:0,containerWidth:0,isShowNavsBar:null===this||void 0===this||null===(e=this.$app)||void 0===e?void 0:e.isShowNavsBar}},props:{formItemLabelWidth:{type:Number,default:120},slots:{type:Array,default:function(){return[{name:"center",controls:[]},{name:"head",controls:[]},{name:"foot",controls:[]}]}},pageLevel:{type:Number,default:1},isKeepAlive:{type:Boolean,default:!1},bottomSafeArea:{type:Boolean,default:!0}},beforeCreate:function(){},computed:{$bottomSafeArea:function(){var e=this.isDesign,t=this.footInnerHeight;if(!e){var a=this.isShowNavsBar,i=this.bottomSafeArea,n=!a&&i;if(t>1&&n)return!0}return!1},splitWidth:function(){return"split-small"==this.leftRight?5:"split-medium"==this.leftRight?10:"split-big"==this.leftRight?15:0},splitWidthHorizontal:function(){return"split-small"==this.topBottom?"split-horizontal--8":"split-medium"==this.topBottom?"split-horizontal--10":"split-big"==this.topBottom?"split-horizontal--15":void 0},getCss:function(){return[].concat(Object(i["a"])(this.$getClass()),["1"===this.fit||!0===this.fit?"fit":""])},pageStyle:function(){var e=this.headHeight,t=this.footHeight;return this.isDesign||(e=e,t=t||0),{"padding-top":e+"px","padding-bottom":t+"px"}},pageContentStyle:function(){var e=0,t=0;return{"padding-left":this.pxToRem(e),"padding-right":this.pxToRem(t),width:this.isDesign?"auto":"100%"!=this.pageWidth&&this.pageWidth?this.pageWidth:"auto",margin:"auto"}},pageCenterCss:function(){return[this.isDesign?"":this.splitWidthHorizontal]},hasFootInner:function(){return this.footInnerHeight>1},footInnerStyle:function(){return{visibility:this.hasFootInner?"visible":"hidden"}}},created:function(){},destroyed:function(){},beforeDestroy:function(){this.$refs.eleDesgin&&this.$refs.eleDesgin.parentNode&&this.$refs.eleDesgin.parentNode.removeChild(this.$refs.eleDesgin)},beforeMount:function(){},mounted:function(){this.isDesign&&(this.watchCenterHeight(),this.resize()),this.$refs.eleDesgin&&document.body.append(this.$refs.eleDesgin)},updated:function(){},methods:{watchCenterHeight:function(){this.setCenterHeight(),window.setTimeout(this.watchCenterHeight,500)},setCenterHeight:function(){var e=this.$refs.head?this.$refs.head:null,t=this.$refs.foot?this.$refs.foot:null,a=this.$refs.footInner?this.$refs.footInner:null;this.headHeight=e&&e.offsetHeight>1?e.offsetHeight:0,this.footHeight=t&&t.offsetHeight>1?t.offsetHeight:0,this.footInnerHeight=a&&a.offsetHeight>1?a.offsetHeight:0},setleftAndRightStyle:function(){if(this.$el){var e={},t=this.containerHeight-this.headHeight-this.footHeight;e.height=this.pxToRem(t),e["margin-top"]=this.pxToRem(this.headHeight),this.leftAndRIghtStyle=e}},setContainerSize:function(){if(this.$el){var t=e(this.$el.parentNode);this.containerHeight=t.innerHeight(),this.containerWidth=t.innerWidth()}},resize:function(){this.setContainerSize(),this.setCenterHeight()},gotoPreview:function(){var e=this.$refs.eleDesgin.getAttribute("data-flag");if("true"===e){var t="".concat(dsf.url.getWebPath("~/designer.html#/mobile/page?B="+this.context.B+"&M="+this.context.M+"&pname="+this.name+"&title="+this.title));window.open(t)}}}})}).call(this,a("1157"))},"104d":function(e,t,a){"use strict";(function(e){a("a9e3"),a("ac1f"),a("5319");var i=a("3835"),n=a("55f5"),s=a("8c37");t["a"]=dsf.component({name:"DsfMobileDateIntervalPicker",mixins:[n["a"],s["a"]],ctrlCaption:"日期区间",props:{value:{type:Object,default:function(){return{sdate:"",edate:""}}},labelS:{type:String,default:"开始日期"},labelE:{type:String,default:"结束日期"},placeholder:{type:String,default:"请选择"},clearable:{type:Boolean,default:!1},pickerInitDate:{type:Number,default:null},chooseType:{type:String,default:"date"},pickerStepType:{type:String,default:"day"},timeInter:{type:Array,default:function(){return["00:00:00","23:59:59"]}},timeFormat:{type:String,default:"yyyy-MM-dd"},formatter:{type:String,default:"dateTime^yyyy-mm-dd"},inputAlign:{type:String,default:"right"},hasIcon:{type:Boolean,default:!0},metadata:{type:Object,default:function(){return dsf.metadata.get("date-interval-meta-data")}}},data:function(){return{currentDate:null,showPicker:!1}},computed:{attr:function(){var e={labelWidth:this.getLabelWidth(!0),placeholder:this.placeholder,disabled:this.disabled,readonly:!0};return this.readOnly?e.inputAlign="left":(e.inputAlign=this.inputAlign,e.required=this.required,this.hasIcon&&(e.rightIcon="notes-o")),e},events:function(){var e={};return this.readOnly||this.disabled||(e.click=this.fieldClick),e},$timeFormat:function(){var e=this.timeFormat.replace(/M/g,"m");return"datetime"===this.chooseType?e+" hh:ii":"datetime_s"===this.chooseType?e+" hh:ii:ss":e},valueFormat:function(){return"datetime"===this.chooseType?"yyyy-mm-dd hh:ii":"datetime_s"===this.chooseType?"yyyy-mm-dd hh:ii:ss":"yyyy-mm-dd"}},watch:{value:function(e){this.initValue(e)}},created:function(){this.initValue(this.value)},methods:{initValue:function(t){this.simple||this.readOnly||this.isDesign||dsf.isUnDef(t)||e.isEqual(t,this.valueCopy)||(t&&t.sdate&&t.edate&&""!==t.sdate&&""!==t.edate?this.currentDate=[dsf.date.parse(t.sdate,this.valueFormat),dsf.date.parse(t.edate,this.valueFormat)]:this.currentDate=[])},fieldClick:function(){this.showPicker=!0},onConfirm:function(e){var t=this,a=e||["",""],n=Object(i["a"])(a,2),s=n[0],o=n[1];console.log(s,o),this.showPicker=!1;var l={sdate:dsf.date.format(s,this.valueFormat),edate:dsf.date.format(o,this.valueFormat)};this.emitValueChange(l),this.$dispatch("change",l),this.$nextTick((function(){t.emitFormValidate(l)}))}}})}).call(this,a("2ef0"))},"162d":function(e,t,a){"use strict";function i(e){}t["a"]=i,"undefined"!==typeof window&&window.Vue&&i(window.Vue)},2104:function(e,t,a){},"2a0a":function(e,t,a){"use strict";(function(e){a("4de4"),a("c740");t["a"]={provide:function(){return{$isMobile:!0,$app:this}},mixins:[],data:function(){return{themes:dsf.config.setting_public_default_theme,transitionName:"",controlName:"router-view",cachePages:this.$store.state.keepAlive.include,noCachePages:this.$store.state.keepAlive.exclude,navBarTitle:"",max:10}},computed:{isDemo:function(){return this.$root.isDemo},navs:function(){return this.$root.navs||[]},isShowNavsBar:function(){if(this.navs.length<=1)return!1;var t=this.$route,a=e.filter(this.navs,(function(e){var a=dsf.url.anchorToRoutePath(e.href);return a==t.path}));return a.length>0}},watch:{$route:{handler:function(t,a){this.$route;var i=e.findIndex(this.navs,(function(e){var a=dsf.url.anchorToRoutePath(e.href);return a==t.path})),n=e.findIndex(this.navs,(function(e){var t=dsf.url.anchorToRoutePath(e.href);return t==(null===a||void 0===a?void 0:a.path)||""}));i>=0&&n>=0?this.transitionName="":a&&"/"!=a.path?this.transitionName=window.$$state.pageDirection:this.transitionName="",this.cachePages=this.$store.state.keepAlive.include,this.noCachePages=this.$store.state.keepAlive.exclude},immediate:!0}},beforeCreate:function(){},created:function(){document.body.classList.add(this.themes)},mounted:function(){},methods:{}}}).call(this,a("2ef0"))},"34d7":function(e,t,a){"use strict";(function(e){a("4160"),a("caad"),a("a434"),a("b0c0"),a("a9e3"),a("b680"),a("e25e"),a("ac1f"),a("2532"),a("1276"),a("159b");var i=a("55f5");t["a"]=dsf.component({name:"DsfMobileUploadImg",mixins:[i["a"]],ctrlCaption:"图片上传",props:{simple:{type:Boolean,default:!1},showLabel:{type:Boolean,default:!0},label:{type:String,default:"图片上传"},multiple:{type:Boolean,default:!0},uploadFileNum:{type:[Number,String],default:5},uploadFileSize:{type:[Number,String],default:1024e3},required:{type:Boolean,default:!1},requestUrl:{type:String,default:""},isCutPic:{type:Boolean,default:!0},aspectRatio:{type:String,default:""},uploadFileExts:{type:String,default:".jpg,.jpeg,.png,.gif"},extsSetting:{type:Object,default:function(){return{}}},metadata:{type:Object,default:function(){return dsf.metadata.get("photo-meta-data")}}},data:function(){return{previewPopup:!1,filePath:"",fileListCopy:[],uploadFileType:"image/*",acceptMime:"",editImg:!1,editFileImg:{},cropper:""}},computed:{setRequestUrl:function(){return dsf.url.getWebPath(this.requestUrl||"file/upload/")}},watch:{value:function(e){this.initValue(e)}},created:function(){this.initValue(this.value),this.rebuildDialogData()},methods:{initValue:function(e){"string"==dsf.type(e)&&(this.fileListCopy=JSON.parse(e))},beforeDelete:function(e,t){var a=this;dsf.layer.confirm("确定要删除【".concat(e.originalFileName,"】文件吗?")).then((function(){var e=JSON.parse(JSON.stringify(a.fileListCopy));e.splice(t.index,1),a.emitValueChange(JSON.stringify(e))})).catch((function(e){return e}))},afterRead:function(t){var a=this,i=this;t.length||(t=[t]);var n=this.fileListCopy.length-t.length;e.forEach(t,(function(e,t){var s=new FormData;s.append("file",e.file),i.$http.post(a.setRequestUrl,s,{headers:{"Content-Type":"multipart/form-data"}}).done((function(e){if(e.success&&2e4==e.state){var i=e.data[0],s=JSON.parse(JSON.stringify(a.fileListCopy));i.url=i.absolutePath,s[0]=e.data[0],s[t+n]=e.data[0],a.emitValueChange(JSON.stringify(s))}})).catch((function(e){dsf.layer.message(e.message,!1)}))}))},beforeRead:function(t){var a=this;return t.length||(t=[t]),e.forEach(t,(function(e){if(!a.uploadFileExts.includes(e.name.split(".")[1].toLowerCase()))return dsf.layer.message("请选择包含这些格式的文件：".concat(a.uploadFileExts),!1),!1})),!0},computeFileSize:function(e){var t="";return t=parseInt(e)>105e4?(e/Math.pow(1024,2)).toFixed(2)+"M":(e/Math.pow(1024,1)).toFixed(2)+"K",t},rebuildDialogData:function(){if(this.extsSetting.extStr){var e=this.extsSetting;this.uploadFileType=e.fileType,this.isLinkeMine=e.isLinkeMine,this.uploadFileExts=e.extStr,this.acceptMime=e.mineStr}}}})}).call(this,a("2ef0"))},"3aa5":function(e,t,a){"use strict";(function(e){a("99af"),a("4160"),a("caad"),a("a434"),a("b0c0"),a("a9e3"),a("b680"),a("e25e"),a("ac1f"),a("2532"),a("1276"),a("159b");var i=a("55f5");t["a"]=dsf.component({name:"DsfMobileUploadFile",mixins:[i["a"]],ctrlCaption:"文件上传",props:{simple:{type:Boolean,default:!1},showLabel:{type:Boolean,default:!0},formatter:{type:String,default:"multipleFiles^originalFileName"},label:{type:String,default:"文件上传"},multiple:{type:Boolean,default:!0},uploadFileNum:{type:[Number,String],default:5},uploadFileSize:{type:[Number,String],default:1024e3},zipFileName:{type:String,default:""},required:{type:Boolean,default:!1},requestUrl:{type:String,default:""},extsSetting:{type:Object,default:function(){return{}}},metadata:{type:Object,default:function(){return dsf.metadata.get("file-meta-data")}}},data:function(){return{previewPopup:!1,filePath:"",fileListCopy:[],uploadFileType:"file",uploadFileExts:"",acceptMime:""}},computed:{setRequestUrl:function(){return dsf.url.getWebPath(this.requestUrl||"file/upload/")}},watch:{value:function(e){this.initValue(e)}},created:function(){this.initValue(this.value),this.rebuildDialogData()},methods:{initValue:function(e){"string"==dsf.type(e)&&(this.fileListCopy=JSON.parse(e))},beforeDelete:function(e,t){var a=this;dsf.layer.confirm("确定要删除【".concat(e.originalFileName,"】文件吗?")).then((function(){var e=JSON.parse(JSON.stringify(a.fileListCopy));e.splice(t.index,1),a.emitValueChange(JSON.stringify(e))})).catch((function(e){return e}))},onOversize:function(e){var t=!this.uploadFileSize||e.size<this.uploadFileSize;if(!t)return dsf.layer.message("文件大小不能超过".concat(this.computeFileSize(this.uploadFileSize)),!1),!1},afterRead:function(t){var a=this,i=this;t.length||(t=[t]);var n=this.fileListCopy.length-t.length;e.forEach(t,(function(e,t){var s=new FormData;s.append("file",e.file),i.$http.post(a.setRequestUrl,s,{headers:{"Content-Type":"multipart/form-data"}}).done((function(e){if(e.success&&2e4==e.state){var i=JSON.parse(JSON.stringify(a.fileListCopy));i[t+n]=e.data[0],a.emitValueChange(JSON.stringify(i))}})).catch((function(e){dsf.layer.message(e.message,!1)}))}))},beforeRead:function(t){var a=this;return t.length||(t=[t]),this.uploadFileExts&&e.forEach(t,(function(e){if(!a.uploadFileExts.includes(e.name.split(".")[1].toLowerCase()))return dsf.layer.message("请选择包含这些格式的文件：".concat(a.uploadFileExts),!1),!1})),!0},handleColumnClick:function(e,t,a){var i=this,n={view:function(){var e=dsf.url.getWebPath("preview/file"),a=dsf.config.setting_public_file_host,n=t.relativePath;i.filePath="".concat(e,"?url=").concat(a).concat(n),i.$openDialog({title:t.originalFileName||t.name,template:"<iframe :src=\"'".concat(i.filePath,'\'" width="100%" height="100%" frameborder="0"></iframe>'),height:"100vh",width:"100vw",position:"right"})}};n[e]&&n[e]()},computeFileSize:function(e){var t="";return t=parseInt(e)>105e4?(e/Math.pow(1024,2)).toFixed(2)+"M":(e/Math.pow(1024,1)).toFixed(2)+"K",t},rebuildDialogData:function(){if(this.extsSetting.extStr){var e=this.extsSetting;this.uploadFileType=e.fileType,this.isLinkeMine=e.isLinkeMine,this.uploadFileExts=e.extStr,this.acceptMime=e.mineStr}}}})}).call(this,a("2ef0"))},"4dbe":function(e,t,a){"use strict";(function(e){a("99af"),a("4160"),a("ac1f"),a("1276"),a("159b");var i=a("3835"),n=(a("96cf"),a("1da1")),s={flowSend:function(e,t,a){var i=this,n=t.targetButton,s=t._self,o=n.line,l=this.$vm.flows.flowInfo;if(l){var r=l.chooseFlow.dsfa_rm_id;if(r){var u=Object.assign({},dsf.removePoint(this.$vm.$viewData),this.$route.query),c="wfr/batchStartSend",d={sObjects:JSON.stringify(a),sWFID:r,sCurNodeID:"",sExInfos:JSON.stringify(u)};if(this.$route.query.sPID||s.$vm.$dialog){c="wfr/batchSend";var h=[];a.forEach((function(e){h.push({PID:s.$vm.$dialog?e.sPID:i.$route.query.sPID,LinkID:s.$vm.$dialog?e.sCurLinkID:i.$route.query.sCurLinkID||""})})),d.sObjects=JSON.stringify(h)}if(this.$vm&&this.$vm.flows&&this.$vm.flows.disposeIdea){var f=this.$vm.flows.disposeIdea;d.sOpinion={Content:f.inputValue,Attachments:f.multipleFiles},d.sOpinion=JSON.stringify(d.sOpinion)}o&&(d.sLineIDs=o.LineID);var p={param:d,url:c};this.$http.post(p.url,p.param).then((function(e){i.handler(e)})).catch((function(e){dsf.layer.message("发送异常",!1),i._RequestID=null}))}else dsf.layer.message("请先配置流程信息控件的'选择流程'",!1)}else dsf.layer.message("请先配置流程信息控件的'选择流程'",!1)},handler:function(e){if(2e4==e.data.state){var t=e.data.data;if(this._RequestID=t.RequestID,2e4==t.Code||20001==t.Code||20003==t.Code||20004==t.Code||20005==t.Code)this.$vm&&this.$vm.$dialog?this.$vm.$dialog.openerVm.reloadData():this.$vm.$openerVm?this.$vm.$openerVm&&this.$vm.$openerVm.reloadData&&this.$vm.$openerVm.reloadData():this.$vm.openerVm&&this.$vm.openerVm.reloadData&&this.$vm.openerVm.reloadData(),this.flowSendOverEvent?this.$dispatch(this.flowSendOverEvent):this.directlySend(t);else if(81e3==t.Code)this.chooseSendNode(t);else if(82e3==t.Code)this.chooseSendTree(t);else{var a=null,i=t.Code;switch(i){case 20006:a="流程已被销毁";break;case 20007:a="流程已被强制办结";break;case 91e3:a="无后续可发送节点";break;case 92e3:a="无可选的发送对象";break;case 92001:a="该环节只允许发送给一人，但是必选项超过一个";break;case 92002:a="未找到继承环节";break;case 92003:a="对象超出可发送范围";break;case 92004:a="路径超出可发送范围";break;case 93e3:a="该事项已被处理";break;case 93001:a="保存流转情况信息失败";break;case 93002:a="保存流转环节信息失败";break;case 93003:a="该文件已被其他人签收";break;case 94001:a="与分支不能设置办结节点";break;case 95001:a="没有可回收的环节";break;case 95002:a="回收环节已接收或已处理，无法回收";break;case 95003:a="未填写退回原因";break;case 99e3:a="获取数据锁失败";break}dsf.layer.message(a||"未知流程类型发送",!1)}}else this._RequestID=null,dsf.layer.message("发送异常",!1)},directlySend:function(t){var a=this,i=[];if(2e4==t.Code){var n;if(t.BatchResults)return dsf.layer.message("发送成功"),window.$isMobile?(this.$router.go(-1),!0):void(this.$vm.$dialog?(this.$vm.$dialog.openerVm.reloadData(),this.$vm.$dialog.close()):window.opener&&window.close());var s=t.Links;s.forEach((function(e,t){if(0==e.Status&&e.LinkUser){var a=e.LinkUser,n=e.LinkUser.Type;1==n?i.push(a.UserName):2==n?i.push("".concat(a.DeptName,"-").concat(a.RoleName)):3==n?i.push(a.JobName):4==n&&i.push("".concat(a.UserName,"-").concat(a.RelationName))}})),dsf.layer.openDialog({type:"dialog",title:"流程已发送到以下人员：",width:"300px",height:"100px",content:"SendFlowDialog",params:{list:e.uniq(i),showCountDown:!this.$vm.$dialog,countDownTime:null===(n=this.$vm.flows.flowInfo)||void 0===n?void 0:n.countDown},btns:[{text:"确定",class:"sendFlow",handler:function(e){return window.$isMobile?(a.$router.go(-1),!0):(a.$vm.$dialog?(a.$vm.$dialog.openerVm.reloadData(),a.$vm.$dialog.close()):window.opener&&window.close(),!0)}}]})}else{var o,l="发送成功",r=t.Code;switch(r){case 20004:l="文件已办结";break;case 20005:l="文件已办结";break}dsf.layer.openDialog({type:"dialog",title:"提示",width:"300px",height:"100px",content:"SendFlowDialog",params:{msg:l,countDownTime:null===(o=this.$vm.flows.flowInfo)||void 0===o?void 0:o.countDown},btns:[{text:"确定",class:"sendFlow",handler:function(e){return window.$isMobile?(a.$router.go(-1),!0):(a.$vm.$dialog?(a.$vm.$dialog.openerVm.reloadData(),a.$vm.$dialog.close()):window.opener&&window.close(),!0)}}]})}},chooseSendNode:function(e){var t=this;dsf.layer.openDialog({type:"dialog",title:"请选择要发送的环节：",width:"300px",height:"180px",overflow:"hidden",content:"DsfMobileChooseSendNode",params:{lines:e.SendParams.Lines,callback:this.handler.bind(this),requestID:this._RequestID,type:"next",isBatch:!0},btns:[{class:"close-send-node van-dialog__cancel",text:"取消"},{text:"确定",class:"hide choose-send-node van-dialog__confirm",handler:function(e){if(e.validate()){var a=e.yes(),i={sRequestID:t._RequestID,sLineID:a.LineID};return t.$http.post("wfr/batchSendToLine",i).then((function(e){2e4==e.data.state&&t.handler(e)})),!0}return!1}}]})},chooseSendTree:function(e){var t=this;dsf.layer.openDialog({type:"dialog",title:"请选择办理人",fullscreen:!0,width:"100vw",height:"100vh",class:"work_flow-usersDialog",content:"DsfMobileChooseUsers",btnPosition:"bottom",params:{lines:e.SendParams.Lines},btns:[{text:"取消"},{text:"确定",handler:function(e){if(e.validate()){var a=e.yes(),i={sRequestID:t._RequestID,sReceivers:a};t.$http.post("wfr/batchSendToReceivers",i).then((function(e){2e4==e.data.state&&t.handler(e)}));var n=document.querySelector(".close-send-node");return n&&n.click(),!0}return!1}}]})}},o=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,n,o,l,r,u,c,d,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t._self.$form,!a){e.next=7;break}return n={isSilent:!0,isRefresh:!1,savedClose:!1,successMsg:"",errorMsg:""},e.next=5,a.formSave(n);case 5:o=e.sent,o&&o.data&&(l=[],t._self.$vm.$dialog?(r=t._self.$vm.$dialog.dialogArgs&&t._self.$vm.$dialog.dialogArgs.data||[],l=r):(u=Object(i["a"])(t.params,3),c=u[0],d=u[1],h=u[2],c=c.split(","),d=d.split(","),h=h.split(","),c.forEach((function(e,t){o.data[e].forEach((function(e){l.push({ObjectID:e[d[t]||d[0]],ObjectName:e[h[t]||h[0]]})}))}))),Object.assign(t._self,s),t._self.flowSend(o,t,l));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t["a"]=o}).call(this,a("2ef0"))},"4f52":function(e,t,a){"use strict";(function(e){a("99af"),a("4160"),a("a15b"),a("fb6a"),a("ac1f"),a("1276"),a("159b");t["a"]={name:"ChooseUsersDialog",data:function(){return{data:[],show:!1,message:"",loader:null,tpls:[],resolve:function(){},back:function(){},acceptTypes:[".doc,.docx,.xml,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/*"],acceptsType:"",uploaderData:[],previewing:!1,filePath:"",isFristSend:!1,isShowBack:!1}},created:function(){this.getTemplate()},methods:{showFun:function(e,t,a,i){if(this.isShowBack=i,this.isFristSend=!!e._isFristSend,this.show=!0,this.data=[],e&&e.SendParams&&e.SendParams.Lines&&e.SendParams.Lines.length){var n=e.SendParams.Lines;for(var s in n){var o=n[s];this.data.push({name:o.Name,id:o.LineID,users:[],selects:{},sNum:0,MultiplayerEnabled:o.MultiplayerEnabled}),o.Selected&&this.getUserData(o.Receivers.Dept,null,this.data.length-1)}}if(this.data.length>0){var l=0,r=0;for(var u in this.data){var c=this.data[u];if(c.sNum>0){r=-1;break}1==c.users.length&&(r=u),l+=c.users.length}if(1==l&&-1!=r){var d=this.data[r].users[0];d.isSelect=!0,this.data[r]["selects"][d.ID]=d,this.data[r]["sNum"]++}}t&&(this.resolve=t),a&&(this.back=a)},getLinkName:function(e){var t=e.split("→");return t[t.length-1]},getUserData:function(e,t,a){for(var i in e.Objs&&(e.ChildDepts=e.ChildDepts.concat(e.Objs)),0!=e.Type&&(1*e.Selected>0&&(this.data[a]["selects"][e.ID]=e,this.data[a]["sNum"]++,e.isSelect=!0),e["index"]=this.data[a]["users"].length,this.data[a]["users"].push(e)),e.ChildDepts)this.getUserData(e.ChildDepts[i],e,a)},getTemplate:function(){var e=this,t=dsf.layer.loading(),a="";this.$http.get("wfr/getOpinionKeyWord",{}).done((function(t){t.success?e.tpls=t.data||[]:a="获取意见模板，请求异常"})).error((function(e){a="获取意见模板，服务器异常"})).always((function(){dsf.layer.closeLoading(t),a&&dsf.layer.toast(a,!1)}))},changeUser:function(e,t,a){var i=!1;if(!a.MultiplayerEnabled)for(var n in a["selects"]){var s=a["selects"][n];1*s.Selected==2?i=!0:(a["selects"]={},a.users[s.index]["isSelect"]=!1)}i||1*e.Selected!=2&&(e.isSelect=!e.isSelect,e.isSelect?a["selects"][e.ID]=e:delete a["selects"][e.ID],this.$set(a["users"],t,e))},goBack:function(){this.back(),this.show=!1},submit:function(){var e=[],t=0;for(var a in this.data){var i=this.data[a],n="";for(var s in i.selects)n+=(n?",":"")+s;n&&(e[t]=i.id+":"+n,t++)}if(0==t)dsf.layer.toast("请选择",!1);else{var o=[];for(var l in this.uploaderData){var r=this.uploaderData[l];o.push(r.data)}this.resolve(e.join(";"),this.message,o)}},uploader:function(e){var t=this;this.acceptsType=this.acceptTypes[e],this.$nextTick((function(){t.$refs.uploader.chooseFile()}))},uploaderAfterRead:function(t){var a=this;t.length||(t=[t]),e.forEach(t,(function(e){e.status="uploading",e.message="上传中...";var t=!1,i=new FormData;i.append("file",e.file),a.$http.post("file/upload",i,{headers:{"Content-Type":"multipart/form-data"}}).done((function(a){"20000"==a.state?(e.status="done",e.data=a.data[0]):t=a.message||!0})).error((function(e){t=e.message||!0})).always((function(){t&&(e.status="failed",e.message="上传失败",e._message=t)}))}))},preview:function(e){e&&e.data&&e.data.contentType&&"image"!==e.data.contentType.slice(0,5)&&(this.filePath=dsf.config.webRoot+"preview/file?fileId="+e.data.id,this.previewing=!0)}}}}).call(this,a("2ef0"))},"4ff8":function(e,t,a){"use strict";(function(e){a("7db0"),a("c740"),a("4160"),a("d81d"),a("a9e3"),a("159b");var i=a("55f5");t["a"]=dsf.component({name:"DsfMobileSelect",mixins:[i["a"]],ctrlCaption:"下拉框",props:{value:{type:[Object,String,Number,Array],required:!1},items:{type:Array,default:function(){return[]}},placeholder:{type:String,default:"请选择"},formatter:{type:String,default:"textValue^text"},metadata:{type:Object,default:function(){return dsf.metadata.get("items-meta-data")}},multiple:{type:Boolean,default:!1},inputAlign:{type:String,default:"right"},hasIcon:{type:Boolean,default:!0},collapseTags:{type:Boolean,default:!1}},data:function(){return{valueCopy:{value:"",text:""},showPicker:!1}},computed:{attr:function(){var e={labelWidth:this.getLabelWidth(!0),label:this.showLabel&&this.label||"",value:this.text,placeholder:this.placeholder,disabled:this.disabled,readonly:!0};return this.readOnly?e.inputAlign="left":(e.inputAlign=this.inputAlign,e.required=this.required,this.hasIcon&&(e.rightIcon="arrow")),e},events:function(){var e={};return this.readOnly||this.disabled||(e.click=this.fieldClick),e},text:function(){return this.value&&this.value.text||""},$items:function(){return this.items||[]},valueProxy:function(){return!this.value||!this.multiple||this.value.length<2?this.value:{value:this.value[0].value+"(+"+(this.value.length-1)+")",text:this.value[0].text+"(+"+(this.value.length-1)+")"}}},watch:{value:{immediate:!0,handler:function(e){this.initValue(e)}}},created:function(){},methods:{initValue:function(t){var a=this;if(!(this.simple||this.readOnly||this.isDesign||dsf.isUnDef(t)||e.isEqual(t,this.valueCopy))){var i=null,n=dsf.type(t);if(this.multiple){var s=[];"object"==n&&t.value?s=[t.value]:"array"==n?t.forEach((function(e){"string"==dsf.type(e)||"number"==dsf.type(e)?s.push(e):"object"==dsf.type(e)&&e.value&&s.push(e.value)})):s=[t],this.$refs.picker?this.$refs.picker.setValues(s):s.length&&(i=[],s.forEach((function(e){var t=a.$items.find((function(t){return t.value==e}));t&&i.push(t)})))}else if("array"==n&&t.length&&(t=t[0],n=dsf.type(t)),"Object"==n&&t.value&&(t=t.value),dsf.isDef(t)){var o,l=this.$items.findIndex((function(e){return e.value==t.value}));if(l>-1)null===(o=this.$refs.picker)||void 0===o||o.setIndexes([l]),i=this.$items[l];else i={value:"",text:""}}else i={value:"",text:""};this.$refs.picker&&(i=this.$refs.picker.getValues(),this.multiple||(i=i[0])),this.valueCopy=i,this.emitValueChange(i)}},fieldClick:function(){var e=this;if(!this.readOnly){var t=!!this.$refs.picker;this.showPicker=!0,t||this.$nextTick((function(){e.$refs.picker&&(e.multiple&&e.valueCopy.length?e.$refs.picker.setValues(e.valueCopy.map((function(e){return e.value}))):e.$refs.picker.setValues([e.valueCopy.text]))}))}},onConfirm:function(e,t){var a=this;this.showPicker=!1,this.valueCopy=e,this.emitValueChange(e),this.$dispatch("change",e,t),this.$nextTick((function(){a.emitFormValidate(e)}))}}})}).call(this,a("2ef0"))},"515f":function(e,t,a){"use strict";(function(e){a("4160"),a("c975"),a("fb6a"),a("a434"),a("159b");var i=a("55f5"),n=a("13d2");t["a"]=dsf.component({name:"DsfMobileDisposeIdea",ctrlCaption:"处理意见",mixins:[i["a"],n["a"]],data:function(){return{showOptions:!1,sPID:0,sCurLinkID:0,multipleFiles:[],options:[],isSave:!0,inputValue:"",acceptTypes:[".doc,.docx,.xml,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/*"],acceptsType:"",uploaderData:[],previewing:!1,filePath:""}},methods:{uploader:function(e){var t=this;this.acceptsType=this.acceptTypes[e],this.$nextTick((function(){t.$refs.uploader.chooseFile()}))},uploaderAfterRead:function(t){var a=this;t.length||(t=[t]),e.forEach(t,(function(e){e.status="uploading",e.message="上传中...";var t=!1,i=new FormData;i.append("file",e.file),a.$http.post("file/upload",i,{headers:{"Content-Type":"multipart/form-data"}}).done((function(i){"20000"==i.state?(e.status="done",e.data=i.data[0],a.multipleFiles.push(i.data[0])):t=i.message||!0})).error((function(e){t=e.message||!0})).always((function(){t&&(e.status="failed",e.message="上传失败",e._message=t)}))}))},preview:function(e){e&&e.data&&e.data.contentType&&"image"!==e.data.contentType.slice(0,5)&&(this.filePath=dsf.config.webRoot+"preview/file?fileId="+e.data.id,this.previewing=!0)},deleteFile:function(e){this.multipleFiles.splice(this.multipleFiles.indexOf(e.data),1)}}})}).call(this,a("2ef0"))},"53d8":function(e,t,a){"use strict";(function(e){a("c740");t["a"]={name:"DsfMobileButtonNav",ctrlCaption:"自定义组件",props:{buttons:{type:Array,default:function(){return[]}}},data:function(){return{active:0}},computed:{},watch:{$route:function(e,t){this.matchUrl(e)}},created:function(){this.matchUrl(this.$route)},beforeCreate:function(){},beforeMount:function(){},mounted:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{matchUrl:function(e){this.setActive(e.path)},setActive:function(t){var a=this,i=e.findIndex(this.buttons,(function(e){return a.urlSome(e.href,t)}));i>=0&&(this.active=i)},go:function(e){this.urlSome(this.$route.path,e)||(e=dsf.url.anchorToRoutePath(e),this.$router.push({path:e}))},urlSome:function(e,t){return e=dsf.url.anchorToRoutePath(e),t=dsf.url.anchorToRoutePath(t),e==t}}}}).call(this,a("2ef0"))},"5f0d":function(e,t,a){},"61a6":function(e,t,a){},6222:function(e,t,a){"use strict";(function(e){a("a9e3"),a("ac1f"),a("5319");var i=a("55f5"),n=a("8c37");t["a"]=dsf.component({name:"DsfMobileDatePicker",mixins:[i["a"],n["a"]],ctrlCaption:"日期选择",props:{value:{type:String,default:""},label:{type:String,default:"日期选择"},placeholder:{type:String,default:"请选择"},clearable:{type:Boolean,default:!1},pickerInitDate:{type:Number,default:null},chooseType:{type:String,default:"date"},pickerStepType:{type:String,default:"day"},timeInter:{type:Array,default:function(){return["00:00:00","23:59:59"]}},timeFormat:{type:String,default:"yyyy-MM-dd"},formatter:{type:String,default:"dateTime^yyyy-mm-dd"},inputAlign:{type:String,default:"right"},hasIcon:{type:Boolean,default:!0},metadata:{type:Object,default:function(){return dsf.metadata.get("date-picker-meta-data")}}},data:function(){return{currentDate:null,showPicker:!1}},computed:{attr:function(){var e={labelWidth:this.getLabelWidth(!0),label:this.showLabel&&this.label||"",placeholder:this.placeholder,disabled:this.disabled,readonly:!0};return this.readOnly?e.inputAlign="left":(e.inputAlign=this.inputAlign,e.required=this.required,this.hasIcon&&(e.rightIcon="notes-o")),e},events:function(){var e={};return this.readOnly||this.disabled||(e.click=this.fieldClick),e},$timeFormat:function(){var e=this.timeFormat.replace(/M/g,"m");return"datetime"===this.chooseType?e+" hh:ii":"datetime_s"===this.chooseType?e+" hh:ii:ss":e},valueFormat:function(){return"datetime"===this.chooseType?"yyyy-mm-dd hh:ii":"datetime_s"===this.chooseType?"yyyy-mm-dd hh:ii:ss":"yyyy-mm-dd"}},watch:{value:function(e){this.initValue(e)}},created:function(){this.initValue(this.value)},methods:{initValue:function(t){this.simple||this.readOnly||this.isDesign||dsf.isUnDef(t)||e.isEqual(t,this.valueCopy)||t&&"string"==dsf.type(t)&&(this.currentDate=dsf.date.parse(t,this.valueFormat))},fieldClick:function(){this.showPicker=!0},onConfirm:function(e){var t=this;this.showPicker=!1;var a=dsf.date.format(e,this.valueFormat);this.emitValueChange(a),this.$dispatch("change",a),this.$nextTick((function(){t.emitFormValidate(a)}))}}})}).call(this,a("2ef0"))},"644a":function(e,t,a){"use strict";(function(e){a("99af"),a("4de4"),a("4160"),a("c975"),a("a15b"),a("d81d"),a("4e82"),a("a434"),a("a9e3"),a("ac1f"),a("5319"),a("2ca0"),a("498a"),a("159b"),a("4795"),a("96cf");var i=a("1da1"),n=a("ade3"),s=a("5530"),o=a("22da"),l=a("d631");t["a"]=dsf.component({name:"DsfMobileButtonBar",ctrlCaption:"按钮组",mixins:[l["a"]],inject:{$buttonOwner:{default:null}},props:{size:{type:String,default:""},align:{type:String,default:"center"},buttons:{type:Array,default:function(){return[]}},emitPrefix:{type:String,default:""},renderButton:{type:Function,default:null},maxNumber:{type:Number,default:2},moreButtonStyle:{type:String,default:""},moreButtonText:{type:String,default:"更多"}},data:function(){return{moreOpen:!1,actionSheetShow:!1,flowButtons:[]}},computed:{owner:function(){return this.$buttonOwner},actions:function(){return e.map(this.moreButtonsReal,(function(e){return{name:e.text,disabled:e.disabled}}))},showBar:function(){return!!this.isDesign||this.validButtons.length>0},validButtons:function(){var t=this;return e.filter(this.buttons,(function(e){return t.showAndHide(e)}))},moreButtonsReal:function(){var t=this;return e.filter(this.validButtons,(function(e,a){return a>=t.maxNumber}))},showButtonsReal:function(){var t=this;return e.filter(this.validButtons,(function(e,a){return a<t.maxNumber}))},getCss:function(){return Object(s["a"])(Object(s["a"])({},this.$getClass()),{},Object(n["a"])({},"align-"+this.align,!0))},iconButtons:function(){return e.filter(this.showButtonsReal,(function(e){return"icon-text"==e.btnStyle}))},generalButtons:function(){return e.filter(this.showButtonsReal,(function(e){return""==e.btnStyle}))}},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){var e=this;this.isDesign||this.buttons.forEach((function(t,a){!t.isLinkSend||t.isLinkSendFold||"system_flow_send"!==t.actionName&&"system_batch_flow_send"!==t.actionName||e.addFlowBtns(t,e.buttons,a)}))},methods:{getButtonStyle:function(e){var t={};if("justify-horizontal"==this.align)if(this.showButtonsReal.length>1){var a="calc(100% / ".concat(this.showButtonsReal.length+(this.moreButtonsReal.length>0?1:0)," - ").concat(this.pxToRem("5px"),")");t["min-width"]=a,t["max-width"]=a,t["width"]=a}else t["min-width"]="100%";return"justify-vertical"==this.align&&(t["min-width"]="100%"),t},reloadData:function(){this.$forceUpdate()},showAndHide:function(e){var t=!0;if(!this.isDesign)if(e.if){var a={$vm:{value:this.$vm}},i=Object.create(this.local,a);t=!1!==this.$eval(e.if,i)}else t=!0;return!1===e.visible&&(t=!1),this.renderButton&&(t=this.renderButton(e,t)),t},clickHandler:function(e,t,a){var i=this;e.disabled||this.isDesign||(e.secondConfirm?dsf.layer.mobile.confirm(e.secondConfirmText||"确认提交？").then((function(){i.buttonAction(e,t,a)})).catch((function(){})):(this.buttonAction(e,t,a),t.stopPropagation()))},buttonAction:function(t,a,n){var s=this;return Object(i["a"])(regeneratorRuntime.mark((function i(){var l,r,u,c,d,h;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:l=s.owner||s,t.isSystem?(r=Object(o["b"])(t.actionName,"mobile"),u=e.map(t.params,(function(e){if(e.value){var a=/^\s*function(\s+\w*)?\(.*\)\s*{/g,i=e.value.trim();if(a.test(i)){var n=["var result= ("+i+").call(this,data,button,owner,self);","data=null;","button=null;","owner=null;","self=null;","return result;"],o=new Function("data","button","owner","self",n.join("\n")),r=o.call(s.$vm,s.local,t,l,s);return"string"==dsf.type(r)&&(r=s.$replace(r,s.local)),r}var u=s.$replace(e.value,s.local);return"false"===u?u=!1:"true"===u&&(u=!0),u}return null})),r&&(c={owner:l,data:s.local,_self:s,targetButton:t,params:u},n&&(c.response=n),r.call(s.$vm,c,a))):(d=(s.emitPrefix?s.emitPrefix+"-":"")+t.actionName,h=l.$listeners[d],h&&dsf.isFunction(h)&&h({owner:l,data:s.local,targetButton:t,_self:s},a)),s.moreOpen=!1;case 3:case"end":return i.stop()}}),i)})))()},getIcon:function(e){var t=e.icon;return t&&t.startsWith("icon-")?t.replace("icon-",""):t},triggerButtonClick:function(e){this.clickHandler(e)},addFlowBtns:function(e,t,a){var i,n=this;if(!t&&this.flowButtons.length>0)return e.popVisible=!e.popVisible,void setTimeout((function(){document.addEventListener("click",n.hidePopVisible)}),0);if(dsf.recursionComponentProps(this.$page.$props,(function(e){e.isFormControl&&"wfinfo"===e.caption&&(i=e.chooseFlow&&e.chooseFlow.id)})),i){var s={};this.$vm.$dialog&&this.$vm.$dialog.dialogArgs&&this.$vm.$dialog.dialogArgs.data&&(s=this.$vm.$dialog.dialogArgs.data[0]),this.$http.get("/wfr/getLines",{sWFID:i,sPID:s.sPID||this.$route.query.sPID,sCurNodeID:s.sCurNodeID||this.$route.query.sCurNodeID||"",sCurLinkID:s.sCurLinkID||this.$route.query.sCurLinkID||"",sExInfos:""}).then((function(i){if(i.data.success){var s=i.data.data,o=s&&s.SendParams&&s.SendParams.Lines;o&&(o.forEach((function(e){"审核通过"===e.Name?e.order=0:"返回修改"===e.Name?e.order=1:"审核不通过"===e.Name&&(e.order=2)})),o.sort((function(e,t){return e.order-t.order})),o.forEach((function(i,s){var o=Object.assign({},e,{caption:i.Name,text:i.Name,title:i.Name,line:i});t?t.splice(a+s+1,0,o):(n.flowButtons.push(o),n.$set(e,"popVisible",!0),document.addEventListener("click",n.hidePopVisible))})),t&&t.splice(t.indexOf(e),1))}})).catch((function(e){}))}},open:function(){var e=this;this.actionSheetShow=!0,this.$nextTick((function(){e.moreOpen=!0}))},closed:function(){this.actionSheetShow=!1,this.moreOpen=!1},onSelect:function(){}},beforeDestroy:function(){this.actionSheetShow=!1,this.moreOpen=!1},destroyed:function(){}})}).call(this,a("2ef0"))},"663b":function(e,t,a){"use strict";var i=function(e,t){var a=t._c;return a("div",{staticClass:"ds-grid-layout mobile",style:t.$options.getStyle(t)},[t._l(t.props.areas,(function(e,i){return[t.props.isDesign?a("div",{key:e.areaName,ref:"gridAreas",refInFor:!0,class:["grid-area",e.areaName],style:t.$options.getAreaStyle(t,e),attrs:{index:i,"grid-index":e.index,"row-index":e.rowIndex,"col-index":e.colIndex,colspan:e.colSpan,rowspan:e.rowSpan,name:e.name}},[t._t(e.name)],2):a("div",{key:e.areaName,ref:"gridAreas",refInFor:!0,staticClass:"grid-area",style:t.$options.getAreaStyle(t,e),attrs:{index:i,name:e.name}},[t._t(e.name)],2)]})),t.props.isDesign?[t._l(t.props.gridTemplate,(function(e,t){return[a("div",{key:"-"+t,class:["grid-area","","e-"+t],style:{"grid-area":"e-"+t,border:"none"}})]}))]:t._e()],2)},n=[],s=a("f74d"),o=s["a"],l=a("2877"),r=Object(l["a"])(o,i,n,!0,null,null,null);t["a"]=r.exports},"792b":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"box-wrap staff-vavate-manage-wrap top"},[a("wf-process",{ref:"wfProcess"}),a("div",{staticClass:"btn-area"},[a("div",{staticClass:"disagree-btn",on:{click:e.getSendBackLink}},[e._v("退回")]),a("div",{staticClass:"agree-btn",on:{click:e.sendAction}},[e._v("发送")])]),a("van-dialog",{staticClass:"staffAdviseDialog",attrs:{title:"审批意见","show-cancel-button":"","confirm-button-text":"发送"},on:{confirm:e.onConfirm},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[a("van-field",{attrs:{placeholder:e.dialogHolder,border:!0,rows:"4",autosize:"",type:"textarea"},model:{value:e.shyj_value,callback:function(t){e.shyj_value=t},expression:"shyj_value"}})],1)],1),a("wf-last-node",{ref:"wfLastNode"}),a("wf-choose-links",{ref:"wfChooseLinks"}),a("wf-choose-users",{ref:"wfChooseUsers"}),a("wf-Opinion",{ref:"wfOpinion"})],1)},n=[],s=a("5530"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("van-dialog",{staticClass:"work_flow",attrs:{"before-close":e.beforeClose,"confirm-button-text":"返回列表",title:e.title||"流程已发送到以下人员"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[!e.title&&e.data.Links?a("div",{staticClass:"userbox"},[e._l(e.data.Links.filter((function(e){return 0==e.Status&&e.LinkUser})),(function(t){return[a("span",{key:t.id},[e._v(e._s(e.getUser(t)))])]}))],2):e._e()])},l=[],r={name:"LastNodeDialog",data:function(){return{data:{},show:!1,title:null,resolve:function(){}}},methods:{showFun:function(e,t){this.data=e||{},20004==this.data.Code||20005==this.data.Code?this.title="流程已办结":this.title=null,this.show=!0,t&&(this.resolve=t)},getUser:function(e){var t=e.LinkUser,a=t.Type,i="";return 1==a?i=t.UserName:2==a?i=t.DeptName+"-"+t.RoleName:3==a?i=t.JobName:4==a?i=t.UserName+"-"+t.RelationName:5==a&&(i=t.RobotName),i},beforeClose:function(e,t){t(),this.resolve()}}},u=r,c=a("2877"),d=Object(c["a"])(u,o,l,!1,null,null,null),h=d.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("van-dialog",{staticClass:"work_flow-linksDialog",attrs:{"show-confirm-button":!1,"show-cancel-button":!1,title:"请选择要发送的环节"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("van-picker",{ref:"picker",attrs:{columns:e.data,"value-key":"Name",title:"标题"}}),a("div",{staticClass:"van-hairline--top van-dialog__footer"},[a("van-button",{staticClass:"van-dialog__cancel",attrs:{type:"default",size:"large"},on:{click:e.cancel}},[e._v("取消")]),e.showback?a("van-button",{staticClass:"van-dialog__confirm van-hairline--left",attrs:{type:"default",size:"large"},on:{click:e.goBack}},[e._v("返回")]):e._e(),a("van-button",{staticClass:"van-dialog__confirm van-hairline--left",attrs:{type:"default",size:"large"},on:{click:e.confirm}},[e._v("确认")])],1)],1)},p=[],m={name:"ChooseLinksDialog",data:function(){return{data:{},show:!1,title:null,showback:!1,resolve:function(){},back:function(){}}},methods:{showFun:function(e,t,a){this.data=e.SendParams&&e.SendParams.Lines||{},this.showback=!!(e.SendParams&&e.SendParams.Lines&&e.SendParams.Lines[0]&&e.SendParams.Lines[0].SendToLineID),this.show=!0,t&&(this.resolve=t),a&&(this.back=a)},confirm:function(){this.resolve(this.$refs.picker.getValues()[0],!0),this.show=!1},goBack:function(){this.back(),this.show=!1},cancel:function(){this.show=!1}}},g=m,v=Object(c["a"])(g,f,p,!1,null,null,null),y=v.exports,b=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("van-popup",{staticClass:"work_flow-usersDialog",style:{height:"100%"},attrs:{position:"bottom"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("div",{staticClass:"header"},[e._v("请选择人员")]),i("div",{staticClass:"content",class:{isFristSend:e.isFristSend}},[e.isFristSend?[i("div",{staticClass:"txt"},[i("van-field",{attrs:{rows:"2",autosize:"",type:"textarea",placeholder:"请输入审批意见"},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),e.tpls.length>0?i("div",{staticClass:"template"},[i("div",e._l(e.tpls,(function(t,a){return i("span",{key:a,on:{click:function(a){e.message=t.key_word}}},[e._v(e._s(t.key_word))])})),0)]):e._e(),i("div",{staticClass:"funs"},[i("i",{staticClass:"iconfont icon-fujian",on:{click:function(t){return e.uploader(0)}}}),i("i",{staticClass:"iconfont icon-tupian",on:{click:function(t){return e.uploader(1)}}})]),i("van-uploader",{ref:"uploader",class:{no:0==e.uploaderData.length},attrs:{"max-count":9,multiple:"","after-read":e.uploaderAfterRead,accept:e.acceptsType},on:{"click-preview":e.preview},model:{value:e.uploaderData,callback:function(t){e.uploaderData=t},expression:"uploaderData"}}),i("van-popup",{style:{height:"80%",width:"100%"},model:{value:e.previewing,callback:function(t){e.previewing=t},expression:"previewing"}},[i("div",[e.previewing?i("dsf-iframe",{attrs:{src:e.filePath}}):e._e()],1)])]:e._e(),i("div",{staticClass:"users"},[i("p",[e._v("您即将发给：")]),e._l(e.data.filter((function(e){return e.users.length>0})),(function(t){return i("div",{key:t.id,staticClass:"dept",class:{noSeletc:!Object.keys(t.selects).length}},[i("div",{staticClass:"desc"},[i("div",{staticClass:"title"},[e._v(e._s(e.getLinkName(t.name)))]),i("div",{staticClass:"num"},[e._v(e._s((1==t.users.length?"1":Object.keys(t.selects).length)||0)+"人审核")])]),i("div",{staticClass:"imgs"},e._l(t.users,(function(n,s){return i("div",{key:n.ID,class:{noSeletc:!n.isSelect},on:{click:function(a){return e.changeUser(n,s,t)}}},[i("van-image",{attrs:{round:"",width:"40px",height:"40px",fit:"cover",src:"/oua/getRedisUserPhoto?userId="+n.ID},scopedSlots:e._u([{key:"loading",fn:function(){return[i("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0},{key:"error",fn:function(){return[i("img",{staticClass:"header",attrs:{src:a("3afd")}})]},proxy:!0}],null,!0)}),n.isSelect?i("van-icon",{attrs:{name:"checked"}}):e._e(),i("span",[e._v(e._s(n.Name))])],1)})),0)])}))],2)],2),i("div",{staticClass:"footer"},[i("div",{on:{click:function(t){e.show=!1}}},[e._v("暂不发送")]),e.isShowBack?i("div",{on:{click:e.goBack}},[e._v("返回")]):e._e(),i("div",{on:{click:e.submit}},[e._v("发送")])])])},w=[],x=a("4f52"),_=x["a"],C=Object(c["a"])(_,b,w,!1,null,null,null),D=C.exports,k=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"work_flow-process"},e._l(e.flowProcess,(function(t){return i("div",{key:t.linkid,staticClass:"item",class:{"no-user":!t.rusername}},[i("van-image",{attrs:{round:"",width:"40px",height:"40px",fit:"cover",src:"/oua/getRedisUserPhoto?userId="+t.ruserid},scopedSlots:e._u([{key:"loading",fn:function(){return[i("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0},{key:"error",fn:function(){return[i("img",{staticClass:"header",attrs:{src:a("3afd")}})]},proxy:!0}],null,!0)}),i("van-image",{staticClass:"icon",attrs:{round:"",fit:"cover",src:e.getStateImg(t)}}),i("div",{staticClass:"des"},[i("p",{staticClass:"first-child"},[i("span",{staticClass:"title"},[e._v(e._s(t.nodename))]),i("span",{staticClass:"time"},[e._v(e._s(e.format(t.reachtime)))])]),t.rusername?i("p",{staticClass:"name"},[e._v(e._s(t.rusername))]):e._e(),e.getIdea(t)?i("p",{staticClass:"yj"},[e._v(e._s(e.getIdea(t)))]):e._e(),i("p",{staticClass:"files"},[i("van-grid",{attrs:{"column-num":3,border:!1}},e._l(e.getFiles(t),(function(t,a){return i("van-grid-item",{key:a,attrs:{icon:e.getType(t),text:t.originalFileName},on:{click:function(a){return e.preview(t)}}})})),1)],1)]),i("van-popup",{style:{height:"80%",width:"100%"},model:{value:e.previewing,callback:function(t){e.previewing=t},expression:"previewing"}},[i("div",[e.previewing?i("dsf-iframe",{attrs:{src:e.filePath}}):e._e()],1)]),i("van-image-preview",{attrs:{images:e.images},model:{value:e.showImg,callback:function(t){e.showImg=t},expression:"showImg"}})],1)})),0)},$=[],S=(a("fb6a"),{name:"FlowProcess",data:function(){return{flowProcess:[],previewing:!1,filePath:"",images:[],showImg:!1}},methods:{setData:function(e){this.flowProcess=e},getStateImg:function(e){var t=e.STATUS;return"-31"==t?t="-3":"-1"==t&&(t="-2"),t||0===t?a("db38")("./status".concat(t,".png")):null},getIdea:function(e){return e.opinionatts?JSON.parse(e.opinionatts).Content:null},getFiles:function(e){return e.opinionatts?JSON.parse(e.opinionatts).Attachments:null},format:function(e){return e?dsf.date.format(e,"mm-dd hh:ii"):""},getType:function(e){return"image"===e.contentType.slice(0,5)?"photo-o":"orders-o"},preview:function(e){e&&e.contentType&&"image"!==e.contentType.slice(0,5)?(this.filePath=dsf.config.webRoot+"preview/file?fileId="+e.id,this.previewing=!0):(this.images=[dsf.config.webRoot+e.relativePath],this.showImg=!0)}}}),T=S,I=Object(c["a"])(T,k,$,!1,null,null,null),O=I.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("van-popup",{staticClass:"work_flow-usersDialog work_flow-opiDialog",style:{height:"100%"},attrs:{position:"bottom"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("div",{staticClass:"header"},[e._v(e._s(e.typeText[e.type]["title"]))]),a("div",{ref:"content",staticClass:"content"},[e.h?a("van-field",{ref:"reason",attrs:{rows:"1",autosize:{minHeight:e.h},type:"textarea",placeholder:"请输入"+e.typeText[e.type]["title"]},model:{value:e.msg,callback:function(t){e.msg=t},expression:"msg"}}):e._e()],1),a("div",{staticClass:"footer"},[a("div",{on:{click:function(t){e.show=!1}}},[e._v("暂不"+e._s(e.typeText[e.type]["type"]))]),a("div",{on:{click:e.submitFun}},[e._v(e._s(e.typeText[e.type]["type"]))])])])},B=[],P={name:"OpinionDialog",data:function(){return{h:0,msg:"",type:0,show:!1,typeText:[{title:"退回理由",type:"退回"},{title:"审核意见",type:"发送"}],resolve:function(){}}},created:function(){},methods:{showFun:function(e,t){var a=this;this.type=e>0?e:0,this.msg="",this.show=!0,t&&(this.resolve=t),this.$nextTick((function(){a.h=a.$refs.content.offsetHeight-20}))},submitFun:function(){this.msg?this.resolve(this.msg):dsf.layer.toast("请输入"+this.typeText[this.type]["title"],!1)}}},L=P,N=Object(c["a"])(L,V,B,!1,null,null,null),M=N.exports,j={components:{wfLastNode:h,wfChooseLinks:y,wfChooseUsers:D,wfProcess:O,wfOpinion:M},data:function(){return{sWFID:"",sObjectID:"",sObjectName:"",sPID:"",sCurLinkID:"",requestID:null,loader:null,processInfo:[],isFristSend:!1}},methods:{loading:function(e){this.loader||(this.loader=dsf.layer.loading(e||"发送中"))},closeLoading:function(e){dsf.layer.closeLoading(this.loader),this.loader=null,e&&dsf.layer.message(e,!1)},sendAction:function(e){if(this.sWFID){this.loading();var t="",a={},i="",n=this;n.sPID?(t="wfr/send",a={sPID:n.sPID,sCurLinkID:n.sCurLinkID,sExInfos:"",sForbidAutoSend:e?0:1}):(t="wfr/startSend",a={sWFID:n.sWFID,sObjectID:n.sObjectID,sObjectName:n.sObjectName,sCurNodeID:"",sExInfos:"",sForbidAutoSend:e?0:1},this.isFristSend=!0),a.sOpinion=JSON.stringify({Content:"",Attachments:[]}),n.requestID=null,this.$http.post(t,a).done((function(e){2e4==e.state&&e.data.RequestID?n.wFType(e,[]):i="发送异常：".concat(e.message)})).error((function(e){i="".concat(t,"，服务器异常")})).always((function(){n.closeLoading(i)}))}},wFType:function(e,t,a){var i=this;if(2e4==e.state){var n=e.data,s=n.Code;if(n.SendParams&&n.SendParams.Lines&&n.SendParams.Lines.length>0&&"ZggVllh4iHUbKq1"==n.SendParams.Lines[0].LineID&&2e4!=s&&20004!=s&&20005!=s)return void i.sendAction(!0);if(i.requestID=n.RequestID,2e4==s||20004==s||20005==s){for(var o in t)t[o].show=!1;i.$refs.wfLastNode.showFun(n,(function(){i.$router.go(-1)}))}else if(81e3==s)i.$refs.wfChooseLinks.showFun(n,(function(e,a){t.push(i.$refs.wfChooseLinks),i.flowSendNextRequest("wfr/sendToLine",{sRequestID:i.requestID,sLineID:e.LineID,sForbidAutoSend:1},t,a)}),(function(){t.push(i.$refs.wfChooseLinks);var e={sRequestID:n.RequestID,sLineID:n.SendParams.Lines&&n.SendParams.Lines[0]&&n.SendParams.Lines[0].BackLineID};i.flowSendNextRequest("wfr/setLineToBack",e,t)}));else if(82e3==s)n._isFristSend=i.isFristSend,i.$refs.wfChooseUsers.showFun(n,(function(e,a,n){t.push(i.$refs.wfChooseUsers),i.flowSendNextRequest("wfr/sendToReceivers",{sRequestID:i.requestID,sReceivers:e,sOpinion:JSON.stringify({Content:a,Attachments:n})},t)}),(function(){var e={sRequestID:n.RequestID,sLineID:n.SendParams.Lines&&n.SendParams.Lines[0]&&n.SendParams.Lines[0].SendToLineID};i.flowSendNextRequest("wfr/setLineToBack",e,t)}),a);else{var l=null;switch(s){case 91e3:l="无后续可发送节点";break;case 92e3:l="无可选的发送对象";break;case 92001:l="该环节只允许发送给一人，但是必选项超过一个";break;case 92002:l="未找到继承环节";break;case 93e3:l="该事项已被处理";break;case 93001:l="保存流转情况信息失败";break;case 93002:l="保存流转环节信息失败";break;case 94001:l="与分支不能设置办结节点";break;case 95001:l="没有可回收的环节";break;case 95002:l="回收环节已接收或已处理，无法回收";break;case 99e3:l="获取数据锁失败";break}dsf.layer.alert({title:"发送中断",message:l||"未知流程类型发送",confirmButtonText:"返回列表页"},(function(){i.$router.go(-1)}))}}},flowSendNextRequest:function(e,t,a,i){this.loading();var n="",s=this;this.$http.post(e,t).done((function(e){2e4==e.state?s.wFType(e,a,i):n="发送异常：".concat(e.message)})).error((function(t){n="".concat(e,"，服务器异常")})).always((function(){s.closeLoading(n)}))},getProcessInfo:function(e){e||(e=dsf.layer.loading());var t=this,a=null;this.$http.get("wfr/getProcessInfoByPID",{sPID:t.sPID}).done((function(e){2e4==e.state?t.$refs.wfProcess.setData(e.data):a="获取流转情况异常：".concat(e.message)})).error((function(e){a="获取流转情况异常"})).always((function(){dsf.layer.closeLoading(e),a&&dsf.layer.message(a,!1)}))},getSendBackLink:function(){this.loading("退回中");var e=this,t="";this.$http.post("wfr/getSendBackLink",{sPID:e.sPID,sCurLinkID:e.sCurLinkID}).done((function(a){if(2e4==a.state&&a.data.BackLinks){var i=a.data.BackLinks;if(1==i.length)e.sendBack(i[0]);else{var n={SendParams:{Lines:[]}};for(var o in i){var l=i[o];n["SendParams"]["Lines"].push(Object(s["a"])({Name:l.NodeName+"-"+l.LinkUser.RUserName},l))}e.$refs.wfChooseLinks.showFun(n,(function(t){e.sendBack(t,e.$refs.wfChooseLinks)}))}}else t="退回异常：".concat(a.data.Message)})).error((function(e){t="退回中断，服务器异常"})).always((function(){e.closeLoading(t)}))},sendBack:function(e,t){var a=this,i=this,n="";i.$refs.wfOpinion.showFun(0,(function(s){i.loading("退回中");var o={sPID:i.sPID,sCurLinkID:i.sCurLinkID,sReason:s,sBackLinkID:e.ID};a.$http.post("wfr/sendBack",o).done((function(a){t&&(t.show=!1),i.$refs.wfOpinion.show=!1,2e4==a.state&&a.data&&"21000"==a.data.Code?dsf.layer.alert({message:"已成功退回到 "+e.NodeName+" 环节"},(function(){i.$router.go(-1)})):n="".concat(a.data.Message||"退回异常")})).error((function(e){n="退回中断，服务器异常"})).always((function(){i.closeLoading(n)}))}))},flowDestroy:function(){var e=this,t="";e.sPID?(e.loading("销毁中"),this.$http.post("wfr/destroy",{sPID:e.sPID}).done((function(a){2e4==a.state?dsf.layer.alert({message:"销毁成功"},(function(){e.$router.go(-1)})):t="销毁异常"})).error((function(e){t="销毁中断，服务器异常"})).always((function(){e.closeLoading(t)}))):dsf.layer.message("缺少sPID参数，销毁异常",!1)},flowForceClose:function(){var e=this,t="";e.sPID?(e.loading("强制办结中"),this.$http.post("wfr/forceClose",{sPID:e.sPID}).done((function(a){2e4==a.state?dsf.layer.alert({message:"强制办结成功"},(function(){e.$router.go(-1)})):t="强制办结异常"})).error((function(e){t="强制办结中断，服务器异常"})).always((function(){e.closeLoading(t)}))):dsf.layer.message("缺少sPID参数，强制办结异常",!1)}}},R={name:"FlowDemo",mixins:[j],data:function(){return{itemData:{},showDialog:!1,dialogHolder:"请输入审批意见",shyj_value:"",btnDir:{1:"同意",0:"不同意"},pageTitle:"详情"}},created:function(){this.getDetail()},methods:{getDetail:function(){this.sWFID="38e9795031b948fbb67e7a4ece909f9f",this.sObjectID=dsf.url.queryString("id"),this.sPID=dsf.url.queryString("sPID"),this.sCurLinkID=dsf.url.queryString("sCurLinkID"),this.getProcessInfo()},popDialog:function(e){this.btn_type=e,this.dialogHolder=this.btnDir[e],this.showDialog=!0},onConfirm:function(){this.shyj_value||(this.shyj_value=this.dialogHolder);var e=this,t={qjdId:this.itemData.teas_xyxt_qjd_id,shyj:this.shyj_value,type:this.btn_type},a="teas/mobile/qjsq/sp";this.$http.get(a,t).done((function(t){console.log(t),t.success?(e.dsf.layer.message("操作".concat(t.message,"，请稍后再试")),e.$router.go(-1)):e.dsf.layer.message("".concat(t.message,"，请稍后再试"))})).error((function(t){e.dsf.layer.message("审批请求失败，请联系管理员"),console.log("".concat(a," 接口请求失败 错误码:").concat(t))}))},previewFile:function(e){var t=JSON.parse(e)[0],a=t.relativePath;t.id&&this.$router.push({name:"bufferPage",params:{url:a,text:t.originalFileName,id:t.id}})}}},E=R,F=Object(c["a"])(E,i,n,!1,null,null,null),A=F.exports,H=[{path:"/mobile/flow",component:A}];t["a"]=H},8151:function(e,t,a){"use strict";(function(e,i){a("c740"),a("c975"),a("d81d"),a("a434"),a("a9e3"),a("ac1f");var n=a("55f5");a("d7b1");t["a"]=dsf.component({name:"DsfMobileDataChoice",ctrlCaption:"数据选择",mixins:[n["a"]],provide:function(){return{$frame:this}},props:{simple:{type:Boolean,default:!1},placeholder:{type:String,default:"请输入"},dialogTitle:{type:String,default:"请选择"},dialogUrl:{type:String,default:""},dialogWidth:{type:String,default:"100%"},dialogHeight:{type:String,default:"100%"},metadata:{type:Object,default:function(){return dsf.metadata.get("items-meta-data")}},value:{type:[Array,Object],default:function(){return[]}},formatter:{type:String,default:"textValue^text"},maxTags:{type:Number,default:0},label:{type:String,default:"数据选择"}},data:function(){return{popupShow:!1}},computed:{mainHeight:function(){return"calc(".concat(this.dialogHeight," - 0.8rem)")},selectValue:{get:function(){var e=this.value;return dsf.isDef(e)?e.map((function(e){return e.value})):[]},set:function(t){var a=[];e.each(t,(function(e){"string"==dsf.type(e)&&a.push({text:e,value:e}),dsf.hasOwn(e,"text")&&dsf.hasOwn(e,"value")&&a.push(e)})),this.emitValueChange(a)}},options:function(){return this.remoteInputing?this.remoteItems:this.items}},mounted:function(){},watch:{value:{handler:function(e){var t,a=this;dsf.isUnDef(e)&&(t=[]),"string"!==dsf.type(e)||e||(t=[]),i.isArray(e)||(t=[e]),t?this.emitValueChange(t):this.$nextTick((function(){a.$dispatch("change"),a.$nextTick((function(){a.emitFormValidate(a.value)}))}))}},inputStr:{handler:function(e){var t=this;e?(this.popupHide="",this.$nextTick((function(){t.popperWidthChange()}))):this.popupHide="hide"}}},methods:{popupParams:function(){return{value:this.value,maxTags:this.maxTags}},popupYes:function(){var t=this,a=this,i=this.$refs.popupVm.$refs.view;if(i&&i.yes&&dsf.isFunction(i.yes)){var n=i.yes();if(!n)return!1;var s=a.mapData(n),o=a.value||[];e.each(s,(function(a,i){if(!t.$refs[a.value]){if(t.maxTags&&t.maxTags>0&&o.length>=t.maxTags)return void dsf.layer.message("已超出数量上限【"+t.maxTags+"】",!1);"string"==dsf.type(a)&&(a={text:a,value:a});var n=e.findIndex(o,(function(e){return a.value===e.value}));n<0&&o.push(a)}})),this.emitValueChange(o),a.$dispatch("selected",n),this.popupShow=!1}},getChoiceParams:function(){return{value:this.value}},mapData:function(e){if(!this.mapHandler){var t="array"==dsf.type(e)?e:[e],a=[];a.splice(0,a.length);for(var i=0;i<t.length;i++){var n=t[i],s=this.autoMapDataText(n);s&&a.push(s)}return a}},autoMapDataText:function(e){var t,a,i=/(\w+)\.(\w+)/g,n=["text","_text","name","_name","label","_label"],s=["value","_value","id","_id","key","_key"],o=null;for(var l in e){var r=l;i.lastIndex=0;var u=i.exec(l);u&&u[2]&&(r=u[2]),dsf.isUnDef(t)&&n.indexOf(r)>=0&&(t=e[l]),dsf.isUnDef(a)&&s.indexOf(r)>=0&&(a=e[l])}return(dsf.isDef(t)||dsf.isDef(a))&&(o={text:t,value:a}),o},removeTag:function(t){var a=e.findIndex(this.value,(function(e){return e.value===t.value}));a>=0&&(this.value.splice(a,1),this.emitValueChange(this.value))},querySearch:function(e,t){e&&t([{text:"1",value:"1"},{text:"2",value:"2"},{text:"3",value:"3"}])},popperWidthChange:function(){if(this.$refs.input){var e=this.$refs.input.$children[1],t=this.$el.querySelector(".ds-datachoice-input"),a=t.getClientRects();a=a[0]||null,a&&(e.$el.style.minWidth=a.width+"px")}},resize:function(){this.popperWidthChange()}}})}).call(this,a("2ef0"),a("1157"))},"8c37":function(e,t,a){"use strict";a("a9e3");t["a"]={props:{selectStartType:{type:Number,default:0},selectEndType:{type:Number,default:0},selectStartDate:{type:Number,default:Date.now()},selectEndDate:{type:Number,default:Date.now()},selectStartDateByDays:{type:Number,default:0},selectEndDateByDays:{type:Number,default:0},selectStartDateByMonths:{type:Number,default:0},selectEndDateByMonths:{type:Number,default:0},selectStartDateByYears:{type:Number,default:0},selectEndDateByYears:{type:Number,default:0}},computed:{minDate:function(){if(this.selectStartType){if(1===this.selectStartType)return this.getDate(new Date);if(2===this.selectStartType)return this.getDate(this.selectStartDate);if(3===this.selectStartType){var e=this.getDate();return e=this.getDate(e.getTime()+864e5*this.selectStartDateByDays),e}if(4===this.selectStartType){var t=new Date,a=t.getMonth()+this.selectStartDateByMonths+1,i=t.getFullYear()+Math.floor(a/12)+"/";return a%=12,a=1===a.length?"0"+a:a,new Date(i+a+"/01 00:00:00")}if(5===this.selectStartType){var n=new Date,s=n.getFullYear()+this.selectStartDateByYears;return new Date(s+"/01/01 00:00:00")}}},maxDate:function(){if(this.selectEndType){if(1===this.selectEndType)return this.getDate(new Date,"yyyy/mm/dd 23:59:59");if(2===this.selectEndType)return this.getDate(this.selectEndDate);if(3===this.selectEndType){var e=this.getDate();return this.getDate(e.getTime()+864e5*this.selectEndDateByDays)}if(4===this.selectEndType){var t=new Date,a=t.getMonth()+this.selectEndDateByMonths+2,i=t.getFullYear()+Math.floor(a/12)+"/";return a%=12,a=1===a.length?"0"+a:a,t=new Date(i+a+"/01 00:00:00"),t.setTime(t.getTime()-864e5),t}if(5===this.selectEndType){var n=new Date,s=n.getFullYear()+this.selectEndDateByYears;return new Date(s+"/12/31 00:00:00")}}}},methods:{getDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy/mm/dd 00:00:00";return void 0===e&&(e=new Date),new Date(dsf.date.format(e,t))}}}},"91e8":function(e,t,a){"use strict";a("5f0d")},"97ad":function(e,t,a){"use strict";a("dfc0");var i=a("22da"),n=(a("4160"),a("b64b"),a("ac1f"),a("1276"),a("159b"),a("3835")),s=(a("96cf"),a("1da1")),o=a("4dbe"),l={system_form_save:function(e){var t=e._self.$form;if(t){var a={isRefresh:!0===e.params[0],customParams:e.params[1]||"",savedClose:!0===e.params[2],successMsg:e.params[3]||"保存成功",errorMsg:e.params[4]||"保存失败"};t.formSave(a)}},system_flow_send:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var i,n,s,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e._self&&e._self.$vm&&e._self.$vm.flows&&e._self.$vm.flows.disposeIdea&&(i=e._self.$vm.flows.disposeIdea,i.setDoSave(!1)),n=e._self.$form,!n){a.next=11;break}return s={isSilent:!0,isRefresh:!1,savedClose:!1,successMsg:"",errorMsg:""},a.next=6,n.formSave(s);case 6:o=a.sent,o&&o.data&&t.$refs.wfinfo&&t.$refs.wfinfo.flowSend(o.data,e.targetButton,e.owner),i&&i.setDoSave(!0),a.next=12;break;case 11:dsf.layer.message("你的表单跑丢了",!1);case 12:case"end":return a.stop()}}),a)})))()},system_flow_sendBack:function(e){this.$refs.wfinfo&&this.$refs.wfinfo.getSendBackLink(e.params)},system_batch_flow_send:o["a"],system_flow_openDialog:function(e){console.log(e);var t=e.owner.multipleSelection;if(t&&0===t.length&&0===Object.keys(e.data).length)dsf.layer.message("请选择至少一条数据",!1);else{var a,i,s=Object(n["a"])(e.params,6),o=s[0],l=s[1],r=(s[2],s[3]),u=s[4],c=s[5];if(c){var d=c.split(","),h=Object(n["a"])(d,2);a=h[0],i=h[1]}var f=[];!t||t&&0===t.length?f.push({sPID:e.data[u||"sPID"]||this.$route.query.sPID,sCurLinkID:e.data[r||"sCurLinkID"]||this.$route.query.sCurLinkID}):t.forEach((function(e){f.push({sPID:e[u||"sPID"],sCurLinkID:e[r||"sCurLinkID"]})})),this.$openDialog({title:o||"",width:a||"80%",height:i||"500px",params:{path:l||"dsfa/wf/opion"},dialogArgs:{data:f},btns:[]})}}};Object(i["a"])({caption:"保存",text:"保存",title:"保存",actionName:"system_form_save",icon:"icon-baocun",params:[{value:"",desc:"是否要刷新父页面",default:"true"},{value:"",desc:"保存时附加的参数多用于二次开发判断区分",default:""},{value:"",desc:"如果弹出窗口打开表单,保存后是否关闭窗口",default:"false"},{value:"",desc:"保存成功的提示信息",default:"保存成功"},{value:"",desc:"保存失败的提示信息",default:"保存失败"}],moduleName:"基础平台",groupName:"公共",handler:l.system_form_save},"mobile"),Object(i["a"])({caption:"发送",text:"发送",title:"发送",actionName:"system_flow_send",icon:"",params:[],moduleName:"基础平台",groupName:"流程",handler:l.system_flow_send},"mobile"),Object(i["a"])({caption:"批量发送",text:"批量发送",title:"批量发送",actionName:"system_batch_flow_send",icon:"",params:[{value:"",desc:"tableName",default:"tableName 若有几张表格，则以','分割"},{value:"",desc:"ObjectID",default:"ObjectID 若有几张表格，则以','分割"},{value:"",desc:"ObjectName",default:"ObjectName 若有几张表格，则以','分割"}],moduleName:"基础平台",groupName:"流程",handler:l.system_batch_flow_send},"mobile"),Object(i["a"])({caption:"弹出流程意见框",text:"弹出流程意见框",title:"弹出流程意见框",actionName:"system_flow_openDialog",icon:"icon-hao",params:[{value:"",desc:"模态框标题",default:"对话框"},{value:"",desc:"打开页面的地址",default:"无"},{value:"",desc:"id",default:"id"},{value:"",desc:"sCurLinkID",default:"sCurLinkID"},{value:"",desc:"sPID",default:"sPID"},{value:"",desc:"模态框宽,高（单位%或px  用,分割）",default:"80%,500px"},{value:"",desc:"模态框保存按钮会抛出的事件, 方便二次开发",default:"system-dialog-save"}],moduleName:"基础平台",groupName:"流程",handler:l.system_flow_openDialog},"mobile"),Object(i["a"])({caption:"退回",text:"退回",title:"退回",actionName:"system_flow_sendBack",icon:"",if:"@[url('sPID')!=undefined]",params:[{value:"@[url('sPID')]",desc:"sPID",default:""},{value:"@[url('sCurLinkID')]",desc:"sCurLinkID",default:""}],moduleName:"基础平台",groupName:"流程",handler:l.system_flow_sendBack},"mobile"),Object(i["a"])({caption:"销毁",text:"销毁",title:"销毁",actionName:"system_flow_destroy",icon:"",params:[],moduleName:"基础平台",groupName:"流程",handler:dsf.noop},"mobile"),Object(i["a"])({caption:"强制办结",text:"强制办结",title:"强制办结",actionName:"system_flow_forceClose",icon:"",params:[],moduleName:"基础平台",groupName:"流程",handler:dsf.noop},"mobile"),Object(i["a"])({caption:"回收",text:"回收",title:"回收",actionName:"system_flow_send_test",icon:"",params:[],moduleName:"基础平台",groupName:"流程",handler:dsf.noop},"mobile"),Object(i["a"])({caption:"移交",text:"移交",title:"移交",actionName:"system_flow_send_test",icon:"",params:[],moduleName:"基础平台",groupName:"流程",handler:dsf.noop},"mobile");a("fb6a"),a("b0c0"),a("5319"),a("591c");var r=a("7713"),u=(a("ef6f"),a("82a8")),c=(a("93ac"),a("bb33")),d=(a("e7e5"),a("d399")),h=(a("da3c"),a("0b33")),f=(a("bda71"),a("5e46")),p=(a("d1cf"),a("ee83")),m=(a("6d73"),a("473d")),g=(a("66cf"),a("343b9")),v=(a("4b0a"),a("2bb1")),y=(a("7844"),a("5596")),b=(a("5f1a"),a("a3e2")),w=(a("5852"),a("d961")),x=(a("0653"),a("34e9")),_=(a("c1946"),a("7744")),C=(a("4ddd"),a("9f14")),D=(a("a44c3"),a("e27c")),k=(a("a909"),a("3acc")),$=(a("3c32"),a("417e")),S=(a("91d5"),a("f0ca")),T=(a("2cbd"),a("ab2c")),I=(a("66b9"),a("b650")),O=(a("5246"),a("6b41")),V=(a("a52c"),a("2ed4")),B=(a("537a"),a("ac28")),P=(a("2994"),a("2bdd")),L=(a("ab711"),a("58e6")),N=(a("4d48"),a("d1e1")),M=(a("81e6"),a("9ffb")),j=(a("c3a6"),a("ad06")),R=(a("e930"),a("8f80")),E=(a("5f5f"),a("f253")),F=(a("ac1e"),a("543e")),A=(a("4662"),a("28a2")),H=(a("0ec5"),a("21ab")),q=(a("3df5"),a("2830")),U=(a("4056"),a("44bf")),Y=(a("e17f"),a("2241")),z=(a("8a58"),a("e41f")),W=(a("be7f"),a("565f")),J=(a("38d5"),a("772a")),K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"van-picker multiple"},[a("div",{staticClass:"van-picker__toolbar"},[a("button",{staticClass:"van-picker__cancel",attrs:{type:"button"},on:{click:e.cancel}},[e._v("取消")]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.checkValue.length,expression:"checkValue.length"}]},[e._v("已勾选"+e._s(e.checkValue.length)+"个")]),a("button",{staticClass:"van-picker__confirm",attrs:{type:"button"},on:{click:e.confirm}},[e._v("确认")])]),a("div",{staticClass:"van-picker__columns",style:{height:e.visibleItemCount*e.itemHeight+"px"}},[a("div",{staticClass:"van-picker-column",on:{transitionend:e.onTransitionEnd}},[a("ul",{ref:"wrapper",staticClass:"van-picker-column__wrapper",style:e.wrapperStyle},e._l(e.$columns,(function(t){return a("li",{key:t[e.valueKey],staticClass:"van-picker-column__item",style:{height:e.itemHeight+"px"}},[a("div",{staticClass:"van-picker-column__item-box van-hairline--bottom",class:{active:e.checkValue.indexOf(t.value)>-1},on:{click:function(a){return e.itemClick(t)}}},[a("span",[e._v(e._s(t.text))]),a("van-icon",{attrs:{name:"success"}})],1)])})),0)])])])},Q=[],G=(a("7db0"),a("c740"),a("c975"),a("d81d"),a("a434"),a("a9e3"),a("4795"),a("ade3")),X=a("fa5c"),Z=a("a3c3"),ee=a("18d0"),te=(a("e5f6"),200),ae=300,ie=15;function ne(e){var t=window.getComputedStyle(e),a=t.transform||t.webkitTransform,i=a.slice(7,a.length-1).split(", ")[5];return Number(i)}var se={name:"VanMultiplePicker",mixins:[X.TouchMixin],props:{show:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},showToolbar:{type:Boolean,default:!1},columns:{type:Array,default:function(){return[]}},valueKey:{type:String,default:"text"},visibleItemCount:{type:Number,default:6},itemHeight:{type:Number,default:44},swipeDuration:{type:Number,default:1e3}},data:function(){return{moving:!1,offset:0,duration:0,checkValue:[],checkValueCopy:"[]"}},computed:{$columns:function(){var e=this;return this.columns.map((function(t){return"string"==dsf.type(t)?Object(G["a"])({},e.valueKey,t):t}))},count:function(){return this.$columns.length},wrapperStyle:function(){return{transform:"translate3d(0, "+this.offset+"px, 0)",transitionDuration:this.duration+"ms",transitionProperty:this.duration?"all":"none"}}},watch:{show:function(e){e?this.checkValueCopy=JSON.stringify(this.checkValue):this.checkValue=JSON.parse(this.checkValueCopy)}},mounted:function(){this.bindTouchEvent(this.$refs.wrapper)},destroyed:function(){this.removeTouchEvent(this.$refs.wrapper)},methods:{itemClick:function(e){var t=e.value,a=this.checkValue.indexOf(t);-1==a?this.checkValue.push(t):this.checkValue.splice(a,1)},getCheckValue:function(){var e=this,t=[],a=this.checkValue.map((function(a){var i=e.$columns.findIndex((function(t){return t[e.valueKey]==a}));return t.push(i),e.columns[i]}));return{indexes:t,checkColumns:a}},getValues:function(){return this.getCheckValue().checkColumns},setValues:function(e){var t=this,a=[];e.forEach((function(e){-1==a.indexOf(e)&&t.$columns.find((function(a){return a[t.valueKey]==e}))&&a.push(e)})),this.checkValue=a,this.checkValueCopy=JSON.stringify(a)},getIndexes:function(){return this.getCheckValue().indexes},setIndexes:function(e){var t=this,a=[];e.forEach((function(e){if(t.count>e){var i=t.$columns[e][t.valueKey];-1==a.indexOf(i)&&a.push(i)}})),this.checkValue=a,this.checkValueCopy=JSON.stringify(a)},confirm:function(){this.checkValueCopy=JSON.stringify(this.checkValue);var e=this.getCheckValue(),t=e.indexes,a=e.checkColumns;this.$emit("confirm",a,t)},cancel:function(){this.$emit("cancel")},removeTouchEvent:function(e){var t=this.onTouchStart,a=this.onTouchMove,i=this.onTouchEnd;(0,ee.off)(e,"touchstart",t),(0,ee.off)(e,"touchmove",a),i&&((0,ee.off)(e,"touchend",i),(0,ee.off)(e,"touchcancel",i))},onTouchStart:function(e){if(!this.readonly){if(this.touchStart(e),this.moving){var t=ne(this.$refs.wrapper);this.offset=Math.min(0,t),this.startOffset=this.offset}else this.startOffset=this.offset;this.duration=0,this.transitionEndTrigger=null,this.touchStartTime=Date.now(),this.momentumOffset=this.startOffset}},onTouchMove:function(e){if(!this.readonly){this.touchMove(e),"vertical"===this.direction&&(this.moving=!0,(0,ee.preventDefault)(e,!0)),this.offset=(0,Z.range)(this.startOffset+this.deltaY,-this.count*this.itemHeight,this.itemHeight);var t=Date.now();t-this.touchStartTime>ae&&(this.touchStartTime=t,this.momentumOffset=this.offset)}},onTouchEnd:function(){var e=this;if(!this.readonly){var t=this.offset-this.momentumOffset,a=Date.now()-this.touchStartTime,i=a<ae&&Math.abs(t)>ie;if(i)this.momentum(t,a);else{var n=this.getIndexByOffset(this.offset);this.duration=te,this.setIndex(n,!0),setTimeout((function(){e.moving=!1}),0)}}},onTransitionEnd:function(){this.stopMomentum()},stopMomentum:function(){this.moving=!1,this.duration=0,this.transitionEndTrigger&&(this.transitionEndTrigger(),this.transitionEndTrigger=null)},getIndexByOffset:function(e){return(0,Z.range)(Math.round(-e/this.itemHeight),0,this.count-1)},momentum:function(e,t){var a=Math.abs(e/t);e=this.offset+a/.003*(e<0?-1:1);var i=this.getIndexByOffset(e);this.duration=+this.swipeDuration,this.setIndex(i,!0)},setIndex:function(e,t){var a=this;e=this.adjustIndex(e)||0;var i=-e*this.itemHeight,n=function(){e!==a.currentIndex&&(a.currentIndex=e,t&&a.$emit("change",e))};this.moving&&i!==this.offset?this.transitionEndTrigger=n:n(),this.offset=i},adjustIndex:function(e){return(0,Z.range)(e,0,this.count-this.visibleItemCount)}}},oe=se,le=a("2877"),re=Object(le["a"])(oe,K,Q,!1,null,null,null),ue=re.exports,ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"ds-loading"},[e.loading?a("van-toast",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{position:"middle",type:"loading","forbid-click":""}}):e._e()],1)},de=[],he={name:"DsfMobileLoading",components:{},data:function(){return{text:"加载中",loading:!1}},computed:{},created:function(){},mounted:function(){},beforeDestroy:function(){},methods:{}},fe=he,pe=Object(le["a"])(fe,ce,de,!1,null,null,null),me=pe.exports,ge=a("a8bb"),ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dsf-calendar"},[a("div",{staticClass:"dsf-calendar-header"},[a("span",{staticClass:"dsf-calendar-header-title"},["date"===e.type?[e._v("选择日期")]:"year"===e.type?[e._v("选择年份")]:"month"===e.type?[e._v("选择月份")]:"datetime_s"===e.type||"datetime"===e.type?[e._v("选择时间")]:e._e()],2),a("div",{staticClass:"dsf-calendar-header-current",on:{click:e.chooseActive}},["day"==e.currentView?a("span",[e._v(e._s(e.dayView.activeMonth&&e.dayView.activeMonth.key||""))]):"month"==e.currentView?a("span",[e._v(e._s(e.monthView&&e.monthView.activeText||""))]):"year"==e.currentView?a("span",[e._v(e._s(e.yearView&&e.yearView.activeText||""))]):e._e()]),a("i",{staticClass:"dsf-calendar-header-close iconfont icon-guanbi2",on:{click:function(t){return e.$emit("cancel")}}})]),a("div",{staticClass:"dsf-calendar-body"},["datetime_s"===e.type||"datetime"===e.type?a("div",{staticClass:"dsf-calendar-value"},[a("div",{on:{click:function(t){return e.chooseTime(0)}}},[e._v(e._s(e.valueText[0][0])),a("span",[e._v(e._s(e.valueText[0][1]))])]),2==e.valueText.length?[a("span",[e._v("至")]),a("div",{on:{click:function(t){return e.chooseTime(1)}}},[e._v(e._s(e.valueText[1][0])),a("span",[e._v(e._s(e.valueText[1][1]))])])]:e._e()],2):e._e(),a("calendar-year-box",{directives:[{name:"show",rawName:"v-show",value:"year"==e.currentView,expression:"currentView == 'year'"}],attrs:{"box-height":e.boxHeight,type:e.type,"min-time":e.minTime,"max-time":e.maxTime,multiple:e.multiple,range:e.range},on:{change:e.yearChang},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),"year"!=e.type?a("calendar-month-box",{directives:[{name:"show",rawName:"v-show",value:"month"==e.currentView,expression:"currentView == 'month'"}],attrs:{"box-height":e.boxHeight,type:e.type,"min-time":e.minTime,"max-time":e.maxTime,multiple:e.multiple,range:e.range},on:{change:e.monthChang},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):e._e(),"year"!=e.type&&"month"!=e.type?a("calendar-day-box",{directives:[{name:"show",rawName:"v-show",value:"day"==e.currentView,expression:"currentView == 'day'"}],attrs:{"box-height":e.boxHeight,"row-height":e.boxHeight/5-8,type:e.type,"min-time":e.minTime,"max-time":e.maxTime,multiple:e.multiple,range:e.range},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):e._e()],1),a("div",{staticClass:"dsf-calendar-footer"},[a("van-goods-action",[e.type!=e.currentView&&"day"!=e.currentView?a("van-goods-action-icon",{attrs:{icon:"revoke",text:"返回"},on:{click:e.backView}}):e._e(),"year"!=e.currentView?a("van-goods-action-icon",{attrs:{icon:"share-o",text:"跳转"},on:{click:e.chooseActive}}):e._e(),a("van-goods-action-icon",{directives:[{name:"show",rawName:"v-show",value:e.now.getTime()>=e.minTime.MTime&&e.now.getTime()<=e.maxTime.MTime,expression:"now.getTime() >= minTime.MTime && now.getTime() <= maxTime.MTime"}],attrs:{icon:"location-o",text:"今天"},on:{click:function(t){return e.doLocation()}}}),e.clearable?a("van-goods-action-button",{attrs:{type:"info",text:"重 置"},on:{click:e.onReset}}):e._e(),a("van-goods-action-button",{attrs:{type:"primary",text:"确 定"},on:{click:e.onConfirm}})],1)],1),"datetime_s"==e.type||"datetime"==e.type?a("dsf-calendar-time-box",{attrs:{type:e.type,"min-time":e.minTime.time,"max-time":e.maxTime.time}}):e._e()],1)},ye=[],be=(a("99af"),a("cb29"),864e5);function we(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a={Y:e.getFullYear(),M:e.getMonth()+1,D:e.getDate(),h:e.getHours(),m:e.getMinutes(),s:e.getSeconds()};if(t){var i=xe(a.Y,a.M,1),n=i.year,s=i.month;a.MTime=new Date(n+"/"+s+"/1").getTime()-1}else a.MTime=new Date(a.Y+"/"+a.M+"/1").getTime();return a.DTime=new Date(a.Y+"/"+a.M+"/"+a.D).getTime(),a.time=new Date("".concat(a.Y,"/").concat(a.M,"/").concat(a.D," ").concat(a.h,":").concat(a.m,":").concat(a.s)).getTime(),a}function xe(e,t,a){if(!a)return{year:e,month:t};var i=t+a,n=i%12||12;return n=n<0?12+n:n,{year:e+Math.floor((i-.1)/12),month:n}}function _e(e,t){if(!e){if("datetime_s"===t)return["----/--/--","--:--:--"];if("datetime"===t)return["----/--/--","--:--"]}return"datetime_s"===t?dsf.date.format(e,"yyyy/mm/dd hh:ii:ss").split(" "):"datetime"===t?dsf.date.format(e,"yyyy/mm/dd hh:ii").split(" "):null}var Ce=function(e){return e<10?"0"+e:e+""},De=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t&&""!=t?e+t:Ce(e)},ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Array(e).fill("").map((function(e,a){return{text:De(a,t),disabled:!1}}))},$e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dsf-calendar-main",style:{height:e.boxHeight+"px"}},[e._m(0),a("div",{ref:"box",staticClass:"dsf-calendar-main__calendar",on:{scroll:e.onScroll}},e._l(e.showCalendar,(function(t,i){var n=t.key,s=t.month,o=t.year,l=t.days;return a("div",{key:n,staticClass:"dsf-calendar-main__calendar-item",style:{height:e.rowHeight*l.length+40+"px"}},[i>e.active-3&&i<e.active+3?[a("div",{staticClass:"dsf-calendar-main__calendar-item-date"},[e._v(e._s(n))]),a("div",{staticClass:"dsf-calendar-main__calendar-item-body day"},[a("div",{staticClass:"dsf-calendar-main__calendar-item-bg"},[a("span",{staticClass:"month"},[e._v(e._s(s))])]),e._l(l,(function(t,i){return a("div",{key:i,staticClass:"dsf-calendar-main__calendar-item-week"},e._l(t,(function(t,i){var n=t.date,l=t.offset;t.active;return a("div",{key:i,staticClass:"dsf-calendar-main__calendar-item-day",class:e.cellClass(n,s,o,l),on:{click:function(t){return e.cellClick(n)}}},[a("span",[e._v(e._s(n.getDate()))])])})),0)}))],2)]:e._e()],2)})),0)])},Se=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dsf-calendar-main__weekdays"},[a("span",{staticClass:"dsf-calendar-main__weekday"},[e._v("一")]),a("span",{staticClass:"dsf-calendar-main__weekday"},[e._v("二")]),a("span",{staticClass:"dsf-calendar-main__weekday"},[e._v("三")]),a("span",{staticClass:"dsf-calendar-main__weekday"},[e._v("四")]),a("span",{staticClass:"dsf-calendar-main__weekday"},[e._v("五")]),a("span",{staticClass:"dsf-calendar-main__weekday"},[e._v("六")]),a("span",{staticClass:"dsf-calendar-main__weekday"},[e._v("日")])])}],Te=a("2909"),Ie={name:"CalendarDayBox",inject:["$calendar"],props:{boxHeight:{type:Number,required:!0},rowHeight:{type:Number,required:!0},type:{type:String,required:!0},minTime:{type:Object,required:!0},maxTime:{type:Object,required:!0},value:{type:Array,required:!0},multiple:{type:Boolean,required:!0},range:{type:Boolean,required:!1}},data:function(){return{loaded:!1,active:0,showCalendar:[],calendar:{}}},computed:{activeMonth:function(){return this.showCalendar.length>this.active?this.showCalendar[this.active]:null}},watch:{"$calendar.currentView":function(e){"day"!=e||this.loaded||(this.loaded=!0,this.doLocation(this.$calendar.defaultViewDate||this.$calendar.now))}},created:function(){this.$calendar.dayView=this.$calendar.$dayView=this},mounted:function(){this.$box=this.$refs.box,"day"==this.$calendar.currentView&&(this.loaded=!0,this.doLocation(this.$calendar.defaultViewDate||this.$calendar.now))},methods:{cellClass:function(e,t,a,i){if(i)return{offset:i};var n={toDay:this.$calendar.now.getTime()==e.getTime(),disabled:this.minTime.DTime>e.getTime()||e.getTime()>this.maxTime.DTime};if(this.range&&this.multiple);else if(this.range&&!this.multiple){if(this.$calendar.tempValue.length>0){var s=this.$calendar.tempValue[0].getTime()-e.getTime();if(s>=0&&s<be&&(n.activeS=!0),2==this.$calendar.tempValue.length){var o=this.$calendar.tempValue[1].getTime()-e.getTime();o>=0&&o<be&&(n.activeE=!0),s<0&&o>=be&&(n.activeC=!0)}}}else this.multiple||this.value.length&&this.value.find((function(t){var a=t.getTime()-e.getTime();return a>=0&&a<be}))&&(n.active=!0);return n},cellClick:function(e){var t=this.minTime.DTime>e.getTime()||e.getTime()>this.maxTime.DTime;t||(this.range&&this.multiple?this.formatValueByCheckboxRange(e):this.range&&!this.multiple?this.formatValueByRadioRange(e):this.multiple?this.formatValueByCheckbox(e):this.formatValueByRadio(e))},formatValueByRadio:function(e){if(["date","month","year"].indexOf(this.type)>-1)this.$calendar.value=[e];else if(["datetime","datetime_s"].indexOf(this.type)>-1){var t,a=dsf.date.format(e,"yyyy/mm/dd");t=this.value.length?dsf.date.format(this.value[0],"datetime"==this.type?"hh:ii:00":"hh:ii:ss"):dsf.date.format(new Date,"datetime"==this.type?"hh:ii:00":"hh:ii:ss"),a=new Date(a+" "+t),this.$calendar.value=[a]}},formatValueByRadioRange:function(e){if(this.$calendar.tempValue.length&&2!=this.$calendar.tempValue.length){var t=this.$calendar.tempValue[0];t>e?this.$calendar.tempValue=[e]:t=e,this.$calendar.tempValue.push(new Date(t.getTime()+be-1)),this.$calendar.value=[Object(Te["a"])(this.$calendar.tempValue)]}else this.$calendar.tempValue=[e],this.$calendar.value=[]},formatValueByCheckbox:function(e){if(["date","month","year","datetime","datetime_s"].indexOf(this.type)>-1){var t=this.value.findIndex((function(t){var a=e.getTime()-t.getTime();return a>=0&&a<be}));t>-1?this.value.splice(t,1):this.value.push(e)}},formatValueByCheckboxRange:function(){},onScroll:function(){var e=this.$box.offsetHeight,t=this.$box.scrollHeight,a=this.$box.scrollTop;if(a<3*e){var i=this.onChange(-3),n=i.height,s=i.n;t+=n,a+=n,this.active+=s}else t-e-a<3*e&&this.onChange(3);var o=t/this.showCalendar.length,l=Math.floor(a/o),r=this.showCalendar.length-Math.floor((t-e-a)/o)-1,u=e/2,c=Math.min(l,r);c=c<0?0:c;var d=Math.max(l,r)+1;for(d=d>this.showCalendar.length?this.showCalendar.length:d;c<d;c++){var h=this.$box.children[c];if(!h)break;var f=h.offsetTop-a;if(f<u&&f+h.offsetHeight>=u){this.active=c;break}}},onChange:function(e){var t=0,a=0;if(e<0)for(var i=this.showCalendar[0],n=-1;n>=e;n--){var s=xe(i.year,i.month,n),o=s.year,l=s.month;if(this.minTime.Y>o||this.minTime.Y==o&&this.minTime.M>l)break;var r=this.setCalendar({year:o,month:l});this.showCalendar.unshift(r),t+=r.height+40,a++}else if(e>0)for(var u=this.showCalendar[this.showCalendar.length-1],c=1;c<=e;c++){var d=xe(u.year,u.month,c),h=d.year,f=d.month;if(this.maxTime.Y<h||this.maxTime.Y==h&&this.maxTime.M<f)break;var p=this.setCalendar({year:h,month:f});this.showCalendar.push(p),t+=p.height+40,a++}return{height:t,n:a}},doLocation:function(e){e=e||this.$calendar.now;var t=e.getFullYear(),a=e.getMonth()+1;this.reset(t,a)},reset:function(e,t){var a=this;(this.minTime.Y>e||this.minTime.Y==e&&this.minTime.M>t)&&(e=this.minTime.Y,t=this.minTime.M),(this.maxTime.Y<e||this.maxTime.Y==e&&this.maxTime.M<t)&&(e=this.maxTime.Y,t=this.maxTime.M),this.showCalendar=[this.setCalendar({year:e,month:t})];var i=this.onChange(-4),n=i.height,s=i.n;this.onChange(4),this.active=s,this.$nextTick((function(){a.$box.scrollTo(0,n+40)}))},setCalendar:function(e){var t=e.year,a=e.month;if(!this.calendar[t+"-"+a]){var i=dsf.date.getCalendar(t,a-1);this.calendar[t+"-"+a]={key:t+"年"+a+"月",year:t,month:a,days:i,height:this.rowHeight*i.length}}return this.calendar[t+"-"+a]}}},Oe=Ie,Ve=Object(le["a"])(Oe,$e,Se,!1,null,null,null),Be=Ve.exports,Pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dsf-calendar-main",style:{height:e.boxHeight+"px"}},[a("div",{ref:"box",staticClass:"dsf-calendar-main__calendar year",on:{scroll:e.onScroll}},e._l(e.showYearE-e.showYearS+1,(function(t){return a("div",{key:(e.year=e.showYearS+t-1)>0?e.year:e.year=e.year-1,staticClass:"dsf-calendar-main__calendar-item year",class:e.cellClass(e.year),on:{click:function(a){return e.cellClick(e.showYearS+t-1)}}},[a("span",[e._v(e._s(e.year))]),e._v("年 ")])})),0)])},Le=[],Ne={name:"CalendarYearBox",inject:["$calendar"],props:{boxHeight:{type:Number,required:!0},type:{type:String,required:!0},minTime:{type:Object,required:!0},maxTime:{type:Object,required:!0},value:{type:Array,required:!0},multiple:{type:Boolean,required:!0},range:{type:Boolean,required:!1}},data:function(){return{showYearS:0,showYearE:0,activeYearS:0,activeYearE:0}},computed:{activeText:function(){return this.activeYearS==this.activeYearE?this.activeYearS+"年":this.activeYearS+"年 - "+this.activeYearE+"年"},showYearMin:function(){var e=this.minTime.Y;return e==-1/0?-1/0:e%4-7+e},showYearMax:function(){var e=this.maxTime.Y;return e==1/0?1/0:8-e%4+e}},watch:{"$calendar.currentView":function(e){if("year"==e){var t=this.$calendar.now.getFullYear();this.$calendar.$monthView&&(t=Math.floor((this.$calendar.$monthView.activeYearS+this.$calendar.$monthView.activeYearE)/2)),this.reset(t)}}},created:function(){this.$calendar.yearView=this.$calendar.$yearView=this},mounted:function(){var e;(this.$box=this.$refs.box,"year"==this.$calendar.currentView)&&this.reset((null===(e=this.$calendar.defaultViewDate)||void 0===e?void 0:e.getFullYear())||this.$calendar.now.getFullYear())},methods:{cellClass:function(e){var t=this.$calendar.now.getFullYear(),a={};if(this.minTime.Y>e||this.maxTime.Y<e?a.disabled=!0:t==e&&(a.toDay=!0),this.range&&this.multiple);else if(this.range&&!this.multiple){if(this.$calendar.tempValue.length>0){var i=this.$calendar.tempValue[0].getFullYear();if(i==e&&(a.activeS=!0),2==this.$calendar.tempValue.length){var n=this.$calendar.tempValue[1].getFullYear();n==e&&(a.activeE=!0),i<e&&n>e&&(a.activeC=!0)}}}else this.multiple||this.value.length&&e==this.value[0].getFullYear()&&(a.active=!0);return a},cellClick:function(e){e=e<1?e-1:e,"year"!=this.type?this.$emit("change",e):this.range&&this.multiple?this.formatValueByCheckboxRange(e):this.range&&!this.multiple?this.formatValueByRadioRange(e):this.multiple?this.formatValueByCheckbox(e):this.formatValueByRadio(e)},formatValueByCheckbox:function(e){var t=this.value.findIndex((function(t){return t.getFullYear()==e}));-1==t?this.$calendar.value.push(new Date("".concat(e,"/1/1"))):this.$calendar.value.splice(t,1)},formatValueByRadio:function(e){this.$calendar.value=[new Date("".concat(e,"/1/1"))]},formatValueByCheckboxRange:function(e){},formatValueByRadioRange:function(e){if(this.$calendar.tempValue.length&&2!=this.$calendar.tempValue.length){var t=this.$calendar.tempValue[0],a=t.getFullYear();a>e?this.$calendar.tempValue=[new Date("".concat(e,"/1/1"))]:a=e,this.$calendar.tempValue.push(new Date("".concat(a,"/12/31 23:59:59"))),this.$calendar.value=[Object(Te["a"])(this.$calendar.tempValue)]}else this.$calendar.tempValue=[new Date("".concat(e,"/1/1"))],this.$calendar.value=[this.$calendar.tempValue[0]]},onScroll:function(){var e=this.$box.offsetHeight,t=this.$box.scrollHeight,a=this.$box.scrollTop;if(this.showYearS>=this.showYearMin&&a<3*e){var i=this.showYearS-32;this.showYearS=i=i<this.showYearMin?this.showYearMin:i}else if(this.showYearE<=this.showYearMax&&t-e-a<3*e){var n=this.showYearE+32;this.showYearE=n>this.showYearMax?this.showYearMax:n}this.updateActive(t,a,e)},doLocation:function(e){e=e||this.$calendar.now;var t=e.getFullYear();this.reset(t)},reset:function(e){var t=this,a=this.$box.children[0].offsetHeight,i=a?4*Math.floor(3.5*this.boxHeight/a):72,n=(e-1)%4,s=e-n-i,o=e-n+i;this.showYearS=s=s<this.showYearMin?this.showYearMin:s,this.showYearE=o=o>this.showYearMax?this.showYearMax:o,this.$nextTick((function(){a=t.$box.children[0].offsetHeight,t.$box.scrollTo(0,a*(.5+Math.floor((e-s)/4))-t.boxHeight/2),t.$nextTick((function(){var e=t.$box.offsetHeight,a=t.$box.scrollHeight,i=t.$box.scrollTop;t.updateActive(a,i,e)}))}))},updateActive:function(e,t,a){var i=this.$box.children[0].offsetHeight,n=4*Math.floor(t/i+.4)+this.showYearS,s=4*Math.floor((t+a)/i+.6)+this.showYearS-1;this.activeYearS=n<this.showYearS?this.showYearS:n,this.activeYearE=s>this.showYearE?this.showYearE:s}}},Me=Ne,je=Object(le["a"])(Me,Pe,Le,!1,null,null,null),Re=je.exports,Ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dsf-calendar-main",style:{height:e.boxHeight+"px"}},[a("div",{ref:"box",staticClass:"dsf-calendar-main__calendar",on:{scroll:e.onScroll}},e._l(e.showMonthE-e.showMonthS+1,(function(t){return a("div",{key:(e.year=e.showMonthS+t-1)>0?e.year:e.year=e.year-1,staticClass:"dsf-calendar-main__calendar-item"},[a("div",{staticClass:"dsf-calendar-main__calendar-item-date"},[e._v(e._s(e.year)+"年")]),a("div",{staticClass:"dsf-calendar-main__calendar-item-body month"},e._l(12,(function(i){return a("div",{key:i,staticClass:"dsf-calendar-main__calendar-item-month",class:e.cellClass(e.year,i),on:{click:function(a){return e.cellClick(e.showMonthS+t-1,i)}}},[a("span",[e._v(e._s(i))]),e._v("月 ")])})),0)])})),0)])},Fe=[],Ae={name:"CalendarMonthBox",inject:["$calendar"],props:{boxHeight:{type:Number,required:!0},type:{type:String,required:!0},minTime:{type:Object,required:!0},maxTime:{type:Object,required:!0},value:{type:Array,required:!0},multiple:{type:Boolean,required:!0},range:{type:Boolean,required:!1}},data:function(){return{showMonthS:0,showMonthE:0,activeYearS:0,activeYearE:0}},computed:{activeText:function(){return this.activeYearS==this.activeYearE?this.activeYearS+"年":this.activeYearS+"年 - "+this.activeYearE+"年"}},watch:{"$calendar.currentView":function(e,t){if("year"!=t&&"month"==e){var a,i=null===(a=this.$calendar.$dayView)||void 0===a?void 0:a.activeMonth,n=i&&i.year||this.$calendar.now.getFullYear();this.reset(n)}}},created:function(){this.$calendar.monthView=this.$calendar.$monthView=this},mounted:function(){var e;(this.$box=this.$refs.box,"month"==this.$calendar.currentView)&&this.reset((null===(e=this.$calendar.defaultViewDate)||void 0===e?void 0:e.getFullYear())||this.$calendar.now.getFullYear())},methods:{cellClass:function(e,t){var a=this.$calendar.now.getFullYear(),i=this.$calendar.now.getMonth()+1,n={};if(this.minTime.Y>e||this.maxTime.Y<e||this.minTime.Y==e&&this.minTime.M>t||this.maxTime.Y==e&&this.maxTime.M<t?n.disabled=!0:a==e&&t==i&&(n.toDay=!0),this.range&&this.multiple);else if(this.range&&!this.multiple){if(this.$calendar.tempValue.length>0){var s=this.$calendar.tempValue[0].getFullYear(),o=this.$calendar.tempValue[0].getMonth()+1;if(s==e&&o==t&&(n.activeS=!0),2==this.$calendar.tempValue.length){var l=this.$calendar.tempValue[1].getFullYear(),r=this.$calendar.tempValue[1].getMonth()+1;l==e&&r==t&&(n.activeE=!0),(s<e||s==e&&o<t)&&(l>e||l==e&&r>t)&&(n.activeC=!0)}}}else this.multiple||this.value.length&&this.value.find((function(a){return e==a.getFullYear()&&t==a.getMonth()+1}))&&(n.active=!0);return n},cellClick:function(e,t){e=e<1?e-1:e,"month"!=this.type?this.$emit("change",e,t):this.range&&this.multiple?this.formatValueByCheckboxRange(e,t):this.range&&!this.multiple?this.formatValueByRadioRange(e,t):this.multiple?this.formatValueByCheckbox(e,t):this.formatValueByRadio(e,t)},formatValueByCheckbox:function(e,t){var a=this.value.findIndex((function(a){return a.getFullYear()==e&&a.getMonth()+1==t}));-1==a?this.$calendar.value.push(new Date("".concat(e,"/").concat(t,"/1"))):this.$calendar.value.splice(a,1)},formatValueByRadio:function(e,t){this.$calendar.value=[new Date("".concat(e,"/").concat(t,"/1"))]},formatValueByCheckboxRange:function(e,t){},formatValueByRadioRange:function(e,t){if(this.$calendar.tempValue.length&&2!=this.$calendar.tempValue.length){var a=this.$calendar.tempValue[0],i=a.getFullYear(),n=a.getMonth()+1;i>e||i==e&&n>t?this.$calendar.tempValue=[new Date("".concat(e,"/").concat(t,"/1"))]:(i=e,n=t);var s=xe(i,n,1),o=s.year,l=s.month;a=new Date("".concat(o,"/").concat(l,"/1")),this.$calendar.tempValue.push(new Date(a.getTime()-1)),this.$calendar.value=[Object(Te["a"])(this.$calendar.tempValue)]}else this.$calendar.tempValue=[new Date("".concat(e,"/").concat(t,"/1"))],this.$calendar.value=[this.$calendar.tempValue[0]]},doLocation:function(e){e=e||this.$calendar.now;var t=e.getFullYear();this.reset(t)},reset:function(e){var t=this,a=this.$box.children[0].offsetHeight,i=a?Math.floor(3.5*this.boxHeight/a):4,n=e-i,s=e+i;this.showMonthS=n=n<this.minTime.Y?this.minTime.Y:n,this.showMonthE=s=s>this.maxTime.Y?this.maxTime.Y:s;var o=this.showMonthE-this.showMonthS+1;o<2?(this.activeYearS=this.showMonthS,this.activeYearE=this.showMonthE):2==o?this.$nextTick((function(){t.updateActive(t.$box.offsetHeight,0,t.boxHeight)})):this.$nextTick((function(){t.$box.scrollTo(0,a*(.5+e-n)-t.boxHeight/2+20),t.$nextTick((function(){var e=t.$box.offsetHeight,a=t.$box.scrollHeight,i=t.$box.scrollTop;t.updateActive(a,i,e)}))}))},onScroll:function(){var e=this.$box.offsetHeight,t=this.$box.scrollHeight,a=this.$box.scrollTop;if(this.showMonthS>=this.minTime.Y&&a<3*e){var i=this.showMonthS-8;this.showMonthS=i<this.minTime.Y?this.minTime.Y:i}else if(this.showMonthE<=this.maxTime.Y&&t-e-a<3*e){var n=this.showMonthE+8;this.showMonthE=n>this.maxTime.Y?this.maxTime.Y:n}this.updateActive(t,a,e)},updateActive:function(e,t,a){var i=this.$box.children[0].offsetHeight,n=Math.floor((t+20)/i)+this.showMonthS,s=Math.floor((t+a-10)/i-.1)+this.showMonthS;this.activeYearS=n<this.showMonthS?this.showMonthS:n,this.activeYearE=s>this.showMonthE?this.showMonthE:s}}},He=Ae,qe=Object(le["a"])(He,Ee,Fe,!1,null,null,null),Ue=qe.exports,Ye={name:"DsfCalendar",components:{CalendarDayBox:Be,CalendarYearBox:Re,CalendarMonthBox:Ue},provide:function(){return{$calendar:this}},props:{show:{type:Boolean,default:!1},defaultValue:{type:[Date,Array],required:!1},type:{type:String,default:"date"},multiple:{type:Boolean,default:!1},range:{type:Boolean,default:!1},minDate:{type:Date,required:!1},maxDate:{type:Date,required:!1},defaultView:{type:String,default:"day"},defaultViewDate:{type:Date,required:!1},clearable:{type:Boolean,default:!1}},data:function(){return{now:new Date(dsf.date.toDay()),currentView:"day",yearView:{},monthView:{},dayView:{},timeView:{},boxHeight:360,value:[],tempValue:[]}},computed:{minTime:function(){var e=this.minDate;return(!e||e<new Date("1801/01/01"))&&(e=new Date("1801/01/01")),we(e)},maxTime:function(){var e=this.maxDate;return(!e||e>new Date("2500/12/31"))&&(e=new Date("2500/12/31")),we(e,!0)},valueText:function(){var e=[];return this.range?(e.push(_e(this.tempValue.length&&this.tempValue[0],this.type)),e.push(_e(2==this.tempValue.length?this.tempValue[1]:null,this.type))):e.push(_e(this.value.length&&this.value[0],this.type)),e}},watch:{show:{immediate:!0,handler:function(e){e&&("year"==this.type?this.currentView="year":"month"==this.type?this.currentView="year"==this.defaultView?"year":"month":this.currentView=this.defaultView)}},type:function(e){this.currentView="year"==e?"year":"month"==e?"month":"day"}},created:function(){this.initValue(this.defaultValue)},mounted:function(){},methods:{initValue:function(e){e?this.multiple&&this.range||(!this.multiple&&this.range?Array.isArray(e)&&2==e.length&&(this.value=[[e[0],e[1]]],this.tempValue=[e[0],e[1]]):this.multiple?Array.isArray(e)?this.value=e:this.value=[e]:Array.isArray(e)?this.value=[e[0]]:this.value=[e]):this.value=[]},onConfirm:function(){var e=this.value;this.multiple||this.value.length&&(e=e.length?e[0]:null),this.$emit("change",e),this.$emit("confirm",e)},onReset:function(){this.value=[],this.tempValue=[]},chooseTime:function(e){var t=this;"datetime_s"!=this.type&&"datetime"!=this.type||!this.value.length||(this.range?this.$timeView.open(this.value[0][e]).then((function(a){var i=new Date(dsf.date.format(t.value[0][e],"yyyy/mm/dd")+" "+a);t.$set(t.value[0],e,i),t.$set(t.tempValue,e,i)})).catch((function(e){})):this.$timeView.open(this.value[0]).then((function(e){var a=new Date(dsf.date.format(t.value[0],"yyyy/mm/dd")+" "+e);t.$set(t.value,0,a)})))},doLocation:function(e){this.now=new Date(dsf.date.toDay()),e=e||this.now,"day"==this.currentView?this.$dayView.doLocation(e):"month"==this.currentView?this.$monthView.doLocation(e):"year"==this.currentView&&this.$yearView.doLocation(e)},formatter:function(e,t){return"month"===e?"".concat(+t,"月"):"year"===e?"".concat(t,"年"):t},chooseActive:function(){"day"==this.currentView?this.currentView="month":"month"==this.currentView&&(this.currentView="year")},backView:function(){"year"==this.currentView?this.currentView="month":"month"==this.currentView&&(this.currentView="day")},monthChang:function(e,t){var a=this;this.currentView="day",this.$nextTick((function(){a.doLocation(new Date("".concat(e,"/").concat(t,"/1")))}))},yearChang:function(e){var t,a=this;this.currentView="month";var i=(null===(t=this.$dayView)||void 0===t?void 0:t.activeMonth.month)||this.now.getMonth()+1;this.$nextTick((function(){a.doLocation(new Date("".concat(e,"/").concat(i,"/1")))}))}}},ze=Ye,We=Object(le["a"])(ze,ve,ye,!1,null,null,null),Je=We.exports,Ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("van-popup",{attrs:{"get-container":"#app",position:"bottom",round:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("van-picker",{ref:"picker",attrs:{columns:e.columns,title:"选择时间","show-toolbar":""},on:{change:e.onChange,cancel:e.onCancel,confirm:e.onConfirm}})],1)},Qe=[],Ge=(a("a15b"),a("d3b7"),a("e25e"),a("ddb0"),288e5),Xe={name:"DsfCalendarTimeBox",inject:{$calendar:{default:null}},props:{unit:{type:Array,default:function(){return["点","分","秒"]}},type:{type:String,default:"datetime"},minTime:{type:Number,default:-1/0},maxTime:{type:Number,default:1/0},step:{type:Number,default:1}},data:function(){return{show:!1,columns:[]}},computed:{hours:function(){return ke(24,this.unit[0])},minutes:function(){return ke(60,this.unit[1])},seconds:function(){return ke(60,this.unit[2])}},created:function(){this.$calendar&&(this.$calendar.timeView=this.$calendar.$timeView=this)},methods:{updateColumns:function(e,t,a){var i,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4?arguments[4]:void 0,o=[e,t,a,n].join(",");this.lastOpt!=o&&(this.lastOpt=o,t||a||1!=n?i=this.getColumns(t,a,n,s):(this.cache=null,i=[{values:this.hours,defaultIndex:0},{values:this.minutes,defaultIndex:0}]),"datetime_s"==e&&i.push({values:this.seconds,defaultIndex:0}),this.columns=i)},getColumns:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:be,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;a*=6e4;var n,s,o=Math.floor(i/be),l=Math.floor(e/be),r=Math.floor(t/be),u={h:[],H:{}};n=e%be+Ge,s=t%be+Ge,l==r||(o<=l?s=be-1:o>=r?(n=a-((r-l)*be-n)%a,s=t%be):(n=a-((o-l)*be-n)%a,s=be-1));do{var c=De(Math.floor(n/36e5),this.unit[0]),d=De(Math.floor(n%36e5/6e4),this.unit[1]);u.H[c]||(u.H[c]=[],u.h.push({text:c,disabled:!1})),u.H[c].push({text:d,disabled:!1}),n+=a}while(n<=s);return this.cache=u,[{values:u.h,defaultIndex:0},{values:u.H[u.h[0].text],defaultIndex:0}]},setIndexes:function(e){var t=this,a=De(e.getHours(),this.unit[0]);a=this.columns[0].values.findIndex((function(e){var t=e.text;return t==a})),a=a<0?0:a,this.onChange(null,[this.columns[0].values[a]]);var i=De(e.getMinutes(),this.unit[1]);i=this.columns[1].values.findIndex((function(e){var t=e.text;return t==i})),i=i<0?0:i;var n=[a,i];if("datetime_s"==this.type){var s=De(e.getSeconds(),this.unit[2]);s=this.columns[2].values.findIndex((function(e){var t=e.text;return t==s})),s=s<0?0:s,n.push(s)}if(this.$refs.picker)this.$nextTick((function(){t.$refs.picker.setIndexes(n)}));else if(this.columns[0].defaultIndex=a,this.columns[1].defaultIndex=i,"datetime_s"==this.type){var o=De(e.getSeconds(),this.unit[2]);o=this.columns[2].values.findIndex((function(e){var t=e.text;return t==o})),o=o<0?0:o,this.columns[2].defaultIndex=o}},open:function(e){var t=this;this.lastH=null;var a=this.minTime==-1/0?void 0:this.minTime,i=this.maxTime==1/0?void 0:this.maxTime;return this.updateColumns(this.type,a,i,this.step<2?1:this.step,e.getTime()),this.$nextTick((function(){t.setIndexes(e),t.show=!0})),new Promise((function(e,a){t.resolve=e,t.reject=a}))},onCancel:function(){this.show=!1,this.reject(),this.resolve=void 0},onConfirm:function(e){this.show=!1,this.resolve(e.map((function(e){return Ce(parseInt(e.text))})).join(":")),this.reject=void 0},onChange:function(e,t){var a=this,i=Object(n["a"])(t,1),s=i[0];!this.cache||this.lastH&&this.lastH.text==s.text||(this.lastH=s,this.$set(this.columns[1],"values",this.cache.H[s.text]),e&&this.$nextTick((function(){a.$refs.picker.setColumnIndex(1,0)})))}}},Ze=Xe,et=Object(le["a"])(Ze,Ke,Qe,!1,null,null,null),tt=et.exports,at=function(e,t){e.appendChild(t)},it={install:function(e){e.directive("mobileLoading",{bind:function(e,i){var n=new t({el:document.createElement("div"),data:{text:e.getAttribute("load-text")||"加载中"}});e.instance=n,e.mask=n.$el,a(e,e.mask,i)},update:function(e,t){t.oldValue!==t.value&&a(e,e.mask,t)},unbind:function(e,t){e.mask&&e.mask.parentNode&&e.mask.parentNode.removeChild(e.mask),e.instance&&e.instance.$destroy()}});var t=e.extend(me),a=function(t,a,i){at(t,a),i.value?e.nextTick((function(){t.instance.loading=!0;var e=dsf.getCss(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative")})):t.instance.loading=!1}}},nt=0,st={install:function(e){e.directive("mobileScroll",{bind:function(e,t,a,i){if(a.context&&!a.context.isDesign){var n=++nt;e.setAttribute("scroll-id",n)}}})}},ot={install:function(e){e.use(it),e.use(st)}},lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return"popup"==e.type?a("div",[a("van-popup",e._g(e._b({ref:"dialog",staticClass:"ds-dialog mobile",style:{width:e.width,height:e.height},attrs:{"get-container":"body"},on:{closed:e.closeHander},model:{value:e.dialogShow,callback:function(t){e.dialogShow=t},expression:"dialogShow"}},"van-popup",e.$attrs,!1,!0),e.$listeners),[e.hasHeader?a("div",{staticClass:"ds-dialog-header"},[e.showClose?a("div",[e._t("cancel")],2):e._e(),a("div",{class:[{"m-left":e.showClose},"ds-dialog-header-title"]},[e._t("title")],2),a("div",{staticClass:"ds-dialog-header-buttons"},[e._t("buttons")],2)]):e._e(),a("div",{staticClass:"ds-dialog-body"},[e._t("default")],2),a("div",{staticClass:"ds-dialog-footer"},[e._t("buttonBar")],2)])],1):(e.type="dialog")?a("div",[a("van-dialog",e._g(e._b({staticClass:"ds-dialog mobile",style:{width:e.width},attrs:{"get-container":"body","show-confirm-button":e.ShowConfirmButton,"show-cancel-button":e.ShowCancelButton,"cancel-button-text":e.cancelButtonText,"confirm-button-text":e.confirmButtonText},on:{confirm:e.confirm,cancel:e.confirmCancel,closed:e.closeHander},scopedSlots:e._u([{key:"title",fn:function(){return[e._t("title")]},proxy:!0}],null,!0),model:{value:e.dialogShow,callback:function(t){e.dialogShow=t},expression:"dialogShow"}},"van-dialog",e.$attrs,!1,!0),e.$listeners),[[e._t("default")],a("div",{staticClass:"van-hairline--top van-dialog__footer"},[e._t("dialog-buttons")],2)],2)],1):e._e()},rt=[],ut={name:"DsfMobileDialog",inheritAttrs:!1,provide:function(){return{$dialog:this}},props:{type:{type:String,default:function(){return"popup"}},dialogArgs:{type:Object,default:function(){return null}},ShowConfirmButton:{type:Boolean,default:!1},ShowCancelButton:{type:Boolean,default:!1},confirmButtonText:{type:String,default:"确定"},cancelButtonText:{type:String,default:"取消"},width:{type:String,default:"auto"},height:{type:String,default:"auto"},openerVm:{type:Object,default:function(){return null}},hasHeader:{type:Boolean,default:!1},visible:{type:Boolean,default:!1},dialogSure:{type:Function,default:dsf.noop},showClose:{type:Boolean,default:!0}},data:function(){return{dialogShow:!1}},computed:{},watch:{visible:function(e){var t=this;this.$nextTick((function(){t.dialogShow=e}))}},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){var e=this;this.$nextTick((function(){e.dialogShow=e.visible}))},beforeDestroy:function(){},destroyed:function(){var e,t;null===this||void 0===this||null===(e=this.$el)||void 0===e||null===(t=e.parentNode)||void 0===t||t.removeChild(this.$el)},methods:{closeHander:function(){},close:function(){this.$emit("update:visible",!1)},confirm:function(){this.$emit("confirm-sure")},confirmCancel:function(){this.$emit("confirm-cancel"),this.$nextTick((function(){}))}}},ct=ut,dt=Object(le["a"])(ct,lt,rt,!1,null,null,null),ht=dt.exports,ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-page mobile",class:e.getCss,style:e.pageStyle},[a("div",{staticClass:"ds-page-head "},[e.hasHeader?a("div",{ref:"head",staticClass:"head-inner ds-page-head-color",attrs:{"slot-name":e.slots[1].name}},[e._t(e.slots[1].name)],2):e._e()]),a("div",{staticClass:"ds-page-content",style:e.pageContentStyle},[a("div",{directives:[{name:"mobile-scroll",rawName:"v-mobile-scroll"}],staticClass:"ds-page-center",class:e.pageCenterCss,attrs:{"slot-name":e.slots[0].name}},[e._t(e.slots[0].name)],2)]),a("div",{ref:"foot",staticClass:"ds-page-foot ds-page-foot-color",class:{"bottom-safe-area":e.$bottomSafeArea},style:{"background-color":e.footerBackground}},[e.hasFooter?a("div",{ref:"footInner",staticClass:"foot-inner",style:e.footInnerStyle,attrs:{"slot-name":e.slots[2].name}},[e._t(e.slots[2].name)],2):e._e()]),a("div",{staticStyle:{display:"none"},domProps:{innerHTML:e._s(e.customCss)}}),!e.isDesign&&e.gotoIcon?a("a",{directives:[{name:"drag",rawName:"v-drag"}],ref:"eleDesgin",staticClass:"to_desgin",attrs:{"data-flag":"true",title:"进入"+e.title+"设计模式"},on:{click:e.gotoPreview}},[a("i",{staticClass:"iconfont icon-shezhi"})]):e._e()])},pt=[],mt=a("070e"),gt=mt["a"],vt=Object(le["a"])(gt,ft,pt,!1,null,null,null),yt=vt.exports,bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-button-bar mobile",class:e.getCss},["justify-iconleft-buttonright"!=e.align?a("div",{staticClass:"bar-wrap"},[e._l(e.showButtonsReal,(function(t,i){return[a("DsfMobileButton",{key:i,staticClass:"ds-button-bar-item",style:e.getButtonStyle(t),attrs:{icon:e.getIcon(t),title:t.title,disabled:t.disabled,size:e.size,type:t.type,"btn-style":t.btnStyle},on:{click:function(a){return e.clickHandler(t,a)}}},[e._v(" "+e._s(t.text)+" ")])]})),e.moreButtonsReal.length>0?a("DsfMobileButton",{staticClass:"ds-button-bar-item",style:e.getButtonStyle(),attrs:{"btn-style":e.moreButtonStyle,type:"plain",size:e.size,icon:"icon-text"==e.moreButtonStyle?"gengduo1":""},on:{click:e.open}},[e._v(" "+e._s(e.moreButtonText)+" ")]):e._e()],2):"justify-iconleft-buttonright"==e.align?a("div",{staticClass:"bar-wrap"},[a("div",[e._l(e.iconButtons,(function(t,i){return[a("DsfMobileButton",{key:i,staticClass:"ds-button-bar-item",style:e.getButtonStyle(t),attrs:{icon:e.getIcon(t),title:t.title,disabled:t.disabled,size:e.size,type:t.type,"btn-style":t.btnStyle},on:{click:function(a){return e.clickHandler(t,a)}}},[e._v(" "+e._s(t.text)+" ")])]})),e.moreButtonsReal.length>0&&"icon-text"==e.moreButtonStyle?a("DsfMobileButton",{staticClass:"ds-button-bar-item",style:e.getButtonStyle(),attrs:{"btn-style":e.moreButtonStyle,size:e.size,icon:"gengduo1"},on:{click:e.open}},[e._v(" "+e._s(e.moreButtonText)+" ")]):e._e()],2),a("div",[e._l(e.generalButtons,(function(t,i){return[a("DsfMobileButton",{key:i,staticClass:"ds-button-bar-item",style:e.getButtonStyle(t),attrs:{icon:e.getIcon(t),title:t.title,disabled:t.disabled,size:e.size,type:t.type,"btn-style":t.btnStyle},on:{click:function(a){return e.clickHandler(t,a)}}},[e._v(" "+e._s(t.text)+" ")])]})),e.moreButtonsReal.length>0&&"icon-text"!=e.moreButtonStyle?a("DsfMobileButton",{staticClass:"ds-button-bar-item",style:e.getButtonStyle(),attrs:{"btn-style":e.moreButtonStyle,type:"plain",size:e.size,icon:""},on:{click:e.open}},[e._v(" "+e._s(e.moreButtonText)+" ")]):e._e()],2)]):e._e(),e.actionSheetShow?a("van-action-sheet",{attrs:{"get-container":"body"},on:{closed:e.closed},model:{value:e.moreOpen,callback:function(t){e.moreOpen=t},expression:"moreOpen"}},e._l(e.moreButtonsReal,(function(t,i){return a("button",{key:i,staticClass:"van-action-sheet__item",class:{"van-action-sheet__item--disabled":t.disabled},attrs:{type:"button"},on:{click:function(a){return e.clickHandler(t,a)}}},[a("span",{staticClass:"van-action-sheet__name"},[e._v(e._s(t.text))])])})),0):e._e()],1)},wt=[],xt=a("644a"),_t=xt["a"],Ct=Object(le["a"])(_t,bt,wt,!1,null,null,null),Dt=Ct.exports,kt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("van-nav-bar",{attrs:{"left-arrow":e.showBack,border:!0,"left-text":e.showBack?"返回":"",title:e.title},on:{"click-left":e.goBack}})},$t=[],St={name:"DsfDemoBrowserNavBar",props:{title:{type:String,default:"无标题"},goBack:{type:Function,default:dsf.noop},showBack:{type:Boolean,default:!1}},computed:{isDemo:function(){return this.$root.isDemo}},methods:{}},Tt=St,It=Object(le["a"])(Tt,kt,$t,!1,null,null,null),Ot=It.exports,Vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("van-tabbar",{staticClass:"ds-bottom-nav ds_control",attrs:{fixed:!1,"safe-area-inset-bottom":!0},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.buttons,(function(t,i){return a("van-tabbar-item",{key:i,attrs:{name:i},on:{click:function(a){return a.stopPropagation(),e.go(t.href)}}},[a("span",[e._v(e._s(t.text))]),e.active==i?[t.activeIcon?a("DsfIcon",{attrs:{slot:"icon",name:t.activeIcon?t.activeIcon:"yiwen"},slot:"icon"}):t.icon?a("DsfIcon",{attrs:{slot:"icon",name:t.icon?t.icon:"yiwen"},slot:"icon"}):e._e()]:[t.icon?a("DsfIcon",{attrs:{slot:"icon",name:t.icon?t.icon:"yiwen"},slot:"icon"}):e._e()]],2)})),1)},Bt=[],Pt=a("53d8"),Lt=Pt["a"],Nt=Object(le["a"])(Lt,Vt,Bt,!1,null,null,null),Mt=Nt.exports,jt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"container",staticClass:"ds-control mobile ds-banner",class:{"ds-no-padding":!e.padding}},[e.reload?a("van-swipe",{ref:"swipe",style:e.swipeHeight,attrs:{loop:e.loop,autoplay:e.autoPlay,duration:e.duration,height:e.height,"show-indicators":e.showIndicators,vertical:e.vertical,touchable:e.touchable,"indicator-color":e.indicatorColor}},e._l(e.data,(function(t,i){return a("van-swipe-item",{key:"ds-banner-item-"+i},[e._t("default",[a("div",{staticClass:"ds-banner-item",style:e.containerStyles,attrs:{slot:"default"},on:{click:function(a){return e.handleClick(t)}},slot:"default"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.image,expression:"item.image"}],style:e.containerStyles,on:{dragstart:function(e){e.preventDefault(),e.stopPropagation()}}})])],null,t)],2)})),1):e._e(),e.showButton?[a("div",{staticClass:"ds-banner-btn dbt-l",on:{click:e.prev}},[a("i",{staticClass:"iconfont icon-zuo"})]),a("div",{staticClass:"ds-banner-btn dbt-r",on:{click:e.next}},[a("i",{staticClass:"iconfont icon-weibiaoti34"})])]:e._e()],2)},Rt=[],Et=(a("a623"),a("25f0"),a("d631")),Ft=dsf.component({name:"DsfMobileBanner",mixins:[Et["a"]],ctrlCaption:"轮播图",props:{height:{type:String,default:"100px"},list:{type:Array,default:function(){return[]}},url:{type:String,default:""},showButton:{type:Boolean,default:!0},showIndicators:{type:Boolean,default:!0},padding:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},touchable:{type:Boolean,default:!0},indicatorColor:{type:String,default:"#1989fa"},autoPlay:{type:[String,Number],default:3e3},loop:{type:Boolean,default:!0},duration:{type:Number,default:500}},computed:{containerStyles:function(){return{height:dsf.isNumber(this.height)?"".concat(this.height,"px"):this.height}},swipeHeight:function(){return this.vertical?{height:dsf.isNumber(this.height)?"".concat(this.height,"px"):this.height}:{}},swipeProps:function(){return{loop:this.loop}}},data:function(){return{data:[],activeIndex:0,reload:!0}},mounted:function(){},created:function(){this.url?this.loadData():this.data=dsf.mix(!0,[],this.list)},destroyed:function(){},methods:{resize:function(){this.$refs.swipe.resize()},prev:function(){this.$refs.swipe.prev()},next:function(){this.$refs.swipe.next()},handleClick:function(e){e.url&&this.$router.push(e.url)},validateApiFiled:function(e){if(Array.isArray(e.data)){var t=e.data.every((function(e){return"[object Object]"===Object.prototype.toString.call(e)&&Object.prototype.hasOwnProperty.call(e,"image")}));t||console.error("\n            接口数据格式请参考: \n\n            [{\n\n              image: '',\n\n              title: '',\n\n              desc: ''\n\n            }]\n          ")}else console.error("数据源必须为数组")},loadData:function(){var e=this;this.$http.get(this.url).then((function(t){var a=t.data;e.validateApiFiled(a.data),e.data=a.data}))}},watch:{list:function(e,t){this.url||(this.data=dsf.mix(!0,[],e))},vertical:function(e,t){var a=this;this.reload=!1,this.$nextTick((function(){a.reload=!0}))}}}),At=Ft,Ht=Object(le["a"])(At,jt,Rt,!1,null,null,null),qt=Ht.exports,Ut=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control model ds-nav-menu"},[a("van-swipe",[a("van-swipe-item",[e._v("1")]),a("van-swipe-item",[e._v("2")]),a("van-swipe-item",[e._v("3")]),a("van-swipe-item",[e._v("4")])],1)],1)},Yt=[],zt=[{_id:1,picture:"",icon:"icon-location-solid",color:"",bgColor:"",name:"坐标"},{_id:2,picture:"",icon:"icon-xiaolianmanyifuwu",color:"",bgColor:"",name:"笑脸"},{_id:3,picture:"",icon:"icon-tab-addressbook-fill",color:"",bgColor:"",name:"通讯录"},{_id:4,picture:"",icon:"icon-tab_message_d",color:"",bgColor:"",name:"消息中心"}],Wt=dsf.component({name:"DsfMobileNavMenu",mixins:[Et["a"]],ctrlCaption:"快捷菜单",props:{hasMore:{type:Boolean,default:!1},moreUrl:{type:String,default:""},colNum:{type:Number,default:5},rowNum:{type:Number,default:0},maxPageNum:{type:Number,default:0}},data:function(){return{totalPage:1,menuList:[{_id:1,picture:"",icon:"icon-location-solid",color:"",bgColor:"",name:"坐标"},{_id:2,picture:"",icon:"icon-xiaolianmanyifuwu",color:"",bgColor:"",name:"笑脸"},{_id:3,picture:"",icon:"icon-tab-addressbook-fill",color:"",bgColor:"",name:"通讯录"},{_id:4,picture:"",icon:"icon-tab_message_d",color:"",bgColor:"",name:"消息中心"}]}},created:function(){this.formatData(zt)},methods:{init:function(){this.$http.get("menu/findAppList").done((function(e){console.log(e)}))},formatData:function(e){}}}),Jt=Wt,Kt=Object(le["a"])(Jt,Ut,Yt,!1,null,null,null),Qt=Kt.exports,Gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-html"},[e.isDesign?a("div",{staticStyle:{"text-align":"center","background-color":"#fff",padding:"3px 0px","font-style":"italic",color:"#c0c0c0"}},[e._v("html片段")]):a("div",{staticStyle:{"text-align":"center","background-color":"#fff",padding:"20px 0px","font-style":"italic",color:"#c0c0c0"}},[e._v(" html组件因为绑定数据原因只能在正式运行下查看 ")])])},Xt=[],Zt=dsf.component({name:"DsfMobileHtml",ctrlCaption:"Html",mixins:[Et["a"]],props:{html:{type:String,default:""}}}),ea=Zt,ta=Object(le["a"])(ea,Gt,Xt,!1,null,null,null),aa=ta.exports,ia=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("van-row",{staticClass:"ds-control ds-row mobile  ds-no-drop",attrs:{gutter:e.gutter}},[e._t("default")],2)},na=[],sa=a("e788"),oa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("van-col",{staticClass:"ds-control ds-col ds-no-padding mobile",class:e.getCss,style:e.getStyle,attrs:{"slot-name":"default",span:e.span}},[e._t("default")],2)},la=[],ra=dsf.component({name:"DsfMobileCol",mixins:[sa["a"]],ctrlCaption:"栅格列",inject:{parentRow:{default:null}},props:{minHeight:{type:String,default:"0"},height:{type:String,default:"auto"},offset:{type:Number,default:null},slots:{type:Array,default:function(){return[{name:"default",controls:[]}]}},span:{type:Number,default:24}},computed:{getStyle:function(){var e=/(px|em|rem|vh|vw|%)$/g,t=this.height;"number"==dsf.type(this.height)&&(t=this.height+"px"),"auto"==t||e.test(t)||(t=this.height+"px",e.lastIndex=0);var a={height:t};return this.isDesign||this.parentRow.minHeight&&(a["min-height"]=this.parentRow.minHeight+"px"),a}},data:function(){return{}},created:function(){},mounted:function(){}}),ua=ra,ca=Object(le["a"])(ua,oa,la,!1,null,null,null),da=ca.exports,ha=dsf.component({name:"DsfMobileRow",mixins:[sa["a"]],ctrlCaption:"栅格布局",props:{gutter:{type:Number,default:0},minHeight:{type:String,default:"0"},height:{type:String,default:"auto"},slots:{type:Array,default:function(){return[{name:"default",controls:[]}]}}},provide:function(){return{parentRow:this}},data:function(){return{}},computed:{rowHeight:function(){if(this.isDesign)return"100%";var e=this.height;return dsf.isNumber(e)&&(e+="px"),e}},created:function(){},mounted:function(){fa.call(this)},watch:{height:{handler:function(e){if(this.isDesign){var t=e;e||(t="auto"),dsf.isNumber(t)&&(t+="px"),this.$dispatch("design-height-change",t)}},immediate:!0}}});function fa(){if(this.isDesign&&0==this.slots[0].controls.length)for(var e=2,t=0;t<e;t++){var a=24/e,i={height:"auto",span:a};this.slots[0].controls.push(dsf.designer.createMobileComponent(da,i))}}var pa,ma,ga,va,ya=ha,ba=Object(le["a"])(ya,ia,na,!1,null,null,null),wa=ba.exports,xa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isDesign?a("div",{staticClass:"ds-control ds-viewpart mobile ds-no-padding",class:e.getCss},[a("div",{staticClass:"ds-viewparent-desgine-panel"},[a("span",[e._v(e._s(e.path)+"页面片段")])])]):a("div",{staticClass:"ds-control ds-viewpart ds-no-padding",class:e.getCss,style:{"background-color":e.backgroundColor},attrs:{path:e.getPath()}},[e.componentName?a(e.componentName,e._b({ref:"view",tag:"component",attrs:{"name-space":e.nameSpace,"page-name":e.pageName,"query-string":e.params},on:{yes:e.yes}},"component",e.$attrs,!1)):e._e()],1)},_a=[],Ca=a("c44e"),Da=Ca["a"],ka=Object(le["a"])(Da,xa,_a,!1,null,null,null),$a=ka.exports,Sa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-datagrid mobile ds-no-padding",staticStyle:{height:"100%"}},[a("div",{staticClass:"ds-datagrid-search"},[a("van-search",{attrs:{shape:"round",placeholder:e.searchPlaceholder},model:{value:e.searchStr,callback:function(t){e.searchStr=t},expression:"searchStr"}})],1),a("div",{directives:[{name:"mobile-scroll",rawName:"v-mobile-scroll"}],staticClass:"ds-datagrid-wrap",style:{padding:e.$padding}},[e.isDesign?[a("div",{staticClass:"ds-datagrid-item",style:{"border-radius":e.$borderRadius}},[e._t("data-item",[a("DsfMobilGridLayout",{attrs:{areas:e.areas,"is-design":e.isDesign,"design-only-slot":!0,owner:e._self,"grid-rows":e.contentLayout.heights,"grid-columns":e.contentLayout.widths,"grid-template":e.matrix},scopedSlots:e._u([e._l(e.areas,(function(t){return{key:t.name,fn:function(){return[a("div",{key:t.name,staticClass:"grid-area-content",class:t.setting.class,style:{padding:t.setting.padding,height:t.setting.height}},[a("div",{staticClass:"grid-area-content-cell",attrs:{"slot-name":t.name}},[e._t(t.name)],2)])]},proxy:!0}}))],null,!0)}),e.isButtonBar?a("div",{staticClass:"ds-datagrid-item-footer",style:e.rowFooterStyle()},[e._t("row-footer",[e.rowButtons.length<=0?a("span",{staticClass:"ds-datagrid-item-footer-title"},[e._v("按钮栏")]):e._e(),a("DsfMobileButtonBar",{attrs:{size:"small",align:e.rowButtonsAlign,"more-button-text":e.rowButtonsMoreButtonText,"more-button-style":e.rowButtonsMoreButtonStyle,"max-number":e.rowButtonsMaxNumber,buttons:e.rowButtons}})])],2):e._e(),a("div",{staticClass:"data-item-hidden",attrs:{"slot-name":"data-item-hidden"}},[e._t("data-item-hidden",[a("span",[e._v("隐藏区(该区域实际运行时不会输出此段内容)")])])],2)])],2),a("div",{directives:[{name:"show",rawName:"v-show",value:e.rangeWrap.show,expression:"rangeWrap.show"}],staticClass:"selected-range",style:{height:e.rangeWrap.height+"px",width:e.rangeWrap.width+"px",top:e.rangeWrap.top+"px",left:e.rangeWrap.left+"px"}})]:[a("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[a("van-list",{class:[e.splitWidthHorizontal],attrs:{finished:e.finished,"finished-text":e.finishedText},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.data,(function(t,i){return a("div",{key:t._id||e.dsf.uuid(),staticClass:"ds-datagrid-item",style:{"border-radius":e.$borderRadius},on:{click:function(a){return e.itemClickHandler(t,a)}}},[e._t("data-item",[a("DsfMobilGridLayout",{attrs:{areas:e.areas,"is-design":e.isDesign,"design-only-slot":!0,"grid-rows":e.contentLayout.heights,"grid-columns":e.contentLayout.widths,"grid-template":e.matrix},scopedSlots:e._u([e._l(e.areas,(function(n){return{key:n.name,fn:function(){return[a("div",{key:n.name,staticClass:"grid-area-content",class:n.setting.class,style:{"over-flow":"hidden",color:n.setting.color,padding:n.setting.padding,height:n.setting.height}},[a("div",{staticClass:"grid-area-content-cell"},[a("div",{staticClass:"grid-area-conent-wrap",class:["ds-multi-ellipsis-"+n.setting.lineNum],style:{"max-height":n.setting.height,"line-height":n.setting.lineHeight}},[e._t(n.name,null,null,{row:t,$index:i,_self:e._self})],2)])])]},proxy:!0}}))],null,!0)}),e.isButtonBar?a("div",{staticClass:"ds-datagrid-item-footer",style:e.rowFooterStyle()},[e._t("row-footer",[a("DsfMobileButtonBar",{attrs:{size:"small",local:t,"emit-prefix":"row-button","more-button-text":e.rowButtonsMoreButtonText,"more-button-style":e.rowButtonsMoreButtonStyle,"max-number":e.rowButtonsMaxNumber,align:e.rowButtonsAlign,buttons:e.rowButtons}})],null,{row:t,$index:i,_self:e._self})],2):e._e()],null,{row:t,$index:i,_self:e._self})],2)})),0)],1)]],2)])},Ta=[],Ia=a("cdec"),Oa=Ia["a"],Va=Object(le["a"])(Oa,Sa,Ta,!1,null,null,null),Ba=Va.exports,Pa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-form-item ds-textbox mobile",class:e.getCss},[e.simple&&e.readOnly&&!e.isDesign?[a("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]:[a("van-field",{attrs:{placeholder:e.readOnly?"":e.placeholder,type:e.inputType,disabled:e.disabled,"label-width":e.getLabelWidth(!0),label:e.showLabel&&e.label?e.label:"",readonly:e.readOnly,required:!e.readOnly&&e.required,"input-align":e.readOnly?"right":e.inputAlign,"error-message":e.errorsMsg,"error-message-align":e.readOnly?"right":e.inputAlign},on:{blur:e.blurHandler,change:e.changeHandler},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})]],2)},La=[],Na=a("55f5"),Ma=dsf.component({name:"DsfMobileTextbox",mixins:[Na["a"]],ctrlCaption:"文本框",props:{ishideCon:{type:Boolean,default:!1},placeholder:{type:String,default:"请输入"},metadata:{type:Object,default:function(){return dsf.metadata.get("text-meta-data")}},inputAlign:{type:String,default:"right"}},computed:{inputType:function(){return this.ishideCon?"password":"text"},inputValue:{get:function(){return this.value},set:function(e){this.emitValueChange(e)}}},mounted:function(){},methods:{changeHandler:function(){var e=this;this.$dispatch("change",this.value),this.$nextTick((function(){e.emitFormValidate(e.value)}))},blurHandler:function(){this.$dispatch("blur")}}}),ja=Ma,Ra=Object(le["a"])(ja,Pa,La,!1,null,null,null),Ea=Ra.exports,Fa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-form-item ds-textbox mobile",class:e.getCss},[e.simple&&e.readOnly&&!e.isDesign?[a("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]:[a("van-field",{attrs:{placeholder:e.readOnly?"":e.placeholder,disabled:e.disabled,"label-width":e.getLabelWidth(!0),label:e.showLabel&&e.label?e.label:"",required:!e.readOnly&&e.required,"input-align":e.readOnly?"right":e.inputAlign,type:"textarea",autosize:e.inputAutoSize,rows:e.rows,"error-message":e.errorsMsg,"error-message-align":e.readOnly?"right":e.inputAlign},on:{blur:e.blurHandler,change:e.changeHandler},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),e._t("error",[e.errors.length>0?a("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()])]],2)},Aa=[],Ha=dsf.component({name:"DsfMobileTextArea",mixins:[Na["a"]],ctrlCaption:"多行文本",props:{placeholder:{type:String,default:"请输入"},metadata:{type:Object,default:function(){var e=dsf.metadata.get("text-meta-data");return dsf.mix(e.valueAttributes[0],{length:1e3}),e}},inputAlign:{type:String,default:"right"},rows:{type:Number,default:2},isAuto:{type:Boolean,default:!1},maxHeight:{type:Number,default:0},minHeight:{type:Number,default:0}},computed:{inputValue:{get:function(){return this.value},set:function(e){this.emitValueChange(e)}},inputAutoSize:function(){return!!this.isAuto&&(!this.maxHeight&&!this.minHeight||{minHeight:this.minHeight,maxHeight:this.maxHeight})}},mounted:function(){},methods:{changeHandler:function(){var e=this;this.$dispatch("change",this.value),this.$nextTick((function(){e.emitFormValidate(e.value)}))},blurHandler:function(){this.$dispatch("blur")}}}),qa=Ha,Ua=Object(le["a"])(qa,Fa,Aa,!1,null,null,null),Ya=Ua.exports,za=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-form-item ds-textbox mobile",class:e.getCss},[e.simple&&e.readOnly&&!e.isDesign?[a("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1)),e._t("error",[e.errors.length>0?a("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()])]:[e.readOnly?e.readOnly?a("div",{staticClass:"ds-form-readonly"},[a("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))],1):e._e():a("van-field",{class:{"ds-error-border":e.errors.length>0},attrs:{placeholder:e.placeholder,disabled:e.disabled,"label-width":e.getLabelWidth(!0),label:e.showLabel&&e.label?e.label:"",required:!e.readOnly&&e.required,"input-align":e.readOnly?"right":e.inputAlign},on:{focus:e.inputFocusHandler},scopedSlots:e._u([{key:"prefix",fn:function(){return[e._t("prefix")]},proxy:!0},{key:"suffix",fn:function(){return[e._t("suffix")]},proxy:!0}],null,!0),model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),e._t("error",[e.errors.length>0?a("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]),a("DsfMobileDialog",{ref:"mobileDialog",attrs:{position:e.position,width:e.dialogWidth,visible:e.dialogVisible,height:"100%","show-close":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.onDialogClose,open:e.onDialogOpen}},[a("div",{staticClass:"ds-autocomplete-dialog"},[a("form",{attrs:{action:"/"}},[a("van-search",{attrs:{placeholder:"请输入搜索关键词","input-align":"center","show-action":""},on:{input:e.onSearchInput,search:e.onSearch,cancel:e.onSearchCancel},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1),e.showList?a("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onSearchLoad},model:{value:e.searchLoading,callback:function(t){e.searchLoading=t},expression:"searchLoading"}},e._l(e.list,(function(t,i){return a("van-cell",{key:i,attrs:{title:t.label,value:t.value},on:{click:function(a){return e.checkItem(t)}},scopedSlots:e._u([{key:"default",fn:function(){return[a("span")]},proxy:!0},{key:"right-icon",fn:function(){return[t.checked?a("dsf-icon",{attrs:{name:"duigou"}}):e._e()]},proxy:!0}],null,!0)})})),1):[a("van-cell",{staticClass:"search-tags"},e._l(e.searchHistory,(function(t,i){return a("van-tag",{key:i,attrs:{type:"primary",size:"large",plain:"",closeable:""},on:{close:function(a){return e.closeTag(t)},click:function(a){return e.tag2search(t)}}},[e._v(" "+e._s(t)+" ")])})),1),e.searchHistory&&e.searchHistory.length>0?a("p",{staticClass:"search-bottom",on:{click:e.clearTag}},[e._v("清除所有搜索历史")]):e._e()]],2)])]],2)},Wa=[],Ja=a("c68f"),Ka=Ja["a"],Qa=Object(le["a"])(Ka,za,Wa,!1,null,null,null),Ga=Qa.exports,Xa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-form-item ds-ueditor mobile",class:e.getCss},[e.simple&&e.readOnly&&!e.isDesign?[a("DsfTextProxy",e._b({model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}},"DsfTextProxy",e._self.$props,!1))]:[a("p",{staticClass:"van-cell"},[e.showLabel?a("label",[e._v(" "+e._s(e.label))]):e._e()]),e.showEditor&&!e.readOnly?a("quill-editor",{ref:"myQuillEditor",style:{height:e.richTxtHeight+"px",display:"flex","flex-direction":"column"},attrs:{options:e.editorOption},on:{blur:function(t){return e.onEditorBlur(t)},focus:function(t){return e.onEditorFocus(t)},ready:function(t){return e.onEditorReady(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):e._e(),e.isDesign&&e.readOnly?a("div",{class:e.ueditorCss,attrs:{id:"designReadOnly"},domProps:{textContent:e._s(e.msg)}}):e._e()]],2)},Za=[],ei=a("953d"),ti=dsf.component({name:"DsfMobileUeditor",mixins:[Na["a"]],components:{quillEditor:ei["quillEditor"]},ctrlCaption:"富文本",props:{richTxtHeight:{type:Number,default:400},placeholder:{type:String,default:""},metadata:{type:Object,default:function(){return dsf.metadata.get("big-text-meta-data")}},toolBar:{type:Array,default:function(){return["bold","italic","underline","strike","blockquote","code-block",{header:1},{header:2},{list:"ordered"},{list:"bullet"},{script:"sub"},{script:"super"},{indent:"-1"},{indent:"+1"},{direction:"rtl"},{size:["small",!1,"large","huge"]},{header:[1,2,3,4,5,6,!1]},{color:[]},{background:[]},{font:[]},{align:[]},"clean","link","image","video"]}},showLabel:{type:Boolean,default:!0}},computed:{ueditorCss:function(){return this.showLabel?"have-label":""},msg:function(){var e="已经启用只读模式，",t=this.visible?e+"可见":e+"且不可见";return t},inputValue:{get:function(){return this.value},set:function(e){this.emitValueChange(e)}}},watch:{visible:function(e){},readOnly:function(e){},toolBar:function(){this.renderUEditor()},placeholder:function(e){var t=this;this.showEditor=!1,this.editorOption.placeholder=e,this.$nextTick((function(){t.showEditor=!0}))}},data:function(){return{ue:null,ueId:null,uparseId:null,editorOption:{modules:{toolbar:this.toolBar},placeholder:this.placeholder,readOnly:!0,theme:"snow"},showEditor:!0}},mounted:function(){var e=this;e.isDesign||e.readOnly},beforeDestroy:function(){},methods:{onEditorBlur:function(){},onEditorFocus:function(){},onEditorReady:function(){},renderUEditor:function(){var e=this;this.showEditor=!1,this.editorOption.modules.toolbar=this.toolBar,this.$nextTick((function(){e.showEditor=!0}))}}}),ai=ti,ii=Object(le["a"])(ai,Xa,Za,!1,null,null,null),ni=ii.exports,si=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-form-item ds-radioBox mobile",class:e.getCss},[e.simple&&e.readOnly&&!e.isDesign?[a("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]:e.readOnly&&!e.isDesign?[a("van-field",{attrs:{"label-width":e.getLabelWidth(!0),label:e.showLabel&&e.label||"",disabled:e.disabled,readonly:e.readOnly,"input-align":"left"}},[a("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))],1)]:[a("van-field",{attrs:{"label-width":e.getLabelWidth(!0),label:e.showLabel&&e.label||"","input-align":e.inputAlign,disabled:e.disabled},scopedSlots:e._u([{key:"input",fn:function(){return[a("van-radio-group",{attrs:{direction:e.direction,"icon-size":e.iconSize,disabled:e.disabled},on:{change:e.change},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},e._l(e.$items,(function(t){return a("van-radio",{key:t.value,attrs:{name:t.value,shape:e.shape,"label-position":e.labelPosition,disabled:t.disabled||e.disabledItemValues.indexOf(t.value)>-1}},[e._v(" "+e._s(t.text)+" ")])})),1)]},proxy:!0}])})]],2)},oi=[],li=a("0248"),ri=li["a"],ui=Object(le["a"])(ri,si,oi,!1,null,null,null),ci=ui.exports,di=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-form-item ds-checkBox mobile",class:e.getCss},[e.simple&&e.readOnly&&!e.isDesign?[a("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]:e.readOnly&&!e.isDesign?[a("van-field",{attrs:{"label-width":e.getLabelWidth(!0),label:e.showLabel&&e.label||"",disabled:e.disabled,readonly:e.readOnly,"input-align":"left"}},[a("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))],1)]:[a("van-field",{attrs:{"label-width":e.getLabelWidth(!0),label:e.showLabel&&e.label||"","input-align":e.inputAlign,disabled:e.disabled},scopedSlots:e._u([{key:"input",fn:function(){return[a("van-checkbox-group",{attrs:{direction:e.direction,"icon-size":e.iconSize,disabled:e.disabled,max:e.maxChooseNum<0?0:e.maxChooseNum},on:{change:e.change},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},e._l(e.$items,(function(t,i){return a("van-checkbox",{key:t.value,attrs:{name:t.value+"_._"+i,shape:e.shape,"label-position":e.labelPosition,disabled:t.disabled||e.disabledItemValues.indexOf(t.value)>-1}},[e._v(" "+e._s(t.text)+" ")])})),1)]},proxy:!0}])})]],2)},hi=[],fi=a("b773"),pi=fi["a"],mi=Object(le["a"])(pi,di,hi,!1,null,null,null),gi=mi.exports,vi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-form-item mobile ds-datachoice",class:e.getCss},[e.simple&&e.readOnly&&!e.isDesign?[a("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1)),e._t("error",[e.errors.length>0?a("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e()])]:e.readOnly&&!e.isDesign?[a("van-field",{attrs:{"label-width":e.getLabelWidth(!0),label:e.showLabel&&e.label||"数据选择",disabled:e.disabled,readonly:""}},[a("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))],1)]:[a("van-field",{attrs:{disabled:e.disabled,"label-width":e.getLabelWidth(!0),label:e.showLabel&&e.label?e.label:"数据选择",required:!e.readOnly&&e.required,readonly:""},scopedSlots:e._u([e.readOnly||e.disabled?null:{key:"right-icon",fn:function(){return[a("i",{staticClass:"iconfont icon-icon_tianjia",on:{click:function(t){e.popupShow=!0}}})]},proxy:!0}],null,!0)}),e.readOnly||e.disabled?e._e():a("div",{staticClass:"tags"},e._l(e.value,(function(t){return a("van-tag",{key:t.value,ref:t.value,refInFor:!0,attrs:{closeable:"",size:"medium"},on:{close:function(a){return e.removeTag(t)}}},[e._v(" "+e._s(t.text)+" ")])})),1)],a("van-popup",{staticClass:"van-popup_dataChoice",style:{height:e.dialogHeight,width:e.dialogWidth},attrs:{position:"bottom","close-on-popstate":!0},model:{value:e.popupShow,callback:function(t){e.popupShow=t},expression:"popupShow"}},[a("div",{staticClass:"van-popup_top"},[a("span",{staticClass:"btn",on:{click:function(t){e.popupShow=!1}}},[e._v("取消")]),e._v(" "+e._s(e.dialogTitle)+" "),a("span",{staticClass:"btn",on:{click:e.popupYes}},[e._v("确定")])]),a("div",{staticClass:"main",style:{height:e.mainHeight}},[a("DsfMobileViewPart",e._b({ref:"popupVm",attrs:{path:e.$replace(e.dialogUrl,e.$vm||{}),"show-model":"full"}},"DsfMobileViewPart",{choiceParams:e.popupParams()},!1))],1)])],2)},yi=[],bi=a("8151"),wi=bi["a"],xi=Object(le["a"])(wi,vi,yi,!1,null,null,null),_i=xi.exports,Ci=dsf.component({name:"DsfMobileOuaSelect",mixins:[_i],ctrlCaption:"部门人员选择器",props:{label:{type:String,default:"数据选择"}}}),Di=Ci,ki=Object(le["a"])(Di,pa,ma,!1,null,null,null),$i=ki.exports,Si=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-form-item ds-select mobile",class:e.getCss},[e.simple&&e.readOnly&&!e.isDesign?[a("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]:e.readOnly&&!e.isDesign?[a("van-field",{attrs:{"label-width":e.getLabelWidth(!0),label:e.showLabel&&e.label||"",disabled:e.disabled,readonly:e.readOnly,"input-align":"left"},scopedSlots:e._u([{key:"input",fn:function(){return[a("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.valueProxy,callback:function(t){e.valueProxy=t},expression:"valueProxy"}},"DsfTextProxy",e._self.$props,!1))]},proxy:!0}])})]:[a("van-field",e._g(e._b({scopedSlots:e._u([{key:"input",fn:function(){return[a("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.valueProxy,callback:function(t){e.valueProxy=t},expression:"valueProxy"}},"DsfTextProxy",e._self.$props,!1))]},proxy:!0}])},"van-field",e.attr,!1),e.events)),e.multiple?a("van-popup",{attrs:{"get-container":"#app",position:"bottom",round:""},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[a("van-multiple-picker",{ref:"picker",attrs:{show:e.showPicker,columns:e.$items,"value-key":"value","show-toolbar":""},on:{cancel:function(t){e.showPicker=!1},confirm:e.onConfirm}})],1):a("van-popup",{attrs:{"get-container":"#app",position:"bottom",round:""},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[a("van-picker",{ref:"picker",attrs:{columns:e.$items,"value-key":"text","show-toolbar":""},on:{cancel:function(t){e.showPicker=!1},confirm:e.onConfirm}})],1)]],2)},Ti=[],Ii=a("4ff8"),Oi=Ii["a"],Vi=Object(le["a"])(Oi,Si,Ti,!1,null,null,null),Bi=Vi.exports,Pi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-form-item ds-treeinfo mobile",class:e.getCss},[e.simple&&e.readOnly&&!e.isDesign?[a("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]:[e.readOnly?e._e():a("van-field",{attrs:{type:"text",required:e.required,"input-align":"right",disabled:e.disabled,"label-width":e.getLabelWidth(!0),label:e.showLabel&&e.label?e.label:""},on:{input:e.inputChangeHandler,blur:e.inputBlurHandler},model:{value:e.inputValue.pid,callback:function(t){e.$set(e.inputValue,"pid",t)},expression:"inputValue.pid"}}),e.readOnly?a("van-field",{attrs:{type:"text",disabled:e.disabled,required:e.required,"input-align":"right","label-width":e.getLabelWidth(!0),label:e.showLabel&&e.label?e.label:""},model:{value:e.inputValue.pid,callback:function(t){e.$set(e.inputValue,"pid",t)},expression:"inputValue.pid"}}):e._e()]],2)},Li=[],Ni=dsf.component({name:"DsfMobileTreeInfo",mixins:[Na["a"]],ctrlCaption:"树结构",props:{caption:{type:String,default:"treeinfo"},label:{type:String,default:"树结构"},pidExpress:{type:String,default:""},iconExpress:{type:String,default:""},iconMap:{type:Array,default:function(){return[]}},showLabel:{type:Boolean,default:!0},value:{type:[String,Object],default:function(){return{pid:"",icon:""}}},visible:{type:Boolean,default:!1},metadata:{type:Object,default:function(){return dsf.metadata.get("tree-info-meta-data")}}},data:function(){return{}},computed:{inputValue:{get:function(){return this.value},set:function(e){void 0!=e&&("string"==typeof e?this.value.pid=e:this.value={pid:e.pid,icon:e.icon}),this.emitValueChange(this.value)}}},created:function(){this.pidExpress&&(this.value.pid=this.pidExpress.getValueString(",")),this.iconExpress&&(this.value.icon=this.iconExpress.getValueString(","))},methods:{inputChangeHandler:function(){this.$dispatch("change"),this.emitValueChange(this.value)},inputBlurHandler:function(){this.$dispatch("blur"),this.emitValueChange(this.value)}},design:{layout:{nameValidate:!1}}}),Mi=Ni,ji=Object(le["a"])(Mi,Pi,Li,!1,null,null,null),Ri=ji.exports,Ei=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control mobile ds-ouaselect"},[a("div",{ref:"header",staticClass:"header"},[a("div",[a("span",{staticClass:"nav",on:{click:function(t){return e.changeNav(0)}}},[e._v(e._s(e.label))]),e._l(e.navs,(function(t,i){return a("span",{key:i,staticClass:"nav",on:{click:function(t){return e.changeNav(i+1)}}},[a("van-icon",{attrs:{name:"arrow"}}),e._v(e._s(t._name)+" ")],1)}))],2),a("van-checkbox",{staticClass:"tool",on:{click:e.checkAll},model:{value:e.chooseAllState,callback:function(t){e.chooseAllState=t},expression:"chooseAllState"}},[e._v(" 全选 ")])],1),a("div",{staticClass:"main",style:{height:e.mainHeight}},[a("van-checkbox-group",{model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},[a("van-cell-group",e._l(e.list,(function(t,i){return a("van-cell",{key:i,staticClass:"ds-multi-ellipsis-2",attrs:{border:!1},on:{click:function(a){return e.toggle(i,t)}},scopedSlots:e._u([{key:"title",fn:function(){return[a("van-checkbox",{ref:"checkboxes",refInFor:!0,attrs:{name:t,disabled:t.disabled}},[e._v(" "+e._s(t._name)+" ")])]},proxy:!0},t.children&&t.children.length>0?{key:"right-icon",fn:function(){return[a("div",{staticClass:"to-children",on:{click:function(a){return a.stopPropagation(),e.toChildren(t)}}},[a("i",{staticClass:"iconfont icon-zuzhixiaxia"}),e._v(" 下级 ")])]},proxy:!0}:null],null,!0)})})),1)],1)],1),a("div",{ref:"footer",staticClass:"footer"},[a("span",{on:{click:e.showResultPopup}},[e._v(" 已选择"+e._s(e.result.length)+"个 "),e.result.length>0?a("van-icon",{attrs:{name:"arrow-up"}}):e._e()],1)]),a("van-popup",{style:{height:"100%"},attrs:{position:"bottom","close-on-popstate":!0},model:{value:e.showResult,callback:function(t){e.showResult=t},expression:"showResult"}},[a("div",{staticClass:"top"},[a("span",{staticClass:"btn",on:{click:function(t){e.showResult=!1}}},[e._v("取消")]),e._v(" 已选择数量:"+e._s(e.resultPopup.length)+" "),a("span",{staticClass:"btn",on:{click:function(t){return e.deleteResult()}}},[e._v("确定")])]),e._l(e.resultPopup,(function(t,i){return a("van-cell-group",{key:i},[a("van-cell",{attrs:{title:t._name},scopedSlots:e._u([{key:"right-icon",fn:function(){return[a("van-icon",{attrs:{name:"close"},on:{click:function(a){return e.deleteResultPopup(t._id,i)}}})]},proxy:!0}],null,!0)})],1)}))],2)],1)},Fi=[],Ai=a("fc6b"),Hi=Ai["a"],qi=Object(le["a"])(Hi,Ei,Fi,!1,null,null,null),Ui=qi.exports,Yi=dsf.component({name:"DsfMobileCheckNode",mixins:[Ui],ctrlCaption:"部门人员选择页面",props:{label:{type:String,default:"部门人员选择"}}}),zi=Yi,Wi=Object(le["a"])(zi,ga,va,!1,null,null,null),Ji=Wi.exports,Ki=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-form-item ds-system mobile",class:e.getCss},[e.simple&&e.readOnly&&!e.isDesign?[e._v(" "+e._s(e._f("proxy")(e.getValueString,e.formatter))+" "),a("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]:[a("van-field",{attrs:{readonly:"",label:e.showLabel&&e.label?e.label:"","label-width":e.getLabelWidth(!0),required:e.required,"input-align":"right"},model:{value:e.getValueString,callback:function(t){e.getValueString=t},expression:"getValueString"}})]],2)},Qi=[],Gi=dsf.component({name:"DsfMobileUpdateTime",mixins:[Na["a"]],ctrlCaption:"修改时间",props:{caption:{type:String,default:dsf.config.kw.updatetime},label:{type:String,default:"修改时间"},formatter:{type:String,default:"dateTime^yyyy-mm-dd hh:ii"},simple:{type:Boolean,default:!1},showLabel:{type:Boolean,default:!0},visible:{type:Boolean,default:!0},metadata:{type:Object,default:function(){return dsf.metadata.get("system-meta-data",{code:dsf.config.kw.updatetime,valueAttributes:[{name:"修改时间",code:dsf.config.kw.updatetime,type:dsf.metadata.getDataType("date"),length:"",defaultValue:null,unit:null}]})}}},computed:{getValueString:{get:function(){return this.value},set:function(e){this.emitValueChange(e)}}}}),Xi=Gi,Zi=Object(le["a"])(Xi,Ki,Qi,!1,null,null,null),en=Zi.exports,tn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-form-item ds-system mobile",class:e.getCss},[e.simple&&e.readOnly&&!e.isDesign?[e._v(" "+e._s(e._f("proxy")(e.getValueString,e.formatter))+" "),a("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]:[a("van-field",{attrs:{readonly:"",label:e.showLabel&&e.label?e.label:"","label-width":e.getLabelWidth(!0),required:e.required,"input-align":"right"},model:{value:e.getValueString,callback:function(t){e.getValueString=t},expression:"getValueString"}})]],2)},an=[],nn=dsf.component({name:"DsfMobileCreateTime",mixins:[Na["a"]],ctrlCaption:"创建时间",props:{caption:{type:String,default:dsf.config.kw.createtime},label:{type:String,default:"创建时间"},simple:{type:Boolean,default:!1},formatter:{type:String,default:"dateTime^yyyy-mm-dd hh:ii"},showLabel:{type:Boolean,default:!0},visible:{type:Boolean,default:!0},metadata:{type:Object,default:function(){return dsf.metadata.get("system-meta-data",{code:dsf.config.kw.createtime,valueAttributes:[{name:"创建时间",code:dsf.config.kw.createtime,type:dsf.metadata.getDataType("date"),length:"",defaultValue:null,unit:null}]})}}},computed:{getValueString:{get:function(){return this.value},set:function(e){this.emitValueChange(e)}}}}),sn=nn,on=Object(le["a"])(sn,tn,an,!1,null,null,null),ln=on.exports,rn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-form-item ds-system mobile",class:e.getCss},[e.simple&&e.readOnly&&!e.isDesign?[a("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]:[a("van-field",{attrs:{readonly:"",label:e.showLabel&&e.label?e.label:"","label-width":e.getLabelWidth(!0),required:e.required,"input-align":"right"},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})]],2)},un=[],cn=dsf.component({name:"DsfMobileUpdateUserName",mixins:[Na["a"]],ctrlCaption:"修改人",props:{caption:{type:String,default:dsf.config.kw.updateusername},label:{type:String,default:"修改人"},showLabel:{type:Boolean,default:!0},simple:{type:Boolean,default:!1},metadata:{type:Object,default:function(){return dsf.metadata.get("system-meta-data",{code:dsf.config.kw.updateusername,valueAttributes:[{name:"修改人姓名",code:dsf.config.kw.updateusername,type:dsf.metadata.getDataType("string"),length:"50",defaultValue:null,unit:null}]})}}},computed:{inputValue:{get:function(){return this.value},set:function(e){this.emitValueChange(e)}}}}),dn=cn,hn=Object(le["a"])(dn,rn,un,!1,null,null,null),fn=hn.exports,pn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-form-item ds-system mobile",class:e.getCss},[e.simple&&e.readOnly&&!e.isDesign?[a("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]:[a("van-field",{attrs:{readonly:"",label:e.showLabel&&e.label?e.label:"","label-width":e.getLabelWidth(!0),required:e.required,"input-align":"right"},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})]],2)},mn=[],gn=dsf.component({name:"DsfMobileCreateUserName",mixins:[Na["a"]],ctrlCaption:"创建人",props:{caption:{type:String,default:dsf.config.kw.createusername},label:{type:String,default:"创建人"},simple:{type:Boolean,default:!1},showLabel:{type:Boolean,default:!0},metadata:{type:Object,default:function(){return dsf.metadata.get("system-meta-data",{code:dsf.config.kw.createusername,valueAttributes:[{name:"创建人姓名",code:dsf.config.kw.createusername,type:dsf.metadata.getDataType("string"),length:"50",defaultValue:null,unit:null}]})}}},computed:{inputValue:{get:function(){return this.value},set:function(e){this.emitValueChange(e)}}}}),vn=gn,yn=Object(le["a"])(vn,pn,mn,!1,null,null,null),bn=yn.exports,wn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-form-item ds-system mobile",class:e.getCss},[e.simple&&e.readOnly&&!e.isDesign?[a("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]:[a("van-field",{attrs:{readonly:"",label:e.showLabel&&e.label?e.label:"","label-width":e.getLabelWidth(!0),required:e.required,"input-align":"right"},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})]],2)},xn=[],_n=dsf.component({name:"DsfMobileCreateUserId",mixins:[Na["a"]],ctrlCaption:"创建人ID",props:{caption:{type:String,default:dsf.config.kw.createuserid},label:{type:String,default:"创建人ID"},simple:{type:Boolean,default:!1},showLabel:{type:Boolean,default:!0},metadata:{type:Object,default:function(){return dsf.metadata.get("system-meta-data",{code:dsf.config.kw.createuserid,valueAttributes:[{name:"创建人ID",code:dsf.config.kw.createuserid,type:dsf.metadata.getDataType("string"),length:"50",defaultValue:null,unit:null}]})}}},computed:{inputValue:{get:function(){return this.value},set:function(e){this.emitValueChange(e)}}}}),Cn=_n,Dn=Object(le["a"])(Cn,wn,xn,!1,null,null,null),kn=Dn.exports,$n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-form-item ds-system mobile",class:e.getCss},[e.simple&&e.readOnly&&!e.isDesign?[a("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]:[a("van-field",{attrs:{readonly:"",label:e.showLabel&&e.label?e.label:"","label-width":e.getLabelWidth(!0),required:e.required,"input-align":"right"},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})]],2)},Sn=[],Tn=dsf.component({name:"DsfMobileUpdateUserId",mixins:[Na["a"]],ctrlCaption:"修改人ID",props:{caption:{type:String,default:dsf.config.kw.updateuserid},label:{type:String,default:"修改人ID"},simple:{type:Boolean,default:!1},showLabel:{type:Boolean,default:!0},metadata:{type:Object,default:function(){return dsf.metadata.get("system-meta-data",{code:dsf.config.kw.updateuserid,valueAttributes:[{name:"修改人ID",code:dsf.config.kw.updateuserid,type:dsf.metadata.getDataType("string"),length:"50",defaultValue:null,unit:null}]})}}},computed:{inputValue:{get:function(){return this.value},set:function(e){this.emitValueChange(e)}}}}),In=Tn,On=Object(le["a"])(In,$n,Sn,!1,null,null,null),Vn=On.exports,Bn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-form-item ds-system mobile",class:e.getCss},[e.simple&&e.readOnly&&!e.isDesign?[a("DsfTextProxy",e._b({model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}},"DsfTextProxy",e._self.$props,!1))]:[e.readOnly?e._e():a("van-field",{class:{"ds-error-border":e.errors.length>0},attrs:{placeholder:e.placeholder,type:"text","input-align":"right","label-width":e.getLabelWidth(!0),disabled:e.disabled,required:e.required,label:e.showLabel&&e.label?e.label:""},on:{blur:e.inputBlurHandler,input:e.inputChangeHandler},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),e.readOnly?a("van-field",{attrs:{label:e.showLabel&&e.label?e.label:"",disabled:e.disabled,"input-align":"right"},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):e._e()]],2)},Pn=[],Ln=dsf.component({name:"DsfMobileOrder",mixins:[Na["a"]],ctrlCaption:"排序码",props:{caption:{type:String,default:dsf.config.kw.order},simple:{type:Boolean,default:!1},label:{type:String,default:"排序码"},placeholder:{type:String,default:"请输入排序编号"},showLabel:{type:Boolean,default:!0},required:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1},error_tipsPosition:{type:String,default:"left"},metadata:{type:Object,default:function(){return dsf.metadata.get("system-meta-data",{code:dsf.config.kw.order,valueAttributes:[{name:"排序码",code:dsf.config.kw.order,type:dsf.metadata.getDataType("number"),length:10,defaultValue:0,unit:null}]})}}},computed:{inputValue:{get:function(){return this.value},set:function(e){this.emitValueChange(e)}}},methods:{inputChangeHandler:function(){var e=this;this.$dispatch("change"),this.$nextTick((function(){e.emitFormValidate(e.value)}))},inputBlurHandler:function(){this.$dispatch("blur")}}}),Nn=Ln,Mn=Object(le["a"])(Nn,Bn,Pn,!1,null,null,null),jn=Mn.exports,Rn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-form-item ds-system mobile",class:e.getCss},[e.simple&&e.readOnly&&!e.isDesign?[a("DsfTextProxy",e._b({model:{value:e.setVal,callback:function(t){e.setVal=t},expression:"setVal"}},"DsfTextProxy",e._self.$props,!1))]:[a("van-field",{attrs:{readonly:"",label:e.showLabel&&e.label?e.label:"","label-width":e.getLabelWidth(!0),required:e.required,"input-align":"right"},model:{value:e.setVal,callback:function(t){e.setVal=t},expression:"setVal"}})]],2)},En=[],Fn=dsf.component({name:"DsfMobileDeletedStatus",mixins:[Na["a"]],ctrlCaption:"删除状态",props:{caption:{type:String,default:dsf.config.kw.deleted},label:{type:String,default:"删除状态"},simple:{type:Boolean,default:!1},showLabel:{type:Boolean,default:!0},metadata:{type:Object,default:function(){return dsf.metadata.get("system-meta-data",{code:dsf.config.kw.deleted,valueAttributes:[{name:"是否删除",code:dsf.config.kw.deleted,type:dsf.metadata.getDataType("string"),length:"2",defaultValue:null,unit:null}]})}}},computed:{setVal:function(){return Number(this.value)?"是":"否"}}}),An=Fn,Hn=Object(le["a"])(An,Rn,En,!1,null,null,null),qn=Hn.exports,Un=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-form-item ds-upload upload-file mobile",class:e.getCss},[e.simple&&e.readOnly&&!e.isDesign?[e._v(" 简易模式 只读 ")]:[a("van-field",{attrs:{label:e.showLabel&&e.label?e.label:"",required:e.required,"label-width":e.getLabelWidth(!0)},scopedSlots:e._u([{key:"input",fn:function(){return[a("van-uploader",{attrs:{"after-read":e.afterRead,"before-read":e.beforeRead,"before-delete":e.beforeDelete,accept:e.uploadFileExts,multiple:e.multiple,"max-size":e.uploadFileSize,"max-count":e.uploadFileNum,"show-upload":!e.readOnly},on:{oversize:e.onOversize},scopedSlots:e._u([{key:"preview-cover",fn:function(t){return[a("div",{staticClass:"preview-cover"},[a("p",{staticClass:"van-ellipsis"},[e._v(e._s(t.originalFileName))]),a("p",{staticClass:"bye-size"},[e._v(e._s(e.computeFileSize(t.size)))])]),a("div",{staticClass:"preview",on:{click:function(a){return e.handleColumnClick("view",t)}}},[e._v("预览")])]}}]),model:{value:e.fileListCopy,callback:function(t){e.fileListCopy=t},expression:"fileListCopy"}})]},proxy:!0}])})]],2)},Yn=[],zn=a("3aa5"),Wn=zn["a"],Jn=Object(le["a"])(Wn,Un,Yn,!1,null,null,null),Kn=Jn.exports,Qn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-form-item ds-upload upload-img mobile",class:e.getCss},[e.simple&&e.readOnly&&!e.isDesign?[e._v(" 简易模式 只读 ")]:[a("van-field",{attrs:{label:e.showLabel&&e.label?e.label:"",required:e.required,"label-width":e.getLabelWidth(!0)},scopedSlots:e._u([{key:"input",fn:function(){return[a("van-uploader",{attrs:{multiple:e.multiple,accept:e.uploadFileExts,"after-read":e.afterRead,"before-read":e.beforeRead,"before-delete":e.beforeDelete,"max-count":e.uploadFileNum,"show-upload":!e.readOnly},model:{value:e.fileListCopy,callback:function(t){e.fileListCopy=t},expression:"fileListCopy"}})]},proxy:!0}])})]],2)},Gn=[],Xn=a("34d7"),Zn=Xn["a"],es=Object(le["a"])(Zn,Qn,Gn,!1,null,null,null),ts=es.exports,as=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-form-item ds-upload upload-img mobile",class:e.getCss},[e.simple&&e.readOnly&&!e.isDesign?[e._v(" 简易模式 只读 ")]:[a("van-field",{attrs:{label:e.showLabel&&e.label?e.label:"",required:e.required,"label-width":e.getLabelWidth(!0)},scopedSlots:e._u([{key:"input",fn:function(){return[a("van-uploader",{attrs:{multiple:e.multiple,accept:e.uploadFileExts,"after-read":e.afterRead,"before-read":e.beforeRead,"before-delete":e.beforeDelete,"max-count":e.uploadFileNum,"show-upload":!e.readOnly},model:{value:e.fileListCopy,callback:function(t){e.fileListCopy=t},expression:"fileListCopy"}})]},proxy:!0}])})]],2)},is=[],ns=(a("caad"),a("b680"),a("2532"),a("8240"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vue-picture-cut",{ref:"pictureCut",attrs:{src:e.imgSrc}},[a("vue-picture-cut-menu",{attrs:{slot:"menu","confirm-name":"确定","cancel-name":"取消","size-auto-name":"自由","size-raw-name":"原始","menu-rotate-name":"旋转"},on:{"on-change":e.saveFileImg,"on-cancel":e.handleClose},slot:"menu"})],1)}),ss=[],os=a("d9d1"),ls={name:"CropImage",components:{VuePictureCut:os["VuePictureCut"],VuePictureCutMenu:os["VuePictureCutMenu"]},props:{imgSrc:{type:String,default:""}},data:function(){return{}},methods:{saveFileImg:function(e){var t;this.$emit("onChange",e.blob,e.base64),null===(t=this.$dialog)||void 0===t||t.close()},handleClose:function(){var e;this.$emit("onCancel"),null===(e=this.$dialog)||void 0===e||e.close()}}},rs=ls,us=Object(le["a"])(rs,ns,ss,!1,null,null,null),cs=us.exports,ds=dsf.component({name:"DsfMobileUploadPhoto",mixins:[Na["a"]],ctrlCaption:"上传照片",props:{simple:{type:Boolean,default:!1},showLabel:{type:Boolean,default:!0},label:{type:String,default:"上传照片"},multiple:{type:Boolean,default:!1},uploadFileNum:{type:[Number,String],default:1},uploadFileSize:{type:[Number,String],default:1024e3},required:{type:Boolean,default:!1},aspectRatio:{type:String,default:"2/3"},switchMode:{type:Boolean,default:!0},requestUrl:{type:String,default:""},isCutPic:{type:Boolean,default:!1},uploadFileExts:{type:String,default:".jpg,.jpeg,.png"},extsSetting:{type:Object,default:function(){return{}}},metadata:{type:Object,default:function(){return dsf.metadata.get("photo-meta-data",{valueAttributes:[{name:"上传照片",code:"photo",type:dsf.metadata.getDataType("object"),length:500,defaultValue:null,unit:null}]})}}},data:function(){return{previewPopup:!1,filePath:"",fileListCopy:[],uploadFileType:"image/*"}},computed:{setRequestUrl:function(){return dsf.url.getWebPath(this.requestUrl||"file/upload/")}},watch:{value:function(e){this.initValue(e)}},created:function(){this.initValue(this.value)},methods:{initValue:function(e){"string"==dsf.type(e)&&(this.fileListCopy=JSON.parse(e))},afterRead:function(e){this.isCutPic?this.$openDialog({title:"裁剪",content:cs,height:"100vh",width:"100vw",position:"right",showClose:!1,params:{imgSrc:e.content},event:{onChange:this.saveFile,onCancel:this.beforeDelete}}):this.saveFile(e.file,e.content)},beforeRead:function(e){var t=e.name.split(".")[1].toLowerCase();return!!this.uploadFileExts.includes(t)||(dsf.layer.message("请选择包含这些格式的文件：".concat(this.uploadFileExts),!1),!1)},beforeDelete:function(){this.fileListCopy=[],this.emitValueChange(JSON.stringify(this.fileListCopy))},saveFile:function(e,t){var a=this,i=new FormData;i.append("file",e,"file.jpeg"),this.$http.post(this.setRequestUrl,i,{headers:{"Content-Type":"multipart/form-data"}}).done((function(e){if(e.success&&2e4==e.state){var t=e.data[0],i=JSON.parse(JSON.stringify(a.fileListCopy));t.url=t.absolutePath,i[0]=e.data[0],delete t["absolutePath"],a.emitValueChange(JSON.stringify(i))}})).catch((function(e){dsf.layer.message(e.message,!1)}))},getFileSize:function(e){var t=parseInt(e);return(e.indexOf("M")>-1||e.indexOf("m")>-1)&&(t=1024*parseInt(e)),t},computeFileSize:function(e){var t="";return t=parseInt(e)>105e4?(e/Math.pow(1024,2)).toFixed(2)+"M":(e/Math.pow(1024,1)).toFixed(2)+"K",t}}}),hs=ds,fs=Object(le["a"])(hs,as,is,!1,null,null,null),ps=fs.exports,ms=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-form-item ds-date-picker mobile",class:e.getCss},[e.simple&&e.readOnly&&!e.isDesign?[a("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]:e.readOnly&&!e.isDesign?[a("van-field",{attrs:{"label-width":e.getLabelWidth(!0),label:e.showLabel&&e.label||"",disabled:e.disabled,readonly:e.readOnly,"input-align":"left"},scopedSlots:e._u([{key:"input",fn:function(){return[a("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]},proxy:!0},e.hasIcon?{key:"right-icon",fn:function(){return[a("i",{staticClass:"iconfont icon-tab_attendance_d"})]},proxy:!0}:null],null,!0)})]:[a("van-field",e._g(e._b({scopedSlots:e._u([{key:"input",fn:function(){return[a("DsfTextProxy",e._b({attrs:{"show-label":!1,formatter:"dateTime^"+e.$timeFormat},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]},proxy:!0},e.hasIcon?{key:"right-icon",fn:function(){return[a("i",{staticClass:"iconfont icon-tab_attendance_d"})]},proxy:!0}:null],null,!0)},"van-field",e.attr,!1),e.events)),e.isDesign?e._e():a("van-popup",{attrs:{"get-container":"#app",position:"bottom",round:""},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[a("dsf-calendar",{attrs:{show:e.showPicker,"default-value":e.currentDate,type:e.chooseType,"min-date":e.minDate,"max-date":e.maxDate,clearable:e.clearable,"default-view":e.pickerStepType,"default-view-date":e.pickerInitDate&&new Date(e.pickerInitDate)||void 0},on:{cancel:function(t){e.showPicker=!1},confirm:e.onConfirm}})],1)]],2)},gs=[],vs=a("6222"),ys=vs["a"],bs=Object(le["a"])(ys,ms,gs,!1,null,null,null),ws=bs.exports,xs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-form-item mobile"},[e.simple&&e.readOnly&&!e.isDesign?[a("div",{staticClass:"ds-form-item ds-date-picker mobile",class:e.getCss},[a("DsfTextProxy",e._b({model:{value:e.value.sdate,callback:function(t){e.$set(e.value,"sdate",t)},expression:"value.sdate"}},"DsfTextProxy",e._self.$props,!1))],1),a("div",{staticClass:"ds-form-item ds-date-picker",class:e.getCss},[a("DsfTextProxy",e._b({model:{value:e.value.edate,callback:function(t){e.$set(e.value,"edate",t)},expression:"value.edate"}},"DsfTextProxy",e._self.$props,!1))],1)]:[a("div",{staticClass:"ds-form-item ds-date-picker mobile",class:e.getCss},[a("van-field",e._g(e._b({attrs:{label:e.showLabel&&e.labelS||""},scopedSlots:e._u([{key:"input",fn:function(){return[a("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.value.sdate,callback:function(t){e.$set(e.value,"sdate",t)},expression:"value.sdate"}},"DsfTextProxy",e._self.$props,!1))]},proxy:!0},e.hasIcon?{key:"right-icon",fn:function(){return[a("i",{staticClass:"iconfont icon-tab_attendance_d"})]},proxy:!0}:null],null,!0)},"van-field",e.attr,!1),e.events))],1),a("div",{staticClass:"ds-form-item ds-date-picker",class:e.getCss},[a("van-field",e._g(e._b({attrs:{label:e.showLabel&&e.labelE||""},scopedSlots:e._u([{key:"input",fn:function(){return[a("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.value.edate,callback:function(t){e.$set(e.value,"edate",t)},expression:"value.edate"}},"DsfTextProxy",e._self.$props,!1))]},proxy:!0},e.hasIcon?{key:"right-icon",fn:function(){return[a("i",{staticClass:"iconfont icon-tab_attendance_d"})]},proxy:!0}:null],null,!0)},"van-field",e.attr,!1),e.events))],1),e.isDesign||e.readOnly||e.disabled?e._e():a("van-popup",{attrs:{"get-container":"#app",position:"bottom",round:""},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[a("dsf-calendar",{attrs:{show:e.showPicker,"default-value":e.currentDate,type:e.chooseType,"min-date":e.minDate,"max-date":e.maxDate,clearable:e.clearable,"default-view":e.pickerStepType,"default-view-date":e.pickerInitDate&&new Date(e.pickerInitDate)||void 0,range:""},on:{cancel:function(t){e.showPicker=!1},confirm:e.onConfirm}})],1)]],2)},_s=[],Cs=a("104d"),Ds=Cs["a"],ks=Object(le["a"])(Ds,xs,_s,!1,null,null,null),$s=ks.exports,Ss=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-form-item ds-time-picker mobile",class:e.getCss},[e.simple&&e.readOnly&&!e.isDesign?[a("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]:e.readOnly&&!e.isDesign?[a("van-field",{attrs:{"label-width":e.getLabelWidth(!0),label:e.showLabel&&e.label||"",disabled:e.disabled,readonly:e.readOnly,"input-align":"left"},scopedSlots:e._u([{key:"input",fn:function(){return[a("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]},proxy:!0},e.hasIcon?{key:"right-icon",fn:function(){return[a("i",{staticClass:"iconfont icon-tab_attendance_d"})]},proxy:!0}:null],null,!0)})]:[a("van-field",e._g(e._b({scopedSlots:e._u([{key:"input",fn:function(){return[a("DsfTextProxy",e._b({attrs:{"show-label":!1,formatter:"dateTime^"+e.$timeFormat},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]},proxy:!0},e.hasIcon?{key:"right-icon",fn:function(){return[a("i",{staticClass:"iconfont icon-shijian",staticStyle:{"font-size":"1.1em","font-weight":"bold"}})]},proxy:!0}:null],null,!0)},"van-field",e.attr,!1),e.events)),e.isDesign?e._e():a("dsf-calendar-time-box",{ref:"calendarTime",attrs:{type:e.type,"min-time":e.minTime,"max-time":e.maxTime,step:e.hourStep}})]],2)},Ts=[],Is="2000/01/01",Os=dsf.component({name:"DsfMobileTimePicker",mixins:[Na["a"]],ctrlCaption:"时间选择",props:{value:{type:String,default:""},label:{type:String,default:"时间选择"},placeholder:{type:String,default:"请选择"},timeFormat:{type:String,default:"HH:mm:ss"},clearable:{type:Boolean,default:!0},timeInter:{type:Array,default:function(){return["00:00:00","23:59:59"]}},hourStep:{type:Number,default:1},metadata:{type:Object,default:function(){return dsf.metadata.get("time-picker-meta-data")}},hasIcon:{type:Boolean,default:!0}},data:function(){return{}},computed:{type:function(){return"HH:mm:ss"==this.timeFormat?"datetime_s":"datetime"},attr:function(){var e={labelWidth:this.getLabelWidth(!0),label:this.showLabel&&this.label||"",placeholder:this.placeholder,disabled:this.disabled,readonly:!0};return this.readOnly?e.inputAlign="left":(e.inputAlign=this.inputAlign,e.required=this.required),e},events:function(){var e={};return this.readOnly||this.disabled||(e.click=this.fieldClick),e},minTime:function(){return new Date(Is+" "+this.timeInter[0]).getTime()},maxTime:function(){return new Date(Is+" "+this.timeInter[1]).getTime()},$timeFormat:function(){return"datetime_s"===this.type?"hh:ii:ss":"hh:ii"}},methods:{fieldClick:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=""!=e.value?new Date(Is+" "+e.value):new Date(Is+" "+dsf.date.format(new Date,"hh:ii:ss")),t.next=3,null===(a=e.$refs.calendarTime)||void 0===a?void 0:a.open(i);case 3:n=t.sent,e.emitValueChange(n),e.$dispatch("change",n),e.$nextTick((function(){e.emitFormValidate(n)}));case 7:case"end":return t.stop()}}),t)})))()}}}),Vs=Os,Bs=Object(le["a"])(Vs,Ss,Ts,!1,null,null,null),Ps=Bs.exports,Ls=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control mobile ds-subtable ds-no-padding"},[a("div",{staticClass:"ds-subtable-conent-wrap"},[e.isDesign?e._l(e.templateData,(function(t,i){return a("div",{key:t.$hash,staticClass:"ds-subtable-item"},[a("div",{staticClass:"ds-subtable-item-header"},[a("div",{staticClass:"ds-subtable-item-index"},[e._t("index",[a("span",[e._v(e._s(e.label||"标题")+"("+e._s(i+1)+")")])],null,{row:t,$index:i})],2),a("div",{staticClass:"ds-subtable-item-delete"},[a("a",[e._v(e._s(e.getDeleteButtonText(null)))])])]),a("div",{staticClass:"ds-subtable-item-content",attrs:{"slot-name":"default"}},[e._t("default",null,null,{row:t,$index:i})],2),a("div",{staticClass:"ds-subtable-item-footer"},[e._t("foot",[a("dsf-mobile-button",{attrs:{"none-line":"",type:"plain",icon:"hao",size:"small"}},[e._v(e._s(e.getAddButtonText(t)))])])],2)])})):[e.list.length<=0?[a("div",{staticClass:"ds-subtable-item null-data"},[e.readOnly?e._e():a("div",{staticClass:"ds-subtable-item-footer"},[e._t("foot",[a("dsf-mobile-button",{attrs:{"none-line":"",type:"plain",icon:"hao",size:"small"},on:{click:function(t){return e.addRowHandler(null,-1)}}},[e._v(e._s(e.getAddButtonText(null)))])])],2)])]:e._l(e.list,(function(t,i){return a("div",{key:t.$hash,staticClass:"ds-subtable-item"},[a("div",{staticClass:"ds-subtable-item-header"},[a("div",{staticClass:"ds-subtable-item-index",attrs:{id:t.$hash}},[e._t("index",[a("span",[e._v(e._s(e.getRowName(t)))])],null,{row:t,$index:i})],2),0==i&&e.isLeastOne&&1==e.list.length?e._e():a("div",{staticClass:"ds-subtable-item-delete"},[a("a",{on:{click:function(a){return e.removeRowHandler(t)}}},[e._v(e._s(e.getDeleteButtonText(null)))])])]),a("div",{staticClass:"ds-subtable-item-content",attrs:{"slot-name":"default"}},[e._t("default",null,null,{row:t,$index:i})],2),e.readOnly||i!=e.list.length-1?e._e():a("div",{staticClass:"ds-subtable-item-footer"},[e._t("foot",[a("dsf-mobile-button",{attrs:{"none-line":"",type:"plain",icon:"hao",size:"small"},on:{click:function(a){return e.addRow(t,i)}}},[e._v(e._s(e.getAddButtonText(t)))])])],2)])}))]],2)])},Ns=[],Ms=a("c4ea"),js=dsf.component({name:"DsfMobileSubTable",ctrlCaption:"子表",mixins:[Ms["a"]],data:function(){return{templateData:[{_id:dsf.uuid()}],subControls:{}}},props:{label:{type:String,default:"标题"},filterData:{type:Function,default:null},slots:{type:Array,default:function(){return[{name:"default",controls:[],scope:"scope",dataKey:"row",repeat:!0}]}},addButtonText:{type:[String,Function],default:""},deleteButtonText:{type:[String,Function],default:""},isLeastOne:{type:Boolean,default:!1},rowName:{type:[String,Function],default:null}},computed:{list:function(){var e=this.value||[];return this.filterData&&(e=this.filterData(e)),e}},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){},methods:{updateSubControls:function(e,t){this.addSubControls(t);var a=t.local;if(!this.isDesign&&a&&e.isFormControl){var i;if(e.metadata_fullcode){var n,s=e.metadata_fullcode,o=null===this||void 0===this||null===(n=this.$vm)||void 0===n?void 0:n.$getDefaultValue(s);void 0===a[s]&dsf.isDef(o)&&this.$vm.$set(a,s,o)}this.$vm&&null!==(i=this.$vm)&&void 0!==i&&i.$setControlPropsByWorkFlow&&this.$vm.$setControlPropsByWorkFlow(e,"formControl"),dsf.isUnDef(e.defaultReadOnly)&&(e.defaultReadOnly=e.readOnly),e.isFormControl&&(e.defaultReadOnly||(e.readOnly=this.readOnly))}},getSubControls:function(e){var t=[];for(var a in this.subControls)a.indexOf(e)>0&&t.push(this.subControls[a]);return t},addSubControls:function(e){if(e.designId&&e.local.$hash){var t=e.designId+"-"+e.local.$hash;this.subControls[t]=e}},getRowName:function(e){return"function"==dsf.type(this.rowName)?this.rowName(e):this.rowName?this.rowName+(e?"("+(e.$index+1)+")":""):this.label+(e?"("+(e.$index+1)+")":"")},getAddButtonText:function(e){if("string"==dsf.type(this.addButtonText)){var t=this.addButtonText;return t||"增加"+this.label}if("function"==dsf.type(this.addButtonText))return this.this.addButtonText(e)},getDeleteButtonText:function(e){if("string"==dsf.type(this.deleteButtonText)){var t=this.deleteButtonText;return t||"删除"}if("function"==dsf.type(this.deleteButtonText))return this.this.deleteButtonText(e)},addRow:function(e,t){var a=this.value||[];t>=a.length?a.push({}):a.splice(t+1,0,{}),this.emitValueChange(a)},addRowHandler:function(e,t){!e||t<0?this.addRow({},-1):this.addRow(e,t)},removeRow:function(e){var t=this.value||[];dsf.array.remove(t,e)},removeRowHandler:function(e){var t=this;document,dsf.layer.confirm({message:"确定要删除"+this.getRowName(e)+"?"}).then((function(){t.removeRow(e)})).catch((function(){}))}},beforeDestroy:function(){},destroyed:function(){},watch:{value:{handler:function(e,t){if(!this.isDesign&&this.isLeastOne&&(dsf.isUnDef(e)||e.length<=0)){var a=[];return a.push({}),void this.emitValueChange(a)}if(e){for(var i=0;i<e.length;i++)!("$editing"in e[i])&&this.$set(e[i],"$editing",!1),!("$hash"in e[i])&&this.$set(e[i],"$hash",dsf.uuid()),"$order"in e[i]?this.$set(e[i],"$order",i):e[i]["$order"]=i,e[i].$index=i;t&&e&&this.emitValueChange(e)}},immediate:!0}}}),Rs=js,Es=Object(le["a"])(Rs,Ls,Ns,!1,null,null,null),Fs=Es.exports,As=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isDesign?a("div",{staticClass:"ds-control ds-form-item ds-textbox mobile",class:e.getCss},[[a("van-field",{attrs:{type:"text",disabled:!0,"label-width":e.getLabelWidth(!0),label:"流程信息","input-align":"right"},model:{value:e.chooseFlow.name,callback:function(t){e.$set(e.chooseFlow,"name",t)},expression:"chooseFlow.name"}})]],2):e._e()},Hs=[],qs=a("51c4"),Us=dsf.component({name:"DsfMobileFlowInfo",mixins:[qs["a"],Na["a"]],methods:{sendBack:function(e,t){var a=this;this.$openDialog({showClose:!1,title:"退回理由",fullscreen:!0,width:"100vw",height:"100vh",template:'<van-field\n            ref="back"\n            v-model="params.value"\n            rows="2"\n            type="textarea"\n            placeholder="请输入退回理由"\n          />',btnPosition:"bottom",params:{value:""},btns:[{text:"确认退回",handler:function(i,n){if(!n.back.value)return dsf.layer.message("请输入退回理由",!1),!1;var s={sPID:e[0]||null,sCurLinkID:e[1]||null,sReason:n.back.value||null,sBackLinkID:t};return a.$http.post(dsf.url.getWebPath("wfr/sendBack"),s).then((function(e){e.data.success&&e.data.data&&"21000"==e.data.data.Code?(a.$vm&&a.$vm.$dialog?a.$vm.$dialog.openerVm.reloadData():a.$vm.openerVm&&a.$vm.openerVm.reloadData&&a.$vm.openerVm.reloadData(),dsf.layer.message("退回成功",!0)):dsf.layer.message(e.data.data.Message||"退回异常",!1)})).catch((function(e){dsf.layer.message("退回异常",!1)}))}}]})},chooseSendNode:function(e){var t=this;this.dialog=this.$openDialog({type:"dialog",title:"请选择要发送的环节：",content:"DsfMobileChooseSendNode",params:{lines:e.SendParams.Lines,requestID:this._RequestID,type:"next"},btns:[{class:"close-send-node van-dialog__cancel",text:"取消"},{text:"返回",class:"choose-send-node van-dialog__confirm ".concat(e.SendParams.Lines&&e.SendParams.Lines[0]&&e.SendParams.Lines[0].SendToLineID?"":"hide"),handler:function(a){var i={sRequestID:t._RequestID,sLineID:e.SendParams.Lines&&e.SendParams.Lines[0]&&e.SendParams.Lines[0].BackLineID};return t.$http.post("wfr/setLineToBack",i).then((function(e){2e4==e.data.state&&t.handler(e)})),t.dialog&&t.dialog.close(),!0}},{text:"确定",class:"choose-send-node van-dialog__confirm",handler:function(e){if(e.validate()){var a=e.yes(),i={sRequestID:t._RequestID,sLineID:a.LineID},n="wfr/sendToLine";return t.$http.post(n,i).then((function(e){2e4==e.data.state&&t.handler(e,!0)})),!0}return!1}}]})},chooseSendTree:function(e,t){var a=this;this.dialog=this.$openDialog({showClose:!1,title:"请选择办理人",fullscreen:!0,width:"100vw",height:"100vh",class:"work_flow-usersDialog",content:"DsfMobileChooseUsers",btnPosition:"bottom",params:{lines:e.SendParams.Lines},btns:[{text:"取消"},{text:"返回",class:"choose-send-node ".concat(t?"":"hide"),handler:function(t){var i={sRequestID:a._RequestID,sLineID:e.SendParams.Lines&&e.SendParams.Lines[0]&&e.SendParams.Lines[0].SendToLineID};return a.$http.post("wfr/setLineToBack",i).then((function(e){2e4==e.data.state&&a.handler(e)})),a.dialog&&a.dialog.close(),!0}},{text:"确定",handler:function(e){if(e.validate()){var t=e.yes(),i={sRequestID:a._RequestID,sReceivers:t};return a.$http.post("wfr/sendToReceivers",i).then((function(e){2e4==e.data.state&&a.handler(e)})),a.dialog&&a.dialog.close(),!0}return!1}}]})}}}),Ys=Us,zs=Object(le["a"])(Ys,As,Hs,!1,null,null,null),Ws=zs.exports,Js=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ds-control",staticStyle:{padding:"0"}},[(e.isDesign||e.sPID)&&e.flowProcess.length>0?i("div",{staticClass:"ds-form-item ds-flowprocess mobile work_flow-process"},[i("div",{directives:[{name:"show",rawName:"v-show",value:"info"===e.show,expression:"show === 'info'"}],staticClass:"content"},e._l(e.flowProcess,(function(t){return i("div",{key:t.linkid,staticClass:"item",class:{"no-user":!t.rusername,unusual:"-4"==t.STATUS,noyj:!t.opinionatts||t.opinionatts&&!t.opinionatts.Content&&!t.opinionatts.Attachments}},[i("van-image",{attrs:{round:"",width:"40px",height:"40px",fit:"cover",src:"/oua/getRedisUserPhoto?userId="+t.ruserid},scopedSlots:e._u([{key:"loading",fn:function(){return[i("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0},{key:"error",fn:function(){return[i("img",{staticClass:"header",attrs:{src:a("3afd")}})]},proxy:!0}],null,!0)}),i("van-image",{staticClass:"icon",attrs:{round:"",fit:"cover",src:e.getStateImg(t)}}),i("div",{staticClass:"des"},[i("p",{staticClass:"first-child"},[i("span",{staticClass:"title"},[e._v(e._s(t.nodename))]),i("span",{staticClass:"time"},[e._v(e._s(e.format(t.reachtime)))])]),t.rusername?i("p",{staticClass:"name"},[e._v(e._s(t.rusername))]):e._e(),e.getIdea(t)?i("p",{staticClass:"yj"},[e._v(e._s(e.getIdea(t)))]):e._e(),i("p",{staticClass:"files"},[i("van-grid",{attrs:{"column-num":3,border:!1}},e._l(e.getFiles(t),(function(t,a){return i("van-grid-item",{key:a,attrs:{icon:e.getType(t),text:t.originalFileName},on:{click:function(a){return e.preview(t)}}})})),1)],1)]),i("van-popup",{style:{height:"80%",width:"100%"},model:{value:e.previewing,callback:function(t){e.previewing=t},expression:"previewing"}},[i("div",[e.previewing?i("dsf-iframe",{attrs:{src:e.filePath}}):e._e()],1)]),i("van-image-preview",{attrs:{images:e.images},model:{value:e.showImg,callback:function(t){e.showImg=t},expression:"showImg"}})],1)})),0)]):e._e()])},Ks=[],Qs=dsf.component({name:"DsfMobileFlowProcess",mixins:[Et["a"]],ctrlCaption:"办理情况",components:{},props:{caption:{type:String,default:function(){return"wfprocess"}}},data:function(){return{sPID:this.$route.query.sPID,sCurLinkID:this.$route.query.sCurLinkID,show:"info",flowProcess:[],previewing:!1,filePath:"",images:[],showImg:!1}},created:function(){this.init()},methods:{init:function(){var e=this;this.isDesign?this.flowProcess=[{nodename:"开始",STATUS:0,linkid:"faedda583f7742948b0714f0f17d1085",opinionatts:{Content:"同意"},ruserid:"",pid:"af60e455757d48dd801d07b1538eb806",rusername:"平台管理员",rdeptname:"平台管理组",reachtime:"2020年01月06日 18:21:21",receivetime:"2020年1月2日 10:21:21"},{nodename:"审批",STATUS:-4,linkid:"saedda583f7742948b0714f0f17d1085",opinionatts:{Content:"不同意"},ruserid:"",pid:"sf60e455757d48dd801d07b1538eb806",rusername:"平台管理员",rdeptname:"平台管理组",reachtime:"2020年01月06日 18:21:21",receivetime:"2020年1月2日 10:21:21"},{nodename:"拟稿",STATUS:1,linkid:"caedda583f7742948b0714f0f17d1085",opinionatts:{Content:""},ruserid:"",pid:"cf60e455757d48dd801d07b1538eb806",rusername:"平台管理员",rdeptname:"平台管理组",reachtime:"2020年01月06日 18:21:21",receivetime:"2020年1月2日 10:21:21"}]:this.$http.get("wfr/getProcessInfoByPID",{sPID:this.sPID}).then((function(t){t.data.success&&(t.data.data.forEach((function(t){if(t.opinionatts=JSON.parse(t.opinionatts),t.linkid===e.sCurLinkID&&t.pid===e.sPID&&0!=t.STATUS&&1!=t.STATUS){var a=dsf.mix({},e.$route.query,{isHide:!0});e.$router.replace({path:e.$route.path,query:a})}})),e.flowProcess=t.data.data)}))},getStateImg:function(e){var t=e.STATUS;return"-31"==t?t="-3":"-1"==t&&(t="-2"),t||0===t?a("db38")("./status".concat(t,".png")):null},getIdea:function(e){return e.opinionatts?e.opinionatts.Content:null},getFiles:function(e){return e.opinionatts?e.opinionatts.Attachments:null},format:function(e){return e?dsf.date.format(e,"mm-dd hh:ii"):""},getType:function(e){return"image"===e.contentType.slice(0,5)?"photo-o":"orders-o"},preview:function(e){e&&e.contentType&&"image"!==e.contentType.slice(0,5)?(this.filePath=dsf.config.webRoot+"preview/file?fileId="+e.id,this.previewing=!0):(this.images=[e.relativePath],this.showImg=!0)}}}),Gs=Qs,Xs=Object(le["a"])(Gs,Js,Ks,!1,null,null,null),Zs=Xs.exports,eo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isDesign||e.sPID&&e.sCurLinkID?a("div",{staticClass:"ds-control ds-form-item ds-textbox mobile dispose-idea",class:e.getCss},[a("div",{staticClass:"txt"},[a("van-field",{attrs:{placeholder:e.placeholder,type:e.isTextarea?"textarea":"text",rows:e.textareaRows,disabled:e.disabled,"label-width":e.getLabelWidth(!0),label:e.showLabel&&e.label?e.label:""},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})],1),e.options.length>0?a("div",{staticClass:"template"},[a("div",e._l(e.options,(function(t,i){return a("span",{key:i,on:{click:function(a){e.inputValue=t.key_word}}},[e._v(e._s(t.key_word))])})),0)]):e._e(),e.visibleUpBtn||e.visibleUpImgBtn?a("div",{staticClass:"funs"},[e.visibleUpBtn?a("i",{staticClass:"iconfont icon-fujian",on:{click:function(t){return e.uploader(0)}}}):e._e(),e.visibleUpImgBtn?a("i",{staticClass:"iconfont icon-tupian",on:{click:function(t){return e.uploader(1)}}}):e._e()]):e._e(),a("van-uploader",{ref:"uploader",class:{no:0==e.uploaderData.length},attrs:{"max-count":9,multiple:"","after-read":e.uploaderAfterRead,accept:e.acceptsType},on:{"click-preview":e.preview,delete:e.deleteFile},model:{value:e.uploaderData,callback:function(t){e.uploaderData=t},expression:"uploaderData"}}),a("van-popup",{style:{height:"80%",width:"100%"},model:{value:e.previewing,callback:function(t){e.previewing=t},expression:"previewing"}},[a("div",[e.previewing?a("dsf-iframe",{attrs:{src:e.filePath}}):e._e()],1)])],1):e._e()},to=[],ao=a("515f"),io=ao["a"],no=Object(le["a"])(io,eo,to,!1,null,null,null),so=no.exports,oo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("van-picker",{ref:"picker",attrs:{columns:e.lines,"value-key":"Name",title:"标题"}})},lo=[],ro=dsf.component({name:"DsfMobileChooseSendNode",props:{lines:{type:Array,default:function(){return[]}}},data:function(){return{}},created:function(){},mounted:function(){},methods:{yes:function(){return this.$refs.picker.getValues()[0]},validate:function(){return!!this.$refs.picker.getValues()[0]||(dsf.layer.message("请选择要发送的环节",!1),!1)}}}),uo=ro,co=Object(le["a"])(uo,oo,lo,!1,null,null,null),ho=co.exports,fo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"work_flow-usersDialog"},[i("div",{staticClass:"content"},[i("div",{staticClass:"users"},[i("p",[e._v("您即将发给：")]),e._l(e.data.filter((function(e){return e.users.length>0})),(function(t){return i("div",{key:t.id,staticClass:"dept",class:{noSeletc:!Object.keys(t.selects).length}},[i("div",{staticClass:"desc"},[i("div",{staticClass:"title"},[e._v(e._s(e.getLinkName(t.name)))]),i("div",{staticClass:"num"},[e._v(e._s(t.selects.length||0)+"人审核")])]),t.users&&t.users.length<=3?i("div",{staticClass:"imgs"},e._l(t.users,(function(n,s){return i("div",{key:n.ID,class:{noSeletc:!n.isSelect},on:{click:function(a){return e.changeUser(n,s,t)}}},[i("van-image",{attrs:{round:"",width:"40px",height:"40px",fit:"cover",src:"/oua/getRedisUserPhoto?userId="+n.ID},scopedSlots:e._u([{key:"loading",fn:function(){return[i("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0},{key:"error",fn:function(){return[i("img",{staticClass:"header",attrs:{src:a("3afd")}})]},proxy:!0}],null,!0)}),n.isSelect?i("van-icon",{attrs:{name:"checked"}}):e._e(),i("span",[e._v(e._s(n.Name))])],1)})),0):e._e(),t.users&&t.users.length>3?i("div",{staticClass:"imgs"},[t.selects&&t.selects.length<=2?e._l(t.selects,(function(n,s){return i("div",{key:n.ID,class:{noSeletc:!n.isSelect},on:{click:function(a){return e.changeUser(n,s,t)}}},[i("van-image",{attrs:{round:"",width:"40px",height:"40px",fit:"cover",src:"/oua/getRedisUserPhoto?userId="+n.ID},scopedSlots:e._u([{key:"loading",fn:function(){return[i("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0},{key:"error",fn:function(){return[i("img",{staticClass:"header",attrs:{src:a("3afd")}})]},proxy:!0}],null,!0)}),n.isSelect?i("van-icon",{attrs:{name:"checked"}}):e._e(),i("span",[e._v(e._s(n.Name))])],1)})):e._e(),t.selects&&t.selects.length>2?i("div",{staticClass:"all-users"},[i("div",{staticClass:"circle"},[e._l(t.selects,(function(t,n){return[n<=4?i("van-image",{key:t.ID,attrs:{width:"20",height:"20",fit:"cover",src:"/oua/getRedisUserPhoto?userId="+t.ID},scopedSlots:e._u([{key:"loading",fn:function(){return[i("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0},{key:"error",fn:function(){return[i("img",{staticClass:"error-header",attrs:{width:"20",height:"20",src:a("3afd")}})]},proxy:!0}],null,!0)}):e._e()]}))],2),i("p",[e._v(e._s(t.selects[0].Name)+"等"+e._s(t.selects.length)+"人")])]):e._e(),i("div",{staticClass:"add",on:{click:function(a){return e.showPicker(t)}}},[i("i",{staticClass:"iconfont icon-hao"})])],2):e._e()])}))],2)])])},po=[],mo=(a("4de4"),{name:"DsfMobileChooseUsers",props:{lines:{type:Array,default:function(){return[]}}},data:function(){return{data:[],show:!1,message:"",loader:null,tpls:[],isShowBack:!1}},created:function(){this.init(this.lines),this.getTemplate()},methods:{yes:function(){return this.param.join(";")},validate:function(){var e=[];return this.data.forEach((function(t){if(t.selects&&t.selects.length>0){var a="";t.selects.forEach((function(e){a+=(a?",":"")+e.ID})),a&&(a=t.id+":"+a,e.push(a))}})),0==e.length?(dsf.layer.message("请选择办理人",!1),!1):(this.param=e,!0)},init:function(e){if(this.isFristSend=!!e._isFristSend,this.show=!0,this.data=[],e&&e.length){var t=e;for(var a in t){var i=t[a];this.data.push({name:i.Name,id:i.LineID,users:[],selects:{},sNum:0,MultiplayerEnabled:i.MultiplayerEnabled}),i.Selected&&this.getUserData(i.Receivers.Dept,null,this.data.length-1)}}if(this.data.length>0){var n=0,s=0;for(var o in this.data){var l=this.data[o];if(l.sNum>0){s=-1;break}1==l.users.length&&(s=o),n+=l.users.length}if(1==n&&-1!=s){var r=this.data[s].users[0];r.isSelect=!0,this.data[s]["selects"][r.ID]=r,this.data[s]["sNum"]++}}},getLinkName:function(e){var t=e.split("→");return t[t.length-1]},getUserData:function(e,t,a){if(e)for(var i in e.Objs&&(e.ChildDepts=e.ChildDepts.concat(e.Objs)),0!=e.Type&&(1*e.Selected>0&&(this.data[a]["selects"][e.ID]=e,this.data[a]["sNum"]++,e.isSelect=!0),e["index"]=this.data[a]["users"].length,this.data[a]["users"].push(e)),e.ChildDepts)this.getUserData(e.ChildDepts[i],e,a)},getTemplate:function(){var e=this,t=dsf.layer.loading(),a="";this.$http.get("wfr/getOpinionKeyWord",{}).done((function(t){t.success?e.tpls=t.data||[]:a="获取意见模板，请求异常"})).error((function(e){a="获取意见模板，服务器异常"})).always((function(){dsf.layer.closeLoading(t),a&&dsf.layer.toast(a,!1)}))},changeUser:function(e,t,a){var i=this;a.MultiplayerEnabled||a.users.forEach((function(t){t.ID!==e.ID&&i.$set(t,"isSelect",!1)})),this.$set(e,"isSelect",!e.isSelect),a.selects=a.users.filter((function(e){return e.isSelect}))},showPicker:function(e){var t=this;dsf.layer.openDialog({showClose:!1,title:"请选择审核人",height:"50vh",content:"DsfMobileReChooseUsers",params:{users:JSON.parse(JSON.stringify(e.users)),Multi:e.MultiplayerEnabled},btns:[{text:"确定",handler:function(a,i){if(a.validate()){var n=a.yes();return e.users.forEach((function(e){t.$set(e,"isSelect",!1),n.forEach((function(a){a.ID===e.ID&&t.$set(e,"isSelect",a.isSelect)}))})),e.selects=e.users.filter((function(e){return e.isSelect})),!0}return!1}}]})}}}),go=mo,vo=(a("dcdb"),Object(le["a"])(go,fo,po,!1,null,"2254d364",null)),yo=vo.exports,bo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"work_flow-usersDialog work_flow-re-choose-users"},[i("div",{staticClass:"imgs"},e._l(e.users,(function(t){return i("div",{key:t.ID,class:{noSeletc:!t.isSelect},on:{click:function(a){return e.changeUser(t)}}},[i("van-image",{attrs:{round:"",width:"40px",height:"40px",fit:"cover",src:"/oua/getRedisUserPhoto?userId="+t.ID},scopedSlots:e._u([{key:"loading",fn:function(){return[i("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0},{key:"error",fn:function(){return[i("img",{staticClass:"header",attrs:{src:a("3afd")}})]},proxy:!0}],null,!0)}),t.isSelect?i("van-icon",{attrs:{name:"checked"}}):e._e(),i("p",[e._v(e._s(t.Name))])],1)})),0)])},wo=[],xo={name:"DsfMobileReChooseUsers",props:{users:{type:Array,default:function(){return[]}},Multi:{type:Boolean,default:function(){return!1}}},data:function(){return{selected:[]}},created:function(){},methods:{yes:function(){return this.selected},validate:function(){return this.selected=this.users.filter((function(e){return e.isSelect})),0!=this.selected.length||(dsf.layer.message("请选择办理人",!1),!1)},changeUser:function(e){var t=this;this.Multi||this.users.forEach((function(e){t.$set(e,"isSelect",!1)})),this.$set(e,"isSelect",!e.isSelect)}}},_o=xo,Co=Object(le["a"])(_o,bo,wo,!1,null,null,null),Do=Co.exports,ko=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isDesign||e.sPID&&e.sCurLinkID?i("div",{staticClass:"ds-control ds-form-item ds-textbox",class:e.getCss},[i("van-field",{attrs:{type:"text","label-width":e.getLabelWidth(!0),label:e.label,"input-align":"right"},scopedSlots:e._u([e.readOnly?null:{key:"input",fn:function(){return e._l(e.data,(function(t,n){return i("div",{key:n,staticClass:"form-comment-box-value"},[i("p",{staticClass:"content"},[e._v(e._s(t.opinionatts&&t.opinionatts.Content))]),i("img",{staticClass:"icon",attrs:{src:a("5d9d")}}),i("span",{staticClass:"name"},[e._v(e._s(t.rusername))]),i("span",{staticClass:"time"},[e._v(e._s(t.receivetime))])])}))},proxy:!0}],null,!0),model:{value:e.label,callback:function(t){e.label=t},expression:"label"}})],1):e._e()},$o=[],So=dsf.component({name:"DsfMobileFormCommentBox",mixins:[Na["a"]],ctrlCaption:"表单意见框",props:{caption:{type:String,default:function(){return""}},label:{type:String,default:function(){return""}},placeholder:{type:String,default:function(){return"请输入"}},showLabel:{type:Boolean,default:function(){return!0}},readOnly:{type:Boolean,default:function(){return!1}},disabled:{type:Boolean,default:function(){return!1}},visible:{type:Boolean,default:function(){return!0}},tbNoPadding:{type:Boolean,default:function(){return!1}},lrNoPadding:{type:Boolean,default:function(){return!1}},scope:{type:Number,default:function(){return 0}},nodes:{type:Array,default:function(){return[]}},order:{type:Number,default:function(){return 0}},template:{type:Number,default:function(){return 0}},metadata:{type:Object,default:function(){return{id:"",name:"表单意见框",type:{value:3,text:"业务元数据"},valueAttributes:[{name:"文本",code:"text",type:dsf.metadata.getDataType("string"),length:"50",defaultValue:null,unit:null}]}}}},data:function(){return{sPID:this.$route.query.sPID,sCurLinkID:this.$route.query.sCurLinkID,data:[]}},watch:{"$vm.flows.formCommentBoxData":function(e){var t=this,a=[];e.forEach((function(e){e.ruserid&&t.nodes&&t.nodes.forEach((function(t){t===e.nodeid&&a.push(e)}))})),this.data=a}},mounted:function(){this.init()},updated:function(){},destroyed:function(){},methods:{init:function(){var e=this;if(this.isDesign||!this.sPID)this.data=[{nodename:"拟稿",STATUS:0,linkid:"faedda583f7742948b0714f0f17d1085",opinionatts:JSON.stringify({Content:"同意"}),ruserid:"",pid:"af60e455757d48dd801d07b1538eb806",rusername:"平台管理员",rdeptname:"平台管理组",reachtime:"2020-01-06 18:21:21",receivetime:"2020-1-2 10:21:21"}];else{if(this.$vm&&this.$vm.flows&&this.$vm.flows.isLoadFdata)return;this.$vm.flows.isLoadFdata=!0,this.$http.get("wfr/getProcessInfoByPID",{sPID:this.sPID}).then((function(t){t.data.success&&(t.data.data.forEach((function(t){if(t.opinionatts=JSON.parse(t.opinionatts),t.linkid===e.sCurLinkID&&t.pid===e.sPID&&0!=t.STATUS&&1!=t.STATUS){var a=dsf.mix({},e.$route.query,{isHide:!0});e.$router.replace({path:e.$route.path,query:a})}})),e.$vm&&e.$vm.flows&&e.$set(e.$vm.flows,"formCommentBoxData",t.data.data))}))}}}}),To=So,Io=Object(le["a"])(To,ko,$o,!1,null,null,null),Oo=Io.exports,Vo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-design"},[e.url?a("van-image",{style:{width:e.width,height:e.height,display:"block",minHeight:"40px"},attrs:{src:e.url,"preview-src-list":[e.url]}}):e._e()],1)},Bo=[],Po=dsf.component({name:"DsfMobileUploadDesignImg",mixins:[Et["a"]],ctrlCaption:"上传设计图",data:function(){return{}},props:{url:{type:String,default:""},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"}},created:function(){},methods:{}}),Lo=Po,No=Object(le["a"])(Lo,Vo,Bo,!1,null,null,null),Mo=No.exports,jo=a("b83c");a("abf6");function Ro(e){e.prototype.$replace=function(e,t){return dsf.express.replace.call(this,e,t)},e.prototype.$eval=function(e,t){return dsf.express.eval.call(this,e,t)},e.prototype.$openWindow=function(){var e=Array.prototype.slice.call(arguments,0),t=this.$vm?this.$vm:this;return dsf.layer.openWindow.apply(t,e)},e.prototype.$openDialog=function(){var e=Array.prototype.slice.call(arguments,0),t=this.$vm?this.$vm:this;return dsf.layer.openDialog.apply(t,e)},e.prototype.pxToRem=function(e){return dsf.pxToRem(e)},e.use(J["a"]),e.use(W["a"]),e.use(z["a"]),e.use(Y["a"]),e.use(U["a"]),e.use(q["a"]),e.use(H["a"]),e.use(A["a"]),e.use(F["a"]),e.use(E["a"]),e.use(R["a"]),e.use(j["a"]),e.use(M["a"]),e.use(N["a"]),e.use(L["a"]),e.use(P["a"]),e.use(B["a"]),e.use(V["a"]),e.use(O["a"]),e.use(I["a"]),e.use(T["a"]),e.use(S["a"]),e.use($["a"]),e.use(k["a"]),e.use(D["a"]),e.use(C["a"]),e.use(_["a"]),e.use(x["a"]),e.use(w["a"]),e.use(b["a"]),e.use(y["a"]),e.use(v["a"]),e.use(g["a"]),e.use(m["a"]),e.use(p["a"]),e.use(f["a"]),e.use(h["a"]),e.use(d["a"]),e.use(c["a"]),e.use(u["a"]),e.use(r["a"]),e.component(ht.name,ht),e.component(yt.name,yt),e.component(Dt.name,Dt),e.component(wa.name,wa),e.component(da.name,da),e.component(Ea.name,Ea),e.component(Ya.name,Ya),e.component(Ga.name,Ga),e.component(ni.name,ni),e.component(ci.name,ci),e.component(gi.name,gi),e.component(Bi.name,Bi),e.component(Ba.name,Ba),e.component(me.name,me),e.component(ue.name,ue),e.component(ge["a"].name,ge["a"]),e.component(Mt.name,Mt),e.component(Je.name,Je),e.component(tt.name,tt),e.component(aa.name,aa),e.component(Ri.name,Ri),e.component(Ot.name,Ot),e.component(qt.name,qt),e.component(Qt.name,Qt),e.component($i.name,$i),e.component(en.name,en),e.component(ln.name,ln),e.component(fn.name,fn),e.component(bn.name,bn),e.component(kn.name,kn),e.component(Vn.name,Vn),e.component(jn.name,jn),e.component(qn.name,qn),e.component(Kn.name,Kn),e.component(ts.name,ts),e.component(ps.name,ps),e.component($a.name,$a),e.component(Ui.name,Ui),e.component(Ji.name,Ji),e.component(_i.name,_i),e.component(ws.name,ws),e.component($s.name,$s),e.component(Ps.name,Ps),e.component(Ws.name,Ws),e.component(Zs.name,Zs),e.component(so.name,so),e.component(ho.name,ho),e.component(yo.name,yo),e.component(Do.name,Do),e.component(Oo.name,Oo),e.component(Mo.name,Mo),e.component(Fs.name,Fs)}dsf.mix(dsf.layer,{mobile:jo["a"]}),"undefined"!==typeof window&&window.Vue&&Ro(window.Vue);var Eo={install:Ro},Fo=a("e432"),Ao=a("e210"),Ho=a("2284");function qo(e){e.use(Eo),e.use(Fo["a"]),e.use(Ao["a"]),e.use(Ho["a"]),e.use(ot)}t["a"]=qo},a8bb:function(e,t,a){"use strict";(function(e){a("99af"),a("c975"),a("d81d"),a("498a");var i=a("2909"),n=a("5530");function s(e){var t=e.props.type;return"auxiliary"==t&&(t="plain"),["ds-button"+(e.props.btnStyle?"--"+e.props.btnStyle:""),"mobile",e.props.type?t:"",e.props.size]}t["a"]={name:"DsfMobileButton",functional:!0,props:{noneLine:{type:Boolean,default:!1},type:{type:String,default:function(){return""}},icon:{type:String,default:function(){return""}},text:{type:String,default:function(){return""}},title:{type:String,default:function(){return""}},btnStyle:{type:String,default:function(){return""}},size:{type:String,default:""}},render:function(t,a){var o=a._c||t,l=!1,r=!1,u=a.slots().default;a.data.staticClass&&a.data.staticClass.indexOf("ds-button--icon-text")>=0&&(l=!0),"icon-text"==a.props.btnStyle&&(l=!0);var c="";u&&u[0]&&u[0].text.trim()?(r=!1,c=u[0].text):a.props.text?(r=!1,c=a.props.text):r=!0;var d=a._u([{key:"default",fn:function(e){return c}}],!1,null);if(l){var h=a._e(),f=a._e();a.props.icon&&(h=o("i",{class:["iconfont","icon-"+a.props.icon]})),c&&(f=o("span",{},[c]));var p=a.data.class||[];return o("a",{attrs:Object(n["a"])({},a.data.attrs),key:a.data.key,staticStyle:a.data.staticStyle,staticClass:a.data.staticClass,style:a.data.style,on:a.listeners,directives:a.data.directives,class:[].concat(Object(i["a"])(p),Object(i["a"])(s(a)),[r?"no-text":""])},[h,f])}var m=a.data.class;return m?"string"==dsf.type(m)?m=[m]:"object"==dsf.type(m)&&(m=e.map(m,(function(e,t){return t}))):m=[],o("van-button",{attrs:Object(n["a"])({},a.data.attrs),props:{icon:a.props.icon,iconPrefix:"iconfont icon",plain:"plain"==a.props.type,size:a.props.size?a.props.size:"normal",tag:a.props.tag?a.props.tag:"button"},key:a.data.key,staticStyle:a.data.staticStyle,staticClass:a.data.staticClass,style:a.data.style,directives:a.data.directives,class:[].concat(Object(i["a"])(s(a)),[r?"no-text":"",a.props.noneLine?"none-border":""],Object(i["a"])(m)),on:a.listeners,scopedSlots:d})}}}).call(this,a("2ef0"))},b773:function(e,t,a){"use strict";(function(e){a("99af"),a("c740"),a("4160"),a("a9e3"),a("e25e"),a("ac1f"),a("1276"),a("159b");var i=a("2909"),n=a("55f5");t["a"]=dsf.component({name:"DsfMobileCheckBox",mixins:[n["a"]],ctrlCaption:"复选框",props:{value:{type:[Array,String,Number,Boolean,Object],default:function(){return[]}},items:{type:Array,default:function(){return[]}},cancel:{type:Boolean,default:!1},isOther:{type:Boolean,default:!1},formatter:{type:String,default:"textValue^text"},metadata:{type:Object,default:function(){return dsf.metadata.get("items-meta-data")}},inputAlign:{type:String,default:"right"},direction:{type:String,default:"horizontal"},iconSize:{type:String,default:"1.43em"},shape:{type:String,default:"square"},labelPosition:{type:String,default:"right"},maxChooseNum:{type:Number,default:0},disabledItemValues:{type:Array,default:function(){return[]}}},data:function(){return{result:[]}},computed:{$items:function(){var e=this.items||[];return this.isDesign&&!e.length&&(e=[{value:"1",text:"数据1"},{value:"2",text:"数据2"}]),this.isOther?[].concat(Object(i["a"])(e),[{value:"else",text:"其他"}]):e},radioValue:{get:function(){return this.result},set:function(e){var t=this;e||(e=[]),this.result=e;var a=[];e.forEach((function(e){var i=e.split("_._");2==i.length&&(i=parseInt(i[1]),a.push(t.$items[i]))})),this.emitValueChange(a),this.$nextTick((function(){t.emitFormValidate(a)}))}}},watch:{value:function(e){this.initValue(e)}},created:function(){this.initValue(this.value)},methods:{initValue:function(t){var a=this;if(!(this.simple||this.readOnly||this.isDesign)){var i=dsf.type(t);if("object"==i&&(t=t.value,i="string"),dsf.isUnDef(t))this.radioValue=[];else if("string"==i||"number"==i||"boolean"==i){var n=this.$items.findIndex((function(e){return e.value==t}));this.radioValue=-1==n?[]:[this.$items[n].value+"_._"+n]}else if("array"==i){var s=[];t.forEach((function(e){var t=e.value;if(t){var i=a.$items.findIndex((function(e){return e.value==t}));s.push(t+"_._"+i)}})),e.isEqual(s,this.result)||(this.radioValue=s)}else this.radioValue=[]}},change:function(){this.$dispatch("change",this.value)}}})}).call(this,a("2ef0"))},b83c:function(e,t,a){"use strict";(function(e){a("99af"),a("a15b"),a("b0c0"),a("2ca0"),a("4795"),a("e17f");var i=a("2241"),n=(a("e7e5"),a("d399")),s=a("ade3"),o=(a("96cf"),a("1da1"));t["a"]={openWindow:function(e){if("string"==dsf.type(e)){var t="";t=e,e={},e.url=t}var a={openerVm:this._isVue?this:null,url:"",dialogArgs:null};e=dsf.mix(a,e),e.url.startsWith("#/")&&(e.url=e.url.substr(1)),e.url.startsWith("/")||(e.url="/"+e.url);var i=dsf.url.parse(e.url);dsf.global.$windowArgs||(dsf.global.$windowArgs={}),dsf.global.$windowArgs[i.pathname]=a.dialogArgs||{},this.$router.push({path:e.url})},openDialog:function(t){var a=this._isVue?this:null,i=null;t.template||(t.params&&t.params.path&&!t.content&&(t.content="DsfMobileViewPart",t.params.showModel="full"),t.content&&"string"!==dsf.type(t.content)&&t.content.name&&(i=Object.create(t.content),i.mixins=[{inject:{$dialog:{default:null}}}],t.content=t.content.name+"DialogCopy"));var n=[];n="dialog"==t.type?[":type=type",'@closed="cancel"',':before-close="confirmBeforeClose"',":width=$width",':show-confirm-button="showConfirmButton"',':show-cancel-button="showCancelButton"',':confirm-button-text="confirmButtonText"',':cancel-button-text="cancelButtonText"']:[":type=type",":class=\"{'has-button-bar':btns.length>0}\"",':has-header="hasHeader"',':width="$width"',':height="$height"','@close="close"','@closed="cancel"',':round="round"',':position="position"',':show-close="showClose"'];var l={router:this.$router,data:function(){return{type:t.type||"popup",dialogVisible:!0,title:t.title||"对话框",content:t.content,width:t.width||"auto",height:t.height||"auto",destroyOnClose:!0,params:t.params||{},overflow:t.overflow||"auto",btns:t.btns||[],events:t.event,fullscreen:t.fullscreen,openerVm:a,dialogArgs:t.dialogArgs||null,showClose:!dsf.isDef(t.showClose)||t.showClose,position:t.position?t.position:"bottom",btnPosition:t.btnPosition?t.btnPosition:"top",round:!!t.round,hasHeader:!1!==t.hasHeader,showConfirmButton:t.showConfirmButton,showCancelButton:t.showCancelButton,confirmButtonText:t.confirmButtonText,cancelButtonText:t.cancelButtonText}},computed:{$width:function(){var e=this.type;return"popup"==e?"bottom"==this.position||"top"==this.position?"100vw":this.width:"auto"!=this.width&&this.width?dsf.pxToRem(this.width):dsf.pxToRem(320)},$height:function(){var e=this.type;return"popup"==e?"left"==this.position||"right"==this.position?"100vh":this.height:dsf.pxToRem(this.height)}},methods:{dialogSure:function(e){!1!==e&&(t.yes(e),this.close())},clickHandler:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=!0,!e||!e.handler){a.next=5;break}return a.next=4,e.handler(t.$refs.content,t.$refs);case 4:i=a.sent;case 5:return!1!==i&&t.close(),a.abrupt("return",i);case 7:case"end":return a.stop()}}),a)})))()},close:function(){this.dialogVisible=!1},cancel:function(){var e=this;e.destroy()},confirmBeforeClose:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,a.clickHandler("confirm"==e?a.btns[0]:a.btns[1]);case 2:n=i.sent,t(!1!==n);case 4:case"end":return i.stop()}}),i)})))()},destroy:function(){var e=this;u&&(u=null),window.setTimeout((function(){t=null,a=null,e.$destroy()}),0)}},template:'\n        <DsfMobileDialog\n          :title="title"\n          ref="instance"\n          :visible.sync="dialogVisible"\n          '.concat(n.join(" "),'\n          :dialog-args="dialogArgs"\n          :opener-vm="openerVm"\n          :dialog-sure="dialogSure"\n        >\n          <template v-slot:cancel>\n            <button @click="close" class="van-picker__cancel">取消</button>\n          </template>\n          <template v-slot:title>\n            {{title}}\n          </template>\n          <template v-if="btnPosition !== \'bottom\'" v-slot:buttons>\n            <button v-for="(btn,index) in btns" class="van-picker__confirm" @click="clickHandler(btn)">{{btn.text}}</button>\n          </template>\n          <template v-if="btnPosition === \'bottom\'" v-slot:buttonBar>\n            <DsfMobileButton\n              v-if="!btn.class || (btn.class && btn.class.indexOf(\'hide\') === -1)"\n              v-for="(btn,$index) in btns"\n              :key="$index"\n              class="ds-button-bar-item"\n              :title="btn.text"\n              :type="btn.type"\n              :btn-style="btn.btnStyle"\n              @click="clickHandler(btn, $event)"\n            >\n              {{ btn.text }}\n            </DsfMobileButton>\n          </template>\n          <template v-slot:dialog-buttons>\n            <van-button v-if="!btn.class || (btn.class && btn.class.indexOf(\'hide\') === -1)" v-for="(btn,index) in btns" :class="btn.class ? btn.class : \'van-dialog__confirm\'" @click="clickHandler(btn)">{{btn.text}}</van-button>\n          </template>\n          <template v-slot:default>\n            <div v-if="type==\'popup\'" :style="{\'position\':\'absolute\',\'top\':\'0\', right: 0, left: 0, bottom: 0, \'overflow\':(overflow||\'auto\')}">\n              ').concat(t.template?t.template:'<component :is="content" v-bind="params" ref="content" v-on="events" @yes="dialogSure"></component>',"\n            </div>\n            <div v-else-if=\"type=='dialog'\" :style=\"{'height':$height,'overflow':(overflow||'auto')}\">\n              ").concat(t.template?t.template:'<component :is="content" v-bind="params" ref="content" v-on="events" @yes="dialogSure"></component>',"\n            </div>\n          </template>\n        </DsfMobileDialog>")};i&&(l.components=Object(s["a"])({},t.content,i));var r=e.extend(l),u=(new r).$mount();return document.body.appendChild(u.$el),u},message:function(e,t){if(dsf.isUnDef(t))Object(n["a"])(e);else{var a={message:""};"string"==dsf.type(e)&&(a.message=e),!1!==t?n["a"].success(a.message):n["a"].fail(a.message)}},alert:function(e){return"string"==dsf.type(e)&&(e={message:e}),i["a"].alert(e)},confirm:function(e){return"string"==dsf.type(e)&&(e={message:e}),i["a"].confirm(e)},loading:function(e,t){return n["a"].loading({message:e||"加载中...",forbidClick:!0,duration:0,onClose:t||dsf.noop})},closeLoading:function(e){e&&e.clear()}}}).call(this,a("a026")["default"])},c3f0:function(e,t,a){"use strict";a.r(t),function(e){a("a15b"),a("b0c0"),a("d3b7"),a("ac1f"),a("5319"),a("1276"),a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("234e"),a("a745"),a("61a6");var t=a("6a0a"),i=a("97ad"),n=(a("4ce4"),a("365c"),a("162d")),s=a("e95d"),o=a("4360"),l=a("dd83"),r=a("323e"),u=a.n(r);a("a5d8");u.a.configure({easing:"ease-in",minimum:.1,showSpinner:!1}),dsf.init.initPlatform(e),dsf.init.globalMixin(e),e.use(i["a"]),e.use(n["a"]),dsf.global.$isMobile=!0,e.config.productionTip=!1;var c="appDemo"==(window.frameElement||window).name,d=dsf.config.setting_public_mobile_login_page,h=d.split("#"),f=h.length>1?h[1]:null;if(f){var p=f.split("?");p.length<2?p.push("from=${from}"):2==p.length&&""==p[1]?p[1]="from=${from}":p[1]+="&from=${from}",h[1]=p.join("?"),d=h.join("#")}l["a"].beforeEach((function(e,t,a){if(u.a.start(),(e.meta.needLogin||"/"==e.fullPath)&&!dsf.cookies.get("authorization_token"))return location.replace(d.replace("${from}",encodeURIComponent(location.href))),void a(!1);dsf.transition.clearCache(o["a"],e,t),dsf.transition.addCache(o["a"],e,t),a()})),l["a"].afterEach((function(e){if(document.title=e.meta.title||dsf.config.setting_public_logo_title||"",c)try{window.parent&&window.parent.$mobileSetting&&window.parent.$mobileSetting.routeChange(e)}catch(t){dsf.error(t)}u.a.done()}));var m="",g=[],v=[];dsf.http.get("mobile/navigation/btn/".concat(window.sessionStorage.getItem("appId")||m),{}).then((function(e){var t=e.data,a=JSON.parse(t.data["dsfa_rm.content"]||"{}");return g=a.navs,v=a.preloads,dsf.init.preloads(v||[],l["a"],"mobile")})).catch((function(e){dsf.httpError(e)})).finally((function(){new e({mixins:[t["a"]],store:o["a"],router:l["a"],data:function(){return{isDemo:c,navs:g}},created:function(){dsf.flexble(),dsf.resizeDetector(),this.isDemo&&a.e("touch-emulator").then(a.t.bind(null,"f0e6",7))},render:function(e){return e(s["a"])}}).$mount("#app")}))}.call(this,a("a026")["default"])},c44e:function(e,t,a){"use strict";(function(e){a("99af"),a("c975"),a("a15b"),a("fb6a"),a("b0c0"),a("ac1f"),a("5319"),a("841c"),a("1276"),a("96cf");var i=a("1da1"),n=a("2909"),s=a("d631"),o=a("d7b1");t["a"]=dsf.component({inheritAttrs:!1,name:"DsfMobileViewPart",ctrlCaption:"页面视图",mixins:[s["a"]],provide:function(){return{$frame:this}},props:{path:{type:String,default:""},showModel:{type:String,default:"none"},backgroundColor:{type:String,default:""},forceUpdate:{type:Boolean,default:!0},readOnly:{type:Boolean,default:!1},syncSave:{type:Boolean,default:!1},isPathParamsPenetrate:{type:Boolean,default:!0}},data:function(){return{componentName:"",nameSpace:"",pageName:"",params:{}}},beforeCreate:function(){},created:function(){this.$vm&&this.$vm.frames&&(this.$vm.frames[this.caption]=this)},computed:{getCss:function(){return[].concat(Object(n["a"])(this.$getClass()),[this.shadow?"shadow":"","full"==this.showModel?"full":""])}},updated:function(){this.isDesign&&this.$dispatch("design-height-change","full"==this.showModel?"100%":"auto")},methods:{getPath:function(){if(this.path){var e=this.path,t=dsf.url.parse(e),a=t.href.replace(t.search,""),i=[];for(var n in t.searchQuery)i.push(n+"="+t.searchQuery[n]);return dsf.isUnDef(t.searchQuery.isview)&&this.readOnly&&i.push("isview=1"),a+=i.length>0?"?"+i.join("&"):"",this.$replace(a)}return""},reset:function(){this.$refs.view.reset()},reloadData:function(){this.$refs.view.reloadData()},analysisUrl:function(){var t=this,a=this.path.indexOf("?"),i=[this.path.substr(0,a<0?this.path.length:a),a<0?"":this.path.substr(a+1)],n=i[0],s=i[1],o=n.split("/"),l=n.replace(/\//g,"."),r=o.slice(0,o.length-1).join("."),u=o[o.length-1],c=dsf.url.queryStringParse(s),d={};e.each(c,(function(e,a){d[a]=t.$replace(e)}));var h=dsf.mix({},this.queryString,d);return this.readOnly&&(h.isview="1"),{ns:l,nameSpace:r,pageName:u,params:h}},yes:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$refs.view.yes){t.next=4;break}return t.next=3,e.$refs.view.yes();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()}},watch:{path:{handler:function(e){var t=this;if(e&&!this.isDesign){var a=this.analysisUrl(),i=a.ns;this.nameSpace=a.nameSpace,this.pageName=a.pageName,this.params=a.params,Object(o["a"])(i,"mobile").then((function(e){t.componentName==e.name?t.forceUpdate?(t.componentName="",t.$nextTick((function(){t.componentName=e.name}))):(t.reset(),t.reloadData()):(t.componentName="",t.$nextTick((function(){t.componentName=e.name})))})).catch((function(e){dsf.layer.pc.message("无法加载组件",!1)}))}},immediate:!0},"$route.query":function(e,t){var a=this.analysisUrl();this.params=a.params}}})}).call(this,a("2ef0"))},c68f:function(e,t,a){"use strict";(function(e){a("99af"),a("c975"),a("a15b"),a("d81d"),a("a434"),a("a9e3"),a("b64b"),a("ac1f"),a("5319"),a("1276");var i=a("55f5");function n(){var e=this.searchHistory.indexOf(this.searchValue);-1===e&&(this.searchHistory.push(this.searchValue),localStorage.setItem("autocomplete-search-history",this.searchHistory.join(",")))}t["a"]=dsf.component({name:"DsfMobileAutoComplete",mixins:[i["a"]],ctrlType:"autocomplete",ctrlCaption:"自动填充",props:{placeholder:{type:String,default:"请输入"},inputAlign:{type:String,default:"right"},metadata:{type:Object,default:function(){return dsf.metadata.get("text-meta-data")}},metaDataType:{type:String,default:"0"},chooseMetaData:{type:Object,default:function(){return{}}},source:{type:String,default:""},pageSize:{type:Number,default:10},position:{type:String,default:"right"},dialogWidth:{type:String,default:"100%"},autoSwitch:{type:Boolean,default:!0}},computed:{inputValue:{get:function(){return this.value},set:function(e){this.emitValueChange(e)}},searchUrl:function(){return dsf.express.replace(this.source)}},data:function(){return{dialogVisible:!1,searchValue:"",list:[],pageNum:1,totalPage:null,totalRow:null,finished:!1,searchLoading:!1,showList:!1,searchHistory:[],lastSearchInputTime:null}},methods:{inputFocusHandler:function(){this.dialogVisible=!0},onDialogClose:function(){this.dialogVisible=!1},onDialogOpen:function(){this.searchValue="",this.list=[],this.pageNum=1,this.totalPage=null,this.totalRow=null,this.finished=!1,this.searchLoading=!1,this.showList=!1;var e=localStorage.getItem("autocomplete-search-history");this.searchHistory=e?e.split(","):[]},onSearchInput:function(){var e=(new Date).getTime();(!this.lastSearchInputTime||e-this.lastSearchInputTime>300)&&(this.searchValue?this.doSearch():(this.showList=!1,this.list=[]),this.pageNum=1,this.list=[],this.lastSearchInputTime=e)},onSearch:function(e){this.pageNum=1,this.list=[],this.doSearch(),n.call(this)},doSearch:function(){var t=this;this.showList=!0,this.finished=!1,this.$http.get(this.searchUrl,{pageNum:this.pageNum,pageSize:this.pageSize,keyWord:this.searchValue}).done((function(a){var i=a.data;t.totalPage=i.totalPage,t.totalRow=i.totalRow,e.isArray(i.list)&&(i.list=i.list.map((function(e){return e.checked=!1,e})),t.list=t.list.concat(i.list)),t.pageNum>=i.totalPage&&(t.finished=!0)})).error((function(e){dsf.layer.message("搜索失败",!1),t.finished=!0})).always((function(){t.searchLoading=!1}))},onSearchCancel:function(){this.dialogVisible=!1},onSearchLoad:function(){this.pageNum+=1,this.doSearch()},checkItem:function(t){var a=this;if(t.checked=!0,this.inputValue=t.value,n.call(this),this.$vm&&this.autoSwitch){var i=this.$vm.getScopeMetaDataDict(this);this.local&&e.forOwn(t,(function(n,s){e.forOwn(i,(function(i,o){var l=o.split("."),r=l[1]?l[1]:o;if(1===i.fieldsLength)(o===s||r===s)&&a.$vm.$set(a.local,o,n);else if(i.fieldsLength>1)if(o===s)a.$vm.$set(a.local,o,n);else{var u={};e.each(i.valueAttributes,(function(e,a){var i=r+"_"+e;dsf.isDef(t[i])&&(u[e]=t[i])})),Object.keys(u).length==i.valueAttributes.length&&a.$vm.$set(a.local,o,u)}}))}))}this.$nextTick((function(){a.dialogVisible=!1;var e=t.label||t.value;a.emitFormValidate(e),a.$nextTick((function(){a.$dispatch("select-complete",t)}))}))},closeTag:function(e){var t=this.searchHistory.indexOf(e);this.searchHistory.splice(t,1),localStorage.setItem("autocomplete-search-history",this.searchHistory.join(","))},clearTag:function(){this.searchHistory=[],localStorage.removeItem("autocomplete-search-history")},tag2search:function(e){this.searchValue=e,this.doSearch()}}})}).call(this,a("2ef0"))},cdec:function(e,t,a){"use strict";(function(e,i){a("99af"),a("cb29"),a("4de4"),a("7db0"),a("c740"),a("4160"),a("c975"),a("a15b"),a("d81d"),a("fb6a"),a("a434"),a("b0c0"),a("a9e3"),a("d3b7"),a("ac1f"),a("5319"),a("cc71"),a("159b");var n=a("2909"),s=a("e788"),o=a("663b"),l="grid-area-";function r(){for(var e=[],t=this.contentLayout.grid,a=0;a<t.length;a++){e[a]||(e[a]=[]);for(var i=0;i<t[a].length;i++)e[a][i]=null,this.contentLayout.widths[i]||(this.contentLayout.widths[i]="auto")}for(var n={},s=0;s<t.length;s++)for(var o=t[s],r=0;r<o.length;r++){var u=o[r];if(n[u]){var c=Math.abs(s-n[u].rowIndex)+1,d=Math.abs(r-n[u].colIndex)+1;n[u].rowSpan=c,n[u].colSpan=d}else n[u]={areaName:l+u,name:u,rowIndex:s,colIndex:r,rowSpan:1,colSpan:1};n[u].setting={padding:this.getCellPadding(n[u]),height:this.getCellHeight(n[u]),lineHeight:this.getLineHeight(n[u]),color:this.getCellFontColor(n[u]),class:this.getCellClass(n[u]),lineNum:this.getLineNum(n[u])};var h=n[u];e[s][r]=h}return e}function u(){var e=this.cellSerial;if(this.contentLayout.grid.length<=0)for(var t=0;t<3;t++){for(var a=[],i=0;i<4;i++){e++;var n=dsf.math.numToEnglishLetter(e);a.push(n)}this.contentLayout.grid.push(a)}this.$emit("update:cellSerial",e)}function c(){var t=this;this.slots.slice(0);if(dsf.array.removeWith(this.slots,(function(e){return 0==e.name.indexOf(l)})),this.matrix)for(var a=0;a<this.matrix.length;a++)for(var i=function(i){var n=t.matrix[a][i],s=e.find(t.slots,(function(e){return e.name==n.name}));s||(s={name:n.name,controls:[],scope:"scope",dataKey:"row",repeat:!0,textProxy:!0},t.slots.push(s)),s.controls=s?s.controls:[]},n=0;n<this.matrix[a].length;n++)i(n)}function d(t){var a=[];return t=t||this.matrix,e.each(t,(function(t){var i=[];e.each(t,(function(e){i.push(e.name.replace(l,""))})),a.push(i)})),a}function h(e){if(this.isDesign)if(e&&e.length){var t=[],a=[],i=[],s=[],o=e.map((function(e){var n=e.position();if(n){t.push(n.top),a.push(n.left),i.push(n.top+e.height()),s.push(n.left+e.width());var o=~~e.attr("index"),r=~~e.attr("row-index"),u=~~e.attr("col-index"),c=e.attr("name");return{areaName:l+c,name:c,gridIndex:o,rowIndex:~~r,colIndex:~~u}}}));t=Math.min.apply(Math,Object(n["a"])(t)),a=Math.min.apply(Math,Object(n["a"])(a)),i=Math.max.apply(Math,Object(n["a"])(i)),s=Math.max.apply(Math,Object(n["a"])(s)),this.rangeWrap={show:!0,width:s-a,height:i-t-1,top:t-4,left:a-4,selected:o}}else this.rangeWrap.show=!1}function f(e,t){if(t&&e.get(0)!=t.get(0)){var a=p.call(this,e,t),n=a.minRowIndex,s=a.maxRowIndex,o=a.minColIndex,l=a.maxColIndex;return m.call(this,n,s,o,l)}return e?[i(e)]:[]}function p(e,t){var a=~~t.attr("row-index"),i=~~t.attr("col-index"),n=~~t.attr("rowspan")-1,s=~~t.attr("colspan")-1,o=~~e.attr("row-index"),l=~~e.attr("col-index"),r=~~e.attr("rowspan")-1,u=~~e.attr("colspan")-1,c=Math.min(o,a),d=Math.max(o+r,a+n),h=Math.min(l,i),f=Math.max(l+u,i+s);return g.call(this,c,d,h,f)}function m(e,t,a,i){for(var n=[],s=e;s<=t;s++)for(var o=a;o<=i;o++){var l=v.call(this,s,o);l&&n.push(l)}return n}function g(e,t,a,i){var n=m.call(this,e,t,a,i),s=[],o=[],l=[],r=[];n.forEach((function(e){l.push(+e.attr("row-index")),r.push(+e.attr("col-index")),s.push(+e.attr("row-index")+ +e.attr("rowspan")-1),o.push(+e.attr("col-index")+ +e.attr("colspan")-1)}));var u=Math.min.apply(Math,l),c=Math.max.apply(Math,s),d=Math.min.apply(Math,r),h=Math.max.apply(Math,o);return u==e&&c==t&&d==a&&h==i?{minRowIndex:u,maxRowIndex:c,minColIndex:d,maxColIndex:h}:g.call(this,u,c,d,h)}function v(e,t){var a=this.matrix[e][t];if(a){var n=l+a.name,s=this.$el.querySelector("."+n);return i(s)}return null}function y(t){var a=this,n=[];return e.each(t,(function(e){var t=l+e.name,s=a.$el.querySelector("."+t);s&&n.push(i(s))})),n}function b(){this.downCell=null,this.rangeWrap={show:!1,width:0,height:0,top:-10,left:-10,selected:[]}}function w(e){for(var t=0;t<e.length;t++){var a=e.eq(t);a.hasClass("grid-area")||(a=a.closest(".grid-area"));var i=a.closest(".ds-datagrid");if(this.$el===i.get(0))return a}return null}function x(e,t,a,i){var n=this,s=dsf.mix(!0,[],this.matrix),o=this.matrix[e][a];if(o)for(var l=e;l<=t;l++)for(var r=a;r<=i;r++)s[l][r]=o;var u=d.call(this,s);this.contentLayout.grid=u,this.$nextTick((function(){var e=y.call(n,n.rangeWrap.selected);h.call(n,e)}))}function _(e){var t=[];return e.forEach((function(e){var a=e.get?e:i(e),n=+a.attr("rowspan"),s=+a.attr("colspan");(n>1||s>1)&&t.push(a)})),t}function C(e){var t=this,a=dsf.mix(!0,[],this.matrix),i=this.cellSerial;e.forEach((function(e){for(var t=~~e.attr("row-index"),n=~~e.attr("col-index"),s=~~e.attr("colspan")-1,o=~~e.attr("rowspan")-1,l=e.attr("name"),r=t,u=t+o;r<=u;r++)for(var c=n,d=n+s;c<=d;c++)a[r][c]=r==t&&c==n?{name:l}:{name:dsf.math.numToEnglishLetter(++i)}})),this.$emit("update:cellSerial",i);var n=d.call(this,a);this.contentLayout.grid=n,this.$nextTick((function(){var e=y.call(t,t.rangeWrap.selected);h.call(t,e)}))}function D(e,t){for(var a=this,i=dsf.mix(!0,[],this.matrix),n=[],s=0,o=i[e],l=0;l<o.length;l++)s++;for(var r=this.cellSerial,u=0;u<s;u++){var c=o[u],f=c.rowIndex,p=f+c.rowSpan-1,m={};m.name=f<e&&p>=e?c.name:dsf.math.numToEnglishLetter(++r),n.push(m)}i.splice("before"==t?e:e+1,0,n);var g=d.call(this,i);this.contentLayout.grid=g,this.$emit("update:cellSerial",r),this.$nextTick((function(){var e=y.call(a,a.rangeWrap.selected);h.call(a,e)}))}function k(e,t){for(var a=this,i=dsf.mix(!0,[],this.matrix),n=this.cellSerial,s=0;s<i.length;s++){var o=i[s],l={},r=o[e],u=r.colIndex,c=u+r.colSpan-1;l.name=u<e&&c>=e?r.name:dsf.math.numToEnglishLetter(++n),o.splice("before"==t?e:e+1,0,l)}var f=d.call(this,i);this.contentLayout.grid=f,this.$emit("update:cellSerial",n),this.$nextTick((function(){var e=y.call(a,a.rangeWrap.selected);h.call(a,e)}))}function $(){var e=y.call(this,this.rangeWrap.selected),t=e[0],a=e[e.length-1],i=~~a.attr("row-index"),n=~~a.attr("col-index"),s=~~a.attr("rowspan"),o=~~a.attr("colspan"),l=~~t.attr("row-index"),r=~~t.attr("col-index");x.call(this,l,i+s-1,r,n+o-1)}function S(){var t=this,a=y.call(this,this.rangeWrap.selected),i=[];e.each(a,(function(e,a){var n=~~e.attr("row-index"),s=~~e.attr("col-index"),o=t.matrix[n][s];i.push(o)}));var n=this;this.$openDialog({title:"单元格设置",content:"DesGridLayoutCellSetting",width:"40vw",height:"60vh",params:{cells:i,owner:n},btns:[{text:"确定",handler:function(t){var a=t.yes();n.contentLayout.setting||n.$set(n.contentLayout,"setting",{}),e.each(a,(function(e,t){n.$set(n.contentLayout.setting,t,e)}));var i=d.call(n);n.contentLayout.grid=i,n.$nextTick((function(){var e=y.call(n,n.rangeWrap.selected);h.call(n,e)}))}},{text:"取消"}]})}function T(){var e=y.call(this,this.rangeWrap.selected),t=_.call(this,e);C.call(this,t)}function I(){var e=y.call(this,this.rangeWrap.selected),t=e[0],a=~~t.attr("row-index");D.call(this,a,"before")}function O(){var e=y.call(this,this.rangeWrap.selected),t=e[e.length-1],a=~~t.attr("row-index")+~~t.attr("rowspan")-1;D.call(this,a,"after")}function V(){var e=y.call(this,this.rangeWrap.selected),t=e[0],a=~~t.attr("col-index");k.call(this,a,"before")}function B(){var e=y.call(this,this.rangeWrap.selected),t=e[e.length-1],a=~~t.attr("col-index")+~~t.attr("colspan")-1;k.call(this,a,"after")}function P(){var e=this,t=y.call(this,this.rangeWrap.selected),a=t[0],i=t[t.length-1],n=~~a.attr("row-index"),s=~~i.attr("row-index")+~~i.attr("rowspan")-1,o=s-n+1,l=dsf.mix(!0,[],this.matrix);l.splice(n,o);var r=d.call(this,l);this.contentLayout.grid=r,this.$nextTick((function(){var t=y.call(e,e.rangeWrap.selected);h.call(e,t)}))}function L(){for(var e=this,t=y.call(this,this.rangeWrap.selected),a=t[0],i=t[t.length-1],n=+a.attr("col-index"),s=+i.attr("col-index")+ +i.attr("colspan")-1,o=s-n+1,l=dsf.mix(!0,[],this.matrix),r=0;r<l.length;r++)l[r].splice(n,o);var u=d.call(this,l);this.contentLayout.grid=u,this.$nextTick((function(){var t=y.call(e,e.rangeWrap.selected);h.call(e,t)}))}t["a"]=dsf.component({name:"DsfMobileDataGrid",ctrlCaption:"数据列表",mixins:[s["a"]],components:{DsfMobilGridLayout:o["a"]},provide:function(){return{$list:this,$buttonOwner:this}},data:function(){return{rangeWrap:{show:!1,width:0,height:0,top:0,left:0,selected:[]},loading:!1,finished:!1,refreshing:!1,currentPage:0,matrix:null,searchStr:""}},props:{searchPlaceholder:{type:String,default:"请输入搜索关键词"},finishedText:{type:String,default:"没有更多了"},searchInfo:{type:Array,default:function(){return[]}},slots:{type:Array,default:function(){return[{name:"default",controls:[]},{name:"data-item",controls:[],scope:"scope",dataKey:"row",repeat:!0},{name:"data-item-hidden",controls:[],scope:"scope",dataKey:"row",repeat:!0}]}},contentLayout:{type:Object,default:function(){return{grid:[],widths:[],heights:[],setting:{}}}},pageSize:{type:Number,default:15},browseScope:{type:Object,default:function(){return{scope:"2",unit:[]}}},cellSerial:{type:Number,default:0},mountedRequestData:{type:Boolean,default:!0},data:{type:Array,default:function(){return[]}},padding:{type:Array,default:function(){return["8","8","8","8"]}},borderRadius:{type:Array,default:function(){return["0","0"]}},topBottom:{type:String,default:""},rowButtons:{type:Array,default:function(){return[]}},rowButtonsAlign:{type:String,default:"right"},rowButtonsMaxNumber:{type:Number,default:2},rowButtonsMoreButtonStyle:{type:String,default:""},rowButtonsMoreButtonText:{type:String,default:"更多"},rowClickToUrl:{type:String,default:""},isButtonBar:{type:Boolean,default:!0}},computed:{areas:function(){var t=this.matrix,a=[];return t&&e.each(t,(function(t){e.each(t,(function(e){dsf.array.ensure(a,e,(function(t){return t.name==e.name}))}))})),a},$borderRadius:function(){return[this.pxToRem(this.borderRadius[0]),this.pxToRem(this.borderRadius[0]),this.pxToRem(this.borderRadius[1]),this.pxToRem(this.borderRadius[1])].join(" ")},$padding:function(){var e=this.padding;return[this.pxToRem(e[0]),this.pxToRem(e[1]),this.pxToRem(e[2]),this.pxToRem(e[3])].join(" ")},splitWidthHorizontal:function(){return"split-small"==this.topBottom?"split-horizontal--8":"split-medium"==this.topBottom?"split-horizontal--10":"split-big"==this.topBottom?"split-horizontal--15":""}},created:function(){},mounted:function(){},methods:{onLoad:function(){this.currentPage++,this.loadData()},rowFooterStyle:function(){if(!this.isDesign)return{"margin-right":this.pxToRem(-1*this.padding[1]),"margin-bottom":this.pxToRem(-1*this.padding[2]),"margin-left":this.pxToRem(-1*this.padding[3])}},onRefresh:function(){this.refreshing=!0,this.finished=!1,this.data.splice(0,this.data.length),this.loading=!0,this.loadData()},getQueryInfo:function(){return{query:{},order:[{code:"ds_create_time",sort:"asc"}]}},doLayout:function(){},getCellSetting:function(e){return this.contentLayout.setting&&this.contentLayout.setting[e.name]?this.contentLayout.setting[e.name]:{}},getCellFontColor:function(e){var t=this.getCellSetting(e);return t.color},getCellPadding:function(e){var t=this.getCellSetting(e),a=[this.pxToRem(t.paddingTop||0),this.pxToRem(t.paddingRight||0),this.pxToRem(t.paddingBottom||0),this.pxToRem(t.paddingLeft||0)];return a.join(" ")},getCellClass:function(e){var t=this.getCellSetting(e);return[t?t.fontSize:"ds-font5",t?t.align:"left",t?t.verticalAlign:"middle",t&&1==t.bold?"bold":""]},getLineNum:function(e){var t=this.getCellSetting(e);return t&&t.lineNum?t.lineNum:"auto"},getLineHeight:function(e){var t=this.getCellSetting(e);return t&&t.lineHeight?this.pxToRem(t.lineHeight||"normal"):"auto"},getCellHeight:function(e){var t="auto",a=this.getCellSetting(e);return a&&a.height&&(t=this.pxToRem(a.height||"auto")),this.isDesign&&"auto"==t?"100%":t},loadData:function(){var e=this;if(this.$vm){this.refreshing&&(this.currentPage=1);var t=this.getQueryInfo(),a={pageNum:this.currentPage,pageSize:this.pageSize,query:JSON.stringify(t.query),order:JSON.stringify(t.order),namespace:this.$vm.nameSpace,pageName:this.$vm.pageName},i="/meta/list/data";dsf.mix(a,this.queryString);var s=null,o=!1;return this.$http.get(i,a).then((function(t){var a,i,o=t.data;if(2e4!=o.state)throw o;s=o.data,e.refreshing?(a=e.data).splice.apply(a,[0,e.data.length].concat(Object(n["a"])(s))):(i=e.data).push.apply(i,Object(n["a"])(s))})).catch((function(e){if(o=!0,"string"==dsf.type(e)||e.message){var t=e.message||e;dsf.layer.message(t,!1)}})).finally((function(){o&&(e.finished=!0),"array"==dsf.type(s)&&s.length<=0&&(e.finished=!0),e.$nextTick((function(){e.loading=!1,e.refreshing&&(e.refreshing=!1)}))}))}},itemClickHandler:function(e,t){this.$listeners["row-click"]?this.$dispatch("row-click",e):this.rowClickToUrl&&this.$router.push({path:this.rowClickToUrl})}},watch:{"contentLayout.grid":{handler:function(e){if(this.isDesign){u.call(this),this.matrix=r.call(this),c.call(this);var t=this.contentLayout.widths.slice(0),a=this.contentLayout.heights.slice(0);dsf.array.removeAll(this.contentLayout.widths),dsf.array.removeAll(this.contentLayout.heights);for(var i=0;i<this.matrix.length;i++){a[i]?this.contentLayout.heights[i]=a[i]:this.contentLayout.heights[i]="auto";for(var n=0;n<this.matrix[i].length;n++)t[n]?this.contentLayout.widths[n]=t[n]:this.contentLayout.widths[n]="auto"}}else this.matrix=r.call(this)},immediate:!0},"contentLayout.setting":{handler:function(e){if(this.isDesign){u.call(this),this.matrix=r.call(this),c.call(this);var t=this.contentLayout.widths.slice(0),a=this.contentLayout.heights.slice(0);dsf.array.removeAll(this.contentLayout.widths),dsf.array.removeAll(this.contentLayout.heights);for(var i=0;i<this.matrix.length;i++){a[i]?this.contentLayout.heights[i]=a[i]:this.contentLayout.heights[i]="auto";for(var n=0;n<this.matrix[i].length;n++)t[n]?this.contentLayout.widths[n]=t[n]:this.contentLayout.widths[n]="auto"}}else this.matrix=r.call(this)}},data:{handler:function(e){for(var t=0;t<e.length;t++)"$editing"in e[t]||(e[t].$editing=!1),!("$editing"in e[t])&&this.$set(e[t],"$editing",!1),!("$hash"in e[t])&&this.$set(e[t],"$hash",dsf.uuid()),"$order"in e[t]?this.$set(e[t],"$order",t):e[t]["$order"]=t,e[t].$index=t}}},design:{isMask:!1,metadata:{isDeep:!1,create:function(t){var a,i,n=this,s=[];dsf.designer.recursionLayoutTree(this,null,null,(function(e){if(e!=n){var a=e.$options.design||{},i=a.metadata||{},o=i.create&&i.create.call(e,t);if(o&&o.metadata){s.push(o);var l=!dsf.isDef(i.isDeep)||i.isDeep;if(!l)return!1}}}));for(var o={},l=[],r=[],u=0;u<this.searchInfo.length;u++){var c=this.searchInfo[u],d=null;"0"==c.type?(d={code:c.code,operator:c.operation,valueKey:"searchValue"},l.push(d)):(d={code:c.code,operator:c.operation,valueKey:c.code},r.push(d),c.metadata_fullcode=d.code)}var h={logic:"or",items:[]};(a=h.items).push.apply(a,l);var f={logic:"and",items:[]};(i=f.items).push.apply(i,r);var p={logic:"and",items:[]};p.items.push(h),p.items.push(f);var m={logic:"and",items:[]};e.each(this.superSearchInfo,(function(t){var a=null,i="",n=null;if("enum"==t.searchType){var s,o=[];if((null===t||void 0===t||null===(s=t.children)||void 0===s?void 0:s.length)>0?(o=e.map(t.children,(function(e){return 1==e.join})),o=o.slice(0,1)):o=[t],1==o.length){a=o[0].field,i=o[0].operator,n=o[0].field,"in"!=i&&"eq"!=i||(i="in");var l={code:a,operator:"in"==i||"eq"==i?"in":i,valueKey:a};m.items.push(l)}}else if("text"==t.searchType)a=t.code,i=t.operator,n=t.code,m.items.push({code:a,operator:i,valueKey:n});else if("datetime"==t.searchType){var r,u=[];(null===t||void 0===t||null===(r=t.children)||void 0===r?void 0:r.length)>0?(u=e.map(t.children,(function(e){return 1==e.join})),u=u.slice(0,1)):u=[t],1==u.length&&m.items.push({code:u[0].field,operator:u[0].operator,valueKey:u[0].field,dataType:"datetime"})}})),p.items.push(m),o=p;var g={query:o,browseScope:this.browseScope,_self:this};return[g].concat(s)}},contextMenuHandler:function(t){var a=w.call(this,i(t.target));if(a&&a.length){var n=e.findIndex(this.rangeWrap.selected,(function(e){return e.gridIndex==~~a.attr("index")}));if(n<0){this.downCell=a;var s=f.call(this,this.downCell,null);h.call(this,s)}return[{text:"合并单元格",hide:!0,handler:$},{text:"拆分单元格",disabled:!1,handler:T},"-",{text:"插入行(前)",disabled:!1,handler:I},{text:"插入行(后)",disabled:!1,handler:O},{text:"插入列(前)",disabled:!1,handler:V},{text:"插入列(后)",disabled:!1,handler:B},"-",{text:"删除整行",disabled:!1,handler:P},{text:"删除整列",disabled:!1,handler:L},"-",{text:"单元格格式",disabled:!1,handler:S}]}},clearContextMemuHandler:function(){this.isDown=!1,b.call(this)},clearMouseDownHandler:function(){this.isDown=!1,b.call(this)},mouseDownHandler:function(e){if(this.isDesign&&0===e.button){this.isDown=!0,this.downCell=w.call(this,i(e.target));var t=f.call(this,this.downCell,null);h.call(this,t),e.stopPropagation()}},mouseMoveHandler:function(e){if(this.isDown){var t=w.call(this,i(e.target));if(t){this.downCell.get(0),t.get(0);var a=f.call(this,this.downCell,t);h.call(this,a),e.stopPropagation()}}},mouseUpHandler:function(){this.isDown=!1}}})}).call(this,a("2ef0"),a("1157"))},dcdb:function(e,t,a){"use strict";a("2104")},dd83:function(e,t,a){"use strict";(function(e){a("99af");var i=a("2909"),n=a("8c4f"),s=a("fb6e"),o=a("792b"),l=a("ec0b");e.use(n["a"]);var r=[].concat(Object(i["a"])(o["a"]),[{path:"/mobile/login",meta:{title:"登录",needLogin:!1},component:l["a"]},{path:"*",component:s["a"]}]),u=new n["a"]({mode:"hash",base:"",routes:r});dsf.init.initRouter(u,"mobile"),dsf.transition.initRouteTransition(u),t["a"]=u}).call(this,a("a026")["default"])},e95d:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mobile-app",attrs:{id:"app"}},[a("div",{staticClass:"mobile-view",class:{demo:e.isDemo}},[[a("div",{staticClass:"mobile-view-head"}),a("div",{staticClass:"mobile-view-content"},[a("transition",{attrs:{name:e.transitionName}},[e.isShowNavsBar?a("keep-alive",{attrs:{include:e.cachePages,exclude:e.noCachePages,max:e.max}},[a("router-view",{staticClass:"full-view has-nav-bar"})],1):a("keep-alive",{attrs:{include:e.cachePages,exclude:e.noCachePages,max:e.max}},[a("router-view",{staticClass:"full-view no-nav-bar"})],1)],1),a("div",{staticClass:"mobile-view-foot"},[a("div",{key:"nav-bar",staticClass:"mobile-view-nav-bar"},[a("DsfMobileButtonNav",{attrs:{buttons:e.navs}})],1)])],1)]],2)])},n=[],s=a("2a0a"),o=s["a"],l=a("2877"),r=Object(l["a"])(o,i,n,!1,null,null,null);t["a"]=r.exports},ec0b:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-login-page"},[a("div",{staticClass:"ds-login-page-header"},[a("img",{staticClass:"logo",attrs:{src:"https://gitee.com/static/images/logo.svg?t=158106664"}}),a("svg",{attrs:{viewBox:"0 50 500 35",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{fill:"#fff",d:"M 0 70 Q 87.5 47, 175 70 T 350 75 T 500 70 V 100 H 0 V 0"}})]),e._m(0)]),a("div",{staticClass:"ds-login-page-body"},[a("div",{staticClass:"ds-login-page-tab-header"},[e.tabPositions.length?a("i",{ref:"tabBar",style:e.tabPositions[e.tabActive]}):e._e(),e._l(e.tabs,(function(t,i){return[a("div",{key:i,ref:"tabs",refInFor:!0,staticClass:"ds-login-page-tab-header-item",class:{active:e.tabActive==i},on:{click:function(t){return e.tabClick(i)}}},[e._v(e._s(t))])]}))],2),a("div",{staticClass:"ds-login-page-tab-body"},[0==e.tabActive?a("div",{staticClass:"ds-login-page-tab-body-item"},[a("form",{staticClass:"ds-login-page-form",on:{submit:function(e){e.preventDefault()}}},[a("div",{staticClass:"ds-login-page-form-item"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.username,expression:"username",modifiers:{trim:!0}}],attrs:{type:"text",name:"username",autocomplete:"off",placeholder:"请输入用户名"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),a("div",{staticClass:"ds-login-page-form-item"},[a("i",{staticClass:"iconfont icon-xiayibu",on:{click:function(t){return t.stopPropagation(),e.submitByUsername(t)}}}),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.password,expression:"password",modifiers:{trim:!0}}],attrs:{type:"password",name:"password",autocomplete:"off",placeholder:"请输入密码"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),a("input",{staticStyle:{display:"none"},attrs:{type:"submit"},on:{click:e.submitByUsername}})])]):e._e(),1==e.tabActive?a("div",{staticClass:"ds-login-page-tab-body-item"},[a("form",{staticClass:"ds-login-page-form",on:{submit:function(e){e.preventDefault()}}},[a("div",{staticClass:"ds-login-page-form-item"},[a("div",{staticClass:"getCodeBt",class:[e.codeBtType],on:{click:function(t){return t.stopPropagation(),e.getCode(t)}}},[e._v(" "+e._s(""!=e.codeBtType?e.countdownTime+"s后重新获取":"获取验证码")+" ")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.phoneNumber,expression:"phoneNumber",modifiers:{trim:!0}}],attrs:{type:"tel",name:"phoneNumber",maxlength:"20",autocomplete:"off",placeholder:"请输入手机号"},domProps:{value:e.phoneNumber},on:{input:function(t){t.target.composing||(e.phoneNumber=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),a("div",{staticClass:"ds-login-page-form-item"},[a("i",{staticClass:"iconfont icon-xiayibu",on:{click:function(t){return t.stopPropagation(),e.submitByPhone(t)}}}),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.phoneCode,expression:"phoneCode",modifiers:{trim:!0}}],attrs:{type:"email",name:"phoneCode",maxlength:"12",autocomplete:"off",placeholder:"请输入验证码"},domProps:{value:e.phoneCode},on:{input:function(t){t.target.composing||(e.phoneCode=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),a("input",{staticStyle:{display:"none"},attrs:{type:"submit"},on:{click:e.submitByPhone}})])]):e._e()])])])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-login-page-header-bg"},[a("div"),a("div"),a("div"),a("div")])}],s=(a("99af"),a("d81d"),a("d3b7"),a("ac1f"),a("5319"),a("4795"),{name:"Login",data:function(){return{tabs:["账号登录","验证码登录"],tabPositions:[],tabActive:0,codeBtType:"",countdownTimes:120,countdownTime:0,username:"",password:"",phoneNumber:"",phoneCode:""}},mounted:function(){this.resize(),window.addEventListener("resize",this.resize)},destroyed:function(){clearInterval(this.timeout),window.removeEventListener("resize",this.resize)},methods:{resize:function(){var e=100;this.tabPositions=this.$refs.tabs.map((function(t){var a=(t.offsetWidth-6)/e,i=t.offsetLeft+t.offsetWidth/2+"px";return{display:"block",transform:"translateX(".concat(i,") scale3d(").concat(a,", 1, 1)")}}))},tabClick:function(e){var t=this;this.$refs.tabBar.style.transition="transform .2s ease-in-out",setTimeout((function(){t.tabActive=e,setTimeout((function(){t.$refs.tabBar.style.transition="none"}),210)}),0)},getCode:function(){var e=this;if(""==this.codeBtType)if(""!==this.phoneNumber)if(dsf.validate("isMobileOrTelPhone",this.phoneNumber)){var t=dsf.layer.loading();setTimeout((function(){e.codeBtType="countdown",dsf.layer.closeLoading(t),e.doCountdown()}),1e3)}else dsf.layer.message("手机号输入有误",!1);else dsf.layer.message("手机号不能为空！",!1)},doCountdown:function(){var e=this;this.countdownTime=this.countdownTimes-1,this.timeout=setInterval((function(){e.countdownTime--,e.countdownTime<=-1&&(e.codeBtType="",clearInterval(e.timeout))}),1e3)},submitByUsername:function(){""!==this.username?""!==this.password?this.loginByUsername():dsf.layer.message("密码不能为空！",!1):dsf.layer.message("账号不能为空！",!1)},loginByUsername:function(){var e=this,t=dsf.layer.loading();this.$webAPI.login({userName:this.username,password:dsf.md5(dsf.md5(this.password)),code:"good"}).then((function(t){var a=t.success,i=t.message;a?e.setStateIsLogin():dsf.layer.message(i,!1)})).catch((function(e){e&&dsf.layer.message(e.message||"未知错误",!1)})).finally((function(){dsf.layer.closeLoading(t)}))},submitByPhone:function(){""!==this.phoneNumber?dsf.validate("isMobileOrTelPhone",this.phoneNumber)?""!==this.phoneCode?this.loginByPhone():dsf.layer.message("验证码不能为空！",!1):dsf.layer.message("手机号输入有误",!1):dsf.layer.message("手机号不能为空！",!1)},loginByPhone:function(){dsf.layer.message("登录失败！",!1)},setStateIsLogin:function(){dsf.cookies.set("isLogin",1);var e=this.$route.query.from;e=e?decodeURIComponent(e):dsf.config.setting_public_mobile_login_success_to,location.replace(e)}}}),o=s,l=a("2877"),r=Object(l["a"])(o,i,n,!1,null,null,null);t["a"]=r.exports},f74d:function(e,t,a){"use strict";(function(e){a("a15b"),a("d81d");t["a"]={name:"DsfMobileDataGridItemLayout",props:{isDesign:{type:Boolean,default:!1},gridTemplate:{type:Array,default:function(){return[]}},gridColumns:{type:Array,default:function(){return[]}},gridRows:{type:Array,default:function(){return[]}},areas:{type:Array,default:function(){return[]}}},getAreaStyle:function(e,t){var a={"grid-area":t.areaName};return e.props.isDesign&&(a["min-height"]=e.$options.getRowHeight(e,t.rowIndex,t.colIndex,t.colspan,t.rowspan)),a},getTemplate:function(t){var a=t.props.gridTemplate,i=e.map(a,(function(a,i){var n=e.map(a,(function(e){return e.areaName}));return t.props.isDesign&&n.push("e-"+i),"'"+n.join(" ")+"'"}));return i.join(" ")},getStyle:function(t){var a=t.props.gridColumns,i=t.props.gridRows;t.props.isDesign&&(a=JSON.parse(JSON.stringify(a)),a.push("0"));var n={height:"100%","grid-template-columns":e.map(a,(function(e){return dsf.pxToRem(e)})).join(" "),"grid-template-areas":t.$options.getTemplate(t)};return!t.parent.isDesign&&i.length&&(n["grid-template-rows"]=e.map(i,(function(e){return dsf.pxToRem(e)})).join(" ")),n},getRowHeight:function(e,t,a,i,n){return e.parent.isDesign?i>1&&n>1?"auto":dsf.pxToRem(e.props.gridRows[t]):"auto"}}}).call(this,a("2ef0"))},fb6e:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("van-empty",{staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"image",fn:function(){return[a("van-image",{attrs:{src:e.image,width:"100%",height:"auto"}})]},proxy:!0}])},[[a("van-button",{attrs:{type:"default",icon:"arrow-left"},on:{click:e.back}},[e._v("返回")])]],2)},n=[],s=a("0dca"),o={name:"Error",data:function(){return{image:s}},methods:{back:function(){this.$router.back()}},beforeRouteUpdate:function(e,t,a){this.show=!("/"==e.path),a()}},l=o,r=(a("91e8"),a("2877")),u=Object(r["a"])(l,i,n,!1,null,"e694ce3e",null);t["a"]=u.exports},fc6b:function(e,t,a){"use strict";(function(e){a("99af"),a("4160"),a("c975"),a("a434"),a("a9e3"),a("159b");var i=a("d631"),n=a("acd6");t["a"]=dsf.component({name:"DsfMobileTreeSelector",ctrlCaption:"部门人员选择",mixins:[i["a"],n["a"]],design:{fit:!0,isMask:!0},props:{label:{type:String,default:"树选择器",desc:"用作面包屑的起始文字"},maxTags:{type:[String,Number],default:10,desc:"可选择的数量上限"},chooseIf:{type:String,default:"",desc:"选择条件"},dataSource:{type:String,default:"5",desc:"数据来源，5为选择元数据组"},chooseType:{type:String,default:"2",desc:"部门人员的选择类型，不同类型不同接口"},orgLevel:{type:[String,Number],default:"0",desc:"组织架构选择显示层级，0代表只显示子机构"},showOrgSubMechanism:{type:Boolean,default:!0,desc:"组织架构人员类型是否仅显示子机构"},sqlUrl:{type:String,default:"",desc:"数据来源选择4的，接口地址"},chooseMetaData:{type:Object,default:function(){return{}},desc:"数据来源选择5的，选择元数据组值"}},data:function(){return{navs:[],mainHeight:"",chooseAllState:!1,list:[],listObj:{},result:[],showResult:!1,resultPopup:[],deletedResultPopupIds:[],oldResult:[],_maxTags:void 0}},created:function(){var t=this;if(!dsf.isEmptyObject(this.$choiceParams)){this._maxTags=this.$choiceParams.maxTags||0;var a=this.$choiceParams.value||[];e.forEach(a,(function(e){t.oldResult.push(e.value)}))}this.loadData()},mounted:function(){this.mainHeight="calc(100% - ".concat(this.$refs.header.clientHeight+"px"," - ").concat(this.$refs.footer.clientHeight+"px",")")},methods:{loadData:function(e){this.isDesign?this.setLists([{_name:"布局",_id:"bj",children:[{_name:"一行两列",_id:"yhll"},{_name:"一行三列",_id:"yhsl"},{_name:"栅格布局",_id:"sgbj"},{_name:"表格布局",_id:"bgbj"},{_name:"页面段落",_id:"ymdl"},{_name:"网页视图",_id:"wyst"},{_name:"内嵌视图",_id:"nqst"}]},{_name:"文字",_id:"wz",children:[{_name:"文本",_id:"wb"},{_name:"标题",_id:"bt"},{_name:"标题1",_id:"bt1"},{_name:"标题2",_id:"bt2"},{_name:"标题3",_id:"bt3"},{_name:"标题4",_id:"bt4"},{_name:"标题5",_id:"bt5"},{_name:"标题6",_id:"bt6"}]}],e):this.getLists(e)},getLists:function(e){var t=this,a=dsf.layer.loading(),i="",n=this.queryString;if("4"==this.dataSource)i=this.$replace(this.sqlUrl);else if("5"==this.dataSource){var s=this.chooseMetaData||{};"meta"===s.type?(i="meta/tree/byName",dsf.mix(!0,n,{name:s.code.id,namespace:this.$vm?this.$vm.nameSpace:"",pageName:this.$vm?this.$vm.pageName:"",order:"[]"})):"ds"===s.type&&(i="meta/tree/dbSource",dsf.mix(!0,n,{rmId:s.code}))}else i=[["oua/getUserByCurDept","oua/getUserByCurDept"],["oua/getDeptByCurUnit","oua/getUserByCurUnit"],["oua/getDeptByOrg","oua/getUserByOrg"]][1*this.dataSource-1][1*this.chooseType-1],"3"==this.dataSource&&("2"==this.chooseType&&this.showOrgSubMechanism?(e&&(i="oua/getUserByDept",n["deptID"]=e),n["sExplanLevel"]=this.orgLevel):"1"==this.chooseType&&(n["sExplanLevel"]=this.orgLevel));i?this.$http.get(i,this.queryString).done((function(a){if(a.success){var i=a.data;e&&(i=i.children),t.setLists(i,e)}else dsf.layer.message(a.message,!1)})).error((function(e){dsf.layer.message(e.error.message,!1)})).always((function(){dsf.layer.closeLoading(a)})):dsf.layer.message("请在设计器内完成组件数据配置",!1)},setLists:function(t,a){var i=this,n={},s=[],o=0,l=this;Array.isArray(t)||(t=[t]),e.forEach(t,(function(e){var t=e._id,r=e.treeinfo_pid;e.disabled=l.setDisabled(e),e.disabled||o++,n[t]=e,n[r]?(n[r]["children"]||(n[r]["children"]=[]),n[r]["children"].push(e),i.listObj[r]={data:n[r]["children"],noDisabledNum:-1,choosedNum:0}):(s.push(e),3==l.dataSource&&2==l.chooseType&&l.showOrgSubMechanism&&!a||(l.listObj[t]={data:e.children||0,noDisabledNum:-1,choosedNum:0}))})),this.list=s,this.listObj[a]={data:s,noDisabledNum:o,choosedNum:0},this.setResult()},setResult:function(){},checkAll:function(t){var a=this;e.forEach(this.$refs.checkboxes,(function(e){e.disabled||e.toggle(a.chooseAllState)}));var i=this.listObj[this.navs[this.navs.length-1]?this.navs[this.navs.length-1]["_id"]:void 0];this.chooseAllState?i["choosedNum"]=i.noDisabledNum:i["choosedNum"]=0},toggle:function(e,t){if(!t.disabled){var a=this.$refs.checkboxes[e].checked,i=void 0==this.maxTags?this.maxTags:this._maxTags;if(i&&this.result.length>=i&&!a)return this.$refs.checkboxes[e].toggle(!1),void dsf.layer.message("最多可选择"+i+"个",!1);this.$refs.checkboxes[e].toggle();var n=this.listObj[this.navs[this.navs.length-1]?this.navs[this.navs.length-1]["_id"]:void 0];a?(n.choosedNum--,this.chooseAllState=!1):(n.choosedNum++,this.chooseAllState=n.choosedNum==n.noDisabledNum)}},toChildren:function(t){var a=this;this.navs.push(t);var i=t._id;if(this.listObj[i]){if(this.list=this.listObj[i]["data"],this.list[0]&&this.list[0]._id&&void 0==this.listObj[this.list[0]._id]){var n=0;e.forEach(this.list,(function(e,t){a.setDisabled(e)?a.list[t].disabled=!0:n++,a.listObj[e._id]={data:e.children||0,noDisabledNum:-1,choosedNum:0}})),this.listObj[i]["noDisabledNum"]=n,this.setResult()}this.chooseAllState=this.listObj[i].choosedNum>0&&this.listObj[i].choosedNum==this.listObj[i].noDisabledNum}else this.chooseAllState=!1,this.getLists(i)},changeNav:function(e){if(e!=this.navs.length){this.navs.splice(e);var t=this.navs.length,a={};a=t>0?this.listObj[this.navs[t-1]._id]:this.listObj["undefined"],this.list=a["data"],this.chooseAllState=a.choosedNum>0&&a.choosedNum==a.noDisabledNum}},showResultPopup:function(){this.result.length>0&&(this.showResult=!0,this.resultPopup=dsf.mix(!0,[],this.result),this.deletedResultPopupIds=[])},deleteResultPopup:function(e,t){this.resultPopup.splice(t,1),this.deletedResultPopupIds.push(e)},deleteResult:function(){if(this.showResult=!1,0!=this.deletedResultPopupIds.length)for(var e=0;e<this.result.length;e++){var t=this.result[e],a=this.deletedResultPopupIds.indexOf(t._id);if(0==this.deletedResultPopupIds.length)break;-1!=a&&(this.result.splice(e,1),this.deletedResultPopupIds.splice(a,1),e--)}},getReturnValue:function(){var t=[],a=void 0==this._maxTags?this.maxTags:this._maxTags;return a&&this.result.length>a?(dsf.layer.message("已超出选择数量上限【"+a+"】",!1),!1):(e.forEach(this.result,(function(e,a){t.push(dsf.mix({value:e._id,text:e._name},e))})),this.result=[],t)},setDisabled:function(e){return!(!this.chooseIf||this.$eval(this.chooseIf,e))}}})}).call(this,a("2ef0"))}}]);
//# sourceMappingURL=dsf-mobile.js.map