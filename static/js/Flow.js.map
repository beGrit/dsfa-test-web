{"version":3,"sources":["webpack:///./platform/dsf/designer/flow/flow.vue?1103","webpack:///./node_modules/core-js/modules/es.string.sub.js","webpack:///./platform/dsf/designer/flow/flowInfo.vue?b9a0","webpack:///./node_modules/core-js/modules/es.set.js","webpack:///./platform/dsf/designer/flow/flow.vue?7ade","webpack:///./platform/dsf/designer/flow/Lane.js","webpack:///./platform/dsf/designer/flow/flowInfo.vue?3066","webpack:///platform/dsf/designer/flow/flowInfo.vue","webpack:///./platform/dsf/designer/flow/flowInfo.vue?0030","webpack:///./platform/dsf/designer/flow/flowInfo.vue","webpack:///./platform/dsf/designer/flow/flowContent.vue?abf4","webpack:///platform/dsf/designer/flow/flowContent.vue","webpack:///./platform/dsf/designer/flow/flowContent.vue?f8e8","webpack:///./platform/dsf/designer/flow/flowContent.vue","webpack:///./platform/dsf/designer/flow/Lanes.vue?4c25","webpack:///platform/dsf/designer/flow/Lanes.vue","webpack:///./platform/dsf/designer/flow/Lanes.vue?6466","webpack:///./platform/dsf/designer/flow/Lanes.vue","webpack:///platform/dsf/designer/flow/flow.vue","webpack:///./platform/dsf/designer/flow/flow.vue?bee5","webpack:///./platform/dsf/designer/flow/flow.vue","webpack:///./platform/dsf/designer/flow/Lanes.vue?c993","webpack:///./platform/dsf/designer/flow/flowContent.vue?ad25"],"names":["$","createHTML","forcedStringHTMLMethod","target","proto","forced","sub","this","collection","collectionStrong","module","exports","init","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","doSave","_v","_m","class","selected","isDrawLine","drawLine","$event","addLane","disabled","scale","rootScale","_s","Math","round","exportFlow","saveAsFlow","openFlow","startTestFlow","monitorFlow","ref","onScroll","style","width","toPx","height","transform","transformOrigin","has_v_head","lanes","vertical","has_h_head","horizontal","baseLine","_e","flowInfo","lines","nodes","events","checked","config","model","value","callback","$$v","activeNames","expression","_l","tool","index","key","title","item","type","name","sort","dragTool","img","staticStyle","event","dragBoundaryEvent","url","staticRenderFns","Lane","opt","options","Object","assign","size","direction","LaneDirection","id","isRender","attributes","getAttributes","CorridorProperties","Name","ID","directives","rawName","status","itemIndex","attr","hide","isBase","slot","nativeOn","showHelp","showHeplerMark","$set","domProps","desc","nodeType","nodeName2","minValue","changeVesion","max","changeProperty","unit","show","editor","nodeName1","option","i","text","$index","doOpenDialog","components","DsfDesignerDialog","props","default","Array","data","curSelectObj","curNodeObj","curElement","AppInfo","computed","Number","oldValue","split","value0","watch","loadPropertyWindow","ui","mounted","$bus","$on","bool","methods","keys","obj","loadPropertyDom","setPropertyData","pro","Node","Type","language","group","groupIndex","json","rows","nodeLevel","nodeName","nodeName3","push","forEach","value1","value2","showRob","rowData","$emit","Line","Rule","RangeRule","taskMsg","field","code","content","params","isEvent","dsf","layer","pc","openDialog","overflow","btns","component","Lines","Events","subprocess","Boolean","val","created","initFlow","flow","lane","left","top","selectLane","hideEdit","composing","edit","dragLane","current","minSize","document","addEventListener","e","stopPropagation","dropLane","pageX","page","svgRoot","scrollLeft","pageY","scrollTop","showV","showH","$store","commit","moveLane","resize","minLeft","mouse","x","y","isEdit","window","FlowInfo","FlowContent","Lanes","dragNode","dragEvent","endTarget","maxWidth","maxHeight","xmlId","distance","cloneObj","crashNode","state","dragSize","maxSizeOffset","flowTools","boundaryEvents","showLineV","showLineH","isGlobalPosMove","globalPos","globalMoveLastMouse","globalRect","isGlobalSelect","selectGlobalPos","selectGlobalPonits","start","end","globalSelect","isCtrlKey","ctrlCopyNodes","isCopyNodes","copyNodesPos","copyNodes","reset","ds_page","clientWidth","clientHeight","initData","$http","initEvent","parentAutoScroll","autoScroll","dragCloneEvent","startGlobalMove","startCopyNodes","keydown","onresize","$refs","root","tagName","parentElement","className","indexOf","scrollwheel","preventDefault","copyNewNode","ev","dataTransfer","setDragImage","Image","cloneNode","setAttribute","offset","copy","copyNode","position","zIndex","padding","pointerEvents","cursor","body","appendChild","createCopyNodes","selectedList","node","point","getPoint","getDisplacement","move_p","last_p","nodesMove","displacement","ctrlKey","dragToolOver","getTargetIsNodes","contains","getBeforeCopyLine","lineIds","line","from","fromType","to","newLine","tools","fromNodeIds","toNodeIds","newLines","resetLineFromAndTo","nodeId","newNode","in","out","copyEventsLines","linkInfo","nodesMoveEnd","isMove","nodeMoveEnd","parentNodeId","deleteNode","mouseConvert","p","fromCopyId","BaseInfo","copyNodeNext","removeChild","copyNodeEvent","dragToolEnd","imgHeight","subNode","nodeResize","BoundaryEvent","offsetY","offsetX","dragEventOver","parentAndSub","points","getters","comp","parentNode","dragEventEnd","touches","splice","deleteEvent","addNewEvent","copyEvent","copyEvents","fromId","all","realDistance","min","getDistance","dis","computedPoint","getOptions","mp","addNode","addSubNode","children","showSubNode","readOnly","keyCode","setTimeout","deleteLine","l","find","remove","deleteFromOrOut","f_index","t_index","createLane","before","getFromNodes","arr","lineId","fn","getToNodes","loadElement","ElementList","NodeList","Nodes","isArray","LineList","EventList","dataMap","element","parseFloat","subNodes","newEvent","fromOffset","toOffset","path","isHide","WorkFlow","LaneList","nodeLines","map","paper","fromNodearr","copyMap","nc","toNodearr","temp","line_copy","StartNodeID","infoCopy","deleteLines","OutLine","SendConditions","rfn","IsEnabled","child","postData","arrowEnd","sData","JSON","stringify","getFlowAllObjectMap","dm","info","lastV","horizontalWidth","minWidth","lastH","verticalHeight","minHeight","maxHeigth","arg","abs","h","parent","setCursor","evt","segmen","sp","setRootCursor","getRect","globalMove","current_p","x_move","y_move","n","getWheelDirect","wheelDelta","detail","toFixed","selectGlobalMove","createElement","selectGlobalEnd","documentCopy","pasteNode"],"mappings":"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","file":"static/js/Flow.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flow.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flow.vue?vue&type=style&index=0&lang=scss&\"","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.sub` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.sub\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('sub') }, {\n  sub: function sub() {\n    return createHTML(this, 'sub', '', '');\n  }\n});\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flowInfo.vue?vue&type=style&index=0&id=6be2b74f&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flowInfo.vue?vue&type=style&index=0&id=6be2b74f&lang=scss&scoped=true&\"","'use strict';\nvar collection = require('../internals/collection');\nvar collectionStrong = require('../internals/collection-strong');\n\n// `Set` constructor\n// https://tc39.github.io/ecma262/#sec-set-objects\nmodule.exports = collection('Set', function (init) {\n  return function Set() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionStrong);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ds_workflow ds-designer\",attrs:{\"id\":\"desginer\"}},[_c('div',{staticClass:\"designer-head\"},[_c('div',{staticClass:\"desginer_tools\"},[_c('a',{staticClass:\"ds-button__icon-text\",on:{\"click\":_vm.doSave}},[_c('i',{staticClass:\"iconfont icon-baocun\"}),_c('span',[_vm._v(\"保存\")])]),_vm._m(0),_vm._m(1),_vm._m(2),_vm._m(3),_c('a',{staticClass:\"ds-button__icon-text\",class:{ selected: _vm.isDrawLine },on:{\"click\":_vm.drawLine}},[_c('i',{staticClass:\"iconfont icon-liujisuan\"}),_c('span',[_vm._v(\"连线\")])]),_c('a',{staticClass:\"ds-button__icon-text\"},[_c('i',{staticClass:\"iconfont icon-iframetianjia\"}),_vm._m(4),_c('dl',{staticClass:\"layui-nav-child\"},[_c('dd',{on:{\"click\":function($event){return _vm.addLane('vertical')}}},[_c('span',[_vm._v(\"泳道(垂直)\")])]),_c('dd',{on:{\"click\":function($event){return _vm.addLane('horizontal')}}},[_c('span',[_vm._v(\"泳道(水平)\")])])])]),_c('a',{staticClass:\"ds-button__icon-text scale\"},[_c('div',{staticClass:\"scale-com\"},[_c('i',{staticClass:\"el-icon-minus\",class:{ disabled: _vm.scale <= 0.4 },on:{\"click\":function($event){return _vm.rootScale('down')}}}),_c('span',{staticClass:\"percent\"},[_vm._v(_vm._s(Math.round(_vm.scale * 100))+\"%\")]),_c('i',{staticClass:\"el-icon-plus\",class:{ disabled: _vm.scale >= 2 },on:{\"click\":function($event){return _vm.rootScale('up')}}})]),_c('span',[_vm._v(\"缩放\")])]),_c('a',{staticClass:\"ds-button__icon-text\"},[_c('i',{staticClass:\"iconfont icon-dakai\"}),_vm._m(5),_c('dl',{staticClass:\"layui-nav-child\"},[_c('p',{on:{\"click\":function($event){return _vm.exportFlow()}}},[_c('span',[_vm._v(\"创建组\")])]),_c('p',{staticClass:\"label\",on:{\"click\":function($event){return _vm.saveAsFlow()}}},[_c('span',[_vm._v(\"保存为组件\")])]),_c('p',{on:{\"click\":function($event){return _vm.openFlow()}}},[_c('span',[_vm._v(\"选择组\")])])])]),_c('a',{staticClass:\"ds-button__icon-text\"},[_c('i',{staticClass:\"iconfont icon-lianjieliu\"}),_vm._m(6),_c('dl',{staticClass:\"layui-nav-child\"},[_c('p',{on:{\"click\":function($event){return _vm.exportFlow()}}},[_c('span',[_vm._v(\"导出\")])]),_c('p',{staticClass:\"child\"},[_vm._v(\"DFR\")]),_c('p',{staticClass:\"child\"},[_vm._v(\"BPMN2.0\")]),_c('p',{staticClass:\"child\"},[_vm._v(\"XML\")]),_c('p',{staticClass:\"label child\"},[_vm._v(\"JSON\")]),_c('p',{on:{\"click\":function($event){return _vm.openFlow()}}},[_c('span',[_vm._v(\"导入\")])]),_c('p',{staticClass:\"child\"},[_vm._v(\"DFR\")]),_c('p',{staticClass:\"child\"},[_vm._v(\"BPMN2.0\")]),_c('p',{staticClass:\"child\"},[_vm._v(\"XML\")]),_c('p',{staticClass:\"label child\"},[_vm._v(\"JSON\")]),_c('p',{staticClass:\"label\",on:{\"click\":function($event){return _vm.startTestFlow()}}},[_c('span',[_vm._v(\"仿真测试\")])]),_c('p',{on:{\"click\":function($event){return _vm.monitorFlow()}}},[_c('span',[_vm._v(\"浏览监控\")])])])])])]),_c('div',{staticClass:\"designer-content\"},[_c('div',{staticClass:\"designer-center\"},[_c('div',{ref:\"ds_page\",staticClass:\"ds_control ds_page layui-form leftRight_ design\",on:{\"scroll\":function($event){return _vm.onScroll($event)}}},[_c('div',{ref:\"container\",staticClass:\"flow\",style:({\n            width: _vm.toPx(_vm.scale > 1 ? _vm.width * _vm.scale : _vm.width / _vm.scale),\n            height: _vm.toPx(_vm.scale > 1 ? _vm.height * _vm.scale : _vm.height / _vm.scale),\n            transform: (\"scale(\" + _vm.scale + \") translateZ(0)\"),\n            transformOrigin: 'left top',\n          }),attrs:{\"id\":\"flow_box\"}},[_c('div',{ref:\"root\",staticClass:\"root\",class:{\n              has_v_head: _vm.lanes && _vm.lanes.vertical.length > 0,\n              has_h_head: _vm.lanes && _vm.lanes.horizontal.length > 0,\n            },style:({\n              width: _vm.toPx(_vm.scale > 1 ? _vm.width * _vm.scale : _vm.width / _vm.scale),\n              height: _vm.toPx(_vm.scale > 1 ? _vm.height * _vm.scale : _vm.height / _vm.scale),\n            })},[(_vm.baseLine.showV)?_c('span',{staticClass:\"baseLine_v\",style:({ transform: (\"translate3d(\" + (_vm.baseLine.left) + \"px, 0, 0)\") })}):_vm._e(),(_vm.baseLine.showH)?_c('span',{staticClass:\"baseLine_h\",style:({ transform: (\"translate3d(0, \" + (_vm.baseLine.top) + \"px, 0)\") })}):_vm._e(),_c('flow-content',{ref:\"flowContent\",attrs:{\"flow-info\":_vm.flowInfo,\"is-draw-line\":_vm.isDrawLine,\"lines\":_vm.lines,\"nodes\":_vm.nodes,\"lanes\":_vm.lanes,\"events\":_vm.events,\"checked\":_vm.checked,\"config\":_vm.config}}),_c('div',{ref:\"backLayout\",staticClass:\"backgroundLayout\"},[_c('div',{ref:\"v_lane\",staticClass:\"v_lane\"},[_c('lanes',{attrs:{\"lanes\":_vm.lanes && _vm.lanes.vertical,\"checked\":_vm.checked},on:{\"addLane\":_vm.addLane}})],1),_c('div',{ref:\"h_lane\",staticClass:\"h_lane\"},[_c('lanes',{attrs:{\"lanes\":_vm.lanes && _vm.lanes.horizontal,\"checked\":_vm.checked},on:{\"addLane\":_vm.addLane}})],1)])],1)])])]),_c('div',{staticClass:\"designer-left\"},[_c('div',{staticClass:\"designer-left-tools\"},[_c('el-collapse',{attrs:{\"accordion\":\"\"},model:{value:(_vm.activeNames),callback:function ($$v) {_vm.activeNames=$$v},expression:\"activeNames\"}},[_vm._l((_vm.flowTools),function(tool,index){return _c('el-collapse-item',{key:index,attrs:{\"title\":tool.title,\"name\":index}},[_c('div',{staticClass:\"layui-colla-content layui-show\"},[_vm._l((tool.data),function(item){return _c('div',{key:item.type,staticClass:\"ds_tool_item nodeButton\",attrs:{\"title\":item.name,\"sort\":item.sort,\"nodetype\":item.type,\"draggable\":\"true\"},on:{\"dragstart\":function($event){return _vm.dragTool($event, item)}}},[_c('img',{attrs:{\"src\":item.img,\"draggable\":\"false\"}}),_vm._v(\" \"+_vm._s(item.name)+\" \")])}),_c('div',{staticStyle:{\"clear\":\"both\"}})],2)])}),_c('el-collapse-item',{attrs:{\"title\":\"边界事件\",\"name\":\"5\"}},[_c('div',{staticClass:\"layui-colla-content layui-show\"},_vm._l((_vm.boundaryEvents),function(event){return _c('div',{key:event.type,staticClass:\"nodeButton ds_tool_event\",attrs:{\"title\":event.name,\"nodetype\":event.type}},[_c('div',{staticClass:\"tool_event_drag\",attrs:{\"draggable\":\"true\"},on:{\"dragstart\":function($event){return _vm.dragBoundaryEvent($event, event)}}},[_c('img',{attrs:{\"src\":event.url,\"draggable\":\"false\"}})]),_c('span',[_vm._v(_vm._s(event.name))])])}),0)])],2)],1)]),_c('div',{staticClass:\"designer-right\",attrs:{\"id\":\"propertyBox\"}},[_c('flow-info',{attrs:{\"checked\":_vm.checked,\"nodes\":_vm.nodes,\"lines\":_vm.lines,\"flow-info\":_vm.flowInfo}})],1)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"ds-button__icon-text\"},[_c('i',{staticClass:\"iconfont icon-baocun\"}),_c('span',[_vm._v(\"发布\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"ds-button__icon-text\"},[_c('i',{staticClass:\"iconfont icon-iframetianjia\"}),_c('span',[_vm._v(\" 版本 \"),_c('i',{staticClass:\"iconfont icon-xia1\"})]),_c('dl',{staticClass:\"layui-nav-child\"},[_c('p',{staticClass:\"label\"},[_c('span',[_vm._v(\"当前版本\")])]),_c('p',[_c('span',[_vm._v(\"2.0.11 2020-4-10 16：20： 10\")])]),_c('p',{staticClass:\"label\"},[_c('span',[_vm._v(\"历史版本\")])]),_c('p',[_c('span',[_vm._v(\"2.0.11 2020-4-10 16：20： 10\")])]),_c('p',[_c('span',[_vm._v(\"2.0.11 2020-4-10 16：20： 10\")])]),_c('p',[_c('span',[_vm._v(\"2.0.11 2020-4-10 16：20： 10\")])]),_c('p',[_c('span',[_vm._v(\"2.0.11 2020-4-10 16：20： 10\")])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"ds-button__icon-text\"},[_c('i',{staticClass:\"iconfont icon-shebeikaifa1\"}),_c('span',[_vm._v(\"模板库\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"ds-button__icon-text\"},[_c('i',{staticClass:\"iconfont icon-baocun\"}),_c('span',[_vm._v(\"关闭\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_vm._v(\" 泳道 \"),_c('i',{staticClass:\"iconfont icon-xia1\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_vm._v(\" 组件 \"),_c('i',{staticClass:\"iconfont icon-xia1\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_vm._v(\" 更多 \"),_c('i',{staticClass:\"iconfont icon-xia1\"})])}]\n\nexport { render, staticRenderFns }","import { LaneDirection } from './tools';\r\n\r\nimport { getAttributes } from \"./common\";\r\nimport {\r\n  CorridorProperties,\r\n} from \"./propertySource\";\r\n\r\n//泳道类\r\nconst Lane = function (opt) {\r\n  var options = Object.assign({ size: 260, direction: LaneDirection.vertical }, opt);\r\n  this.id = options.id || null;\r\n  this.name = options.name || \"\";\r\n  this.index = options.index;\r\n  this.direction = options.direction;\r\n  this.isRender = false;\r\n  this.size = options.size;\r\n\r\n  if (!options.attributes) {\r\n    this.attributes = getAttributes(CorridorProperties());\r\n    this.attributes.Name = this.name;\r\n    this.attributes.ID = this.id;\r\n  } else {\r\n    this.attributes = { ...options.attributes };\r\n  }\r\n}\r\nexport default Lane;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ds_attr_root\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.status === 'base'),expression:\"status === 'base'\"}],staticClass:\"base\"},[_c('p',{staticClass:\"title\"},[_c('span',[_vm._v(\"常用\")]),_c('el-button',{staticClass:\"el-button-all\",attrs:{\"size\":\"mini\",\"round\":\"\"},on:{\"click\":function($event){_vm.status = 'advanced'}}},[_c('span',[_vm._v(\"全部\")]),_c('i',{staticClass:\"el-icon-arrow-right\"})])],1),_c('div',{staticClass:\"el-collapse-item__content\"},_vm._l((_vm.data),function(item,itemIndex){return _c('el-form',{key:itemIndex,staticClass:\"colla-content\",attrs:{\"label-position\":\"top\",\"label-width\":\"80px\"}},_vm._l((item.attributes),function(attr,index){return _c('div',{key:index,staticClass:\"property-item\"},[(!attr.hide && attr.isBase)?_c('el-form-item',[_c('span',{staticClass:\"property-item-name\",attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\" \"+_vm._s(attr.name)+\" \"),(attr.desc)?_c('DsfIcon',{staticStyle:{\"margin-left\":\"5px\",\"cursor\":\"pointer\"},attrs:{\"name\":\"bangzhuzhongxin\"},nativeOn:{\"click\":function($event){return _vm.showHelp(attr)}}}):_vm._e(),_c('el-dialog',{attrs:{\"visible\":attr.showHeplerMark,\"title\":attr.name,\"append-to-body\":true,\"width\":'500px'},on:{\"update:visible\":function($event){return _vm.$set(attr, \"showHeplerMark\", $event)}}},[_c('div',{staticStyle:{\"max-height\":\"500px\",\"min-height\":\"300px\",\"overflow\":\"auto\"}},[_c('span',{staticStyle:{\"display\":\"inline-block\",\"line-height\":\"1.5em\"},domProps:{\"innerHTML\":_vm._s(attr.desc)}})])])],1),(attr.nodeType === 'flow' && attr.nodeName2 === 'Version')?_c('div',{staticClass:\"inline\"},[_c('el-input-number',{attrs:{\"controls-position\":\"right\",\"min\":_vm.minValue(attr, 0)},on:{\"input\":function($event){return _vm.changeVesion(attr, 0)}},model:{value:(attr.value0),callback:function ($$v) {_vm.$set(attr, \"value0\", $$v)},expression:\"attr.value0\"}}),_c('span',[_vm._v(\".\")]),_c('el-input-number',{attrs:{\"controls-position\":\"right\",\"min\":_vm.minValue(attr, 1)},on:{\"input\":function($event){return _vm.changeVesion(attr, 1)}},model:{value:(attr.value1),callback:function ($$v) {_vm.$set(attr, \"value1\", $$v)},expression:\"attr.value1\"}}),_c('span',[_vm._v(\".\")]),_c('el-input',{attrs:{\"disabled\":\"disabled\"},model:{value:(attr.value2),callback:function ($$v) {_vm.$set(attr, \"value2\", $$v)},expression:\"attr.value2\"}})],1):_vm._e(),(attr.unit)?_c('div',{staticClass:\"inline\"},[_c('el-input-number',{attrs:{\"controls-position\":\"right\",\"min\":1,\"max\":attr.max},on:{\"input\":function($event){return _vm.changeProperty(attr)}},model:{value:(attr.value),callback:function ($$v) {_vm.$set(attr, \"value\", $$v)},expression:\"attr.value\"}}),_c('span',{staticClass:\"unit\"},[_vm._v(_vm._s(attr.unit))])],1):_vm._e(),(_vm.show(attr))?_c('el-input',{attrs:{\"disabled\":!attr.editor},on:{\"input\":function($event){return _vm.changeProperty(attr)}},model:{value:(attr.value),callback:function ($$v) {_vm.$set(attr, \"value\", $$v)},expression:\"attr.value\"}}):_vm._e(),(attr.editor === 'textarea')?_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"请输入内容\"},on:{\"input\":function($event){return _vm.changeProperty(attr)}},model:{value:(attr.value),callback:function ($$v) {_vm.$set(attr, \"value\", $$v)},expression:\"attr.value\"}}):_vm._e(),(attr.editor && attr.editor.type === 'combobox')?_c('el-select',{attrs:{\"name\":(\"\" + (attr.nodeName1 + '_' + attr.nodeName2))},on:{\"change\":function($event){return _vm.changeProperty(attr)}},model:{value:(attr.value),callback:function ($$v) {_vm.$set(attr, \"value\", $$v)},expression:\"attr.value\"}},_vm._l((attr.editor.options.data),function(option,i){return _c('el-option',{key:i,attrs:{\"label\":option.text,\"value\":option.value}})}),1):_vm._e(),(attr.editor && attr.editor.type === 'radio')?_c('el-radio-group',{on:{\"change\":function($event){return _vm.changeProperty(attr)}},model:{value:(attr.value),callback:function ($$v) {_vm.$set(attr, \"value\", $$v)},expression:\"attr.value\"}},_vm._l((attr.editor.options.data),function(option,$index){return _c('el-radio',{key:$index,attrs:{\"label\":option.value}},[_vm._v(\" \"+_vm._s(option.text)+\" \")])}),1):_vm._e(),(attr.editor && attr.editor.type === 'checkbox')?_c('el-checkbox-group',{on:{\"change\":function($event){return _vm.changeProperty(attr)}},model:{value:(attr.value),callback:function ($$v) {_vm.$set(attr, \"value\", $$v)},expression:\"attr.value\"}},_vm._l((attr.editor.options.data),function(option,$index){return _c('el-checkbox',{key:$index,attrs:{\"label\":option.value}},[_vm._v(\" \"+_vm._s(option.text)+\" \")])}),1):_vm._e(),(attr.type === 'dialog')?_c('DsfButton',{class:attr.class,attrs:{\"type\":\"auxiliary\",\"icon\":\"shezhi\"},on:{\"click\":function($event){return _vm.doOpenDialog(attr)}}},[_vm._v(\" 设置 \")]):_vm._e()],1):_vm._e()],1)}),0)}),1)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.status === 'advanced'),expression:\"status === 'advanced'\"}],staticClass:\"advanced\"},[_c('p',{staticClass:\"title\"},[_c('span',[_vm._v(\"全部\")]),_c('el-button',{staticClass:\"el-button-base\",attrs:{\"size\":\"mini\",\"round\":\"\"},on:{\"click\":function($event){_vm.status = 'base'}}},[_c('i',{staticClass:\"el-icon-arrow-left\"}),_c('span',[_vm._v(\"常用\")])])],1),_c('el-collapse',{attrs:{\"accordion\":\"\"},model:{value:(_vm.activeNames),callback:function ($$v) {_vm.activeNames=$$v},expression:\"activeNames\"}},_vm._l((_vm.data),function(item){return _c('el-collapse-item',{key:item.name,attrs:{\"title\":item.name,\"name\":item.name}},[_c('el-form',{staticClass:\"colla-content\",attrs:{\"label-position\":\"top\",\"label-width\":\"80px\"}},_vm._l((item.attributes),function(attr,index){return _c('div',{key:index,staticClass:\"property-item\"},[(!attr.hide)?_c('el-form-item',[_c('span',{staticClass:\"property-item-name\",attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\" \"+_vm._s(attr.name)+\" \"),(attr.desc)?_c('DsfIcon',{staticStyle:{\"margin-left\":\"5px\",\"cursor\":\"pointer\"},attrs:{\"name\":\"bangzhuzhongxin\"},nativeOn:{\"click\":function($event){return _vm.showHelp(attr)}}}):_vm._e(),_c('el-dialog',{attrs:{\"visible\":attr.showHeplerMark,\"title\":attr.name,\"append-to-body\":true,\"width\":'500px'},on:{\"update:visible\":function($event){return _vm.$set(attr, \"showHeplerMark\", $event)}}},[_c('div',{staticStyle:{\"max-height\":\"500px\",\"min-height\":\"300px\",\"overflow\":\"auto\"}},[_c('span',{staticStyle:{\"display\":\"inline-block\",\"line-height\":\"1.5em\"},domProps:{\"innerHTML\":_vm._s(attr.desc)}})])])],1),(attr.nodeType === 'flow' && attr.nodeName2 === 'Version')?_c('div',{staticClass:\"inline\"},[_c('el-input-number',{attrs:{\"controls-position\":\"right\",\"min\":_vm.minValue(attr, 0)},on:{\"input\":function($event){return _vm.changeVesion(attr, 0)}},model:{value:(attr.value0),callback:function ($$v) {_vm.$set(attr, \"value0\", $$v)},expression:\"attr.value0\"}}),_c('span',[_vm._v(\".\")]),_c('el-input-number',{attrs:{\"controls-position\":\"right\",\"min\":_vm.minValue(attr, 1)},on:{\"input\":function($event){return _vm.changeVesion(attr, 1)}},model:{value:(attr.value1),callback:function ($$v) {_vm.$set(attr, \"value1\", $$v)},expression:\"attr.value1\"}}),_c('span',[_vm._v(\".\")]),_c('el-input',{attrs:{\"disabled\":\"disabled\"},model:{value:(attr.value2),callback:function ($$v) {_vm.$set(attr, \"value2\", $$v)},expression:\"attr.value2\"}})],1):_vm._e(),(attr.unit)?_c('div',{staticClass:\"inline\"},[_c('el-input-number',{attrs:{\"controls-position\":\"right\",\"min\":1,\"max\":attr.max},on:{\"input\":function($event){return _vm.changeProperty(attr)}},model:{value:(attr.value),callback:function ($$v) {_vm.$set(attr, \"value\", $$v)},expression:\"attr.value\"}}),_c('span',{staticClass:\"unit\"},[_vm._v(_vm._s(attr.unit))])],1):_vm._e(),(_vm.show(attr))?_c('el-input',{attrs:{\"disabled\":!attr.editor},on:{\"input\":function($event){return _vm.changeProperty(attr)}},model:{value:(attr.value),callback:function ($$v) {_vm.$set(attr, \"value\", $$v)},expression:\"attr.value\"}}):_vm._e(),(attr.editor === 'textarea')?_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"请输入内容\"},on:{\"input\":function($event){return _vm.changeProperty(attr)}},model:{value:(attr.value),callback:function ($$v) {_vm.$set(attr, \"value\", $$v)},expression:\"attr.value\"}}):_vm._e(),(attr.editor && attr.editor.type === 'combobox')?_c('el-select',{attrs:{\"name\":(\"\" + (attr.nodeName1 + '_' + attr.nodeName2))},on:{\"change\":function($event){return _vm.changeProperty(attr)}},model:{value:(attr.value),callback:function ($$v) {_vm.$set(attr, \"value\", $$v)},expression:\"attr.value\"}},_vm._l((attr.editor.options.data),function(option,i){return _c('el-option',{key:i,attrs:{\"label\":option.text,\"value\":option.value}})}),1):_vm._e(),(attr.editor && attr.editor.type === 'radio')?_c('el-radio-group',{on:{\"change\":function($event){return _vm.changeProperty(attr)}},model:{value:(attr.value),callback:function ($$v) {_vm.$set(attr, \"value\", $$v)},expression:\"attr.value\"}},_vm._l((attr.editor.options.data),function(option,$index){return _c('el-radio',{key:$index,attrs:{\"label\":option.value}},[_vm._v(\" \"+_vm._s(option.text)+\" \")])}),1):_vm._e(),(attr.editor && attr.editor.type === 'checkbox')?_c('el-checkbox-group',{on:{\"change\":function($event){return _vm.changeProperty(attr)}},model:{value:(attr.value),callback:function ($$v) {_vm.$set(attr, \"value\", $$v)},expression:\"attr.value\"}},_vm._l((attr.editor.options.data),function(option,$index){return _c('el-checkbox',{key:$index,attrs:{\"label\":option.value}},[_vm._v(\" \"+_vm._s(option.text)+\" \")])}),1):_vm._e(),(attr.type === 'dialog')?_c('DsfButton',{class:attr.class,attrs:{\"type\":\"auxiliary\",\"icon\":\"shezhi\"},on:{\"click\":function($event){return _vm.doOpenDialog(attr)}}},[_vm._v(\" 设置 \")]):_vm._e()],1):_vm._e()],1)}),0)],1)}),1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"ds_attr_root\">\r\n    <div v-show=\"status === 'base'\" class=\"base\">\r\n      <p class=\"title\">\r\n        <span>常用</span>\r\n        <el-button class=\"el-button-all\" size=\"mini\" round @click=\"status = 'advanced'\">\r\n          <span>全部</span>\r\n          <i class=\"el-icon-arrow-right\"></i>\r\n        </el-button>\r\n      </p>\r\n      <div class=\"el-collapse-item__content\">\r\n        <el-form\r\n          v-for=\"(item, itemIndex) in data\"\r\n          :key=\"itemIndex\"\r\n          class=\"colla-content\"\r\n          label-position=\"top\"\r\n          label-width=\"80px\"\r\n        >\r\n          <div v-for=\"(attr, index) in item.attributes\" :key=\"index\" class=\"property-item\">\r\n            <el-form-item v-if=\"!attr.hide && attr.isBase\">\r\n              <span slot=\"label\" class=\"property-item-name\">\r\n                {{ attr.name }}\r\n                <DsfIcon\r\n                  v-if=\"attr.desc\"\r\n                  style=\"margin-left: 5px; cursor: pointer;\"\r\n                  name=\"bangzhuzhongxin\"\r\n                  @click.native=\"showHelp(attr)\"\r\n                ></DsfIcon>\r\n                <el-dialog\r\n                  :visible.sync=\"attr.showHeplerMark\"\r\n                  :title=\"attr.name\"\r\n                  :append-to-body=\"true\"\r\n                  :width=\"'500px'\"\r\n                >\r\n                  <div style=\"max-height: 500px; min-height: 300px; overflow: auto;\">\r\n                    <span style=\"display: inline-block; line-height: 1.5em;\" v-html=\"attr.desc\"></span>\r\n                  </div>\r\n                </el-dialog>\r\n              </span>\r\n              <div v-if=\"attr.nodeType === 'flow' && attr.nodeName2 === 'Version'\" class=\"inline\">\r\n                <el-input-number\r\n                  v-model=\"attr.value0\"\r\n                  controls-position=\"right\"\r\n                  :min=\"minValue(attr, 0)\"\r\n                  @input=\"changeVesion(attr, 0)\"\r\n                ></el-input-number>\r\n                <span>.</span>\r\n                <el-input-number\r\n                  v-model=\"attr.value1\"\r\n                  controls-position=\"right\"\r\n                  :min=\"minValue(attr, 1)\"\r\n                  @input=\"changeVesion(attr, 1)\"\r\n                ></el-input-number>\r\n                <span>.</span>\r\n                <el-input v-model=\"attr.value2\" disabled=\"disabled\"></el-input>\r\n              </div>\r\n              <div v-if=\"attr.unit\" class=\"inline\">\r\n                <el-input-number\r\n                  v-model=\"attr.value\"\r\n                  controls-position=\"right\"\r\n                  :min=\"1\"\r\n                  :max=\"attr.max\"\r\n                  @input=\"changeProperty(attr)\"\r\n                ></el-input-number>\r\n                <span class=\"unit\">{{ attr.unit }}</span>\r\n              </div>\r\n              <el-input\r\n                v-if=\"show(attr)\"\r\n                v-model=\"attr.value\"\r\n                :disabled=\"!attr.editor\"\r\n                @input=\"changeProperty(attr)\"\r\n              ></el-input>\r\n              <el-input\r\n                v-if=\"attr.editor === 'textarea'\"\r\n                v-model=\"attr.value\"\r\n                type=\"textarea\"\r\n                placeholder=\"请输入内容\"\r\n                @input=\"changeProperty(attr)\"\r\n              ></el-input>\r\n              <el-select\r\n                v-if=\"attr.editor && attr.editor.type === 'combobox'\"\r\n                v-model=\"attr.value\"\r\n                :name=\"`${attr.nodeName1 + '_' + attr.nodeName2}`\"\r\n                @change=\"changeProperty(attr)\"\r\n              >\r\n                <el-option\r\n                  v-for=\"(option, i) in attr.editor.options.data\"\r\n                  :key=\"i\"\r\n                  :label=\"option.text\"\r\n                  :value=\"option.value\"\r\n                ></el-option>\r\n              </el-select>\r\n              <!--单选-->\r\n              <el-radio-group\r\n                v-if=\"attr.editor && attr.editor.type === 'radio'\"\r\n                v-model=\"attr.value\"\r\n                @change=\"changeProperty(attr)\"\r\n              >\r\n                <el-radio v-for=\"(option, $index) in attr.editor.options.data\" :key=\"$index\" :label=\"option.value\">\r\n                  {{ option.text }}\r\n                </el-radio>\r\n              </el-radio-group>\r\n              <!--多选-->\r\n              <el-checkbox-group\r\n                v-if=\"attr.editor && attr.editor.type === 'checkbox'\"\r\n                v-model=\"attr.value\"\r\n                @change=\"changeProperty(attr)\"\r\n              >\r\n                <el-checkbox v-for=\"(option, $index) in attr.editor.options.data\" :key=\"$index\" :label=\"option.value\">\r\n                  {{ option.text }}\r\n                </el-checkbox>\r\n              </el-checkbox-group>\r\n              <!--弹出框-->\r\n              <DsfButton\r\n                v-if=\"attr.type === 'dialog'\"\r\n                type=\"auxiliary\"\r\n                icon=\"shezhi\"\r\n                :class=\"attr.class\"\r\n                @click=\"doOpenDialog(attr)\"\r\n              >\r\n                设置\r\n              </DsfButton>\r\n            </el-form-item>\r\n          </div>\r\n        </el-form>\r\n      </div>\r\n    </div>\r\n    <div v-show=\"status === 'advanced'\" class=\"advanced\">\r\n      <p class=\"title\">\r\n        <span>全部</span>\r\n        <el-button class=\"el-button-base\" size=\"mini\" round @click=\"status = 'base'\">\r\n          <i class=\"el-icon-arrow-left\"></i>\r\n          <span>常用</span>\r\n        </el-button>\r\n      </p>\r\n      <el-collapse v-model=\"activeNames\" accordion>\r\n        <el-collapse-item v-for=\"item in data\" :key=\"item.name\" :title=\"item.name\" :name=\"item.name\">\r\n          <el-form label-position=\"top\" label-width=\"80px\" class=\"colla-content\">\r\n            <div v-for=\"(attr, index) in item.attributes\" :key=\"index\" class=\"property-item\">\r\n              <el-form-item v-if=\"!attr.hide\">\r\n                <span slot=\"label\" class=\"property-item-name\">\r\n                  {{ attr.name }}\r\n                  <!-- <el-popover placement=\"bottom\" width=\"210\" trigger=\"click\" :content=\"attr.desc\">\r\n                    <i slot=\"reference\" class=\"el-icon-question\"></i>\r\n                  </el-popover>-->\r\n                  <DsfIcon\r\n                    v-if=\"attr.desc\"\r\n                    style=\"margin-left: 5px; cursor: pointer;\"\r\n                    name=\"bangzhuzhongxin\"\r\n                    @click.native=\"showHelp(attr)\"\r\n                  ></DsfIcon>\r\n                  <el-dialog\r\n                    :visible.sync=\"attr.showHeplerMark\"\r\n                    :title=\"attr.name\"\r\n                    :append-to-body=\"true\"\r\n                    :width=\"'500px'\"\r\n                  >\r\n                    <div style=\"max-height: 500px; min-height: 300px; overflow: auto;\">\r\n                      <span style=\"display: inline-block; line-height: 1.5em;\" v-html=\"attr.desc\"></span>\r\n                    </div>\r\n                  </el-dialog>\r\n                </span>\r\n                <div v-if=\"attr.nodeType === 'flow' && attr.nodeName2 === 'Version'\" class=\"inline\">\r\n                  <el-input-number\r\n                    v-model=\"attr.value0\"\r\n                    controls-position=\"right\"\r\n                    :min=\"minValue(attr, 0)\"\r\n                    @input=\"changeVesion(attr, 0)\"\r\n                  ></el-input-number>\r\n                  <span>.</span>\r\n                  <el-input-number\r\n                    v-model=\"attr.value1\"\r\n                    controls-position=\"right\"\r\n                    :min=\"minValue(attr, 1)\"\r\n                    @input=\"changeVesion(attr, 1)\"\r\n                  ></el-input-number>\r\n                  <span>.</span>\r\n                  <el-input v-model=\"attr.value2\" disabled=\"disabled\"></el-input>\r\n                </div>\r\n                <div v-if=\"attr.unit\" class=\"inline\">\r\n                  <el-input-number\r\n                    v-model=\"attr.value\"\r\n                    controls-position=\"right\"\r\n                    :min=\"1\"\r\n                    :max=\"attr.max\"\r\n                    @input=\"changeProperty(attr)\"\r\n                  ></el-input-number>\r\n                  <span class=\"unit\">{{ attr.unit }}</span>\r\n                </div>\r\n                <el-input\r\n                  v-if=\"show(attr)\"\r\n                  v-model=\"attr.value\"\r\n                  :disabled=\"!attr.editor\"\r\n                  @input=\"changeProperty(attr)\"\r\n                ></el-input>\r\n                <el-input\r\n                  v-if=\"attr.editor === 'textarea'\"\r\n                  v-model=\"attr.value\"\r\n                  type=\"textarea\"\r\n                  placeholder=\"请输入内容\"\r\n                  @input=\"changeProperty(attr)\"\r\n                ></el-input>\r\n                <el-select\r\n                  v-if=\"attr.editor && attr.editor.type === 'combobox'\"\r\n                  v-model=\"attr.value\"\r\n                  :name=\"`${attr.nodeName1 + '_' + attr.nodeName2}`\"\r\n                  @change=\"changeProperty(attr)\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"(option, i) in attr.editor.options.data\"\r\n                    :key=\"i\"\r\n                    :label=\"option.text\"\r\n                    :value=\"option.value\"\r\n                  ></el-option>\r\n                </el-select>\r\n                <!--单选-->\r\n                <el-radio-group\r\n                  v-if=\"attr.editor && attr.editor.type === 'radio'\"\r\n                  v-model=\"attr.value\"\r\n                  @change=\"changeProperty(attr)\"\r\n                >\r\n                  <el-radio v-for=\"(option, $index) in attr.editor.options.data\" :key=\"$index\" :label=\"option.value\">\r\n                    {{ option.text }}\r\n                  </el-radio>\r\n                </el-radio-group>\r\n                <!--多选-->\r\n                <el-checkbox-group\r\n                  v-if=\"attr.editor && attr.editor.type === 'checkbox'\"\r\n                  v-model=\"attr.value\"\r\n                  @change=\"changeProperty(attr)\"\r\n                >\r\n                  <el-checkbox v-for=\"(option, $index) in attr.editor.options.data\" :key=\"$index\" :label=\"option.value\">\r\n                    {{ option.text }}\r\n                  </el-checkbox>\r\n                </el-checkbox-group>\r\n                <!--弹出框-->\r\n                <DsfButton\r\n                  v-if=\"attr.type === 'dialog'\"\r\n                  type=\"auxiliary\"\r\n                  icon=\"shezhi\"\r\n                  :class=\"attr.class\"\r\n                  @click=\"doOpenDialog(attr)\"\r\n                >\r\n                  设置\r\n                </DsfButton>\r\n              </el-form-item>\r\n            </div>\r\n          </el-form>\r\n        </el-collapse-item>\r\n      </el-collapse>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { MessageBox, Message } from \"element-ui\";\r\nimport {\r\n  BaseInfoProperties,\r\n  NodeProperties,\r\n  UserTaskNodeProperties,\r\n  ChildTaskProperties,\r\n  StartNodeProperties,\r\n  endNodeProperties,\r\n  ScriptNodeProperties,\r\n  JumpNodeProperties,\r\n  LineProperties,\r\n  WebTaskProperties,\r\n  MessageTaskProperties,\r\n  JudgementNodeProperties,\r\n  CorridorProperties,\r\n  BoundaryEventProperties,\r\n  GetInlineTypeData,\r\n  GetIsSelected,\r\n} from \"./propertySource\";\r\nimport Line from \"./Line\";\r\nimport Lane from \"./Lane\";\r\nimport Node from \"./Node\";\r\nimport BoundaryEvent from \"./BoundaryEvent\";\r\nimport { deepClone } from \"./common\";\r\nimport DsfDesignerDialog from \"_platform/dsf/designer/propertyEditor/dsfDesignerDialog\";\r\n\r\nexport default {\r\n  name: \"FlowInfo\",\r\n  components: {\r\n    DsfDesignerDialog,\r\n  },\r\n  props: {\r\n    checked: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    },\r\n    flowInfo: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    },\r\n    nodes: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    lines: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      activeNames: [\"1\"],\r\n      curSelectObj: null,\r\n      curNodeObj: null,\r\n      curElement: null,\r\n      AppInfo: null,\r\n      data: [],\r\n      status: \"base\",\r\n      showHeplerMark: false,\r\n    };\r\n  },\r\n  computed: {\r\n    minValue() {\r\n      return (attr, index) => {\r\n        if (index === 0) {\r\n          return Number(attr.oldValue.split(\".\")[0]);\r\n        }\r\n        if (attr.value0 > Number(attr.oldValue.split(\".\")[0]) && index === 1) {\r\n          return 0;\r\n        }\r\n        return Number(attr.oldValue.split(\".\")[1]);\r\n      };\r\n    },\r\n  },\r\n  watch: {\r\n    checked(ui) {\r\n      this.loadPropertyWindow(ui);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.$bus.$on(\"updateNodeName\", (ui, bool) => {\r\n      if (!bool) {\r\n        this.loadPropertyWindow(ui);\r\n      }\r\n    });\r\n  },\r\n  methods: {\r\n    show(attr) {\r\n      return (\r\n        (!attr.nodeType && attr.nodeName2 !== \"Version\" && !attr.editor && attr.type !== \"dialog\") ||\r\n        (!attr.unit && attr.editor === \"text\") ||\r\n        attr.editor === \"numberbox\"\r\n      );\r\n    },\r\n    loadPropertyWindow(obj) {\r\n      if (Object.keys(obj).length === 0) {\r\n        return;\r\n      }\r\n      this.curSelectObj = obj || null;\r\n      this.curNodeObj = !obj ? null : obj.attributes;\r\n      this.loadPropertyDom(obj ? this.setPropertyData(obj) : []);\r\n    },\r\n    showHelp(attr) {\r\n      this.$set(attr, \"showHeplerMark\", true);\r\n    },\r\n    setPropertyData(obj) {\r\n      var pro = null;\r\n      if (obj instanceof Node) {\r\n        if (obj.type == \"101\") {\r\n          pro = UserTaskNodeProperties();\r\n        } else if (obj.type == \"102\") {\r\n          pro = ChildTaskProperties();\r\n        } else if (obj.type == \"103\") {\r\n          const config = {\r\n            name: \"脚本任务\",\r\n            Type: \"脚本任务\",\r\n            language: \"java\",\r\n          };\r\n          pro = ScriptNodeProperties(config);\r\n        } else if (obj.type === \"104\") {\r\n          pro = WebTaskProperties();\r\n        } else if (obj.type === \"105\") {\r\n          pro = MessageTaskProperties();\r\n        } else if (obj.type === \"106\") {\r\n          const config = {\r\n            name: \"python任务\",\r\n            Type: \"python任务\",\r\n            language: \"python\",\r\n          };\r\n          pro = ScriptNodeProperties(config);\r\n        } else if (obj.type === \"107\") {\r\n          const config = {\r\n            name: \"shell任务\",\r\n            Type: \"shell任务\",\r\n            language: \"shell\",\r\n          };\r\n          pro = ScriptNodeProperties(config);\r\n        } else if (obj.type === \"108\") {\r\n          const config = {\r\n            name: \"SQL任务\",\r\n            Type: \"SQL任务\",\r\n            language: \"SQL\",\r\n          };\r\n          pro = ScriptNodeProperties(config);\r\n        } else if (obj.type == \"201\") {\r\n          pro = StartNodeProperties();\r\n        } else if (obj.type == \"299\") {\r\n          pro = endNodeProperties();\r\n        } else if (obj.type == \"301\") {\r\n          pro = JudgementNodeProperties();\r\n        } else if (obj.type == \"302\") {\r\n          pro = JumpNodeProperties();\r\n        } else {\r\n          pro = NodeProperties();\r\n        }\r\n      } else if (obj instanceof Line) {\r\n        pro = LineProperties();\r\n      } else if (obj instanceof Lane) {\r\n        pro = CorridorProperties();\r\n      } else if (obj instanceof BoundaryEvent) {\r\n        pro = BoundaryEventProperties();\r\n      } else {\r\n        // 基本流\r\n        pro = BaseInfoProperties();\r\n      }\r\n      var attr = obj.attributes;\r\n      // 转成平台要的样子\r\n      var group = null;\r\n      var groupIndex = -1;\r\n      pro.json = [];\r\n      for (let i = 0; i < pro.rows.length; i++) {\r\n        if (pro.rows[i].nodeLevel == 1) {\r\n          // 类似文本框\r\n          pro.rows[i].value = attr[pro.rows[i].nodeName];\r\n        } else if (pro.rows[i].nodeLevel == 2) {\r\n          // 期限类型-会根据流程信息去取值\r\n          if (attr[pro.rows[i].nodeName1]) {\r\n            pro.rows[i].value = attr[pro.rows[i].nodeName1][pro.rows[i].nodeName2];\r\n          } else {\r\n            pro.rows[i].value = \"\";\r\n          }\r\n        } else if (pro.rows[i].nodeLevel == 3) {\r\n          // 应用名称应用信息 - 初步认为是只读\r\n          if (attr[pro.rows[i].nodeName1] && attr[pro.rows[i].nodeName1][pro.rows[i].nodeName2]) {\r\n            pro.rows[i].value = attr[pro.rows[i].nodeName1][pro.rows[i].nodeName2][pro.rows[i].nodeName3];\r\n          } else {\r\n            pro.rows[i].value = \"\";\r\n          }\r\n        }\r\n        if (pro.rows[i].group != group) {\r\n          groupIndex++;\r\n          group = pro.rows[i].group;\r\n          pro.json[groupIndex] = {\r\n            name: group,\r\n            attributes: [],\r\n          };\r\n        }\r\n        pro.json[groupIndex][\"attributes\"].push(pro.rows[i]);\r\n      }\r\n      return pro.json;\r\n    },\r\n    loadPropertyDom(data) {\r\n      let rows = [];\r\n      data.forEach((item) => {\r\n        item.attributes.forEach((attr) => {\r\n          if (attr.editor && attr.editor.type === \"checkbox\") {\r\n            attr.value = attr.value || [];\r\n          } else if (attr.editor && attr.editor.type !== \"checkbox\") {\r\n            attr.value = attr.editor && attr.editor.options && attr.value ? Number(attr.value) : attr.value;\r\n          } else if (attr.nodeType === \"flow\" && attr.nodeName2 === \"Version\") {\r\n            // 工作流版本\r\n            attr.oldValue = attr.value;\r\n            attr.value0 = attr.value.split(\".\")[0];\r\n            attr.value1 = attr.value.split(\".\")[1];\r\n            attr.value2 = attr.value.split(\".\")[2];\r\n          } else {\r\n            attr.value = attr.value;\r\n          }\r\n\r\n          if (attr.showRob) {\r\n            rows.push(attr);\r\n          }\r\n        });\r\n      });\r\n      this.data = data;\r\n\r\n      // 加载处理模式 抢办人数/比例  连线汇总信息\r\n      if (rows && rows.length > 0) {\r\n        rows.forEach((row) => {\r\n          this.showRob(row);\r\n        });\r\n      }\r\n      this.activeNames = [this.data[0].name];\r\n    },\r\n    changeVesion(attr, index) {\r\n      if (attr) {\r\n        if (index === 0) {\r\n          attr.value1 = 0;\r\n          attr.value2 = \"0001\";\r\n        }\r\n        attr.value = attr.value0 + \".\" + attr.value1 + \".\" + attr.value2;\r\n        this.changeProperty(attr);\r\n      }\r\n    },\r\n    changeProperty(rowData) {\r\n      if (rowData.nodeName2 && rowData.nodeName2 == \"Name\") {\r\n        if (this.curSelectObj instanceof Node) {\r\n          this.curSelectObj.name = rowData.value;\r\n          // this.$bus.$emit(\"updateName\", this.curSelectObj);\r\n          this.$bus.$emit(`updateNodeName${this.isSub ? this.parentNode.id : \"\"}`, this.curSelectObj, true);\r\n        }\r\n        if (this.curSelectObj instanceof Lane) {\r\n          this.curSelectObj.name = rowData.value;\r\n        }\r\n        if (this.curSelectObj instanceof Line) {\r\n          this.curSelectObj.name = rowData.value;\r\n        }\r\n      }\r\n      if (rowData.showRob && rowData.showRob == \"GatherRule\") {\r\n        // 线 连线类型变化\r\n        if (this.curSelectObj instanceof Line) {\r\n          this.curSelectObj.type = rowData.value;\r\n        }\r\n      }\r\n      if (rowData.nodeName1 === \"InLine\" && rowData.nodeName2 === \"Type\") {\r\n        let name = GetInlineTypeData(rowData.value);\r\n        let RangeRule = [];\r\n        const Rule = this.curNodeObj.InLine.RangeRule && this.curNodeObj.InLine.RangeRule.Rule;\r\n        if (Rule && Rule.length > 0) {\r\n          Rule.forEach((item, index) => {\r\n            RangeRule.push(item.name + \"/\" + GetIsSelected(item.IsSelected));\r\n          });\r\n          this.curSelectObj.taskMsg = `${name}: ${RangeRule.join(\",\")}`;\r\n        }\r\n      }\r\n      if (\r\n        rowData.nodeName1 === \"InLine\" &&\r\n        rowData.nodeName2 === \"RangeRule\" &&\r\n        rowData.value &&\r\n        rowData.value.Rule &&\r\n        rowData.value.Rule.length > 0\r\n      ) {\r\n        let name = GetInlineTypeData(this.curNodeObj.InLine.Type);\r\n        let RangeRule = [];\r\n        rowData.value.Rule.forEach((item, index) => {\r\n          RangeRule.push(item.name + \"/\" + GetIsSelected(item.IsSelected));\r\n        });\r\n\r\n        this.curSelectObj.taskMsg = `${name}: ${RangeRule.join(\",\")}`;\r\n      }\r\n      // 处理模式为抢办 需要单独处理\r\n      this.showRob(rowData);\r\n      if (rowData.nodeLevel == 1) {\r\n        this.curNodeObj[rowData.nodeName] = rowData.value;\r\n      } else if (rowData.nodeLevel == 2) {\r\n        this.curNodeObj[rowData.nodeName1][rowData.nodeName2] = rowData.value;\r\n      } else if (rowData.nodeLevel == 3) {\r\n        this.curNodeObj[rowData.nodeName1][rowData.nodeName2][rowData.nodeName3] = rowData.value;\r\n      }\r\n    },\r\n    showRob(rowData) {\r\n      if (rowData.showRob) {\r\n        this.data.forEach((item) => {\r\n          item.attributes.forEach((attr) => {\r\n            const showRob = rowData.showRob.split(\",\");\r\n            showRob.forEach((field) => {\r\n              if (attr.nodeName2 === field || attr.nodeName3 === field) {\r\n                if (field === \"RushInfo\") {\r\n                  if (rowData.value === 5) {\r\n                    //修改默认值\r\n                    Object.assign(attr, {\r\n                      name: \"人数\",\r\n                      value: 1,\r\n                      max: 999999,\r\n                      unit: \"（人）\",\r\n                      hide: false,\r\n                    });\r\n                  } else if (rowData.value === 6) {\r\n                    //修改默认值\r\n                    Object.assign(attr, {\r\n                      name: \"比例\",\r\n                      value: 60,\r\n                      max: 100,\r\n                      unit: \"%\",\r\n                      hide: false,\r\n                    });\r\n                  } else {\r\n                    attr.hide = true;\r\n                  }\r\n                } else if (field === \"GatherRule\") {\r\n                  if (rowData.value === 1 || rowData.value === 2) {\r\n                    attr.hide = false;\r\n                  } else {\r\n                    attr.hide = true;\r\n                  }\r\n                } else if (field === \"Params\") {\r\n                  if (rowData.value === 0 || rowData.value === 1) {\r\n                    attr.hide = false;\r\n                  } else {\r\n                    attr.hide = true;\r\n                  }\r\n                } else if (field === \"Content\") {\r\n                  if (rowData.value === 2) {\r\n                    attr.hide = false;\r\n                  } else {\r\n                    attr.hide = true;\r\n                  }\r\n                } else if (field === \"Value\") {\r\n                  if (rowData.value !== 0) {\r\n                    attr.hide = false;\r\n                  } else {\r\n                    attr.hide = true;\r\n                  }\r\n                }\r\n              }\r\n            });\r\n          });\r\n        });\r\n      }\r\n    },\r\n    doOpenDialog(rowData) {\r\n      let data = rowData;\r\n      let params = {\r\n        code: (data.value && data.value.Expression) || \"\",\r\n        language: \"java\",\r\n        checked: this.checked,\r\n        value: data.value,\r\n      };\r\n      if (data.config && data.config.content) {\r\n        if (data.config.content === \"RangeRule\") {\r\n          params.nodes = this.nodes;\r\n          params.value = data.value || {};\r\n        } else if (data.config.content === \"Summary\") {\r\n          params.lines = this.lines;\r\n          params.value = data.value || {};\r\n        } else if (data.config.content === \"SendCondition\") {\r\n          params.lines = this.lines;\r\n          params.value = data.value || {};\r\n        } else if (data.config.content === \"EventSetting\") {\r\n          params.isEvent = true;\r\n        }\r\n      }\r\n      dsf.layer.pc.openDialog({\r\n        title: data.name,\r\n        width: data.config.width,\r\n        height: data.config.height,\r\n        overflow: \"hidden\",\r\n        content: data.config.content,\r\n        params: params,\r\n        btns: [\r\n          {\r\n            text: \"确定\",\r\n            handler: (component) => {\r\n              data.value = component.getContent();\r\n              this.changeProperty(data);\r\n            },\r\n          },\r\n          {\r\n            text: \"取消\",\r\n          },\r\n        ],\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.inline {\r\n  display: flex;\r\n  /deep/ .el-input__inner {\r\n    text-align: center;\r\n    padding: 0;\r\n  }\r\n  .el-input-number {\r\n    width: 300px;\r\n    /deep/ .el-input-number__decrease,\r\n    /deep/ .el-input-number__increase {\r\n      width: 20px;\r\n    }\r\n    /deep/ .el-input__inner {\r\n      padding-right: 16px;\r\n    }\r\n  }\r\n\r\n  .el-input-number.is-controls-right .el-input__inner {\r\n    padding-right: 34px;\r\n  }\r\n  .unit {\r\n    display: inline-block;\r\n    width: 42px;\r\n    text-align: center;\r\n  }\r\n}\r\n.title {\r\n  height: 50px;\r\n  line-height: 50px;\r\n  text-align: center;\r\n  position: relative;\r\n  .el-button {\r\n    position: absolute;\r\n    top: 12px;\r\n    padding: 7px 10px;\r\n    &.el-button-all {\r\n      right: 5px;\r\n    }\r\n    &.el-button-base {\r\n      left: 5px;\r\n    }\r\n  }\r\n}\r\n.el-select {\r\n  width: 100%;\r\n}\r\n/deep/ .el-checkbox {\r\n  margin-right: 12px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flowInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flowInfo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./flowInfo.vue?vue&type=template&id=6be2b74f&scoped=true&\"\nimport script from \"./flowInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./flowInfo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./flowInfo.vue?vue&type=style&index=0&id=6be2b74f&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6be2b74f\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"svgRoot\",staticClass:\"svgRoot\"},[_c('lines',{ref:\"lines\",attrs:{\"is-draw-line\":_vm.isDrawLine,\"lines\":_vm.lines,\"nodes\":_vm.nodes,\"events\":_vm.events,\"checked\":_vm.checked,\"config\":_vm.config}}),_c('nodes',{attrs:{\"is-draw-line\":_vm.isDrawLine,\"nodes\":_vm.nodes,\"checked\":_vm.checked,\"config\":_vm.config}}),_c('events',{attrs:{\"is-draw-line\":_vm.isDrawLine,\"nodes\":_vm.nodes,\"events\":_vm.events,\"checked\":_vm.checked,\"config\":_vm.config}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div ref=\"svgRoot\" class=\"svgRoot\">\r\n    <lines\r\n      ref=\"lines\"\r\n      :is-draw-line=\"isDrawLine\"\r\n      :lines=\"lines\"\r\n      :nodes=\"nodes\"\r\n      :events=\"events\"\r\n      :checked=\"checked\"\r\n      :config=\"config\"\r\n    ></lines>\r\n    <nodes\r\n      :is-draw-line=\"isDrawLine\"\r\n      :nodes=\"nodes\"\r\n      :checked=\"checked\"\r\n      :config=\"config\"\r\n    ></nodes>\r\n    <events\r\n      :is-draw-line=\"isDrawLine\"\r\n      :nodes=\"nodes\"\r\n      :events=\"events\"\r\n      :checked=\"checked\"\r\n      :config=\"config\"\r\n    ></events>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Lines from \"./Lines\";\r\nimport Events from \"./Events\";\r\nimport subprocess from \"./Subprocess\";\r\nimport { getAttributes } from \"./common\";\r\nimport { BaseInfoProperties } from \"./propertySource\";\r\nexport default {\r\n  name: \"FlowContent\",\r\n  components: {\r\n    Lines,\r\n    Events,\r\n    subprocess,\r\n  },\r\n  props: {\r\n    flowInfo: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    },\r\n    lines: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    nodes: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    lanes: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    },\r\n    events: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    isDrawLine: {\r\n      type: Boolean,\r\n      default() {\r\n        return false;\r\n      },\r\n    },\r\n    checked: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    },\r\n    config: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    },\r\n  },\r\n  data() {\r\n    return {};\r\n  },\r\n  watch: {\r\n    flowInfo(val) {\r\n      if (val) {\r\n        this.init();\r\n      }\r\n    },\r\n  },\r\n  created() {},\r\n  mounted() {},\r\n  methods: {\r\n    init() {\r\n      this.initFlow();\r\n    },\r\n    initFlow() {\r\n      //流程插件初始化\r\n      flow = {\r\n        attributes: Object.assign(\r\n          getAttributes(BaseInfoProperties()),\r\n          this.flowInfo\r\n        ),\r\n      };\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n// @import \"_platform/assets/styles/designer/workFlow.scss\";\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flowContent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flowContent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./flowContent.vue?vue&type=template&id=de0b44a8&\"\nimport script from \"./flowContent.vue?vue&type=script&lang=js&\"\nexport * from \"./flowContent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./flowContent.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"lanes\"},_vm._l((_vm.lanes),function(lane,index){return _c('div',{key:lane.id || index,staticClass:\"lane\",class:{ selected: _vm.checked === lane },style:({\n      left: _vm.toPx(lane.left),\n      top: _vm.toPx(lane.top),\n      width: lane.direction === 'vertical' ? _vm.toPx(lane.size) : '',\n      height: lane.direction === 'horizontal' ? _vm.toPx(lane.size) : '',\n    }),attrs:{\"index\":index},on:{\"click\":function($event){return _vm.selectLane($event, lane)}}},[_c('div',{staticClass:\"head\"},[_c('div',{staticClass:\"title\"},[_c('el-popover',{attrs:{\"placement\":lane.direction === 'vertical' ? 'bottom' : 'right',\"title\":\"修改名称\",\"width\":\"200\",\"trigger\":\"manual\"},model:{value:(lane.isEdit),callback:function ($$v) {_vm.$set(lane, \"isEdit\", $$v)},expression:\"lane.isEdit\"}},[_c('div',{staticClass:\"el-input\"},[(lane.isEdit)?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(lane.name),expression:\"lane.name\"},{name:\"focus\",rawName:\"v-focus\"}],staticClass:\"el-input__inner\",attrs:{\"autofocus\":\"\",\"type\":\"text\",\"placeholder\":\"请输入内容\"},domProps:{\"value\":(lane.name)},on:{\"change\":function($event){lane.attributes.Name = lane.name;_vm.hideEdit();},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(lane, \"name\", $event.target.value)}}}):_vm._e()]),_c('span',{staticClass:\"textContent ellipsis\",style:({\n              width: _vm.toPx(lane.size),\n              transform: lane.direction === 'horizontal' ? (\"rotate(-90deg) translateX(-\" + (lane.size) + \"px)\") : '',\n            }),attrs:{\"slot\":\"reference\"},on:{\"dblclick\":function($event){return _vm.edit(lane)}},slot:\"reference\"},[_vm._v(_vm._s(lane.name))])]),_c('img',{staticClass:\"plus left\",attrs:{\"src\":\"/dsfa/res/dsf_styles/themes/workFlow/addLane.png\"},on:{\"click\":function($event){return _vm.addLane(lane.direction, index)}}}),_c('img',{staticClass:\"plus right\",attrs:{\"src\":\"/dsfa/res/dsf_styles/themes/workFlow/addLane.png\"},on:{\"click\":function($event){return _vm.addLane(lane.direction, index + 1)}}}),_c('span',{staticClass:\"resizeLane\",on:{\"mousedown\":function($event){return _vm.dragLane($event, lane)}}})],1)]),_c('div',{staticClass:\"bg/\"}),_c('div',{staticClass:\"laneSelected\"})])}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\n<template>\r\n  <div class=\"lanes\">\r\n    <div\r\n      v-for=\"(lane, index) in lanes\"\r\n      :key=\"lane.id || index\"\r\n      :index=\"index\"\r\n      :style=\"{\r\n        left: toPx(lane.left),\r\n        top: toPx(lane.top),\r\n        width: lane.direction === 'vertical' ? toPx(lane.size) : '',\r\n        height: lane.direction === 'horizontal' ? toPx(lane.size) : '',\r\n      }\"\r\n      :class=\"{ selected: checked === lane }\"\r\n      class=\"lane\"\r\n      @click=\"selectLane($event, lane)\"\r\n    >\r\n      <div class=\"head\">\r\n        <div class=\"title\">\r\n          <el-popover\r\n            v-model=\"lane.isEdit\"\r\n            :placement=\"lane.direction === 'vertical' ? 'bottom' : 'right'\"\r\n            title=\"修改名称\"\r\n            width=\"200\"\r\n            trigger=\"manual\"\r\n          >\r\n            <div class=\"el-input\">\r\n              <input\r\n                v-if=\"lane.isEdit\"\r\n                v-model=\"lane.name\"\r\n                v-focus\r\n                autofocus\r\n                class=\"el-input__inner\"\r\n                type=\"text\"\r\n                placeholder=\"请输入内容\"\r\n                @change=\"lane.attributes.Name = lane.name;hideEdit();\"\r\n              />\r\n            </div>\r\n            <span\r\n              slot=\"reference\"\r\n              class=\"textContent ellipsis\"\r\n              :style=\"{\r\n                width: toPx(lane.size),\r\n                transform: lane.direction === 'horizontal' ? `rotate(-90deg) translateX(-${lane.size}px)` : '',\r\n              }\"\r\n              @dblclick=\"edit(lane)\"\r\n            >{{ lane.name }}</span>\r\n          </el-popover>\r\n          <img\r\n            class=\"plus left\"\r\n            src=\"/dsfa/res/dsf_styles/themes/workFlow/addLane.png\"\r\n            @click=\"addLane(lane.direction, index)\"\r\n          />\r\n          <img\r\n            class=\"plus right\"\r\n            src=\"/dsfa/res/dsf_styles/themes/workFlow/addLane.png\"\r\n            @click=\"addLane(lane.direction, index + 1)\"\r\n          />\r\n          <span class=\"resizeLane\" @mousedown=\"dragLane($event, lane)\"></span>\r\n        </div>\r\n      </div>\r\n      <div class=\"bg/\"></div>\r\n      <div class=\"laneSelected\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n/* eslint-disable no-unused-vars */\r\nimport { LaneDirection } from './tools';\r\n\r\nexport default {\r\n  name: \"Lanes\",\r\n  props: {\r\n    lanes: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    checked: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      current: null,\r\n      minSize: 100 // 最小的泳道宽度/高度\r\n    };\r\n  },\r\n  mounted() {\r\n    document.addEventListener('mousedown', (e) => {\r\n      const target = e.target;\r\n      if(target.getAttribute(\"role\") !== \"tooltip\" && target.parentElement.getAttribute(\"role\") !== \"tooltip\" && target.parentElement.parentElement.getAttribute(\"role\") !== \"tooltip\") {\r\n        this.hideEdit();\r\n      }\r\n    });\r\n    document.addEventListener('mousemove', (e) => {\r\n      this.moveLane(e);\r\n    });\r\n    document.addEventListener('mouseup', (e) => {\r\n      this.dropLane(e);\r\n    });\r\n  },\r\n  methods: {\r\n    toPx(number) {\r\n      return `${number}px`;\r\n    },\r\n    selectLane(e, lane) {\r\n      this.$bus.$emit(\"update-checked\", lane);\r\n      e.stopPropagation();\r\n    },\r\n    addLane(direction, index) {\r\n      this.$emit('addLane', direction, index);\r\n    },\r\n    dragLane(e, item) {\r\n      this.$bus.$emit(\"update-checked\", item);\r\n      this.current = { ...item };\r\n      this.$bus.$emit('update-baseLine', {\r\n        show: this.current.direction,\r\n        top: 0,\r\n        left: 0\r\n      });\r\n      // 鼠标点击的位置在整个页面上的坐标是（e.clientX，e.clientY）\r\n      // 鼠标点击的位置在图片的位置坐标为（X1，Y1）\r\n    },\r\n    dropLane(e) {\r\n      if(!this.current) {\r\n        return;\r\n      }\r\n      const page = this.$store.state.flow.page;\r\n      const svgRoot =  this.$store.state.flow.svgRoot;\r\n      const scale = this.$store.state.flow.page.scale;\r\n      if (this.current.direction === LaneDirection.vertical) {\r\n        this.current.size = (e.pageX - this.current.left - page.left + svgRoot.scrollLeft) / scale;\r\n      } else {\r\n        this.current.size = (e.pageY - this.current.top - page.top + svgRoot.scrollTop) / scale;\r\n      }\r\n      this.current.size = this.current.size > this.minSize ? this.current.size : this.minSize;\r\n      // 根据鼠标点击的位置在整个页面上的坐标和在图片上的坐标来确定整个图片的坐标\r\n      this.$bus.$emit('update-baseLine', {\r\n        showV: false,\r\n        showH: false,\r\n        top: 0,\r\n        left: 0\r\n      });\r\n      this.$store.commit(\"flow/changeLane\", this.current);\r\n      this.$bus.$emit('resize');\r\n      this.current = null;\r\n    },\r\n    moveLane(e) {\r\n      if (!this.current) {\r\n        return false;\r\n      }\r\n      let resize;\r\n      const page = this.$store.state.flow.page;\r\n      const svgRoot =  this.$store.state.flow.svgRoot;\r\n      const scale = this.$store.state.flow.page.scale;\r\n      if (this.current.direction === LaneDirection.vertical) {\r\n        const minLeft = this.current.left + this.minSize;\r\n        const current = e.pageX - page.left + svgRoot.scrollLeft;\r\n        resize = {\r\n          top: 10,\r\n          left: (current > minLeft * scale ? current : minLeft * scale) / scale\r\n        };\r\n      } else {\r\n        const minTop = this.current.top + this.minSize;\r\n        const current = e.pageY - page.top + svgRoot.scrollTop;\r\n        resize = {\r\n          top: (current > minTop * scale ? current * scale : minTop) / scale,\r\n          left: 10\r\n        };\r\n      }\r\n      const baseLine = Object.assign(resize, {\r\n        showV: this.current.direction === 'vertical',\r\n        showH: this.current.direction === 'horizontal',\r\n      });\r\n      this.$bus.$emit('update-baseLine', baseLine);\r\n      this.$bus.$emit('autoScroll', {\r\n        type: \"lane\",\r\n        data: this.current,\r\n        mouse: {\r\n          x: e.pageX,\r\n          y: e.pageY,\r\n        },\r\n      });\r\n    },\r\n    edit(lane) {\r\n      this.lanes.forEach(item => {\r\n        if(lane === item) {\r\n          item.isEdit = true;\r\n        } else {\r\n          item.isEdit = false;\r\n        }\r\n      });\r\n    },\r\n    hideEdit() {\r\n      this.lanes.forEach(item => {\r\n        item.isEdit = false;\r\n      });\r\n    }\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.lanes {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lanes.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lanes.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Lanes.vue?vue&type=template&id=c192e5b2&scoped=true&\"\nimport script from \"./Lanes.vue?vue&type=script&lang=js&\"\nexport * from \"./Lanes.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Lanes.vue?vue&type=style&index=0&id=c192e5b2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c192e5b2\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div id=\"desginer\" class=\"ds_workflow ds-designer\">\r\n    <!-- 按钮栏 -->\r\n    <div class=\"designer-head\">\r\n      <div class=\"desginer_tools\">\r\n        <a class=\"ds-button__icon-text\" @click=\"doSave\">\r\n          <i class=\"iconfont icon-baocun\"></i>\r\n          <span>保存</span>\r\n        </a>\r\n        <a class=\"ds-button__icon-text\">\r\n          <i class=\"iconfont icon-baocun\"></i>\r\n          <span>发布</span>\r\n        </a>\r\n        <a class=\"ds-button__icon-text\">\r\n          <i class=\"iconfont icon-iframetianjia\"></i>\r\n          <span>\r\n            版本\r\n            <i class=\"iconfont icon-xia1\"></i>\r\n          </span>\r\n          <dl class=\"layui-nav-child\">\r\n            <p class=\"label\">\r\n              <span>当前版本</span>\r\n            </p>\r\n            <p>\r\n              <span>2.0.11 2020-4-10 16：20： 10</span>\r\n            </p>\r\n            <p class=\"label\">\r\n              <span>历史版本</span>\r\n            </p>\r\n            <p>\r\n              <span>2.0.11 2020-4-10 16：20： 10</span>\r\n            </p>\r\n            <p>\r\n              <span>2.0.11 2020-4-10 16：20： 10</span>\r\n            </p>\r\n            <p>\r\n              <span>2.0.11 2020-4-10 16：20： 10</span>\r\n            </p>\r\n            <p>\r\n              <span>2.0.11 2020-4-10 16：20： 10</span>\r\n            </p>\r\n          </dl>\r\n        </a>\r\n        <a class=\"ds-button__icon-text\">\r\n          <i class=\"iconfont icon-shebeikaifa1\"></i>\r\n          <span>模板库</span>\r\n        </a>\r\n        <a class=\"ds-button__icon-text\">\r\n          <i class=\"iconfont icon-baocun\"></i>\r\n          <span>关闭</span>\r\n        </a>\r\n        <a class=\"ds-button__icon-text\" :class=\"{ selected: isDrawLine }\" @click=\"drawLine\">\r\n          <i class=\"iconfont icon-liujisuan\"></i>\r\n          <span>连线</span>\r\n        </a>\r\n        <a class=\"ds-button__icon-text\">\r\n          <i class=\"iconfont icon-iframetianjia\"></i>\r\n          <span>\r\n            泳道\r\n            <i class=\"iconfont icon-xia1\"></i>\r\n          </span>\r\n          <dl class=\"layui-nav-child\">\r\n            <dd @click=\"addLane('vertical')\">\r\n              <span>泳道(垂直)</span>\r\n            </dd>\r\n            <dd @click=\"addLane('horizontal')\">\r\n              <span>泳道(水平)</span>\r\n            </dd>\r\n          </dl>\r\n        </a>\r\n        <a class=\"ds-button__icon-text scale\">\r\n          <div class=\"scale-com\">\r\n            <i class=\"el-icon-minus\" :class=\"{ disabled: scale <= 0.4 }\" @click=\"rootScale('down')\"></i>\r\n            <span class=\"percent\">{{ Math.round(scale * 100) }}%</span>\r\n            <i class=\"el-icon-plus\" :class=\"{ disabled: scale >= 2 }\" @click=\"rootScale('up')\"></i>\r\n          </div>\r\n          <span>缩放</span>\r\n        </a>\r\n        <a class=\"ds-button__icon-text\">\r\n          <i class=\"iconfont icon-dakai\"></i>\r\n          <span>\r\n            组件\r\n            <i class=\"iconfont icon-xia1\"></i>\r\n          </span>\r\n          <dl class=\"layui-nav-child\">\r\n            <p @click=\"exportFlow()\">\r\n              <span>创建组</span>\r\n            </p>\r\n            <p class=\"label\" @click=\"saveAsFlow()\">\r\n              <span>保存为组件</span>\r\n            </p>\r\n            <p @click=\"openFlow()\">\r\n              <span>选择组</span>\r\n            </p>\r\n          </dl>\r\n        </a>\r\n        <a class=\"ds-button__icon-text\">\r\n          <i class=\"iconfont icon-lianjieliu\"></i>\r\n          <span>\r\n            更多\r\n            <i class=\"iconfont icon-xia1\"></i>\r\n          </span>\r\n          <dl class=\"layui-nav-child\">\r\n            <p @click=\"exportFlow()\">\r\n              <span>导出</span>\r\n            </p>\r\n            <p class=\"child\">DFR</p>\r\n            <p class=\"child\">BPMN2.0</p>\r\n            <p class=\"child\">XML</p>\r\n            <p class=\"label child\">JSON</p>\r\n            <p @click=\"openFlow()\">\r\n              <span>导入</span>\r\n            </p>\r\n            <p class=\"child\">DFR</p>\r\n            <p class=\"child\">BPMN2.0</p>\r\n            <p class=\"child\">XML</p>\r\n            <p class=\"label child\">JSON</p>\r\n            <p class=\"label\" @click=\"startTestFlow()\">\r\n              <span>仿真测试</span>\r\n            </p>\r\n            <p @click=\"monitorFlow()\">\r\n              <span>浏览监控</span>\r\n            </p>\r\n          </dl>\r\n        </a>\r\n      </div>\r\n    </div>\r\n    <!-- 中、左、右 -->\r\n    <div class=\"designer-content\">\r\n      <div class=\"designer-center\">\r\n        <div ref=\"ds_page\" class=\"ds_control ds_page layui-form leftRight_ design\" @scroll=\"onScroll($event)\">\r\n          <div\r\n            id=\"flow_box\"\r\n            ref=\"container\"\r\n            class=\"flow\"\r\n            :style=\"{\r\n              width: toPx(scale > 1 ? width * scale : width / scale),\r\n              height: toPx(scale > 1 ? height * scale : height / scale),\r\n              transform: `scale(${scale}) translateZ(0)`,\r\n              transformOrigin: 'left top',\r\n            }\"\r\n          >\r\n            <div\r\n              ref=\"root\"\r\n              :class=\"{\r\n                has_v_head: lanes && lanes.vertical.length > 0,\r\n                has_h_head: lanes && lanes.horizontal.length > 0,\r\n              }\"\r\n              :style=\"{\r\n                width: toPx(scale > 1 ? width * scale : width / scale),\r\n                height: toPx(scale > 1 ? height * scale : height / scale),\r\n              }\"\r\n              class=\"root\"\r\n            >\r\n              <span\r\n                v-if=\"baseLine.showV\"\r\n                :style=\"{ transform: `translate3d(${baseLine.left}px, 0, 0)` }\"\r\n                class=\"baseLine_v\"\r\n              ></span>\r\n              <span\r\n                v-if=\"baseLine.showH\"\r\n                :style=\"{ transform: `translate3d(0, ${baseLine.top}px, 0)` }\"\r\n                class=\"baseLine_h\"\r\n              ></span>\r\n              <flow-content\r\n                ref=\"flowContent\"\r\n                :flow-info=\"flowInfo\"\r\n                :is-draw-line=\"isDrawLine\"\r\n                :lines=\"lines\"\r\n                :nodes=\"nodes\"\r\n                :lanes=\"lanes\"\r\n                :events=\"events\"\r\n                :checked=\"checked\"\r\n                :config=\"config\"\r\n              ></flow-content>\r\n              <div ref=\"backLayout\" class=\"backgroundLayout\">\r\n                <div ref=\"v_lane\" class=\"v_lane\">\r\n                  <lanes :lanes=\"lanes && lanes.vertical\" :checked=\"checked\" @addLane=\"addLane\"></lanes>\r\n                </div>\r\n                <div ref=\"h_lane\" class=\"h_lane\">\r\n                  <lanes :lanes=\"lanes && lanes.horizontal\" :checked=\"checked\" @addLane=\"addLane\"></lanes>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"designer-left\">\r\n        <div class=\"designer-left-tools\">\r\n          <el-collapse v-model=\"activeNames\" accordion>\r\n            <el-collapse-item v-for=\"(tool, index) in flowTools\" :key=\"index\" :title=\"tool.title\" :name=\"index\">\r\n              <div class=\"layui-colla-content layui-show\">\r\n                <div\r\n                  v-for=\"item in tool.data\"\r\n                  :key=\"item.type\"\r\n                  class=\"ds_tool_item nodeButton\"\r\n                  :title=\"item.name\"\r\n                  :sort=\"item.sort\"\r\n                  :nodetype=\"item.type\"\r\n                  draggable=\"true\"\r\n                  @dragstart=\"dragTool($event, item)\"\r\n                >\r\n                  <img :src=\"item.img\" draggable=\"false\" />\r\n                  {{ item.name }}\r\n                </div>\r\n                <div style=\"clear: both;\"></div>\r\n              </div>\r\n            </el-collapse-item>\r\n            <el-collapse-item title=\"边界事件\" name=\"5\">\r\n              <div class=\"layui-colla-content layui-show\">\r\n                <div\r\n                  v-for=\"event in boundaryEvents\"\r\n                  :key=\"event.type\"\r\n                  class=\"nodeButton ds_tool_event\"\r\n                  :title=\"event.name\"\r\n                  :nodetype=\"event.type\"\r\n                >\r\n                  <div class=\"tool_event_drag\" draggable=\"true\" @dragstart=\"dragBoundaryEvent($event, event)\">\r\n                    <img :src=\"event.url\" draggable=\"false\" />\r\n                  </div>\r\n                  <span>{{ event.name }}</span>\r\n                </div>\r\n              </div>\r\n            </el-collapse-item>\r\n          </el-collapse>\r\n        </div>\r\n      </div>\r\n      <div id=\"propertyBox\" class=\"designer-right\">\r\n        <flow-info :checked=\"checked\" :nodes=\"nodes\" :lines=\"lines\" :flow-info=\"flowInfo\"></flow-info>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n/* eslint-disable no-unused-vars */\r\n/* eslint-disable no-redeclare */\r\nwindow.flow = null;\r\nimport { mapState } from \"vuex\";\r\nimport Node from \"./Node\";\r\nimport Lane from \"./Lane\";\r\nimport Line from \"./Line\";\r\nimport BoundaryEvent from \"./BoundaryEvent\";\r\nimport FlowInfo from \"./flowInfo\";\r\nimport FlowContent from \"./flowContent\";\r\nimport {\r\n  getObjById,\r\n  getObjByTarget,\r\n  getObjByParentTarget,\r\n  getObjectByTarget,\r\n  getGridPoint,\r\n  deepClone,\r\n  toPx,\r\n} from \"./common\";\r\nimport { _LineType, LaneDirection, nodeSize, tools } from \"./tools\";\r\nimport Lanes from \"./Lanes\";\r\nimport {\r\n  NodeProperties,\r\n  LineProperties,\r\n  BaseInfoProperties,\r\n  CorridorProperties,\r\n  JudgementNodeProperties,\r\n  flowTools,\r\n  boundaryEvents,\r\n} from \"./propertySource\";\r\nimport \"jqueryui/jquery-ui.min.css\";\r\nimport \"jqueryui/jquery-ui.min.js\";\r\nexport default {\r\n  name: \"Flow\",\r\n  components: {\r\n    FlowInfo,\r\n    FlowContent,\r\n    Lanes,\r\n  },\r\n  data() {\r\n    return {\r\n      activeNames: [0],\r\n      isDrawLine: false,\r\n      dragNode: null,\r\n      dragEvent: null,\r\n      endTarget: null,\r\n      width: 0,\r\n      height: 0,\r\n      maxWidth: 0,\r\n      maxHeight: 0,\r\n      flow: null,\r\n      flowInfo: null,\r\n      config: null,\r\n      xmlId: (this.$route.query && this.$route.query.id) || \"5b2d48d830c44b509d4fa730fa9d0b9b\",\r\n      nodes: [],\r\n      lines: [],\r\n      events: [],\r\n      distance: 30, // 吸附距离\r\n      cloneObj: null,\r\n      crashNode: null,\r\n      scale: this.$store.state.flow.page.scale,\r\n      dragSize: 20,\r\n      maxSizeOffset: 50,\r\n      flowTools: flowTools,\r\n      boundaryEvents: boundaryEvents,\r\n      checked: null,\r\n      baseLine: {\r\n        show: \"\",\r\n        top: 0,\r\n        left: 0,\r\n      },\r\n      showLineV: false,\r\n      showLineH: false,\r\n      isGlobalPosMove: false,\r\n      globalPos: null,\r\n      globalMoveLastMouse: null,\r\n      globalRect: null,\r\n      isGlobalSelect: false,\r\n      selectGlobalPos: null,\r\n      selectGlobalPonits: {\r\n        start: { x: 0, y: 0 },\r\n        end: { x: 0, y: 0 },\r\n      },\r\n      globalSelect: null,\r\n      isCtrlKey: false,\r\n      ctrlCopyNodes: null,\r\n      isCopyNodes: false,\r\n      copyNodesPos: null,\r\n      copyNodes: [],\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      lanes: (state) => {\r\n        return state.flow.lanes;\r\n      },\r\n    }),\r\n  },\r\n  created() {},\r\n  mounted() {\r\n    this.reset();\r\n    this.init();\r\n    this.flow = this.$store.state.flow;\r\n  },\r\n  methods: {\r\n    toPx,\r\n    reset() {\r\n      const ds_page = this.$refs.ds_page;\r\n      this.$store.commit(\"flow/setPage\", {\r\n        width: ds_page.clientWidth,\r\n        height: ds_page.clientHeight,\r\n      });\r\n    },\r\n    async init() {\r\n      await this.initData();\r\n      this.loadElement();\r\n      // 绑定流程画布上的事件\r\n      this.initEvent();\r\n    },\r\n    initData() {\r\n      // 获取flow.json数据 及配置项\r\n      return this.$http\r\n        .all([\r\n          this.$http.get(\"./static/pd_attributes/dsf.flow.json\"),\r\n          this.$http.get(\"wfm/getWFDefinition\", {\r\n            sID: this.xmlId,\r\n          }),\r\n        ])\r\n        .then((res) => {\r\n          this.config = res[0];\r\n          this.flowInfo = res[1].data.WorkFlow;\r\n        })\r\n        .catch((error) => {\r\n          this.flowInfo = {};\r\n          console.log(error);\r\n        });\r\n    },\r\n    initEvent() {\r\n      document.addEventListener(\"dragover\", (e) => {\r\n        if (this.dragNode) {\r\n          this.isCtrlKey = e.ctrlKey; // dragend时候 ctrlKey一直是false 故这么解决\r\n          this.dragToolOver(e);\r\n        }\r\n        if (this.dragEvent) {\r\n          this.dragEventOver(e);\r\n        }\r\n      });\r\n      document.addEventListener(\"dragend\", (e) => {\r\n        if (this.dragNode) {\r\n          this.dragToolEnd(e);\r\n        }\r\n        if (this.dragEvent) {\r\n          this.dragEventEnd(e);\r\n          this.dragEvent && document.body.removeChild(this.dragEvent);\r\n          this.dragEvent = null;\r\n          this.cloneObj = null;\r\n          this.crashNode = null;\r\n          this.$bus.$emit(\"endMoveEvent\", true);\r\n        }\r\n      });\r\n      this.$bus.$on(\"update-baseLine\", (baseLine) => {\r\n        this.baseLine = baseLine;\r\n      });\r\n      this.$bus.$on(\"update-checked\", (checked) => {\r\n        this.checked = checked;\r\n      });\r\n      this.$bus.$on(\"parentAutoScroll\", this.parentAutoScroll);\r\n      this.$bus.$on(\"autoScroll\", this.autoScroll);\r\n      this.$bus.$on(\"resize\", this.resize);\r\n      this.$bus.$on(\"dragCloneEvent\", this.dragCloneEvent);\r\n      this.$bus.$on(\"dragNode\", this.dragTool);\r\n      // this.$bus.$on('showSubNode', this.showSubNode);\r\n      this.$bus.$on(\"startGlobalMove\", this.startGlobalMove);\r\n      this.$bus.$on(\"startCopyNodes\", this.startCopyNodes);\r\n      document.addEventListener(\"keydown\", this.keydown);\r\n\r\n      window.onresize = () => {\r\n        this.reset();\r\n        this.resize();\r\n      };\r\n      this.$refs.root.addEventListener(\"mousedown\", (e) => {\r\n        const selectedList = this.$store.state.flow.selectedList || null;\r\n        // if (e.ctrlKey && selectedList && selectedList.length > 1) {\r\n        //   // this.startGlobalMove(e);\r\n        //   //如果按住ctrl键，则开始复制多个节点\r\n        // } else {\r\n        // 点击空白处 父父节点不是子流程\r\n        if (e.target.tagName === \"svg\" && e.target.parentElement.parentElement.className.indexOf(\"subprocess\") === -1) {\r\n          this.checked = flow;\r\n          this.$bus.$emit(\"selectGlobal\", null);\r\n          this.isGlobalSelect = true;\r\n          this.selectGlobalPos = this.$store.getters[\"flow/getMousePointByCanvas\"]({\r\n            x: e.pageX,\r\n            y: e.pageY,\r\n          });\r\n        }\r\n        // }\r\n      });\r\n      //鼠标移动过程中的操作\r\n      // 载入私有方法(root内鼠标按下事件、root内鼠标移动事件、root内双击编辑事件、泳道插入事件)\r\n      this.$refs.root.addEventListener(\"mousemove\", (e) => {\r\n        if (this.readOnly) {\r\n          return;\r\n        }\r\n        this.setCursor(e);\r\n        if (this.isGlobalPosMove) {\r\n          this.globalMove(e);\r\n        }\r\n\r\n        if (this.isGlobalSelect) {\r\n          this.selectGlobalMove(e);\r\n        }\r\n\r\n        if (this.isCopyNodes) {\r\n          this.nodesMove(e);\r\n        }\r\n      });\r\n      document.addEventListener(\"mouseup\", (e) => {\r\n        if (this.isGlobalPosMove) {\r\n          this.isGlobalPosMove = false;\r\n          this.globalPos = null;\r\n          this.resize();\r\n          // 删除边界的点\r\n          this.$store.commit(\"flow/clearPoints\");\r\n        }\r\n\r\n        if (this.isGlobalSelect) {\r\n          this.selectGlobalEnd(e);\r\n          this.resize();\r\n          // 删除边界的点\r\n          this.$store.commit(\"flow/clearPoints\");\r\n        }\r\n\r\n        if (this.isCopyNodes) {\r\n          this.nodesMoveEnd(e);\r\n        }\r\n      });\r\n      // 滚动滑轮事件\r\n      this.$refs.ds_page.addEventListener(\"wheel\", this.scrollwheel, true);\r\n      // 复制事件\r\n      document.addEventListener(\"copy\", (e) => {\r\n        e.preventDefault();\r\n        this.documentCopy(e);\r\n      });\r\n      document.addEventListener(\"paste\", (e) => {\r\n        e.preventDefault();\r\n        this.pasteNode(e);\r\n      });\r\n    },\r\n    copyNewNode(ev, tool, offset, copy) {\r\n      ev.dataTransfer && ev.dataTransfer.setDragImage(new Image(), 0, 0); // 设置 拖动背景图为空\r\n      const target = ev.target || ev;\r\n      let cloneNode = target.cloneNode(true);\r\n      cloneNode.setAttribute(\"draggable\", true);\r\n      cloneNode.offset = {\r\n        x: offset ? offset.x : 0,\r\n        y: offset ? offset.y : 0,\r\n      };\r\n      // 节点之间拖动\r\n      if (copy) {\r\n        cloneNode.copyNode = tool;\r\n      }\r\n      if (!copy && tool.type === 102) {\r\n        cloneNode.tool = tool;\r\n      }\r\n      cloneNode.className = cloneNode.className + \" drag_nodeOuter\";\r\n      Object.assign(cloneNode.style, {\r\n        position: \"absolute\",\r\n        zIndex: 9999,\r\n        top: this.toPx(ev.pageY - ((tool.padding || 0) + cloneNode.offset.y) * this.scale),\r\n        left: this.toPx(ev.pageX - ((tool.padding || 0) + cloneNode.offset.x) * this.scale),\r\n        pointerEvents: \"none\",\r\n        cursor: \"move\",\r\n        transform: `scale(${this.scale}) translateZ(0px)`,\r\n        transformOrigin: \"left top\",\r\n      });\r\n      document.body.appendChild(cloneNode);\r\n      this.$bus.$emit(\"isMoveNode\", copy ? cloneNode.copyNode : cloneNode);\r\n      return cloneNode;\r\n    },\r\n    startCopyNodes(e) {\r\n      this.isCopyNodes = true;\r\n      this.copyNodesPos = {\r\n        x: e.pageX,\r\n        y: e.pageY,\r\n      };\r\n    },\r\n    createCopyNodes(e) {\r\n      //复制多个节点\r\n      const selectedList = this.$store.state.flow.selectedList || null;\r\n      if (selectedList && selectedList.length > 1) {\r\n        this.copyNodes = [];\r\n        selectedList.forEach((node) => {\r\n          const target = document.querySelector(`.nodeOuter[data-id=\"${node.id}\"]`);\r\n          const point = {\r\n            x: node.point.x * this.scale,\r\n            y: node.point.y * this.scale,\r\n          };\r\n          let getPoint = this.$store.getters[\"flow/getMousePointByPoint\"](point);\r\n          target.pageX = getPoint.x;\r\n          target.pageY = getPoint.y;\r\n          const copyNode = this.copyNewNode(target, node, null, true);\r\n          copyNode.point = getPoint;\r\n          this.copyNodes.push(copyNode);\r\n        });\r\n      }\r\n    },\r\n    dragTool(ev, tool, offset, copy) {\r\n      this.dragNode = this.copyNewNode(ev, tool, offset, copy);\r\n    },\r\n    getDisplacement(e) {\r\n      const localMouse = {\r\n        x: e.pageX,\r\n        y: e.pageY,\r\n      };\r\n      const last_p = getGridPoint(this.copyNodesPos);\r\n      const move_p = getGridPoint(localMouse);\r\n      return {\r\n        x: move_p.x - last_p.x,\r\n        y: move_p.y - last_p.y,\r\n      }; // 位移\r\n    },\r\n    nodesMove(e) {\r\n      const displacement = this.getDisplacement(e); // 位移\r\n      if (\r\n        (!this.copyNodes || (this.copyNodes && this.copyNodes.length === 0)) &&\r\n        (Math.abs(displacement.x) > 5 || Math.abs(displacement.y) > 5)\r\n      ) {\r\n        // 当位移大于5\r\n        this.createCopyNodes(e);\r\n      }\r\n      this.copyNodes.forEach((node) => {\r\n        const copyNode = node.copyNode;\r\n        const offset = node.offset;\r\n        const end = {\r\n          x: node.point.x + displacement.x - offset.x * this.scale,\r\n          y: node.point.y + displacement.y - offset.y * this.scale,\r\n        };\r\n        node.style.top = this.toPx(end.y);\r\n        node.style.left = this.toPx(end.x);\r\n      });\r\n      this.isCtrlKey = e.ctrlKey;\r\n    },\r\n    dragToolOver(e) {\r\n      const node = this.dragNode;\r\n      const offset = node.offset;\r\n      node.style.top = this.toPx(e.pageY - offset.y * this.scale);\r\n      node.style.left = this.toPx(e.pageX - offset.x * this.scale);\r\n      const copyNode = node.copyNode;\r\n      this.endTarget = this.getTargetIsNodes(e.target, copyNode || node.tool);\r\n      if (!this.endTarget) {\r\n        return;\r\n      }\r\n      const className = this.endTarget && this.endTarget.className;\r\n      if (className.indexOf(\"nodes isSub\") > -1) {\r\n        const node = getObjByTarget(this.nodes, this.endTarget);\r\n        this.$bus.$emit(\"dragToSubNode\", copyNode !== node ? node : null);\r\n      } else {\r\n        this.$bus.$emit(\"dragToSubNode\", null);\r\n      }\r\n      if (copyNode) {\r\n        this.$bus.$emit(`moveCopyNode${copyNode.parentNodeId || \"\"}`, e, copyNode);\r\n      }\r\n    },\r\n    getTargetIsNodes(target, copyNode) {\r\n      const svgRoot = document.querySelector(\".svgRoot\");\r\n      if (!svgRoot.contains(target)) {\r\n        return null;\r\n      }\r\n      // 子流程不能拖动到子流程\r\n      if (copyNode && copyNode.type == \"102\") {\r\n        if (target.className.indexOf(\"nodes isSub\") > -1) {\r\n          return this.getTargetIsNodes(target.parentElement);\r\n        }\r\n      }\r\n      if (target.className.indexOf(\"nodes\") > -1) {\r\n        return target;\r\n      }\r\n      return this.getTargetIsNodes(target.parentElement);\r\n    },\r\n    getBeforeCopyLine(nodes) {\r\n      // 获取拷贝节点之间的线\r\n      let lineIds = [];\r\n      nodes.forEach((item) => {\r\n        lineIds = [...lineIds, ...item.out, ...item.in];\r\n      });\r\n      lineIds = [...new Set(lineIds)]; // 去重\r\n\r\n      let fromNodeIds = [];\r\n      let toNodeIds = [];\r\n      let newLines = [];\r\n      lineIds.forEach((lineId) => {\r\n        let line = getObjById(this.lines, lineId);\r\n        if (!line) {\r\n          return;\r\n        }\r\n        let from;\r\n        if (line.fromType === \"event\") {\r\n          from = getObjById(this.events, line.from);\r\n        } else {\r\n          from = getObjById(nodes, line.from);\r\n        }\r\n        const to = getObjById(nodes, line.to);\r\n        if (from && to) {\r\n          // 保证是节点之间的线\r\n          const newLine = deepClone(line);\r\n          newLine.id = tools.uuid();\r\n          fromNodeIds.push({ line: newLine, nodeId: from.id });\r\n          toNodeIds.push({ line: newLine, nodeId: to.id });\r\n          newLines.push(newLine);\r\n        }\r\n      });\r\n      return {\r\n        fromNodeIds,\r\n        toNodeIds,\r\n        newLines,\r\n      };\r\n    },\r\n    resetLineFromAndTo(fromNodeIds, toNodeIds, newNode, copyNode) {\r\n      if (fromNodeIds.length > 0) {\r\n        fromNodeIds.forEach((item) => {\r\n          if (item.nodeId === copyNode.id) {\r\n            newNode.in.push(item.line.id);\r\n            item.line.from = newNode.id;\r\n          }\r\n        });\r\n      }\r\n      if (toNodeIds.length > 0) {\r\n        toNodeIds.forEach((item) => {\r\n          if (item.nodeId === copyNode.id) {\r\n            newNode.out.push(item.line.id);\r\n            item.line.to = newNode.id;\r\n          }\r\n        });\r\n      }\r\n    },\r\n    copyEventsLines(newLines) {\r\n      newLines.forEach((line) => {\r\n        if (line.fromType === \"event\") {\r\n          // 边界事件\r\n          const event = getObjById(this.events, line.from, \"fromId\");\r\n          if (event) {\r\n            delete event.fromId;\r\n            line.from = event.id;\r\n          } else {\r\n            line.from = null;\r\n          }\r\n        }\r\n        if (line.from && line.to) {\r\n          this.$bus.$emit(\"addLine\", {\r\n            id: line.id,\r\n            type: line.type,\r\n            name: line.name,\r\n            from: line.from,\r\n            fromType: line.fromType,\r\n            to: line.to,\r\n            linkInfo: line.linkInfo,\r\n          });\r\n        }\r\n      });\r\n    },\r\n    nodesMoveEnd(e) {\r\n      if (this.copyNodes && this.copyNodes.length > 0) {\r\n        const nodes = this.copyNodes.map((item) => item.copyNode);\r\n        const { fromNodeIds, toNodeIds, newLines } = this.getBeforeCopyLine(nodes);\r\n        const displacement = this.getDisplacement(e);\r\n        const selectedList = [];\r\n        let isMove;\r\n        this.copyNodes.forEach((node) => {\r\n          const copyNode = node.copyNode;\r\n          const offset = node.offset;\r\n          const end = {\r\n            pageX: node.point.x + displacement.x,\r\n            pageY: node.point.y + displacement.y,\r\n          };\r\n          const newNode = this.nodeMoveEnd(end, node);\r\n          if (newNode.id === copyNode.id) {\r\n            isMove = true;\r\n          } else {\r\n            this.resetLineFromAndTo(fromNodeIds, toNodeIds, newNode, copyNode);\r\n          }\r\n          this.checked = newNode;\r\n          selectedList.push(newNode);\r\n        });\r\n        if (!isMove) {\r\n          this.copyEventsLines(newLines);\r\n        }\r\n        // 选中拷贝后的节点\r\n        this.$store.commit(\"flow/setSelectedList\", selectedList);\r\n      }\r\n      this.isCopyNodes = false;\r\n      this.copyNodesPos = null;\r\n      this.copyNodes = [];\r\n      this.$bus.$emit(\"isMoveNode\", false);\r\n    },\r\n    nodeMoveEnd(e, node) {\r\n      let newNode, point, isMove, fromCopyId;\r\n      // 节点的拖动\r\n      const copyNode = node && node.copyNode;\r\n      if (copyNode) {\r\n        const offset = node.offset;\r\n        // 从子流程中拖到流程中\r\n        if (copyNode.parentNodeId) {\r\n          // 删除子流程的节点\r\n          this.deleteNode(copyNode);\r\n          delete copyNode.id;\r\n          delete copyNode.parentNodeId;\r\n          delete copyNode.point;\r\n          point = Object.assign(copyNode, {\r\n            x: e.pageX - offset.x * this.scale > copyNode.padding ? e.pageX - offset.x * this.scale : copyNode.padding,\r\n            y: e.pageY - offset.y * this.scale > copyNode.padding ? e.pageY - offset.y * this.scale : copyNode.padding,\r\n            mouseConvert: true,\r\n          });\r\n        } else {\r\n          // 流程位置移动\r\n          const mp = this.$store.getters[\"flow/getMousePointByCanvas\"]({\r\n            x: e.pageX - offset.x * this.scale,\r\n            y: e.pageY - offset.y * this.scale,\r\n          });\r\n          // let p = getGridPoint(mp);\r\n          let p = mp;\r\n          p = {\r\n            x: p.x > copyNode.padding ? p.x : copyNode.padding,\r\n            y: p.y > copyNode.padding ? p.y : copyNode.padding,\r\n          };\r\n          // 按住ctrl 就是复制\r\n          if (this.isCtrlKey) {\r\n            // 复制一个节点\r\n            fromCopyId = copyNode.id;\r\n            const id = tools.uuid();\r\n            const newNode = JSON.parse(JSON.stringify(copyNode));\r\n            point = Object.assign({}, newNode, {\r\n              id: id,\r\n              out: [],\r\n              in: [],\r\n              x: p.x,\r\n              y: p.y,\r\n            });\r\n            point.attributes.BaseInfo.ID = id;\r\n          } else {\r\n            // 缩放后的坐标\r\n            p = {\r\n              x: p.x / this.scale,\r\n              y: p.y / this.scale,\r\n            };\r\n            // 只是移动位置\r\n            p = getGridPoint(p);\r\n            copyNode.point.x = p.x;\r\n            copyNode.point.y = p.y;\r\n            this.$bus.$emit(\"nodeMove\", copyNode);\r\n            isMove = true;\r\n          }\r\n        }\r\n      }\r\n      if (!isMove) {\r\n        // 从环节类型中拖动到流程\r\n        const type = e.target && e.target.getAttribute(\"nodetype\");\r\n        const sort = e.target && e.target.getAttribute(\"sort\");\r\n        point = point || {\r\n          type: type,\r\n          sort: sort,\r\n          x: e.pageX,\r\n          y: e.pageY,\r\n          mouseConvert: true,\r\n        };\r\n        newNode = this.copyNodeNext(point, fromCopyId, copyNode);\r\n        // this.nodes.push(newNode);\r\n        // if(fromCopyId) {\r\n        //   // 节点复制后 复制边界事件\r\n        //   this.copyNodeEvent(fromCopyId, newNode);\r\n        // }\r\n        // // 子流程拷贝后 子节点复制\r\n        // if(copyNode && copyNode.nodes && copyNode.nodes.length > 0) {\r\n        //   newNode.nodes = [];\r\n        //   copyNode.nodes.forEach(item => {\r\n        //     const subNode = deepClone(item);\r\n        //     const subPoint = Object.assign({\r\n        //       x: subNode.point.x,\r\n        //       y: subNode.point.y,\r\n        //     }, subNode);\r\n        //     newNode.nodes.push(this.addSubNode(subPoint, newNode));\r\n        //   });\r\n        // }\r\n      }\r\n      document.body.removeChild(node);\r\n      this.resize();\r\n      return isMove ? copyNode : newNode;\r\n    },\r\n    copyNodeNext(point, fromCopyId, copyNode) {\r\n      const node = this.addNode(point);\r\n      this.nodes.push(node);\r\n      if (fromCopyId) {\r\n        // 节点复制后 复制边界事件\r\n        this.copyNodeEvent(fromCopyId, node);\r\n      }\r\n      // 子流程拷贝后 子节点复制\r\n      if (copyNode && copyNode.nodes && copyNode.nodes.length > 0) {\r\n        node.nodes = [];\r\n        copyNode.nodes.forEach((item) => {\r\n          const subNode = deepClone(item);\r\n          const subPoint = Object.assign(\r\n            {\r\n              x: subNode.point.x,\r\n              y: subNode.point.y,\r\n            },\r\n            subNode\r\n          );\r\n          node.nodes.push(this.addSubNode(subPoint, node));\r\n        });\r\n      }\r\n      return node;\r\n    },\r\n    dragToolEnd(e) {\r\n      if (this.endTarget) {\r\n        const className = this.endTarget && this.endTarget.className;\r\n        if (className.indexOf(\"nodes isSub\") > -1) {\r\n          const node = getObjByTarget(this.nodes, this.endTarget);\r\n          if (node) {\r\n            let point, isMove;\r\n            // 节点的拖动\r\n            if (this.dragNode && this.dragNode.copyNode) {\r\n              const copyNode = this.dragNode.copyNode;\r\n              const offset = this.dragNode.offset;\r\n              // 从流程中拖到子流程中 或者子流程到宁外一个子流程\r\n              if (!copyNode.parentNodeId || (copyNode.parentNodeId && copyNode.parentNodeId !== node.id)) {\r\n                point = Object.assign(copyNode, {\r\n                  x:\r\n                    e.pageX - offset.x * this.scale > copyNode.padding\r\n                      ? e.pageX - offset.x * this.scale\r\n                      : copyNode.padding,\r\n                  y:\r\n                    e.pageY - offset.y * this.scale > copyNode.padding\r\n                      ? e.pageY - offset.y * this.scale\r\n                      : copyNode.padding,\r\n                  mouseConvert: true,\r\n                });\r\n                this.deleteNode(copyNode);\r\n                delete copyNode.id;\r\n              } else {\r\n                // 在当前子流程中 只是位置移动\r\n                point = {\r\n                  x: e.pageX - offset.x * this.scale,\r\n                  y: e.pageY - offset.y * this.scale,\r\n                  mouseConvert: true,\r\n                };\r\n                const options = this.getOptions(point);\r\n                copyNode.point.x = options.x - node.point.x;\r\n                // 子节点相对于父节点的位置\r\n                copyNode.point.y = options.y - node.point.y - node.imgHeight - node.padding * 2;\r\n                this.$bus.$emit(`nodeMove${copyNode.parentNodeId}`, copyNode);\r\n                isMove = true;\r\n              }\r\n            }\r\n            if (!isMove) {\r\n              // 从环节类型中拖动到子流程\r\n              const type = e.target && e.target.getAttribute(\"nodetype\");\r\n              const sort = e.target && e.target.getAttribute(\"sort\");\r\n              point = point || {\r\n                type: type,\r\n                sort: sort,\r\n                x: e.pageX,\r\n                y: e.pageY,\r\n                mouseConvert: true,\r\n              };\r\n              const subNode = this.addSubNode(point, node);\r\n              node.nodes ? node.nodes.push(subNode) : this.$set(node, \"nodes\", [subNode]);\r\n              this.$set(node, \"lines\", node.lines || []);\r\n              this.$set(node, \"events\", node.events || []);\r\n              this.nodeResize(node);\r\n              // this.checked = subNode;\r\n            }\r\n          }\r\n          document.body.removeChild(this.dragNode);\r\n        } else if (className.indexOf(\"nodes\") > -1) {\r\n          this.checked = this.nodeMoveEnd(e, this.dragNode);\r\n          this.$store.commit(\"flow/setSelectedList\", [this.checked]);\r\n        }\r\n      } else {\r\n        document.body.removeChild(this.dragNode);\r\n      }\r\n      this.dragNode = null;\r\n      this.$bus.$emit(\"isMoveNode\", false);\r\n    },\r\n    dragBoundaryEvent(ev, event) {\r\n      ev.dataTransfer.setDragImage(new Image(), 0, 0); // 设置 拖动背景图为空\r\n      this.dragEvent = ev.target.cloneNode(true);\r\n      this.dragEvent.className = \"ds_tool_event_drag\";\r\n      this.dragEvent.setAttribute(\"draggable\", false);\r\n      const cloneTool = deepClone(event);\r\n      this.cloneObj = new BoundaryEvent(cloneTool, ev);\r\n      Object.assign(this.dragEvent.style, {\r\n        position: \"absolute\",\r\n        zIndex: 9999,\r\n        width: this.toPx(this.cloneObj.width),\r\n        height: this.toPx(this.cloneObj.height),\r\n        top: this.toPx(ev.pageY - ev.offsetY),\r\n        left: this.toPx(ev.pageX - ev.offsetX),\r\n        pointerEvents: \"none\",\r\n        transform: `scale(${this.scale}) translateZ(0px)`,\r\n        transformOrigin: \"left top\",\r\n      });\r\n      document.body.appendChild(this.dragEvent);\r\n      this.$bus.$emit(\"startMoveEvent\", this.dragEvent);\r\n    },\r\n    dragEventOver(e) {\r\n      if (this.dragEvent) {\r\n        // 拖动边界事件\r\n        const comp = this.computedPoint(e, this.dragEvent);\r\n        if (\r\n          Array.from(e.target.classList).indexOf(\"task-node\") > -1 ||\r\n          Array.from(e.target.parentElement).indexOf(\"node\")\r\n        ) {\r\n          const parentAndSub = getObjByParentTarget(this.nodes, \"nodes\", e.target);\r\n          if (parentAndSub) {\r\n            const parentNode = parentAndSub.parent;\r\n            const subNode = parentAndSub.sub;\r\n            this.crashNode = subNode;\r\n            let points = this.$store.getters[\"flow/getPoints\"](subNode.id);\r\n            if (!points) {\r\n              this.$store.commit(\"flow/setPointsByNode\", {\r\n                node: subNode,\r\n                obj: this.cloneObj,\r\n              });\r\n              points = this.$store.getters[\"flow/getPoints\"](subNode.id);\r\n            }\r\n            const subComp = {\r\n              point: {\r\n                x: comp.point.x - parentNode.point.x * this.scale,\r\n                y:\r\n                  comp.point.y -\r\n                  (parentNode.point.y + parentNode.padding + parentNode.imgHeight + parentNode.padding * 2) *\r\n                    this.scale,\r\n              },\r\n            };\r\n            const point = this.getPoint(subComp, points, this.distance);\r\n            if (point) {\r\n              this.cloneObj = Object.assign(this.cloneObj, point, {\r\n                parentNode,\r\n              });\r\n              let getPoint = this.$store.getters[\"flow/getMousePointByPoint\"](point.point);\r\n              getPoint.x = getPoint.x + parentNode.point.x * this.scale;\r\n              getPoint.y =\r\n                getPoint.y + (parentNode.point.y + parentNode.imgHeight + parentNode.padding * 2) * this.scale;\r\n              this.dragEvent.style.top = this.toPx(getPoint.y);\r\n              this.dragEvent.style.left = this.toPx(getPoint.x);\r\n              return;\r\n            }\r\n          }\r\n          const node = getObjByTarget(this.nodes, e.target);\r\n          // 父节点吸附\r\n          if (node) {\r\n            this.crashNode = node;\r\n            let points = this.$store.getters[\"flow/getPoints\"](node.id);\r\n            if (!points) {\r\n              this.$store.commit(\"flow/setPointsByNode\", {\r\n                node,\r\n                obj: this.cloneObj,\r\n              });\r\n              points = this.$store.getters[\"flow/getPoints\"](node.id);\r\n            }\r\n            const point = this.getPoint(comp, points, this.distance);\r\n            if (point) {\r\n              this.cloneObj = Object.assign(this.cloneObj, point);\r\n              const getPoint = this.$store.getters[\"flow/getMousePointByPoint\"](point.point);\r\n              this.dragEvent.style.top = this.toPx(getPoint.y);\r\n              this.dragEvent.style.left = this.toPx(getPoint.x);\r\n              return;\r\n            }\r\n          }\r\n        }\r\n        this.dragEvent.style.top = this.toPx(e.pageY);\r\n        this.dragEvent.style.left = this.toPx(e.pageX);\r\n      }\r\n    },\r\n    dragEventEnd(e) {\r\n      if (e.type === \"drop\") {\r\n        e = event ? event : e;\r\n        e.preventDefault();\r\n      } else {\r\n        if (event.touches) {\r\n          e = event.touches[0] ? event.touches[0] : event;\r\n        }\r\n      }\r\n      if (!this.crashNode) {\r\n        return;\r\n      }\r\n      const points = this.$store.getters[\"flow/getPoints\"](this.crashNode.id);\r\n      let obj = this.computedPoint(e, this.cloneObj);\r\n      if (this.cloneObj.parentNode) {\r\n        const parentNode = this.cloneObj.parentNode;\r\n        obj = {\r\n          point: {\r\n            x: obj.point.x - parentNode.point.x * this.scale,\r\n            y:\r\n              obj.point.y -\r\n              (parentNode.point.y + parentNode.padding + parentNode.imgHeight + parentNode.padding * 2) * this.scale,\r\n          },\r\n        };\r\n      }\r\n      const point = this.getPoint(obj, points, this.distance);\r\n      if (point) {\r\n        // 删除吸附点\r\n        points.splice(points.indexOf(point), 1);\r\n        // 当前node上面移动位置\r\n        if (this.cloneObj.from) {\r\n          const events = this.cloneObj.parentNode ? this.cloneObj.parentNode.events : this.events;\r\n          events.forEach((item) => {\r\n            if (item.id === this.cloneObj.from) {\r\n              // 恢复可吸附点\r\n              this.$store.commit(\"flow/addPoint\", {\r\n                id: this.cloneObj.nodeId,\r\n                obj: {\r\n                  point: {\r\n                    x: item.point.x,\r\n                    y: item.point.y,\r\n                  },\r\n                  index: item.index,\r\n                  direction: item.direction,\r\n                },\r\n              });\r\n            }\r\n          });\r\n          this.deleteEvent(this.cloneObj.from, events);\r\n          this.cloneObj.id = this.cloneObj.from;\r\n          delete this.cloneObj.from;\r\n        }\r\n        // 最后位置\r\n        this.cloneObj = Object.assign(this.cloneObj, point);\r\n        this.cloneObj.point.x = this.cloneObj.point.x / this.scale;\r\n        this.cloneObj.point.y = this.cloneObj.point.y / this.scale;\r\n        this.cloneObj.nodeId = this.crashNode.id;\r\n        this.addNewEvent(this.cloneObj);\r\n        this.checked = this.cloneObj;\r\n        if (this.cloneObj.out && this.cloneObj.out.length > 0) {\r\n          this.$bus.$emit(`eventMove${this.cloneObj.parentNode ? this.cloneObj.parentNode.id : \"\"}`, this.cloneObj);\r\n          // this.$bus.$emit(\"eventMove\", this.cloneObj);\r\n        }\r\n      }\r\n    },\r\n    addNewEvent(cloneObj) {\r\n      if (cloneObj.parentNode) {\r\n        this.nodes.forEach((node) => {\r\n          if (cloneObj.parentNode && cloneObj.parentNode.id === node.id) {\r\n            node.events.push(cloneObj);\r\n          }\r\n        });\r\n      } else {\r\n        this.events.push(cloneObj);\r\n      }\r\n    },\r\n    dragCloneEvent(e, event) {\r\n      const copyEvent = deepClone(event);\r\n      copyEvent.from = event.id;\r\n      copyEvent.id = tools.uuid();\r\n      this.dragBoundaryEvent(e, copyEvent);\r\n    },\r\n    // 节点拷贝后 拷贝边界事件\r\n    copyNodeEvent(fromCopyId, node) {\r\n      let copyEvents = [];\r\n      this.events.forEach((ev) => {\r\n        if (ev.nodeId === fromCopyId) {\r\n          copyEvents.push(deepClone(ev));\r\n        }\r\n      });\r\n      if (copyEvents.length === 0) {\r\n        return;\r\n      }\r\n      // 获取边界事件坐标点\r\n      this.$store.commit(\"flow/setPointsByNode\", { node, obj: copyEvents[0] });\r\n      const points = this.$store.getters[\"flow/getPoints\"](node.id);\r\n      points.forEach((item) => {\r\n        copyEvents.forEach((ev) => {\r\n          if (ev.direction === item.direction && ev.index === item.index) {\r\n            ev.fromId = ev.id; // 用于画线\r\n            ev.id = tools.uuid();\r\n            ev.point = item.point;\r\n            ev.nodeId = node.id;\r\n            this.addNewEvent(ev);\r\n          }\r\n        });\r\n      });\r\n    },\r\n    getPoint(obj, all, distance) {\r\n      let point;\r\n      let min = 0;\r\n      all.forEach((item) => {\r\n        let realDistance = this.getDistance(item, obj);\r\n        if (realDistance <= distance) {\r\n          if (min < realDistance) {\r\n            min = realDistance;\r\n            point = item;\r\n          }\r\n        }\r\n      });\r\n      return point;\r\n    },\r\n    getDistance(p1, p2) {\r\n      const dis = Math.sqrt(Math.pow(p1.point.x - p2.point.x, 2) + Math.pow(p1.point.y - p2.point.y, 2));\r\n      // console.log(dis);\r\n      return dis;\r\n    },\r\n    computedPoint(e, moveObj) {\r\n      const mp = this.$store.getters[\"flow/getMousePointByCanvas\"]({\r\n        x: e.pageX,\r\n        y: e.pageY,\r\n      });\r\n      return { point: getGridPoint(mp) };\r\n    },\r\n    getOptions(opts) {\r\n      const options = Object.assign(\r\n        {\r\n          id: tools.uuid(),\r\n          type: 1,\r\n        },\r\n        opts\r\n      );\r\n      let p = {\r\n        x: options.x || 0,\r\n        y: options.y || 0,\r\n      };\r\n      if (options.mouseConvert == true) {\r\n        const mp = this.$store.getters[\"flow/getMousePointByCanvas\"]({\r\n          x: options.x,\r\n          y: options.y,\r\n        });\r\n        p.x = mp.x;\r\n        p.y = mp.y;\r\n      }\r\n      p = getGridPoint(p);\r\n      options.x = p.x / this.scale;\r\n      options.y = p.y / this.scale;\r\n      return options;\r\n    },\r\n    // 增加节点\r\n    addNode(opts) {\r\n      const options = this.getOptions(opts);\r\n      const type = options.type;\r\n      options.name =\r\n        options.name || (type === \"201\" ? \"开始\" : type === \"299\" ? \"结束\" : \"\") || \"新建环节\" + this.nodes.length;\r\n      const node = new Node(options);\r\n      return node;\r\n    },\r\n    // 增加子流程子节点\r\n    addSubNode(opts, node) {\r\n      const options = this.getOptions(opts);\r\n      options.name = options.name || \"新建环节\" + ((node.nodes && node.nodes.length) || 0);\r\n      if (options.mouseConvert == true) {\r\n        options.x = options.x - node.point.x;\r\n        // 子节点相对于父节点的位置\r\n        options.y = options.y - node.point.y - node.imgHeight - node.padding * 2;\r\n      }\r\n      let children = new Node(options);\r\n      children.parentNodeId = node.id; // 子流程才有\r\n      return children;\r\n    },\r\n    showSubNode(node) {\r\n      // console.log(node);\r\n      // if(node.open && node.open.show) {\r\n      //   // 展开\r\n      //   this.nodes.forEach(item => {\r\n      //     if(item !== node) {\r\n      //       if(item.point.x > node.point.x + nodeSize.width) {\r\n      //         item.point.x = item.point.x + (node.width - nodeSize.width - node.padding * 2);\r\n      //       }\r\n      //       if(item.point.y > node.point.y + nodeSize.height) {\r\n      //         item.point.y = item.point.y + (node.height - nodeSize.height - node.padding * 2);\r\n      //       }\r\n      //     }\r\n      //   });\r\n      // } else {\r\n      //   // 收起来\r\n      //   this.nodes.forEach(item => {\r\n      //     if(item !== node) {\r\n      //       if(item.point.x > node.point.x + node.open.width) {\r\n      //         item.point.x = item.point.x - (node.open.width - node.width - node.padding * 2);\r\n      //       }\r\n      //       if(item.point.y > node.point.y + node.open.height) {\r\n      //         item.point.y = item.point.y - (node.open.height - node.height - node.padding * 2);\r\n      //       }\r\n      //     }\r\n      //   });\r\n      // }\r\n    },\r\n    // 监听鼠标\r\n    keydown(e) {\r\n      if (this.checked && this.checked.readOnly) {\r\n        return;\r\n      }\r\n      if (e.keyCode == 46) {\r\n        const selectedList = this.$store.state.flow.selectedList || null;\r\n        // 多选才删除\r\n        if (selectedList && selectedList.length > 1) {\r\n          // for(let i = 0; i < selectedList.length; i++) {\r\n          //   let node = selectedList[i];\r\n          //   this.deleteNode(node);\r\n          //   console.log(selectedList);\r\n          // }\r\n          selectedList.forEach((node) => {\r\n            setTimeout(() => {\r\n              this.deleteNode(node);\r\n            }, 0);\r\n          });\r\n        } else if (this.checked instanceof Node) {\r\n          // 删除单个\r\n          this.deleteNode(this.checked);\r\n        } else if (this.checked instanceof Lane) {\r\n          this.$store.commit(\"flow/deleteLane\", this.checked);\r\n          this.resize();\r\n        } else if (this.checked instanceof Line) {\r\n          this.deleteLine(this.checked);\r\n        } else if (this.checked instanceof BoundaryEvent) {\r\n          const obj = this.checked;\r\n          for (let i = obj[\"out\"].length - 1; i >= 0; i--) {\r\n            const l = getObjById(this.lines, obj[\"out\"][i]);\r\n            if (l) {\r\n              this.deleteLine(l);\r\n            }\r\n          }\r\n          const events = this.checked.parentNode ? this.checked.parentNode.events : this.events;\r\n          // 删除单个\r\n          this.deleteEvent(this.checked.id, events);\r\n        }\r\n        this.checked = {};\r\n      }\r\n    },\r\n    deleteNode(node) {\r\n      // 删除子流程节点\r\n      let parentNode;\r\n      if (node.parentNodeId) {\r\n        parentNode = this.nodes.find((item) => node.parentNodeId === item.id);\r\n      }\r\n      const nodes = node.parentNodeId ? parentNode.nodes : this.nodes;\r\n      const lines = node.parentNodeId ? parentNode.lines : this.lines;\r\n      const events = node.parentNodeId ? parentNode.events : this.events;\r\n      const index = nodes.indexOf(node);\r\n      if (index > -1) {\r\n        const obj = node;\r\n        // 删除线\r\n        for (let i = obj[\"out\"].length - 1; i >= 0; i--) {\r\n          const l = getObjById(lines, obj[\"out\"][i]);\r\n          if (l) {\r\n            this.deleteLine(l);\r\n          }\r\n        }\r\n        for (let i = obj[\"in\"].length - 1; i >= 0; i--) {\r\n          const l = getObjById(lines, obj[\"in\"][i]);\r\n          if (l) {\r\n            this.deleteLine(l);\r\n          }\r\n        }\r\n        // 删除边界事件\r\n        for (let i = 0; i < events.length; i++) {\r\n          let nodeId = events[i].nodeId;\r\n          if (nodeId === obj.id) {\r\n            let event = events[i];\r\n            // 删除线\r\n            for (let j = event.out.length - 1; j >= 0; j--) {\r\n              const line = getObjById(this.lines, event.out[j]);\r\n              if (line) {\r\n                this.deleteLine(line);\r\n              }\r\n            }\r\n            events.splice(i, 1);\r\n            i--;\r\n          }\r\n        }\r\n        // 删除节点\r\n        nodes.splice(index, 1);\r\n      }\r\n    },\r\n    deleteLine(line) {\r\n      line.remove();\r\n      // 删除子流程的线\r\n      let parentNode;\r\n      if (line.parentNodeId) {\r\n        parentNode = this.nodes.find((item) => line.parentNodeId === item.id);\r\n      }\r\n      const nodes = line.parentNodeId ? parentNode.nodes : this.nodes;\r\n      const lines = line.parentNodeId ? parentNode.lines : this.lines;\r\n      const index = lines.indexOf(line);\r\n      if (index > -1) {\r\n        this.deleteFromOrOut(nodes, lines, line, index);\r\n      }\r\n    },\r\n    deleteFromOrOut(nodes, lines, line, index) {\r\n      const from = getObjById(nodes, line.from);\r\n      const to = getObjById(nodes, line.to);\r\n      if (from) {\r\n        const f_index = from[\"out\"].indexOf(line.id);\r\n        if (f_index >= 0) {\r\n          from[\"out\"].splice(f_index, 1);\r\n        }\r\n      }\r\n      if (to) {\r\n        const t_index = to[\"in\"].indexOf(line.id);\r\n        if (t_index >= 0) {\r\n          to[\"in\"].splice(t_index, 1);\r\n        }\r\n      }\r\n      lines.splice(index, 1);\r\n      this.$bus.$emit(\"updateIntersection\");\r\n    },\r\n    deleteEvent(id, events) {\r\n      const index = (events ? events : this.events).findIndex((ev) => ev.id === id);\r\n      index > -1 && (events ? events : this.events).splice(index, 1);\r\n      // 恢复可吸附点\r\n      this.$store.commit(\"flow/addPoint\", {\r\n        id: this.checked.nodeId,\r\n        obj: {\r\n          point: {\r\n            x: this.checked.point.x,\r\n            y: this.checked.point.y,\r\n          },\r\n          index: this.checked.index,\r\n          direction: this.checked.direction,\r\n        },\r\n      });\r\n      // this.dragEvent && document.body.removeChild(this.dragEvent);\r\n    },\r\n    // 添加泳道\r\n    addLane(direction, index) {\r\n      this.createLane({\r\n        direction: direction,\r\n        index: index,\r\n      });\r\n    },\r\n    createLane(options) {\r\n      const direction = options.direction;\r\n      options.name = options.name || \"泳道\" + (this.lanes[direction].length + 1);\r\n      options.id = options.id || tools.uuid();\r\n      const lane = new Lane(options);\r\n      const before = this.lanes[direction][(options.index || this.lanes[direction].length) - 1];\r\n      if (direction == LaneDirection.vertical) {\r\n        // 水平方向\r\n        lane.left = before ? before.size + before.left : 0;\r\n      } else {\r\n        // 垂直方向\r\n        lane.top = before ? before.size + before.top : 0;\r\n      }\r\n      this.$store.commit(\"flow/addLane\", {\r\n        direction,\r\n        lane,\r\n        index: options.index,\r\n      });\r\n      this.resize();\r\n    },\r\n    onScroll(e) {\r\n      const target = e.target;\r\n      this.$store.commit(\"flow/setSvgRoot\", {\r\n        scrollTop: target.scrollTop,\r\n        scrollLeft: target.scrollLeft,\r\n      });\r\n    },\r\n    //获取上一步节点\r\n    getFromNodes(node) {\r\n      if (!node[\"in\"] || node[\"in\"].length <= 0) {\r\n        return null;\r\n      }\r\n      var arr = [];\r\n      for (let i = 0; i < node[\"in\"].length; i++) {\r\n        var lineId = node[\"in\"][i];\r\n        var line = getObjById(this.lines, lineId);\r\n        if (line) {\r\n          var fn = getObjById(this.nodes, line.from);\r\n          arr.push(fn);\r\n        }\r\n      }\r\n      return arr;\r\n    },\r\n    //获取下一步节点\r\n    getToNodes(node) {\r\n      if (!node[\"out\"] || node[\"out\"].length <= 0) {\r\n        return null;\r\n      }\r\n      var arr = [];\r\n      for (let i = 0; i < node[\"out\"].length; i++) {\r\n        var lineId = node[\"out\"][i];\r\n        var line = getObjById(this.lines, lineId);\r\n        if (line) {\r\n          var fn = getObjById(this.nodes, line.to);\r\n          arr.push(fn);\r\n        }\r\n      }\r\n      return arr;\r\n    },\r\n    loadElement() {\r\n      if (this.flowInfo && this.flowInfo.ElementList && this.flowInfo.ElementList.length > 0) {\r\n        let nodes = [],\r\n          lines = [],\r\n          lanes = [],\r\n          Nodes = [],\r\n          Lines = [];\r\n        if (this.flowInfo.NodeList) {\r\n          Nodes = Array.isArray(this.flowInfo.NodeList) ? this.flowInfo.NodeList : [this.flowInfo.NodeList];\r\n        }\r\n        if (this.flowInfo.LineList) {\r\n          Lines = Array.isArray(this.flowInfo.LineList) ? this.flowInfo.LineList : [this.flowInfo.LineList];\r\n        }\r\n        if (this.flowInfo.EventList) {\r\n          const EventList = this.flowInfo.EventList;\r\n          for (let i = 0; i < EventList.length; i++) {\r\n            this.events.push(new BoundaryEvent(EventList[i]));\r\n          }\r\n        }\r\n        let dataMap = {};\r\n        for (let i = 0; i < Nodes.length; i++) {\r\n          dataMap[Nodes[i].ID] = Nodes[i];\r\n        }\r\n        for (let i = 0; i < Lines.length; i++) {\r\n          dataMap[Lines[i].ID] = Lines[i];\r\n        }\r\n        this.flowInfo.ElementList = Array.isArray(this.flowInfo.ElementList)\r\n          ? this.flowInfo.ElementList\r\n          : [this.flowInfo.ElementList];\r\n        for (let i = 0; i < this.flowInfo.ElementList.length; i++) {\r\n          let element = this.flowInfo.ElementList[i];\r\n          //节点\r\n          if (element.nodeType == \"node\") {\r\n            nodes.push(element);\r\n          }\r\n          //线\r\n          else if (element.nodeType == \"line\") {\r\n            lines.push(element);\r\n          }\r\n          //泳道\r\n          else if (element.nodeType == \"lane\") {\r\n            lanes.push(element);\r\n          }\r\n        }\r\n        for (let i = 0; i < nodes.length; i++) {\r\n          let node = nodes[i];\r\n          node[\"in\"] = Array.isArray(node[\"in\"]) ? node[\"in\"] : node[\"in\"] ? [node[\"in\"]] : [];\r\n          node[\"out\"] = Array.isArray(node[\"out\"]) ? node[\"out\"] : node[\"out\"] ? [node[\"out\"]] : [];\r\n          node.point.x = parseFloat(node.point.x);\r\n          node.point.y = parseFloat(node.point.y);\r\n          node = Object.assign(\r\n            {\r\n              x: node.point.x,\r\n              y: node.point.y,\r\n            },\r\n            node\r\n          );\r\n          flowTools.forEach((tool) => {\r\n            tool.data.forEach((item) => {\r\n              if (node.attributes.BaseInfo.Type == item.type) {\r\n                node.attributes.BaseInfo.Type = item.name;\r\n              }\r\n            });\r\n          });\r\n          const newNode = this.addNode(node);\r\n          this.nodes.push(newNode);\r\n          if (node.nodes) {\r\n            // 显示子节点\r\n            const subNodes = node.nodes;\r\n            this.$set(newNode, \"nodes\", []);\r\n            subNodes.forEach((item) => {\r\n              item = Object.assign(\r\n                {\r\n                  x: item.point.x,\r\n                  y: item.point.y,\r\n                },\r\n                item\r\n              );\r\n              newNode.nodes.push(this.addSubNode(item, newNode));\r\n            });\r\n            this.$set(newNode, \"lines\", []);\r\n            this.$set(newNode, \"events\", []);\r\n          }\r\n          if (node.events) {\r\n            node.events.forEach((event) => {\r\n              let newEvent = new BoundaryEvent(event);\r\n              newEvent.parentNode = node;\r\n              newNode.events.push(newEvent);\r\n            });\r\n          }\r\n          if (node.lines) {\r\n            node.lines.forEach((line) => {\r\n              if (line.linkInfo) {\r\n                line.linkInfo.fromOffset = parseFloat(line.linkInfo.fromOffset);\r\n                line.linkInfo.toOffset = parseFloat(line.linkInfo.toOffset);\r\n              }\r\n              // 加到队列里面 等页面渲染后再发通知\r\n              setTimeout(() => {\r\n                this.$bus.$emit(`addLine${node.id}`, {\r\n                  id: line.id,\r\n                  type: line.type,\r\n                  name: line.name,\r\n                  path: line.path,\r\n                  from: line.from,\r\n                  fromType: line.fromType,\r\n                  to: line.to,\r\n                  linkInfo: line.linkInfo,\r\n                  attributes: line.attributes,\r\n                });\r\n              }, 0);\r\n            });\r\n          }\r\n        }\r\n        for (let j = 0; j < lines.length; j++) {\r\n          let line = lines[j];\r\n          let attributes = {};\r\n          if (dataMap[line.id]) {\r\n            attributes = dataMap[line.id];\r\n          }\r\n          if (line.linkInfo) {\r\n            line.linkInfo.fromOffset = parseFloat(line.linkInfo.fromOffset);\r\n            line.linkInfo.toOffset = parseFloat(line.linkInfo.toOffset);\r\n          }\r\n          this.$bus.$emit(\"addLine\", {\r\n            id: line.id,\r\n            type: line.type,\r\n            name: line.name,\r\n            path: line.path,\r\n            from: line.from,\r\n            fromType: line.fromType,\r\n            isHide: line.isHide,\r\n            to: line.to,\r\n            linkInfo: line.linkInfo,\r\n            attributes: line.attributes,\r\n          });\r\n        }\r\n        // this.lanes = lanes;\r\n        for (let i = 0; i < lanes.length; i++) {\r\n          let lane = lanes[i];\r\n          this.createLane({\r\n            id: lane.id,\r\n            name: lane.name,\r\n            size: lane.size,\r\n            index: lane.index,\r\n            direction: lane.direction,\r\n            attributes: lane.attributes,\r\n          });\r\n        }\r\n      }\r\n      this.resize();\r\n    },\r\n    // 保存\r\n    doSave() {\r\n      // var loadingIndex = dsf.layer.loadding();\r\n      flow.attributes.BaseInfo.ID = this.xmlId;\r\n      let postData = {\r\n        WorkFlow: {\r\n          BaseInfo: flow.attributes.BaseInfo,\r\n          NodeList: [],\r\n          LineList: [],\r\n          EventList: [],\r\n          LaneList: {\r\n            horizontal: [],\r\n            vertical: [],\r\n          },\r\n          ElementList: [],\r\n        },\r\n      };\r\n      this.nodes.forEach((node) => {\r\n        if (node.lines) {\r\n          let nodeLines = dsf.mix(true, [], node.lines);\r\n          node.lines = nodeLines.map((line) => {\r\n            delete line.paper;\r\n            return line;\r\n          });\r\n        }\r\n        if (node.events) {\r\n          node.events = node.events.map((item) => {\r\n            item.parentNodeId = item.parentNode.id;\r\n            delete item.parentNode;\r\n            return { ...item };\r\n          });\r\n        }\r\n      });\r\n      const info = {\r\n        nodes: [...JSON.parse(JSON.stringify(this.nodes))],\r\n        lanes: { ...this.lanes },\r\n        lines: [...this.lines],\r\n        events: [...this.events],\r\n      };\r\n\r\n      //深度复制对象作为流程引擎使用\r\n      let infoCopy = dsf.mix(true, {}, info);\r\n      const copyMap = this.getFlowAllObjectMap(infoCopy);\r\n\r\n      let temp = [],\r\n        deleteLines = [];\r\n      //判断节点特殊操作\r\n      for (let i = 0; i < infoCopy.nodes.length; i++) {\r\n        let node = infoCopy.nodes[i];\r\n        //如果为判断节点 开始\r\n        if (node.type == \"6\") {\r\n          //获取该节点的上一步节点\r\n          let fromNodearr = [],\r\n            toNodearr = [];\r\n          let arr = this.getFromNodes(node);\r\n          if (arr) {\r\n            for (let n = 0; n < arr.length; n++) {\r\n              let nc = arr[n];\r\n              fromNodearr.push(copyMap[nc.id]);\r\n            }\r\n          }\r\n          //获取该节点的下一步个节点\r\n          arr = this.getToNodes(node);\r\n          if (arr) {\r\n            for (let n = 0; n < arr.length; n++) {\r\n              let nc = arr[n];\r\n              toNodearr.push(copyMap[nc.id]);\r\n            }\r\n          }\r\n          const obj = {\r\n            node: node,\r\n            from: fromNodearr,\r\n            to: toNodearr,\r\n          };\r\n          temp.push(obj);\r\n        }\r\n      }\r\n      for (let i = 0; i < temp.length; i++) {\r\n        let obj = temp[i];\r\n        let node = obj.node;\r\n        //判断有没有下一步节点\r\n        if (obj.node[\"out\"].length > 0) {\r\n          //将判断节点的的出线全部复制给上一步的节点\r\n          for (let c = 0; c < obj.from.length; c++) {\r\n            let fn = obj.from[c];\r\n            for (let n = 0; n < obj.node[\"out\"].length; n++) {\r\n              let lineId = obj.node[\"out\"][n];\r\n              let line_copy = Object.assign(true, {}, copyMap[lineId]);\r\n              line_copy.attributes.ID = line_copy.id + \"_\" + fn.id;\r\n              line_copy.attributes.StartNodeID = fn.id;\r\n              infoCopy.lines.push(line_copy);\r\n              deleteLines.push(lineId);\r\n            }\r\n            fn.attributes.OutLine.SendConditions = obj.node.attributes.OutLine.SendConditions;\r\n            let rfn = getObjById(this.nodes, fn.id);\r\n            if (rfn) {\r\n              rfn.attributes.OutLine.SendConditions = obj.node.attributes.OutLine.SendConditions;\r\n            }\r\n          }\r\n          //删除判断节点入线\r\n          for (let c = 0; c < obj.node[\"in\"].length; c++) {\r\n            deleteLines.push(obj.node[\"in\"][c]);\r\n          }\r\n        } else {\r\n          for (let c = 0; c < obj.from.length; c++) {\r\n            let fn = obj.from[c];\r\n            fn.attributes.OutLine.SendConditions = {\r\n              IsEnabled: \"0\",\r\n            };\r\n            let rfn = getObjById(this.nodes, fn.id);\r\n            if (rfn) {\r\n              rfn.attributes.OutLine.SendConditions = {\r\n                IsEnabled: \"0\",\r\n              };\r\n            }\r\n          }\r\n        }\r\n      }\r\n      //删除多余的线\r\n      for (let i = 0; i < deleteLines.length; i++) {\r\n        for (let n = infoCopy.lines.length - 1; n >= 0; n--) {\r\n          if (infoCopy.lines[n].attributes.ID == deleteLines[i]) {\r\n            infoCopy.lines.splice(n, 1);\r\n          }\r\n        }\r\n      }\r\n      //判断节点特殊操作 结束\r\n      for (let i = 0; i < infoCopy.nodes.length; i++) {\r\n        let node = infoCopy.nodes[i];\r\n        // if (node.lines) {\r\n        //   node.lines.forEach((line) => {\r\n        //     delete line.paper;\r\n        //   });\r\n        // }\r\n        // if (node.events) {\r\n        //   node.events.forEach((node) => {\r\n        //     node.parentNodeId = node.parentNodeId || node.parentNode.id;\r\n        //     delete node.parentNode;\r\n        //   });\r\n        // }\r\n        if (node.nodes) {\r\n          node.nodes.forEach((child) => {\r\n            delete child.isRender;\r\n            delete child.edit;\r\n          });\r\n        }\r\n\r\n        flowTools.forEach((tool) => {\r\n          tool.data.forEach((item) => {\r\n            if (node.attributes.BaseInfo.Type == item.name) {\r\n              node.attributes.BaseInfo.Type = item.type;\r\n            }\r\n          });\r\n        });\r\n        postData.WorkFlow.NodeList.push(node.attributes);\r\n        node.nodeType = \"node\";\r\n        postData.WorkFlow.ElementList.push(node);\r\n      }\r\n      for (let i = 0; i < infoCopy.lines.length; i++) {\r\n        let line = infoCopy.lines[i];\r\n        delete line.paper;\r\n        postData.WorkFlow.LineList.push(line.attributes);\r\n        //整理传递给后台的保存参数\r\n        delete line.arrowEnd;\r\n        delete line.isRender;\r\n        line.nodeType = \"line\";\r\n        postData.WorkFlow.ElementList.push(line);\r\n      }\r\n      for (let i = 0; i < infoCopy.events.length; i++) {\r\n        let event = infoCopy.events[i];\r\n        postData.WorkFlow.EventList.push(event.attributes);\r\n        //整理传递给后台的保存参数\r\n        event.nodeType = \"event\";\r\n        postData.WorkFlow.ElementList.push(event);\r\n      }\r\n\r\n      for (let i = 0; i < info.lanes.horizontal.length; i++) {\r\n        let lane = info.lanes.horizontal[i];\r\n        let n = deepClone(lane);\r\n        delete n.isRender;\r\n        postData.WorkFlow.LaneList.horizontal.push(lane.attributes);\r\n        n.nodeType = \"lane\";\r\n        postData.WorkFlow.ElementList.push(n);\r\n      }\r\n      for (let i = 0; i < info.lanes.vertical.length; i++) {\r\n        let lane = info.lanes.vertical[i];\r\n        let n = deepClone(lane);\r\n        delete n.isRender;\r\n        postData.WorkFlow.LaneList.vertical.push(lane.attributes);\r\n        n.nodeType = \"lane\";\r\n        postData.WorkFlow.ElementList.push(n);\r\n      }\r\n      const param = {\r\n        sData: JSON.stringify(postData),\r\n      };\r\n      this.$http\r\n        .post(\"wfm/saveWFDefinition\", param)\r\n        .done((result) => {\r\n          if (result.success) {\r\n            dsf.layer.message(\"保存成功\", true);\r\n          } else {\r\n            dsf.layer.message(\"保存失败\", false);\r\n          }\r\n        })\r\n        .error(() => {\r\n          dsf.layer.message(\"保存失败\", false);\r\n        });\r\n    },\r\n    getFlowAllObjectMap(info) {\r\n      var dm = {};\r\n      for (let i = 0; i < info.nodes.length; i++) {\r\n        var node = info.nodes[i];\r\n        dm[node.id] = node;\r\n      }\r\n      for (let i = 0; i < info.lines.length; i++) {\r\n        var line = info.lines[i];\r\n        dm[line.id] = line;\r\n      }\r\n      for (let i = 0; i < info.lanes.horizontal.length; i++) {\r\n        var lane = info.lanes.horizontal[i];\r\n        dm[lane.id] = lane;\r\n      }\r\n      for (let i = 0; i < info.lanes.vertical.length; i++) {\r\n        var lane = info.lanes.vertical[i];\r\n        dm[lane.id] = lane;\r\n      }\r\n      return dm;\r\n    },\r\n    drawLine() {\r\n      this.isDrawLine = !this.isDrawLine;\r\n    },\r\n    resize() {\r\n      const minWidth = this.$store.state.flow.page.width;\r\n      const minHeight = this.$store.state.flow.page.height;\r\n      const width = minWidth || 0;\r\n      const height = minHeight || 0;\r\n\r\n      const lastV = this.lanes.vertical[this.lanes.vertical.length - 1];\r\n      // 水平方向泳道标题的宽度\r\n      const horizontalWidth = this.$store.getters[\"flow/lanesWidth\"];\r\n      // 泳道水平长度超出\r\n      if (lastV && lastV.size + lastV.left + horizontalWidth > width) {\r\n        this.width = lastV.size + lastV.left + horizontalWidth;\r\n      } else {\r\n        this.width = minWidth;\r\n      }\r\n\r\n      const lastH = this.lanes.horizontal[this.lanes.horizontal.length - 1];\r\n      // 垂直方向泳道标题的宽度\r\n      const verticalHeight = this.$store.getters[\"flow/lanesHeight\"];\r\n      // 泳道垂直长度超出\r\n      if (lastH && lastH.size + lastH.top + verticalHeight > height) {\r\n        this.height = lastH.size + lastH.top + verticalHeight;\r\n      } else {\r\n        this.height = minHeight;\r\n      }\r\n\r\n      // 和最长的节点宽度比较\r\n      let maxWidth = 0;\r\n      let maxHeigth = 0;\r\n      this.nodes.forEach((node) => {\r\n        if (node.width + node.point.x + node.padding * 2 > maxWidth) {\r\n          maxWidth = node.width + node.point.x + node.padding * 2;\r\n        }\r\n        if (node.height + node.point.y + node.padding * 2 + 20 > maxHeigth) {\r\n          maxHeigth = node.height + node.point.y + node.padding * 2 + 20;\r\n        }\r\n      });\r\n      this.width = this.width > maxWidth ? this.width : maxWidth;\r\n      this.height = this.height > maxHeigth ? this.height : maxHeigth;\r\n    },\r\n    nodeResize(node) {\r\n      // 和最长的节点宽度比较\r\n      let maxWidth = 0;\r\n      let maxHeigth = 0;\r\n      node.nodes.forEach((item) => {\r\n        if (item.width + item.point.x + item.padding * 2 > maxWidth) {\r\n          maxWidth = item.width + item.point.x + item.padding * 2;\r\n        }\r\n        if (item.height + item.point.y + item.padding * 2 + 20 + node.imgHeight + node.padding * 2 > maxHeigth) {\r\n          // 节点高度 + 节点纵坐标 + padding + 名称高度 + 父节点占用高度\r\n          maxHeigth = item.height + item.point.y + item.padding * 2 + 20 + node.imgHeight + node.padding * 2;\r\n        }\r\n      });\r\n      node.width = node.width > maxWidth ? node.width : maxWidth;\r\n      node.height = node.height > maxHeigth ? node.height : maxHeigth;\r\n      this.$bus.$emit(\"nodeMove\", node);\r\n    },\r\n    autoScroll(arg) {\r\n      let point = null;\r\n      const type = arg.type;\r\n      if (type == \"node\") {\r\n        point = arg.point;\r\n        if (arg.mouse.x > this.width / 2) {\r\n          point.x = point.x + arg.data.width + this.maxSizeOffset;\r\n        } else {\r\n          point.x = point.x;\r\n        }\r\n        if (arg.mouse.y > this.height / 2) {\r\n          point.y = point.y + arg.data.height + this.maxSizeOffset;\r\n        } else {\r\n          point.y = point.y;\r\n        }\r\n      } else if (type == \"line\") {\r\n        point = this.$store.getters[\"flow/getMousePointByCanvas\"]({\r\n          x: arg.mouse.x,\r\n          y: arg.mouse.y,\r\n        });\r\n        if (arg.mouse.x > this.width / 2) {\r\n          point.x = point.x + this.maxSizeOffset;\r\n        } else {\r\n          point.x = point.x - this.maxSizeOffset;\r\n        }\r\n        if (arg.mouse.y > this.height / 2) {\r\n          point.y = point.y + this.maxSizeOffset;\r\n        } else {\r\n          point.y = point.y - this.maxSizeOffset;\r\n        }\r\n      } else if (type == \"lane\") {\r\n        point = this.$store.getters[\"flow/getMousePointByCanvas\"]({\r\n          x: arg.mouse.x,\r\n          y: arg.mouse.y,\r\n        });\r\n        if (arg.mouse.x > this.width / 2) {\r\n          point.x = point.x + this.maxSizeOffset;\r\n        } else {\r\n          point.x = point.x;\r\n        }\r\n        if (arg.mouse.y > this.height / 2) {\r\n          point.y = point.y + this.maxSizeOffset;\r\n        } else {\r\n          point.y = point.y;\r\n        }\r\n      }\r\n      //滚动条自动回滚\r\n      let parentElement = this.$refs.ds_page;\r\n      let size, scrollLeft, scrollTop;\r\n      if (point.x < parentElement.scrollLeft) {\r\n        size = Math.abs(parentElement.scrollLeft - point.x);\r\n        scrollLeft = parentElement.scrollLeft;\r\n        parentElement.scrollLeft = scrollLeft - size / 3;\r\n      }\r\n      if (point.y < parentElement.scrollTop) {\r\n        size = Math.abs(parentElement.scrollTop - point.y);\r\n        scrollTop = parentElement.scrollTop;\r\n        parentElement.scrollTop = scrollTop - size / 3;\r\n      }\r\n      if (point.h < parentElement.scrollTop) {\r\n        size = Math.abs(parentElement.scrollLeft - point.x);\r\n        scrollLeft = parentElement.scrollLeft;\r\n        parentElement.scrollLeft = scrollLeft - size / 3;\r\n      }\r\n      //滚动条自动延伸\r\n      if (point.x > parentElement.clientWidth + parentElement.scrollLeft) {\r\n        this.width = point.x;\r\n        size = Math.abs(parentElement.clientWidth + parentElement.scrollLeft - point.x);\r\n        scrollLeft = parentElement.scrollLeft;\r\n        parentElement.scrollLeft = scrollLeft + size / 3;\r\n      }\r\n      if (point.y > parentElement.clientHeight + parentElement.scrollTop) {\r\n        this.height = point.y;\r\n        size = Math.abs(parentElement.clientHeight + parentElement.scrollTop - point.y);\r\n        scrollTop = parentElement.scrollTop;\r\n        parentElement.scrollTop = scrollTop + size / 3;\r\n      }\r\n    },\r\n    parentAutoScroll(arg) {\r\n      // 计算有问题 先不管\r\n      let mouse = arg.mouse;\r\n      let point = arg.point;\r\n      let parent = arg.parent;\r\n      let node = arg.node;\r\n      if (point.x > parent.width + parent.point.x) {\r\n        point.x = point.x + node.width + this.maxSizeOffset;\r\n      } else {\r\n        point.x = point.x;\r\n      }\r\n      if (point.y > parent.height + parent.point.y) {\r\n        point.y = point.y + node.height + this.maxSizeOffset;\r\n      } else {\r\n        point.y = point.y;\r\n      }\r\n      //滚动条自动延伸\r\n      if (point.x > parent.width + 0) {\r\n        parent.width = point.x;\r\n      }\r\n      if (point.y > parent.height + 0) {\r\n        parent.height = point.y;\r\n      }\r\n      this.$bus.$emit(\"nodeMove\", parent);\r\n      this.autoScroll({\r\n        type: \"node\",\r\n        data: parent,\r\n        mouse: {\r\n          x: mouse.x,\r\n          y: mouse.y,\r\n        },\r\n        point: {\r\n          x: point.x,\r\n          y: point.y,\r\n        },\r\n      });\r\n    },\r\n    setCursor(evt) {\r\n      if (evt.target.tagName != \"svg\") {\r\n        var className = evt.target.className || \"\";\r\n        if (evt.target.tagName == \"path\") {\r\n          var segmen = getObjectByTarget(evt.target);\r\n          if (segmen) {\r\n            var mp = this.$store.getters[\"flow/getMousePointByCanvas\"]({\r\n              x: evt.pageX,\r\n              y: evt.pageY,\r\n            });\r\n            if (segmen.type == _LineType.horizontal) {\r\n              if (segmen.index == 0 && Math.abs(segmen.sp.x - mp.x) <= this.dragSize) {\r\n                this.setRootCursor(\"move\");\r\n              } else if (segmen.isLast && Math.abs(segmen.ep.x - mp.x) <= this.dragSize) {\r\n                this.setRootCursor(\"move\");\r\n              } else {\r\n                this.setRootCursor(\"ns-resize\");\r\n              }\r\n            } else {\r\n              if (segmen.index == 0 && Math.abs(segmen.sp.y - mp.y) <= this.dragSize) {\r\n                this.setRootCursor(\"move\");\r\n              } else if (segmen.isLast && Math.abs(segmen.ep.y - mp.y) <= this.dragSize) {\r\n                this.setRootCursor(\"move\");\r\n              } else {\r\n                this.setRootCursor(\"ew-resize\");\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        this.setRootCursor(\"default\");\r\n      }\r\n    },\r\n    setRootCursor(type) {\r\n      this.$refs.root.style.cursor = type;\r\n    },\r\n    startGlobalMove(e) {\r\n      //如果按住shift键，则启动全局位移功能\r\n      this.isGlobalPosMove = true;\r\n      this.globalPos = this.$store.getters[\"flow/getMousePointByCanvas\"]({\r\n        x: e.pageX,\r\n        y: e.pageY,\r\n      });\r\n      this.globalMoveLastMouse = {\r\n        x: e.pageX,\r\n        y: e.pageY,\r\n      };\r\n      this.globalRect = this.getRect();\r\n    },\r\n    globalMove(evt) {\r\n      if (this.isGlobalPosMove) {\r\n        const localMouse = {\r\n          x: evt.pageX,\r\n          y: evt.pageY,\r\n        };\r\n        const last_p = getGridPoint(this.globalMoveLastMouse);\r\n        const move_p = getGridPoint(localMouse);\r\n        const current_p = {\r\n          x: move_p.x - last_p.x,\r\n          y: move_p.y - last_p.y,\r\n        };\r\n        const maxWidth = Number.MIN_VALUE,\r\n          maxHeight = Number.MIN_VALUE;\r\n        if (current_p.x == 0 && current_p.y == 0) {\r\n          return false;\r\n        }\r\n        let x_move = false,\r\n          y_move = false;\r\n        if (this.globalRect.x + current_p.x > 0) {\r\n          this.globalRect.x += current_p.x;\r\n          x_move = true;\r\n        }\r\n        if (this.globalRect.y + current_p.y >= 0) {\r\n          this.globalRect.y += current_p.y;\r\n          y_move = true;\r\n        }\r\n        this.$bus.$emit(\"globalMove\", current_p, x_move, y_move, evt);\r\n        this.globalMoveLastMouse = move_p;\r\n        return;\r\n      }\r\n    },\r\n    getRect() {\r\n      let x = Number.MAX_VALUE,\r\n        y = Number.MAX_VALUE,\r\n        width = Number.MIN_VALUE,\r\n        height = Number.MIN_VALUE;\r\n      for (let i = 0; i < this.nodes.length; i++) {\r\n        let node = this.nodes[i];\r\n        if (node.point.x < x) {\r\n          x = node.point.x;\r\n        }\r\n        if (node.point.x + node.width > width) {\r\n          width = node.point.x + node.width;\r\n        }\r\n        if (node.point.y < y) {\r\n          y = node.point.y;\r\n        }\r\n        if (node.point.y + node.height > height) {\r\n          height = node.point.y + node.height;\r\n        }\r\n      }\r\n      for (let i = 0; i < this.lines.length; i++) {\r\n        let line = this.lines[i];\r\n        for (let n = 0; n < line.path.length; n++) {\r\n          if (line.path[n].x < x) {\r\n            x = line.path[n].x;\r\n          }\r\n          if (line.path[n].x > width) {\r\n            width = line.path[n].x;\r\n          }\r\n          if (line.path[n].y < y) {\r\n            y = line.path[n].y;\r\n          }\r\n          if (line.path[n].y > height) {\r\n            height = line.path[n].y;\r\n          }\r\n        }\r\n      }\r\n      return {\r\n        x: x,\r\n        y: y,\r\n        width: width,\r\n        height: height,\r\n      };\r\n    },\r\n    getWheelDirect(e) {\r\n      e = e || window.event;\r\n      let direction;\r\n      if (e.wheelDelta) {\r\n        //判断浏览器IE，谷歌滑轮事件\r\n        if (e.wheelDelta > 0) {\r\n          //当滑轮向上滚动时\r\n          direction = \"up\";\r\n        }\r\n        if (e.wheelDelta < 0) {\r\n          //当滑轮向下滚动时\r\n          direction = \"down\";\r\n        }\r\n      } else if (e.detail) {\r\n        //Firefox滑轮事件\r\n        if (e.detail > 0) {\r\n          //当滑轮向上滚动时\r\n          direction = \"up\";\r\n        }\r\n        if (e.detail < 0) {\r\n          //当滑轮向下滚动时\r\n          direction = \"down\";\r\n        }\r\n      }\r\n      return direction;\r\n    },\r\n    scrollwheel(e) {\r\n      e = e || window.event;\r\n      // if(e.preventDefault && e.ctrlKey) e.preventDefault();\r\n      // if(e.ctrlKey) e.returnValue = false;\r\n      if (e.wheelDelta && e.ctrlKey) {\r\n        e.preventDefault();\r\n        const direction = this.getWheelDirect(e);\r\n        this.rootScale(direction);\r\n      }\r\n    },\r\n    rootScale(direction) {\r\n      if (direction === \"up\") {\r\n        this.scale = Number((this.scale + 0.05 < 2 ? this.scale + 0.05 : 2).toFixed(2));\r\n      } else {\r\n        this.scale = Number((this.scale > 0.4 ? this.scale - 0.05 : 0.4).toFixed(2));\r\n      }\r\n      this.$store.commit(\"flow/setPage\", {\r\n        scale: this.scale,\r\n      });\r\n      this.$store.commit(\"flow/clearPoints\");\r\n    },\r\n    selectGlobalMove(e) {\r\n      if (!this.globalSelect) {\r\n        this.globalSelect = document.createElement(\"div\");\r\n        this.globalSelect.className = \"select-nodes\";\r\n        Object.assign(this.globalSelect.style, {\r\n          zIndex: 9999,\r\n          transform: `translate3d(${this.selectGlobalPos.x / this.scale}px, ${\r\n            this.selectGlobalPos.y / this.scale\r\n          }px, 0)`,\r\n          pointerEvents: \"none\",\r\n        });\r\n        this.$refs.root.appendChild(this.globalSelect);\r\n      }\r\n      if (this.selectGlobalPos) {\r\n        const start = this.selectGlobalPos;\r\n        const end = this.$store.getters[\"flow/getMousePointByCanvas\"]({\r\n          x: e.pageX,\r\n          y: e.pageY,\r\n        });\r\n        let top, left, width, height;\r\n        if (end.x > start.x) {\r\n          left = start.x;\r\n          width = end.x - start.x;\r\n        } else {\r\n          left = end.x;\r\n          width = start.x - end.x;\r\n        }\r\n        if (end.y > start.y) {\r\n          top = start.y;\r\n          height = end.y - start.y;\r\n        } else {\r\n          top = end.y;\r\n          height = start.y - end.y;\r\n        }\r\n        this.selectGlobalPonits.start.x = left / this.scale;\r\n        this.selectGlobalPonits.start.y = top / this.scale;\r\n        this.selectGlobalPonits.end.x = (left + width) / this.scale;\r\n        this.selectGlobalPonits.end.y = (top + height) / this.scale;\r\n        Object.assign(this.globalSelect.style, {\r\n          transform: `translate3d(${left / this.scale}px, ${top / this.scale}px, 0)`,\r\n          width: this.toPx(width / this.scale),\r\n          height: this.toPx(height / this.scale),\r\n        });\r\n      }\r\n    },\r\n    selectGlobalEnd(e) {\r\n      this.isGlobalSelect = false;\r\n      if (this.globalSelect) {\r\n        const end = this.$store.getters[\"flow/getMousePointByCanvas\"]({\r\n          x: e.pageX,\r\n          y: e.pageY,\r\n        });\r\n        this.$bus.$emit(\"selectGlobal\", this.selectGlobalPonits.start, this.selectGlobalPonits.end);\r\n        this.$refs.root.removeChild(this.globalSelect);\r\n        this.globalSelect = null;\r\n      }\r\n    },\r\n    documentCopy(e) {\r\n      const selectedList = this.$store.state.flow.selectedList;\r\n      if (selectedList && selectedList.length > 1) {\r\n        this.ctrlCopyNodes = [...selectedList];\r\n      } else {\r\n        this.ctrlCopyNodes = [this.checked];\r\n      }\r\n    },\r\n    pasteNode(e) {\r\n      if (!this.ctrlCopyNodes) {\r\n        return false;\r\n      }\r\n      let copyNodes = [];\r\n      const { fromNodeIds, toNodeIds, newLines } = this.getBeforeCopyLine(this.ctrlCopyNodes);\r\n      this.ctrlCopyNodes.forEach((item) => {\r\n        const copyNode = item;\r\n        // 复制一个节点\r\n        const fromCopyId = copyNode.id;\r\n        const id = tools.uuid();\r\n        const newcopyNode = JSON.parse(JSON.stringify(copyNode));\r\n        const point = Object.assign({}, newcopyNode, {\r\n          id: tools.uuid(),\r\n          out: [],\r\n          in: [],\r\n          x: copyNode.point.x + 10,\r\n          y: copyNode.point.y + 10,\r\n        });\r\n        point.attributes.BaseInfo.ID = id;\r\n        const newNode = this.copyNodeNext(point, fromCopyId, copyNode);\r\n        this.resetLineFromAndTo(fromNodeIds, toNodeIds, newNode, copyNode);\r\n        copyNodes.push(newNode);\r\n        this.checked = newNode;\r\n      });\r\n      this.copyEventsLines(newLines);\r\n      this.ctrlCopyNodes = copyNodes;\r\n      this.$store.commit(\"flow/setSelectedList\", copyNodes);\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n@import \"_platform/assets/styles/designer/workFlow.scss\";\r\n.flow {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n  .root {\r\n    position: relative;\r\n    min-width: 100%;\r\n    min-height: 100%;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flow.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./flow.vue?vue&type=template&id=1dd9c0af&\"\nimport script from \"./flow.vue?vue&type=script&lang=js&\"\nexport * from \"./flow.vue?vue&type=script&lang=js&\"\nimport style0 from \"./flow.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lanes.vue?vue&type=style&index=0&id=c192e5b2&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lanes.vue?vue&type=style&index=0&id=c192e5b2&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flowContent.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flowContent.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}