{"version":3,"sources":["webpack://platform/./designer/seat/util/eventBus.js","webpack://platform/./designer/seat/constant.js","webpack://platform/./designer/seat/func.js","webpack://platform/./designer/seat/util/configBuilder.js","webpack://platform/./designer/seat/printingDesign.vue?fcb0","webpack://platform/I:/web-project/dream/dsf-cli/node_modules/core-js/modules/es.string.italics.js","webpack://platform/./designer/seat/printingDesign.vue?d6f9","webpack://platform/./designer/seat/printingDesign.vue?f51e","webpack://platform/./designer/seat/printingDesign.vue?43c0","webpack://platform/./designer/seat/printingDesign/topTools.vue?c8dc","webpack://platform/./designer/seat/printingDesign/widthInput.vue?8c5a","webpack://platform/designer/seat/printingDesign/widthInput.vue","webpack://platform/./designer/seat/printingDesign/widthInput.vue?8aca","webpack://platform/./designer/seat/printingDesign/widthInput.vue","webpack://platform/designer/seat/printingDesign/topTools.vue","webpack://platform/./designer/seat/printingDesign/topTools.vue?03ad","webpack://platform/./designer/seat/printingDesign/topTools.vue","webpack://platform/./designer/seat/printingDesign/leftTools.vue?3781","webpack://platform/designer/seat/printingDesign/leftTools.vue","webpack://platform/./designer/seat/printingDesign/leftTools.vue?f023","webpack://platform/./designer/seat/printingDesign/leftTools.vue","webpack://platform/./designer/seat/printingDesign/rightTools.vue?816b","webpack://platform/designer/seat/printingDesign/rightTools.vue","webpack://platform/./designer/seat/printingDesign/rightTools.vue?5654","webpack://platform/./designer/seat/printingDesign/rightTools.vue","webpack://platform/./designer/seat/printingDesign/canvas.vue?51e7","webpack://platform/./designer/seat/printingDesign/region.vue?230e","webpack://platform/designer/seat/printingDesign/region.vue","webpack://platform/./designer/seat/printingDesign/region.vue?b8e2","webpack://platform/./designer/seat/printingDesign/region.vue","webpack://platform/designer/seat/printingDesign/canvas.vue","webpack://platform/./designer/seat/printingDesign/canvas.vue?ebe3","webpack://platform/./designer/seat/printingDesign/canvas.vue","webpack://platform/./designer/seat/printingDesign/seatItem.vue?a067","webpack://platform/designer/seat/printingDesign/seatItem.vue","webpack://platform/./designer/seat/printingDesign/seatItem.vue?f078","webpack://platform/./designer/seat/printingDesign/seatItem.vue","webpack://platform/designer/seat/printingDesign.vue","webpack://platform/./designer/seat/printingDesign.vue?d8dd","webpack://platform/./designer/seat/printingDesign.vue"],"names":["EventBus","this","events","event","callback","undefined","arr","_","isArray","push","params","eventDeal","forEach","a","Object","entries","eventBus","window","$simpleEventBus","uploadUrl","eventBusEvent","uploadImg","formData","self","config","headers","transformRequest","data","loadingIndex","dsf","layer","loading","$http","post","done","res","isDef","success","message","error","err","always","closeLoading","updateGroupMemberPosition","group","member","totalTop","height","rows","totalLeft","width","cols","eachTop","eachLeft","item","rowIndex","top","floor","colIndex","left","getMemberSpaceLeft","getMemberSpaceTop","forzenOtherItems","isForzenMemberSty","items","el","isFrozenSty","selectedItems","select","id","groups","length","isFrozenMemberSty","unForzenAllItems","createUploadFileInput","inputName","$","remove","upDOM","document","createElement","type","accept","style","display","name","body","appendChild","changePanelSizeForBgImage","isEmpty","postData","backgroundImage","bg_w","bg_h","box_w","canvasSet","scale","css","absolutePath","sysBindShortKey","keyStack","stopList","keyCode","keyNum2Str","on","evt","index","indexOf","keyStr","join","includes","stopPropagation","preventDefault","emit","KEY_CTRL_D","KEY_DELETE","pull","newRelative","seat","person","pid","parentId","belong","currentState","stateList","seatNum","ConfigBuilder","business","alert","getOwnPropertyNames","key","msg","title","Error","content","module","i","locals","exports","add","default","createHTML","forcedStringHTMLMethod","target","proto","forced","italics","render","_vm","_h","$createElement","_c","_self","staticClass","_b","saveLayout","scopedSlots","_u","fn","proxy","staticRenderFns","_withStripped","_l","layout","buttons","button","$index","attrs","icon","text","click","$event","handler","value","showBorderLine","change","changeShowBorder","class","active","_v","hasBg","inline","model","label","controls","precision","placeholder","$$v","$set","expression","disabled","component","options","__file","leftMenu","activeName","staticStyle","padding","itemindex","_s","originWidth","originHeight","computed","mounted","draggable","addClasses","helper","cursor","cursorAt","stop","x","pageX","y","pageY","uuid","angle","zIndex","temp","bgImg","assign","basic","fontFamily","fontSize","letterSpacing","lineHeight","color","textAlign","bold","italic","underline","fontStyFrozen","$store","commit","showTool","showGroup","groupVisible","placement","trigger","closeGroup","domProps","textContent","getInfoTypeName","info","size","v","min","updateWidth","updateHeight","max","slot","fontFamilyList","it","val","input","_e","uploadSingle","src","getImagePath","alt","canvasCss","mousedown","_k","preRegion","visible","regionVisible","region","regionRect","panelSty","_t","regionSty","verLine","verLineSty","horLine","horLineSty","selectPosition","selectSty","selectMove","selectRotate","selectScale","activeId","getItemSty","preMove","dblclick","openEdit","preRotate","preScale","getFontSty"],"mappings":"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","file":"modules/platform/js/dsf-platform.printingDesign.js","sourcesContent":["class EventBus {\r\n  constructor() {\r\n    this.events = {};\r\n  }\r\n  \r\n  listen(event, callback){\r\n    if (this.events[event] === undefined){\r\n      this.events[event] = [callback];\r\n    }\r\n    else {\r\n      const arr = this.events[event];\r\n      if (!_.isArray(arr)){\r\n        console.log(`请使用 on 来监听 ${event} 事件`)\r\n        return\r\n      }\r\n      arr.push(callback)\r\n    }\r\n  }\r\n  dispatch(event, params){\r\n    const eventDeal = this.events[event];\r\n    if (!eventDeal){\r\n      console.log(event + \"未使用listen 注册\")\r\n      return;\r\n    }\r\n    \r\n    if (!_.isArray(eventDeal)){\r\n      console.log(event + \"被on注册, 应使用emit触发\")\r\n      return\r\n    }\r\n    eventDeal.forEach(a => {\r\n      a(params)\r\n    })\r\n  }\r\n\r\n  on(event, callback)  {\r\n    if (this.events[event] === undefined){\r\n      this.events[event] = callback\r\n    }\r\n    else if (_.isArray(this.events[event])){\r\n      console.log(`请使用 listen 来监听 ${event} 事件`);\r\n    }\r\n    else {\r\n      console.log(event + \" 监听器重名\");\r\n    }\r\n  }\r\n  emit(event, params) {\r\n    const eventDeal = this.events[event]\r\n    if (!eventDeal){\r\n      console.log(event + \"未使用on 注册\")\r\n      return;\r\n    }\r\n    if (_.isArray(eventDeal)){\r\n      console.log(event + \"被listen注册, 应使用dispatch触发\")\r\n      return\r\n    }\r\n  \r\n    eventDeal(params)\r\n  }\r\n  off(event) {\r\n    this.events[event] = undefined;\r\n  }\r\n  clear(){\r\n    this.events = {}\r\n  }\r\n\r\n  $getAllListener(){\r\n    return Object.entries(this.events)\r\n  }\r\n}\r\n\r\nconst eventBus = new EventBus();\r\nwindow.$simpleEventBus = eventBus;\r\nexport default eventBus","const uploadUrl = \"file/upload/\";\r\nconst eventBusEvent = {\r\n  //配置文件加载完成\r\n  \"CONFIG_FILE_LOADED\": \"config_file_loaded\",\r\n  \r\n  //seatDesign 有关的事件\r\n  \"KEY_DELETE\": \"key_delete\",\r\n  \"KEY_CTRL_D\":\"key_ctrl_d\",\r\n  \"BODY_EMPTY_CLICK\": \"body_empty_click\",\r\n  \"SEAT_POP\": \"seat_pop\",\r\n  \"GET_ACTIVE_SEAT\": \"get_active_seat\",\r\n  \"CLEAN_ALL_SEAT_NUM\": \"clean_all_seat_num\",\r\n  \"CLEAN_SELECT_SEAT_NUM\": \"clean_select_seat_num\",\r\n  \"AFTER_QUICK_ORDER\": \"after_quick_order\",\r\n  \r\n  //seatView 有关的事件\r\n  \"PERSON_REVERT_TREE\": \"person_revert_tree\",\r\n  \"LEFT_CLICK_SEAT\": \"left_click_seat\",\r\n  \"AUTO_SEAT\": \"auto_seat\",\r\n  \r\n  //printingDesign 有关的事件\r\n  \"LEVEL_UP\": \"level_up\",\r\n  \"LEVEL_DOWN\": \"level_down\"\r\n}\r\nexport {\r\n  uploadUrl,\r\n  eventBusEvent\r\n}","import {eventBusEvent, uploadUrl} from './constant'\r\nimport eventBus from \"_platform/designer/seat/util/eventBus\";\r\n\r\n/*seatDesign 里面使用的方法*/\r\nexport function uploadImg(formData, callback) {\r\n  const self = this;\r\n  const config = {\r\n    headers: {'Content-Type': 'multipart/form-data'},\r\n    transformRequest: [function (data, headers) {\r\n      return data;\r\n    }],\r\n  };\r\n  \r\n  let loadingIndex = dsf.layer.loading();\r\n  self.$http.post(uploadUrl, formData, config)\r\n    .done(res => {\r\n      if (!dsf.isDef(res.data) || !res.success) {\r\n        dsf.layer.message(res.message, false);\r\n        callback && callback(\"error\")\r\n        return false\r\n      }\r\n      \r\n      callback && callback(res.data);\r\n    })\r\n    .error(err => {\r\n      dsf.layer.message(\"上传图片失败\", false);\r\n      callback && callback(\"error\");\r\n    })\r\n    .always(() => {\r\n      dsf.layer.closeLoading(loadingIndex);\r\n    })\r\n}\r\n\r\nexport function updateGroupMemberPosition(group) {\r\n  const member = group.member[0];\r\n  let totalTop = group.height - member.height * group.rows;\r\n  let totalLeft = group.width - member.width * group.cols;\r\n  let eachTop = group.rows > 1 ? totalTop / (group.rows - 1) : 0;\r\n  let eachLeft = group.cols > 1 ? totalLeft / (group.cols - 1) : 0;\r\n  group.member.forEach(item => {\r\n    if (item.rowIndex > 0) item.top = _.floor((item.height + eachTop) * item.rowIndex, 2);\r\n    if (item.colIndex > 0) item.left = _.floor((item.width + eachLeft) * item.colIndex, 2);\r\n  })\r\n}\r\n\r\nexport function getMemberSpaceLeft(group) {\r\n  const member = group.member[0];\r\n  let totalLeft = group.width - member.width * group.cols;\r\n  return group.cols === 1 ? 0 : _.floor(totalLeft / (group.cols - 1), 2)\r\n}\r\n\r\nexport function getMemberSpaceTop(group) {\r\n  const member = group.member[0];\r\n  let totalTop = group.height - member.height * group.rows;\r\n  return group.rows === 1 ? 0 : _.floor(totalTop / (group.rows - 1), 2)\r\n}\r\n\r\n//冻结其他对象(未被激活对象)的样式渲染\r\nexport function forzenOtherItems(isForzenMemberSty = true) {\r\n  this.items.forEach(el => {\r\n    el.isFrozenSty = true;\r\n    this.selectedItems.forEach(select => {\r\n      if (el.id === select.id) {\r\n        el.isFrozenSty = false\r\n      }\r\n    })\r\n  })\r\n  if (this?.groups?.length > 0) {\r\n    this.groups.forEach(el => {\r\n      el.isFrozenSty = true;\r\n      el.isFrozenMemberSty = true;\r\n      this.selectedItems.forEach(select => {\r\n        if (el.id === select.id) {\r\n          el.isFrozenSty = false\r\n          !isForzenMemberSty && (el.isFrozenMemberSty = false)\r\n        }\r\n      })\r\n    })\r\n  }\r\n}\r\n\r\n//解冻所有对象,重新渲染\r\nexport function unForzenAllItems() {\r\n  this.items.forEach(el => {\r\n    el.isFrozenSty = false\r\n  })\r\n  this.groups.forEach(el => {\r\n    el.isFrozenSty = false;\r\n    el.isFrozenMemberSty = false;\r\n  })\r\n}\r\n\r\nexport function createUploadFileInput(inputName = \"dsf-seat-upload\") {\r\n  $(`input[name='${inputName}']`).remove();\r\n  let upDOM = document.createElement(\"input\");\r\n  upDOM.type = \"file\";\r\n  upDOM.accept = \"image/*\";\r\n  upDOM.style.display = \"none\"\r\n  upDOM.name = inputName;\r\n  document.body.appendChild(upDOM);\r\n  return upDOM\r\n}\r\n\r\nexport function changePanelSizeForBgImage() {\r\n  const self = this;\r\n  if (_.isEmpty(self.postData.backgroundImage)) return; //如果没有背景则返回\r\n  let bg_w = self.postData.backgroundImage.width;\r\n  let bg_h = self.postData.backgroundImage.height;\r\n  let box_w = self.postData.canvasSet.width || $(\".seat-designer-page\").width();   //若画布宽没有设置值\r\n  let scale = box_w / bg_w;\r\n  \r\n  self.postData.canvasSet.width = box_w;\r\n  self.postData.canvasSet.height = bg_h * scale;\r\n  $(\"#panel_bg\").css(\"background-image\", \"url(\" + self.postData.backgroundImage.absolutePath + \")\");\r\n}\r\n\r\nexport function sysBindShortKey(keyStack, stopList) {\r\n  let keyCode;\r\n  const keyNum2Str = (keyCode) => {\r\n    switch (keyCode) {\r\n      case 17:\r\n        keyCode = \"ctrl\";\r\n        break;\r\n      case 68:\r\n        keyCode = \"d\";\r\n        break;\r\n      case 65:\r\n        keyCode = \"a\";\r\n        break;\r\n      case 46:\r\n        keyCode = \"delete\";\r\n        break;\r\n      case 16:\r\n        keyCode = \"shift\";\r\n        break;\r\n      case 83:\r\n        keyCode = \"s\";\r\n        break;\r\n      default:\r\n        keyCode = null;\r\n    }\r\n    return keyCode\r\n  }\r\n  \r\n  $(\"body\").on(\"keydown\", function (evt) {\r\n    keyCode = keyNum2Str(evt.keyCode);\r\n    if (!keyCode) return;\r\n    let index = keyStack.indexOf(keyCode);\r\n    if (index === -1) keyStack.push(keyCode);\r\n    let keyStr = keyStack.join(\"-\");\r\n    if (stopList.includes(keyStr)) {\r\n      evt.stopPropagation();\r\n      evt.preventDefault();\r\n    }\r\n    \r\n    if (keyStr === \"ctrl-d\") {\r\n      eventBus.emit(eventBusEvent.KEY_CTRL_D);\r\n    }\r\n    if (keyStr === \"delete\") {\r\n      eventBus.emit(eventBusEvent.KEY_DELETE)\r\n    }\r\n  });\r\n  $(\"body\").on(\"keyup\", function (evt) {\r\n    evt.stopPropagation();\r\n    evt.preventDefault();\r\n    keyCode = keyNum2Str(evt.keyCode);\r\n    _.pull(keyStack, keyCode);   //删除对应的keyCode\r\n  });\r\n}\r\n\r\n\r\n/*seatView 里面使用的方法*/\r\n//创建一条新的人员入座记录\r\nexport function newRelative(seat, person) {\r\n  return {\r\n    id: seat.id,\r\n    pid: seat.parentId,\r\n    belong: seat.belong,\r\n    currentState: seat.stateList[1],\r\n    person: person,\r\n    seatNum: seat.seatNum\r\n  }\r\n}","export default class ConfigBuilder {\r\n  constructor(config, business) {\r\n    this.config = config;\r\n    if (!business){\r\n      this.alert(\"url里面缺少必要的opt参数\");\r\n    }\r\n    if (!this.config[business]) {\r\n      this.alert(`[${this.config.name}] url里面的opt参数没有对应的配置项`);\r\n    }\r\n    Object.getOwnPropertyNames(this.config[business]).forEach(key => {\r\n      this[key] = this.config[business][key];\r\n    })\r\n  }\r\n  \r\n  alert(msg){\r\n    dsf.layer.alert({\r\n      title: \"警告\",\r\n      type: \"warning\",\r\n      message: msg\r\n    });\r\n    throw new Error(msg)\r\n  }\r\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-2!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-3!../../../../../node_modules/sass-loader/dist/cjs.js??ref--5-oneOf-1-4!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./printingDesign.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"a97b46fa\", content, false, {\"sourceMap\":false,\"shadowMode\":false});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-2!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-3!../../../../../node_modules/sass-loader/dist/cjs.js??ref--5-oneOf-1-4!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./printingDesign.vue?vue&type=style&index=0&lang=scss&\", function() {\n     var newContent = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-2!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-3!../../../../../node_modules/sass-loader/dist/cjs.js??ref--5-oneOf-1-4!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./printingDesign.vue?vue&type=style&index=0&lang=scss&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.italics` method\n// https://tc39.es/ecma262/#sec-string.prototype.italics\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('italics') }, {\n  italics: function italics() {\n    return createHTML(this, 'i', '', '');\n  }\n});\n","export * from \"-!../../../../../node_modules/vue-style-loader/index.js??ref--5-oneOf-1-0!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-2!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-3!../../../../../node_modules/sass-loader/dist/cjs.js??ref--5-oneOf-1-4!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./printingDesign.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\nexport {};","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"ds-designer ds-seat-container ds-seat-design\" },\n    [\n      _c(\n        \"div\",\n        { staticClass: \"designer-head\" },\n        [\n          _c(\n            \"top-tools\",\n            _vm._b(\n              { on: { \"save-layout\": _vm.saveLayout } },\n              \"top-tools\",\n              _vm.postData,\n              false,\n              true\n            )\n          )\n        ],\n        1\n      ),\n      _c(\"div\", { staticClass: \"designer-content\" }, [\n        _c(\n          \"div\",\n          { staticClass: \"seat-designer-center\" },\n          [\n            _c(\"left-tools\"),\n            _c(\"print-canvas\", {\n              scopedSlots: _vm._u([\n                {\n                  key: \"seat\",\n                  fn: function() {\n                    return [\n                      _c(\n                        \"seat-item\",\n                        _vm._b({}, \"seat-item\", _vm.postData, false, true)\n                      )\n                    ]\n                  },\n                  proxy: true\n                }\n              ])\n            }),\n            _c(\"right-tools\")\n          ],\n          1\n        )\n      ])\n    ]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"designer_tools\" },\n    [\n      _vm._l(_vm.layout.buttons, function(button, $index) {\n        return _c(\"DsfButton\", {\n          key: $index,\n          attrs: {\n            icon: button.icon,\n            text: button.text,\n            \"btn-style\": \"icon-text\"\n          },\n          on: {\n            click: function($event) {\n              return button.handler($event, button)\n            }\n          }\n        })\n      }),\n      _c(\n        \"div\",\n        { staticClass: \"switch-warp\" },\n        [\n          _c(\"el-switch\", {\n            attrs: { value: _vm.showBorderLine },\n            on: { change: _vm.changeShowBorder }\n          }),\n          _c(\"span\", { class: { active: _vm.showBorderLine } }, [\n            _vm._v(\"边线框\")\n          ])\n        ],\n        1\n      ),\n      _c(\"width-input\", {\n        attrs: { \"canvas-set\": _vm.canvasSet, \"has-bg\": _vm.hasBg }\n      })\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"input-box\" },\n    [\n      _c(\n        \"el-form\",\n        {\n          staticClass: \"demo-form-inline\",\n          attrs: { inline: true, model: _vm.canvasSet, \"label-width\": \"100px\" }\n        },\n        [\n          _c(\n            \"el-form-item\",\n            { attrs: { label: \"画布宽\" } },\n            [\n              _c(\"el-input-number\", {\n                attrs: { controls: false, precision: 0, placeholder: \"自适应\" },\n                model: {\n                  value: _vm.canvasSet.width,\n                  callback: function($$v) {\n                    _vm.$set(_vm.canvasSet, \"width\", $$v)\n                  },\n                  expression: \"canvasSet.width\"\n                }\n              })\n            ],\n            1\n          ),\n          _c(\n            \"el-form-item\",\n            { attrs: { label: \"画布高\" } },\n            [\n              _c(\"el-input-number\", {\n                attrs: {\n                  controls: false,\n                  disabled: _vm.hasBg,\n                  precision: 0,\n                  placeholder: \"自适应\"\n                },\n                model: {\n                  value: _vm.canvasSet.height,\n                  callback: function($$v) {\n                    _vm.$set(_vm.canvasSet, \"height\", $$v)\n                  },\n                  expression: \"canvasSet.height\"\n                }\n              })\n            ],\n            1\n          )\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"input-box\">\r\n    <el-form :inline=\"true\" :model=\"canvasSet\" label-width=\"100px\" class=\"demo-form-inline\">\r\n      <el-form-item label=\"画布宽\">\r\n        <el-input-number v-model=\"canvasSet.width\" :controls=\"false\" :precision=\"0\" placeholder=\"自适应\"></el-input-number>\r\n      </el-form-item>\r\n      \r\n      <el-form-item label=\"画布高\">\r\n        <el-input-number v-model=\"canvasSet.height\" :controls=\"false\" :disabled=\"hasBg\" :precision=\"0\" placeholder=\"自适应\"></el-input-number>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"WidthInput\",\r\n    props:{\r\n      canvasSet: {\r\n        type: Object,\r\n        required: true\r\n      },\r\n      hasBg:{\r\n        type: Boolean\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n\r\n      }\r\n    },\r\n    watch: {\r\n      canvasSet: {\r\n        handler(val) {\r\n          const self = this;\r\n          const {width, height} = val;\r\n          const lef = $(\".seat-designer-page\").offset().left;\r\n          const top = $(\".seat-designer-page\").offset().top;\r\n          const screenHit = $(window).height();\r\n          const screenWid = $(window).width();\r\n          if (width && (width + lef > screenWid)) {\r\n            $(\".seat-designer-center\").css({\"overflow-x\": \"scroll\"});\r\n          } else {\r\n            $(\".seat-designer-center\").css({\"overflow-x\": \"auto\"});\r\n          }\r\n          if (height && (height + top > screenHit)) {\r\n            $(\".seat-designer-center\").css(\"overflow-y\", \"scroll\");\r\n          } else {\r\n            $(\".seat-designer-center\").css(\"overflow-y\", \"auto\");\r\n          }\r\n          self.$store.commit(\"printingDesign/changeCompelPanelSize\", val);\r\n        },\r\n        deep: true\r\n      },\r\n    },\r\n  }\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./widthInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./widthInput.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./widthInput.vue?vue&type=template&id=11e374fc&\"\nimport script from \"./widthInput.vue?vue&type=script&lang=js&\"\nexport * from \"./widthInput.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('11e374fc')) {\n      api.createRecord('11e374fc', component.options)\n    } else {\n      api.reload('11e374fc', component.options)\n    }\n    module.hot.accept(\"./widthInput.vue?vue&type=template&id=11e374fc&\", function () {\n      api.rerender('11e374fc', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"designer/seat/printingDesign/widthInput.vue\"\nexport default component.exports","<template>\r\n  <div class=\"designer_tools\">\r\n    <DsfButton\r\n      v-for=\"(button, $index) in layout.buttons\"\r\n      :key=\"$index\"\r\n      :icon=\"button.icon\"\r\n      :text=\"button.text\"\r\n      btn-style=\"icon-text\"\r\n      @click=\"button.handler($event, button)\"\r\n    />\r\n    \r\n    <div class=\"switch-warp\">\r\n      <el-switch\r\n        :value=\"showBorderLine\"\r\n        @change=\"changeShowBorder\"\r\n      />\r\n      <span :class=\"{active: showBorderLine}\">边线框</span>\r\n    </div>\r\n    \r\n    <width-input :canvas-set=\"canvasSet\" :has-bg=\"hasBg\"></width-input>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import html2canvas from 'html2canvas';\r\n  import {createUploadFileInput, uploadImg} from '../func'\r\n  import eventBus from \"_platform/designer/seat/util/eventBus\";\r\n  import {eventBusEvent} from \"_platform/designer/seat/constant\";\r\n  import {mapState} from 'vuex';\r\n  import widthInput from \"_platform/designer/seat/printingDesign/widthInput\";\r\n  \r\n  export default {\r\n    name: \"TopTools\",\r\n    props: {\r\n      backgroundImage: {\r\n        type: Object,\r\n        default() {\r\n          return {\r\n            url: \"\",\r\n            width: 0,\r\n            height: 0,\r\n          }\r\n        }\r\n      },\r\n      canvasSet:{\r\n        type: Object,\r\n        default() {\r\n          return {\r\n            width: undefined,\r\n            height: undefined,\r\n          }\r\n        }\r\n      },\r\n      hasBg: {\r\n        type: Boolean,\r\n        default: false\r\n      },   //是否有底图\r\n    },\r\n    components: {\r\n      widthInput,\r\n    },\r\n    data() {\r\n      return {\r\n        //普通情况下的按钮\r\n        normalButtons: [\r\n          {text: \"保存\", icon: \"baocun\", handler: this.saveLayout},\r\n          {text: \"底图\", icon: \"tupiantianjia\", handler: this.updateBG},\r\n          {text: \"复位\", icon: \"shuaxin\", handler: this.restoreLayout},\r\n          {text: \"上一层\", icon: \"zhiding1\", handler: this.levelUp},\r\n          {text: \"下一层\", icon: \"zhidi\", handler: this.levelDown},\r\n          {text: \"回退\", icon: \"shangyibu1\", handler: this.backStep},\r\n          {text: \"导出\", icon: \"yunduanxiazai\", handler: this.exportImage},\r\n        ],\r\n        layout: {\r\n          buttons: [],\r\n        },\r\n      }\r\n    },\r\n    \r\n    computed: {\r\n      ...mapState(\"printingDesign\", [\r\n        \"compelPanelSize\",\r\n        \"showBorderLine\"\r\n      ])\r\n    },\r\n    watch: {\r\n      \"canvasSet.width\"(val) {\r\n        if (!this.hasBg) return;\r\n        if (!val) {\r\n          this.$nextTick(() => {\r\n            let boxWid = $(\".seat-designer-page\").width();\r\n            let scale = boxWid / this.backgroundImage.width;\r\n            this.canvasSet.height = this.backgroundImage.height * scale;\r\n          });\r\n          return;\r\n        }\r\n        let scale = val / this.backgroundImage.width;\r\n        this.canvasSet.height = this.backgroundImage.height * scale;\r\n      },\r\n    },\r\n    created() {\r\n      this.layout.buttons = this.normalButtons;\r\n    },\r\n    methods: {\r\n      backStep() {\r\n      },\r\n      saveLayout() {\r\n        this.$emit(\"save-layout\")\r\n      },\r\n      restoreLayout() {\r\n        const panelSize = {\r\n          width: this.compelPanelSize.width,\r\n          height: this.compelPanelSize.height,\r\n          scale: 1,\r\n          left: 0,\r\n          top: 0,\r\n        }\r\n        this.$store.commit(\"printingDesign/changePanelSize\", panelSize);\r\n      },\r\n      updateBG() {\r\n        const self = this;\r\n        let upDOM = createUploadFileInput(\"dsf-seat-bg-upload\");\r\n        $(upDOM).on('change', function () {\r\n          if (!upDOM.files || upDOM.files.length === 0) return false;\r\n          const formData = new FormData();\r\n          formData.append(\"file\", upDOM.files[0]);\r\n          const callback = result => {\r\n            //清除创建的input\r\n            $(upDOM).val(\"\");\r\n            $(upDOM).remove();\r\n            upDOM = null;\r\n            \r\n            if (result === \"error\") {\r\n              self.$emit(\"update:hasBg\", false);\r\n              return false;\r\n            }\r\n            setBgImage2Panel.call(self, result[0]);\r\n          };\r\n          uploadImg.call(self, formData, callback)\r\n        })\r\n        $(upDOM).click();\r\n      },\r\n      levelUp(){\r\n        eventBus.emit(eventBusEvent.LEVEL_UP)\r\n      },\r\n      levelDown(){\r\n        eventBus.emit(eventBusEvent.LEVEL_DOWN)\r\n      },\r\n      changeShowBorder(val){\r\n        this.$store.commit(\"printingDesign/changeShowBorderLine\", val)\r\n      },\r\n      exportImage(){\r\n        const loader = dsf.layer.loading();\r\n        $(\".seat-designer-page .seat-box.border-dash\").addClass(\"border-none\");\r\n        const panelEl = document.getElementById(\"panel_outer\")\r\n        html2canvas(panelEl).then(function(canvas) {\r\n          const dataUrl = canvas.toDataURL(\"image/png\")\r\n          const a = document.createElement(\"a\");\r\n          a.style.display = \"none\"\r\n          a.download = \"证书套打.png\"\r\n          a.href = dataUrl;\r\n          document.body.appendChild(a);\r\n          a.click();\r\n          document.body.removeChild(a);\r\n          $(\".seat-designer-page .seat-box.border-dash\").removeClass(\"border-none\");\r\n          dsf.layer.closeLoading(loader);\r\n        });\r\n      }\r\n    }\r\n  }\r\n  \r\n  function setBgImage2Panel(data) {\r\n    const self = this;\r\n    let image = new Image();\r\n    image.src = dsf.url.getWebPath(data.relativePath);\r\n    image.onload = function () {\r\n      self.$emit(\"update:hasBg\", true);\r\n      self.$emit(\"update:backgroundImage\", {\r\n        width: image.naturalWidth,\r\n        height: image.naturalHeight,\r\n        relativePath: data.relativePath,\r\n        absolutePath: data.absolutePath\r\n      })\r\n    };\r\n    image.onerror = function () {\r\n      dsf.layer.message(\"图片加载失败\", false);\r\n      self.$emit(\"update:hasBg\", false);\r\n    }\r\n  }\r\n\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./topTools.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./topTools.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./topTools.vue?vue&type=template&id=114223de&\"\nimport script from \"./topTools.vue?vue&type=script&lang=js&\"\nexport * from \"./topTools.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('114223de')) {\n      api.createRecord('114223de', component.options)\n    } else {\n      api.reload('114223de', component.options)\n    }\n    module.hot.accept(\"./topTools.vue?vue&type=template&id=114223de&\", function () {\n      api.rerender('114223de', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"designer/seat/printingDesign/topTools.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"designer-left\" }, [\n    _c(\n      \"div\",\n      { staticClass: \"designer-left-tools\" },\n      _vm._l(_vm.leftMenu.group, function(group, $index) {\n        return _c(\n          \"el-collapse\",\n          {\n            key: $index,\n            model: {\n              value: _vm.leftMenu.activeName,\n              callback: function($$v) {\n                _vm.$set(_vm.leftMenu, \"activeName\", $$v)\n              },\n              expression: \"leftMenu.activeName\"\n            }\n          },\n          [\n            _c(\n              \"el-collapse-item\",\n              { attrs: { title: group.title, name: group.title } },\n              [\n                _c(\n                  \"div\",\n                  {\n                    staticClass: \"ds-tools-group-content\",\n                    staticStyle: { padding: \"10px\" }\n                  },\n                  _vm._l(group.items, function(item, itemindex) {\n                    return _c(\n                      \"div\",\n                      {\n                        key: itemindex,\n                        staticClass: \"ds-tool-item\",\n                        attrs: { name: item.name, \"data-type\": item.type }\n                      },\n                      [_vm._v(\" \" + _vm._s(item.name) + \" \")]\n                    )\n                  }),\n                  0\n                )\n              ]\n            )\n          ],\n          1\n        )\n      }),\n      1\n    )\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"designer-left\">\r\n    <div class=\"designer-left-tools\">\r\n      <el-collapse v-for=\"(group, $index) in leftMenu.group\" :key=\"$index\" v-model=\"leftMenu.activeName\">\r\n        <el-collapse-item :title=\"group.title\" :name=\"group.title\">\r\n          <div class=\"ds-tools-group-content\" style=\"padding: 10px;\">\r\n            <div v-for=\"(item, itemindex) in group.items\" :key=\"itemindex\" class=\"ds-tool-item\" :name=\"item.name\" :data-type=\"item.type\">\r\n              {{ item.name }}\r\n            </div>\r\n          </div>\r\n        </el-collapse-item>\r\n      </el-collapse>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex';\r\n\r\nexport default {\r\n  name: \"LeftTools\",\r\n  data() {\r\n    return {\r\n      leftMenu: {\r\n        activeName: [\"对象\", \"辅助对象\", \"自定义对象\"],\r\n        group: [\r\n          {\r\n            title: '对象',\r\n            items: [\r\n              {\r\n                name: \"文字\",\r\n                type: \"text\"\r\n              },\r\n              {\r\n                name: \"图片\",\r\n                type: \"image\",\r\n              }\r\n            ]\r\n          },\r\n        ]\r\n      },\r\n      originWidth: 150,\r\n      originHeight: 150,\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(\"printingDesign\", {\r\n      panelSize: \"panelSize\",\r\n      compelPanelSize: \"compelPanelSize\"\r\n    }),\r\n  },\r\n  mounted() {\r\n    const self = this;\r\n    $(\".ds-tool-item\").draggable({\r\n      addClasses: false,\r\n      helper() {\r\n        let txt = $(this).text();\r\n        return $(`<div class=\"drag-item\">${txt}</div>`)\r\n      },\r\n      cursor: \"default\",\r\n      cursorAt: {\r\n        top: -5,\r\n        left: -5\r\n      },\r\n      stop(evt, ui) {\r\n        //获取鼠标在画框里的位置\r\n        const pos = dsf.math.convertLocalCoordinate(\".seat-designer-page\", { x: evt.pageX, y: evt.pageY });\r\n        const canvasWid = self.compelPanelSize.width || $(\".seat-designer-page\").width();\r\n        const canvasHit = self.compelPanelSize.height || $(\".seat-designer-page\").height();\r\n\r\n        //判断鼠标位置是否处于画框区域\r\n        if ((pos.x >= 0 && pos.x <= canvasWid) && (pos.y >= 0 && pos.y <= canvasHit)) {\r\n          const type = $(evt.target).data(\"type\");\r\n\r\n          //获取创建seat时，鼠标在panel_outer 里面得位置\r\n          const pos = dsf.math.convertLocalCoordinate(\"#panel_outer\", {\r\n            x: evt.pageX,\r\n            y: evt.pageY\r\n          }, self.panelSize.scale);\r\n\r\n          const basic = {\r\n            id: dsf.uuid(),\r\n            type: type,\r\n            left: pos.x,\r\n            top: pos.y,\r\n            width: self.originWidth,\r\n            height: self.originHeight,\r\n            angle: 0,\r\n            isFrozenSty: false,   //是否冻结style\r\n            zIndex: 1\r\n          }\r\n\r\n          let temp;\r\n          if (type === \"image\") {\r\n            temp = {\r\n              bgImg: \"\",\r\n            }\r\n            Object.assign(basic, temp)\r\n          }\r\n          if (type === \"text\") {\r\n            temp = {\r\n              text: \"\",\r\n              fontFamily: \"Microsoft YaHei\",\r\n              fontSize: 20,\r\n              letterSpacing: 2,\r\n              lineHeight: 15,\r\n              color: \"#000\",\r\n              textAlign: \"center\",\r\n              bold: false,\r\n              italic: false,\r\n              underline: false,\r\n              fontStyFrozen: false,\r\n            }\r\n            Object.assign(basic, temp)\r\n          }\r\n\r\n          //添加seat到panel\r\n          self.$store.commit(\"printingDesign/addSeat2Panel\", basic);\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./leftTools.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./leftTools.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./leftTools.vue?vue&type=template&id=016d87ec&\"\nimport script from \"./leftTools.vue?vue&type=script&lang=js&\"\nexport * from \"./leftTools.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('016d87ec')) {\n      api.createRecord('016d87ec', component.options)\n    } else {\n      api.reload('016d87ec', component.options)\n    }\n    module.hot.accept(\"./leftTools.vue?vue&type=template&id=016d87ec&\", function () {\n      api.rerender('016d87ec', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"designer/seat/printingDesign/leftTools.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm.showTool\n    ? _c(\"div\", { staticClass: \"right-tool-box\" }, [\n        _c(\n          \"div\",\n          {\n            staticClass: \"box-item\",\n            on: {\n              click: function($event) {\n                return _vm.showGroup(0)\n              }\n            }\n          },\n          [\n            _c(\n              \"el-popover\",\n              {\n                attrs: {\n                  value: _vm.groupVisible[0],\n                  placement: \"left-start\",\n                  width: \"360\",\n                  trigger: \"manual\",\n                  \"popper-class\": \"ds-seat-design-popover\"\n                }\n              },\n              [\n                _c(\"div\", { staticClass: \"header\" }, [\n                  _vm._v(\" 度量 \"),\n                  _c(\"i\", {\n                    staticClass: \"el-icon-arrow-right\",\n                    on: {\n                      click: function($event) {\n                        return _vm.closeGroup(0)\n                      }\n                    }\n                  })\n                ]),\n                _c(\"div\", { staticClass: \"inner\" }, [\n                  _c(\"div\", { staticClass: \"title\" }, [\n                    _c(\"label\", { staticClass: \"label-box\" }, [\n                      _vm._v(\"当前对象：\")\n                    ]),\n                    _c(\"span\", {\n                      domProps: { textContent: _vm._s(_vm.getInfoTypeName()) }\n                    })\n                  ]),\n                  _c(\n                    \"div\",\n                    { staticClass: \"inner-item\" },\n                    [\n                      _c(\"label\", { staticClass: \"label-box\" }, [_vm._v(\"X\")]),\n                      _c(\"el-input-number\", {\n                        attrs: {\n                          value: _vm.info.left,\n                          size: \"mini\",\n                          controls: false\n                        },\n                        on: {\n                          change: function(v) {\n                            return (_vm.info.left = v)\n                          }\n                        }\n                      }),\n                      _c(\n                        \"label\",\n                        {\n                          staticClass: \"label-box\",\n                          staticStyle: { \"margin-left\": \"5px\" }\n                        },\n                        [_vm._v(\"Y\")]\n                      ),\n                      _c(\"el-input-number\", {\n                        attrs: {\n                          value: _vm.info.top,\n                          size: \"mini\",\n                          controls: false\n                        },\n                        on: {\n                          change: function(v) {\n                            return (_vm.info.top = v)\n                          }\n                        }\n                      })\n                    ],\n                    1\n                  ),\n                  _c(\n                    \"div\",\n                    { staticClass: \"inner-item\" },\n                    [\n                      _c(\"label\", { staticClass: \"label-box\" }, [_vm._v(\"宽\")]),\n                      _c(\"el-input-number\", {\n                        attrs: {\n                          value: _vm.info.width,\n                          size: \"mini\",\n                          min: 0,\n                          controls: false\n                        },\n                        on: {\n                          change: function(v) {\n                            return _vm.updateWidth(v)\n                          }\n                        }\n                      }),\n                      _c(\n                        \"label\",\n                        {\n                          staticClass: \"label-box\",\n                          staticStyle: { \"margin-left\": \"5px\" }\n                        },\n                        [_vm._v(\"高\")]\n                      ),\n                      _c(\"el-input-number\", {\n                        attrs: {\n                          value: _vm.info.height,\n                          size: \"mini\",\n                          min: 0,\n                          controls: false\n                        },\n                        on: {\n                          change: function(v) {\n                            return _vm.updateHeight(v)\n                          }\n                        }\n                      })\n                    ],\n                    1\n                  ),\n                  _c(\n                    \"div\",\n                    { staticClass: \"inner-item\" },\n                    [\n                      _c(\"label\", { staticClass: \"label-box\" }, [\n                        _vm._v(\"角度\")\n                      ]),\n                      _c(\"el-input-number\", {\n                        attrs: {\n                          value: _vm.info.angle,\n                          size: \"mini\",\n                          min: 0,\n                          max: 360,\n                          controls: false\n                        },\n                        on: {\n                          change: function(v) {\n                            return (_vm.info.angle = v)\n                          }\n                        }\n                      })\n                    ],\n                    1\n                  )\n                ]),\n                _c(\"i\", {\n                  staticClass: \"iconfont icon-resize-\",\n                  attrs: { slot: \"reference\" },\n                  slot: \"reference\"\n                })\n              ]\n            )\n          ],\n          1\n        ),\n        _vm.info.type === \"text\"\n          ? _c(\n              \"div\",\n              {\n                staticClass: \"box-item\",\n                on: {\n                  click: function($event) {\n                    return _vm.showGroup(1)\n                  }\n                }\n              },\n              [\n                _c(\n                  \"el-popover\",\n                  {\n                    attrs: {\n                      value: _vm.groupVisible[1],\n                      placement: \"left\",\n                      width: \"360\",\n                      trigger: \"manual\",\n                      \"popper-class\": \"ds-seat-design-popover\"\n                    }\n                  },\n                  [\n                    _c(\"div\", { staticClass: \"header\" }, [\n                      _vm._v(\" 属性 \"),\n                      _c(\"i\", {\n                        staticClass: \"el-icon-arrow-right\",\n                        on: {\n                          click: function($event) {\n                            return _vm.closeGroup(1)\n                          }\n                        }\n                      })\n                    ]),\n                    _c(\"div\", { staticClass: \"inner\" }, [\n                      _c(\n                        \"div\",\n                        { staticClass: \"inner-item item-fill-row\" },\n                        [\n                          _c(\"label\", { staticClass: \"label-box\" }, [\n                            _vm._v(\"字体\")\n                          ]),\n                          _c(\n                            \"el-select\",\n                            {\n                              attrs: { value: _vm.info.fontFamily },\n                              on: {\n                                change: function(v) {\n                                  _vm.info.fontStyFrozen = false\n                                  _vm.info.fontFamily = v\n                                }\n                              }\n                            },\n                            _vm._l(_vm.fontFamilyList, function(item, it) {\n                              return _c(\"el-option\", {\n                                key: item.val,\n                                attrs: { value: item.val, label: item.text }\n                              })\n                            }),\n                            1\n                          )\n                        ],\n                        1\n                      ),\n                      _c(\n                        \"div\",\n                        { staticClass: \"inner-item item-fill-row\" },\n                        [\n                          _c(\"label\", { staticClass: \"label-box\" }, [\n                            _vm._v(\"颜色\")\n                          ]),\n                          _c(\"el-color-picker\", {\n                            attrs: { value: _vm.info.color },\n                            on: {\n                              \"active-change\": function(v) {\n                                _vm.info.fontStyFrozen = false\n                                _vm.info.color = v\n                              }\n                            }\n                          })\n                        ],\n                        1\n                      ),\n                      _c(\"div\", { staticClass: \"inner-item item-fill-row\" }, [\n                        _c(\"label\", { staticClass: \"label-box\" }, [\n                          _vm._v(\"大小\")\n                        ]),\n                        _c(\n                          \"div\",\n                          { staticClass: \"slider-warp\" },\n                          [\n                            _c(\"el-slider\", {\n                              attrs: {\n                                value: _vm.info.fontSize,\n                                \"show-input\": \"\",\n                                \"show-input-controls\": false\n                              },\n                              on: {\n                                input: function(v) {\n                                  _vm.info.fontStyFrozen = false\n                                  _vm.info.fontSize = v\n                                }\n                              }\n                            })\n                          ],\n                          1\n                        )\n                      ]),\n                      _c(\"div\", { staticClass: \"inner-item item-fill-row\" }, [\n                        _c(\"label\", { staticClass: \"label-box\" }, [\n                          _vm._v(\"行间距\")\n                        ]),\n                        _c(\n                          \"div\",\n                          { staticClass: \"slider-warp\" },\n                          [\n                            _c(\"el-slider\", {\n                              attrs: {\n                                value: _vm.info.lineHeight,\n                                \"show-input\": \"\",\n                                \"show-input-controls\": false,\n                                min: 10,\n                                max: 50\n                              },\n                              on: {\n                                input: function(v) {\n                                  _vm.info.fontStyFrozen = false\n                                  _vm.info.lineHeight = v\n                                }\n                              }\n                            })\n                          ],\n                          1\n                        )\n                      ]),\n                      _c(\"div\", { staticClass: \"inner-item item-fill-row\" }, [\n                        _c(\"label\", { staticClass: \"label-box\" }, [\n                          _vm._v(\"字间距\")\n                        ]),\n                        _c(\n                          \"div\",\n                          { staticClass: \"slider-warp\" },\n                          [\n                            _c(\"el-slider\", {\n                              attrs: {\n                                value: _vm.info.letterSpacing,\n                                \"show-input\": \"\",\n                                \"show-input-controls\": false,\n                                max: 50\n                              },\n                              on: {\n                                input: function(v) {\n                                  _vm.info.fontStyFrozen = false\n                                  _vm.info.letterSpacing = v\n                                }\n                              }\n                            })\n                          ],\n                          1\n                        )\n                      ]),\n                      _c(\n                        \"div\",\n                        { staticClass: \"inner-item item-fill-row\" },\n                        [\n                          _c(\"label\", { staticClass: \"label-box\" }, [\n                            _vm._v(\"效果\")\n                          ]),\n                          _c(\n                            \"el-button-group\",\n                            [\n                              _c(\n                                \"el-button\",\n                                {\n                                  class: { active: _vm.info.italic },\n                                  attrs: { size: \"mini\" },\n                                  on: {\n                                    click: function(v) {\n                                      _vm.info.fontStyFrozen = false\n                                      _vm.info.italic = !_vm.info.italic\n                                    }\n                                  }\n                                },\n                                [\n                                  _c(\"dsf-icon\", {\n                                    attrs: { name: \"zitixieti\" }\n                                  })\n                                ],\n                                1\n                              ),\n                              _c(\n                                \"el-button\",\n                                {\n                                  class: { active: _vm.info.bold },\n                                  attrs: { size: \"mini\" },\n                                  on: {\n                                    click: function(v) {\n                                      _vm.info.fontStyFrozen = false\n                                      _vm.info.bold = !_vm.info.bold\n                                    }\n                                  }\n                                },\n                                [\n                                  _c(\"dsf-icon\", {\n                                    attrs: { name: \"zitijiacu\" }\n                                  })\n                                ],\n                                1\n                              ),\n                              _c(\n                                \"el-button\",\n                                {\n                                  class: { active: _vm.info.underline },\n                                  attrs: { size: \"mini\" },\n                                  on: {\n                                    click: function(v) {\n                                      _vm.info.fontStyFrozen = false\n                                      _vm.info.underline = !_vm.info.underline\n                                    }\n                                  }\n                                },\n                                [\n                                  _c(\"dsf-icon\", {\n                                    attrs: { name: \"zitixiahuaxian\" }\n                                  })\n                                ],\n                                1\n                              )\n                            ],\n                            1\n                          )\n                        ],\n                        1\n                      ),\n                      _c(\n                        \"div\",\n                        { staticClass: \"inner-item item-fill-row\" },\n                        [\n                          _c(\"label\", { staticClass: \"label-box\" }, [\n                            _vm._v(\"对齐\")\n                          ]),\n                          _c(\n                            \"el-button-group\",\n                            [\n                              _c(\n                                \"el-button\",\n                                {\n                                  class: {\n                                    active: _vm.info.textAlign === \"left\"\n                                  },\n                                  attrs: { size: \"mini\" },\n                                  on: {\n                                    click: function(v) {\n                                      _vm.info.fontStyFrozen = false\n                                      _vm.info.textAlign = \"left\"\n                                    }\n                                  }\n                                },\n                                [\n                                  _c(\"dsf-icon\", {\n                                    attrs: { name: \"zuoduiqi\" }\n                                  })\n                                ],\n                                1\n                              ),\n                              _c(\n                                \"el-button\",\n                                {\n                                  class: {\n                                    active: _vm.info.textAlign === \"center\"\n                                  },\n                                  attrs: { size: \"mini\" },\n                                  on: {\n                                    click: function(v) {\n                                      _vm.info.fontStyFrozen = false\n                                      _vm.info.textAlign = \"center\"\n                                    }\n                                  }\n                                },\n                                [\n                                  _c(\"dsf-icon\", {\n                                    attrs: { name: \"juzhongduiqi\" }\n                                  })\n                                ],\n                                1\n                              ),\n                              _c(\n                                \"el-button\",\n                                {\n                                  class: {\n                                    active: _vm.info.textAlign === \"right\"\n                                  },\n                                  attrs: { size: \"mini\" },\n                                  on: {\n                                    click: function(v) {\n                                      _vm.info.fontStyFrozen = false\n                                      _vm.info.textAlign = \"right\"\n                                    }\n                                  }\n                                },\n                                [\n                                  _c(\"dsf-icon\", {\n                                    attrs: { name: \"youduiqi\" }\n                                  })\n                                ],\n                                1\n                              )\n                            ],\n                            1\n                          )\n                        ],\n                        1\n                      ),\n                      _c(\n                        \"div\",\n                        { staticClass: \"inner-item item-fill-row\" },\n                        [\n                          _c(\"label\", { staticClass: \"label-box\" }, [\n                            _vm._v(\"内容\")\n                          ]),\n                          _c(\"el-input\", {\n                            attrs: { type: \"textarea\", rows: 4 },\n                            model: {\n                              value: _vm.info.text,\n                              callback: function($$v) {\n                                _vm.$set(_vm.info, \"text\", $$v)\n                              },\n                              expression: \"info.text\"\n                            }\n                          })\n                        ],\n                        1\n                      )\n                    ]),\n                    _c(\"i\", {\n                      staticClass: \"iconfont icon-xingzhuang-wenzi\",\n                      attrs: { slot: \"reference\" },\n                      slot: \"reference\"\n                    })\n                  ]\n                )\n              ],\n              1\n            )\n          : _vm._e(),\n        _vm.info.type === \"image\"\n          ? _c(\n              \"div\",\n              {\n                staticClass: \"box-item\",\n                on: {\n                  click: function($event) {\n                    return _vm.showGroup(2)\n                  }\n                }\n              },\n              [\n                _c(\n                  \"el-popover\",\n                  {\n                    attrs: {\n                      value: _vm.groupVisible[2],\n                      placement: \"left-start\",\n                      width: \"365\",\n                      trigger: \"manual\",\n                      \"popper-class\": \"ds-seat-design-popover\"\n                    }\n                  },\n                  [\n                    _c(\"div\", { staticClass: \"header\" }, [\n                      _vm._v(\" 上传 \"),\n                      _c(\"i\", {\n                        staticClass: \"el-icon-arrow-right\",\n                        on: {\n                          click: function($event) {\n                            return _vm.closeGroup(2)\n                          }\n                        }\n                      })\n                    ]),\n                    _c(\"div\", { staticClass: \"inner\" }, [\n                      _c(\n                        \"div\",\n                        {\n                          staticClass: \"single-upload-box\",\n                          on: { click: _vm.uploadSingle }\n                        },\n                        [\n                          _vm.info.bgImg\n                            ? _c(\"img\", {\n                                attrs: {\n                                  src: _vm.getImagePath(_vm.info.bgImg),\n                                  alt: \"\"\n                                }\n                              })\n                            : _vm._e()\n                        ]\n                      )\n                    ]),\n                    _c(\"i\", {\n                      staticClass: \"iconfont icon-tupiantianjia\",\n                      attrs: { slot: \"reference\" },\n                      slot: \"reference\"\n                    })\n                  ]\n                )\n              ],\n              1\n            )\n          : _vm._e()\n      ])\n    : _vm._e()\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div v-if=\"showTool\" class=\"right-tool-box\">\r\n    <div class=\"box-item\" @click=\"showGroup(0)\">\r\n      <el-popover\r\n        :value=\"groupVisible[0]\"\r\n        placement=\"left-start\"\r\n        width=\"360\"\r\n        trigger=\"manual\"\r\n        popper-class=\"ds-seat-design-popover\"\r\n      >\r\n        <div class=\"header\">\r\n          度量\r\n          <i class=\"el-icon-arrow-right\" @click=\"closeGroup(0)\"></i>\r\n        </div>\r\n        <div class=\"inner\">\r\n          <div class=\"title\">\r\n            <label class=\"label-box\">当前对象：</label>\r\n            <span v-text=\"getInfoTypeName()\"></span>\r\n          </div>\r\n          <div class=\"inner-item\">\r\n            <label class=\"label-box\">X</label>\r\n            <el-input-number\r\n              :value=\"info.left\"\r\n              size=\"mini\"\r\n              :controls=\"false\"\r\n              @change=\"v => info.left = v\"\r\n            ></el-input-number>\r\n            <label style=\"margin-left: 5px\" class=\"label-box\">Y</label>\r\n            <el-input-number\r\n              :value=\"info.top\"\r\n              size=\"mini\"\r\n              :controls=\"false\"\r\n              @change=\"v => info.top = v\"\r\n            ></el-input-number>\r\n          </div>\r\n          <div class=\"inner-item\">\r\n            <label class=\"label-box\">宽</label>\r\n            <el-input-number\r\n              :value=\"info.width\"\r\n              size=\"mini\"\r\n              :min=\"0\"\r\n              :controls=\"false\"\r\n              @change=\"v => updateWidth(v)\"\r\n            ></el-input-number>\r\n            <label style=\"margin-left: 5px\" class=\"label-box\">高</label>\r\n            <el-input-number\r\n              :value=\"info.height\"\r\n              size=\"mini\"\r\n              :min=\"0\"\r\n              :controls=\"false\"\r\n              @change=\"v => updateHeight(v)\"\r\n            ></el-input-number>\r\n          </div>\r\n          <div class=\"inner-item\">\r\n            <label class=\"label-box\">角度</label>\r\n            <el-input-number\r\n              :value=\"info.angle\"\r\n              size=\"mini\"\r\n              :min=\"0\"\r\n              :max=\"360\"\r\n              :controls=\"false\"\r\n              @change=\"v => info.angle = v\"\r\n            ></el-input-number>\r\n          </div>\r\n        </div>\r\n        <i slot=\"reference\" class=\"iconfont icon-resize-\"></i>\r\n      </el-popover>\r\n    </div>\r\n    <div class=\"box-item\" v-if=\"info.type === 'text'\" @click=\"showGroup(1)\">\r\n      <el-popover\r\n        :value=\"groupVisible[1]\"\r\n        placement=\"left\"\r\n        width=\"360\"\r\n        trigger=\"manual\"\r\n        popper-class=\"ds-seat-design-popover\"\r\n      >\r\n        <div class=\"header\">\r\n          属性\r\n          <i class=\"el-icon-arrow-right\" @click=\"closeGroup(1)\"></i>\r\n        </div>\r\n        <div class=\"inner\">\r\n          <div class=\"inner-item item-fill-row\">\r\n            <label class=\"label-box\">字体</label>\r\n            <el-select :value=\"info.fontFamily\" @change=\"v => {info.fontStyFrozen=false; info.fontFamily = v}\">\r\n              <el-option\r\n                v-for=\"(item, it) in fontFamilyList\"\r\n                :value=\"item.val\"\r\n                :label=\"item.text\"\r\n                :key=\"item.val\"></el-option>\r\n            </el-select>\r\n          </div>\r\n          <div class=\"inner-item item-fill-row\">\r\n            <label class=\"label-box\">颜色</label>\r\n            <el-color-picker :value=\"info.color\" @active-change=\"v => {info.fontStyFrozen = false; info.color=v}\"></el-color-picker>\r\n          </div>\r\n          <div class=\"inner-item item-fill-row\">\r\n            <label class=\"label-box\">大小</label>\r\n            <div class=\"slider-warp\">\r\n              <el-slider\r\n                :value=\"info.fontSize\"\r\n                show-input\r\n                :show-input-controls=\"false\"\r\n                @input=\"v => {info.fontStyFrozen = false; info.fontSize = v}\"></el-slider>\r\n            </div>\r\n          </div>\r\n          <div class=\"inner-item item-fill-row\">\r\n            <label class=\"label-box\">行间距</label>\r\n            <div class=\"slider-warp\">\r\n              <el-slider\r\n                :value=\"info.lineHeight\"\r\n                show-input\r\n                :show-input-controls=\"false\"\r\n                :min=\"10\"\r\n                :max=\"50\"\r\n                @input=\"v => {info.fontStyFrozen = false; info.lineHeight = v}\"></el-slider>\r\n            </div>\r\n          </div>\r\n          <div class=\"inner-item item-fill-row\">\r\n            <label class=\"label-box\">字间距</label>\r\n            <div class=\"slider-warp\">\r\n              <el-slider\r\n                :value=\"info.letterSpacing\"\r\n                show-input\r\n                :show-input-controls=\"false\"\r\n                :max=\"50\"\r\n                @input=\"v => {info.fontStyFrozen = false; info.letterSpacing = v}\"></el-slider>\r\n            </div>\r\n          </div>\r\n          <div class=\"inner-item item-fill-row\">\r\n            <label class=\"label-box\">效果</label>\r\n            <el-button-group>\r\n              <el-button size=\"mini\" :class=\"{active: info.italic}\" @click=\"v => {info.fontStyFrozen = false; info.italic = !info.italic}\">\r\n                <dsf-icon name=\"zitixieti\"></dsf-icon>\r\n              </el-button>\r\n              <el-button size=\"mini\" :class=\"{active: info.bold}\" @click=\"v => {info.fontStyFrozen = false; info.bold = !info.bold}\">\r\n                <dsf-icon name=\"zitijiacu\"></dsf-icon>\r\n              </el-button>\r\n              <el-button size=\"mini\" :class=\"{active: info.underline}\" @click=\"v => {info.fontStyFrozen = false; info.underline = !info.underline}\">\r\n                <dsf-icon name=\"zitixiahuaxian\"></dsf-icon>\r\n              </el-button>\r\n            </el-button-group>\r\n          </div>\r\n          <div class=\"inner-item item-fill-row\">\r\n            <label class=\"label-box\">对齐</label>\r\n            <el-button-group>\r\n              <el-button size=\"mini\" :class=\"{active: info.textAlign === 'left'}\" @click=\"v => {info.fontStyFrozen = false; info.textAlign = 'left'}\">\r\n                <dsf-icon name=\"zuoduiqi\"></dsf-icon>\r\n              </el-button>\r\n              <el-button size=\"mini\" :class=\"{active: info.textAlign === 'center'}\" @click=\"v => {info.fontStyFrozen = false; info.textAlign = 'center'}\">\r\n                <dsf-icon name=\"juzhongduiqi\"></dsf-icon>\r\n              </el-button>\r\n              <el-button size=\"mini\" :class=\"{active: info.textAlign === 'right'}\" @click=\"v => {info.fontStyFrozen = false; info.textAlign = 'right'}\">\r\n                <dsf-icon name=\"youduiqi\"></dsf-icon>\r\n              </el-button>\r\n            </el-button-group>\r\n          </div>\r\n          <div class=\"inner-item item-fill-row\">\r\n            <label class=\"label-box\">内容</label>\r\n            <el-input type=\"textarea\" :rows=\"4\" v-model=\"info.text\"></el-input>\r\n          </div>\r\n        </div>\r\n        <i slot=\"reference\" class=\"iconfont icon-xingzhuang-wenzi\"></i>\r\n      </el-popover>\r\n    </div>\r\n    <div class=\"box-item\" v-if=\"info.type === 'image'\" @click=\"showGroup(2)\">\r\n      <el-popover\r\n        :value=\"groupVisible[2]\"\r\n        placement=\"left-start\"\r\n        width=\"365\"\r\n        trigger=\"manual\"\r\n        popper-class=\"ds-seat-design-popover\"\r\n      >\r\n        <div class=\"header\">\r\n          上传\r\n          <i class=\"el-icon-arrow-right\" @click=\"closeGroup(2)\"></i>\r\n        </div>\r\n        <div class=\"inner\">\r\n          <div class=\"single-upload-box\" @click=\"uploadSingle\">\r\n            <img v-if=\"info.bgImg\" :src=\"getImagePath(info.bgImg)\" alt=\"\">\r\n          </div>\r\n        </div>\r\n        <i slot=\"reference\" class=\"iconfont icon-tupiantianjia\"></i>\r\n      </el-popover>\r\n    </div>\r\n  \r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import eventBus from \"_platform/designer/seat/util/eventBus\";\r\n  import {eventBusEvent} from \"_platform/designer/seat/constant\";\r\n  import {\r\n    uploadImg,\r\n    createUploadFileInput\r\n  } from \"../func\"\r\n  import {mapState} from \"vuex\"\r\n  \r\n  export default {\r\n    name: \"RightTools\",\r\n    props: {},\r\n    data() {\r\n      return {\r\n        showTool: false,\r\n        info: {},\r\n        groupVisible: [false, false, false],\r\n        visiblePointer: null,\r\n        oldVisibleStatus: false,\r\n        fontFamilyList: [\r\n          {val: \"SimSun\", text: \"宋体\"},\r\n          {val: \"FangSong\", text: \"仿宋\"},\r\n          {val: \"KaiTi\", text: \"楷书\"},\r\n          {val: \"SimHei\", text: \"黑体\"},\r\n          {val: \"Microsoft YaHei\", text: \"微软雅黑\"},\r\n          {val: \"YouYuan\", text: \"幼圆\"},\r\n          {val: \"LiSu\", text: \"隶书\"},\r\n        ]\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapState(\"printingDesign\", {\r\n        activeId: \"activeId\",\r\n      }),\r\n    },\r\n    watch: {\r\n      activeId(val) {\r\n        if (!val) {\r\n          this.showTool = false;\r\n          const arr = new Array(3);\r\n          this.groupVisible = _.fill(arr, false);\r\n        } else {\r\n          eventBus.emit(eventBusEvent.GET_ACTIVE_SEAT, seat => {\r\n            this.info = seat;\r\n          });\r\n          \r\n          this.showTool = true;\r\n          this.$nextTick(() => {\r\n            this.$set(this.groupVisible, this.visiblePointer, this.oldVisibleStatus);\r\n          })\r\n        }\r\n      },\r\n      \r\n      info: {\r\n        handler(val) {\r\n          this.$store.commit(\"printingDesign/changeSeatInfo\", val);\r\n        },\r\n        deep: false\r\n      }\r\n    },\r\n    methods: {\r\n      uploadSingle() {\r\n        const self = this;\r\n        let upDOM = createUploadFileInput();\r\n        $(upDOM).on(\"change\", function () {\r\n          if (!upDOM.files || upDOM.files.length === 0) return false;\r\n          \r\n          const formData = new FormData();\r\n          formData.append(\"file\", upDOM.files[0]);\r\n          const callback = result => {\r\n            //清除创建的input\r\n            $(upDOM).val(\"\");\r\n            $(upDOM).remove();\r\n            upDOM = null;\r\n            \r\n            if (result === \"error\") return false;\r\n            self.info.bgImg = result[0].relativePath;\r\n          };\r\n          uploadImg.call(self, formData, callback);\r\n        })\r\n        $(upDOM).click();\r\n      },\r\n      closeGroup(pointer) {\r\n        this.visiblePointer = pointer;\r\n        this.$set(this.groupVisible, pointer, false);\r\n        this.oldVisibleStatus = false;\r\n      },\r\n      showGroup(pointer) {\r\n        this.visiblePointer = pointer;\r\n        const arr = new Array(3);\r\n        this.groupVisible = _.fill(arr, false);\r\n        this.$set(this.groupVisible, pointer, true);\r\n        this.oldVisibleStatus = true;\r\n      },\r\n      getImagePath(path) {\r\n        return path ? dsf.url.getWebPath(path) : null;\r\n      },\r\n      getInfoTypeName() {\r\n        switch (this.info.type) {\r\n          case 'text':\r\n            return '文本'\r\n          case 'image':\r\n            return '图片'\r\n        }\r\n      },\r\n      updateWidth(width) {\r\n        this.info.width = width;\r\n      },\r\n      updateHeight(height) {\r\n        this.info.height = height;\r\n      },\r\n    }\r\n  }\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rightTools.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rightTools.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./rightTools.vue?vue&type=template&id=8a433a12&\"\nimport script from \"./rightTools.vue?vue&type=script&lang=js&\"\nexport * from \"./rightTools.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('8a433a12')) {\n      api.createRecord('8a433a12', component.options)\n    } else {\n      api.reload('8a433a12', component.options)\n    }\n    module.hot.accept(\"./rightTools.vue?vue&type=template&id=8a433a12&\", function () {\n      api.rerender('8a433a12', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"designer/seat/printingDesign/rightTools.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    {\n      staticClass: \"seat-designer-page\",\n      style: _vm.canvasCss,\n      on: {\n        mousedown: function($event) {\n          if (\n            !$event.type.indexOf(\"key\") &&\n            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n              \"Left\",\n              \"ArrowLeft\"\n            ])\n          ) {\n            return null\n          }\n          if (\"button\" in $event && $event.button !== 0) {\n            return null\n          }\n          return _vm.preRegion($event)\n        }\n      }\n    },\n    [\n      _c(\"region\", {\n        attrs: { visible: _vm.regionVisible, region: _vm.regionRect }\n      }),\n      _c(\n        \"div\",\n        { style: _vm.panelSty, attrs: { id: \"panel_outer\" } },\n        [\n          _vm._t(\"seat\"),\n          _c(\"div\", {\n            staticClass: \"ds_seat_panel_bg\",\n            attrs: { id: \"panel_bg\" }\n          })\n        ],\n        2\n      ),\n      _vm._t(\"seatPop\")\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm.visible\n    ? _c(\"div\", { staticClass: \"region\", style: _vm.regionSty })\n    : _vm._e()\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div v-if=\"visible\" class=\"region\" :style=\"regionSty\"></div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"Region\",\r\n    props: {\r\n      visible: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      region: {\r\n        type: Object,\r\n        default() {\r\n          return {}\r\n        }\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        test: false\r\n      }\r\n    },\r\n    computed: {\r\n      regionSty() {\r\n        return {\r\n          left: this.region.left + \"px\",\r\n          top: this.region.top + \"px\",\r\n          width: this.region.width + \"px\",\r\n          height: this.region.height + \"px\",\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n\r\n    }\r\n  }\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./region.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./region.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./region.vue?vue&type=template&id=7251ee4c&\"\nimport script from \"./region.vue?vue&type=script&lang=js&\"\nexport * from \"./region.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('7251ee4c')) {\n      api.createRecord('7251ee4c', component.options)\n    } else {\n      api.reload('7251ee4c', component.options)\n    }\n    module.hot.accept(\"./region.vue?vue&type=template&id=7251ee4c&\", function () {\n      api.rerender('7251ee4c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"designer/seat/printingDesign/region.vue\"\nexport default component.exports","<template>\r\n  <div class=\"seat-designer-page\" :style=\"canvasCss\" @mousedown.left=\"preRegion\">\r\n    <region :visible=\"regionVisible\" :region=\"regionRect\"></region>\r\n    <div id=\"panel_outer\" :style=\"panelSty\">\r\n      <slot name=\"seat\"></slot>\r\n      <div id=\"panel_bg\" class=\"ds_seat_panel_bg\"></div>\r\n    </div>\r\n    <slot name=\"seatPop\"></slot>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {mapState} from 'vuex';\r\n  import region from \"_platform/designer/seat/printingDesign/region\"\r\n\r\n  export default {\r\n    name: \"Canvas\",\r\n    components: {\r\n      region,\r\n    },\r\n    data() {\r\n      return {\r\n        regionVisible: false,\r\n        regionRect: {},   //框选\r\n      }\r\n    },\r\n\r\n    computed: {\r\n      ...mapState('printingDesign', {\r\n        compelPanelSize: \"compelPanelSize\",\r\n        panelSize: \"panelSize\",\r\n        canvasCss(state) {\r\n          const {width, height} = state.compelPanelSize;\r\n          let _wid = width ? `${width}px` : '100%';\r\n          let _hit = height ? `${height}px` : '100%';\r\n          return {width: _wid, height: _hit}\r\n        },\r\n        panelParentSize(state) {\r\n          let {width, height} = state.compelPanelSize;\r\n          console.log(width)\r\n          console.log(height)\r\n          width = width || $(\".seat-designer-page\").width();\r\n          height = height || $(\".seat-designer-page\").height();\r\n          return {\r\n            width: width,\r\n            height: height\r\n          }\r\n        }\r\n      }),\r\n      panelSty() {\r\n        return {\r\n          width: this.panelSize.width ? this.panelSize.width + \"px\" : \"100%\",\r\n          height: this.panelSize.height ? this.panelSize.height + \"px\" : \"100%\",\r\n          left: this.panelSize.left + \"px\",\r\n          top: this.panelSize.top + \"px\"\r\n        }\r\n      },\r\n    },\r\n    watch: {\r\n      \"compelPanelSize\": {\r\n        handler({width, height}) {\r\n          const panelSize = {\r\n            width: width,\r\n            height: height,\r\n            scale: 1,\r\n            left: 0,\r\n            top: 0\r\n          }\r\n\r\n          this.$store.commit(\"printingDesign/changePanelSize\", panelSize);\r\n        },\r\n        deep: true\r\n\r\n      },\r\n    },\r\n    mounted() {\r\n      const self = this;\r\n      $(\".seat-designer-page\")[0].addEventListener('mousewheel', self.handleScroll);\r\n\r\n    },\r\n    methods: {\r\n      handleScroll(evt) {\r\n        if (!evt.ctrlKey) return;\r\n        const self = this;\r\n        let wheelAction = evt.wheelDelta < 0 ? \"down\" : \"up\";\r\n\r\n        //获取鼠标在panel_outer中的位置\r\n        let pos = dsf.math.convertLocalCoordinate(\"#panel_outer\", {\r\n          x: evt.pageX,\r\n          y: evt.pageY\r\n        });\r\n\r\n        let {width: pWid, height: pHit} = self.panelParentSize;\r\n\r\n        //获取当前的实际宽度\r\n        let w = pWid * self.panelSize.scale;\r\n        let h = pHit * self.panelSize.scale;\r\n\r\n        //获取鼠标位置和宽度高度的比例值\r\n        let rw = pos.x / w;\r\n        let rh = pos.y / h;\r\n\r\n        let newS = self.panelSize.scale;\r\n        if (wheelAction === \"up\") {\r\n          newS += 0.1;\r\n        } else if (wheelAction === \"down\") {\r\n          newS -= 0.1;\r\n        }\r\n\r\n        //缩放比例最小0.1\r\n        if (newS >= 0.1) {\r\n          let panel = $(\"#panel_outer\");\r\n          let sw = pWid * newS;\r\n          let sh = pHit * newS;\r\n          let l = panel.position().left + pos.x - (sw * rw);\r\n          let t = panel.position().top + pos.y - (sh * rh);\r\n          const panelSize = {\r\n            scale: Math.round(newS * 10) / 10,\r\n            width: Math.floor(sw),\r\n            height: Math.floor(sh),\r\n            left: Math.floor(l),\r\n            top: Math.floor(t)\r\n          };\r\n          self.$store.commit(\"printingDesign/changePanelSize\", panelSize);\r\n        }\r\n\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n      },\r\n      preRegion(evt) {\r\n        const self = this;\r\n        self.$store.commit(\"printingDesign/changeActiveId\", \"\");\r\n        let downPos = dsf.math.convertLocalCoordinate('.seat-designer-page', { x: evt.pageX, y: evt.pageY });\r\n        function handleMouseMove(evt){\r\n          self.regionVisible = true;\r\n          let movePos = dsf.math.convertLocalCoordinate('.seat-designer-page', { x: evt.pageX, y: evt.pageY });\r\n          self.$set(self.regionRect, \"left\", downPos.x > movePos.x? movePos.x: downPos.x);\r\n          self.$set(self.regionRect, \"top\", downPos.y > movePos.y? movePos.y: downPos.y);\r\n          self.$set(self.regionRect, \"width\", Math.abs(movePos.x - downPos.x));\r\n          self.$set(self.regionRect, \"height\",Math.abs(movePos.y - downPos.y));\r\n        }\r\n        function handleMouseUp(){\r\n          $(document).off(\"mousemove.region\");\r\n          self.$store.commit(\"printingDesign/changeRegionPosition\", self.regionRect);\r\n          self.regionVisible = false;\r\n          self.regionRect = {};\r\n        }\r\n\r\n        $(document).off(\"mousemove.region\");\r\n        $(document).on(\"mousemove.region\", function (evt) {\r\n          handleMouseMove(evt);\r\n        })\r\n        $(document).one(\"mouseup.region\", function () {\r\n          handleMouseUp();\r\n        })\r\n\r\n      },\r\n    },\r\n\r\n  }\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./canvas.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./canvas.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./canvas.vue?vue&type=template&id=402e6ab0&\"\nimport script from \"./canvas.vue?vue&type=script&lang=js&\"\nexport * from \"./canvas.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('402e6ab0')) {\n      api.createRecord('402e6ab0', component.options)\n    } else {\n      api.reload('402e6ab0', component.options)\n    }\n    module.hot.accept(\"./canvas.vue?vue&type=template&id=402e6ab0&\", function () {\n      api.rerender('402e6ab0', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"designer/seat/printingDesign/canvas.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"seat-item-container normal\" },\n    [\n      _vm.verLine.visible\n        ? _c(\"div\", { staticClass: \"vertical-line\", style: _vm.verLineSty })\n        : _vm._e(),\n      _vm.horLine.visible\n        ? _c(\"div\", { staticClass: \"horizontal-line\", style: _vm.horLineSty })\n        : _vm._e(),\n      _vm.selectPosition.visible\n        ? _c(\n            \"div\",\n            {\n              staticClass: \"selected-box\",\n              style: _vm.selectSty,\n              on: {\n                mousedown: function($event) {\n                  if (\n                    !$event.type.indexOf(\"key\") &&\n                    _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                      \"Left\",\n                      \"ArrowLeft\"\n                    ])\n                  ) {\n                    return null\n                  }\n                  if (\"button\" in $event && $event.button !== 0) {\n                    return null\n                  }\n                  return _vm.selectMove($event)\n                }\n              }\n            },\n            [\n              _c(\"div\", { staticClass: \"select\" }, [\n                _c(\"div\", {\n                  staticClass: \"anchor circle\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.selectRotate($event)\n                    }\n                  }\n                }),\n                _c(\"div\", { staticClass: \"anchor line\" }),\n                _c(\"div\", {\n                  staticClass: \"anchor lt\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.selectScale($event, \"lt\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor t\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.selectScale($event, \"t\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor rt\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.selectScale($event, \"rt\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor l\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.selectScale($event, \"l\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor r\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.selectScale($event, \"r\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor lb\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.selectScale($event, \"lb\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor b\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.selectScale($event, \"b\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor rb\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.selectScale($event, \"rb\")\n                    }\n                  }\n                }),\n                _c(\"div\", { staticClass: \"anchor info\" }, [\n                  _vm._v(\n                    \" 宽:\" +\n                      _vm._s(_vm.selectPosition.width) +\n                      \";高:\" +\n                      _vm._s(_vm.selectPosition.height) +\n                      \";角度:\" +\n                      _vm._s(_vm.selectPosition.angle) +\n                      \" \"\n                  )\n                ])\n              ])\n            ]\n          )\n        : _vm._e(),\n      _vm._l(_vm.items, function(item, it) {\n        return _c(\n          \"div\",\n          {\n            key: item.id,\n            staticClass: \"seat-box\",\n            class: {\n              active: _vm.activeId === item.id,\n              \"border-dash\": !_vm.showBorderLine && _vm.activeId !== item.id\n            },\n            style: _vm.getItemSty(item),\n            on: {\n              mousedown: function($event) {\n                if (\n                  !$event.type.indexOf(\"key\") &&\n                  _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                    \"Left\",\n                    \"ArrowLeft\"\n                  ])\n                ) {\n                  return null\n                }\n                if (\"button\" in $event && $event.button !== 0) {\n                  return null\n                }\n                return _vm.preMove($event, item)\n              }\n            }\n          },\n          [\n            _c(\n              \"div\",\n              {\n                staticClass: \"seat\",\n                on: {\n                  dblclick: function($event) {\n                    $event.stopPropagation()\n                    return _vm.openEdit($event, item)\n                  }\n                }\n              },\n              [\n                _c(\"div\", {\n                  staticClass: \"anchor circle\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.preRotate($event, item)\n                    }\n                  }\n                }),\n                _c(\"div\", { staticClass: \"anchor line\" }),\n                _c(\"div\", {\n                  staticClass: \"anchor lt\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.preScale($event, item, \"lt\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor t\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.preScale($event, item, \"t\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor rt\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.preScale($event, item, \"rt\")\n                    }\n                  }\n                }),\n                item.type === \"text\"\n                  ? _c(\"p\", { style: _vm.getFontSty(item) }, [\n                      _vm._v(_vm._s(item.text))\n                    ])\n                  : _vm._e(),\n                _c(\"div\", {\n                  staticClass: \"anchor l\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.preScale($event, item, \"l\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor r\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.preScale($event, item, \"r\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor lb\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.preScale($event, item, \"lb\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor b\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.preScale($event, item, \"b\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor rb\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.preScale($event, item, \"rb\")\n                    }\n                  }\n                }),\n                _c(\"div\", { staticClass: \"anchor info\" }, [\n                  _vm._v(\n                    \"宽:\" +\n                      _vm._s(item.width) +\n                      \";高:\" +\n                      _vm._s(item.height) +\n                      \";角度:\" +\n                      _vm._s(item.angle)\n                  )\n                ])\n              ]\n            )\n          ]\n        )\n      })\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"seat-item-container normal\">\r\n    <!--参考线-->\r\n    <div v-if=\"verLine.visible\" class=\"vertical-line\" :style=\"verLineSty\"></div>\r\n    <div v-if=\"horLine.visible\" class=\"horizontal-line\" :style=\"horLineSty\"></div>\r\n    \r\n    <!--select框-->\r\n    <div v-if=\"selectPosition.visible\" class=\"selected-box\" :style=\"selectSty\" @mousedown.left=\"selectMove\">\r\n      <div class=\"select\">\r\n        <div class=\"anchor circle\" @mousedown.left=\"selectRotate\"></div>\r\n        <div class=\"anchor line\"></div>\r\n        <div class=\"anchor lt\" @mousedown.left=\"selectScale($event, 'lt')\"></div>\r\n        <div class=\"anchor t\" @mousedown.left=\"selectScale($event, 't')\"></div>\r\n        <div class=\"anchor rt\" @mousedown.left=\"selectScale($event, 'rt')\"></div>\r\n        <div class=\"anchor l\" @mousedown.left=\"selectScale($event, 'l')\"></div>\r\n        <div class=\"anchor r\" @mousedown.left=\"selectScale($event, 'r')\"></div>\r\n        <div class=\"anchor lb\" @mousedown.left=\"selectScale($event, 'lb')\"></div>\r\n        <div class=\"anchor b\" @mousedown.left=\"selectScale($event, 'b')\"></div>\r\n        <div class=\"anchor rb\" @mousedown.left=\"selectScale($event, 'rb')\"></div>\r\n        <div class=\"anchor info\">\r\n          宽:{{ selectPosition.width }};高:{{ selectPosition.height }};角度:{{ selectPosition.angle }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <!--seat-->\r\n    <div\r\n      v-for=\"(item, it) in items\"\r\n      :key=\"item.id\"\r\n      class=\"seat-box\"\r\n      :style=\"getItemSty(item)\"\r\n      :class=\"{active: activeId === item.id, 'border-dash': !showBorderLine && (activeId !== item.id)}\"\r\n      @mousedown.left=\"preMove($event, item)\"\r\n    >\r\n      <div class=\"seat\" @dblclick.stop=\"openEdit($event, item)\">\r\n        <div class=\"anchor circle\" @mousedown.left=\"preRotate($event, item)\"></div>\r\n        <div class=\"anchor line\"></div>\r\n        <div class=\"anchor lt\" @mousedown.left=\"preScale($event, item, 'lt')\"></div>\r\n        <div class=\"anchor t\" @mousedown.left=\"preScale($event, item, 't')\"></div>\r\n        <div class=\"anchor rt\" @mousedown.left=\"preScale($event, item, 'rt')\"></div>\r\n        <p v-if=\"item.type === 'text' \" :style=\"getFontSty(item)\">{{ item.text }}</p>\r\n        <div class=\"anchor l\" @mousedown.left=\"preScale($event, item, 'l')\"></div>\r\n        <div class=\"anchor r\" @mousedown.left=\"preScale($event, item, 'r')\"></div>\r\n        <div class=\"anchor lb\" @mousedown.left=\"preScale($event, item, 'lb')\"></div>\r\n        <div class=\"anchor b\" @mousedown.left=\"preScale($event, item, 'b')\"></div>\r\n        <div class=\"anchor rb\" @mousedown.left=\"preScale($event, item, 'rb')\"></div>\r\n        <div class=\"anchor info\">宽:{{ item.width }};高:{{ item.height }};角度:{{ item.angle }}</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {mapState} from 'vuex';\r\n  import eventBus from \"_platform/designer/seat/util/eventBus\";\r\n  import {eventBusEvent} from \"_platform/designer/seat/constant\";\r\n  import {forzenOtherItems} from \"_platform/designer/seat/func\";\r\n  \r\n  export default {\r\n    name: \"SeatItem\",\r\n    props: {\r\n      //所有座位\r\n      items: {\r\n        type: Array,\r\n        default() {\r\n          return []\r\n        }\r\n      },\r\n    },\r\n    data() {\r\n      return {\r\n        selectedItems: [],  //被选中座位(注:selectedItems各项与items各项引用的是同一个对象，改变selectedItems就会影响到items)\r\n        rectMinSize: [40, 40],    //缩放seat时的最小宽高\r\n        selectPosition: {   //框选的位置\r\n          top: 0,\r\n          left: 0,\r\n          width: 0,\r\n          height: 0,\r\n          visible: false\r\n        },\r\n        //垂直对齐线\r\n        verLine: {\r\n          left: 0,\r\n          visible: false\r\n        },\r\n        //水平对齐线\r\n        horLine: {\r\n          top: 0,\r\n          visible: false\r\n        },\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapState(\"printingDesign\", {\r\n        panelSize: \"panelSize\",\r\n        newSeatItem: \"newSeatItem\",\r\n        activeId: \"activeId\",\r\n        regionPosition: \"regionPosition\",\r\n        seatInfo: \"seatInfo\",\r\n        showBorderLine: \"showBorderLine\"\r\n      }),\r\n      selectSty() {\r\n        const {scale} = this.panelSize;\r\n        return {\r\n          width: this.selectPosition.width * scale + \"px\",\r\n          height: this.selectPosition.height * scale + \"px\",\r\n          left: this.selectPosition.left * scale + \"px\",\r\n          top: this.selectPosition.top * scale + \"px\",\r\n          transform: `rotate(${this.selectPosition.angle}deg)`\r\n        }\r\n      },\r\n      verLineSty() {\r\n        return {\r\n          left: `${this.verLine.left * this.panelSize.scale}` + \"px\"\r\n        }\r\n      },\r\n      horLineSty() {\r\n        return {\r\n          top: `${this.horLine.top * this.panelSize.scale}` + \"px\"\r\n        }\r\n      },\r\n    },\r\n    \r\n    watch: {\r\n      newSeatItem(val) {\r\n        //冻结style, 避免重复渲染\r\n        forzenOtherItems.call(this);\r\n        //这里复制一个新的seat对象, 避免 vue里面 newSeatItem的迷之改变行为\r\n        const seatItem = _.assign({}, val);\r\n        this.items.push(seatItem);\r\n      },\r\n      regionPosition(val) {\r\n        const self = this;\r\n        //如果 regionPosition 的范围大小为0\r\n        if (_.isEmpty(val) || val.width === 0 || val.height === 0) {\r\n          forzenOtherItems.call(self);\r\n          self.selectedItems = [];\r\n          restSelectPostion.call(self);\r\n          return;\r\n        }\r\n        \r\n        self.selectedItems = _.filter(self.items, item => judgePos.call(self, item));\r\n        forzenOtherItems.call(self);\r\n        \r\n        if (self.selectedItems.length === 0) return;\r\n        \r\n        if (self.selectedItems.length === 1) {\r\n          self.$store.commit(\"printingDesign/changeActiveId\", self.selectedItems[0].id)\r\n        } else if (self.selectedItems.length > 1) {\r\n          self.selectPosition = getSelectPosition(self.selectedItems);\r\n        }\r\n      },\r\n      seatInfo: {\r\n        handler(val, oldVal) {\r\n          let index = _.findIndex(this.items, item => item.id === val.id);\r\n          this.$set(this.items, index, val);\r\n        },\r\n        deep: false\r\n      },\r\n      selectedItems(val) {\r\n        if (val && val.length > 0) {\r\n          this.$store.commit(\"printingDesign/changeHaveSelectedItems\", true)\r\n        } else {\r\n          this.$store.commit(\"printingDesign/changeHaveSelectedItems\", false)\r\n        }\r\n      },\r\n    },\r\n    beforeDestroy() {\r\n      $(document).off(\"mouseup.scaleSeatItem\");\r\n      $(document).off(\"mousemove.scaleSeatItem\");\r\n    },\r\n    mounted() {\r\n      eventBus.on(eventBusEvent.KEY_CTRL_D, () => {\r\n        restSelectPostion.call(this);\r\n        this.selectedItems = [];\r\n        this.$store.commit(\"printingDesign/changeActiveId\", \"\");\r\n      })\r\n      eventBus.on(eventBusEvent.KEY_DELETE, () => {\r\n        this.deleteActiveSeatItem();\r\n      })\r\n      eventBus.on(eventBusEvent.GET_ACTIVE_SEAT, (callback) => {\r\n        const seat = this.items.find(item => item.id === this.activeId);\r\n        callback && callback(seat);\r\n      })\r\n      eventBus.on(eventBusEvent.LEVEL_UP, ()=>{\r\n        if (!_.isArray(this.selectedItems) || this.selectedItems.length === 0) return;\r\n        forzenOtherItems.call(this);\r\n        this.selectedItems.forEach(a => a.zIndex += 1);\r\n      })\r\n      eventBus.on(eventBusEvent.LEVEL_DOWN, ()=>{\r\n        if (!_.isArray(this.selectedItems) || this.selectedItems.length === 0) return;\r\n        forzenOtherItems.call(this);\r\n        this.selectedItems.forEach(a => a.zIndex = a.zIndex>1 ? a.zIndex-1: 1);\r\n      })\r\n    },\r\n    methods: {\r\n      getItemSty(item) {\r\n        if (item.isFrozenSty) return item.style;\r\n        const scale = this.panelSize.scale;\r\n        const sty = {\r\n          width: item.width * scale + \"px\",\r\n          height: item.height * scale + \"px\",\r\n          left: item.left * scale + \"px\",\r\n          top: item.top * scale + \"px\",\r\n          zIndex: item.zIndex,\r\n          transform: `rotate(${item.angle}deg)`\r\n        }\r\n        if (item.type !== \"text\") {\r\n          sty.background = getBgSty(item);\r\n        }\r\n        item.style = sty;\r\n        return sty\r\n      },\r\n      getFontSty(item) {\r\n        const scale = this.panelSize.scale;\r\n        if (item.fontStyFrozen) return item.fontSty;\r\n        console.log(\"重新计算font样式\")\r\n  \r\n        const style = {\r\n          color: item.color,\r\n          whiteSpace: 'pre-wrap',\r\n          fontSize : item.fontSize * scale + \"px\",\r\n          letterSpacing : item.letterSpacing * scale + \"px\",\r\n          lineHeight : (item.lineHeight / 10) * item.fontSize * scale + \"px\",\r\n          textAlign : item.textAlign,\r\n          fontStyle : item.italic? 'italic': 'normal',\r\n          fontWeight : item.bold? 'bold': 'normal',\r\n          fontFamily : item.fontFamily,\r\n          textDecoration : item.underline? 'underline': 'none',\r\n        }\r\n        item.fontSty = style;\r\n        item.fontStyFrozen = true;\r\n        return style\r\n      },\r\n      clearSelectedItems() {\r\n        this.selectedItems = [];\r\n        restSelectPostion.call(this);\r\n        this.$store.commit(\"printingDesign/changeActiveId\", \"\");\r\n      },\r\n      preScale(event, seatItem, action) {\r\n        event.stopPropagation();\r\n        event.preventDefault();\r\n        const self = this;\r\n        //重新计算style\r\n        forzenOtherItems.call(self, false);\r\n        const oldRect = _.assign({}, seatItem);\r\n        const newRect = _.assign({}, seatItem);\r\n        \r\n        //获取seat 缩放时参考的锚点\r\n        const basePoint = getRectBasePointByScale(oldRect, action);\r\n        \r\n        function handleScale(evt) {\r\n          if (!action || !basePoint) return;\r\n          let mousePosition = dsf.math.convertLocalCoordinate(\"#panel_outer\", {\r\n            x: evt.pageX,\r\n            y: evt.pageY\r\n          }, self.panelSize.scale);\r\n          let afterScaleRect = scaleRect(\r\n            basePoint, oldRect, newRect, mousePosition, action, self.rectMinSize\r\n          );\r\n          _.assign(seatItem, afterScaleRect);\r\n        }\r\n        \r\n        function handleUp() {\r\n          forzenOtherItems.call(self);\r\n          $(document).off(\"mousemove.scaleSeatItem\");\r\n        }\r\n        \r\n        $(document).off(\"mousemove.scaleSeatItem\");\r\n        $(document).on(\"mousemove.scaleSeatItem\", _.debounce(function (evt) {\r\n          evt.preventDefault();\r\n          evt.stopPropagation();\r\n          handleScale(evt);\r\n        }, 5));\r\n        $(document).one(\"mouseup.scaleSeatItem\", function () {\r\n          handleUp();\r\n        })\r\n      },\r\n      preMove(evt, seat) {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        const self = this;\r\n        setRect2Active.call(self, seat);\r\n        forzenOtherItems.call(self);\r\n  \r\n        self.verLine.visible = false;\r\n        self.horLine.visible = false;\r\n        \r\n        const _otherSeatPoints = getOtherSeatPoints.call(self);\r\n        const otherSeatXy = getPointsXy(_otherSeatPoints);\r\n        \r\n        //用于计算seat的位置\r\n        const old_x = seat.left;\r\n        const old_y = seat.top;\r\n        let downPos = dsf.math.convertLocalCoordinate('#panel_outer', {\r\n          x: evt.pageX,\r\n          y: evt.pageY\r\n        }, self.panelSize.scale);\r\n        \r\n        function handleMove(evt) {\r\n          let localPos = dsf.math.convertLocalCoordinate('#panel_outer', {\r\n            x: evt.pageX,\r\n            y: evt.pageY\r\n          }, self.panelSize.scale);\r\n          let moveDir = {\r\n            x: localPos.x - downPos.x,\r\n            y: localPos.y - downPos.y\r\n          };\r\n          seat.left = parseInt(old_x + moveDir.x);\r\n          seat.top = parseInt(old_y + moveDir.y);\r\n          \r\n          //计算对齐线位置\r\n          self.verLine.visible = false;\r\n          self.horLine.visible = false;\r\n          const _seatPoints = getRectPoint(seat, ['lt']);\r\n          const seatXy = getPointsXy(_seatPoints);\r\n          let a = computeAlignLine(seatXy, otherSeatXy, seat);\r\n          if (!a) return;\r\n          self.horLine.top = a.top;\r\n          self.horLine.visible = _.isNumber(a.top);\r\n          self.verLine.left = a.left;\r\n          self.verLine.visible = _.isNumber(a.left);\r\n        }\r\n        \r\n        function handleUp() {\r\n          $(document).off(\"mousemove.moveSeatItem\");\r\n          forzenOtherItems.call(self);\r\n          self.verLine.visible = false;\r\n          self.horLine.visible = false;\r\n        }\r\n        \r\n        $(document).off(\"mousemove.moveSeatItem\");\r\n        $(document).on(\"mousemove.moveSeatItem\", _.debounce(function (evt) {\r\n          evt.preventDefault();\r\n          evt.stopPropagation();\r\n          handleMove(evt)\r\n        }, 5));\r\n        $(document).one(\"mouseup.moveSeatItem\", function () {\r\n          handleUp()\r\n        })\r\n      },\r\n      preRotate(event, seat) {\r\n        event.stopPropagation();\r\n        event.preventDefault();\r\n        $(\".ds-seat-design\").addClass(\"is-rotating\");\r\n        const self = this;\r\n        forzenOtherItems.call(self);\r\n        \r\n        const center = getRectCenter(seat);\r\n        \r\n        function handleRotate(evt) {\r\n          let localPos = dsf.math.convertLocalCoordinate('#panel_outer', {\r\n            x: evt.pageX,\r\n            y: evt.pageY\r\n          }, self.panelSize.scale);\r\n          seat.angle = rotateRect(center, localPos);\r\n        }\r\n        \r\n        function handleUp() {\r\n          $(document).off(\"mousemove.rotateSeatItem\");\r\n          forzenOtherItems.call(self);\r\n          $(\".ds-seat-design\").removeClass(\"is-rotating\");\r\n          \r\n        }\r\n        \r\n        $(document).off(\"mousemove.rotateSeatItem\");\r\n        $(document).on(\"mousemove.rotateSeatItem\", _.debounce(function (evt) {\r\n          evt.preventDefault();\r\n          evt.stopPropagation();\r\n          handleRotate(evt);\r\n        }, 5));\r\n        $(document).one(\"mouseup.rotateSeatItem\", function () {\r\n          handleUp()\r\n        })\r\n      },\r\n      selectRotate(evt) {\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n        $(\".ds-seat-design\").addClass(\"is-rotating\");\r\n        const self = this;\r\n        forzenOtherItems.call(self);\r\n        const oldRect = _.assign({}, self.selectPosition);\r\n        const center = getRectCenter(oldRect);\r\n        const seatObj = {};\r\n        self.items.forEach(seat => {\r\n          seatObj[seat.id] = _.assign({}, seat);\r\n        });\r\n        \r\n        function handleRotate(evt) {\r\n          let localPos = dsf.math.convertLocalCoordinate('#panel_outer', {\r\n            x: evt.pageX,\r\n            y: evt.pageY\r\n          }, self.panelSize.scale);\r\n          let angle = rotateRect(center, localPos);\r\n          let offsetAngle = angle - oldRect.angle;\r\n          self.selectPosition.angle = angle;\r\n          \r\n          //旋转被框选的seat\r\n          self.selectedItems.forEach(seat => {\r\n            let oldSeat = seatObj[seat.id];\r\n            let p = dsf.math.getRotatedPiont(oldSeat.left, oldSeat.top, center.x, center.y, angle);\r\n            let l = p.x + oldSeat.width / 2;\r\n            let t = p.y + oldSeat.height / 2;\r\n            let c = dsf.math.getRotatedPiont(l, t, p.x, p.y, angle);\r\n            p = dsf.math.getRotatedPiont(p.x, p.y, c.x, c.y, -angle);\r\n            seat.top = parseInt(p.y);\r\n            seat.left = parseInt(p.x);\r\n            seat.angle = (oldSeat.angle + offsetAngle) % 360;\r\n            if (oldSeat.angle < 0) seat.angle = 360 + oldSeat.angle;\r\n          })\r\n        }\r\n        \r\n        function handleUp() {\r\n          $(\".ds-seat-design\").removeClass(\"is-rotating\");\r\n          self.selectPosition = getSelectPosition(self.selectedItems);\r\n          $(document).off(\"mousemove.rotateSelect\")\r\n          forzenOtherItems.call(self);\r\n        }\r\n        \r\n        $(document).off(\"mousemove.rotateSelect\");\r\n        $(document).on(\"mousemove.rotateSelect\", _.debounce(function (evt) {\r\n          evt.preventDefault();\r\n          evt.stopPropagation();\r\n          handleRotate(evt)\r\n        }, 5))\r\n        $(document).one(\"mouseup.rotateSelect\", function () {\r\n          handleUp()\r\n        })\r\n        \r\n      },\r\n      selectScale(evt, action) {\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n        const self = this;\r\n        forzenOtherItems.call(self);\r\n        const oldRect = _.assign({}, self.selectPosition);\r\n        const newRect = _.assign({}, self.selectPosition);\r\n        \r\n        //各个座位的信息\r\n        const seatObj = {};\r\n        self.items.forEach(seat => {\r\n          seatObj[seat.id] = _.assign({}, seat);\r\n        });\r\n        \r\n        //获取选框缩放时参考的锚点\r\n        const basePoint = getRectBasePointByScale(oldRect, action);\r\n        //获取seat与选框的宽高比\r\n        const ratio = getRatioBySeat2SelectBox(self.selectedItems, self.selectPosition);\r\n        \r\n        function handleScale(evt) {\r\n          if (!action || !basePoint) return;\r\n          let mousePosition = dsf.math.convertLocalCoordinate(\"#panel_outer\", {\r\n            x: evt.pageX,\r\n            y: evt.pageY\r\n          }, self.panelSize.scale);\r\n          self.selectPosition = scaleRect(basePoint, oldRect, newRect, mousePosition, action, self.rectMinSize);\r\n          \r\n          //缩放被框选的seat\r\n          self.selectedItems.forEach(item => {\r\n            let newSeat = getNewSize(seatObj[item.id], oldRect, self.selectPosition, action, ratio);\r\n            _.assign(item, newSeat)\r\n          })\r\n        }\r\n        \r\n        function handleUp() {\r\n          $(document).off(\"mousemove.scaleSelect\");\r\n          forzenOtherItems.call(self);\r\n          self.selectPosition = getSelectPosition(self.selectedItems);\r\n        }\r\n        \r\n        $(document).off(\"mousemove.scaleSelect\");\r\n        $(document).on(\"mousemove.scaleSelect\", _.debounce(function (evt) {\r\n          evt.preventDefault();\r\n          evt.stopPropagation();\r\n          handleScale(evt);\r\n        }, 5));\r\n        $(document).one(\"mouseup.scaleSelect\", function () {\r\n          handleUp();\r\n        })\r\n        \r\n      },\r\n      selectMove(evt) {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        const self = this;\r\n        forzenOtherItems.call(self);\r\n        const old_x = self.selectPosition.left;\r\n        const old_y = self.selectPosition.top;\r\n        \r\n        //各个座位的信息\r\n        const seatObj = {};\r\n        self.items.forEach(seat => {\r\n          seatObj[seat.id] = _.assign({}, seat);\r\n        });\r\n        let downPos = dsf.math.convertLocalCoordinate('#panel_outer', {\r\n          x: evt.pageX,\r\n          y: evt.pageY\r\n        }, self.panelSize.scale);\r\n        \r\n        function handleMove(evt) {\r\n          let localPos = dsf.math.convertLocalCoordinate('#panel_outer', {\r\n            x: evt.pageX,\r\n            y: evt.pageY\r\n          }, self.panelSize.scale);\r\n          let moveDir = {\r\n            x: localPos.x - downPos.x,\r\n            y: localPos.y - downPos.y\r\n          };\r\n          let left = old_x + moveDir.x;\r\n          let top = old_y + moveDir.y;\r\n          self.selectPosition.left = parseInt(left);\r\n          self.selectPosition.top = parseInt(top);\r\n          \r\n          self.selectedItems.forEach(item => {\r\n            item.left = parseInt(seatObj[item.id].left + moveDir.x);\r\n            item.top = parseInt(seatObj[item.id].top + moveDir.y);\r\n          })\r\n        }\r\n        \r\n        function handleUp() {\r\n          $(document).off(\"mousemove.moveSelect\");\r\n          forzenOtherItems.call(self);\r\n        }\r\n        \r\n        $(document).off(\"mousemove.moveSelect\");\r\n        $(document).on(\"mousemove.moveSelect\", _.debounce(function (evt) {\r\n          evt.preventDefault();\r\n          evt.stopPropagation();\r\n          handleMove(evt)\r\n        }, 5));\r\n        $(document).one(\"mouseup.moveSelect\", function () {\r\n          handleUp()\r\n        })\r\n      },\r\n      deleteActiveSeatItem() {\r\n        if (this.selectedItems.length === 0) return;\r\n        const items = _.differenceWith(this.items, this.selectedItems, (a, b) => {\r\n          return a.id === b.id\r\n        })\r\n        \r\n        this.$emit(\"update:items\", items);\r\n        this.clearSelectedItems()\r\n      },\r\n      openEdit(e, item) {\r\n        if (item.type==='image' || $(e.target).hasClass(\"anchor\")) return;\r\n        let textArea = document.createElement(\"textarea\");\r\n        const _submit = (val) => {\r\n          item.text = val;\r\n          $(textArea).remove();\r\n          textArea = null;\r\n        }\r\n        $(e.target).append(textArea)\r\n        $(textArea).val(item.text);\r\n        $(textArea).on(\"blur\", function () {\r\n          _submit($(this).val());\r\n        })\r\n        $(textArea).bind(\"keypress\", function (event) {\r\n          if (event.keyCode === 13) _submit($(this).val())\r\n        })\r\n        $(textArea).focus();\r\n      },\r\n    },\r\n  }\r\n  \r\n  \r\n  //激活单个座位\r\n  function setRect2Active(seat) {\r\n    if (this.activeId === seat.id) return;\r\n    //重置selectPosition\r\n    restSelectPostion.call(this);\r\n    //清空已选的座位\r\n    this.selectedItems = [seat];\r\n    this.$store.commit(\"printingDesign/changeActiveId\", seat.id);\r\n  }\r\n  \r\n  //判断座位是否处于region 边界内\r\n  function judgePos(seat) {\r\n    let seatPoints = getRectPoint(seat);\r\n    let pointRange = getPointRange(seatPoints);\r\n    let {left, top, scale} = this.panelSize;\r\n    let {left: regionLeft, top: regionTop, width: regionWid, height: regionHit} = this.regionPosition;\r\n    \r\n    let anchor = $(\".seat-designer-page\").offset();\r\n    let small_position = {\r\n      x: regionLeft + anchor.left,\r\n      y: regionTop + anchor.top\r\n    }\r\n    let large_position = {\r\n      x: regionLeft + anchor.left + regionWid,\r\n      y: regionTop + anchor.top + regionHit\r\n    }\r\n    small_position = dsf.math.convertLocalCoordinate(\"#panel_outer\", small_position, scale);\r\n    large_position = dsf.math.convertLocalCoordinate(\"#panel_outer\", large_position, scale);\r\n    \r\n    let a = pointRange.min_x >= small_position.x;\r\n    let b = pointRange.max_x <= large_position.x;\r\n    let c = pointRange.min_y >= small_position.y;\r\n    let d = pointRange.max_y <= large_position.y;\r\n    return a && b && c && d\r\n  }\r\n  \r\n  /**\r\n   * 获取对象上下左右四个边界点\r\n   * tar [lt|rt|rb|lb]\r\n   */\r\n  function getRectPoint(obj, tar = ['lt', 'rt', 'rb', 'lb']) {\r\n    let angle = obj.angle;\r\n    let left = obj.left;\r\n    let top = obj.top;\r\n    let right = obj.left + obj.width;\r\n    let bottom = obj.top + obj.height;\r\n    \r\n    let pos = {\r\n      lt: 0,\r\n      lb: 0,\r\n      rt: 0,\r\n      rb: 0\r\n    };\r\n    \r\n    let xCenter = (right - left) * 0.5 + left;\r\n    let yCenter = (bottom - top) * 0.5 + top;\r\n    tar.includes('lt') && (pos.lt = dsf.math.getRotatedPiont(left, top, xCenter, yCenter, angle))\r\n    tar.includes('rt') && (pos.rt = dsf.math.getRotatedPiont(right, top, xCenter, yCenter, angle))\r\n    tar.includes('rb') && (pos.rb = dsf.math.getRotatedPiont(right, bottom, xCenter, yCenter, angle))\r\n    tar.includes('lb') && (pos.lb = dsf.math.getRotatedPiont(left, bottom, xCenter, yCenter, angle))\r\n    return pos;\r\n  }\r\n  \r\n  //获取rect 缩放时参考的锚点\r\n  function getRectBasePointByScale(rect, action) {\r\n    let basePoint = {};\r\n    if (action.length > 1) {\r\n      if (action.indexOf(\"l\") >= 0) {\r\n        basePoint.x = rect.left + rect.width;\r\n      } else {\r\n        basePoint.x = rect.left;\r\n      }\r\n      if (action.indexOf(\"t\") >= 0) {\r\n        basePoint.y = rect.top + rect.height;\r\n      } else {\r\n        basePoint.y = rect.top;\r\n      }\r\n    } else {\r\n      if (action === \"r\" || action === \"b\") {\r\n        basePoint.x = rect.left;\r\n        basePoint.y = rect.top;\r\n      } else if (action === \"l\" || action === \"t\") {\r\n        basePoint.x = rect.left + rect.width;\r\n        basePoint.y = rect.top + rect.height;\r\n      }\r\n    }\r\n    \r\n    let center = {\r\n      x: rect.left + rect.width / 2,\r\n      y: rect.top + rect.height / 2\r\n    };\r\n    basePoint = dsf.math.getRotatedPiont(basePoint.x, basePoint.y, center.x, center.y, rect.angle);\r\n    return basePoint\r\n  }\r\n  \r\n  /**\r\n   * 此函数用于求出Rect缩放之后的 left/top/width/height\r\n   * basePoint Rect缩放时的参考点\r\n   * oldRect rect缩放前的拷贝，此对象不变\r\n   * newRect 初始值等于rect缩放前的拷贝，此对象用于计算缩放后的rect\r\n   * 这里传两个rect是为了不在 scaleRect函数每次运行的时候都去声明 newRect，节约性能\r\n   * mousePosition 当前鼠标在 #panel_outer当中的坐标\r\n   * action 缩放的具体动作\r\n   * minSize [minWidth, minHeight]  最小宽高\r\n   * */\r\n  function scaleRect(basePoint, oldRect, newRect, mousePosition, action, minSize) {\r\n    let dist = dsf.math.getDistance(basePoint, mousePosition);\r\n    let angle = dsf.math.getRadina(basePoint, mousePosition, -dsf.math.a2r(oldRect.angle));\r\n    let pos = {\r\n      x: Math.cos(angle) * dist + oldRect.left,\r\n      y: Math.sin(angle) * dist + oldRect.top\r\n    };\r\n    \r\n    let w, h;\r\n    if (action.indexOf(\"r\") >= 0) {\r\n      w = pos.x - oldRect.left;\r\n    } else if (action.indexOf(\"l\") >= 0) {\r\n      w = oldRect.left - pos.x;\r\n    }\r\n    if (action.indexOf(\"b\") >= 0) {\r\n      h = pos.y - oldRect.top;\r\n    } else if (action.indexOf(\"t\") >= 0) {\r\n      h = oldRect.top - pos.y;\r\n    }\r\n    //四个对角度\r\n    if (action.length > 1) {\r\n      let sc = w / oldRect.width;\r\n      newRect.width = oldRect.width * sc;\r\n      newRect.height = oldRect.height * sc;\r\n    } else {\r\n      if (dsf.isDef(w)) {\r\n        newRect.width = w;\r\n      } else {\r\n        newRect.width = oldRect.width;\r\n      }\r\n      if (dsf.isDef(h)) {\r\n        newRect.height = h;\r\n      } else {\r\n        newRect.height = oldRect.height;\r\n      }\r\n    }\r\n    if (newRect.width < minSize[0]) {\r\n      newRect.width = minSize[0];\r\n    }\r\n    if (newRect.height < minSize[1]) {\r\n      newRect.height = minSize[1]\r\n    }\r\n    \r\n    let U = {};\r\n    if (action.length > 1) {\r\n      if (action.indexOf(\"r\") >= 0) {\r\n        U.x = basePoint.x + newRect.width;\r\n      } else {\r\n        if (action.indexOf(\"l\") >= 0) {\r\n          U.x = basePoint.x - newRect.width;\r\n        } else {\r\n          U.x = basePoint.x;\r\n        }\r\n      }\r\n      if (action.indexOf(\"b\") >= 0) {\r\n        U.y = basePoint.y + newRect.height;\r\n      } else {\r\n        if (action.indexOf(\"t\") >= 0) {\r\n          U.y = basePoint.y - newRect.height;\r\n        } else {\r\n          U.y = basePoint.y;\r\n        }\r\n      }\r\n    } else {\r\n      if (action === \"r\" || action === \"b\") {\r\n        U.x = basePoint.x + newRect.width;\r\n        U.y = basePoint.y + newRect.height;\r\n      } else if (action === \"l\" || action === \"t\") {\r\n        U.x = basePoint.x - newRect.width;\r\n        U.y = basePoint.y - newRect.height;\r\n      }\r\n    }\r\n    \r\n    //获取对角距离\r\n    let K = dsf.math.getRotatedPiont(U.x, U.y, basePoint.x, basePoint.y, oldRect.angle)\r\n    //获取旋转中心点\r\n    let M = {\r\n      x: 0.5 * (basePoint.x + K.x),\r\n      y: 0.5 * (basePoint.y + K.y)\r\n    };\r\n    \r\n    let S = dsf.math.getRotatedPiont(basePoint.x, basePoint.y, M.x, M.y, -oldRect.angle);\r\n    \r\n    if (action.length > 1) {\r\n      if (action.indexOf(\"r\") >= 0) {\r\n        newRect.left = S.x;\r\n      } else {\r\n        if (action.indexOf(\"l\") >= 0) {\r\n          newRect.left = S.x - newRect.width;\r\n        } else {\r\n          newRect.left = S.x - newRect.width / 2;\r\n        }\r\n      }\r\n      if (action.indexOf(\"b\") >= 0) {\r\n        newRect.top = S.y\r\n      } else {\r\n        if (action.indexOf(\"t\") >= 0) {\r\n          newRect.top = S.y - newRect.height;\r\n        } else {\r\n          newRect.top = S.y - newRect.height / 2;\r\n        }\r\n      }\r\n    } else {\r\n      if (action === \"r\" || action === \"b\") {\r\n        newRect.left = S.x;\r\n        newRect.top = S.y;\r\n      } else if (action === \"l\" || action === \"t\") {\r\n        newRect.left = S.x - newRect.width;\r\n        newRect.top = S.y - newRect.height;\r\n      }\r\n    }\r\n    \r\n    __parseIntSize(newRect);\r\n    \r\n    return newRect;\r\n  }\r\n  \r\n  /**此函数用于求出Rect旋转之后的 angle\r\n   *center 旋转中心点\r\n   * mousePosition 当前鼠标在 #panel_outer当中的坐标\r\n   * */\r\n  function rotateRect(center, mousePosition) {\r\n    let d = dsf.math.getRadina(center, mousePosition);\r\n    let angle = 360 - 270 + (dsf.math.r2a(d));\r\n    angle = Math.ceil(angle) % 360;\r\n    return angle\r\n  }\r\n  \r\n  //获取seat与选框的宽高比\r\n  function getRatioBySeat2SelectBox(seats, selectBox) {\r\n    const ratio = {};\r\n    _.forEach(seats, item => {\r\n      let obj = _.assign({}, item);\r\n      ratio[item.id] = {\r\n        left: (obj.left - selectBox.left) / selectBox.width,\r\n        top: (obj.top - selectBox.top) / selectBox.height,\r\n        width: obj.width / selectBox.width,\r\n        height: obj.height / selectBox.height\r\n      }\r\n    })\r\n    return ratio\r\n  }\r\n  \r\n  //在选框大小变化之后获取座位新的size\r\n  function getNewSize(seat, oldSelectBox, newSelectBox, action, ratio) {\r\n    const _seat = _.assign({}, seat);\r\n    let ratioSize = ratio[_seat.id];\r\n    _seat.left = newSelectBox.left + newSelectBox.width * ratioSize.left;\r\n    _seat.top = newSelectBox.top + newSelectBox.height * ratioSize.top;\r\n    \r\n    //如果拖动的是4个端点\r\n    if (action.length === 2) {\r\n      let sc = newSelectBox.width / oldSelectBox.width;\r\n      let sc1 = newSelectBox.height / oldSelectBox.height;\r\n      sc = 0.5 * (sc + sc1);\r\n      _seat.width = sc * seat.width;\r\n      _seat.height = sc * seat.height;\r\n    } else if (action.length === 1) {\r\n      _seat.width = newSelectBox.width * ratioSize.width;\r\n      _seat.height = newSelectBox.height * ratioSize.height;\r\n    }\r\n    \r\n    __roundSize(_seat);\r\n    return _seat;\r\n  }\r\n  \r\n  //获取rect的中心锚点\r\n  function getRectCenter(rect) {\r\n    return {\r\n      x: rect.left + rect.width / 2,\r\n      y: rect.top + rect.height / 2\r\n    }\r\n  }\r\n  \r\n  //获取rect 当中4个点中最小的x,y 和最大的x,y\r\n  function getPointRange(rectPoints) {\r\n    let min_x, max_x, min_y, max_y;\r\n    _.forIn(rectPoints, val => {\r\n      //第一次取值\r\n      min_x = min_x || val.x;\r\n      max_x = max_x || val.x;\r\n      min_y = min_y || val.y;\r\n      max_y = max_y || val.y;\r\n      \r\n      min_x = min_x <= val.x ? min_x : val.x;\r\n      max_x = max_x >= val.x ? max_x : val.x;\r\n      min_y = min_y <= val.y ? min_y : val.y;\r\n      max_y = max_y >= val.y ? max_y : val.y;\r\n    })\r\n    \r\n    return {min_x: min_x, min_y: min_y, max_x: max_x, max_y: max_y}\r\n  }\r\n  \r\n  //取整\r\n  function __parseIntSize(rect) {\r\n    rect.top = parseInt(rect.top);\r\n    rect.left = parseInt(rect.left);\r\n    rect.width = parseInt(rect.width);\r\n    rect.height = parseInt(rect.height);\r\n  }\r\n  \r\n  function __roundSize(rect) {\r\n    rect.top = Math.round(rect.top);\r\n    rect.left = Math.round(rect.left);\r\n    rect.width = Math.round(rect.width);\r\n    rect.height = Math.round(rect.height);\r\n  }\r\n  \r\n  //获取选框的位置\r\n  function getSelectPosition(selectedItems) {\r\n    let min_x, max_x, min_y, max_y, rectPoints;\r\n    _.forEach(selectedItems, item => {\r\n      rectPoints = getRectPoint(item);\r\n      _.forIn(rectPoints, val => {\r\n        //第一次取值\r\n        min_x = min_x || val.x;\r\n        max_x = max_x || val.x;\r\n        min_y = min_y || val.y;\r\n        max_y = max_y || val.y;\r\n        \r\n        min_x = min_x <= val.x ? min_x : val.x;\r\n        max_x = max_x >= val.x ? max_x : val.x;\r\n        min_y = min_y <= val.y ? min_y : val.y;\r\n        max_y = max_y >= val.y ? max_y : val.y;\r\n      })\r\n    });\r\n    return {\r\n      left: getExtNum(min_x),\r\n      top: getExtNum(min_y),\r\n      width: getExtNum(max_x - min_x),\r\n      height: getExtNum(max_y - min_y),\r\n      angle: 0,\r\n      visible: true\r\n    }\r\n  }\r\n  \r\n  //小于等于0取floor, 大于0取ceil\r\n  function getExtNum(num) {\r\n    return num < 0 ? Math.floor(num) : Math.ceil(num)\r\n  }\r\n  \r\n  //重置selectPosition\r\n  function restSelectPostion() {\r\n    this.selectPosition = {\r\n      top: 0,\r\n      left: 0,\r\n      width: 0,\r\n      height: 0,\r\n      angle: 0,\r\n      visible: false\r\n    }\r\n  }\r\n  \r\n  //获取除了activeSeat之外，其它所有seats的各个点位置\r\n  function getOtherSeatPoints() {\r\n    const otherSeat = _.filter(this.items, seat => seat.id !== this.activeId);\r\n    return otherSeat.map(seat => getRectPoint(seat, ['lt']));\r\n  }\r\n  \r\n  //计算对齐线的位置\r\n  function computeAlignLine(xy, otherXy, seat) {\r\n    let obj = {}, times = 0;\r\n    for (let i = 0; i < otherXy.length; i++) {\r\n      if (xy.left >= otherXy[i].left - 3 && xy.left <= otherXy[i].left + 3) {\r\n        obj.left = otherXy[i].left;\r\n        times += 1;\r\n        if (seat.angle === 0) {\r\n          seat.left = obj.left;\r\n        }\r\n      }\r\n      \r\n      if (xy.top >= otherXy[i].top - 3 && xy.top <= otherXy[i].top + 3) {\r\n        obj.top = otherXy[i].top;\r\n        times += 1;\r\n        if (seat.angle === 0) {\r\n          seat.top = obj.top;\r\n        }\r\n      }\r\n      \r\n      if (times === 2) break;\r\n    }\r\n    return (obj.left || obj.top) ? obj : null\r\n  }\r\n  \r\n  //将points的x, y坐标提取出来\r\n  function getPointsXy(points) {\r\n    let res = [], obj = {};\r\n    if (_.isArray(points)) {\r\n      _.forEach(points, item => {\r\n        obj = {\r\n          left: Math.round(item.lt.x),\r\n          top: Math.round(item.lt.y)\r\n        }\r\n        res.push(obj);\r\n      })\r\n      return _.uniqWith(res, _.isEqual);\r\n    } else if (_.isObject(points)) {\r\n      return {\r\n        left: Math.round(points.lt.x),\r\n        top: Math.round(points.lt.y)\r\n      }\r\n    }\r\n  }\r\n  \r\n  //获取seat背景的样式\r\n  function getBgSty(obj) {\r\n    const dynamicUrl = dsf.url.getAbsolutePath(obj.bgImg);\r\n    const staticUrl = dsf.url.getWebPath(\"$/img/image.png\")\r\n    const url = obj.bgImg ? dynamicUrl : staticUrl;\r\n    return `center / contain no-repeat url(${url})`\r\n  }\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./seatItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./seatItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./seatItem.vue?vue&type=template&id=01adc810&\"\nimport script from \"./seatItem.vue?vue&type=script&lang=js&\"\nexport * from \"./seatItem.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('01adc810')) {\n      api.createRecord('01adc810', component.options)\n    } else {\n      api.reload('01adc810', component.options)\n    }\n    module.hot.accept(\"./seatItem.vue?vue&type=template&id=01adc810&\", function () {\n      api.rerender('01adc810', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"designer/seat/printingDesign/seatItem.vue\"\nexport default component.exports","<template>\r\n  <div class=\"ds-designer ds-seat-container ds-seat-design\">\r\n    <div class=\"designer-head\">\r\n      <top-tools v-bind.sync=\"postData\" @save-layout=\"saveLayout\"></top-tools>\r\n    </div>\r\n    <div class=\"designer-content\">\r\n      <div class=\"seat-designer-center\">\r\n        <left-tools></left-tools>\r\n        <print-canvas>\r\n          <template v-slot:seat>\r\n            <seat-item v-bind.sync=\"postData\"></seat-item>\r\n          </template>\r\n        </print-canvas>\r\n        <right-tools></right-tools>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import topTools from \"_platform/designer/seat/printingDesign/topTools.vue\";\r\n  import leftTools from \"_platform/designer/seat/printingDesign/leftTools.vue\";\r\n  import rightTools from \"_platform/designer/seat/printingDesign/rightTools.vue\"\r\n  import canvas from \"_platform/designer/seat/printingDesign/canvas.vue\";\r\n  import seatItem from \"_platform/designer/seat/printingDesign/seatItem\";\r\n  \r\n  import {changePanelSizeForBgImage, sysBindShortKey} from \"_platform/designer/seat/func\";\r\n  import ConfigBuilder from \"_platform/designer/seat/util/configBuilder.js\";\r\n\r\n\r\n  export default {\r\n    name: \"DsfSeatDesign\",\r\n    components: {\r\n      topTools,\r\n      leftTools,\r\n      rightTools,\r\n      \"PrintCanvas\": canvas,\r\n      seatItem,\r\n    },\r\n    data() {\r\n      return {\r\n        keyStack: [],\r\n        \r\n        //下面这些为提供给子组件的props\r\n        postData: {\r\n          _id: \"\",\r\n          \r\n          //用于top-tools组件的\r\n          backgroundImage: {},\r\n          canvasSet: {\r\n            width: undefined,\r\n            height: undefined\r\n          },\r\n          hasBg: false,\r\n          \r\n          //用于seat-item组件的\r\n          items: [],\r\n        }\r\n      }\r\n    },\r\n    computed: {},\r\n    watch:{\r\n      \"postData.backgroundImage\"(){\r\n        changePanelSizeForBgImage.call(this);\r\n      }\r\n    },\r\n    \r\n    created() {\r\n      const layoutUrl = dsf.url.getWebPath(\"$/seat_config/seat/printingDesign.js\");\r\n      \r\n      this.$http.importFiles(layoutUrl).then((res) => {\r\n        this.layoutConfig = new ConfigBuilder(printingDesignConfig, this.$route.query.opt);\r\n        this.bindShortKey();\r\n        this.getSeatInfo();\r\n      });\r\n    },\r\n    beforeDestroy() {\r\n      $(document).off(\"keydown\");\r\n      $(document).off(\"keyup\");\r\n    },\r\n    \r\n    methods: {\r\n      saveLayout() {\r\n        if(process.env.NODE_ENV === \"development\"){\r\n          this.saveByDev();\r\n        }\r\n        else {\r\n          this.saveByPub();\r\n        }\r\n      },\r\n      bindShortKey() {\r\n        const stopList = [\"ctrl\", \"ctrl-d\", \"ctrl-s\"];\r\n        sysBindShortKey(this.keyStack, stopList);\r\n      },\r\n      saveByDev(){\r\n        const purePostData = getPurePostData.call(this);\r\n        const id = this.$route.query.id || dsf.uuid();\r\n        purePostData._id = id;\r\n        \r\n        localStorage.setItem(\"printing_\"+id, JSON.stringify(purePostData));\r\n        const originQuery = this.$route.query;\r\n        const _query = Object.assign({}, originQuery, {id: id})\r\n        this.$router.replace({path: this.$route.path, query: _query})\r\n      },\r\n      saveByPub(){\r\n        const purePostData = getPurePostData.call(this);\r\n        const data = {\r\n          \"pageName\": \"edit\",\r\n          \"namespace\": \"dsfa.printing.designcontent\",\r\n          \"data\": JSON.stringify(purePostData)\r\n        }\r\n        const loadVm = dsf.layer.loading();\r\n        this.$http.post(this.layoutConfig.saveLayoutUrl, data)\r\n          .done(res => {\r\n            if (!res.success) {\r\n              dsf.layer.message(\"证书套打保存失败\", false);\r\n              return\r\n            }\r\n            \r\n            this.postData._id = res.data._id;\r\n            this.$router.replace({path: this.$route.path, query: {id: res.data._id}})\r\n            dsf.layer.message(\"保存成功\");\r\n          })\r\n          .error(err => {\r\n            dsf.layer.message(\"证书套打保存失败\", false);\r\n          })\r\n          .always(() => {\r\n            dsf.layer.closeLoading(loadVm);\r\n          })\r\n      },\r\n      \r\n      getSeatInfo() {\r\n        if (process.env.NODE_ENV === \"development\"){\r\n          this.getInfoDev()\r\n        }\r\n        else {\r\n          this.getInfoPub()\r\n        }\r\n      },\r\n      getInfoDev(){\r\n       const id = this.$route.query.id;\r\n       if (!id) return;\r\n       const data = JSON.parse(localStorage.getItem(\"printing_\" + id));\r\n       if (data){\r\n         if (_.isEmpty(data.canvasSet)){\r\n           data.canvasSet = {\r\n             width: undefined,\r\n             height: undefined\r\n           }\r\n         }\r\n         this.postData = data;\r\n       }\r\n      },\r\n      getInfoPub(){\r\n        const id = this.$route.query.id;\r\n      }\r\n    },\r\n  }\r\n  \r\n  function getPurePostData() {\r\n    const purePostData = _.cloneDeep(this.postData);\r\n    purePostData.items.forEach(el => {\r\n      el.isFrozenSty = false\r\n    })\r\n    return purePostData;\r\n  }\r\n\r\n</script>\r\n\r\n<style type=\"text/scss\" lang=\"scss\">\r\n  @import \"~_platform/assets/styles/designer/seatDesign.scss\";\r\n</style>","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./printingDesign.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./printingDesign.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./printingDesign.vue?vue&type=template&id=df668332&\"\nimport script from \"./printingDesign.vue?vue&type=script&lang=js&\"\nexport * from \"./printingDesign.vue?vue&type=script&lang=js&\"\nimport style0 from \"./printingDesign.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('df668332')) {\n      api.createRecord('df668332', component.options)\n    } else {\n      api.reload('df668332', component.options)\n    }\n    module.hot.accept(\"./printingDesign.vue?vue&type=template&id=df668332&\", function () {\n      api.rerender('df668332', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"designer/seat/printingDesign.vue\"\nexport default component.exports"],"sourceRoot":""}